/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/main.ts");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./node_modules/@aurelia/debug/dist/esnext/binding/unparser.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@aurelia/debug/dist/esnext/binding/unparser.js ***!
  \*********************************************************************/
/*! exports provided: enableImprovedExpressionDebugging, adoptDebugMethods, Unparser */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "enableImprovedExpressionDebugging", function() { return enableImprovedExpressionDebugging; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "adoptDebugMethods", function() { return adoptDebugMethods; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Unparser", function() { return Unparser; });
/* harmony import */ var _aurelia_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/runtime */ "./node_modules/@aurelia/runtime/dist/esnext/index.js");

const astTypeMap = [
    { type: _aurelia_runtime__WEBPACK_IMPORTED_MODULE_0__["AccessKeyedExpression"], name: 'AccessKeyedExpression' },
    { type: _aurelia_runtime__WEBPACK_IMPORTED_MODULE_0__["AccessMemberExpression"], name: 'AccessMemberExpression' },
    { type: _aurelia_runtime__WEBPACK_IMPORTED_MODULE_0__["AccessScopeExpression"], name: 'AccessScopeExpression' },
    { type: _aurelia_runtime__WEBPACK_IMPORTED_MODULE_0__["AccessThisExpression"], name: 'AccessThisExpression' },
    { type: _aurelia_runtime__WEBPACK_IMPORTED_MODULE_0__["ArrayBindingPattern"], name: 'ArrayBindingPattern' },
    { type: _aurelia_runtime__WEBPACK_IMPORTED_MODULE_0__["ArrayLiteralExpression"], name: 'ArrayLiteralExpression' },
    { type: _aurelia_runtime__WEBPACK_IMPORTED_MODULE_0__["AssignExpression"], name: 'AssignExpression' },
    { type: _aurelia_runtime__WEBPACK_IMPORTED_MODULE_0__["BinaryExpression"], name: 'BinaryExpression' },
    { type: _aurelia_runtime__WEBPACK_IMPORTED_MODULE_0__["BindingBehaviorExpression"], name: 'BindingBehaviorExpression' },
    { type: _aurelia_runtime__WEBPACK_IMPORTED_MODULE_0__["BindingIdentifier"], name: 'BindingIdentifier' },
    { type: _aurelia_runtime__WEBPACK_IMPORTED_MODULE_0__["CallFunctionExpression"], name: 'CallFunctionExpression' },
    { type: _aurelia_runtime__WEBPACK_IMPORTED_MODULE_0__["CallMemberExpression"], name: 'CallMemberExpression' },
    { type: _aurelia_runtime__WEBPACK_IMPORTED_MODULE_0__["CallScopeExpression"], name: 'CallScopeExpression' },
    { type: _aurelia_runtime__WEBPACK_IMPORTED_MODULE_0__["ConditionalExpression"], name: 'ConditionalExpression' },
    { type: _aurelia_runtime__WEBPACK_IMPORTED_MODULE_0__["ForOfStatement"], name: 'ForOfStatement' },
    { type: _aurelia_runtime__WEBPACK_IMPORTED_MODULE_0__["HtmlLiteralExpression"], name: 'HtmlLiteralExpression' },
    { type: _aurelia_runtime__WEBPACK_IMPORTED_MODULE_0__["Interpolation"], name: 'Interpolation' },
    { type: _aurelia_runtime__WEBPACK_IMPORTED_MODULE_0__["ObjectBindingPattern"], name: 'ObjectBindingPattern' },
    { type: _aurelia_runtime__WEBPACK_IMPORTED_MODULE_0__["ObjectLiteralExpression"], name: 'ObjectLiteralExpression' },
    { type: _aurelia_runtime__WEBPACK_IMPORTED_MODULE_0__["PrimitiveLiteralExpression"], name: 'PrimitiveLiteralExpression' },
    { type: _aurelia_runtime__WEBPACK_IMPORTED_MODULE_0__["TaggedTemplateExpression"], name: 'TaggedTemplateExpression' },
    { type: _aurelia_runtime__WEBPACK_IMPORTED_MODULE_0__["TemplateExpression"], name: 'TemplateExpression' },
    { type: _aurelia_runtime__WEBPACK_IMPORTED_MODULE_0__["UnaryExpression"], name: 'UnaryExpression' },
    { type: _aurelia_runtime__WEBPACK_IMPORTED_MODULE_0__["ValueConverterExpression"], name: 'ValueConverterExpression' }
];
function enableImprovedExpressionDebugging() {
    astTypeMap.forEach(x => { adoptDebugMethods(x.type, x.name); });
}
/** @internal */
function adoptDebugMethods($type, name) {
    $type.prototype.toString = function () { return Unparser.unparse(this); };
}
class Unparser {
    constructor() {
        this.text = '';
    }
    static unparse(expr) {
        const visitor = new Unparser();
        expr.accept(visitor);
        return visitor.text;
    }
    visitAccessMember(expr) {
        expr.object.accept(this);
        this.text += `.${expr.name}`;
    }
    visitAccessKeyed(expr) {
        expr.object.accept(this);
        this.text += '[';
        expr.key.accept(this);
        this.text += ']';
    }
    visitAccessThis(expr) {
        if (expr.ancestor === 0) {
            this.text += '$this';
            return;
        }
        this.text += '$parent';
        let i = expr.ancestor - 1;
        while (i--) {
            this.text += '.$parent';
        }
    }
    visitAccessScope(expr) {
        let i = expr.ancestor;
        while (i--) {
            this.text += '$parent.';
        }
        this.text += expr.name;
    }
    visitArrayLiteral(expr) {
        const elements = expr.elements;
        this.text += '[';
        for (let i = 0, length = elements.length; i < length; ++i) {
            if (i !== 0) {
                this.text += ',';
            }
            elements[i].accept(this);
        }
        this.text += ']';
    }
    visitObjectLiteral(expr) {
        const keys = expr.keys;
        const values = expr.values;
        this.text += '{';
        for (let i = 0, length = keys.length; i < length; ++i) {
            if (i !== 0) {
                this.text += ',';
            }
            this.text += `'${keys[i]}':`;
            values[i].accept(this);
        }
        this.text += '}';
    }
    visitPrimitiveLiteral(expr) {
        this.text += '(';
        if (typeof expr.value === 'string') {
            const escaped = expr.value.replace(/'/g, '\\\'');
            this.text += `'${escaped}'`;
        }
        else {
            this.text += `${expr.value}`;
        }
        this.text += ')';
    }
    visitCallFunction(expr) {
        this.text += '(';
        expr.func.accept(this);
        this.writeArgs(expr.args);
        this.text += ')';
    }
    visitCallMember(expr) {
        this.text += '(';
        expr.object.accept(this);
        this.text += `.${expr.name}`;
        this.writeArgs(expr.args);
        this.text += ')';
    }
    visitCallScope(expr) {
        this.text += '(';
        let i = expr.ancestor;
        while (i--) {
            this.text += '$parent.';
        }
        this.text += expr.name;
        this.writeArgs(expr.args);
        this.text += ')';
    }
    visitTemplate(expr) {
        const { cooked, expressions } = expr;
        const length = expressions.length;
        this.text += '`';
        this.text += cooked[0];
        for (let i = 0; i < length; i++) {
            expressions[i].accept(this);
            this.text += cooked[i + 1];
        }
        this.text += '`';
    }
    visitTaggedTemplate(expr) {
        const { cooked, expressions } = expr;
        const length = expressions.length;
        expr.func.accept(this);
        this.text += '`';
        this.text += cooked[0];
        for (let i = 0; i < length; i++) {
            expressions[i].accept(this);
            this.text += cooked[i + 1];
        }
        this.text += '`';
    }
    visitUnary(expr) {
        this.text += `(${expr.operation}`;
        if (expr.operation.charCodeAt(0) >= /* a */ 97) {
            this.text += ' ';
        }
        expr.expression.accept(this);
        this.text += ')';
    }
    visitBinary(expr) {
        this.text += '(';
        expr.left.accept(this);
        if (expr.operation.charCodeAt(0) === /* i */ 105) {
            this.text += ` ${expr.operation} `;
        }
        else {
            this.text += expr.operation;
        }
        expr.right.accept(this);
        this.text += ')';
    }
    visitConditional(expr) {
        this.text += '(';
        expr.condition.accept(this);
        this.text += '?';
        expr.yes.accept(this);
        this.text += ':';
        expr.no.accept(this);
        this.text += ')';
    }
    visitAssign(expr) {
        this.text += '(';
        expr.target.accept(this);
        this.text += '=';
        expr.value.accept(this);
        this.text += ')';
    }
    visitValueConverter(expr) {
        const args = expr.args;
        expr.expression.accept(this);
        this.text += `|${expr.name}`;
        for (let i = 0, length = args.length; i < length; ++i) {
            this.text += ':';
            args[i].accept(this);
        }
    }
    visitBindingBehavior(expr) {
        const args = expr.args;
        expr.expression.accept(this);
        this.text += `&${expr.name}`;
        for (let i = 0, length = args.length; i < length; ++i) {
            this.text += ':';
            args[i].accept(this);
        }
    }
    visitArrayBindingPattern(expr) {
        const elements = expr.elements;
        this.text += '[';
        for (let i = 0, length = elements.length; i < length; ++i) {
            if (i !== 0) {
                this.text += ',';
            }
            elements[i].accept(this);
        }
        this.text += ']';
    }
    visitObjectBindingPattern(expr) {
        const keys = expr.keys;
        const values = expr.values;
        this.text += '{';
        for (let i = 0, length = keys.length; i < length; ++i) {
            if (i !== 0) {
                this.text += ',';
            }
            this.text += `'${keys[i]}':`;
            values[i].accept(this);
        }
        this.text += '}';
    }
    visitBindingIdentifier(expr) {
        this.text += expr.name;
    }
    visitHtmlLiteral(expr) { throw new Error('visitHtmlLiteral'); }
    visitForOfStatement(expr) {
        expr.declaration.accept(this);
        this.text += ' of ';
        expr.iterable.accept(this);
    }
    visitInterpolation(expr) {
        const { parts, expressions } = expr;
        const length = expressions.length;
        this.text += '${';
        this.text += parts[0];
        for (let i = 0; i < length; i++) {
            expressions[i].accept(this);
            this.text += parts[i + 1];
        }
        this.text += '}';
    }
    writeArgs(args) {
        this.text += '(';
        for (let i = 0, length = args.length; i < length; ++i) {
            if (i !== 0) {
                this.text += ',';
            }
            args[i].accept(this);
        }
        this.text += ')';
    }
}
//# sourceMappingURL=unparser.js.map

/***/ }),

/***/ "./node_modules/@aurelia/debug/dist/esnext/configuration.js":
/*!******************************************************************!*\
  !*** ./node_modules/@aurelia/debug/dist/esnext/configuration.js ***!
  \******************************************************************/
/*! exports provided: DebugConfiguration, TraceConfiguration */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DebugConfiguration", function() { return DebugConfiguration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TraceConfiguration", function() { return TraceConfiguration; });
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _binding_unparser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./binding/unparser */ "./node_modules/@aurelia/debug/dist/esnext/binding/unparser.js");
/* harmony import */ var _reporter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./reporter */ "./node_modules/@aurelia/debug/dist/esnext/reporter.js");
/* harmony import */ var _tracer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./tracer */ "./node_modules/@aurelia/debug/dist/esnext/tracer.js");




const DebugConfiguration = {
    register(container) {
        _reporter__WEBPACK_IMPORTED_MODULE_2__["Reporter"].write(2);
        Object.assign(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"], _reporter__WEBPACK_IMPORTED_MODULE_2__["Reporter"]);
        Object(_binding_unparser__WEBPACK_IMPORTED_MODULE_1__["enableImprovedExpressionDebugging"])();
    }
};
const TraceConfiguration = {
    register(container) {
        Object.assign(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Tracer"], _tracer__WEBPACK_IMPORTED_MODULE_3__["DebugTracer"]);
    }
};
//# sourceMappingURL=configuration.js.map

/***/ }),

/***/ "./node_modules/@aurelia/debug/dist/esnext/index.js":
/*!**********************************************************!*\
  !*** ./node_modules/@aurelia/debug/dist/esnext/index.js ***!
  \**********************************************************/
/*! exports provided: DebugConfiguration, TraceConfiguration, DebugTracer, stringifyLifecycleFlags, Unparser */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _configuration__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./configuration */ "./node_modules/@aurelia/debug/dist/esnext/configuration.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DebugConfiguration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_0__["DebugConfiguration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TraceConfiguration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_0__["TraceConfiguration"]; });

/* harmony import */ var _tracer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./tracer */ "./node_modules/@aurelia/debug/dist/esnext/tracer.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DebugTracer", function() { return _tracer__WEBPACK_IMPORTED_MODULE_1__["DebugTracer"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "stringifyLifecycleFlags", function() { return _tracer__WEBPACK_IMPORTED_MODULE_1__["stringifyLifecycleFlags"]; });

/* harmony import */ var _binding_unparser__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./binding/unparser */ "./node_modules/@aurelia/debug/dist/esnext/binding/unparser.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Unparser", function() { return _binding_unparser__WEBPACK_IMPORTED_MODULE_2__["Unparser"]; });




//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./node_modules/@aurelia/debug/dist/esnext/reporter.js":
/*!*************************************************************!*\
  !*** ./node_modules/@aurelia/debug/dist/esnext/reporter.js ***!
  \*************************************************************/
/*! exports provided: Reporter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Reporter", function() { return Reporter; });
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");

function applyFormat(message, ...params) {
    while (message.includes('%s')) {
        message = message.replace('%s', String(params.shift()));
    }
    return message;
}
const Reporter = {
    ..._aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"],
    get level() {
        return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].level;
    },
    write(code, ...params) {
        const info = getMessageInfoForCode(code);
        const message = `Code ${code}: ${info.message}`;
        switch (info.level) {
            case 1 /* debug */:
                if (this.level <= 1 /* debug */) {
                    console.debug(message, ...params);
                }
                break;
            case 2 /* info */:
                if (this.level <= 2 /* info */) {
                    console.info(message, ...params);
                }
                break;
            case 3 /* warn */:
                if (this.level <= 3 /* warn */) {
                    console.warn(message, ...params);
                }
                break;
            case 4 /* error */: {
                throw this.error(code, ...params);
            }
        }
    },
    error(code, ...params) {
        const info = getMessageInfoForCode(code);
        const error = new Error(`Code ${code}: ${applyFormat(info.message, ...params)}`);
        error.data = params;
        return error;
    }
};
function getMessageInfoForCode(code) {
    const info = codeLookup[code];
    return info !== undefined ? info : createInvalidCodeMessageInfo(code);
}
function createInvalidCodeMessageInfo(code) {
    return {
        level: 4 /* error */,
        message: `Attempted to report with unknown code ${code}.`
    };
}
const codeLookup = {
    0: {
        level: 3 /* warn */,
        message: 'Cannot add observers to object.'
    },
    1: {
        level: 3 /* warn */,
        message: 'Cannot observe property of object.'
    },
    2: {
        level: 2 /* info */,
        message: 'Starting application in debug mode.'
    },
    3: {
        level: 4 /* error */,
        message: 'Runtime expression compilation is only available when including JIT support.'
    },
    4: {
        level: 4 /* error */,
        message: 'Invalid animation direction.'
    },
    5: {
        level: 4 /* error */,
        message: 'key/value cannot be null or undefined. Are you trying to inject/register something that doesn\'t exist with DI?'
    },
    6: {
        level: 4 /* error */,
        message: 'Invalid resolver strategy specified.'
    },
    7: {
        level: 4 /* error */,
        message: 'Constructor Parameter with index cannot be null or undefined. Are you trying to inject/register something that doesn\'t exist with DI?'
    },
    8: {
        level: 4 /* error */,
        message: 'Self binding behavior only supports events.'
    },
    9: {
        level: 4 /* error */,
        message: 'The updateTrigger binding behavior requires at least one event name argument: eg <input value.bind="firstName & updateTrigger:\'blur\'">'
    },
    10: {
        level: 4 /* error */,
        message: 'The updateTrigger binding behavior can only be applied to two-way/ from-view bindings on input/select elements.'
    },
    11: {
        level: 4 /* error */,
        message: 'Only property bindings and string interpolation bindings can be signaled. Trigger, delegate and call bindings cannot be signaled.'
    },
    12: {
        level: 4 /* error */,
        message: 'Signal name is required.'
    },
    14: {
        level: 4 /* error */,
        message: 'Property cannot be assigned.'
    },
    15: {
        level: 4 /* error */,
        message: 'Unexpected call context.'
    },
    16: {
        level: 4 /* error */,
        message: 'A dependency registration is missing for the interface %s.'
    },
    17: {
        level: 4 /* error */,
        message: 'You can only define one default implementation for an interface.'
    },
    18: {
        level: 4 /* error */,
        message: 'You cannot observe a setter only property.'
    },
    19: {
        level: 4 /* error */,
        message: 'Value for expression is non-repeatable.'
    },
    20: {
        level: 4 /* error */,
        message: 'No template compiler found with the specified name. JIT support or a custom compiler is required.'
    },
    21: {
        level: 4 /* error */,
        message: 'You cannot combine the containerless custom element option with Shadow DOM.'
    },
    22: {
        level: 4 /* error */,
        message: 'A containerless custom element cannot be the root component of an application.'
    },
    30: {
        level: 4 /* error */,
        message: 'There are more targets than there are target instructions.'
    },
    31: {
        level: 4 /* error */,
        message: 'There are more target instructions than there are targets.'
    },
    100: {
        level: 4 /* error */,
        message: 'Invalid start of expression.'
    },
    101: {
        level: 4 /* error */,
        message: 'Unconsumed token.'
    },
    102: {
        level: 4 /* error */,
        message: 'Double dot and spread operators are not supported.'
    },
    103: {
        level: 4 /* error */,
        message: 'Invalid member expression.'
    },
    104: {
        level: 4 /* error */,
        message: 'Unexpected end of expression.'
    },
    105: {
        level: 4 /* error */,
        message: 'Expected identifier.'
    },
    106: {
        level: 4 /* error */,
        message: 'Invalid BindingIdentifier at left hand side of "of".'
    },
    107: {
        level: 4 /* error */,
        message: 'Invalid or unsupported property definition in object literal.'
    },
    108: {
        level: 4 /* error */,
        message: 'Unterminated quote in string literal.'
    },
    109: {
        level: 4 /* error */,
        message: 'Unterminated template string.'
    },
    110: {
        level: 4 /* error */,
        message: 'Missing expected token.'
    },
    111: {
        level: 4 /* error */,
        message: 'Unexpected character.'
    },
    150: {
        level: 4 /* error */,
        message: 'Left hand side of expression is not assignable.'
    },
    151: {
        level: 4 /* error */,
        message: 'Unexpected keyword "of"'
    },
    401: {
        level: 3 /* warn */,
        message: `AttributePattern is missing a handler for '%s'.`
    },
    402: {
        level: 3 /* warn */,
        message: `AttributePattern handler for '%s' is not a function.`
    },
    800: {
        level: 4 /* error */,
        message: `Property '%s' is being dirty-checked.`
    },
    801: {
        level: 3 /* warn */,
        message: `Property '%s' is being dirty-checked.`
    },
    2000: {
        level: 4 /* error */,
        message: 'Router has not been activated.'
    },
    2001: {
        level: 4 /* error */,
        message: 'Router has already been activated.'
    },
    2002: {
        level: 4 /* error */,
        message: 'Failed to resolve all viewports.'
    },
    2003: {
        level: 4 /* error */,
        message: 'Browser navigation has already been activated.'
    },
    2004: {
        level: 4 /* error */,
        message: 'LinkHandler has already been activated.'
    },
    1001: {
        level: 2 /* info */,
        message: 'DOM already initialized. Destroying and re-initializing..'
    },
    10000: {
        level: 1 /* debug */,
        message: '%s'
    }
};
//# sourceMappingURL=reporter.js.map

/***/ }),

/***/ "./node_modules/@aurelia/debug/dist/esnext/tracer.js":
/*!***********************************************************!*\
  !*** ./node_modules/@aurelia/debug/dist/esnext/tracer.js ***!
  \***********************************************************/
/*! exports provided: DebugTracer, stringifyLifecycleFlags */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DebugTracer", function() { return DebugTracer; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "stringifyLifecycleFlags", function() { return stringifyLifecycleFlags; });
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");

const marker = {
    objName: 'marker',
    methodName: 'noop',
    params: _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["PLATFORM"].emptyArray,
    depth: -1,
    prev: null,
    next: null
};
class TraceInfo {
    constructor(objName, methodName, params) {
        this.objName = objName;
        this.methodName = methodName;
        this.params = params;
        this.objName = objName;
        this.methodName = methodName;
        this.depth = TraceInfo.stack.length;
        this.params = params;
        this.next = marker;
        this.prev = TraceInfo.tail;
        TraceInfo.tail.next = this;
        TraceInfo.tail = this;
        TraceInfo.stack.push(this);
    }
    static reset() {
        let current = TraceInfo.head;
        let next = null;
        while (current != null) {
            next = current.next;
            current.next = null;
            current.prev = null;
            current.params = null;
            current = next;
        }
        TraceInfo.head = marker;
        TraceInfo.tail = marker;
        TraceInfo.stack = [];
    }
    static enter(objName, methodName, params) {
        return new TraceInfo(objName, methodName, params);
    }
    static leave() {
        return TraceInfo.stack.pop();
    }
}
TraceInfo.head = marker;
TraceInfo.tail = marker;
TraceInfo.stack = [];
const DebugTracer = {
    ..._aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Tracer"],
    /**
     * A convenience property for the user to conditionally call the tracer.
     * This saves unnecessary `noop` and `slice` calls in non-AOT scenarios even if debugging is disabled.
     * In AOT these calls will simply be removed entirely.
     *
     * This property **only** turns on tracing if `@aurelia/debug` is included and configured as well.
     */
    enabled: false,
    liveLoggingEnabled: false,
    liveWriter: null,
    /**
     * Call this at the start of a method/function.
     * Each call to `enter` **must** have an accompanying call to `leave` for the tracer to work properly.
     *
     * @param objName - Any human-friendly name to identify the traced object with.
     * @param methodName - Any human-friendly name to identify the traced method with.
     * @param args - Pass in `Array.prototype.slice.call(arguments)` to also trace the parameters, or `null` if this is not needed (to save memory/cpu)
     */
    enter(objName, methodName, args) {
        if (this.enabled) {
            const info = TraceInfo.enter(objName, methodName, args);
            if (this.liveLoggingEnabled) {
                this.liveWriter.write(info);
            }
        }
    },
    /**
     * Call this at the end of a method/function. Pops one trace item off the stack.
     */
    leave() {
        if (this.enabled) {
            TraceInfo.leave();
        }
    },
    /**
     * Writes only the trace info leading up to the current method call.
     *
     * @param writer - An object to write the output to.
     */
    writeStack(writer) {
        let i = 0;
        const stack = TraceInfo.stack;
        const len = stack.length;
        while (i < len) {
            writer.write(stack[i]);
            ++i;
        }
    },
    /**
     * Writes all trace info captured since the previous flushAll operation.
     *
     * @param writer - An object to write the output to. Can be null to simply reset the tracer state.
     */
    flushAll(writer) {
        if (writer != null) {
            let current = TraceInfo.head.next; // skip the marker
            while (current != null && current !== marker) {
                writer.write(current);
                current = current.next;
            }
        }
        TraceInfo.reset();
    },
    enableLiveLogging,
    /**
     * Stops writing out each trace info item as they are traced.
     */
    disableLiveLogging() {
        this.liveLoggingEnabled = false;
        this.liveWriter = null;
    }
};
const defaultOptions = {
    rendering: true,
    binding: true,
    observation: true,
    beforeAttach: true,
    mounting: true,
    di: true,
    lifecycle: true,
    jit: true
};
function enableLiveLogging(optionsOrWriter) {
    this.liveLoggingEnabled = true;
    if (optionsOrWriter && 'write' in optionsOrWriter) {
        this.liveWriter = optionsOrWriter;
    }
    else {
        const options = optionsOrWriter !== undefined ? optionsOrWriter : defaultOptions;
        this.liveWriter = createLiveTraceWriter(options);
    }
}
const toString = Object.prototype.toString;
function flagsText(info, i = 0) {
    if (info.params != null && info.params.length > i) {
        return stringifyLifecycleFlags(info.params[i]);
    }
    return 'none';
}
function _ctorName(obj) {
    let name;
    if (obj === undefined) {
        name = 'undefined';
    }
    else if (obj === null) {
        name = 'null';
    }
    else if (obj.constructor !== undefined) {
        if (obj.constructor.description) {
            name = `Resource{'${obj.constructor.description.name}'}`;
        }
        else {
            name = obj.constructor.name;
        }
    }
    else if (typeof obj === 'string') {
        name = `'${obj}'`;
    }
    else {
        name = toString.call(obj);
    }
    return name;
}
function ctorName(info, i = 0) {
    if (info.params != null && info.params.length > i) {
        return _ctorName(info.params[i]);
    }
    return 'undefined';
}
function scopeText(info, i = 0) {
    let $ctorName;
    if (info.params != null && info.params.length > i) {
        const $scope = info.params[i];
        if ($scope != null && $scope.bindingContext != null) {
            $ctorName = _ctorName($scope.bindingContext);
        }
        else {
            $ctorName = 'undefined';
        }
        return `Scope{${$ctorName}}`;
    }
    return 'undefined';
}
function keyText(info, i = 0) {
    if (info.params != null && info.params.length > i) {
        const $key = info.params[i];
        if (typeof $key === 'string') {
            return `'${$key}'`;
        }
        if ($key !== undefined && Reflect.has($key, 'friendlyName')) {
            return $key['friendlyName'];
        }
        return _ctorName($key);
    }
    return 'undefined';
}
function primitive(info, i = 0) {
    if (info.params != null && info.params.length > i) {
        const $key = info.params[i];
        if (typeof $key === 'string') {
            return `'${$key}'`;
        }
        return $key.toString();
    }
    return 'undefined';
}
const RenderingArgsProcessor = {
    $hydrate(info) {
        return flagsText(info);
    },
    render(info) {
        return `${flagsText(info)},IDOM,IContainer,${ctorName(info, 3)}`;
    },
    addBinding(info) {
        return `${ctorName(info)},${ctorName(info, 1)}`;
    },
    addComponent(info) {
        return `${ctorName(info)},${ctorName(info, 1)}`;
    }
};
const BindingArgsProcessor = {
    $bind(info) {
        return flagsText(info);
    },
    $unbind(info) {
        return flagsText(info);
    },
    connect(info) {
        return flagsText(info);
    },
    // currently only observers trace constructor calls but keep an eye on this if others are added, then we'd need additional filtering
    constructor(info) {
        switch (info.objName) {
            case 'ArrayObserver':
            case 'MapObserver':
            case 'SetObserver':
                return flagsText(info);
            case 'SetterObserver':
            case 'BindableObserver':
                return `${flagsText(info)},${ctorName(info, 1)},${primitive(info, 2)}`;
            case 'ProxyObserver':
                return ctorName(info);
            case 'ProxySubscriberCollection':
            case 'DirtyCheckProperty':
                return `${ctorName(info, 1)},${primitive(info, 2)}`;
            case 'PrimitiveObserver':
            case 'PropertyAccessor':
                return `${ctorName(info)},${primitive(info, 1)}`;
            default:
                return '';
        }
    },
    lockedBind(info) {
        return flagsText(info);
    },
    lockedUnbind(info) {
        return flagsText(info);
    },
    InternalObserversLookup(info) {
        return `${flagsText(info)},${ctorName(info, 1)},${primitive(info, 2)}`;
    },
    BindingContext(info) {
        switch (info.methodName) {
            case 'get':
                return `${scopeText(info)},${primitive(info, 1)},${primitive(info, 2)},${flagsText(info, 3)}`;
            case 'getObservers':
                return flagsText(info);
            default:
                return 'unknown';
        }
    },
    Scope(info) {
        switch (info.methodName) {
            case 'create':
                return `${flagsText(info)},${ctorName(info, 1)},${ctorName(info, 2)}`;
            case 'fromOverride':
                return `${flagsText(info)},${ctorName(info, 1)}`;
            case 'fromParent':
                return `${flagsText(info)},${scopeText(info, 1)},${ctorName(info, 2)}`;
            default:
                return 'unknown';
        }
    },
    OverrideContext(info) {
        switch (info.methodName) {
            case 'create':
                return `${flagsText(info)},${ctorName(info, 1)},${ctorName(info, 2)}`;
            case 'getObservers':
                return '';
            default:
                return 'unknown';
        }
    }
};
const ObservationArgsProcessor = {
    callSource(info) {
        const names = [];
        switch (info.objName) {
            case 'Listener':
                return (info.params[0]).type;
            case 'CallBinding':
                if (info.params != null) {
                    for (let i = 0, ii = info.params.length; i < ii; ++i) {
                        names.push(ctorName(info, i));
                    }
                }
                return names.join(',');
            default:
                return 'unknown';
        }
    },
    setValue(info) {
        let valueText;
        const value = info.params[0];
        switch (typeof value) {
            case 'undefined':
                valueText = 'undefined';
                break;
            case 'object':
                if (value === null) {
                    valueText = 'null';
                }
                else {
                    valueText = _ctorName(value);
                }
                break;
            case 'string':
                valueText = `'${value}'`;
                break;
            case 'number':
                valueText = value.toString();
                break;
            default:
                valueText = _ctorName(value);
        }
        return `${valueText},${flagsText(info, 1)}`;
    },
    flush(info) {
        return flagsText(info);
    },
    handleChange(info) {
        return `${primitive(info)},${primitive(info, 1)},${flagsText(info, 2)}`;
    },
    lockScope(info) {
        return scopeText(info);
    }
};
const AttachingArgsProcessor = {
    $attach(info) {
        return flagsText(info);
    },
    $detach(info) {
        return flagsText(info);
    },
    $cache(info) {
        return flagsText(info);
    },
    hold(info) {
        return `Node{'${(info.params[0]).textContent}'}`;
    },
    release(info) {
        return flagsText(info);
    }
};
const MountingArgsProcessor = {
    $mount(info) {
        return flagsText(info);
    },
    $unmount(info) {
        return flagsText(info);
    },
    project(info) {
        return ctorName(info);
    },
    take(info) {
        return ctorName(info);
    }
};
const DIArgsProcessor = {
    construct(info) {
        return ctorName(info);
    },
    Container(info) {
        const names = [];
        switch (info.methodName) {
            case 'get':
            case 'getAll':
                return keyText(info);
            case 'register':
                if (info.params != null) {
                    for (let i = 0, ii = info.params.length; i < ii; ++i) {
                        names.push(keyText(info, i));
                    }
                }
                return names.join(',');
            case 'createChild':
                return '';
            default:
                return 'unknown';
        }
    }
};
const LifecycleArgsProcessor = {
    Lifecycle(info) {
        switch (info.methodName.slice(0, 3)) {
            case 'beg':
                return '';
            case 'enq':
                return ctorName(info);
            case 'end':
            case 'pro':
                return flagsText(info);
            default:
                return 'unknown';
        }
    },
    CompositionCoordinator(info) {
        switch (info.methodName) {
            case 'enqueue':
                return 'IController';
            case 'swap':
                return `IController,${flagsText(info, 1)}`;
            case 'processNext':
                return '';
            default:
                return 'unknown';
        }
    },
    AggregateLifecycleTask(info) {
        switch (info.methodName) {
            case 'addTask':
            case 'removeTask':
                return ctorName(info);
            case 'complete':
                return `${primitive(info, 2)}`;
            default:
                return 'unknown';
        }
    }
};
const JitArgsProcessor = {
    TemplateBinder(info) {
        return ''; // TODO
    }
};
function createLiveTraceWriter(options) {
    const Processors = {};
    if (options.rendering) {
        Object.assign(Processors, RenderingArgsProcessor);
    }
    if (options.binding) {
        Object.assign(Processors, BindingArgsProcessor);
    }
    if (options.observation) {
        Object.assign(Processors, ObservationArgsProcessor);
    }
    if (options.beforeAttach) {
        Object.assign(Processors, AttachingArgsProcessor);
    }
    if (options.mounting) {
        Object.assign(Processors, MountingArgsProcessor);
    }
    if (options.di) {
        Object.assign(Processors, DIArgsProcessor);
    }
    if (options.lifecycle) {
        Object.assign(Processors, LifecycleArgsProcessor);
    }
    if (options.jit) {
        Object.assign(Processors, JitArgsProcessor);
    }
    return {
        write(info) {
            let output;
            if (Processors[info.methodName] !== undefined) {
                output = Processors[info.methodName](info);
            }
            else if (Processors[info.objName] !== undefined) {
                output = Processors[info.objName](info);
            }
            else {
                return;
            }
            _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].write(10000, `${'-'.repeat(info.depth)}${info.objName}.${info.methodName}(${output})`);
        }
    };
}
function stringifyLifecycleFlags(flags) {
    const flagNames = [];
    if (flags & 2097152 /* mustEvaluate */) {
        flagNames.push('mustEvaluate');
    }
    if (flags & 16777216 /* isCollectionMutation */) {
        flagNames.push('isCollectionMutation');
    }
    if (flags & 16 /* updateTargetInstance */) {
        flagNames.push('updateTargetInstance');
    }
    if (flags & 32 /* updateSourceExpression */) {
        flagNames.push('updateSourceExpression');
    }
    if (flags & 64 /* fromAsyncFlush */) {
        flagNames.push('fromAsyncFlush');
    }
    if (flags & 128 /* fromSyncFlush */) {
        flagNames.push('fromSyncFlush');
    }
    if (flags & 256 /* fromTick */) {
        flagNames.push('fromTick');
    }
    if (flags & 1024 /* fromStartTask */) {
        flagNames.push('fromStartTask');
    }
    if (flags & 2048 /* fromStopTask */) {
        flagNames.push('fromStopTask');
    }
    if (flags & 4096 /* fromBind */) {
        flagNames.push('fromBind');
    }
    if (flags & 8192 /* fromUnbind */) {
        flagNames.push('fromUnbind');
    }
    if (flags & 16384 /* fromAttach */) {
        flagNames.push('fromAttach');
    }
    if (flags & 32768 /* fromDetach */) {
        flagNames.push('fromDetach');
    }
    if (flags & 65536 /* fromCache */) {
        flagNames.push('fromCache');
    }
    if (flags & 131072 /* fromDOMEvent */) {
        flagNames.push('fromDOMEvent');
    }
    if (flags & 262144 /* fromLifecycleTask */) {
        flagNames.push('fromLifecycleTask');
    }
    if (flags & 4194304 /* isTraversingParentScope */) {
        flagNames.push('isTraversingParentScope');
    }
    if (flags & 67108864 /* allowParentScopeTraversal */) {
        flagNames.push('allowParentScopeTraversal');
    }
    if (flags & 1 /* getterSetterStrategy */) {
        flagNames.push('getterSetterStrategy');
    }
    if (flags & 2 /* proxyStrategy */) {
        flagNames.push('proxyStrategy');
    }
    if (flags & 1073741824 /* secondaryExpression */) {
        flagNames.push('secondaryExpression');
    }
    if (flagNames.length === 0) {
        return 'none';
    }
    return flagNames.join('|');
}
//# sourceMappingURL=tracer.js.map

/***/ }),

/***/ "./node_modules/@aurelia/fetch-client/dist/esnext/http-client-configuration.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@aurelia/fetch-client/dist/esnext/http-client-configuration.js ***!
  \*************************************************************************************/
/*! exports provided: HttpClientConfiguration */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HttpClientConfiguration", function() { return HttpClientConfiguration; });
/* harmony import */ var _retry_interceptor__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./retry-interceptor */ "./node_modules/@aurelia/fetch-client/dist/esnext/retry-interceptor.js");

/**
 * A class for configuring HttpClients.
 */
class HttpClientConfiguration {
    constructor() {
        /**
         * The base URL to be prepended to each Request's url before sending.
         */
        this.baseUrl = '';
        /**
         * Default values to apply to init objects when creating Requests. Note that
         * defaults cannot be applied when Request objects are manually created because
         * Request provides its own defaults and discards the original init object.
         * See also https://developer.mozilla.org/en-US/docs/Web/API/Request/Request
         */
        this.defaults = {};
        /**
         * Interceptors to be added to the HttpClient.
         */
        this.interceptors = [];
    }
    /**
     * Sets the baseUrl.
     *
     * @param baseUrl - The base URL.
     * @returns The chainable instance of this configuration object.
     * @chainable
     */
    withBaseUrl(baseUrl) {
        this.baseUrl = baseUrl;
        return this;
    }
    /**
     * Sets the defaults.
     *
     * @param defaults - The defaults.
     * @returns The chainable instance of this configuration object.
     * @chainable
     */
    withDefaults(defaults) {
        this.defaults = defaults;
        return this;
    }
    /**
     * Adds an interceptor to be run on all requests or responses.
     *
     * @param interceptor - An object with request, requestError,
     * response, or responseError methods. request and requestError act as
     * resolve and reject handlers for the Request before it is sent.
     * response and responseError act as resolve and reject handlers for
     * the Response after it has been received.
     * @returns The chainable instance of this configuration object.
     * @chainable
     */
    withInterceptor(interceptor) {
        this.interceptors.push(interceptor);
        return this;
    }
    /**
     * Applies a configuration that addresses common application needs, including
     * configuring same-origin credentials, and using rejectErrorResponses.
     *
     * @returns The chainable instance of this configuration object.
     * @chainable
     */
    useStandardConfiguration() {
        const standardConfig = { credentials: 'same-origin' };
        Object.assign(this.defaults, standardConfig, this.defaults);
        return this.rejectErrorResponses();
    }
    /**
     * Causes Responses whose status codes fall outside the range 200-299 to reject.
     * The fetch API only rejects on network errors or other conditions that prevent
     * the request from completing, meaning consumers must inspect Response.ok in the
     * Promise continuation to determine if the server responded with a success code.
     * This method adds a response interceptor that causes Responses with error codes
     * to be rejected, which is common behavior in HTTP client libraries.
     *
     * @returns The chainable instance of this configuration object.
     * @chainable
     */
    rejectErrorResponses() {
        return this.withInterceptor({ response: rejectOnError });
    }
    withRetry(config) {
        const interceptor = new _retry_interceptor__WEBPACK_IMPORTED_MODULE_0__["RetryInterceptor"](config);
        return this.withInterceptor(interceptor);
    }
}
function rejectOnError(response) {
    if (!response.ok) {
        throw response;
    }
    return response;
}
//# sourceMappingURL=http-client-configuration.js.map

/***/ }),

/***/ "./node_modules/@aurelia/fetch-client/dist/esnext/http-client.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@aurelia/fetch-client/dist/esnext/http-client.js ***!
  \***********************************************************************/
/*! exports provided: HttpClient */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HttpClient", function() { return HttpClient; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/runtime */ "./node_modules/@aurelia/runtime/dist/esnext/index.js");
/* harmony import */ var _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aurelia/runtime-html */ "./node_modules/@aurelia/runtime-html/dist/esnext/index.js");
/* harmony import */ var _http_client_configuration__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./http-client-configuration */ "./node_modules/@aurelia/fetch-client/dist/esnext/http-client-configuration.js");
/* harmony import */ var _retry_interceptor__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./retry-interceptor */ "./node_modules/@aurelia/fetch-client/dist/esnext/retry-interceptor.js");





const absoluteUrlRegexp = /^([a-z][a-z0-9+\-.]*:)?\/\//i;
/**
 * An HTTP client based on the Fetch API.
 */
let HttpClient = class HttpClient {
    /**
     * Creates an instance of HttpClient.
     */
    constructor(dom) {
        this.dom = dom;
        if (dom.window.fetch === undefined) {
            throw new Error('HttpClient requires a Fetch API implementation, but the current environment doesn\'t support it. You may need to load a polyfill such as https://github.com/github/fetch');
        }
        this.dom = dom;
        this.activeRequestCount = 0;
        this.isRequesting = false;
        this.isConfigured = false;
        this.baseUrl = '';
        this.defaults = null;
        this.interceptors = [];
    }
    /**
     * Configure this client with default settings to be used by all requests.
     *
     * @param config - A configuration object, or a function that takes a config
     * object and configures it.
     * @returns The chainable instance of this HttpClient.
     * @chainable
     */
    configure(config) {
        let normalizedConfig;
        if (typeof config === 'object') {
            const requestInitConfiguration = { defaults: config };
            normalizedConfig = requestInitConfiguration;
        }
        else if (typeof config === 'function') {
            normalizedConfig = new _http_client_configuration__WEBPACK_IMPORTED_MODULE_3__["HttpClientConfiguration"]();
            normalizedConfig.baseUrl = this.baseUrl;
            normalizedConfig.defaults = { ...this.defaults };
            normalizedConfig.interceptors = this.interceptors;
            const c = config(normalizedConfig);
            if (Object.prototype.isPrototypeOf.call(_http_client_configuration__WEBPACK_IMPORTED_MODULE_3__["HttpClientConfiguration"].prototype, c)) {
                normalizedConfig = c;
            }
        }
        else {
            throw new Error('invalid config');
        }
        const defaults = normalizedConfig.defaults;
        if (defaults !== undefined && Object.prototype.isPrototypeOf.call(Headers.prototype, defaults.headers)) {
            // Headers instances are not iterable in all browsers. Require a plain
            // object here to allow default headers to be merged into request headers.
            throw new Error('Default headers must be a plain object.');
        }
        const interceptors = normalizedConfig.interceptors;
        if (interceptors !== undefined && interceptors.length) {
            // find if there is a RetryInterceptor
            if (interceptors.filter(x => Object.prototype.isPrototypeOf.call(_retry_interceptor__WEBPACK_IMPORTED_MODULE_4__["RetryInterceptor"].prototype, x)).length > 1) {
                throw new Error('Only one RetryInterceptor is allowed.');
            }
            const retryInterceptorIndex = interceptors.findIndex(x => Object.prototype.isPrototypeOf.call(_retry_interceptor__WEBPACK_IMPORTED_MODULE_4__["RetryInterceptor"].prototype, x));
            if (retryInterceptorIndex >= 0 && retryInterceptorIndex !== interceptors.length - 1) {
                throw new Error('The retry interceptor must be the last interceptor defined.');
            }
        }
        this.baseUrl = normalizedConfig.baseUrl;
        this.defaults = defaults;
        this.interceptors = normalizedConfig.interceptors !== undefined ? normalizedConfig.interceptors : [];
        this.isConfigured = true;
        return this;
    }
    /**
     * Starts the process of fetching a resource. Default configuration parameters
     * will be applied to the Request. The constructed Request will be passed to
     * registered request interceptors before being sent. The Response will be passed
     * to registered Response interceptors before it is returned.
     *
     * See also https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API
     *
     * @param input - The resource that you wish to fetch. Either a
     * Request object, or a string containing the URL of the resource.
     * @param init - An options object containing settings to be applied to
     * the Request.
     * @returns A Promise for the Response from the fetch request.
     */
    fetch(input, init) {
        this.trackRequestStart();
        let request = this.buildRequest(input, init);
        return this.processRequest(request, this.interceptors).then(result => {
            let response;
            if (Object.prototype.isPrototypeOf.call(Response.prototype, result)) {
                response = Promise.resolve(result);
            }
            else if (Object.prototype.isPrototypeOf.call(Request.prototype, result)) {
                request = result;
                response = fetch(request);
            }
            else {
                throw new Error(`An invalid result was returned by the interceptor chain. Expected a Request or Response instance, but got [${result}]`);
            }
            return this.processResponse(response, this.interceptors, request);
        })
            .then(result => {
            if (Object.prototype.isPrototypeOf.call(Request.prototype, result)) {
                return this.fetch(result);
            }
            return result;
        })
            .then(result => {
            this.trackRequestEnd();
            return result;
        }, error => {
            this.trackRequestEnd();
            throw error;
        });
    }
    buildRequest(input, init) {
        const defaults = this.defaults !== null ? this.defaults : {};
        let request;
        let body;
        let requestContentType;
        const parsedDefaultHeaders = parseHeaderValues(defaults.headers);
        if (Object.prototype.isPrototypeOf.call(Request.prototype, input)) {
            request = input;
            requestContentType = new Headers(request.headers).get('Content-Type');
        }
        else {
            if (!init) {
                init = {};
            }
            body = init.body;
            const bodyObj = body !== undefined ? { body: body } : null;
            const requestInit = { ...defaults, headers: {}, ...init, ...bodyObj };
            requestContentType = new Headers(requestInit.headers).get('Content-Type');
            request = new Request(getRequestUrl(this.baseUrl, input), requestInit);
        }
        if (!requestContentType) {
            if (new Headers(parsedDefaultHeaders).has('content-type')) {
                request.headers.set('Content-Type', new Headers(parsedDefaultHeaders).get('content-type'));
            }
            else if (body !== undefined && isJSON(body)) {
                request.headers.set('Content-Type', 'application/json');
            }
        }
        setDefaultHeaders(request.headers, parsedDefaultHeaders);
        if (body !== undefined && Object.prototype.isPrototypeOf.call(Blob.prototype, body) && body.type) {
            // work around bug in IE & Edge where the Blob type is ignored in the request
            // https://connect.microsoft.com/IE/feedback/details/2136163
            request.headers.set('Content-Type', body.type);
        }
        return request;
    }
    /**
     * Calls fetch as a GET request.
     *
     * @param input - The resource that you wish to fetch. Either a
     * Request object, or a string containing the URL of the resource.
     * @param init - An options object containing settings to be applied to
     * the Request.
     * @returns A Promise for the Response from the fetch request.
     */
    get(input, init) {
        return this.fetch(input, init);
    }
    /**
     * Calls fetch with request method set to POST.
     *
     * @param input - The resource that you wish to fetch. Either a
     * Request object, or a string containing the URL of the resource.
     * @param body - The body of the request.
     * @param init - An options object containing settings to be applied to
     * the Request.
     * @returns A Promise for the Response from the fetch request.
     */
    post(input, body, init) {
        return this.callFetch(input, body, init, 'POST');
    }
    /**
     * Calls fetch with request method set to PUT.
     *
     * @param input - The resource that you wish to fetch. Either a
     * Request object, or a string containing the URL of the resource.
     * @param body - The body of the request.
     * @param init - An options object containing settings to be applied to
     * the Request.
     * @returns A Promise for the Response from the fetch request.
     */
    put(input, body, init) {
        return this.callFetch(input, body, init, 'PUT');
    }
    /**
     * Calls fetch with request method set to PATCH.
     *
     * @param input - The resource that you wish to fetch. Either a
     * Request object, or a string containing the URL of the resource.
     * @param body - The body of the request.
     * @param init - An options object containing settings to be applied to
     * the Request.
     * @returns A Promise for the Response from the fetch request.
     */
    patch(input, body, init) {
        return this.callFetch(input, body, init, 'PATCH');
    }
    /**
     * Calls fetch with request method set to DELETE.
     *
     * @param input - The resource that you wish to fetch. Either a
     * Request object, or a string containing the URL of the resource.
     * @param body - The body of the request.
     * @param init - An options object containing settings to be applied to
     * the Request.
     * @returns A Promise for the Response from the fetch request.
     */
    delete(input, body, init) {
        return this.callFetch(input, body, init, 'DELETE');
    }
    trackRequestStart() {
        this.isRequesting = !!(++this.activeRequestCount);
        if (this.isRequesting) {
            const evt = _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__["DOM"].createCustomEvent('aurelia-fetch-client-request-started', { bubbles: true, cancelable: true });
            _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__["DOM"].window.setTimeout(() => { _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__["DOM"].dispatchEvent(evt); }, 1);
        }
    }
    trackRequestEnd() {
        this.isRequesting = !!(--this.activeRequestCount);
        if (!this.isRequesting) {
            const evt = _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__["DOM"].createCustomEvent('aurelia-fetch-client-requests-drained', { bubbles: true, cancelable: true });
            _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__["DOM"].window.setTimeout(() => { _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__["DOM"].dispatchEvent(evt); }, 1);
        }
    }
    processRequest(request, interceptors) {
        return this.applyInterceptors(request, interceptors, 'request', 'requestError', this);
    }
    processResponse(response, interceptors, request) {
        return this.applyInterceptors(response, interceptors, 'response', 'responseError', request, this);
    }
    applyInterceptors(input, interceptors, successName, errorName, ...interceptorArgs) {
        return (interceptors !== undefined ? interceptors : [])
            .reduce((chain, interceptor) => {
            const successHandler = interceptor[successName];
            const errorHandler = interceptor[errorName];
            // TODO: Fix this, as it violates `strictBindCallApply`.
            return chain.then(successHandler ? (value => successHandler.call(interceptor, value, ...interceptorArgs)) : identity, errorHandler ? (reason => errorHandler.call(interceptor, reason, ...interceptorArgs)) : thrower);
        }, Promise.resolve(input));
    }
    callFetch(input, body, init, method) {
        if (!init) {
            init = {};
        }
        init.method = method;
        if (body) {
            init.body = body;
        }
        return this.fetch(input, init);
    }
};
HttpClient = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(0, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["IDOM"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [_aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__["HTMLDOM"]])
], HttpClient);

function parseHeaderValues(headers) {
    const parsedHeaders = {};
    const $headers = headers !== undefined ? headers : {};
    for (const name in $headers) {
        if (Object.prototype.hasOwnProperty.call($headers, name)) {
            parsedHeaders[name] = (typeof $headers[name] === 'function')
                ? $headers[name]()
                : $headers[name];
        }
    }
    return parsedHeaders;
}
function getRequestUrl(baseUrl, url) {
    if (absoluteUrlRegexp.test(url)) {
        return url;
    }
    return (baseUrl !== undefined ? baseUrl : '') + url;
}
function setDefaultHeaders(headers, defaultHeaders) {
    const $defaultHeaders = defaultHeaders !== undefined ? defaultHeaders : {};
    for (const name in $defaultHeaders) {
        if (Object.prototype.hasOwnProperty.call($defaultHeaders, name) && !headers.has(name)) {
            headers.set(name, $defaultHeaders[name]);
        }
    }
}
function isJSON(str) {
    try {
        JSON.parse(str);
    }
    catch (err) {
        return false;
    }
    return true;
}
function identity(x) {
    return x;
}
function thrower(x) {
    throw x;
}
//# sourceMappingURL=http-client.js.map

/***/ }),

/***/ "./node_modules/@aurelia/fetch-client/dist/esnext/index.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@aurelia/fetch-client/dist/esnext/index.js ***!
  \*****************************************************************/
/*! exports provided: json, retryStrategy, RetryInterceptor, HttpClientConfiguration, HttpClient */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./util */ "./node_modules/@aurelia/fetch-client/dist/esnext/util.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "json", function() { return _util__WEBPACK_IMPORTED_MODULE_0__["json"]; });

/* harmony import */ var _retry_interceptor__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./retry-interceptor */ "./node_modules/@aurelia/fetch-client/dist/esnext/retry-interceptor.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "retryStrategy", function() { return _retry_interceptor__WEBPACK_IMPORTED_MODULE_1__["retryStrategy"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RetryInterceptor", function() { return _retry_interceptor__WEBPACK_IMPORTED_MODULE_1__["RetryInterceptor"]; });

/* harmony import */ var _http_client_configuration__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./http-client-configuration */ "./node_modules/@aurelia/fetch-client/dist/esnext/http-client-configuration.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "HttpClientConfiguration", function() { return _http_client_configuration__WEBPACK_IMPORTED_MODULE_2__["HttpClientConfiguration"]; });

/* harmony import */ var _http_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./http-client */ "./node_modules/@aurelia/fetch-client/dist/esnext/http-client.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "HttpClient", function() { return _http_client__WEBPACK_IMPORTED_MODULE_3__["HttpClient"]; });





//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./node_modules/@aurelia/fetch-client/dist/esnext/retry-interceptor.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@aurelia/fetch-client/dist/esnext/retry-interceptor.js ***!
  \*****************************************************************************/
/*! exports provided: retryStrategy, RetryInterceptor */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "retryStrategy", function() { return retryStrategy; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RetryInterceptor", function() { return RetryInterceptor; });
/* harmony import */ var _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/runtime-html */ "./node_modules/@aurelia/runtime-html/dist/esnext/index.js");

const retryStrategy = {
    fixed: 0,
    incremental: 1,
    exponential: 2,
    random: 3
};
const defaultRetryConfig = {
    maxRetries: 3,
    interval: 1000,
    strategy: retryStrategy.fixed
};
/**
 * Interceptor that retries requests on error, based on a given RetryConfiguration.
 */
class RetryInterceptor {
    /**
     * Creates an instance of RetryInterceptor.
     */
    constructor(retryConfig) {
        this.retryConfig = { ...defaultRetryConfig, ...(retryConfig !== undefined ? retryConfig : {}) };
        if (this.retryConfig.strategy === retryStrategy.exponential &&
            this.retryConfig.interval <= 1000) {
            throw new Error('An interval less than or equal to 1 second is not allowed when using the exponential retry strategy');
        }
    }
    /**
     * Called with the request before it is sent. It remembers the request so it can be retried on error.
     *
     * @param request - The request to be sent.
     * @returns The existing request, a new request or a response; or a Promise for any of these.
     */
    request(request) {
        if (!request.retryConfig) {
            request.retryConfig = { ...this.retryConfig };
            request.retryConfig.counter = 0;
        }
        // do this on every request
        request.retryConfig.requestClone = request.clone();
        return request;
    }
    /**
     * Called with the response after it is received. Clears the remembered request, as it was succesfull.
     *
     * @param response - The response.
     * @returns The response; or a Promise for one.
     */
    response(response, request) {
        // retry was successful, so clean up after ourselves
        Reflect.deleteProperty(request, 'retryConfig');
        return response;
    }
    /**
     * Handles fetch errors and errors generated by previous interceptors. This
     * function acts as a Promise rejection handler. It wil retry the remembered request based on the
     * configured RetryConfiguration.
     *
     * @param error - The rejection value from the fetch request or from a
     * previous interceptor.
     * @returns The response of the retry; or a Promise for one.
     */
    responseError(error, request, httpClient) {
        const { retryConfig } = request;
        const { requestClone } = retryConfig;
        return Promise.resolve().then(() => {
            if (retryConfig.counter < retryConfig.maxRetries) {
                const result = retryConfig.doRetry !== undefined ? retryConfig.doRetry(error, request) : true;
                return Promise.resolve(result).then(doRetry => {
                    if (doRetry) {
                        retryConfig.counter++;
                        const delay = calculateDelay(retryConfig);
                        return new Promise((resolve) => _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_0__["DOM"].window.setTimeout(resolve, !isNaN(delay) ? delay : 0))
                            .then(() => {
                            const newRequest = requestClone.clone();
                            if (typeof (retryConfig.beforeRetry) === 'function') {
                                return retryConfig.beforeRetry(newRequest, httpClient);
                            }
                            return newRequest;
                        })
                            .then(newRequest => {
                            const retryableRequest = { ...newRequest, retryConfig };
                            return httpClient.fetch(retryableRequest);
                        });
                    }
                    // no more retries, so clean up
                    Reflect.deleteProperty(request, 'retryConfig');
                    throw error;
                });
            }
            // no more retries, so clean up
            Reflect.deleteProperty(request, 'retryConfig');
            throw error;
        });
    }
}
function calculateDelay(retryConfig) {
    const { interval, strategy, minRandomInterval, maxRandomInterval, counter } = retryConfig;
    if (typeof (strategy) === 'function') {
        return retryConfig.strategy(counter);
    }
    switch (strategy) {
        case (retryStrategy.fixed):
            return retryStrategies[retryStrategy.fixed](interval);
        case (retryStrategy.incremental):
            return retryStrategies[retryStrategy.incremental](counter, interval);
        case (retryStrategy.exponential):
            return retryStrategies[retryStrategy.exponential](counter, interval);
        case (retryStrategy.random):
            return retryStrategies[retryStrategy.random](counter, interval, minRandomInterval, maxRandomInterval);
        default:
            throw new Error('Unrecognized retry strategy');
    }
}
const retryStrategies = [
    // fixed
    interval => interval,
    // incremental
    (retryCount, interval) => interval * retryCount,
    // exponential
    (retryCount, interval) => retryCount === 1 ? interval : interval ** retryCount / 1000,
    // random
    (retryCount, interval, minRandomInterval = 0, maxRandomInterval = 60000) => {
        return Math.random() * (maxRandomInterval - minRandomInterval) + minRandomInterval;
    }
];
//# sourceMappingURL=retry-interceptor.js.map

/***/ }),

/***/ "./node_modules/@aurelia/fetch-client/dist/esnext/util.js":
/*!****************************************************************!*\
  !*** ./node_modules/@aurelia/fetch-client/dist/esnext/util.js ***!
  \****************************************************************/
/*! exports provided: json */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "json", function() { return json; });
/**
 * Serialize an object to JSON. Useful for easily creating JSON fetch request bodies.
 *
 * @param body - The object to be serialized to JSON.
 * @param replacer - The JSON.stringify replacer used when serializing.
 * @returns A JSON string.
 */
function json(body, replacer) {
    return JSON.stringify((body !== undefined ? body : {}), replacer);
}
//# sourceMappingURL=util.js.map

/***/ }),

/***/ "./node_modules/@aurelia/jit-html-browser/dist/esnext/index.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@aurelia/jit-html-browser/dist/esnext/index.js ***!
  \*********************************************************************/
/*! exports provided: JitHtmlBrowserConfiguration */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "JitHtmlBrowserConfiguration", function() { return JitHtmlBrowserConfiguration; });
/* harmony import */ var _aurelia_jit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/jit */ "./node_modules/@aurelia/jit/dist/esnext/index.js");
/* harmony import */ var _aurelia_jit_html__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/jit-html */ "./node_modules/@aurelia/jit-html/dist/esnext/index.js");
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _aurelia_runtime_html_browser__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @aurelia/runtime-html-browser */ "./node_modules/@aurelia/runtime-html-browser/dist/esnext/index.js");




const { enter, leave } = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__["Profiler"].createTimer('JitHtmlBrowserConfiguration');
/**
 * A DI configuration object containing html-specific, browser-specific registrations:
 * - `RuntimeHtmlBrowserConfiguration` from `@aurelia/runtime-html-browser`
 * - `DefaultComponents` from `@aurelia/jit`
 * - `DefaultBindingSyntax` from `@aurelia/jit`
 * - `DefaultBindingLanguage` from `@aurelia/jit`
 * - `DefaultComponents` from `@aurelia/jit-html`
 * - `DefaultBindingLanguage` from `@aurelia/jit-html`
 */
const JitHtmlBrowserConfiguration = {
    /**
     * Apply this configuration to the provided container.
     */
    register(container) {
        _aurelia_runtime_html_browser__WEBPACK_IMPORTED_MODULE_3__["RuntimeHtmlBrowserConfiguration"]
            .register(container)
            .register(..._aurelia_jit__WEBPACK_IMPORTED_MODULE_0__["DefaultBindingLanguage"], ..._aurelia_jit__WEBPACK_IMPORTED_MODULE_0__["DefaultBindingSyntax"], ..._aurelia_jit__WEBPACK_IMPORTED_MODULE_0__["DefaultComponents"], ..._aurelia_jit_html__WEBPACK_IMPORTED_MODULE_1__["DefaultBindingLanguage"], ..._aurelia_jit_html__WEBPACK_IMPORTED_MODULE_1__["DefaultComponents"]);
        return container;
    },
    /**
     * Create a new container with this configuration applied to it.
     */
    createContainer() {
        return this.register(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__["DI"].createContainer());
    }
};
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./node_modules/@aurelia/jit-html/dist/esnext/attribute-syntax-transformer.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@aurelia/jit-html/dist/esnext/attribute-syntax-transformer.js ***!
  \************************************************************************************/
/*! exports provided: IAttrSyntaxTransformer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IAttrSyntaxTransformer", function() { return IAttrSyntaxTransformer; });
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");

const IAttrSyntaxTransformer = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["DI"]
    .createInterface('IAttrSyntaxTransformer')
    .noDefault();
//# sourceMappingURL=attribute-syntax-transformer.js.map

/***/ }),

/***/ "./node_modules/@aurelia/jit-html/dist/esnext/binding-commands.js":
/*!************************************************************************!*\
  !*** ./node_modules/@aurelia/jit-html/dist/esnext/binding-commands.js ***!
  \************************************************************************/
/*! exports provided: TriggerBindingCommand, DelegateBindingCommand, CaptureBindingCommand, AttrBindingCommand, StyleBindingCommand, ClassBindingCommand, RefBindingCommand */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TriggerBindingCommand", function() { return TriggerBindingCommand; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DelegateBindingCommand", function() { return DelegateBindingCommand; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CaptureBindingCommand", function() { return CaptureBindingCommand; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AttrBindingCommand", function() { return AttrBindingCommand; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StyleBindingCommand", function() { return StyleBindingCommand; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ClassBindingCommand", function() { return ClassBindingCommand; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RefBindingCommand", function() { return RefBindingCommand; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _aurelia_jit__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/jit */ "./node_modules/@aurelia/jit/dist/esnext/index.js");
/* harmony import */ var _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aurelia/runtime */ "./node_modules/@aurelia/runtime/dist/esnext/index.js");
/* harmony import */ var _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @aurelia/runtime-html */ "./node_modules/@aurelia/runtime-html/dist/esnext/index.js");




/**
 * Trigger binding command. Compile attr with binding symbol with command `trigger` to `TriggerBindingInstruction`
 */
let TriggerBindingCommand = class TriggerBindingCommand {
    constructor() {
        this.bindingType = 4182 /* TriggerCommand */;
    }
    compile(binding) {
        return new _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_3__["TriggerBindingInstruction"](binding.expression, Object(_aurelia_jit__WEBPACK_IMPORTED_MODULE_1__["getTarget"])(binding, false));
    }
};
TriggerBindingCommand = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_aurelia_jit__WEBPACK_IMPORTED_MODULE_1__["bindingCommand"])('trigger')
], TriggerBindingCommand);

/**
 * Delegate binding command. Compile attr with binding symbol with command `delegate` to `DelegateBindingInstruction`
 */
let DelegateBindingCommand = class DelegateBindingCommand {
    constructor() {
        this.bindingType = 4184 /* DelegateCommand */;
    }
    compile(binding) {
        return new _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_3__["DelegateBindingInstruction"](binding.expression, Object(_aurelia_jit__WEBPACK_IMPORTED_MODULE_1__["getTarget"])(binding, false));
    }
};
DelegateBindingCommand = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_aurelia_jit__WEBPACK_IMPORTED_MODULE_1__["bindingCommand"])('delegate')
], DelegateBindingCommand);

/**
 * Capture binding command. Compile attr with binding symbol with command `capture` to `CaptureBindingInstruction`
 */
let CaptureBindingCommand = class CaptureBindingCommand {
    constructor() {
        this.bindingType = 4183 /* CaptureCommand */;
    }
    compile(binding) {
        return new _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_3__["CaptureBindingInstruction"](binding.expression, Object(_aurelia_jit__WEBPACK_IMPORTED_MODULE_1__["getTarget"])(binding, false));
    }
};
CaptureBindingCommand = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_aurelia_jit__WEBPACK_IMPORTED_MODULE_1__["bindingCommand"])('capture')
], CaptureBindingCommand);

/**
 * Attr binding command. Compile attr with binding symbol with command `attr` to `AttributeBindingInstruction`
 */
let AttrBindingCommand = class AttrBindingCommand {
    constructor() {
        this.bindingType = 32 /* IsProperty */;
    }
    compile(binding) {
        const target = Object(_aurelia_jit__WEBPACK_IMPORTED_MODULE_1__["getTarget"])(binding, false);
        return new _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_3__["AttributeBindingInstruction"](target, binding.expression, target);
    }
};
AttrBindingCommand = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_aurelia_jit__WEBPACK_IMPORTED_MODULE_1__["bindingCommand"])('attr')
], AttrBindingCommand);

/**
 * Style binding command. Compile attr with binding symbol with command `style` to `AttributeBindingInstruction`
 */
let StyleBindingCommand = class StyleBindingCommand {
    constructor() {
        this.bindingType = 32 /* IsProperty */;
    }
    compile(binding) {
        return new _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_3__["AttributeBindingInstruction"]('style', binding.expression, Object(_aurelia_jit__WEBPACK_IMPORTED_MODULE_1__["getTarget"])(binding, false));
    }
};
StyleBindingCommand = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_aurelia_jit__WEBPACK_IMPORTED_MODULE_1__["bindingCommand"])('style')
], StyleBindingCommand);

/**
 * Class binding command. Compile attr with binding symbol with command `class` to `AttributeBindingInstruction`
 */
let ClassBindingCommand = class ClassBindingCommand {
    constructor() {
        this.bindingType = 32 /* IsProperty */;
    }
    compile(binding) {
        return new _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_3__["AttributeBindingInstruction"]('class', binding.expression, Object(_aurelia_jit__WEBPACK_IMPORTED_MODULE_1__["getTarget"])(binding, false));
    }
};
ClassBindingCommand = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_aurelia_jit__WEBPACK_IMPORTED_MODULE_1__["bindingCommand"])('class')
], ClassBindingCommand);

/**
 * Binding command to refer different targets (element, custom element/attribute view models, controller) afterAttach to an element
 */
let RefBindingCommand = class RefBindingCommand {
    constructor() {
        this.bindingType = 32 /* IsProperty */ | 4096 /* IgnoreCustomAttr */;
    }
    compile(binding) {
        return new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["RefBindingInstruction"](binding.expression, Object(_aurelia_jit__WEBPACK_IMPORTED_MODULE_1__["getTarget"])(binding, false));
    }
};
RefBindingCommand = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_aurelia_jit__WEBPACK_IMPORTED_MODULE_1__["bindingCommand"])('ref')
], RefBindingCommand);

//# sourceMappingURL=binding-commands.js.map

/***/ }),

/***/ "./node_modules/@aurelia/jit-html/dist/esnext/configuration.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@aurelia/jit-html/dist/esnext/configuration.js ***!
  \*********************************************************************/
/*! exports provided: ITemplateCompilerRegistration, ITemplateElementFactoryRegistration, IAttrSyntaxTransformerRegistation, DefaultComponents, RefBindingCommandRegistration, TriggerBindingCommandRegistration, DelegateBindingCommandRegistration, CaptureBindingCommandRegistration, AttrBindingCommandRegistration, ClassBindingCommandRegistration, StyleBindingCommandRegistration, DefaultBindingLanguage, JitHtmlConfiguration */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ITemplateCompilerRegistration", function() { return ITemplateCompilerRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ITemplateElementFactoryRegistration", function() { return ITemplateElementFactoryRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IAttrSyntaxTransformerRegistation", function() { return IAttrSyntaxTransformerRegistation; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DefaultComponents", function() { return DefaultComponents; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RefBindingCommandRegistration", function() { return RefBindingCommandRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TriggerBindingCommandRegistration", function() { return TriggerBindingCommandRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DelegateBindingCommandRegistration", function() { return DelegateBindingCommandRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CaptureBindingCommandRegistration", function() { return CaptureBindingCommandRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AttrBindingCommandRegistration", function() { return AttrBindingCommandRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ClassBindingCommandRegistration", function() { return ClassBindingCommandRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StyleBindingCommandRegistration", function() { return StyleBindingCommandRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DefaultBindingLanguage", function() { return DefaultBindingLanguage; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "JitHtmlConfiguration", function() { return JitHtmlConfiguration; });
/* harmony import */ var _aurelia_jit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/jit */ "./node_modules/@aurelia/jit/dist/esnext/index.js");
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aurelia/runtime-html */ "./node_modules/@aurelia/runtime-html/dist/esnext/index.js");
/* harmony import */ var _binding_commands__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./binding-commands */ "./node_modules/@aurelia/jit-html/dist/esnext/binding-commands.js");
/* harmony import */ var _html_attribute_syntax_transformer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./html-attribute-syntax-transformer */ "./node_modules/@aurelia/jit-html/dist/esnext/html-attribute-syntax-transformer.js");
/* harmony import */ var _template_compiler__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./template-compiler */ "./node_modules/@aurelia/jit-html/dist/esnext/template-compiler.js");
/* harmony import */ var _template_element_factory__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./template-element-factory */ "./node_modules/@aurelia/jit-html/dist/esnext/template-element-factory.js");







const ITemplateCompilerRegistration = _template_compiler__WEBPACK_IMPORTED_MODULE_5__["TemplateCompiler"];
const ITemplateElementFactoryRegistration = _template_element_factory__WEBPACK_IMPORTED_MODULE_6__["HTMLTemplateElementFactory"];
const IAttrSyntaxTransformerRegistation = _html_attribute_syntax_transformer__WEBPACK_IMPORTED_MODULE_4__["HtmlAttrSyntaxTransformer"];
/**
 * Default HTML-specific (but environment-agnostic) implementations for the following interfaces:
 * - `ITemplateCompiler`
 * - `ITemplateElementFactory`
 */
const DefaultComponents = [
    ITemplateCompilerRegistration,
    ITemplateElementFactoryRegistration,
    IAttrSyntaxTransformerRegistation
];
const RefBindingCommandRegistration = _binding_commands__WEBPACK_IMPORTED_MODULE_3__["RefBindingCommand"];
const TriggerBindingCommandRegistration = _binding_commands__WEBPACK_IMPORTED_MODULE_3__["TriggerBindingCommand"];
const DelegateBindingCommandRegistration = _binding_commands__WEBPACK_IMPORTED_MODULE_3__["DelegateBindingCommand"];
const CaptureBindingCommandRegistration = _binding_commands__WEBPACK_IMPORTED_MODULE_3__["CaptureBindingCommand"];
const AttrBindingCommandRegistration = _binding_commands__WEBPACK_IMPORTED_MODULE_3__["AttrBindingCommand"];
const ClassBindingCommandRegistration = _binding_commands__WEBPACK_IMPORTED_MODULE_3__["ClassBindingCommand"];
const StyleBindingCommandRegistration = _binding_commands__WEBPACK_IMPORTED_MODULE_3__["StyleBindingCommand"];
/**
 * Default HTML-specific (but environment-agnostic) binding commands:
 * - Event listeners: `.trigger`, `.delegate`, `.capture`
 */
const DefaultBindingLanguage = [
    RefBindingCommandRegistration,
    TriggerBindingCommandRegistration,
    DelegateBindingCommandRegistration,
    CaptureBindingCommandRegistration,
    ClassBindingCommandRegistration,
    StyleBindingCommandRegistration,
    AttrBindingCommandRegistration
];
/**
 * A DI configuration object containing html-specific (but environment-agnostic) registrations:
 * - `RuntimeHtmlConfiguration` from `@aurelia/runtime-html`
 * - `DefaultComponents` from `@aurelia/jit`
 * - `DefaultBindingSyntax` from `@aurelia/jit`
 * - `DefaultBindingLanguage` from `@aurelia/jit`
 * - `DefaultComponents`
 * - `DefaultBindingLanguage`
 */
const JitHtmlConfiguration = {
    /**
     * Apply this configuration to the provided container.
     */
    register(container) {
        return _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__["RuntimeHtmlConfiguration"]
            .register(container)
            .register(..._aurelia_jit__WEBPACK_IMPORTED_MODULE_0__["DefaultComponents"], ..._aurelia_jit__WEBPACK_IMPORTED_MODULE_0__["DefaultBindingSyntax"], ..._aurelia_jit__WEBPACK_IMPORTED_MODULE_0__["DefaultBindingLanguage"], ...DefaultComponents, ...DefaultBindingLanguage);
    },
    /**
     * Create a new container with this configuration applied to it.
     */
    createContainer() {
        return this.register(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["DI"].createContainer());
    }
};
//# sourceMappingURL=configuration.js.map

/***/ }),

/***/ "./node_modules/@aurelia/jit-html/dist/esnext/debugging.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@aurelia/jit-html/dist/esnext/debugging.js ***!
  \*****************************************************************/
/*! exports provided: stringifyDOM, stringifyInstructions, stringifyTemplateDefinition */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "stringifyDOM", function() { return stringifyDOM; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "stringifyInstructions", function() { return stringifyInstructions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "stringifyTemplateDefinition", function() { return stringifyTemplateDefinition; });
function stringifyDOM(node, depth) {
    const indent = ' '.repeat(depth);
    let output = indent;
    output += `Node: ${node.nodeName}`;
    if (node.nodeType === 3 /* Text */) {
        output += ` "${node.textContent}"`;
    }
    if (node.nodeType === 1 /* Element */) {
        let i = 0;
        let attr;
        const attributes = node.attributes;
        const len = attributes.length;
        for (; i < len; ++i) {
            attr = attributes[i];
            output += ` ${attr.name}=${attr.value}`;
        }
    }
    output += '\n';
    if (node.nodeType === 1 /* Element */) {
        let i = 0;
        let childNodes = node.childNodes;
        let len = childNodes.length;
        for (; i < len; ++i) {
            output += stringifyDOM(childNodes[i], depth + 1);
        }
        if (node.nodeName === 'TEMPLATE') {
            i = 0;
            childNodes = node.content.childNodes;
            len = childNodes.length;
            for (; i < len; ++i) {
                output += stringifyDOM(childNodes[i], depth + 1);
            }
        }
    }
    return output;
}
function stringifyInstructions(instruction, depth) {
    const indent = ' '.repeat(depth);
    let output = indent;
    switch (instruction.type) {
        case "ha" /* textBinding */:
            output += 'textBinding\n';
            break;
        case "rh" /* callBinding */:
            output += 'callBinding\n';
            break;
        case "rk" /* iteratorBinding */:
            output += 'iteratorBinding\n';
            break;
        case "hb" /* listenerBinding */:
            output += 'listenerBinding\n';
            break;
        case "rg" /* propertyBinding */:
            output += 'propertyBinding\n';
            break;
        case "rj" /* refBinding */:
            output += 'refBinding\n';
            break;
        case "hd" /* stylePropertyBinding */:
            output += 'stylePropertyBinding\n';
            break;
        case "re" /* setProperty */:
            output += 'setProperty\n';
            break;
        case "he" /* setAttribute */:
            output += 'setAttribute\n';
            break;
        case "rf" /* interpolation */:
            output += 'interpolation\n';
            break;
        case "rd" /* hydrateLetElement */:
            output += 'hydrateLetElement\n';
            instruction.instructions.forEach(i => {
                output += stringifyInstructions(i, depth + 1);
            });
            break;
        case "rb" /* hydrateAttribute */:
            output += `hydrateAttribute: ${instruction.res}\n`;
            instruction.instructions.forEach(i => {
                output += stringifyInstructions(i, depth + 1);
            });
            break;
        case "ra" /* hydrateElement */:
            output += `hydrateElement: ${instruction.res}\n`;
            instruction.instructions.forEach(i => {
                output += stringifyInstructions(i, depth + 1);
            });
            break;
        case "rc" /* hydrateTemplateController */:
            output += `hydrateTemplateController: ${instruction.res}\n`;
            output += stringifyTemplateDefinition(instruction.def, depth + 1);
            instruction.instructions.forEach(i => {
                output += stringifyInstructions(i, depth + 1);
            });
    }
    return output;
}
function stringifyTemplateDefinition(def, depth) {
    const indent = ' '.repeat(depth);
    let output = indent;
    output += `CustomElementDefinition: ${def.name}\n`;
    output += stringifyDOM(def.template, depth + 1);
    output += `${indent} Instructions:\n`;
    def.instructions.forEach(row => {
        output += `${indent}  Row:\n`;
        row.forEach(i => {
            output += stringifyInstructions(i, depth + 3);
        });
    });
    return output;
}
//# sourceMappingURL=debugging.js.map

/***/ }),

/***/ "./node_modules/@aurelia/jit-html/dist/esnext/html-attribute-syntax-transformer.js":
/*!*****************************************************************************************!*\
  !*** ./node_modules/@aurelia/jit-html/dist/esnext/html-attribute-syntax-transformer.js ***!
  \*****************************************************************************************/
/*! exports provided: HtmlAttrSyntaxTransformer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HtmlAttrSyntaxTransformer", function() { return HtmlAttrSyntaxTransformer; });
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _attribute_syntax_transformer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./attribute-syntax-transformer */ "./node_modules/@aurelia/jit-html/dist/esnext/attribute-syntax-transformer.js");


class HtmlAttrSyntaxTransformer {
    static register(container) {
        return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Registration"].singleton(_attribute_syntax_transformer__WEBPACK_IMPORTED_MODULE_1__["IAttrSyntaxTransformer"], this).register(container);
    }
    transform(node, attrSyntax) {
        if (attrSyntax.command === 'bind' && shouldDefaultToTwoWay(node, attrSyntax)) {
            attrSyntax.command = 'two-way';
        }
        attrSyntax.target = this.map(node.tagName, attrSyntax.target);
    }
    map(tagName, attr) {
        switch (tagName) {
            case 'LABEL':
                switch (attr) {
                    case 'for':
                        return 'htmlFor';
                    default:
                        return attr;
                }
            case 'IMG':
                switch (attr) {
                    case 'usemap':
                        return 'useMap';
                    default:
                        return attr;
                }
            case 'INPUT':
                switch (attr) {
                    case 'maxlength':
                        return 'maxLength';
                    case 'minlength':
                        return 'minLength';
                    case 'formaction':
                        return 'formAction';
                    case 'formenctype':
                        return 'formEncType';
                    case 'formmethod':
                        return 'formMethod';
                    case 'formnovalidate':
                        return 'formNoValidate';
                    case 'formtarget':
                        return 'formTarget';
                    case 'inputmode':
                        return 'inputMode';
                    default:
                        return attr;
                }
            case 'TEXTAREA':
                switch (attr) {
                    case 'maxlength':
                        return 'maxLength';
                    default:
                        return attr;
                }
            case 'TD':
            case 'TH':
                switch (attr) {
                    case 'rowspan':
                        return 'rowSpan';
                    case 'colspan':
                        return 'colSpan';
                    default:
                        return attr;
                }
            default:
                switch (attr) {
                    case 'accesskey':
                        return 'accessKey';
                    case 'contenteditable':
                        return 'contentEditable';
                    case 'tabindex':
                        return 'tabIndex';
                    case 'textcontent':
                        return 'textContent';
                    case 'innerhtml':
                        return 'innerHTML';
                    case 'scrolltop':
                        return 'scrollTop';
                    case 'scrollleft':
                        return 'scrollLeft';
                    case 'readonly':
                        return 'readOnly';
                    default:
                        return attr;
                }
        }
    }
}
function shouldDefaultToTwoWay(element, attr) {
    switch (element.tagName) {
        case 'INPUT':
            switch (element.type) {
                case 'checkbox':
                case 'radio':
                    return attr.target === 'checked';
                default:
                    return attr.target === 'value' || attr.target === 'files';
            }
        case 'TEXTAREA':
        case 'SELECT':
            return attr.target === 'value';
        default:
            switch (attr.target) {
                case 'textcontent':
                case 'innerhtml':
                    return element.hasAttribute('contenteditable');
                case 'scrolltop':
                case 'scrollleft':
                    return true;
                default:
                    return false;
            }
    }
}
//# sourceMappingURL=html-attribute-syntax-transformer.js.map

/***/ }),

/***/ "./node_modules/@aurelia/jit-html/dist/esnext/index.js":
/*!*************************************************************!*\
  !*** ./node_modules/@aurelia/jit-html/dist/esnext/index.js ***!
  \*************************************************************/
/*! exports provided: IAttrSyntaxTransformer, TriggerBindingCommand, DelegateBindingCommand, CaptureBindingCommand, AttrBindingCommand, ClassBindingCommand, StyleBindingCommand, ITemplateCompilerRegistration, ITemplateElementFactoryRegistration, IAttrSyntaxTransformerRegistation, DefaultComponents, TriggerBindingCommandRegistration, DelegateBindingCommandRegistration, CaptureBindingCommandRegistration, AttrBindingCommandRegistration, ClassBindingCommandRegistration, StyleBindingCommandRegistration, DefaultBindingLanguage, JitHtmlConfiguration, stringifyDOM, stringifyInstructions, stringifyTemplateDefinition, TemplateBinder, ITemplateElementFactory */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _attribute_syntax_transformer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./attribute-syntax-transformer */ "./node_modules/@aurelia/jit-html/dist/esnext/attribute-syntax-transformer.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IAttrSyntaxTransformer", function() { return _attribute_syntax_transformer__WEBPACK_IMPORTED_MODULE_0__["IAttrSyntaxTransformer"]; });

/* harmony import */ var _binding_commands__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./binding-commands */ "./node_modules/@aurelia/jit-html/dist/esnext/binding-commands.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TriggerBindingCommand", function() { return _binding_commands__WEBPACK_IMPORTED_MODULE_1__["TriggerBindingCommand"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DelegateBindingCommand", function() { return _binding_commands__WEBPACK_IMPORTED_MODULE_1__["DelegateBindingCommand"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CaptureBindingCommand", function() { return _binding_commands__WEBPACK_IMPORTED_MODULE_1__["CaptureBindingCommand"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AttrBindingCommand", function() { return _binding_commands__WEBPACK_IMPORTED_MODULE_1__["AttrBindingCommand"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ClassBindingCommand", function() { return _binding_commands__WEBPACK_IMPORTED_MODULE_1__["ClassBindingCommand"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "StyleBindingCommand", function() { return _binding_commands__WEBPACK_IMPORTED_MODULE_1__["StyleBindingCommand"]; });

/* harmony import */ var _configuration__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./configuration */ "./node_modules/@aurelia/jit-html/dist/esnext/configuration.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ITemplateCompilerRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_2__["ITemplateCompilerRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ITemplateElementFactoryRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_2__["ITemplateElementFactoryRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IAttrSyntaxTransformerRegistation", function() { return _configuration__WEBPACK_IMPORTED_MODULE_2__["IAttrSyntaxTransformerRegistation"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DefaultComponents", function() { return _configuration__WEBPACK_IMPORTED_MODULE_2__["DefaultComponents"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TriggerBindingCommandRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_2__["TriggerBindingCommandRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DelegateBindingCommandRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_2__["DelegateBindingCommandRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CaptureBindingCommandRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_2__["CaptureBindingCommandRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AttrBindingCommandRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_2__["AttrBindingCommandRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ClassBindingCommandRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_2__["ClassBindingCommandRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "StyleBindingCommandRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_2__["StyleBindingCommandRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DefaultBindingLanguage", function() { return _configuration__WEBPACK_IMPORTED_MODULE_2__["DefaultBindingLanguage"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "JitHtmlConfiguration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_2__["JitHtmlConfiguration"]; });

/* harmony import */ var _debugging__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./debugging */ "./node_modules/@aurelia/jit-html/dist/esnext/debugging.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "stringifyDOM", function() { return _debugging__WEBPACK_IMPORTED_MODULE_3__["stringifyDOM"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "stringifyInstructions", function() { return _debugging__WEBPACK_IMPORTED_MODULE_3__["stringifyInstructions"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "stringifyTemplateDefinition", function() { return _debugging__WEBPACK_IMPORTED_MODULE_3__["stringifyTemplateDefinition"]; });

/* harmony import */ var _template_binder__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./template-binder */ "./node_modules/@aurelia/jit-html/dist/esnext/template-binder.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TemplateBinder", function() { return _template_binder__WEBPACK_IMPORTED_MODULE_4__["TemplateBinder"]; });

/* harmony import */ var _template_element_factory__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./template-element-factory */ "./node_modules/@aurelia/jit-html/dist/esnext/template-element-factory.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ITemplateElementFactory", function() { return _template_element_factory__WEBPACK_IMPORTED_MODULE_5__["ITemplateElementFactory"]; });







//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./node_modules/@aurelia/jit-html/dist/esnext/semantic-model.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@aurelia/jit-html/dist/esnext/semantic-model.js ***!
  \**********************************************************************/
/*! exports provided: CustomElementSymbol, LetElementSymbol, PlainElementSymbol, ReplacePartSymbol, TemplateControllerSymbol, TextSymbol, BindingSymbol, CustomAttributeSymbol, PlainAttributeSymbol */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CustomElementSymbol", function() { return CustomElementSymbol; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LetElementSymbol", function() { return LetElementSymbol; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PlainElementSymbol", function() { return PlainElementSymbol; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ReplacePartSymbol", function() { return ReplacePartSymbol; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TemplateControllerSymbol", function() { return TemplateControllerSymbol; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TextSymbol", function() { return TextSymbol; });
/* harmony import */ var _aurelia_jit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/jit */ "./node_modules/@aurelia/jit/dist/esnext/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BindingSymbol", function() { return _aurelia_jit__WEBPACK_IMPORTED_MODULE_0__["BindingSymbol"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CustomAttributeSymbol", function() { return _aurelia_jit__WEBPACK_IMPORTED_MODULE_0__["CustomAttributeSymbol"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PlainAttributeSymbol", function() { return _aurelia_jit__WEBPACK_IMPORTED_MODULE_0__["PlainAttributeSymbol"]; });


const CustomElementSymbol = _aurelia_jit__WEBPACK_IMPORTED_MODULE_0__["CustomElementSymbol"];
const LetElementSymbol = _aurelia_jit__WEBPACK_IMPORTED_MODULE_0__["LetElementSymbol"];
const PlainElementSymbol = _aurelia_jit__WEBPACK_IMPORTED_MODULE_0__["PlainElementSymbol"];
const ReplacePartSymbol = _aurelia_jit__WEBPACK_IMPORTED_MODULE_0__["ReplacePartSymbol"];
const TemplateControllerSymbol = _aurelia_jit__WEBPACK_IMPORTED_MODULE_0__["TemplateControllerSymbol"];
const TextSymbol = _aurelia_jit__WEBPACK_IMPORTED_MODULE_0__["TextSymbol"];

//# sourceMappingURL=semantic-model.js.map

/***/ }),

/***/ "./node_modules/@aurelia/jit-html/dist/esnext/template-binder.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@aurelia/jit-html/dist/esnext/template-binder.js ***!
  \***********************************************************************/
/*! exports provided: TemplateBinder */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TemplateBinder", function() { return TemplateBinder; });
/* harmony import */ var _aurelia_jit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/jit */ "./node_modules/@aurelia/jit/dist/esnext/index.js");
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aurelia/runtime */ "./node_modules/@aurelia/runtime/dist/esnext/index.js");
/* harmony import */ var _semantic_model__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./semantic-model */ "./node_modules/@aurelia/jit-html/dist/esnext/semantic-model.js");
/* eslint-disable compat/compat */




const invalidSurrogateAttribute = Object.assign(Object.create(null), {
    'id': true,
    'replace': true
});
const attributesToIgnore = Object.assign(Object.create(null), {
    'as-element': true,
    'replace': true
});
function hasInlineBindings(rawValue) {
    const len = rawValue.length;
    let ch = 0;
    for (let i = 0; i < len; ++i) {
        ch = rawValue.charCodeAt(i);
        if (ch === 92 /* Backslash */) {
            ++i;
            // Ignore whatever comes next because it's escaped
        }
        else if (ch === 58 /* Colon */) {
            return true;
        }
        else if (ch === 36 /* Dollar */ && rawValue.charCodeAt(i + 1) === 123 /* OpenBrace */) {
            return false;
        }
    }
    return false;
}
function processInterpolationText(symbol) {
    const node = symbol.physicalNode;
    const parentNode = node.parentNode;
    while (node.nextSibling !== null && node.nextSibling.nodeType === 3 /* Text */) {
        parentNode.removeChild(node.nextSibling);
    }
    node.textContent = '';
    parentNode.insertBefore(symbol.marker, node);
}
function isTemplateControllerOf(proxy, manifest) {
    return proxy !== manifest;
}
/**
 * A (temporary) standalone function that purely does the DOM processing (lifting) related to template controllers.
 * It's a first refactoring step towards separating DOM parsing/binding from mutations.
 */
function processTemplateControllers(dom, manifestProxy, manifest) {
    const manifestNode = manifest.physicalNode;
    let current = manifestProxy;
    let currentTemplate;
    while (isTemplateControllerOf(current, manifest)) {
        if (current.template === manifest) {
            // the DOM linkage is still in its original state here so we can safely assume the parentNode is non-null
            manifestNode.parentNode.replaceChild(current.marker, manifestNode);
            // if the manifest is a template element (e.g. <template repeat.for="...">) then we can skip one lift operation
            // and simply use the template directly, saving a bit of work
            if (manifestNode.nodeName === 'TEMPLATE') {
                current.physicalNode = manifestNode;
                // the template could safely stay without affecting anything visible, but let's keep the DOM tidy
                manifestNode.remove();
            }
            else {
                // the manifest is not a template element so we need to wrap it in one
                currentTemplate = current.physicalNode = dom.createTemplate();
                currentTemplate.content.appendChild(manifestNode);
            }
        }
        else {
            currentTemplate = current.physicalNode = dom.createTemplate();
            currentTemplate.content.appendChild(current.marker);
        }
        manifestNode.removeAttribute(current.syntax.rawName);
        current = current.template;
    }
}
function processReplacePart(dom, replacePart, manifestProxy) {
    let proxyNode;
    let currentTemplate;
    if ((manifestProxy.flags & 512 /* hasMarker */) > 0) {
        proxyNode = manifestProxy.marker;
    }
    else {
        proxyNode = manifestProxy.physicalNode;
    }
    if (proxyNode.nodeName === 'TEMPLATE') {
        // if it's a template element, no need to do anything special, just assign it to the replacePart
        replacePart.physicalNode = proxyNode;
    }
    else {
        // otherwise wrap the replace in a template
        currentTemplate = replacePart.physicalNode = dom.createTemplate();
        currentTemplate.content.appendChild(proxyNode);
    }
}
/**
 * TemplateBinder. Todo: describe goal of this class
 */
class TemplateBinder {
    constructor(dom, resources, attrParser, exprParser, attrSyntaxTransformer) {
        this.dom = dom;
        this.resources = resources;
        this.attrParser = attrParser;
        this.exprParser = exprParser;
        this.attrSyntaxTransformer = attrSyntaxTransformer;
    }
    bind(node) {
        const surrogate = new _semantic_model__WEBPACK_IMPORTED_MODULE_3__["PlainElementSymbol"](this.dom, node);
        const resources = this.resources;
        const attrSyntaxTransformer = this.attrSyntaxTransformer;
        const attributes = node.attributes;
        let i = 0;
        while (i < attributes.length) {
            const attr = attributes[i];
            const attrSyntax = this.attrParser.parse(attr.name, attr.value);
            if (invalidSurrogateAttribute[attrSyntax.target] === true) {
                throw new Error(`Invalid surrogate attribute: ${attrSyntax.target}`);
                // TODO: use reporter
            }
            const bindingCommand = resources.getBindingCommand(attrSyntax, true);
            if (bindingCommand === null || (bindingCommand.bindingType & 4096 /* IgnoreCustomAttr */) === 0) {
                const attrInfo = resources.getAttributeInfo(attrSyntax);
                if (attrInfo === null) {
                    // map special html attributes to their corresponding properties
                    attrSyntaxTransformer.transform(node, attrSyntax);
                    // it's not a custom attribute but might be a regular bound attribute or interpolation (it might also be nothing)
                    this.bindPlainAttribute(
                    /* attrSyntax */ attrSyntax, 
                    /* attr       */ attr, 
                    /* surrogate  */ surrogate, 
                    /* manifest   */ surrogate);
                }
                else if (attrInfo.isTemplateController) {
                    throw new Error('Cannot have template controller on surrogate element.');
                    // TODO: use reporter
                }
                else {
                    this.bindCustomAttribute(
                    /* attrSyntax */ attrSyntax, 
                    /* attrInfo   */ attrInfo, 
                    /* command    */ bindingCommand, 
                    /* manifest   */ surrogate);
                }
            }
            else {
                // map special html attributes to their corresponding properties
                attrSyntaxTransformer.transform(node, attrSyntax);
                // it's not a custom attribute but might be a regular bound attribute or interpolation (it might also be nothing)
                this.bindPlainAttribute(
                /* attrSyntax */ attrSyntax, 
                /* attr       */ attr, 
                /* surrogate  */ surrogate, 
                /* manifest   */ surrogate);
            }
            ++i;
        }
        this.bindChildNodes(
        /* node               */ node, 
        /* surrogate          */ surrogate, 
        /* manifest           */ surrogate, 
        /* manifestRoot       */ null, 
        /* parentManifestRoot */ null, 
        /* partName           */ null);
        return surrogate;
    }
    bindManifest(parentManifest, node, surrogate, manifest, manifestRoot, parentManifestRoot, partName) {
        switch (node.nodeName) {
            case 'LET':
                // let cannot have children and has some different processing rules, so return early
                this.bindLetElement(
                /* parentManifest */ parentManifest, 
                /* node           */ node);
                return;
            case 'SLOT':
                surrogate.hasSlots = true;
        }
        // get the part name to override the name of the compiled definition
        partName = node.getAttribute('replaceable');
        if (partName === '') {
            partName = 'default';
        }
        let name = node.getAttribute('as-element');
        if (name === null) {
            name = node.nodeName.toLowerCase();
        }
        const elementInfo = this.resources.getElementInfo(name);
        if (elementInfo === null) {
            // there is no registered custom element with this name
            manifest = new _semantic_model__WEBPACK_IMPORTED_MODULE_3__["PlainElementSymbol"](this.dom, node);
        }
        else {
            // it's a custom element so we set the manifestRoot as well (for storing replaces)
            parentManifestRoot = manifestRoot;
            manifestRoot = manifest = new _semantic_model__WEBPACK_IMPORTED_MODULE_3__["CustomElementSymbol"](this.dom, node, elementInfo);
        }
        // lifting operations done by template controllers and replaces effectively unlink the nodes, so start at the bottom
        this.bindChildNodes(
        /* node               */ node, 
        /* surrogate          */ surrogate, 
        /* manifest           */ manifest, 
        /* manifestRoot       */ manifestRoot, 
        /* parentManifestRoot */ parentManifestRoot, 
        /* partName           */ partName);
        // the parentManifest will receive either the direct child nodes, or the template controllers / replaces
        // wrapping them
        this.bindAttributes(
        /* node               */ node, 
        /* parentManifest     */ parentManifest, 
        /* surrogate          */ surrogate, 
        /* manifest           */ manifest, 
        /* manifestRoot       */ manifestRoot, 
        /* parentManifestRoot */ parentManifestRoot, 
        /* partName           */ partName);
        if (manifestRoot === manifest && manifest.isContainerless) {
            node.parentNode.replaceChild(manifest.marker, node);
        }
        else if (manifest.isTarget) {
            node.classList.add('au');
        }
    }
    bindLetElement(parentManifest, node) {
        const symbol = new _semantic_model__WEBPACK_IMPORTED_MODULE_3__["LetElementSymbol"](this.dom, node);
        parentManifest.childNodes.push(symbol);
        const attributes = node.attributes;
        let i = 0;
        while (i < attributes.length) {
            const attr = attributes[i];
            if (attr.name === 'to-binding-context') {
                node.removeAttribute('to-binding-context');
                symbol.toBindingContext = true;
                continue;
            }
            const attrSyntax = this.attrParser.parse(attr.name, attr.value);
            const command = this.resources.getBindingCommand(attrSyntax, false);
            const bindingType = command === null ? 2048 /* Interpolation */ : command.bindingType;
            const expr = this.exprParser.parse(attrSyntax.rawValue, bindingType);
            const to = Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["camelCase"])(attrSyntax.target);
            const info = new _aurelia_jit__WEBPACK_IMPORTED_MODULE_0__["BindableInfo"](to, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["BindingMode"].toView);
            symbol.bindings.push(new _semantic_model__WEBPACK_IMPORTED_MODULE_3__["BindingSymbol"](command, info, expr, attrSyntax.rawValue, to));
            ++i;
        }
        node.parentNode.replaceChild(symbol.marker, node);
    }
    bindAttributes(node, parentManifest, surrogate, manifest, manifestRoot, parentManifestRoot, partName) {
        // This is the top-level symbol for the current depth.
        // If there are no template controllers or replaces, it is always the manifest itself.
        // If there are template controllers, then this will be the outer-most TemplateControllerSymbol.
        let manifestProxy = manifest;
        let previousController = (void 0);
        let currentController = (void 0);
        const attributes = node.attributes;
        let i = 0;
        while (i < attributes.length) {
            const attr = attributes[i];
            ++i;
            if (attributesToIgnore[attr.name] === true) {
                continue;
            }
            const attrSyntax = this.attrParser.parse(attr.name, attr.value);
            const bindingCommand = this.resources.getBindingCommand(attrSyntax, true);
            if (bindingCommand === null || (bindingCommand.bindingType & 4096 /* IgnoreCustomAttr */) === 0) {
                const attrInfo = this.resources.getAttributeInfo(attrSyntax);
                if (attrInfo === null) {
                    // map special html attributes to their corresponding properties
                    this.attrSyntaxTransformer.transform(node, attrSyntax);
                    // it's not a custom attribute but might be a regular bound attribute or interpolation (it might also be nothing)
                    this.bindPlainAttribute(
                    /* attrSyntax */ attrSyntax, 
                    /* attr       */ attr, 
                    /* surrogate  */ surrogate, 
                    /* manifest   */ manifest);
                }
                else if (attrInfo.isTemplateController) {
                    // the manifest is wrapped by the inner-most template controller (if there are multiple on the same element)
                    // so keep setting manifest.templateController to the latest template controller we find
                    currentController = manifest.templateController = this.declareTemplateController(
                    /* attrSyntax */ attrSyntax, 
                    /* attrInfo   */ attrInfo, 
                    /* partName   */ partName);
                    // the proxy and the manifest are only identical when we're at the first template controller (since the controller
                    // is assigned to the proxy), so this evaluates to true at most once per node
                    if (manifestProxy === manifest) {
                        currentController.template = manifest;
                        manifestProxy = currentController;
                    }
                    else {
                        currentController.templateController = previousController;
                        currentController.template = previousController.template;
                        previousController.template = currentController;
                    }
                    previousController = currentController;
                }
                else {
                    // a regular custom attribute
                    this.bindCustomAttribute(
                    /* attrSyntax */ attrSyntax, 
                    /* attrInfo   */ attrInfo, 
                    /* command    */ bindingCommand, 
                    /* manifest   */ manifest);
                }
            }
            else {
                // map special html attributes to their corresponding properties
                this.attrSyntaxTransformer.transform(node, attrSyntax);
                // it's not a custom attribute but might be a regular bound attribute or interpolation (it might also be nothing)
                this.bindPlainAttribute(
                /* attrSyntax */ attrSyntax, 
                /* attr       */ attr, 
                /* surrogate  */ surrogate, 
                /* manifest   */ manifest);
            }
        }
        if (node.tagName === 'INPUT') {
            const type = node.type;
            if (type === 'checkbox' || type === 'radio') {
                this.ensureAttributeOrder(manifest);
            }
        }
        processTemplateControllers(this.dom, manifestProxy, manifest);
        let replace = node.getAttribute('replace');
        if (replace === '' || (replace === null && manifestRoot !== null && manifestRoot.isContainerless && ((parentManifest.flags & 16 /* isCustomElement */) > 0))) {
            replace = 'default';
        }
        const partOwner = manifest === manifestRoot ? parentManifestRoot : manifestRoot;
        if (replace === null || partOwner === null) {
            // the proxy is either the manifest itself or the outer-most controller; add it directly to the parent
            parentManifest.childNodes.push(manifestProxy);
        }
        else {
            // there is a replace attribute on this node, so add it to the parts collection of the manifestRoot
            // instead of to the childNodes
            const replacePart = new _semantic_model__WEBPACK_IMPORTED_MODULE_3__["ReplacePartSymbol"](replace);
            replacePart.parent = parentManifest;
            replacePart.template = manifestProxy;
            partOwner.parts.push(replacePart);
            if (parentManifest.templateController != null) {
                parentManifest.templateController.parts.push(replacePart);
            }
            processReplacePart(this.dom, replacePart, manifestProxy);
        }
    }
    // TODO: refactor to use render priority slots (this logic shouldn't be in the template binder)
    ensureAttributeOrder(manifest) {
        // swap the order of checked and model/value attribute, so that the required observers are prepared for checked-observer
        const attributes = manifest.plainAttributes;
        let modelOrValueIndex = void 0;
        let checkedIndex = void 0;
        let found = 0;
        for (let i = 0; i < attributes.length && found < 3; i++) {
            switch (attributes[i].syntax.target) {
                case 'model':
                case 'value':
                case 'matcher':
                    modelOrValueIndex = i;
                    found++;
                    break;
                case 'checked':
                    checkedIndex = i;
                    found++;
                    break;
            }
        }
        if (checkedIndex !== void 0 && modelOrValueIndex !== void 0 && checkedIndex < modelOrValueIndex) {
            [attributes[modelOrValueIndex], attributes[checkedIndex]] = [attributes[checkedIndex], attributes[modelOrValueIndex]];
        }
    }
    bindChildNodes(node, surrogate, manifest, manifestRoot, parentManifestRoot, partName) {
        let childNode;
        if (node.nodeName === 'TEMPLATE') {
            childNode = node.content.firstChild;
        }
        else {
            childNode = node.firstChild;
        }
        let nextChild;
        while (childNode !== null) {
            switch (childNode.nodeType) {
                case 1 /* Element */:
                    nextChild = childNode.nextSibling;
                    this.bindManifest(
                    /* parentManifest     */ manifest, 
                    /* node               */ childNode, 
                    /* surrogate          */ surrogate, 
                    /* manifest           */ manifest, 
                    /* manifestRoot       */ manifestRoot, 
                    /* parentManifestRoot */ parentManifestRoot, 
                    /* partName           */ partName);
                    childNode = nextChild;
                    break;
                case 3 /* Text */:
                    childNode = this.bindText(
                    /* textNode */ childNode, 
                    /* manifest */ manifest).nextSibling;
                    break;
                case 4 /* CDATASection */:
                case 7 /* ProcessingInstruction */:
                case 8 /* Comment */:
                case 10 /* DocumentType */:
                    childNode = childNode.nextSibling;
                    break;
                case 9 /* Document */:
                case 11 /* DocumentFragment */:
                    childNode = childNode.firstChild;
            }
        }
    }
    bindText(textNode, manifest) {
        const interpolation = this.exprParser.parse(textNode.wholeText, 2048 /* Interpolation */);
        if (interpolation !== null) {
            const symbol = new _semantic_model__WEBPACK_IMPORTED_MODULE_3__["TextSymbol"](this.dom, textNode, interpolation);
            manifest.childNodes.push(symbol);
            processInterpolationText(symbol);
        }
        let next = textNode;
        while (next.nextSibling !== null && next.nextSibling.nodeType === 3 /* Text */) {
            next = next.nextSibling;
        }
        return next;
    }
    declareTemplateController(attrSyntax, attrInfo, partName) {
        let symbol;
        const attrRawValue = attrSyntax.rawValue;
        const command = this.resources.getBindingCommand(attrSyntax, false);
        // multi-bindings logic here is similar to (and explained in) bindCustomAttribute
        const isMultiBindings = attrInfo.noMultiBindings === false && command === null && hasInlineBindings(attrRawValue);
        if (isMultiBindings) {
            symbol = new _semantic_model__WEBPACK_IMPORTED_MODULE_3__["TemplateControllerSymbol"](this.dom, attrSyntax, attrInfo, partName);
            this.bindMultiAttribute(symbol, attrInfo, attrRawValue);
        }
        else {
            symbol = new _semantic_model__WEBPACK_IMPORTED_MODULE_3__["TemplateControllerSymbol"](this.dom, attrSyntax, attrInfo, partName);
            const bindingType = command === null ? 2048 /* Interpolation */ : command.bindingType;
            const expr = this.exprParser.parse(attrRawValue, bindingType);
            symbol.bindings.push(new _semantic_model__WEBPACK_IMPORTED_MODULE_3__["BindingSymbol"](command, attrInfo.bindable, expr, attrRawValue, attrSyntax.target));
        }
        return symbol;
    }
    bindCustomAttribute(attrSyntax, attrInfo, command, manifest) {
        let symbol;
        const attrRawValue = attrSyntax.rawValue;
        // Custom attributes are always in multiple binding mode,
        // except when they can't be
        // When they cannot be:
        //        * has explicit configuration noMultiBindings: false
        //        * has binding command, ie: <div my-attr.bind="...">.
        //          In this scenario, the value of the custom attributes is required to be a valid expression
        //        * has no colon: ie: <div my-attr="abcd">
        //          In this scenario, it's simply invalid syntax. Consider style attribute rule-value pair: <div style="rule: ruleValue">
        const isMultiBindings = attrInfo.noMultiBindings === false && command === null && hasInlineBindings(attrRawValue);
        if (isMultiBindings) {
            // a multiple-bindings attribute usage (semicolon separated binding) is only valid without a binding command;
            // the binding commands must be declared in each of the property bindings
            symbol = new _semantic_model__WEBPACK_IMPORTED_MODULE_3__["CustomAttributeSymbol"](attrSyntax, attrInfo);
            this.bindMultiAttribute(symbol, attrInfo, attrRawValue);
        }
        else {
            symbol = new _semantic_model__WEBPACK_IMPORTED_MODULE_3__["CustomAttributeSymbol"](attrSyntax, attrInfo);
            const bindingType = command === null ? 2048 /* Interpolation */ : command.bindingType;
            const expr = this.exprParser.parse(attrRawValue, bindingType);
            symbol.bindings.push(new _semantic_model__WEBPACK_IMPORTED_MODULE_3__["BindingSymbol"](command, attrInfo.bindable, expr, attrRawValue, attrSyntax.target));
        }
        manifest.customAttributes.push(symbol);
        manifest.isTarget = true;
    }
    bindMultiAttribute(symbol, attrInfo, value) {
        const bindables = attrInfo.bindables;
        const valueLength = value.length;
        let attrName = void 0;
        let attrValue = void 0;
        let start = 0;
        let ch = 0;
        for (let i = 0; i < valueLength; ++i) {
            ch = value.charCodeAt(i);
            if (ch === 92 /* Backslash */) {
                ++i;
                // Ignore whatever comes next because it's escaped
            }
            else if (ch === 58 /* Colon */) {
                attrName = value.slice(start, i);
                // Skip whitespace after colon
                while (value.charCodeAt(++i) <= 32 /* Space */)
                    ;
                start = i;
                for (; i < valueLength; ++i) {
                    ch = value.charCodeAt(i);
                    if (ch === 92 /* Backslash */) {
                        ++i;
                        // Ignore whatever comes next because it's escaped
                    }
                    else if (ch === 59 /* Semicolon */) {
                        attrValue = value.slice(start, i);
                        break;
                    }
                }
                if (attrValue === void 0) {
                    // No semicolon found, so just grab the rest of the value
                    attrValue = value.slice(start);
                }
                const attrSyntax = this.attrParser.parse(attrName, attrValue);
                const attrTarget = Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["camelCase"])(attrSyntax.target);
                const command = this.resources.getBindingCommand(attrSyntax, false);
                const bindingType = command === null ? 2048 /* Interpolation */ : command.bindingType;
                const expr = this.exprParser.parse(attrValue, bindingType);
                let bindable = bindables[attrTarget];
                if (bindable === undefined) {
                    // everything in a multi-bindings expression must be used,
                    // so if it's not a bindable then we create one on the spot
                    bindable = bindables[attrTarget] = new _aurelia_jit__WEBPACK_IMPORTED_MODULE_0__["BindableInfo"](attrTarget, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["BindingMode"].toView);
                }
                symbol.bindings.push(new _semantic_model__WEBPACK_IMPORTED_MODULE_3__["BindingSymbol"](command, bindable, expr, attrValue, attrTarget));
                // Skip whitespace after semicolon
                while (i < valueLength && value.charCodeAt(++i) <= 32 /* Space */)
                    ;
                start = i;
                attrName = void 0;
                attrValue = void 0;
            }
        }
    }
    bindPlainAttribute(attrSyntax, attr, surrogate, manifest) {
        const command = this.resources.getBindingCommand(attrSyntax, false);
        const bindingType = command === null ? 2048 /* Interpolation */ : command.bindingType;
        const attrTarget = attrSyntax.target;
        const attrRawValue = attrSyntax.rawValue;
        let expr;
        if (attrRawValue.length === 0
            && (bindingType & 53 /* BindCommand */ | 49 /* OneTimeCommand */ | 50 /* ToViewCommand */ | 52 /* TwoWayCommand */) > 0) {
            if ((bindingType & 53 /* BindCommand */ | 49 /* OneTimeCommand */ | 50 /* ToViewCommand */ | 52 /* TwoWayCommand */) > 0) {
                // Default to the name of the attr for empty binding commands
                expr = this.exprParser.parse(Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["camelCase"])(attrTarget), bindingType);
            }
            else {
                return;
            }
        }
        else {
            expr = this.exprParser.parse(attrRawValue, bindingType);
        }
        if ((manifest.flags & 16 /* isCustomElement */) > 0) {
            const bindable = manifest.bindables[attrTarget];
            if (bindable != null) {
                // if the attribute name matches a bindable property name, add it regardless of whether it's a command, interpolation, or just a plain string;
                // the template compiler will translate it to the correct instruction
                manifest.bindings.push(new _semantic_model__WEBPACK_IMPORTED_MODULE_3__["BindingSymbol"](command, bindable, expr, attrRawValue, attrTarget));
                manifest.isTarget = true;
            }
            else if (expr != null) {
                // if it does not map to a bindable, only add it if we were able to parse an expression (either a command or interpolation)
                manifest.plainAttributes.push(new _semantic_model__WEBPACK_IMPORTED_MODULE_3__["PlainAttributeSymbol"](attrSyntax, command, expr));
                manifest.isTarget = true;
            }
        }
        else if (expr != null) {
            // either a binding command, an interpolation, or a ref
            manifest.plainAttributes.push(new _semantic_model__WEBPACK_IMPORTED_MODULE_3__["PlainAttributeSymbol"](attrSyntax, command, expr));
            manifest.isTarget = true;
        }
        else if (manifest === surrogate) {
            // any attributes, even if they are plain (no command/interpolation etc), should be added if they
            // are on the surrogate element
            manifest.plainAttributes.push(new _semantic_model__WEBPACK_IMPORTED_MODULE_3__["PlainAttributeSymbol"](attrSyntax, command, expr));
        }
        if (command == null && expr != null) {
            // if it's an interpolation, clear the attribute value
            attr.value = '';
        }
    }
}
//# sourceMappingURL=template-binder.js.map

/***/ }),

/***/ "./node_modules/@aurelia/jit-html/dist/esnext/template-compiler.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@aurelia/jit-html/dist/esnext/template-compiler.js ***!
  \*************************************************************************/
/*! exports provided: TemplateCompiler */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TemplateCompiler", function() { return TemplateCompiler; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _aurelia_jit__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/jit */ "./node_modules/@aurelia/jit/dist/esnext/index.js");
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @aurelia/runtime */ "./node_modules/@aurelia/runtime/dist/esnext/index.js");
/* harmony import */ var _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @aurelia/runtime-html */ "./node_modules/@aurelia/runtime-html/dist/esnext/index.js");
/* harmony import */ var _attribute_syntax_transformer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./attribute-syntax-transformer */ "./node_modules/@aurelia/jit-html/dist/esnext/attribute-syntax-transformer.js");
/* harmony import */ var _template_binder__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./template-binder */ "./node_modules/@aurelia/jit-html/dist/esnext/template-binder.js");
/* harmony import */ var _template_element_factory__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./template-element-factory */ "./node_modules/@aurelia/jit-html/dist/esnext/template-element-factory.js");








class CustomElementCompilationUnit {
    constructor(partialDefinition, surrogate, template) {
        this.partialDefinition = partialDefinition;
        this.surrogate = surrogate;
        this.template = template;
        this.instructions = [];
        this.surrogates = [];
        this.scopeParts = [];
        this.parts = {};
    }
    toDefinition() {
        const def = this.partialDefinition;
        return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__["CustomElementDefinition"].create({
            ...def,
            instructions: Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__["mergeArrays"])(def.instructions, this.instructions),
            surrogates: Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__["mergeArrays"])(def.surrogates, this.surrogates),
            scopeParts: Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__["mergeArrays"])(def.scopeParts, this.scopeParts),
            template: this.template,
            needsCompile: false,
            hasSlots: this.surrogate.hasSlots,
        });
    }
}
/**
 * Default (runtime-agnostic) implementation for `ITemplateCompiler`.
 *
 * @internal
 */
let TemplateCompiler = class TemplateCompiler {
    constructor(factory, attrParser, exprParser, attrSyntaxModifier) {
        this.factory = factory;
        this.attrParser = attrParser;
        this.exprParser = exprParser;
        this.attrSyntaxModifier = attrSyntaxModifier;
    }
    get name() {
        return 'default';
    }
    static register(container) {
        return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__["Registration"].singleton(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__["ITemplateCompiler"], this).register(container);
    }
    compile(partialDefinition, context) {
        const definition = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__["CustomElementDefinition"].getOrCreate(partialDefinition);
        if (definition.template === null || definition.template === void 0) {
            return definition;
        }
        const resources = _aurelia_jit__WEBPACK_IMPORTED_MODULE_1__["ResourceModel"].getOrCreate(context);
        const { attrParser, exprParser, attrSyntaxModifier, factory } = this;
        const binder = new _template_binder__WEBPACK_IMPORTED_MODULE_6__["TemplateBinder"](context.get(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__["IDOM"]), resources, attrParser, exprParser, attrSyntaxModifier);
        const template = factory.createTemplate(definition.template);
        const surrogate = binder.bind(template);
        const compilation = this.compilation = new CustomElementCompilationUnit(definition, surrogate, template);
        const customAttributes = surrogate.customAttributes;
        const plainAttributes = surrogate.plainAttributes;
        const customAttributeLength = customAttributes.length;
        const plainAttributeLength = plainAttributes.length;
        if (customAttributeLength + plainAttributeLength > 0) {
            let offset = 0;
            for (let i = 0; customAttributeLength > i; ++i) {
                compilation.surrogates[offset] = this.compileCustomAttribute(customAttributes[i]);
                offset++;
            }
            for (let i = 0; i < plainAttributeLength; ++i) {
                compilation.surrogates[offset] = this.compilePlainAttribute(plainAttributes[i], true);
                offset++;
            }
        }
        this.compileChildNodes(surrogate, compilation.instructions, compilation.scopeParts);
        const compiledDefinition = compilation.toDefinition();
        this.compilation = null;
        return compiledDefinition;
    }
    compileChildNodes(parent, instructionRows, scopeParts) {
        if ((parent.flags & 8192 /* hasChildNodes */) > 0) {
            const childNodes = parent.childNodes;
            const ii = childNodes.length;
            let childNode;
            for (let i = 0; i < ii; ++i) {
                childNode = childNodes[i];
                if ((childNode.flags & 128 /* isText */) > 0) {
                    instructionRows.push([new _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_4__["TextBindingInstruction"](childNode.interpolation)]);
                }
                else if ((childNode.flags & 32 /* isLetElement */) > 0) {
                    const bindings = childNode.bindings;
                    const instructions = [];
                    let binding;
                    const jj = bindings.length;
                    for (let j = 0; j < jj; ++j) {
                        binding = bindings[j];
                        instructions[j] = new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__["LetBindingInstruction"](binding.expression, binding.target);
                    }
                    instructionRows.push([new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__["LetElementInstruction"](instructions, childNode.toBindingContext)]);
                }
                else {
                    this.compileParentNode(childNode, instructionRows, scopeParts);
                }
            }
        }
    }
    compileCustomElement(symbol, instructionRows, scopeParts) {
        // offset 1 to leave a spot for the hydrate instruction so we don't need to create 2 arrays with a spread etc
        const instructionRow = this.compileAttributes(symbol, 1);
        instructionRow[0] = new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__["HydrateElementInstruction"](symbol.res, this.compileBindings(symbol), this.compileParts(symbol, scopeParts));
        instructionRows.push(instructionRow);
        this.compileChildNodes(symbol, instructionRows, scopeParts);
    }
    compilePlainElement(symbol, instructionRows, scopeParts) {
        const attributes = this.compileAttributes(symbol, 0);
        if (attributes.length > 0) {
            instructionRows.push(attributes);
        }
        this.compileChildNodes(symbol, instructionRows, scopeParts);
    }
    compileParentNode(symbol, instructionRows, scopeParts) {
        switch (symbol.flags & 511 /* type */) {
            case 16 /* isCustomElement */:
                this.compileCustomElement(symbol, instructionRows, scopeParts);
                break;
            case 64 /* isPlainElement */:
                this.compilePlainElement(symbol, instructionRows, scopeParts);
                break;
            case 1 /* isTemplateController */:
                this.compileTemplateController(symbol, instructionRows, scopeParts);
        }
    }
    compileTemplateController(symbol, instructionRows, scopeParts) {
        const bindings = this.compileBindings(symbol);
        const controllerInstructionRows = [];
        const controllerScopeParts = [];
        this.compileParentNode(symbol.template, controllerInstructionRows, controllerScopeParts);
        Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__["mergeDistinct"])(scopeParts, controllerScopeParts, false);
        const def = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__["CustomElementDefinition"].create({
            name: symbol.partName === null ? symbol.res : symbol.partName,
            scopeParts: controllerScopeParts,
            template: symbol.physicalNode,
            instructions: controllerInstructionRows,
            needsCompile: false,
        });
        let parts = void 0;
        if ((symbol.flags & 16384 /* hasParts */) > 0) {
            parts = {};
            for (const part of symbol.parts) {
                parts[part.name] = this.compilation.parts[part.name];
            }
        }
        instructionRows.push([new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__["HydrateTemplateController"](def, symbol.res, bindings, symbol.res === 'else', parts)]);
    }
    compileBindings(symbol) {
        let bindingInstructions;
        if ((symbol.flags & 4096 /* hasBindings */) > 0) {
            // either a custom element with bindings, a custom attribute / template controller with dynamic options,
            // or a single value custom attribute binding
            const { bindings } = symbol;
            const len = bindings.length;
            bindingInstructions = Array(len);
            let i = 0;
            for (; i < len; ++i) {
                bindingInstructions[i] = this.compileBinding(bindings[i]);
            }
        }
        else {
            bindingInstructions = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__["PLATFORM"].emptyArray;
        }
        return bindingInstructions;
    }
    compileBinding(symbol) {
        if (symbol.command === null) {
            // either an interpolation or a normal string value assigned to an element or attribute binding
            if (symbol.expression === null) {
                // the template binder already filtered out non-bindables, so we know we need a setProperty here
                return new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__["SetPropertyInstruction"](symbol.rawValue, symbol.bindable.propName);
            }
            else {
                // either an element binding interpolation or a dynamic options attribute binding interpolation
                return new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__["InterpolationInstruction"](symbol.expression, symbol.bindable.propName);
            }
        }
        else {
            // either an element binding command, dynamic options attribute binding command,
            // or custom attribute / template controller (single value) binding command
            return symbol.command.compile(symbol);
        }
    }
    compileAttributes(symbol, offset) {
        let attributeInstructions;
        if ((symbol.flags & 2048 /* hasAttributes */) > 0) {
            // any attributes on a custom element (which are not bindables) or a plain element
            const customAttributes = symbol.customAttributes;
            const plainAttributes = symbol.plainAttributes;
            const customAttributeLength = customAttributes.length;
            const plainAttributesLength = plainAttributes.length;
            attributeInstructions = Array(offset + customAttributeLength + plainAttributesLength);
            for (let i = 0; customAttributeLength > i; ++i) {
                attributeInstructions[offset] = this.compileCustomAttribute(customAttributes[i]);
                offset++;
            }
            for (let i = 0; plainAttributesLength > i; ++i) {
                attributeInstructions[offset] = this.compilePlainAttribute(plainAttributes[i], false);
                offset++;
            }
        }
        else if (offset > 0) {
            attributeInstructions = Array(offset);
        }
        else {
            attributeInstructions = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__["PLATFORM"].emptyArray;
        }
        return attributeInstructions;
    }
    compileCustomAttribute(symbol) {
        // a normal custom attribute (not template controller)
        const bindings = this.compileBindings(symbol);
        return new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__["HydrateAttributeInstruction"](symbol.res, bindings);
    }
    compilePlainAttribute(symbol, isOnSurrogate) {
        if (symbol.command === null) {
            const syntax = symbol.syntax;
            if (symbol.expression === null) {
                const attrRawValue = syntax.rawValue;
                if (isOnSurrogate) {
                    switch (syntax.target) {
                        case 'class':
                            return new _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_4__["SetClassAttributeInstruction"](attrRawValue);
                        case 'style':
                            return new _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_4__["SetStyleAttributeInstruction"](attrRawValue);
                        // todo:  define how to merge other attribute peacefully
                        //        this is an existing feature request
                    }
                }
                // a plain attribute on a surrogate
                return new _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_4__["SetAttributeInstruction"](attrRawValue, syntax.target);
            }
            else {
                // a plain attribute with an interpolation
                return new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__["InterpolationInstruction"](symbol.expression, syntax.target);
            }
        }
        else {
            // a plain attribute with a binding command
            return symbol.command.compile(symbol);
        }
    }
    // private compileAttribute(symbol: IAttributeSymbol): HTMLAttributeInstruction {
    //   // any attribute on a custom element (which is not a bindable) or a plain element
    //   if (symbol.flags & SymbolFlags.isCustomAttribute) {
    //     return this.compileCustomAttribute(symbol as CustomAttributeSymbol);
    //   } else {
    //     return this.compilePlainAttribute(symbol as PlainAttributeSymbol);
    //   }
    // }
    compileParts(symbol, scopeParts) {
        const parts = {};
        if ((symbol.flags & 16384 /* hasParts */) > 0) {
            const replaceParts = symbol.parts;
            const len = replaceParts.length;
            let s = scopeParts.length;
            for (let i = 0; i < len; ++i) {
                const replacePart = replaceParts[i];
                if (!scopeParts.includes(replacePart.name)) {
                    scopeParts[s++] = replacePart.name;
                }
                const partScopeParts = [];
                const partInstructionRows = [];
                this.compileParentNode(replacePart.template, partInstructionRows, partScopeParts);
                // TODO: the assignment to `this.compilation.parts[replacePart.name]` might be the cause of replaceable bug reported by rluba
                // need to verify this
                this.compilation.parts[replacePart.name] = parts[replacePart.name] = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__["CustomElementDefinition"].create({
                    name: replacePart.name,
                    scopeParts: partScopeParts,
                    template: replacePart.physicalNode,
                    instructions: partInstructionRows,
                    needsCompile: false,
                });
            }
        }
        return parts;
    }
};
TemplateCompiler = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(0, _template_element_factory__WEBPACK_IMPORTED_MODULE_7__["ITemplateElementFactory"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(1, _aurelia_jit__WEBPACK_IMPORTED_MODULE_1__["IAttributeParser"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(2, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__["IExpressionParser"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(3, _attribute_syntax_transformer__WEBPACK_IMPORTED_MODULE_5__["IAttrSyntaxTransformer"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object, Object, Object, Object])
], TemplateCompiler);

//# sourceMappingURL=template-compiler.js.map

/***/ }),

/***/ "./node_modules/@aurelia/jit-html/dist/esnext/template-element-factory.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@aurelia/jit-html/dist/esnext/template-element-factory.js ***!
  \********************************************************************************/
/*! exports provided: ITemplateElementFactory, HTMLTemplateElementFactory */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ITemplateElementFactory", function() { return ITemplateElementFactory; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HTMLTemplateElementFactory", function() { return HTMLTemplateElementFactory; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aurelia/runtime */ "./node_modules/@aurelia/runtime/dist/esnext/index.js");



// For some reason rollup complains about `DI.createInterface<ITemplateElementFactory>().noDefault()` with this message:
// "semantic error TS2742 The inferred type of 'ITemplateElementFactory' cannot be named without a reference to '@aurelia/jit/node_modules/@aurelia/kernel'. This is likely not portable. A type annotation is necessary"
// So.. investigate why that happens (or rather, why it *only* happens here and not for the other 50)
const ITemplateElementFactory = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["DI"].createInterface('ITemplateElementFactory').noDefault();
const markupCache = {};
/**
 * Default implementation for `ITemplateFactory` for use in an HTML based runtime.
 *
 * @internal
 */
let HTMLTemplateElementFactory = class HTMLTemplateElementFactory {
    constructor(dom) {
        this.dom = dom;
        this.template = dom.createTemplate();
    }
    static register(container) {
        return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Registration"].singleton(ITemplateElementFactory, this).register(container);
    }
    createTemplate(input) {
        if (typeof input === 'string') {
            let result = markupCache[input];
            if (result === void 0) {
                const template = this.template;
                template.innerHTML = input;
                const node = template.content.firstElementChild;
                // if the input is either not wrapped in a template or there is more than one node,
                // return the whole template that wraps it/them (and create a new one for the next input)
                if (node == null || node.nodeName !== 'TEMPLATE' || node.nextElementSibling != null) {
                    this.template = this.dom.createTemplate();
                    result = template;
                }
                else {
                    // the node to return is both a template and the only node, so return just the node
                    // and clean up the template for the next input
                    template.content.removeChild(node);
                    result = node;
                }
                markupCache[input] = result;
            }
            return result.cloneNode(true);
        }
        if (input.nodeName !== 'TEMPLATE') {
            // if we get one node that is not a template, wrap it in one
            const template = this.dom.createTemplate();
            template.content.appendChild(input);
            return template;
        }
        // we got a template element, remove it from the DOM if it's present there and don't
        // do any other processing
        if (input.parentNode != null) {
            input.parentNode.removeChild(input);
        }
        return input;
    }
};
HTMLTemplateElementFactory = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(0, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["IDOM"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object])
], HTMLTemplateElementFactory);

//# sourceMappingURL=template-element-factory.js.map

/***/ }),

/***/ "./node_modules/@aurelia/jit/dist/esnext/ast.js":
/*!******************************************************!*\
  !*** ./node_modules/@aurelia/jit/dist/esnext/ast.js ***!
  \******************************************************/
/*! exports provided: AttrSyntax */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AttrSyntax", function() { return AttrSyntax; });
class AttrSyntax {
    constructor(rawName, rawValue, target, command) {
        this.rawName = rawName;
        this.rawValue = rawValue;
        this.target = target;
        this.command = command;
    }
}
//# sourceMappingURL=ast.js.map

/***/ }),

/***/ "./node_modules/@aurelia/jit/dist/esnext/attribute-parser.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@aurelia/jit/dist/esnext/attribute-parser.js ***!
  \*******************************************************************/
/*! exports provided: IAttributeParser, AttributeParser */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IAttributeParser", function() { return IAttributeParser; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AttributeParser", function() { return AttributeParser; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _ast__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ast */ "./node_modules/@aurelia/jit/dist/esnext/ast.js");
/* harmony import */ var _attribute_pattern__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./attribute-pattern */ "./node_modules/@aurelia/jit/dist/esnext/attribute-pattern.js");




const IAttributeParser = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["DI"].createInterface('IAttributeParser').withDefault(x => x.singleton(AttributeParser));
/** @internal */
let AttributeParser = class AttributeParser {
    constructor(interpreter, attrPatterns) {
        this.interpreter = interpreter;
        this.cache = {};
        this.interpreter = interpreter;
        const patterns = this.patterns = {};
        attrPatterns.forEach(attrPattern => {
            const defs = _attribute_pattern__WEBPACK_IMPORTED_MODULE_3__["AttributePattern"].getPatternDefinitions(attrPattern.constructor);
            interpreter.add(defs);
            defs.forEach(def => {
                patterns[def.pattern] = attrPattern;
            });
        });
    }
    parse(name, value) {
        let interpretation = this.cache[name];
        if (interpretation == null) {
            interpretation = this.cache[name] = this.interpreter.interpret(name);
        }
        const pattern = interpretation.pattern;
        if (pattern == null) {
            return new _ast__WEBPACK_IMPORTED_MODULE_2__["AttrSyntax"](name, value, name, null);
        }
        else {
            return this.patterns[pattern][pattern](name, value, interpretation.parts);
        }
    }
};
AttributeParser = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(0, _attribute_pattern__WEBPACK_IMPORTED_MODULE_3__["ISyntaxInterpreter"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(1, Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["all"])(_attribute_pattern__WEBPACK_IMPORTED_MODULE_3__["IAttributePattern"])),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object, Array])
], AttributeParser);

//# sourceMappingURL=attribute-parser.js.map

/***/ }),

/***/ "./node_modules/@aurelia/jit/dist/esnext/attribute-pattern.js":
/*!********************************************************************!*\
  !*** ./node_modules/@aurelia/jit/dist/esnext/attribute-pattern.js ***!
  \********************************************************************/
/*! exports provided: CharSpec, Interpretation, State, StaticSegment, DynamicSegment, SymbolSegment, SegmentTypes, ISyntaxInterpreter, SyntaxInterpreter, IAttributePattern, attributePattern, AttributePatternResourceDefinition, AttributePattern */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CharSpec", function() { return CharSpec; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Interpretation", function() { return Interpretation; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "State", function() { return State; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StaticSegment", function() { return StaticSegment; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DynamicSegment", function() { return DynamicSegment; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SymbolSegment", function() { return SymbolSegment; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SegmentTypes", function() { return SegmentTypes; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ISyntaxInterpreter", function() { return ISyntaxInterpreter; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SyntaxInterpreter", function() { return SyntaxInterpreter; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IAttributePattern", function() { return IAttributePattern; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "attributePattern", function() { return attributePattern; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AttributePatternResourceDefinition", function() { return AttributePatternResourceDefinition; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AttributePattern", function() { return AttributePattern; });
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");

/** @internal */
class CharSpec {
    constructor(chars, repeat, isSymbol, isInverted) {
        this.chars = chars;
        this.repeat = repeat;
        this.isSymbol = isSymbol;
        this.isInverted = isInverted;
        if (isInverted) {
            switch (chars.length) {
                case 0:
                    this.has = this.hasOfNoneInverse;
                    break;
                case 1:
                    this.has = this.hasOfSingleInverse;
                    break;
                default:
                    this.has = this.hasOfMultipleInverse;
            }
        }
        else {
            switch (chars.length) {
                case 0:
                    this.has = this.hasOfNone;
                    break;
                case 1:
                    this.has = this.hasOfSingle;
                    break;
                default:
                    this.has = this.hasOfMultiple;
            }
        }
    }
    equals(other) {
        return this.chars === other.chars
            && this.repeat === other.repeat
            && this.isSymbol === other.isSymbol
            && this.isInverted === other.isInverted;
    }
    hasOfMultiple(char) {
        return this.chars.includes(char);
    }
    hasOfSingle(char) {
        return this.chars === char;
    }
    hasOfNone(char) {
        return false;
    }
    hasOfMultipleInverse(char) {
        return !this.chars.includes(char);
    }
    hasOfSingleInverse(char) {
        return this.chars !== char;
    }
    hasOfNoneInverse(char) {
        return true;
    }
}
class Interpretation {
    constructor() {
        this.parts = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["PLATFORM"].emptyArray;
        this._pattern = '';
        this.currentRecord = {};
        this.partsRecord = {};
    }
    get pattern() {
        const value = this._pattern;
        if (value === '') {
            return null;
        }
        else {
            return value;
        }
    }
    set pattern(value) {
        if (value == null) {
            this._pattern = '';
            this.parts = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["PLATFORM"].emptyArray;
        }
        else {
            this._pattern = value;
            this.parts = this.partsRecord[value];
        }
    }
    append(pattern, ch) {
        const { currentRecord } = this;
        if (currentRecord[pattern] === undefined) {
            currentRecord[pattern] = ch;
        }
        else {
            currentRecord[pattern] += ch;
        }
    }
    next(pattern) {
        const { currentRecord } = this;
        if (currentRecord[pattern] !== undefined) {
            const { partsRecord } = this;
            if (partsRecord[pattern] === undefined) {
                partsRecord[pattern] = [currentRecord[pattern]];
            }
            else {
                partsRecord[pattern].push(currentRecord[pattern]);
            }
            currentRecord[pattern] = undefined;
        }
    }
}
/** @internal */
class State {
    constructor(charSpec, ...patterns) {
        this.charSpec = charSpec;
        this.nextStates = [];
        this.types = null;
        this.isEndpoint = false;
        this.patterns = patterns;
    }
    get pattern() {
        return this.isEndpoint ? this.patterns[0] : null;
    }
    findChild(charSpec) {
        const nextStates = this.nextStates;
        const len = nextStates.length;
        let child = null;
        for (let i = 0; i < len; ++i) {
            child = nextStates[i];
            if (charSpec.equals(child.charSpec)) {
                return child;
            }
        }
        return null;
    }
    append(charSpec, pattern) {
        const { patterns } = this;
        if (!patterns.includes(pattern)) {
            patterns.push(pattern);
        }
        let state = this.findChild(charSpec);
        if (state == null) {
            state = new State(charSpec, pattern);
            this.nextStates.push(state);
            if (charSpec.repeat) {
                state.nextStates.push(state);
            }
        }
        return state;
    }
    findMatches(ch, interpretation) {
        // TODO: reuse preallocated arrays
        const results = [];
        const nextStates = this.nextStates;
        const len = nextStates.length;
        let childLen = 0;
        let child = null;
        let i = 0;
        let j = 0;
        for (; i < len; ++i) {
            child = nextStates[i];
            if (child.charSpec.has(ch)) {
                results.push(child);
                childLen = child.patterns.length;
                j = 0;
                if (child.charSpec.isSymbol) {
                    for (; j < childLen; ++j) {
                        interpretation.next(child.patterns[j]);
                    }
                }
                else {
                    for (; j < childLen; ++j) {
                        interpretation.append(child.patterns[j], ch);
                    }
                }
            }
        }
        return results;
    }
}
/** @internal */
class StaticSegment {
    constructor(text) {
        this.text = text;
        this.text = text;
        const len = this.len = text.length;
        const specs = this.specs = [];
        for (let i = 0; i < len; ++i) {
            specs.push(new CharSpec(text[i], false, false, false));
        }
    }
    eachChar(callback) {
        const { len, specs } = this;
        for (let i = 0; i < len; ++i) {
            callback(specs[i]);
        }
    }
}
/** @internal */
class DynamicSegment {
    constructor(symbols) {
        this.text = 'PART';
        this.spec = new CharSpec(symbols, true, false, true);
    }
    eachChar(callback) {
        callback(this.spec);
    }
}
/** @internal */
class SymbolSegment {
    constructor(text) {
        this.text = text;
        this.spec = new CharSpec(text, false, true, false);
    }
    eachChar(callback) {
        callback(this.spec);
    }
}
/** @internal */
class SegmentTypes {
    constructor() {
        this.statics = 0;
        this.dynamics = 0;
        this.symbols = 0;
    }
}
const ISyntaxInterpreter = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["DI"].createInterface('ISyntaxInterpreter').withDefault(x => x.singleton(SyntaxInterpreter));
/** @internal */
class SyntaxInterpreter {
    constructor() {
        this.rootState = new State(null);
        this.initialStates = [this.rootState];
    }
    add(defOrDefs) {
        let i = 0;
        if (Array.isArray(defOrDefs)) {
            const ii = defOrDefs.length;
            for (; i < ii; ++i) {
                this.add(defOrDefs[i]);
            }
            return;
        }
        let currentState = this.rootState;
        const def = defOrDefs;
        const pattern = def.pattern;
        const types = new SegmentTypes();
        const segments = this.parse(def, types);
        const len = segments.length;
        const callback = (ch) => {
            currentState = currentState.append(ch, pattern);
        };
        for (i = 0; i < len; ++i) {
            segments[i].eachChar(callback);
        }
        currentState.types = types;
        currentState.isEndpoint = true;
    }
    interpret(name) {
        const interpretation = new Interpretation();
        let states = this.initialStates;
        const len = name.length;
        for (let i = 0; i < len; ++i) {
            states = this.getNextStates(states, name.charAt(i), interpretation);
            if (states.length === 0) {
                break;
            }
        }
        states.sort((a, b) => {
            if (a.isEndpoint) {
                if (!b.isEndpoint) {
                    return -1;
                }
            }
            else if (b.isEndpoint) {
                return 1;
            }
            else {
                return 0;
            }
            const aTypes = a.types;
            const bTypes = b.types;
            if (aTypes.statics !== bTypes.statics) {
                return bTypes.statics - aTypes.statics;
            }
            if (aTypes.dynamics !== bTypes.dynamics) {
                return bTypes.dynamics - aTypes.dynamics;
            }
            if (aTypes.symbols !== bTypes.symbols) {
                return bTypes.symbols - aTypes.symbols;
            }
            return 0;
        });
        if (states.length > 0) {
            const state = states[0];
            if (!state.charSpec.isSymbol) {
                interpretation.next(state.pattern);
            }
            interpretation.pattern = state.pattern;
        }
        return interpretation;
    }
    getNextStates(states, ch, interpretation) {
        // TODO: reuse preallocated arrays
        const nextStates = [];
        let state = null;
        const len = states.length;
        for (let i = 0; i < len; ++i) {
            state = states[i];
            nextStates.push(...state.findMatches(ch, interpretation));
        }
        return nextStates;
    }
    parse(def, types) {
        const result = [];
        const pattern = def.pattern;
        const len = pattern.length;
        let i = 0;
        let start = 0;
        let c = '';
        while (i < len) {
            c = pattern.charAt(i);
            if (!def.symbols.includes(c)) {
                if (i === start) {
                    if (c === 'P' && pattern.slice(i, i + 4) === 'PART') {
                        start = i = (i + 4);
                        result.push(new DynamicSegment(def.symbols));
                        ++types.dynamics;
                    }
                    else {
                        ++i;
                    }
                }
                else {
                    ++i;
                }
            }
            else if (i !== start) {
                result.push(new StaticSegment(pattern.slice(start, i)));
                ++types.statics;
                start = i;
            }
            else {
                result.push(new SymbolSegment(pattern.slice(start, i + 1)));
                ++types.symbols;
                start = ++i;
            }
        }
        if (start !== i) {
            result.push(new StaticSegment(pattern.slice(start, i)));
            ++types.statics;
        }
        return result;
    }
}
function validatePrototype(handler, patternDefs) {
    for (const def of patternDefs) {
        // note: we're intentionally not throwing here
        if (!(def.pattern in handler)) {
            _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].write(401, def.pattern); // TODO: organize error codes
        }
        else if (typeof handler[def.pattern] !== 'function') {
            _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].write(402, def.pattern); // TODO: organize error codes
        }
    }
}
const IAttributePattern = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["DI"].createInterface('IAttributePattern').noDefault();
function attributePattern(...patternDefs) {
    return function decorator(target) {
        return AttributePattern.define(patternDefs, target);
    };
}
class AttributePatternResourceDefinition {
    constructor(Type) {
        this.Type = Type;
        this.name = (void 0);
    }
    register(container) {
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Registration"].singleton(IAttributePattern, this.Type).register(container);
    }
}
const AttributePattern = Object.freeze({
    name: _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Protocol"].resource.keyFor('attribute-pattern'),
    definitionAnnotationKey: 'attribute-pattern-definitions',
    define(patternDefs, Type) {
        validatePrototype(Type.prototype, patternDefs);
        const definition = new AttributePatternResourceDefinition(Type);
        const { name, definitionAnnotationKey } = AttributePattern;
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Metadata"].define(name, definition, Type);
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Protocol"].resource.appendTo(Type, name);
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Protocol"].annotation.set(Type, definitionAnnotationKey, patternDefs);
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Protocol"].annotation.appendTo(Type, definitionAnnotationKey);
        return Type;
    },
    getPatternDefinitions(Type) {
        return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Protocol"].annotation.get(Type, AttributePattern.definitionAnnotationKey);
    }
});
//# sourceMappingURL=attribute-pattern.js.map

/***/ }),

/***/ "./node_modules/@aurelia/jit/dist/esnext/attribute-patterns.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@aurelia/jit/dist/esnext/attribute-patterns.js ***!
  \*********************************************************************/
/*! exports provided: DotSeparatedAttributePattern, RefAttributePattern, ColonPrefixedBindAttributePattern, AtPrefixedTriggerAttributePattern */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DotSeparatedAttributePattern", function() { return DotSeparatedAttributePattern; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RefAttributePattern", function() { return RefAttributePattern; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ColonPrefixedBindAttributePattern", function() { return ColonPrefixedBindAttributePattern; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AtPrefixedTriggerAttributePattern", function() { return AtPrefixedTriggerAttributePattern; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _ast__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ast */ "./node_modules/@aurelia/jit/dist/esnext/ast.js");
/* harmony import */ var _attribute_pattern__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./attribute-pattern */ "./node_modules/@aurelia/jit/dist/esnext/attribute-pattern.js");



let DotSeparatedAttributePattern = class DotSeparatedAttributePattern {
    ['PART.PART'](rawName, rawValue, parts) {
        return new _ast__WEBPACK_IMPORTED_MODULE_1__["AttrSyntax"](rawName, rawValue, parts[0], parts[1]);
    }
    ['PART.PART.PART'](rawName, rawValue, parts) {
        return new _ast__WEBPACK_IMPORTED_MODULE_1__["AttrSyntax"](rawName, rawValue, parts[0], parts[2]);
    }
};
DotSeparatedAttributePattern = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_attribute_pattern__WEBPACK_IMPORTED_MODULE_2__["attributePattern"])({ pattern: 'PART.PART', symbols: '.' }, { pattern: 'PART.PART.PART', symbols: '.' })
], DotSeparatedAttributePattern);

let RefAttributePattern = class RefAttributePattern {
    ['ref'](rawName, rawValue, parts) {
        return new _ast__WEBPACK_IMPORTED_MODULE_1__["AttrSyntax"](rawName, rawValue, 'element', 'ref');
    }
    ['PART.ref'](rawName, rawValue, parts) {
        return new _ast__WEBPACK_IMPORTED_MODULE_1__["AttrSyntax"](rawName, rawValue, parts[0], 'ref');
    }
};
RefAttributePattern = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_attribute_pattern__WEBPACK_IMPORTED_MODULE_2__["attributePattern"])({ pattern: 'ref', symbols: '' }, { pattern: 'PART.ref', symbols: '.' })
], RefAttributePattern);

let ColonPrefixedBindAttributePattern = class ColonPrefixedBindAttributePattern {
    [':PART'](rawName, rawValue, parts) {
        return new _ast__WEBPACK_IMPORTED_MODULE_1__["AttrSyntax"](rawName, rawValue, parts[0], 'bind');
    }
};
ColonPrefixedBindAttributePattern = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_attribute_pattern__WEBPACK_IMPORTED_MODULE_2__["attributePattern"])({ pattern: ':PART', symbols: ':' })
], ColonPrefixedBindAttributePattern);

let AtPrefixedTriggerAttributePattern = class AtPrefixedTriggerAttributePattern {
    ['@PART'](rawName, rawValue, parts) {
        return new _ast__WEBPACK_IMPORTED_MODULE_1__["AttrSyntax"](rawName, rawValue, parts[0], 'trigger');
    }
};
AtPrefixedTriggerAttributePattern = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_attribute_pattern__WEBPACK_IMPORTED_MODULE_2__["attributePattern"])({ pattern: '@PART', symbols: '@' })
], AtPrefixedTriggerAttributePattern);

//# sourceMappingURL=attribute-patterns.js.map

/***/ }),

/***/ "./node_modules/@aurelia/jit/dist/esnext/binding-command.js":
/*!******************************************************************!*\
  !*** ./node_modules/@aurelia/jit/dist/esnext/binding-command.js ***!
  \******************************************************************/
/*! exports provided: bindingCommand, BindingCommandDefinition, BindingCommand, getTarget */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "bindingCommand", function() { return bindingCommand; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BindingCommandDefinition", function() { return BindingCommandDefinition; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BindingCommand", function() { return BindingCommand; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getTarget", function() { return getTarget; });
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/runtime */ "./node_modules/@aurelia/runtime/dist/esnext/index.js");


function bindingCommand(nameOrDefinition) {
    return function (target) {
        return BindingCommand.define(nameOrDefinition, target);
    };
}
class BindingCommandDefinition {
    constructor(Type, name, aliases, key, type) {
        this.Type = Type;
        this.name = name;
        this.aliases = aliases;
        this.key = key;
        this.type = type;
    }
    static create(nameOrDef, Type) {
        let name;
        let def;
        if (typeof nameOrDef === 'string') {
            name = nameOrDef;
            def = { name };
        }
        else {
            name = nameOrDef.name;
            def = nameOrDef;
        }
        return new BindingCommandDefinition(Type, Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["firstDefined"])(BindingCommand.getAnnotation(Type, 'name'), name), Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["mergeArrays"])(BindingCommand.getAnnotation(Type, 'aliases'), def.aliases, Type.aliases), BindingCommand.keyFrom(name), Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["firstDefined"])(BindingCommand.getAnnotation(Type, 'type'), def.type, Type.type, null));
    }
    register(container) {
        const { Type, key, aliases } = this;
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Registration"].singleton(key, Type).register(container);
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Registration"].aliasTo(key, Type).register(container);
        Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["registerAliases"])(aliases, BindingCommand, key, container);
    }
}
const BindingCommand = {
    name: _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Protocol"].resource.keyFor('binding-command'),
    keyFrom(name) {
        return `${BindingCommand.name}:${name}`;
    },
    isType(value) {
        return typeof value === 'function' && _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Metadata"].hasOwn(BindingCommand.name, value);
    },
    define(nameOrDef, Type) {
        const definition = BindingCommandDefinition.create(nameOrDef, Type);
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Metadata"].define(BindingCommand.name, definition, definition.Type);
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Metadata"].define(BindingCommand.name, definition, definition);
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Protocol"].resource.appendTo(Type, BindingCommand.name);
        return definition.Type;
    },
    getDefinition(Type) {
        const def = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Metadata"].getOwn(BindingCommand.name, Type);
        if (def === void 0) {
            throw new Error(`No definition found for type ${Type.name}`);
        }
        return def;
    },
    annotate(Type, prop, value) {
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Metadata"].define(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Protocol"].annotation.keyFor(prop), value, Type);
    },
    getAnnotation(Type, prop) {
        return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Metadata"].getOwn(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Protocol"].annotation.keyFor(prop), Type);
    },
};
function getTarget(binding, makeCamelCase) {
    if (binding.flags & 256 /* isBinding */) {
        return binding.bindable.propName;
    }
    else if (makeCamelCase) {
        return Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["camelCase"])(binding.syntax.target);
    }
    else {
        return binding.syntax.target;
    }
}
//# sourceMappingURL=binding-command.js.map

/***/ }),

/***/ "./node_modules/@aurelia/jit/dist/esnext/binding-commands.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@aurelia/jit/dist/esnext/binding-commands.js ***!
  \*******************************************************************/
/*! exports provided: OneTimeBindingCommand, ToViewBindingCommand, FromViewBindingCommand, TwoWayBindingCommand, DefaultBindingCommand, CallBindingCommand, ForBindingCommand */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OneTimeBindingCommand", function() { return OneTimeBindingCommand; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ToViewBindingCommand", function() { return ToViewBindingCommand; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FromViewBindingCommand", function() { return FromViewBindingCommand; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TwoWayBindingCommand", function() { return TwoWayBindingCommand; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DefaultBindingCommand", function() { return DefaultBindingCommand; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CallBindingCommand", function() { return CallBindingCommand; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ForBindingCommand", function() { return ForBindingCommand; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/runtime */ "./node_modules/@aurelia/runtime/dist/esnext/index.js");
/* harmony import */ var _binding_command__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./binding-command */ "./node_modules/@aurelia/jit/dist/esnext/binding-command.js");
/* harmony import */ var _semantic_model__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./semantic-model */ "./node_modules/@aurelia/jit/dist/esnext/semantic-model.js");




let OneTimeBindingCommand = class OneTimeBindingCommand {
    constructor() {
        this.bindingType = 49 /* OneTimeCommand */;
    }
    compile(binding) {
        return new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["OneTimeBindingInstruction"](binding.expression, Object(_binding_command__WEBPACK_IMPORTED_MODULE_2__["getTarget"])(binding, false));
    }
};
OneTimeBindingCommand = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_binding_command__WEBPACK_IMPORTED_MODULE_2__["bindingCommand"])('one-time')
], OneTimeBindingCommand);

let ToViewBindingCommand = class ToViewBindingCommand {
    constructor() {
        this.bindingType = 50 /* ToViewCommand */;
    }
    compile(binding) {
        return new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["ToViewBindingInstruction"](binding.expression, Object(_binding_command__WEBPACK_IMPORTED_MODULE_2__["getTarget"])(binding, false));
    }
};
ToViewBindingCommand = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_binding_command__WEBPACK_IMPORTED_MODULE_2__["bindingCommand"])('to-view')
], ToViewBindingCommand);

let FromViewBindingCommand = class FromViewBindingCommand {
    constructor() {
        this.bindingType = 51 /* FromViewCommand */;
    }
    compile(binding) {
        return new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["FromViewBindingInstruction"](binding.expression, Object(_binding_command__WEBPACK_IMPORTED_MODULE_2__["getTarget"])(binding, false));
    }
};
FromViewBindingCommand = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_binding_command__WEBPACK_IMPORTED_MODULE_2__["bindingCommand"])('from-view')
], FromViewBindingCommand);

let TwoWayBindingCommand = class TwoWayBindingCommand {
    constructor() {
        this.bindingType = 52 /* TwoWayCommand */;
    }
    compile(binding) {
        return new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["TwoWayBindingInstruction"](binding.expression, Object(_binding_command__WEBPACK_IMPORTED_MODULE_2__["getTarget"])(binding, false));
    }
};
TwoWayBindingCommand = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_binding_command__WEBPACK_IMPORTED_MODULE_2__["bindingCommand"])('two-way')
], TwoWayBindingCommand);

let DefaultBindingCommand = class DefaultBindingCommand {
    constructor() {
        this.bindingType = 53 /* BindCommand */;
    }
    compile(binding) {
        let mode = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["BindingMode"].default;
        if (binding instanceof _semantic_model__WEBPACK_IMPORTED_MODULE_3__["BindingSymbol"]) {
            mode = binding.bindable.mode;
        }
        else {
            const command = binding.syntax.command;
            switch (command) {
                case 'bind':
                case 'to-view':
                    mode = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["BindingMode"].toView;
                    break;
                case 'one-time':
                    mode = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["BindingMode"].oneTime;
                    break;
                case 'from-view':
                    mode = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["BindingMode"].fromView;
                    break;
                case 'two-way':
                    mode = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["BindingMode"].twoWay;
                    break;
            }
        }
        switch (mode) {
            case _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["BindingMode"].default:
            case _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["BindingMode"].toView:
                return ToViewBindingCommand.prototype.compile(binding);
            case _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["BindingMode"].oneTime:
                return OneTimeBindingCommand.prototype.compile(binding);
            case _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["BindingMode"].fromView:
                return FromViewBindingCommand.prototype.compile(binding);
            case _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["BindingMode"].twoWay:
                return TwoWayBindingCommand.prototype.compile(binding);
        }
    }
};
DefaultBindingCommand = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_binding_command__WEBPACK_IMPORTED_MODULE_2__["bindingCommand"])('bind')
], DefaultBindingCommand);

let CallBindingCommand = class CallBindingCommand {
    constructor() {
        this.bindingType = 153 /* CallCommand */;
    }
    compile(binding) {
        return new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["CallBindingInstruction"](binding.expression, Object(_binding_command__WEBPACK_IMPORTED_MODULE_2__["getTarget"])(binding, true));
    }
};
CallBindingCommand = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_binding_command__WEBPACK_IMPORTED_MODULE_2__["bindingCommand"])('call')
], CallBindingCommand);

let ForBindingCommand = class ForBindingCommand {
    constructor() {
        this.bindingType = 539 /* ForCommand */;
    }
    compile(binding) {
        return new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["IteratorBindingInstruction"](binding.expression, Object(_binding_command__WEBPACK_IMPORTED_MODULE_2__["getTarget"])(binding, false));
    }
};
ForBindingCommand = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_binding_command__WEBPACK_IMPORTED_MODULE_2__["bindingCommand"])('for')
], ForBindingCommand);

//# sourceMappingURL=binding-commands.js.map

/***/ }),

/***/ "./node_modules/@aurelia/jit/dist/esnext/common.js":
/*!*********************************************************!*\
  !*** ./node_modules/@aurelia/jit/dist/esnext/common.js ***!
  \*********************************************************/
/*! exports provided: unescapeCode, Access, Precedence, Token, Char */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "unescapeCode", function() { return unescapeCode; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Access", function() { return Access; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Precedence", function() { return Precedence; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Token", function() { return Token; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Char", function() { return Char; });
function unescapeCode(code) {
    switch (code) {
        case 98 /* LowerB */: return 8 /* Backspace */;
        case 116 /* LowerT */: return 9 /* Tab */;
        case 110 /* LowerN */: return 10 /* LineFeed */;
        case 118 /* LowerV */: return 11 /* VerticalTab */;
        case 102 /* LowerF */: return 12 /* FormFeed */;
        case 114 /* LowerR */: return 13 /* CarriageReturn */;
        case 34 /* DoubleQuote */: return 34 /* DoubleQuote */;
        case 39 /* SingleQuote */: return 39 /* SingleQuote */;
        case 92 /* Backslash */: return 92 /* Backslash */;
        default: return code;
    }
}
var Access;
(function (Access) {
    Access[Access["Reset"] = 0] = "Reset";
    Access[Access["Ancestor"] = 511] = "Ancestor";
    Access[Access["This"] = 512] = "This";
    Access[Access["Scope"] = 1024] = "Scope";
    Access[Access["Member"] = 2048] = "Member";
    Access[Access["Keyed"] = 4096] = "Keyed";
})(Access || (Access = {}));
var Precedence;
(function (Precedence) {
    Precedence[Precedence["Variadic"] = 61] = "Variadic";
    Precedence[Precedence["Assign"] = 62] = "Assign";
    Precedence[Precedence["Conditional"] = 63] = "Conditional";
    Precedence[Precedence["LogicalOR"] = 64] = "LogicalOR";
    Precedence[Precedence["LogicalAND"] = 128] = "LogicalAND";
    Precedence[Precedence["Equality"] = 192] = "Equality";
    Precedence[Precedence["Relational"] = 256] = "Relational";
    Precedence[Precedence["Additive"] = 320] = "Additive";
    Precedence[Precedence["Multiplicative"] = 384] = "Multiplicative";
    Precedence[Precedence["Binary"] = 448] = "Binary";
    Precedence[Precedence["LeftHandSide"] = 449] = "LeftHandSide";
    Precedence[Precedence["Primary"] = 450] = "Primary";
    Precedence[Precedence["Unary"] = 451] = "Unary";
})(Precedence || (Precedence = {}));
/** @internal */
var Token;
(function (Token) {
    Token[Token["EOF"] = 1572864] = "EOF";
    Token[Token["ExpressionTerminal"] = 1048576] = "ExpressionTerminal";
    Token[Token["AccessScopeTerminal"] = 524288] = "AccessScopeTerminal";
    Token[Token["ClosingToken"] = 262144] = "ClosingToken";
    Token[Token["OpeningToken"] = 131072] = "OpeningToken";
    Token[Token["BinaryOp"] = 65536] = "BinaryOp";
    Token[Token["UnaryOp"] = 32768] = "UnaryOp";
    Token[Token["LeftHandSide"] = 16384] = "LeftHandSide";
    Token[Token["StringOrNumericLiteral"] = 12288] = "StringOrNumericLiteral";
    Token[Token["NumericLiteral"] = 8192] = "NumericLiteral";
    Token[Token["StringLiteral"] = 4096] = "StringLiteral";
    Token[Token["IdentifierName"] = 3072] = "IdentifierName";
    Token[Token["Keyword"] = 2048] = "Keyword";
    Token[Token["Identifier"] = 1024] = "Identifier";
    Token[Token["Contextual"] = 512] = "Contextual";
    Token[Token["Precedence"] = 448] = "Precedence";
    Token[Token["Type"] = 63] = "Type";
    Token[Token["FalseKeyword"] = 2048] = "FalseKeyword";
    Token[Token["TrueKeyword"] = 2049] = "TrueKeyword";
    Token[Token["NullKeyword"] = 2050] = "NullKeyword";
    Token[Token["UndefinedKeyword"] = 2051] = "UndefinedKeyword";
    Token[Token["ThisScope"] = 3076] = "ThisScope";
    Token[Token["ParentScope"] = 3077] = "ParentScope";
    Token[Token["OpenParen"] = 671750] = "OpenParen";
    Token[Token["OpenBrace"] = 131079] = "OpenBrace";
    Token[Token["Dot"] = 16392] = "Dot";
    Token[Token["CloseBrace"] = 1835017] = "CloseBrace";
    Token[Token["CloseParen"] = 1835018] = "CloseParen";
    Token[Token["Comma"] = 1572875] = "Comma";
    Token[Token["OpenBracket"] = 671756] = "OpenBracket";
    Token[Token["CloseBracket"] = 1835021] = "CloseBracket";
    Token[Token["Colon"] = 1572878] = "Colon";
    Token[Token["Question"] = 1572879] = "Question";
    Token[Token["Ampersand"] = 1572880] = "Ampersand";
    Token[Token["Bar"] = 1572883] = "Bar";
    Token[Token["BarBar"] = 1638548] = "BarBar";
    Token[Token["AmpersandAmpersand"] = 1638613] = "AmpersandAmpersand";
    Token[Token["EqualsEquals"] = 1638678] = "EqualsEquals";
    Token[Token["ExclamationEquals"] = 1638679] = "ExclamationEquals";
    Token[Token["EqualsEqualsEquals"] = 1638680] = "EqualsEqualsEquals";
    Token[Token["ExclamationEqualsEquals"] = 1638681] = "ExclamationEqualsEquals";
    Token[Token["LessThan"] = 1638746] = "LessThan";
    Token[Token["GreaterThan"] = 1638747] = "GreaterThan";
    Token[Token["LessThanEquals"] = 1638748] = "LessThanEquals";
    Token[Token["GreaterThanEquals"] = 1638749] = "GreaterThanEquals";
    Token[Token["InKeyword"] = 1640798] = "InKeyword";
    Token[Token["InstanceOfKeyword"] = 1640799] = "InstanceOfKeyword";
    Token[Token["Plus"] = 623008] = "Plus";
    Token[Token["Minus"] = 623009] = "Minus";
    Token[Token["TypeofKeyword"] = 34850] = "TypeofKeyword";
    Token[Token["VoidKeyword"] = 34851] = "VoidKeyword";
    Token[Token["Asterisk"] = 1638884] = "Asterisk";
    Token[Token["Percent"] = 1638885] = "Percent";
    Token[Token["Slash"] = 1638886] = "Slash";
    Token[Token["Equals"] = 1048615] = "Equals";
    Token[Token["Exclamation"] = 32808] = "Exclamation";
    Token[Token["TemplateTail"] = 540713] = "TemplateTail";
    Token[Token["TemplateContinuation"] = 540714] = "TemplateContinuation";
    Token[Token["OfKeyword"] = 1051179] = "OfKeyword";
})(Token || (Token = {}));
var Char;
(function (Char) {
    Char[Char["Null"] = 0] = "Null";
    Char[Char["Backspace"] = 8] = "Backspace";
    Char[Char["Tab"] = 9] = "Tab";
    Char[Char["LineFeed"] = 10] = "LineFeed";
    Char[Char["VerticalTab"] = 11] = "VerticalTab";
    Char[Char["FormFeed"] = 12] = "FormFeed";
    Char[Char["CarriageReturn"] = 13] = "CarriageReturn";
    Char[Char["Space"] = 32] = "Space";
    Char[Char["Exclamation"] = 33] = "Exclamation";
    Char[Char["DoubleQuote"] = 34] = "DoubleQuote";
    Char[Char["Dollar"] = 36] = "Dollar";
    Char[Char["Percent"] = 37] = "Percent";
    Char[Char["Ampersand"] = 38] = "Ampersand";
    Char[Char["SingleQuote"] = 39] = "SingleQuote";
    Char[Char["OpenParen"] = 40] = "OpenParen";
    Char[Char["CloseParen"] = 41] = "CloseParen";
    Char[Char["Asterisk"] = 42] = "Asterisk";
    Char[Char["Plus"] = 43] = "Plus";
    Char[Char["Comma"] = 44] = "Comma";
    Char[Char["Minus"] = 45] = "Minus";
    Char[Char["Dot"] = 46] = "Dot";
    Char[Char["Slash"] = 47] = "Slash";
    Char[Char["Semicolon"] = 59] = "Semicolon";
    Char[Char["Backtick"] = 96] = "Backtick";
    Char[Char["OpenBracket"] = 91] = "OpenBracket";
    Char[Char["Backslash"] = 92] = "Backslash";
    Char[Char["CloseBracket"] = 93] = "CloseBracket";
    Char[Char["Caret"] = 94] = "Caret";
    Char[Char["Underscore"] = 95] = "Underscore";
    Char[Char["OpenBrace"] = 123] = "OpenBrace";
    Char[Char["Bar"] = 124] = "Bar";
    Char[Char["CloseBrace"] = 125] = "CloseBrace";
    Char[Char["Colon"] = 58] = "Colon";
    Char[Char["LessThan"] = 60] = "LessThan";
    Char[Char["Equals"] = 61] = "Equals";
    Char[Char["GreaterThan"] = 62] = "GreaterThan";
    Char[Char["Question"] = 63] = "Question";
    Char[Char["Zero"] = 48] = "Zero";
    Char[Char["One"] = 49] = "One";
    Char[Char["Two"] = 50] = "Two";
    Char[Char["Three"] = 51] = "Three";
    Char[Char["Four"] = 52] = "Four";
    Char[Char["Five"] = 53] = "Five";
    Char[Char["Six"] = 54] = "Six";
    Char[Char["Seven"] = 55] = "Seven";
    Char[Char["Eight"] = 56] = "Eight";
    Char[Char["Nine"] = 57] = "Nine";
    Char[Char["UpperA"] = 65] = "UpperA";
    Char[Char["UpperB"] = 66] = "UpperB";
    Char[Char["UpperC"] = 67] = "UpperC";
    Char[Char["UpperD"] = 68] = "UpperD";
    Char[Char["UpperE"] = 69] = "UpperE";
    Char[Char["UpperF"] = 70] = "UpperF";
    Char[Char["UpperG"] = 71] = "UpperG";
    Char[Char["UpperH"] = 72] = "UpperH";
    Char[Char["UpperI"] = 73] = "UpperI";
    Char[Char["UpperJ"] = 74] = "UpperJ";
    Char[Char["UpperK"] = 75] = "UpperK";
    Char[Char["UpperL"] = 76] = "UpperL";
    Char[Char["UpperM"] = 77] = "UpperM";
    Char[Char["UpperN"] = 78] = "UpperN";
    Char[Char["UpperO"] = 79] = "UpperO";
    Char[Char["UpperP"] = 80] = "UpperP";
    Char[Char["UpperQ"] = 81] = "UpperQ";
    Char[Char["UpperR"] = 82] = "UpperR";
    Char[Char["UpperS"] = 83] = "UpperS";
    Char[Char["UpperT"] = 84] = "UpperT";
    Char[Char["UpperU"] = 85] = "UpperU";
    Char[Char["UpperV"] = 86] = "UpperV";
    Char[Char["UpperW"] = 87] = "UpperW";
    Char[Char["UpperX"] = 88] = "UpperX";
    Char[Char["UpperY"] = 89] = "UpperY";
    Char[Char["UpperZ"] = 90] = "UpperZ";
    Char[Char["LowerA"] = 97] = "LowerA";
    Char[Char["LowerB"] = 98] = "LowerB";
    Char[Char["LowerC"] = 99] = "LowerC";
    Char[Char["LowerD"] = 100] = "LowerD";
    Char[Char["LowerE"] = 101] = "LowerE";
    Char[Char["LowerF"] = 102] = "LowerF";
    Char[Char["LowerG"] = 103] = "LowerG";
    Char[Char["LowerH"] = 104] = "LowerH";
    Char[Char["LowerI"] = 105] = "LowerI";
    Char[Char["LowerJ"] = 106] = "LowerJ";
    Char[Char["LowerK"] = 107] = "LowerK";
    Char[Char["LowerL"] = 108] = "LowerL";
    Char[Char["LowerM"] = 109] = "LowerM";
    Char[Char["LowerN"] = 110] = "LowerN";
    Char[Char["LowerO"] = 111] = "LowerO";
    Char[Char["LowerP"] = 112] = "LowerP";
    Char[Char["LowerQ"] = 113] = "LowerQ";
    Char[Char["LowerR"] = 114] = "LowerR";
    Char[Char["LowerS"] = 115] = "LowerS";
    Char[Char["LowerT"] = 116] = "LowerT";
    Char[Char["LowerU"] = 117] = "LowerU";
    Char[Char["LowerV"] = 118] = "LowerV";
    Char[Char["LowerW"] = 119] = "LowerW";
    Char[Char["LowerX"] = 120] = "LowerX";
    Char[Char["LowerY"] = 121] = "LowerY";
    Char[Char["LowerZ"] = 122] = "LowerZ";
})(Char || (Char = {}));
//# sourceMappingURL=common.js.map

/***/ }),

/***/ "./node_modules/@aurelia/jit/dist/esnext/configuration.js":
/*!****************************************************************!*\
  !*** ./node_modules/@aurelia/jit/dist/esnext/configuration.js ***!
  \****************************************************************/
/*! exports provided: IExpressionParserRegistration, DefaultComponents, AtPrefixedTriggerAttributePatternRegistration, ColonPrefixedBindAttributePatternRegistration, RefAttributePatternRegistration, DotSeparatedAttributePatternRegistration, DefaultBindingSyntax, ShortHandBindingSyntax, CallBindingCommandRegistration, DefaultBindingCommandRegistration, ForBindingCommandRegistration, FromViewBindingCommandRegistration, OneTimeBindingCommandRegistration, ToViewBindingCommandRegistration, TwoWayBindingCommandRegistration, DefaultBindingLanguage, JitConfiguration */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IExpressionParserRegistration", function() { return IExpressionParserRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DefaultComponents", function() { return DefaultComponents; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AtPrefixedTriggerAttributePatternRegistration", function() { return AtPrefixedTriggerAttributePatternRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ColonPrefixedBindAttributePatternRegistration", function() { return ColonPrefixedBindAttributePatternRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RefAttributePatternRegistration", function() { return RefAttributePatternRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DotSeparatedAttributePatternRegistration", function() { return DotSeparatedAttributePatternRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DefaultBindingSyntax", function() { return DefaultBindingSyntax; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ShortHandBindingSyntax", function() { return ShortHandBindingSyntax; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CallBindingCommandRegistration", function() { return CallBindingCommandRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DefaultBindingCommandRegistration", function() { return DefaultBindingCommandRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ForBindingCommandRegistration", function() { return ForBindingCommandRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FromViewBindingCommandRegistration", function() { return FromViewBindingCommandRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OneTimeBindingCommandRegistration", function() { return OneTimeBindingCommandRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ToViewBindingCommandRegistration", function() { return ToViewBindingCommandRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TwoWayBindingCommandRegistration", function() { return TwoWayBindingCommandRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DefaultBindingLanguage", function() { return DefaultBindingLanguage; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "JitConfiguration", function() { return JitConfiguration; });
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/runtime */ "./node_modules/@aurelia/runtime/dist/esnext/index.js");
/* harmony import */ var _attribute_patterns__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./attribute-patterns */ "./node_modules/@aurelia/jit/dist/esnext/attribute-patterns.js");
/* harmony import */ var _binding_commands__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./binding-commands */ "./node_modules/@aurelia/jit/dist/esnext/binding-commands.js");
/* harmony import */ var _expression_parser__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./expression-parser */ "./node_modules/@aurelia/jit/dist/esnext/expression-parser.js");





const IExpressionParserRegistration = {
    register(container) {
        container.registerTransformer(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["IExpressionParser"], parser => {
            Reflect.set(parser, 'parseCore', _expression_parser__WEBPACK_IMPORTED_MODULE_4__["parseExpression"]);
            return parser;
        });
    }
};
/**
 * Default runtime/environment-agnostic implementations for the following interfaces:
 * - `IExpressionParser`
 */
const DefaultComponents = [
    IExpressionParserRegistration
];
const AtPrefixedTriggerAttributePatternRegistration = _attribute_patterns__WEBPACK_IMPORTED_MODULE_2__["AtPrefixedTriggerAttributePattern"];
const ColonPrefixedBindAttributePatternRegistration = _attribute_patterns__WEBPACK_IMPORTED_MODULE_2__["ColonPrefixedBindAttributePattern"];
const RefAttributePatternRegistration = _attribute_patterns__WEBPACK_IMPORTED_MODULE_2__["RefAttributePattern"];
const DotSeparatedAttributePatternRegistration = _attribute_patterns__WEBPACK_IMPORTED_MODULE_2__["DotSeparatedAttributePattern"];
/**
 * Default binding syntax for the following attribute name patterns:
 * - `ref`
 * - `target.command` (dot-separated)
 */
const DefaultBindingSyntax = [
    RefAttributePatternRegistration,
    DotSeparatedAttributePatternRegistration
];
/**
 * Binding syntax for short-hand attribute name patterns:
 * - `@target` (short-hand for `target.trigger`)
 * - `:target` (short-hand for `target.bind`)
 */
const ShortHandBindingSyntax = [
    AtPrefixedTriggerAttributePatternRegistration,
    ColonPrefixedBindAttributePatternRegistration
];
const CallBindingCommandRegistration = _binding_commands__WEBPACK_IMPORTED_MODULE_3__["CallBindingCommand"];
const DefaultBindingCommandRegistration = _binding_commands__WEBPACK_IMPORTED_MODULE_3__["DefaultBindingCommand"];
const ForBindingCommandRegistration = _binding_commands__WEBPACK_IMPORTED_MODULE_3__["ForBindingCommand"];
const FromViewBindingCommandRegistration = _binding_commands__WEBPACK_IMPORTED_MODULE_3__["FromViewBindingCommand"];
const OneTimeBindingCommandRegistration = _binding_commands__WEBPACK_IMPORTED_MODULE_3__["OneTimeBindingCommand"];
const ToViewBindingCommandRegistration = _binding_commands__WEBPACK_IMPORTED_MODULE_3__["ToViewBindingCommand"];
const TwoWayBindingCommandRegistration = _binding_commands__WEBPACK_IMPORTED_MODULE_3__["TwoWayBindingCommand"];
/**
 * Default runtime/environment-agnostic binding commands:
 * - Property observation: `.bind`, `.one-time`, `.from-view`, `.to-view`, `.two-way`
 * - Function call: `.call`
 * - Collection observation: `.for`
 */
const DefaultBindingLanguage = [
    DefaultBindingCommandRegistration,
    OneTimeBindingCommandRegistration,
    FromViewBindingCommandRegistration,
    ToViewBindingCommandRegistration,
    TwoWayBindingCommandRegistration,
    CallBindingCommandRegistration,
    ForBindingCommandRegistration
];
/**
 * A DI configuration object containing runtime/environment-agnostic registrations:
 * - `RuntimeConfiguration` from `@aurelia/runtime`
 * - `DefaultComponents`
 * - `DefaultBindingSyntax`
 * - `DefaultBindingLanguage`
 */
const JitConfiguration = {
    /**
     * Apply this configuration to the provided container.
     */
    register(container) {
        return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["RuntimeConfiguration"]
            .register(container)
            .register(...DefaultComponents, ...DefaultBindingSyntax, ...DefaultBindingLanguage);
    },
    /**
     * Create a new container with this configuration applied to it.
     */
    createContainer() {
        return this.register(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["DI"].createContainer());
    }
};
//# sourceMappingURL=configuration.js.map

/***/ }),

/***/ "./node_modules/@aurelia/jit/dist/esnext/expression-parser.js":
/*!********************************************************************!*\
  !*** ./node_modules/@aurelia/jit/dist/esnext/expression-parser.js ***!
  \********************************************************************/
/*! exports provided: ParserState, parseExpression, parse */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ParserState", function() { return ParserState; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "parseExpression", function() { return parseExpression; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "parse", function() { return parse; });
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/runtime */ "./node_modules/@aurelia/runtime/dist/esnext/index.js");
/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./common */ "./node_modules/@aurelia/jit/dist/esnext/common.js");



const $false = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["PrimitiveLiteralExpression"].$false;
const $true = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["PrimitiveLiteralExpression"].$true;
const $null = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["PrimitiveLiteralExpression"].$null;
const $undefined = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["PrimitiveLiteralExpression"].$undefined;
const $this = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["AccessThisExpression"].$this;
const $parent = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["AccessThisExpression"].$parent;
/** @internal */
class ParserState {
    constructor(input) {
        this.input = input;
        this.index = 0;
        this.startIndex = 0;
        this.lastIndex = 0;
        this.currentToken = 1572864 /* EOF */;
        this.tokenValue = '';
        this.assignable = true;
        this.length = input.length;
        this.currentChar = input.charCodeAt(0);
    }
    get tokenRaw() {
        return this.input.slice(this.startIndex, this.index);
    }
}
const $state = new ParserState('');
var SyntaxError;
(function (SyntaxError) {
    SyntaxError[SyntaxError["InvalidExpressionStart"] = 100] = "InvalidExpressionStart";
    SyntaxError[SyntaxError["UnconsumedToken"] = 101] = "UnconsumedToken";
    SyntaxError[SyntaxError["DoubleDot"] = 102] = "DoubleDot";
    SyntaxError[SyntaxError["InvalidMemberExpression"] = 103] = "InvalidMemberExpression";
    SyntaxError[SyntaxError["UnexpectedEndOfExpression"] = 104] = "UnexpectedEndOfExpression";
    SyntaxError[SyntaxError["ExpectedIdentifier"] = 105] = "ExpectedIdentifier";
    SyntaxError[SyntaxError["InvalidForDeclaration"] = 106] = "InvalidForDeclaration";
    SyntaxError[SyntaxError["InvalidObjectLiteralPropertyDefinition"] = 107] = "InvalidObjectLiteralPropertyDefinition";
    SyntaxError[SyntaxError["UnterminatedQuote"] = 108] = "UnterminatedQuote";
    SyntaxError[SyntaxError["UnterminatedTemplate"] = 109] = "UnterminatedTemplate";
    SyntaxError[SyntaxError["MissingExpectedToken"] = 110] = "MissingExpectedToken";
    SyntaxError[SyntaxError["UnexpectedCharacter"] = 111] = "UnexpectedCharacter";
    SyntaxError[SyntaxError["MissingValueConverter"] = 112] = "MissingValueConverter";
    SyntaxError[SyntaxError["MissingBindingBehavior"] = 113] = "MissingBindingBehavior";
})(SyntaxError || (SyntaxError = {}));
var SemanticError;
(function (SemanticError) {
    SemanticError[SemanticError["NotAssignable"] = 150] = "NotAssignable";
    SemanticError[SemanticError["UnexpectedForOf"] = 151] = "UnexpectedForOf";
})(SemanticError || (SemanticError = {}));
function parseExpression(input, bindingType) {
    $state.input = input;
    $state.length = input.length;
    $state.index = 0;
    $state.currentChar = input.charCodeAt(0);
    return parse($state, 0 /* Reset */, 61 /* Variadic */, bindingType === void 0 ? 53 /* BindCommand */ : bindingType);
}
/** @internal */
// JUSTIFICATION: This is performance-critical code which follows a subset of the well-known ES spec.
// Knowing the spec, or parsers in general, will help with understanding this code and it is therefore not the
// single source of information for being able to figure it out.
// It generally does not need to change unless the spec changes or spec violations are found, or optimization
// opportunities are found (which would likely not fix these warnings in any case).
// It's therefore not considered to have any tangible impact on the maintainability of the code base.
// For reference, most of the parsing logic is based on: https://tc39.github.io/ecma262/#sec-ecmascript-language-expressions
// eslint-disable-next-line max-lines-per-function
function parse(state, access, minPrecedence, bindingType) {
    if (bindingType === 284 /* CustomCommand */) {
        return new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["CustomExpression"](state.input);
    }
    if (state.index === 0) {
        if (bindingType & 2048 /* Interpolation */) {
            // eslint-disable-next-line @typescript-eslint/no-explicit-any
            return parseInterpolation(state);
        }
        nextToken(state);
        if (state.currentToken & 1048576 /* ExpressionTerminal */) {
            throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].error(100 /* InvalidExpressionStart */, { state });
        }
    }
    state.assignable = 448 /* Binary */ > minPrecedence;
    let result = void 0;
    if (state.currentToken & 32768 /* UnaryOp */) {
        /** parseUnaryExpression
         * https://tc39.github.io/ecma262/#sec-unary-operators
         *
         * UnaryExpression :
         * 1. LeftHandSideExpression
         * 2. void UnaryExpression
         * 3. typeof UnaryExpression
         * 4. + UnaryExpression
         * 5. - UnaryExpression
         * 6. ! UnaryExpression
         *
         * IsValidAssignmentTarget
         * 2,3,4,5,6 = false
         * 1 = see parseLeftHandSideExpression
         *
         * Note: technically we should throw on ++ / -- / +++ / ---, but there's nothing to gain from that
         */
        const op = TokenValues[state.currentToken & 63 /* Type */];
        nextToken(state);
        result = new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["UnaryExpression"](op, parse(state, access, 449 /* LeftHandSide */, bindingType));
        state.assignable = false;
    }
    else {
        /** parsePrimaryExpression
         * https://tc39.github.io/ecma262/#sec-primary-expression
         *
         * PrimaryExpression :
         * 1. this
         * 2. IdentifierName
         * 3. Literal
         * 4. ArrayLiteralExpression
         * 5. ObjectLiteralExpression
         * 6. TemplateLiteral
         * 7. ParenthesizedExpression
         *
         * Literal :
         * NullLiteral
         * BooleanLiteral
         * NumericLiteral
         * StringLiteral
         *
         * ParenthesizedExpression :
         * ( AssignmentExpression )
         *
         * IsValidAssignmentTarget
         * 1,3,4,5,6,7 = false
         * 2 = true
         */
        primary: switch (state.currentToken) {
            case 3077 /* ParentScope */: // $parent
                state.assignable = false;
                do {
                    nextToken(state);
                    access++; // ancestor
                    if (consumeOpt(state, 16392 /* Dot */)) {
                        if (state.currentToken === 16392 /* Dot */) {
                            throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].error(102 /* DoubleDot */, { state });
                        }
                        else if (state.currentToken === 1572864 /* EOF */) {
                            throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].error(105 /* ExpectedIdentifier */, { state });
                        }
                    }
                    else if (state.currentToken & 524288 /* AccessScopeTerminal */) {
                        const ancestor = access & 511 /* Ancestor */;
                        result = ancestor === 0 ? $this : ancestor === 1 ? $parent : new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["AccessThisExpression"](ancestor);
                        access = 512 /* This */;
                        break primary;
                    }
                    else {
                        throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].error(103 /* InvalidMemberExpression */, { state });
                    }
                } while (state.currentToken === 3077 /* ParentScope */);
            // falls through
            case 1024 /* Identifier */: // identifier
                if (bindingType & 512 /* IsIterator */) {
                    result = new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["BindingIdentifier"](state.tokenValue);
                }
                else {
                    result = new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["AccessScopeExpression"](state.tokenValue, access & 511 /* Ancestor */);
                    access = 1024 /* Scope */;
                }
                state.assignable = true;
                nextToken(state);
                break;
            case 3076 /* ThisScope */: // $this
                state.assignable = false;
                nextToken(state);
                result = $this;
                access = 512 /* This */;
                break;
            case 671750 /* OpenParen */: // parenthesized expression
                nextToken(state);
                result = parse(state, 0 /* Reset */, 62 /* Assign */, bindingType);
                consume(state, 1835018 /* CloseParen */);
                access = 0 /* Reset */;
                break;
            case 671756 /* OpenBracket */:
                result = parseArrayLiteralExpression(state, access, bindingType);
                access = 0 /* Reset */;
                break;
            case 131079 /* OpenBrace */:
                result = parseObjectLiteralExpression(state, bindingType);
                access = 0 /* Reset */;
                break;
            case 540713 /* TemplateTail */:
                result = new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["TemplateExpression"]([state.tokenValue]);
                state.assignable = false;
                nextToken(state);
                access = 0 /* Reset */;
                break;
            case 540714 /* TemplateContinuation */:
                result = parseTemplate(state, access, bindingType, result, false);
                access = 0 /* Reset */;
                break;
            case 4096 /* StringLiteral */:
            case 8192 /* NumericLiteral */:
                result = new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["PrimitiveLiteralExpression"](state.tokenValue);
                state.assignable = false;
                nextToken(state);
                access = 0 /* Reset */;
                break;
            case 2050 /* NullKeyword */:
            case 2051 /* UndefinedKeyword */:
            case 2049 /* TrueKeyword */:
            case 2048 /* FalseKeyword */:
                result = TokenValues[state.currentToken & 63 /* Type */];
                state.assignable = false;
                nextToken(state);
                access = 0 /* Reset */;
                break;
            default:
                if (state.index >= state.length) {
                    throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].error(104 /* UnexpectedEndOfExpression */, { state });
                }
                else {
                    throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].error(101 /* UnconsumedToken */, { state });
                }
        }
        if (bindingType & 512 /* IsIterator */) {
            // eslint-disable-next-line @typescript-eslint/no-explicit-any
            return parseForOfStatement(state, result);
        }
        if (449 /* LeftHandSide */ < minPrecedence) {
            // eslint-disable-next-line @typescript-eslint/no-explicit-any
            return result;
        }
        /** parseMemberExpression (Token.Dot, Token.OpenBracket, Token.TemplateContinuation)
         * MemberExpression :
         * 1. PrimaryExpression
         * 2. MemberExpression [ AssignmentExpression ]
         * 3. MemberExpression . IdentifierName
         * 4. MemberExpression TemplateLiteral
         *
         * IsValidAssignmentTarget
         * 1,4 = false
         * 2,3 = true
         *
         *
         * parseCallExpression (Token.OpenParen)
         * CallExpression :
         * 1. MemberExpression Arguments
         * 2. CallExpression Arguments
         * 3. CallExpression [ AssignmentExpression ]
         * 4. CallExpression . IdentifierName
         * 5. CallExpression TemplateLiteral
         *
         * IsValidAssignmentTarget
         * 1,2,5 = false
         * 3,4 = true
         */
        let name = state.tokenValue;
        while ((state.currentToken & 16384 /* LeftHandSide */) > 0) {
            const args = [];
            let strings;
            switch (state.currentToken) {
                case 16392 /* Dot */:
                    state.assignable = true;
                    nextToken(state);
                    if ((state.currentToken & 3072 /* IdentifierName */) === 0) {
                        throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].error(105 /* ExpectedIdentifier */, { state });
                    }
                    name = state.tokenValue;
                    nextToken(state);
                    // Change $This to $Scope, change $Scope to $Member, keep $Member as-is, change $Keyed to $Member, disregard other flags
                    access = ((access & (512 /* This */ | 1024 /* Scope */)) << 1) | (access & 2048 /* Member */) | ((access & 4096 /* Keyed */) >> 1);
                    if (state.currentToken === 671750 /* OpenParen */) {
                        if (access === 0 /* Reset */) { // if the left hand side is a literal, make sure we parse a CallMemberExpression
                            access = 2048 /* Member */;
                        }
                        continue;
                    }
                    if (access & 1024 /* Scope */) {
                        result = new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["AccessScopeExpression"](name, result.ancestor);
                    }
                    else { // if it's not $Scope, it's $Member
                        result = new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["AccessMemberExpression"](result, name);
                    }
                    continue;
                case 671756 /* OpenBracket */:
                    state.assignable = true;
                    nextToken(state);
                    access = 4096 /* Keyed */;
                    result = new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["AccessKeyedExpression"](result, parse(state, 0 /* Reset */, 62 /* Assign */, bindingType));
                    consume(state, 1835021 /* CloseBracket */);
                    break;
                case 671750 /* OpenParen */:
                    state.assignable = false;
                    nextToken(state);
                    while (state.currentToken !== 1835018 /* CloseParen */) {
                        args.push(parse(state, 0 /* Reset */, 62 /* Assign */, bindingType));
                        if (!consumeOpt(state, 1572875 /* Comma */)) {
                            break;
                        }
                    }
                    consume(state, 1835018 /* CloseParen */);
                    if (access & 1024 /* Scope */) {
                        result = new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["CallScopeExpression"](name, args, result.ancestor);
                    }
                    else if (access & 2048 /* Member */) {
                        result = new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["CallMemberExpression"](result, name, args);
                    }
                    else {
                        result = new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["CallFunctionExpression"](result, args);
                    }
                    access = 0;
                    break;
                case 540713 /* TemplateTail */:
                    state.assignable = false;
                    strings = [state.tokenValue];
                    result = new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["TaggedTemplateExpression"](strings, strings, result);
                    nextToken(state);
                    break;
                case 540714 /* TemplateContinuation */:
                    result = parseTemplate(state, access, bindingType, result, true);
                default:
            }
        }
    }
    if (448 /* Binary */ < minPrecedence) {
        // eslint-disable-next-line @typescript-eslint/no-explicit-any
        return result;
    }
    /** parseBinaryExpression
     * https://tc39.github.io/ecma262/#sec-multiplicative-operators
     *
     * MultiplicativeExpression : (local precedence 6)
     * UnaryExpression
     * MultiplicativeExpression * / % UnaryExpression
     *
     * AdditiveExpression : (local precedence 5)
     * MultiplicativeExpression
     * AdditiveExpression + - MultiplicativeExpression
     *
     * RelationalExpression : (local precedence 4)
     * AdditiveExpression
     * RelationalExpression < > <= >= instanceof in AdditiveExpression
     *
     * EqualityExpression : (local precedence 3)
     * RelationalExpression
     * EqualityExpression == != === !== RelationalExpression
     *
     * LogicalANDExpression : (local precedence 2)
     * EqualityExpression
     * LogicalANDExpression && EqualityExpression
     *
     * LogicalORExpression : (local precedence 1)
     * LogicalANDExpression
     * LogicalORExpression || LogicalANDExpression
     */
    while ((state.currentToken & 65536 /* BinaryOp */) > 0) {
        const opToken = state.currentToken;
        if ((opToken & 448 /* Precedence */) <= minPrecedence) {
            break;
        }
        nextToken(state);
        result = new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["BinaryExpression"](TokenValues[opToken & 63 /* Type */], result, parse(state, access, opToken & 448 /* Precedence */, bindingType));
        state.assignable = false;
    }
    if (63 /* Conditional */ < minPrecedence) {
        // eslint-disable-next-line @typescript-eslint/no-explicit-any
        return result;
    }
    /**
     * parseConditionalExpression
     * https://tc39.github.io/ecma262/#prod-ConditionalExpression
     *
     * ConditionalExpression :
     * 1. BinaryExpression
     * 2. BinaryExpression ? AssignmentExpression : AssignmentExpression
     *
     * IsValidAssignmentTarget
     * 1,2 = false
     */
    if (consumeOpt(state, 1572879 /* Question */)) {
        const yes = parse(state, access, 62 /* Assign */, bindingType);
        consume(state, 1572878 /* Colon */);
        result = new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["ConditionalExpression"](result, yes, parse(state, access, 62 /* Assign */, bindingType));
        state.assignable = false;
    }
    if (62 /* Assign */ < minPrecedence) {
        // eslint-disable-next-line @typescript-eslint/no-explicit-any
        return result;
    }
    /** parseAssignmentExpression
     * https://tc39.github.io/ecma262/#prod-AssignmentExpression
     * Note: AssignmentExpression here is equivalent to ES Expression because we don't parse the comma operator
     *
     * AssignmentExpression :
     * 1. ConditionalExpression
     * 2. LeftHandSideExpression = AssignmentExpression
     *
     * IsValidAssignmentTarget
     * 1,2 = false
     */
    if (consumeOpt(state, 1048615 /* Equals */)) {
        if (!state.assignable) {
            throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].error(150 /* NotAssignable */, { state });
        }
        result = new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["AssignExpression"](result, parse(state, access, 62 /* Assign */, bindingType));
    }
    if (61 /* Variadic */ < minPrecedence) {
        // eslint-disable-next-line @typescript-eslint/no-explicit-any
        return result;
    }
    /** parseValueConverter
     */
    while (consumeOpt(state, 1572883 /* Bar */)) {
        if (state.currentToken === 1572864 /* EOF */) {
            throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].error(112);
        }
        const name = state.tokenValue;
        nextToken(state);
        const args = new Array();
        while (consumeOpt(state, 1572878 /* Colon */)) {
            args.push(parse(state, access, 62 /* Assign */, bindingType));
        }
        result = new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["ValueConverterExpression"](result, name, args);
    }
    /** parseBindingBehavior
     */
    while (consumeOpt(state, 1572880 /* Ampersand */)) {
        if (state.currentToken === 1572864 /* EOF */) {
            throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].error(113);
        }
        const name = state.tokenValue;
        nextToken(state);
        const args = new Array();
        while (consumeOpt(state, 1572878 /* Colon */)) {
            args.push(parse(state, access, 62 /* Assign */, bindingType));
        }
        result = new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["BindingBehaviorExpression"](result, name, args);
    }
    if (state.currentToken !== 1572864 /* EOF */) {
        if (bindingType & 2048 /* Interpolation */) {
            // eslint-disable-next-line @typescript-eslint/no-explicit-any
            return result;
        }
        if (state.tokenRaw === 'of') {
            throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].error(151 /* UnexpectedForOf */, { state });
        }
        throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].error(101 /* UnconsumedToken */, { state });
    }
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    return result;
}
/**
 * parseArrayLiteralExpression
 * https://tc39.github.io/ecma262/#prod-ArrayLiteralExpression
 *
 * ArrayLiteralExpression :
 * [ Elision(opt) ]
 * [ ElementList ]
 * [ ElementList, Elision(opt) ]
 *
 * ElementList :
 * Elision(opt) AssignmentExpression
 * ElementList, Elision(opt) AssignmentExpression
 *
 * Elision :
 * ,
 * Elision ,
 */
function parseArrayLiteralExpression(state, access, bindingType) {
    nextToken(state);
    const elements = new Array();
    while (state.currentToken !== 1835021 /* CloseBracket */) {
        if (consumeOpt(state, 1572875 /* Comma */)) {
            elements.push($undefined);
            if (state.currentToken === 1835021 /* CloseBracket */) {
                break;
            }
        }
        else {
            elements.push(parse(state, access, 62 /* Assign */, bindingType & ~512 /* IsIterator */));
            if (consumeOpt(state, 1572875 /* Comma */)) {
                if (state.currentToken === 1835021 /* CloseBracket */) {
                    break;
                }
            }
            else {
                break;
            }
        }
    }
    consume(state, 1835021 /* CloseBracket */);
    if (bindingType & 512 /* IsIterator */) {
        return new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["ArrayBindingPattern"](elements);
    }
    else {
        state.assignable = false;
        return new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["ArrayLiteralExpression"](elements);
    }
}
function parseForOfStatement(state, result) {
    if ((result.$kind & 65536 /* IsForDeclaration */) === 0) {
        throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].error(106 /* InvalidForDeclaration */, { state });
    }
    if (state.currentToken !== 1051179 /* OfKeyword */) {
        throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].error(106 /* InvalidForDeclaration */, { state });
    }
    nextToken(state);
    const declaration = result;
    const statement = parse(state, 0 /* Reset */, 61 /* Variadic */, 0 /* None */);
    return new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["ForOfStatement"](declaration, statement);
}
/**
 * parseObjectLiteralExpression
 * https://tc39.github.io/ecma262/#prod-Literal
 *
 * ObjectLiteralExpression :
 * { }
 * { PropertyDefinitionList }
 *
 * PropertyDefinitionList :
 * PropertyDefinition
 * PropertyDefinitionList, PropertyDefinition
 *
 * PropertyDefinition :
 * IdentifierName
 * PropertyName : AssignmentExpression
 *
 * PropertyName :
 * IdentifierName
 * StringLiteral
 * NumericLiteral
 */
function parseObjectLiteralExpression(state, bindingType) {
    const keys = new Array();
    const values = new Array();
    nextToken(state);
    while (state.currentToken !== 1835017 /* CloseBrace */) {
        keys.push(state.tokenValue);
        // Literal = mandatory colon
        if (state.currentToken & 12288 /* StringOrNumericLiteral */) {
            nextToken(state);
            consume(state, 1572878 /* Colon */);
            values.push(parse(state, 0 /* Reset */, 62 /* Assign */, bindingType & ~512 /* IsIterator */));
        }
        else if (state.currentToken & 3072 /* IdentifierName */) {
            // IdentifierName = optional colon
            const { currentChar, currentToken, index } = state;
            nextToken(state);
            if (consumeOpt(state, 1572878 /* Colon */)) {
                values.push(parse(state, 0 /* Reset */, 62 /* Assign */, bindingType & ~512 /* IsIterator */));
            }
            else {
                // Shorthand
                state.currentChar = currentChar;
                state.currentToken = currentToken;
                state.index = index;
                values.push(parse(state, 0 /* Reset */, 450 /* Primary */, bindingType & ~512 /* IsIterator */));
            }
        }
        else {
            throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].error(107 /* InvalidObjectLiteralPropertyDefinition */, { state });
        }
        if (state.currentToken !== 1835017 /* CloseBrace */) {
            consume(state, 1572875 /* Comma */);
        }
    }
    consume(state, 1835017 /* CloseBrace */);
    if (bindingType & 512 /* IsIterator */) {
        return new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["ObjectBindingPattern"](keys, values);
    }
    else {
        state.assignable = false;
        return new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["ObjectLiteralExpression"](keys, values);
    }
}
function parseInterpolation(state) {
    const parts = [];
    const expressions = [];
    const length = state.length;
    let result = '';
    while (state.index < length) {
        switch (state.currentChar) {
            case 36 /* Dollar */:
                if (state.input.charCodeAt(state.index + 1) === 123 /* OpenBrace */) {
                    parts.push(result);
                    result = '';
                    state.index += 2;
                    state.currentChar = state.input.charCodeAt(state.index);
                    nextToken(state);
                    const expression = parse(state, 0 /* Reset */, 61 /* Variadic */, 2048 /* Interpolation */);
                    expressions.push(expression);
                    continue;
                }
                else {
                    result += '$';
                }
                break;
            case 92 /* Backslash */:
                result += String.fromCharCode(Object(_common__WEBPACK_IMPORTED_MODULE_2__["unescapeCode"])(nextChar(state)));
                break;
            default:
                result += String.fromCharCode(state.currentChar);
        }
        nextChar(state);
    }
    if (expressions.length) {
        parts.push(result);
        return new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["Interpolation"](parts, expressions);
    }
    return null;
}
/**
 * parseTemplateLiteralExpression
 * https://tc39.github.io/ecma262/#prod-Literal
 *
 * TemplateExpression :
 * NoSubstitutionTemplate
 * TemplateHead
 *
 * NoSubstitutionTemplate :
 * ` TemplateCharacters(opt) `
 *
 * TemplateHead :
 * ` TemplateCharacters(opt) ${
 *
 * TemplateSubstitutionTail :
 * TemplateMiddle
 * TemplateTail
 *
 * TemplateMiddle :
 * } TemplateCharacters(opt) ${
 *
 * TemplateTail :
 * } TemplateCharacters(opt) `
 *
 * TemplateCharacters :
 * TemplateCharacter TemplateCharacters(opt)
 *
 * TemplateCharacter :
 * $ [lookahead ≠ {]
 * \ EscapeSequence
 * SourceCharacter (but not one of ` or \ or $)
 */
function parseTemplate(state, access, bindingType, result, tagged) {
    const cooked = [state.tokenValue];
    // TODO: properly implement raw parts / decide whether we want this
    consume(state, 540714 /* TemplateContinuation */);
    const expressions = [parse(state, access, 62 /* Assign */, bindingType)];
    while ((state.currentToken = scanTemplateTail(state)) !== 540713 /* TemplateTail */) {
        cooked.push(state.tokenValue);
        consume(state, 540714 /* TemplateContinuation */);
        expressions.push(parse(state, access, 62 /* Assign */, bindingType));
    }
    cooked.push(state.tokenValue);
    state.assignable = false;
    if (tagged) {
        nextToken(state);
        return new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["TaggedTemplateExpression"](cooked, cooked, result, expressions);
    }
    else {
        nextToken(state);
        return new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["TemplateExpression"](cooked, expressions);
    }
}
function nextToken(state) {
    while (state.index < state.length) {
        state.startIndex = state.index;
        if ((state.currentToken = (CharScanners[state.currentChar](state))) != null) { // a null token means the character must be skipped
            return;
        }
    }
    state.currentToken = 1572864 /* EOF */;
}
function nextChar(state) {
    return state.currentChar = state.input.charCodeAt(++state.index);
}
function scanIdentifier(state) {
    // run to the next non-idPart
    while (IdParts[nextChar(state)])
        ;
    const token = KeywordLookup[state.tokenValue = state.tokenRaw];
    return token === undefined ? 1024 /* Identifier */ : token;
}
function scanNumber(state, isFloat) {
    let char = state.currentChar;
    if (isFloat === false) {
        do {
            char = nextChar(state);
        } while (char <= 57 /* Nine */ && char >= 48 /* Zero */);
        if (char !== 46 /* Dot */) {
            state.tokenValue = parseInt(state.tokenRaw, 10);
            return 8192 /* NumericLiteral */;
        }
        // past this point it's always a float
        char = nextChar(state);
        if (state.index >= state.length) {
            // unless the number ends with a dot - that behaves a little different in native ES expressions
            // but in our AST that behavior has no effect because numbers are always stored in variables
            state.tokenValue = parseInt(state.tokenRaw.slice(0, -1), 10);
            return 8192 /* NumericLiteral */;
        }
    }
    if (char <= 57 /* Nine */ && char >= 48 /* Zero */) {
        do {
            char = nextChar(state);
        } while (char <= 57 /* Nine */ && char >= 48 /* Zero */);
    }
    else {
        state.currentChar = state.input.charCodeAt(--state.index);
    }
    state.tokenValue = parseFloat(state.tokenRaw);
    return 8192 /* NumericLiteral */;
}
function scanString(state) {
    const quote = state.currentChar;
    nextChar(state); // Skip initial quote.
    let unescaped = 0;
    const buffer = new Array();
    let marker = state.index;
    while (state.currentChar !== quote) {
        if (state.currentChar === 92 /* Backslash */) {
            buffer.push(state.input.slice(marker, state.index));
            nextChar(state);
            unescaped = Object(_common__WEBPACK_IMPORTED_MODULE_2__["unescapeCode"])(state.currentChar);
            nextChar(state);
            buffer.push(String.fromCharCode(unescaped));
            marker = state.index;
        }
        else if (state.index >= state.length) {
            throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].error(108 /* UnterminatedQuote */, { state });
        }
        else {
            nextChar(state);
        }
    }
    const last = state.input.slice(marker, state.index);
    nextChar(state); // Skip terminating quote.
    // Compute the unescaped string value.
    buffer.push(last);
    const unescapedStr = buffer.join('');
    state.tokenValue = unescapedStr;
    return 4096 /* StringLiteral */;
}
function scanTemplate(state) {
    let tail = true;
    let result = '';
    while (nextChar(state) !== 96 /* Backtick */) {
        if (state.currentChar === 36 /* Dollar */) {
            if ((state.index + 1) < state.length && state.input.charCodeAt(state.index + 1) === 123 /* OpenBrace */) {
                state.index++;
                tail = false;
                break;
            }
            else {
                result += '$';
            }
        }
        else if (state.currentChar === 92 /* Backslash */) {
            result += String.fromCharCode(Object(_common__WEBPACK_IMPORTED_MODULE_2__["unescapeCode"])(nextChar(state)));
        }
        else {
            if (state.index >= state.length) {
                throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].error(109 /* UnterminatedTemplate */, { state });
            }
            result += String.fromCharCode(state.currentChar);
        }
    }
    nextChar(state);
    state.tokenValue = result;
    if (tail) {
        return 540713 /* TemplateTail */;
    }
    return 540714 /* TemplateContinuation */;
}
function scanTemplateTail(state) {
    if (state.index >= state.length) {
        throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].error(109 /* UnterminatedTemplate */, { state });
    }
    state.index--;
    return scanTemplate(state);
}
function consumeOpt(state, token) {
    if (state.currentToken === token) {
        nextToken(state);
        return true;
    }
    return false;
}
function consume(state, token) {
    if (state.currentToken === token) {
        nextToken(state);
    }
    else {
        throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].error(110 /* MissingExpectedToken */, { state, expected: token });
    }
}
/**
 * Array for mapping tokens to token values. The indices of the values
 * correspond to the token bits 0-38.
 * For this to work properly, the values in the array must be kept in
 * the same order as the token bits.
 * Usage: TokenValues[token & Token.Type]
 */
const TokenValues = [
    $false, $true, $null, $undefined, '$this', '$parent',
    '(', '{', '.', '}', ')', ',', '[', ']', ':', '?', '\'', '"',
    '&', '|', '||', '&&', '==', '!=', '===', '!==', '<', '>',
    '<=', '>=', 'in', 'instanceof', '+', '-', 'typeof', 'void', '*', '%', '/', '=', '!',
    540713 /* TemplateTail */, 540714 /* TemplateContinuation */,
    'of'
];
const KeywordLookup = Object.create(null);
KeywordLookup.true = 2049 /* TrueKeyword */;
KeywordLookup.null = 2050 /* NullKeyword */;
KeywordLookup.false = 2048 /* FalseKeyword */;
KeywordLookup.undefined = 2051 /* UndefinedKeyword */;
KeywordLookup.$this = 3076 /* ThisScope */;
KeywordLookup.$parent = 3077 /* ParentScope */;
KeywordLookup.in = 1640798 /* InKeyword */;
KeywordLookup.instanceof = 1640799 /* InstanceOfKeyword */;
KeywordLookup.typeof = 34850 /* TypeofKeyword */;
KeywordLookup.void = 34851 /* VoidKeyword */;
KeywordLookup.of = 1051179 /* OfKeyword */;
/**
 * Ranges of code points in pairs of 2 (eg 0x41-0x5B, 0x61-0x7B, ...) where the second value is not inclusive (5-7 means 5 and 6)
 * Single values are denoted by the second value being a 0
 *
 * Copied from output generated with "node build/generate-unicode.js"
 *
 * See also: https://en.wikibooks.org/wiki/Unicode/Character_reference/0000-0FFF
 */
const codes = {
    /* [$0-9A-Za_a-z] */
    AsciiIdPart: [0x24, 0, 0x30, 0x3A, 0x41, 0x5B, 0x5F, 0, 0x61, 0x7B],
    IdStart: /* IdentifierStart */ [0x24, 0, 0x41, 0x5B, 0x5F, 0, 0x61, 0x7B, 0xAA, 0, 0xBA, 0, 0xC0, 0xD7, 0xD8, 0xF7, 0xF8, 0x2B9, 0x2E0, 0x2E5, 0x1D00, 0x1D26, 0x1D2C, 0x1D5D, 0x1D62, 0x1D66, 0x1D6B, 0x1D78, 0x1D79, 0x1DBF, 0x1E00, 0x1F00, 0x2071, 0, 0x207F, 0, 0x2090, 0x209D, 0x212A, 0x212C, 0x2132, 0, 0x214E, 0, 0x2160, 0x2189, 0x2C60, 0x2C80, 0xA722, 0xA788, 0xA78B, 0xA7AF, 0xA7B0, 0xA7B8, 0xA7F7, 0xA800, 0xAB30, 0xAB5B, 0xAB5C, 0xAB65, 0xFB00, 0xFB07, 0xFF21, 0xFF3B, 0xFF41, 0xFF5B],
    Digit: /* DecimalNumber */ [0x30, 0x3A],
    Skip: /* Skippable */ [0, 0x21, 0x7F, 0xA1]
};
/**
 * Decompress the ranges into an array of numbers so that the char code
 * can be used as an index to the lookup
 */
function decompress(lookup, $set, compressed, value) {
    const rangeCount = compressed.length;
    for (let i = 0; i < rangeCount; i += 2) {
        const start = compressed[i];
        let end = compressed[i + 1];
        end = end > 0 ? end : start + 1;
        if (lookup) {
            lookup.fill(value, start, end);
        }
        if ($set) {
            for (let ch = start; ch < end; ch++) {
                $set.add(ch);
            }
        }
    }
}
// CharFuncLookup functions
function returnToken(token) {
    return s => {
        nextChar(s);
        return token;
    };
}
const unexpectedCharacter = s => {
    throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].error(111 /* UnexpectedCharacter */, { state: s });
};
unexpectedCharacter.notMapped = true;
// ASCII IdentifierPart lookup
const AsciiIdParts = new Set();
decompress(null, AsciiIdParts, codes.AsciiIdPart, true);
// IdentifierPart lookup
const IdParts = new Uint8Array(0xFFFF);
// eslint-disable-next-line @typescript-eslint/no-explicit-any
decompress(IdParts, null, codes.IdStart, 1);
// eslint-disable-next-line @typescript-eslint/no-explicit-any
decompress(IdParts, null, codes.Digit, 1);
// Character scanning function lookup
const CharScanners = new Array(0xFFFF);
CharScanners.fill(unexpectedCharacter, 0, 0xFFFF);
decompress(CharScanners, null, codes.Skip, s => {
    nextChar(s);
    return null;
});
decompress(CharScanners, null, codes.IdStart, scanIdentifier);
decompress(CharScanners, null, codes.Digit, s => scanNumber(s, false));
CharScanners[34 /* DoubleQuote */] =
    CharScanners[39 /* SingleQuote */] = s => {
        return scanString(s);
    };
CharScanners[96 /* Backtick */] = s => {
    return scanTemplate(s);
};
// !, !=, !==
CharScanners[33 /* Exclamation */] = s => {
    if (nextChar(s) !== 61 /* Equals */) {
        return 32808 /* Exclamation */;
    }
    if (nextChar(s) !== 61 /* Equals */) {
        return 1638679 /* ExclamationEquals */;
    }
    nextChar(s);
    return 1638681 /* ExclamationEqualsEquals */;
};
// =, ==, ===
CharScanners[61 /* Equals */] = s => {
    if (nextChar(s) !== 61 /* Equals */) {
        return 1048615 /* Equals */;
    }
    if (nextChar(s) !== 61 /* Equals */) {
        return 1638678 /* EqualsEquals */;
    }
    nextChar(s);
    return 1638680 /* EqualsEqualsEquals */;
};
// &, &&
CharScanners[38 /* Ampersand */] = s => {
    if (nextChar(s) !== 38 /* Ampersand */) {
        return 1572880 /* Ampersand */;
    }
    nextChar(s);
    return 1638613 /* AmpersandAmpersand */;
};
// |, ||
CharScanners[124 /* Bar */] = s => {
    if (nextChar(s) !== 124 /* Bar */) {
        return 1572883 /* Bar */;
    }
    nextChar(s);
    return 1638548 /* BarBar */;
};
// .
CharScanners[46 /* Dot */] = s => {
    if (nextChar(s) <= 57 /* Nine */ && s.currentChar >= 48 /* Zero */) {
        return scanNumber(s, true);
    }
    return 16392 /* Dot */;
};
// <, <=
CharScanners[60 /* LessThan */] = s => {
    if (nextChar(s) !== 61 /* Equals */) {
        return 1638746 /* LessThan */;
    }
    nextChar(s);
    return 1638748 /* LessThanEquals */;
};
// >, >=
CharScanners[62 /* GreaterThan */] = s => {
    if (nextChar(s) !== 61 /* Equals */) {
        return 1638747 /* GreaterThan */;
    }
    nextChar(s);
    return 1638749 /* GreaterThanEquals */;
};
CharScanners[37 /* Percent */] = returnToken(1638885 /* Percent */);
CharScanners[40 /* OpenParen */] = returnToken(671750 /* OpenParen */);
CharScanners[41 /* CloseParen */] = returnToken(1835018 /* CloseParen */);
CharScanners[42 /* Asterisk */] = returnToken(1638884 /* Asterisk */);
CharScanners[43 /* Plus */] = returnToken(623008 /* Plus */);
CharScanners[44 /* Comma */] = returnToken(1572875 /* Comma */);
CharScanners[45 /* Minus */] = returnToken(623009 /* Minus */);
CharScanners[47 /* Slash */] = returnToken(1638886 /* Slash */);
CharScanners[58 /* Colon */] = returnToken(1572878 /* Colon */);
CharScanners[63 /* Question */] = returnToken(1572879 /* Question */);
CharScanners[91 /* OpenBracket */] = returnToken(671756 /* OpenBracket */);
CharScanners[93 /* CloseBracket */] = returnToken(1835021 /* CloseBracket */);
CharScanners[123 /* OpenBrace */] = returnToken(131079 /* OpenBrace */);
CharScanners[125 /* CloseBrace */] = returnToken(1835017 /* CloseBrace */);
//# sourceMappingURL=expression-parser.js.map

/***/ }),

/***/ "./node_modules/@aurelia/jit/dist/esnext/index.js":
/*!********************************************************!*\
  !*** ./node_modules/@aurelia/jit/dist/esnext/index.js ***!
  \********************************************************/
/*! exports provided: AttrSyntax, IAttributeParser, attributePattern, IAttributePattern, AttributePattern, Interpretation, ISyntaxInterpreter, AtPrefixedTriggerAttributePattern, ColonPrefixedBindAttributePattern, DotSeparatedAttributePattern, RefAttributePattern, bindingCommand, BindingCommand, BindingCommandDefinition, getTarget, CallBindingCommand, DefaultBindingCommand, ForBindingCommand, FromViewBindingCommand, OneTimeBindingCommand, ToViewBindingCommand, TwoWayBindingCommand, IExpressionParserRegistration, DefaultComponents, RefAttributePatternRegistration, DotSeparatedAttributePatternRegistration, DefaultBindingSyntax, AtPrefixedTriggerAttributePatternRegistration, ColonPrefixedBindAttributePatternRegistration, ShortHandBindingSyntax, CallBindingCommandRegistration, DefaultBindingCommandRegistration, ForBindingCommandRegistration, FromViewBindingCommandRegistration, OneTimeBindingCommandRegistration, ToViewBindingCommandRegistration, TwoWayBindingCommandRegistration, DefaultBindingLanguage, JitConfiguration, Access, Precedence, Char, parseExpression, parse, ParserState, ResourceModel, BindableInfo, ElementInfo, AttrInfo, BindingSymbol, CustomAttributeSymbol, CustomElementSymbol, LetElementSymbol, PlainAttributeSymbol, PlainElementSymbol, ReplacePartSymbol, SymbolFlags, TemplateControllerSymbol, TextSymbol */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _ast__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ast */ "./node_modules/@aurelia/jit/dist/esnext/ast.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AttrSyntax", function() { return _ast__WEBPACK_IMPORTED_MODULE_0__["AttrSyntax"]; });

/* harmony import */ var _attribute_parser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./attribute-parser */ "./node_modules/@aurelia/jit/dist/esnext/attribute-parser.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IAttributeParser", function() { return _attribute_parser__WEBPACK_IMPORTED_MODULE_1__["IAttributeParser"]; });

/* harmony import */ var _attribute_pattern__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./attribute-pattern */ "./node_modules/@aurelia/jit/dist/esnext/attribute-pattern.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "attributePattern", function() { return _attribute_pattern__WEBPACK_IMPORTED_MODULE_2__["attributePattern"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IAttributePattern", function() { return _attribute_pattern__WEBPACK_IMPORTED_MODULE_2__["IAttributePattern"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AttributePattern", function() { return _attribute_pattern__WEBPACK_IMPORTED_MODULE_2__["AttributePattern"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Interpretation", function() { return _attribute_pattern__WEBPACK_IMPORTED_MODULE_2__["Interpretation"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ISyntaxInterpreter", function() { return _attribute_pattern__WEBPACK_IMPORTED_MODULE_2__["ISyntaxInterpreter"]; });

/* harmony import */ var _attribute_patterns__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./attribute-patterns */ "./node_modules/@aurelia/jit/dist/esnext/attribute-patterns.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AtPrefixedTriggerAttributePattern", function() { return _attribute_patterns__WEBPACK_IMPORTED_MODULE_3__["AtPrefixedTriggerAttributePattern"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ColonPrefixedBindAttributePattern", function() { return _attribute_patterns__WEBPACK_IMPORTED_MODULE_3__["ColonPrefixedBindAttributePattern"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DotSeparatedAttributePattern", function() { return _attribute_patterns__WEBPACK_IMPORTED_MODULE_3__["DotSeparatedAttributePattern"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RefAttributePattern", function() { return _attribute_patterns__WEBPACK_IMPORTED_MODULE_3__["RefAttributePattern"]; });

/* harmony import */ var _binding_command__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./binding-command */ "./node_modules/@aurelia/jit/dist/esnext/binding-command.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "bindingCommand", function() { return _binding_command__WEBPACK_IMPORTED_MODULE_4__["bindingCommand"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BindingCommand", function() { return _binding_command__WEBPACK_IMPORTED_MODULE_4__["BindingCommand"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BindingCommandDefinition", function() { return _binding_command__WEBPACK_IMPORTED_MODULE_4__["BindingCommandDefinition"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getTarget", function() { return _binding_command__WEBPACK_IMPORTED_MODULE_4__["getTarget"]; });

/* harmony import */ var _binding_commands__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./binding-commands */ "./node_modules/@aurelia/jit/dist/esnext/binding-commands.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CallBindingCommand", function() { return _binding_commands__WEBPACK_IMPORTED_MODULE_5__["CallBindingCommand"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DefaultBindingCommand", function() { return _binding_commands__WEBPACK_IMPORTED_MODULE_5__["DefaultBindingCommand"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ForBindingCommand", function() { return _binding_commands__WEBPACK_IMPORTED_MODULE_5__["ForBindingCommand"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "FromViewBindingCommand", function() { return _binding_commands__WEBPACK_IMPORTED_MODULE_5__["FromViewBindingCommand"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "OneTimeBindingCommand", function() { return _binding_commands__WEBPACK_IMPORTED_MODULE_5__["OneTimeBindingCommand"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ToViewBindingCommand", function() { return _binding_commands__WEBPACK_IMPORTED_MODULE_5__["ToViewBindingCommand"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TwoWayBindingCommand", function() { return _binding_commands__WEBPACK_IMPORTED_MODULE_5__["TwoWayBindingCommand"]; });

/* harmony import */ var _configuration__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./configuration */ "./node_modules/@aurelia/jit/dist/esnext/configuration.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IExpressionParserRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_6__["IExpressionParserRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DefaultComponents", function() { return _configuration__WEBPACK_IMPORTED_MODULE_6__["DefaultComponents"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RefAttributePatternRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_6__["RefAttributePatternRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DotSeparatedAttributePatternRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_6__["DotSeparatedAttributePatternRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DefaultBindingSyntax", function() { return _configuration__WEBPACK_IMPORTED_MODULE_6__["DefaultBindingSyntax"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AtPrefixedTriggerAttributePatternRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_6__["AtPrefixedTriggerAttributePatternRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ColonPrefixedBindAttributePatternRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_6__["ColonPrefixedBindAttributePatternRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ShortHandBindingSyntax", function() { return _configuration__WEBPACK_IMPORTED_MODULE_6__["ShortHandBindingSyntax"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CallBindingCommandRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_6__["CallBindingCommandRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DefaultBindingCommandRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_6__["DefaultBindingCommandRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ForBindingCommandRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_6__["ForBindingCommandRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "FromViewBindingCommandRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_6__["FromViewBindingCommandRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "OneTimeBindingCommandRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_6__["OneTimeBindingCommandRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ToViewBindingCommandRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_6__["ToViewBindingCommandRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TwoWayBindingCommandRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_6__["TwoWayBindingCommandRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DefaultBindingLanguage", function() { return _configuration__WEBPACK_IMPORTED_MODULE_6__["DefaultBindingLanguage"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "JitConfiguration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_6__["JitConfiguration"]; });

/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./common */ "./node_modules/@aurelia/jit/dist/esnext/common.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Access", function() { return _common__WEBPACK_IMPORTED_MODULE_7__["Access"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Precedence", function() { return _common__WEBPACK_IMPORTED_MODULE_7__["Precedence"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Char", function() { return _common__WEBPACK_IMPORTED_MODULE_7__["Char"]; });

/* harmony import */ var _expression_parser__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./expression-parser */ "./node_modules/@aurelia/jit/dist/esnext/expression-parser.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "parseExpression", function() { return _expression_parser__WEBPACK_IMPORTED_MODULE_8__["parseExpression"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "parse", function() { return _expression_parser__WEBPACK_IMPORTED_MODULE_8__["parse"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ParserState", function() { return _expression_parser__WEBPACK_IMPORTED_MODULE_8__["ParserState"]; });

/* harmony import */ var _resource_model__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./resource-model */ "./node_modules/@aurelia/jit/dist/esnext/resource-model.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ResourceModel", function() { return _resource_model__WEBPACK_IMPORTED_MODULE_9__["ResourceModel"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BindableInfo", function() { return _resource_model__WEBPACK_IMPORTED_MODULE_9__["BindableInfo"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ElementInfo", function() { return _resource_model__WEBPACK_IMPORTED_MODULE_9__["ElementInfo"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AttrInfo", function() { return _resource_model__WEBPACK_IMPORTED_MODULE_9__["AttrInfo"]; });

/* harmony import */ var _semantic_model__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./semantic-model */ "./node_modules/@aurelia/jit/dist/esnext/semantic-model.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BindingSymbol", function() { return _semantic_model__WEBPACK_IMPORTED_MODULE_10__["BindingSymbol"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CustomAttributeSymbol", function() { return _semantic_model__WEBPACK_IMPORTED_MODULE_10__["CustomAttributeSymbol"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CustomElementSymbol", function() { return _semantic_model__WEBPACK_IMPORTED_MODULE_10__["CustomElementSymbol"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LetElementSymbol", function() { return _semantic_model__WEBPACK_IMPORTED_MODULE_10__["LetElementSymbol"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PlainAttributeSymbol", function() { return _semantic_model__WEBPACK_IMPORTED_MODULE_10__["PlainAttributeSymbol"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PlainElementSymbol", function() { return _semantic_model__WEBPACK_IMPORTED_MODULE_10__["PlainElementSymbol"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ReplacePartSymbol", function() { return _semantic_model__WEBPACK_IMPORTED_MODULE_10__["ReplacePartSymbol"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SymbolFlags", function() { return _semantic_model__WEBPACK_IMPORTED_MODULE_10__["SymbolFlags"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TemplateControllerSymbol", function() { return _semantic_model__WEBPACK_IMPORTED_MODULE_10__["TemplateControllerSymbol"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TextSymbol", function() { return _semantic_model__WEBPACK_IMPORTED_MODULE_10__["TextSymbol"]; });












//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./node_modules/@aurelia/jit/dist/esnext/resource-model.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@aurelia/jit/dist/esnext/resource-model.js ***!
  \*****************************************************************/
/*! exports provided: BindableInfo, ElementInfo, AttrInfo, ResourceModel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BindableInfo", function() { return BindableInfo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ElementInfo", function() { return ElementInfo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AttrInfo", function() { return AttrInfo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ResourceModel", function() { return ResourceModel; });
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/runtime */ "./node_modules/@aurelia/runtime/dist/esnext/index.js");
/* harmony import */ var _binding_command__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./binding-command */ "./node_modules/@aurelia/jit/dist/esnext/binding-command.js");



/**
 * A pre-processed piece of information about a defined bindable property on a custom
 * element or attribute, optimized for consumption by the template compiler.
 */
class BindableInfo {
    constructor(
    /**
     * The pre-processed *property* (not attribute) name of the bindable, which is
     * (in order of priority):
     *
     * 1. The `property` from the description (if defined)
     * 2. The name of the property of the bindable itself
     */
    propName, 
    /**
     * The pre-processed (default) bindingMode of the bindable, which is (in order of priority):
     *
     * 1. The `mode` from the bindable (if defined and not bindingMode.default)
     * 2. The `defaultBindingMode` (if it's an attribute, defined, and not bindingMode.default)
     * 3. `bindingMode.toView`
     */
    mode) {
        this.propName = propName;
        this.mode = mode;
    }
}
/**
 * Pre-processed information about a custom element resource, optimized
 * for consumption by the template compiler.
 */
class ElementInfo {
    constructor(name, containerless) {
        this.name = name;
        this.containerless = containerless;
        /**
         * A lookup of the bindables of this element, indexed by the (pre-processed)
         * attribute names as they would be found in parsed markup.
         */
        this.bindables = Object.create(null);
    }
    static from(def) {
        const info = new ElementInfo(def.name, def.containerless);
        const bindables = def.bindables;
        const defaultBindingMode = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["BindingMode"].toView;
        let bindable;
        let prop;
        let attr;
        let mode;
        for (prop in bindables) {
            bindable = bindables[prop];
            // explicitly provided property name has priority over the implicit property name
            if (bindable.property !== void 0) {
                prop = bindable.property;
            }
            // explicitly provided attribute name has priority over the derived implicit attribute name
            if (bindable.attribute !== void 0) {
                attr = bindable.attribute;
            }
            else {
                // derive the attribute name from the resolved property name
                attr = Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["kebabCase"])(prop);
            }
            if (bindable.mode !== void 0 && bindable.mode !== _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["BindingMode"].default) {
                mode = bindable.mode;
            }
            else {
                mode = defaultBindingMode;
            }
            info.bindables[attr] = new BindableInfo(prop, mode);
        }
        return info;
    }
}
/**
 * Pre-processed information about a custom attribute resource, optimized
 * for consumption by the template compiler.
 */
class AttrInfo {
    constructor(name, isTemplateController, noMultiBindings) {
        this.name = name;
        this.isTemplateController = isTemplateController;
        this.noMultiBindings = noMultiBindings;
        /**
         * A lookup of the bindables of this attribute, indexed by the (pre-processed)
         * bindable names as they would be found in the attribute value.
         *
         * Only applicable to multi attribute bindings (semicolon-separated).
         */
        this.bindables = Object.create(null);
        /**
         * The single or first bindable of this attribute, or a default 'value'
         * bindable if no bindables were defined on the attribute.
         *
         * Only applicable to single attribute bindings (where the attribute value
         * contains no semicolons)
         */
        this.bindable = null;
    }
    static from(def) {
        const info = new AttrInfo(def.name, def.isTemplateController, def.noMultiBindings);
        const bindables = def.bindables;
        const defaultBindingMode = def.defaultBindingMode !== void 0 && def.defaultBindingMode !== _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["BindingMode"].default
            ? def.defaultBindingMode
            : _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["BindingMode"].toView;
        let bindable;
        let prop;
        let mode;
        let hasPrimary = false;
        let isPrimary = false;
        let bindableInfo;
        for (prop in bindables) {
            bindable = bindables[prop];
            // explicitly provided property name has priority over the implicit property name
            if (bindable.property !== void 0) {
                prop = bindable.property;
            }
            if (bindable.mode !== void 0 && bindable.mode !== _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["BindingMode"].default) {
                mode = bindable.mode;
            }
            else {
                mode = defaultBindingMode;
            }
            isPrimary = bindable.primary === true;
            bindableInfo = info.bindables[prop] = new BindableInfo(prop, mode);
            if (isPrimary) {
                if (hasPrimary) {
                    throw new Error('primary already exists');
                }
                hasPrimary = true;
                info.bindable = bindableInfo;
            }
            // set to first bindable by convention
            if (info.bindable === null) {
                info.bindable = bindableInfo;
            }
        }
        // if no bindables are present, default to "value"
        if (info.bindable === null) {
            info.bindable = new BindableInfo('value', defaultBindingMode);
        }
        return info;
    }
}
const contextLookup = new WeakMap();
/**
 * A pre-processed piece of information about declared custom elements, attributes and
 * binding commands, optimized for consumption by the template compiler.
 */
class ResourceModel {
    constructor(container) {
        this.elementLookup = Object.create(null);
        this.attributeLookup = Object.create(null);
        this.commandLookup = Object.create(null);
        // Note: don't do this sort of thing elsewhere, this is purely for perf reasons
        this.container = container;
        const rootContainer = container.root;
        this.resourceResolvers = container.resourceResolvers;
        this.rootResourceResolvers = rootContainer.resourceResolvers;
    }
    static getOrCreate(context) {
        let model = contextLookup.get(context);
        if (model === void 0) {
            contextLookup.set(context, model = new ResourceModel(context));
        }
        return model;
    }
    /**
     * Retrieve information about a custom element resource.
     *
     * @param element - The original DOM element.
     *
     * @returns The resource information if the element exists, or `null` if it does not exist.
     */
    getElementInfo(name) {
        let result = this.elementLookup[name];
        if (result === void 0) {
            const def = this.find(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["CustomElement"], name);
            this.elementLookup[name] = result = def === null ? null : ElementInfo.from(def);
        }
        return result;
    }
    /**
     * Retrieve information about a custom attribute resource.
     *
     * @param syntax - The parsed `AttrSyntax`
     *
     * @returns The resource information if the attribute exists, or `null` if it does not exist.
     */
    getAttributeInfo(syntax) {
        let result = this.attributeLookup[syntax.target];
        if (result === void 0) {
            const def = this.find(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["CustomAttribute"], syntax.target);
            this.attributeLookup[syntax.target] = result = def === null ? null : AttrInfo.from(def);
        }
        return result;
    }
    /**
     * Retrieve a binding command resource.
     *
     * @param name - The parsed `AttrSyntax`
     *
     * @returns An instance of the command if it exists, or `null` if it does not exist.
     */
    getBindingCommand(syntax, optional) {
        const name = syntax.command;
        if (name === null) {
            return null;
        }
        let result = this.commandLookup[name];
        if (result === void 0) {
            result = this.create(_binding_command__WEBPACK_IMPORTED_MODULE_2__["BindingCommand"], name);
            if (result === null) {
                if (optional) {
                    return null;
                }
                throw new Error(`Unknown binding command: ${name}`);
            }
            this.commandLookup[name] = result;
        }
        return result;
    }
    find(kind, name) {
        const key = kind.keyFrom(name);
        let resolver = this.resourceResolvers[key];
        if (resolver === void 0) {
            resolver = this.rootResourceResolvers[key];
            if (resolver === void 0) {
                return null;
            }
        }
        if (resolver === null) {
            return null;
        }
        if (typeof resolver.getFactory === 'function') {
            const factory = resolver.getFactory(this.container);
            if (factory === null || factory === void 0) {
                return null;
            }
            const definition = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Metadata"].getOwn(kind.name, factory.Type);
            if (definition === void 0) {
                // TODO: we may want to log a warning here, or even throw. This would happen if a dependency is registered with a resource-like key
                // but does not actually have a definition associated via the type's metadata. That *should* generally not happen.
                return null;
            }
            return definition;
        }
        return null;
    }
    create(kind, name) {
        const key = kind.keyFrom(name);
        let resolver = this.resourceResolvers[key];
        if (resolver === void 0) {
            resolver = this.rootResourceResolvers[key];
            if (resolver === void 0) {
                return null;
            }
        }
        if (resolver === null) {
            return null;
        }
        const instance = resolver.resolve(this.container, this.container);
        if (instance === void 0) {
            return null;
        }
        return instance;
    }
}
//# sourceMappingURL=resource-model.js.map

/***/ }),

/***/ "./node_modules/@aurelia/jit/dist/esnext/semantic-model.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@aurelia/jit/dist/esnext/semantic-model.js ***!
  \*****************************************************************/
/*! exports provided: SymbolFlags, TemplateControllerSymbol, ReplacePartSymbol, CustomAttributeSymbol, PlainAttributeSymbol, BindingSymbol, CustomElementSymbol, LetElementSymbol, PlainElementSymbol, TextSymbol */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SymbolFlags", function() { return SymbolFlags; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TemplateControllerSymbol", function() { return TemplateControllerSymbol; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ReplacePartSymbol", function() { return ReplacePartSymbol; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CustomAttributeSymbol", function() { return CustomAttributeSymbol; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PlainAttributeSymbol", function() { return PlainAttributeSymbol; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BindingSymbol", function() { return BindingSymbol; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CustomElementSymbol", function() { return CustomElementSymbol; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LetElementSymbol", function() { return LetElementSymbol; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PlainElementSymbol", function() { return PlainElementSymbol; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TextSymbol", function() { return TextSymbol; });
var SymbolFlags;
(function (SymbolFlags) {
    SymbolFlags[SymbolFlags["type"] = 511] = "type";
    SymbolFlags[SymbolFlags["isTemplateController"] = 1] = "isTemplateController";
    SymbolFlags[SymbolFlags["isReplacePart"] = 2] = "isReplacePart";
    SymbolFlags[SymbolFlags["isCustomAttribute"] = 4] = "isCustomAttribute";
    SymbolFlags[SymbolFlags["isPlainAttribute"] = 8] = "isPlainAttribute";
    SymbolFlags[SymbolFlags["isCustomElement"] = 16] = "isCustomElement";
    SymbolFlags[SymbolFlags["isLetElement"] = 32] = "isLetElement";
    SymbolFlags[SymbolFlags["isPlainElement"] = 64] = "isPlainElement";
    SymbolFlags[SymbolFlags["isText"] = 128] = "isText";
    SymbolFlags[SymbolFlags["isBinding"] = 256] = "isBinding";
    SymbolFlags[SymbolFlags["hasMarker"] = 512] = "hasMarker";
    SymbolFlags[SymbolFlags["hasTemplate"] = 1024] = "hasTemplate";
    SymbolFlags[SymbolFlags["hasAttributes"] = 2048] = "hasAttributes";
    SymbolFlags[SymbolFlags["hasBindings"] = 4096] = "hasBindings";
    SymbolFlags[SymbolFlags["hasChildNodes"] = 8192] = "hasChildNodes";
    SymbolFlags[SymbolFlags["hasParts"] = 16384] = "hasParts";
})(SymbolFlags || (SymbolFlags = {}));
function createMarker(dom) {
    const marker = dom.createElement('au-m');
    dom.makeTarget(marker);
    return marker;
}
/**
 * A html attribute that is associated with a registered resource, specifically a template controller.
 */
class TemplateControllerSymbol {
    constructor(dom, syntax, info, partName, res = info.name) {
        this.syntax = syntax;
        this.info = info;
        this.res = res;
        this.flags = 1 /* isTemplateController */ | 512 /* hasMarker */;
        this.physicalNode = null;
        this.template = null;
        this.templateController = null;
        this._bindings = null;
        this._parts = null;
        this.partName = info.name === 'replaceable' ? partName : null;
        this.marker = createMarker(dom);
    }
    get bindings() {
        if (this._bindings === null) {
            this._bindings = [];
            this.flags |= 4096 /* hasBindings */;
        }
        return this._bindings;
    }
    get parts() {
        if (this._parts === null) {
            this._parts = [];
            this.flags |= 16384 /* hasParts */;
        }
        return this._parts;
    }
}
/**
 * Wrapper for an element (with all of its attributes, regardless of the order in which they are declared)
 * that has a replace attribute on it.
 *
 * This element will be lifted from the DOM just like a template controller.
 */
class ReplacePartSymbol {
    constructor(name, physicalNode = null, parent = null, template = null) {
        this.name = name;
        this.physicalNode = physicalNode;
        this.parent = parent;
        this.template = template;
        this.flags = 2 /* isReplacePart */;
    }
}
/**
 * A html attribute that is associated with a registered resource, but not a template controller.
 */
class CustomAttributeSymbol {
    constructor(syntax, info, res = info.name) {
        this.syntax = syntax;
        this.info = info;
        this.res = res;
        this.flags = 4 /* isCustomAttribute */;
        this._bindings = null;
    }
    get bindings() {
        if (this._bindings === null) {
            this._bindings = [];
            this.flags |= 4096 /* hasBindings */;
        }
        return this._bindings;
    }
}
/**
 * An attribute, with either a binding command or an interpolation, whose target is the html
 * attribute of the element.
 *
 * This will never target a bindable property of a custom attribute or element;
 */
class PlainAttributeSymbol {
    constructor(syntax, command, expression) {
        this.syntax = syntax;
        this.command = command;
        this.expression = expression;
        this.flags = 8 /* isPlainAttribute */;
    }
}
/**
 * Either an attribute on an custom element that maps to a declared bindable property of that element,
 * a single-value bound custom attribute, or one of several bindables that were extracted from the attribute
 * value of a custom attribute with multiple bindings usage.
 *
 * This will always target a bindable property of a custom attribute or element;
 */
class BindingSymbol {
    constructor(command, bindable, expression, rawValue, target) {
        this.command = command;
        this.bindable = bindable;
        this.expression = expression;
        this.rawValue = rawValue;
        this.target = target;
        this.flags = 256 /* isBinding */;
    }
}
/**
 * A html element that is associated with a registered resource either via its (lowerCase) `nodeName`
 * or the value of its `as-element` attribute.
 */
class CustomElementSymbol {
    constructor(dom, physicalNode, info, res = info.name, bindables = info.bindables) {
        this.physicalNode = physicalNode;
        this.info = info;
        this.res = res;
        this.bindables = bindables;
        this.flags = 16 /* isCustomElement */;
        this.isTarget = true;
        this.templateController = null;
        this._customAttributes = null;
        this._plainAttributes = null;
        this._bindings = null;
        this._childNodes = null;
        this._parts = null;
        if (info.containerless) {
            this.isContainerless = true;
            this.marker = createMarker(dom);
            this.flags |= 512 /* hasMarker */;
        }
        else {
            this.isContainerless = false;
            this.marker = null;
        }
    }
    get customAttributes() {
        if (this._customAttributes === null) {
            this._customAttributes = [];
            this.flags |= 2048 /* hasAttributes */;
        }
        return this._customAttributes;
    }
    get plainAttributes() {
        if (this._plainAttributes === null) {
            this._plainAttributes = [];
            this.flags |= 2048 /* hasAttributes */;
        }
        return this._plainAttributes;
    }
    get bindings() {
        if (this._bindings === null) {
            this._bindings = [];
            this.flags |= 4096 /* hasBindings */;
        }
        return this._bindings;
    }
    get childNodes() {
        if (this._childNodes === null) {
            this._childNodes = [];
            this.flags |= 8192 /* hasChildNodes */;
        }
        return this._childNodes;
    }
    get parts() {
        if (this._parts === null) {
            this._parts = [];
            this.flags |= 16384 /* hasParts */;
        }
        return this._parts;
    }
}
class LetElementSymbol {
    constructor(dom, physicalNode, marker = createMarker(dom)) {
        this.physicalNode = physicalNode;
        this.marker = marker;
        this.flags = 32 /* isLetElement */ | 512 /* hasMarker */;
        this.toBindingContext = false;
        this._bindings = null;
    }
    get bindings() {
        if (this._bindings === null) {
            this._bindings = [];
            this.flags |= 4096 /* hasBindings */;
        }
        return this._bindings;
    }
}
/**
 * A normal html element that may or may not have attribute behaviors and/or child node behaviors.
 *
 * It is possible for a PlainElementSymbol to not yield any instructions during compilation.
 */
class PlainElementSymbol {
    constructor(dom, physicalNode) {
        this.physicalNode = physicalNode;
        this.flags = 64 /* isPlainElement */;
        this.isTarget = false;
        this.templateController = null;
        this.hasSlots = false;
        this._customAttributes = null;
        this._plainAttributes = null;
        this._childNodes = null;
    }
    get customAttributes() {
        if (this._customAttributes === null) {
            this._customAttributes = [];
            this.flags |= 2048 /* hasAttributes */;
        }
        return this._customAttributes;
    }
    get plainAttributes() {
        if (this._plainAttributes === null) {
            this._plainAttributes = [];
            this.flags |= 2048 /* hasAttributes */;
        }
        return this._plainAttributes;
    }
    get childNodes() {
        if (this._childNodes === null) {
            this._childNodes = [];
            this.flags |= 8192 /* hasChildNodes */;
        }
        return this._childNodes;
    }
}
/**
 * A standalone text node that has an interpolation.
 */
class TextSymbol {
    constructor(dom, physicalNode, interpolation, marker = createMarker(dom)) {
        this.physicalNode = physicalNode;
        this.interpolation = interpolation;
        this.marker = marker;
        this.flags = 128 /* isText */ | 512 /* hasMarker */;
    }
}
//# sourceMappingURL=semantic-model.js.map

/***/ }),

/***/ "./node_modules/@aurelia/kernel/dist/esnext/di.js":
/*!********************************************************!*\
  !*** ./node_modules/@aurelia/kernel/dist/esnext/di.js ***!
  \********************************************************/
/*! exports provided: ResolverBuilder, DI, IContainer, IServiceLocator, inject, transient, singleton, all, lazy, optional, newInstanceForScope, newInstanceOf, ResolverStrategy, Resolver, Factory, Container, ParameterizedRegistry, Registration, InstanceProvider, validateKey */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ResolverBuilder", function() { return ResolverBuilder; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DI", function() { return DI; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IContainer", function() { return IContainer; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IServiceLocator", function() { return IServiceLocator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "inject", function() { return inject; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "transient", function() { return transient; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "singleton", function() { return singleton; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "all", function() { return all; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "lazy", function() { return lazy; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "optional", function() { return optional; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "newInstanceForScope", function() { return newInstanceForScope; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "newInstanceOf", function() { return newInstanceOf; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ResolverStrategy", function() { return ResolverStrategy; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Resolver", function() { return Resolver; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Factory", function() { return Factory; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Container", function() { return Container; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ParameterizedRegistry", function() { return ParameterizedRegistry; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Registration", function() { return Registration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "InstanceProvider", function() { return InstanceProvider; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "validateKey", function() { return validateKey; });
/* harmony import */ var _aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/metadata */ "./node_modules/@aurelia/metadata/dist/esnext/index.js");
/* harmony import */ var _platform__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./platform */ "./node_modules/@aurelia/kernel/dist/esnext/platform.js");
/* harmony import */ var _reporter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./reporter */ "./node_modules/@aurelia/kernel/dist/esnext/reporter.js");
/* harmony import */ var _resource__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./resource */ "./node_modules/@aurelia/kernel/dist/esnext/resource.js");
/* harmony import */ var _functions__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./functions */ "./node_modules/@aurelia/kernel/dist/esnext/functions.js");
/* eslint-disable @typescript-eslint/no-use-before-define */
/// <reference types="reflect-metadata" />





class ResolverBuilder {
    constructor(container, key) {
        this.container = container;
        this.key = key;
    }
    instance(value) {
        return this.registerResolver(0 /* instance */, value);
    }
    singleton(value) {
        return this.registerResolver(1 /* singleton */, value);
    }
    transient(value) {
        return this.registerResolver(2 /* transient */, value);
    }
    callback(value) {
        return this.registerResolver(3 /* callback */, value);
    }
    cachedCallback(value) {
        return this.registerResolver(3 /* callback */, cacheCallbackResult(value));
    }
    aliasTo(destinationKey) {
        return this.registerResolver(5 /* alias */, destinationKey);
    }
    registerResolver(strategy, state) {
        const { container, key } = this;
        this.container = this.key = (void 0);
        return container.registerResolver(key, new Resolver(key, strategy, state));
    }
}
function cloneArrayWithPossibleProps(source) {
    const clone = source.slice();
    const keys = Object.keys(source);
    const len = keys.length;
    let key;
    for (let i = 0; i < len; ++i) {
        key = keys[i];
        if (!Object(_functions__WEBPACK_IMPORTED_MODULE_4__["isArrayIndex"])(key)) {
            clone[key] = source[key];
        }
    }
    return clone;
}
const DI = {
    createContainer(...params) {
        if (params.length === 0) {
            return new Container(null);
        }
        else {
            return new Container(null).register(...params);
        }
    },
    getDesignParamtypes(Type) {
        return _aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__["Metadata"].getOwn('design:paramtypes', Type);
    },
    getAnnotationParamtypes(Type) {
        const key = _resource__WEBPACK_IMPORTED_MODULE_3__["Protocol"].annotation.keyFor('di:paramtypes');
        return _aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__["Metadata"].getOwn(key, Type);
    },
    getOrCreateAnnotationParamTypes(Type) {
        const key = _resource__WEBPACK_IMPORTED_MODULE_3__["Protocol"].annotation.keyFor('di:paramtypes');
        let annotationParamtypes = _aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__["Metadata"].getOwn(key, Type);
        if (annotationParamtypes === void 0) {
            _aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__["Metadata"].define(key, annotationParamtypes = [], Type);
            _resource__WEBPACK_IMPORTED_MODULE_3__["Protocol"].annotation.appendTo(Type, key);
        }
        return annotationParamtypes;
    },
    getDependencies(Type) {
        // Note: Every detail of this getDependencies method is pretty deliberate at the moment, and probably not yet 100% tested from every possible angle,
        // so be careful with making changes here as it can have a huge impact on complex end user apps.
        // Preferably, only make changes to the dependency resolution process via a RFC.
        const key = _resource__WEBPACK_IMPORTED_MODULE_3__["Protocol"].annotation.keyFor('di:dependencies');
        let dependencies = _aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__["Metadata"].getOwn(key, Type);
        if (dependencies === void 0) {
            // Type.length is the number of constructor parameters. If this is 0, it could mean the class has an empty constructor
            // but it could also mean the class has no constructor at all (in which case it inherits the constructor from the prototype).
            // Non-zero constructor length + no paramtypes means emitDecoratorMetadata is off, or the class has no decorator.
            // We're not doing anything with the above right now, but it's good to keep in mind for any future issues.
            const inject = Type.inject;
            if (inject === void 0) {
                // design:paramtypes is set by tsc when emitDecoratorMetadata is enabled.
                const designParamtypes = DI.getDesignParamtypes(Type);
                // au:annotation:di:paramtypes is set by the parameter decorator from DI.createInterface or by @inject
                const annotationParamtypes = DI.getAnnotationParamtypes(Type);
                if (designParamtypes === void 0) {
                    if (annotationParamtypes === void 0) {
                        // Only go up the prototype if neither static inject nor any of the paramtypes is defined, as
                        // there is no sound way to merge a type's deps with its prototype's deps
                        const Proto = Object.getPrototypeOf(Type);
                        if (typeof Proto === 'function' && Proto !== Function.prototype) {
                            dependencies = cloneArrayWithPossibleProps(DI.getDependencies(Proto));
                        }
                        else {
                            dependencies = [];
                        }
                    }
                    else {
                        // No design:paramtypes so just use the au:annotation:di:paramtypes
                        dependencies = cloneArrayWithPossibleProps(annotationParamtypes);
                    }
                }
                else if (annotationParamtypes === void 0) {
                    // No au:annotation:di:paramtypes so just use the design:paramtypes
                    dependencies = cloneArrayWithPossibleProps(designParamtypes);
                }
                else {
                    // We've got both, so merge them (in case of conflict on same index, au:annotation:di:paramtypes take precedence)
                    dependencies = cloneArrayWithPossibleProps(designParamtypes);
                    let len = annotationParamtypes.length;
                    let auAnnotationParamtype;
                    for (let i = 0; i < len; ++i) {
                        auAnnotationParamtype = annotationParamtypes[i];
                        if (auAnnotationParamtype !== void 0) {
                            dependencies[i] = auAnnotationParamtype;
                        }
                    }
                    const keys = Object.keys(annotationParamtypes);
                    len = keys.length;
                    let key;
                    for (let i = 0; i < len; ++i) {
                        key = keys[i];
                        if (!Object(_functions__WEBPACK_IMPORTED_MODULE_4__["isArrayIndex"])(key)) {
                            dependencies[key] = annotationParamtypes[key];
                        }
                    }
                }
            }
            else {
                // Ignore paramtypes if we have static inject
                dependencies = cloneArrayWithPossibleProps(inject);
            }
            _aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__["Metadata"].define(key, dependencies, Type);
            _resource__WEBPACK_IMPORTED_MODULE_3__["Protocol"].annotation.appendTo(Type, key);
        }
        return dependencies;
    },
    /**
     * creates a decorator that also matches an interface and can be used as a {@linkcode Key}.
     * ```
     * const ILogger = DI.createInterface<Logger>('Logger').noDefault();
     * container.register(Registration.singleton(ILogger, getSomeLogger()));
     * const log = container.get(ILogger);
     * log.info('hello world');
     * class Foo {
     *   constructor( @ILogger log: ILogger ) {
     *     log.info('hello world');
     *   }
     * }
     * ```
     * you can also build default registrations into your interface.
     * ```
     * export const ILogger = DI.createInterface<Logger>('Logger')
     *        .withDefault( builder => builder.cachedCallback(LoggerDefault));
     * const log = container.get(ILogger);
     * log.info('hello world');
     * class Foo {
     *   constructor( @ILogger log: ILogger ) {
     *     log.info('hello world');
     *   }
     * }
     * ```
     *
     * @param friendlyName
     */
    createInterface(friendlyName) {
        const Interface = function (target, property, index) {
            if (target == null) {
                throw _reporter__WEBPACK_IMPORTED_MODULE_2__["Reporter"].error(16, Interface.friendlyName, Interface); // TODO: add error (trying to resolve an InterfaceSymbol that has no registrations)
            }
            const annotationParamtypes = DI.getOrCreateAnnotationParamTypes(target);
            annotationParamtypes[index] = Interface;
            return target;
        };
        Interface.friendlyName = friendlyName == null ? 'Interface' : friendlyName;
        Interface.noDefault = function () {
            return Interface;
        };
        Interface.withDefault = function (configure) {
            Interface.withDefault = function () {
                throw _reporter__WEBPACK_IMPORTED_MODULE_2__["Reporter"].error(17, Interface);
            };
            Interface.register = function (container, key) {
                return configure(new ResolverBuilder(container, key !== null && key !== void 0 ? key : Interface));
            };
            return Interface;
        };
        return Interface;
    },
    inject(...dependencies) {
        return function (target, key, descriptor) {
            if (typeof descriptor === 'number') { // It's a parameter decorator.
                const annotationParamtypes = DI.getOrCreateAnnotationParamTypes(target);
                const dep = dependencies[0];
                if (dep !== void 0) {
                    annotationParamtypes[descriptor] = dep;
                }
            }
            else if (key) { // It's a property decorator. Not supported by the container without plugins.
                const annotationParamtypes = DI.getOrCreateAnnotationParamTypes(target.constructor);
                const dep = dependencies[0];
                if (dep !== void 0) {
                    annotationParamtypes[key] = dep;
                }
            }
            else if (descriptor) { // It's a function decorator (not a Class constructor)
                const fn = descriptor.value;
                const annotationParamtypes = DI.getOrCreateAnnotationParamTypes(fn);
                let dep;
                for (let i = 0; i < dependencies.length; ++i) {
                    dep = dependencies[i];
                    if (dep !== void 0) {
                        annotationParamtypes[i] = dep;
                    }
                }
            }
            else { // It's a class decorator.
                const annotationParamtypes = DI.getOrCreateAnnotationParamTypes(target);
                let dep;
                for (let i = 0; i < dependencies.length; ++i) {
                    dep = dependencies[i];
                    if (dep !== void 0) {
                        annotationParamtypes[i] = dep;
                    }
                }
            }
        };
    },
    /**
     * Registers the `target` class as a transient dependency; each time the dependency is resolved
     * a new instance will be created.
     *
     * @param target - The class / constructor function to register as transient.
     * @returns The same class, with a static `register` method that takes a container and returns the appropriate resolver.
     *
     * @example ```ts
     * // On an existing class
     * class Foo { }
     * DI.transient(Foo);
     *
     * // Inline declaration
     * const Foo = DI.transient(class { });
     * // Foo is now strongly typed with register
     * Foo.register(container);
     * ```
     */
    transient(target) {
        target.register = function register(container) {
            const registration = Registration.transient(target, target);
            return registration.register(container, target);
        };
        return target;
    },
    /**
     * Registers the `target` class as a singleton dependency; the class will only be created once. Each
     * consecutive time the dependency is resolved, the same instance will be returned.
     *
     * @param target - The class / constructor function to register as a singleton.
     * @returns The same class, with a static `register` method that takes a container and returns the appropriate resolver.
     * @example ```ts
     * // On an existing class
     * class Foo { }
     * DI.singleton(Foo);
     *
     * // Inline declaration
     * const Foo = DI.singleton(class { });
     * // Foo is now strongly typed with register
     * Foo.register(container);
     * ```
     */
    singleton(target) {
        target.register = function register(container) {
            const registration = Registration.singleton(target, target);
            return registration.register(container, target);
        };
        return target;
    },
};
const IContainer = DI.createInterface('IContainer').noDefault();
const IServiceLocator = IContainer;
function createResolver(getter) {
    return function (key) {
        const resolver = function (target, property, descriptor) {
            DI.inject(resolver)(target, property, descriptor);
        };
        resolver.resolve = function (handler, requestor) {
            return getter(key, handler, requestor);
        };
        return resolver;
    };
}
const inject = DI.inject;
function transientDecorator(target) {
    return DI.transient(target);
}
function transient(target) {
    return target == null ? transientDecorator : transientDecorator(target);
}
function singletonDecorator(target) {
    return DI.singleton(target);
}
function singleton(target) {
    return target == null ? singletonDecorator : singletonDecorator(target);
}
const all = createResolver((key, handler, requestor) => requestor.getAll(key));
const lazy = createResolver((key, handler, requestor) => {
    let instance = null; // cache locally so that lazy always returns the same instance once resolved
    return () => {
        if (instance == null) {
            instance = requestor.get(key);
        }
        return instance;
    };
});
const optional = createResolver((key, handler, requestor) => {
    if (requestor.has(key, true)) {
        return requestor.get(key);
    }
    else {
        return null;
    }
});
const newInstanceForScope = createResolver((key, handler, requestor) => {
    const instance = createNewInstance(key, handler);
    const instanceProvider = new InstanceProvider();
    instanceProvider.prepare(instance);
    requestor.registerResolver(key, instanceProvider, true);
    return instance;
});
const newInstanceOf = createResolver((key, handler, _requestor) => createNewInstance(key, handler));
function createNewInstance(key, handler) {
    const factory = handler.getFactory(key);
    if (factory === null) {
        throw new Error(`No factory registered for ${key}`);
    }
    return factory.construct(handler);
}
/** @internal */
var ResolverStrategy;
(function (ResolverStrategy) {
    ResolverStrategy[ResolverStrategy["instance"] = 0] = "instance";
    ResolverStrategy[ResolverStrategy["singleton"] = 1] = "singleton";
    ResolverStrategy[ResolverStrategy["transient"] = 2] = "transient";
    ResolverStrategy[ResolverStrategy["callback"] = 3] = "callback";
    ResolverStrategy[ResolverStrategy["array"] = 4] = "array";
    ResolverStrategy[ResolverStrategy["alias"] = 5] = "alias";
})(ResolverStrategy || (ResolverStrategy = {}));
/** @internal */
class Resolver {
    constructor(key, strategy, state) {
        this.key = key;
        this.strategy = strategy;
        this.state = state;
    }
    register(container, key) {
        return container.registerResolver(key || this.key, this);
    }
    resolve(handler, requestor) {
        switch (this.strategy) {
            case 0 /* instance */:
                return this.state;
            case 1 /* singleton */: {
                this.strategy = 0 /* instance */;
                const factory = handler.getFactory(this.state);
                if (factory === null) {
                    throw new Error(`Resolver for ${String(this.key)} returned a null factory`);
                }
                return this.state = factory.construct(requestor);
            }
            case 2 /* transient */: {
                // Always create transients from the requesting container
                const factory = handler.getFactory(this.state);
                if (factory === null) {
                    throw new Error(`Resolver for ${String(this.key)} returned a null factory`);
                }
                return factory.construct(requestor);
            }
            case 3 /* callback */:
                return this.state(handler, requestor, this);
            case 4 /* array */:
                return this.state[0].resolve(handler, requestor);
            case 5 /* alias */:
                return handler.get(this.state);
            default:
                throw _reporter__WEBPACK_IMPORTED_MODULE_2__["Reporter"].error(6, this.strategy);
        }
    }
    getFactory(container) {
        let resolver;
        switch (this.strategy) {
            case 1 /* singleton */:
            case 2 /* transient */:
                return container.getFactory(this.state);
            case 5 /* alias */:
                resolver = container.getResolver(this.state);
                if (resolver == null || resolver.getFactory === void 0) {
                    return null;
                }
                return resolver.getFactory(container);
            default:
                return null;
        }
    }
}
/** @internal */
class Factory {
    constructor(Type, invoker, dependencies) {
        this.Type = Type;
        this.invoker = invoker;
        this.dependencies = dependencies;
        this.transformers = null;
    }
    construct(container, dynamicDependencies) {
        const transformers = this.transformers;
        let instance = dynamicDependencies !== void 0
            ? this.invoker.invokeWithDynamicDependencies(container, this.Type, this.dependencies, dynamicDependencies)
            : this.invoker.invoke(container, this.Type, this.dependencies);
        if (transformers == null) {
            return instance;
        }
        for (let i = 0, ii = transformers.length; i < ii; ++i) {
            instance = transformers[i](instance);
        }
        return instance;
    }
    registerTransformer(transformer) {
        if (this.transformers == null) {
            this.transformers = [];
        }
        this.transformers.push(transformer);
        return true;
    }
}
const createFactory = (function () {
    function invokeWithDynamicDependencies(container, Type, staticDependencies, dynamicDependencies) {
        let i = staticDependencies.length;
        let args = new Array(i);
        let lookup;
        while (i-- > 0) {
            lookup = staticDependencies[i];
            if (lookup == null) {
                throw _reporter__WEBPACK_IMPORTED_MODULE_2__["Reporter"].error(7, `Index ${i}.`);
            }
            else {
                args[i] = container.get(lookup);
            }
        }
        if (dynamicDependencies !== void 0) {
            args = args.concat(dynamicDependencies);
        }
        return Reflect.construct(Type, args);
    }
    const classInvokers = [
        {
            invoke(container, Type) {
                return new Type();
            },
            invokeWithDynamicDependencies
        },
        {
            invoke(container, Type, deps) {
                return new Type(container.get(deps[0]));
            },
            invokeWithDynamicDependencies
        },
        {
            invoke(container, Type, deps) {
                return new Type(container.get(deps[0]), container.get(deps[1]));
            },
            invokeWithDynamicDependencies
        },
        {
            invoke(container, Type, deps) {
                return new Type(container.get(deps[0]), container.get(deps[1]), container.get(deps[2]));
            },
            invokeWithDynamicDependencies
        },
        {
            invoke(container, Type, deps) {
                return new Type(container.get(deps[0]), container.get(deps[1]), container.get(deps[2]), container.get(deps[3]));
            },
            invokeWithDynamicDependencies
        },
        {
            invoke(container, Type, deps) {
                return new Type(container.get(deps[0]), container.get(deps[1]), container.get(deps[2]), container.get(deps[3]), container.get(deps[4]));
            },
            invokeWithDynamicDependencies
        }
    ];
    const fallbackInvoker = {
        invoke: invokeWithDynamicDependencies,
        invokeWithDynamicDependencies
    };
    return function (Type) {
        if (Object(_functions__WEBPACK_IMPORTED_MODULE_4__["isNativeFunction"])(Type)) {
            _reporter__WEBPACK_IMPORTED_MODULE_2__["Reporter"].write(5, Type.name);
        }
        const dependencies = DI.getDependencies(Type);
        const invoker = classInvokers.length > dependencies.length ? classInvokers[dependencies.length] : fallbackInvoker;
        return new Factory(Type, invoker, dependencies);
    };
})();
const containerResolver = {
    resolve(handler, requestor) {
        return requestor;
    }
};
function isRegistry(obj) {
    return typeof obj.register === 'function';
}
function isClass(obj) {
    return obj.prototype !== void 0;
}
function isResourceKey(key) {
    return typeof key === 'string' && key.indexOf(':') > 0;
}
/** @internal */
class Container {
    constructor(parent) {
        this.parent = parent;
        this.registerDepth = 0;
        this.disposableResolvers = new Set();
        if (parent === null) {
            this.root = this;
            this.resolvers = new Map();
            this.resourceResolvers = Object.create(null);
        }
        else {
            this.root = parent.root;
            this.resolvers = new Map();
            this.resourceResolvers = Object.assign(Object.create(null), this.root.resourceResolvers);
        }
        this.resolvers.set(IContainer, containerResolver);
    }
    register(...params) {
        if (++this.registerDepth === 100) {
            throw new Error('Unable to autoregister dependency');
            // TODO: change to reporter.error and add various possible causes in description.
            // Most likely cause is trying to register a plain object that does not have a
            // register method and is not a class constructor
        }
        let current;
        let keys;
        let value;
        let j;
        let jj;
        for (let i = 0, ii = params.length; i < ii; ++i) {
            current = params[i];
            if (!Object(_functions__WEBPACK_IMPORTED_MODULE_4__["isObject"])(current)) {
                continue;
            }
            if (isRegistry(current)) {
                current.register(this);
            }
            else if (_resource__WEBPACK_IMPORTED_MODULE_3__["Protocol"].resource.has(current)) {
                const defs = _resource__WEBPACK_IMPORTED_MODULE_3__["Protocol"].resource.getAll(current);
                if (defs.length === 1) {
                    // Fast path for the very common case
                    defs[0].register(this);
                }
                else {
                    const len = defs.length;
                    for (let d = 0; d < len; ++d) {
                        defs[d].register(this);
                    }
                }
            }
            else if (isClass(current)) {
                Registration.singleton(current, current).register(this);
            }
            else {
                keys = Object.keys(current);
                j = 0;
                jj = keys.length;
                for (; j < jj; ++j) {
                    value = current[keys[j]];
                    if (!Object(_functions__WEBPACK_IMPORTED_MODULE_4__["isObject"])(value)) {
                        continue;
                    }
                    // note: we could remove this if-branch and call this.register directly
                    // - the extra check is just a perf tweak to create fewer unnecessary arrays by the spread operator
                    if (isRegistry(value)) {
                        value.register(this);
                    }
                    else {
                        this.register(value);
                    }
                }
            }
        }
        --this.registerDepth;
        return this;
    }
    registerResolver(key, resolver, isDisposable = false) {
        validateKey(key);
        const resolvers = this.resolvers;
        const result = resolvers.get(key);
        if (result == null) {
            resolvers.set(key, resolver);
            if (isResourceKey(key)) {
                this.resourceResolvers[key] = resolver;
            }
        }
        else if (result instanceof Resolver && result.strategy === 4 /* array */) {
            result.state.push(resolver);
        }
        else {
            resolvers.set(key, new Resolver(key, 4 /* array */, [result, resolver]));
        }
        if (isDisposable) {
            this.disposableResolvers.add(resolver);
        }
        return resolver;
    }
    registerTransformer(key, transformer) {
        const resolver = this.getResolver(key);
        if (resolver == null) {
            return false;
        }
        if (resolver.getFactory) {
            const factory = resolver.getFactory(this);
            if (factory == null) {
                return false;
            }
            // This type cast is a bit of a hacky one, necessary due to the duplicity of IResolverLike.
            // Problem is that that interface's type arg can be of type Key, but the getFactory method only works on
            // type Constructable. So the return type of that optional method has this additional constraint, which
            // seems to confuse the type checker.
            return factory.registerTransformer(transformer);
        }
        return false;
    }
    getResolver(key, autoRegister = true) {
        validateKey(key);
        if (key.resolve !== void 0) {
            return key;
        }
        let current = this;
        let resolver;
        while (current != null) {
            resolver = current.resolvers.get(key);
            if (resolver == null) {
                if (current.parent == null) {
                    return autoRegister ? this.jitRegister(key, current) : null;
                }
                current = current.parent;
            }
            else {
                return resolver;
            }
        }
        return null;
    }
    has(key, searchAncestors = false) {
        return this.resolvers.has(key)
            ? true
            : searchAncestors && this.parent != null
                ? this.parent.has(key, true)
                : false;
    }
    get(key) {
        validateKey(key);
        if (key.resolve !== void 0) {
            return key.resolve(this, this);
        }
        let current = this;
        let resolver;
        while (current != null) {
            resolver = current.resolvers.get(key);
            if (resolver == null) {
                if (current.parent == null) {
                    resolver = this.jitRegister(key, current);
                    return resolver.resolve(current, this);
                }
                current = current.parent;
            }
            else {
                return resolver.resolve(current, this);
            }
        }
        throw new Error(`Unable to resolve key: ${key}`);
    }
    getAll(key) {
        validateKey(key);
        let current = this;
        let resolver;
        while (current != null) {
            resolver = current.resolvers.get(key);
            if (resolver == null) {
                if (this.parent == null) {
                    return _platform__WEBPACK_IMPORTED_MODULE_1__["PLATFORM"].emptyArray;
                }
                current = current.parent;
            }
            else {
                return buildAllResponse(resolver, current, this);
            }
        }
        return _platform__WEBPACK_IMPORTED_MODULE_1__["PLATFORM"].emptyArray;
    }
    getFactory(Type) {
        const key = _resource__WEBPACK_IMPORTED_MODULE_3__["Protocol"].annotation.keyFor('di:factory');
        let factory = _aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__["Metadata"].getOwn(key, Type);
        if (factory === void 0) {
            _aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__["Metadata"].define(key, factory = createFactory(Type), Type);
            _resource__WEBPACK_IMPORTED_MODULE_3__["Protocol"].annotation.appendTo(Type, key);
        }
        return factory;
    }
    createChild() {
        return new Container(this);
    }
    disposeResolvers() {
        var _a;
        const disposables = Array.from(this.disposableResolvers);
        while (disposables.length > 0) {
            (_a = disposables.pop()) === null || _a === void 0 ? void 0 : _a.dispose();
        }
    }
    jitRegister(keyAsValue, handler) {
        if (typeof keyAsValue !== 'function') {
            throw new Error(`Attempted to jitRegister something that is not a constructor: '${keyAsValue}'. Did you forget to register this resource?`);
        }
        if (isRegistry(keyAsValue)) {
            const registrationResolver = keyAsValue.register(handler, keyAsValue);
            if (!(registrationResolver instanceof Object) || registrationResolver.resolve == null) {
                const newResolver = handler.resolvers.get(keyAsValue);
                if (newResolver != void 0) {
                    return newResolver;
                }
                throw _reporter__WEBPACK_IMPORTED_MODULE_2__["Reporter"].error(40); // did not return a valid resolver from the static register method
            }
            return registrationResolver;
        }
        else if (_resource__WEBPACK_IMPORTED_MODULE_3__["Protocol"].resource.has(keyAsValue)) {
            const defs = _resource__WEBPACK_IMPORTED_MODULE_3__["Protocol"].resource.getAll(keyAsValue);
            if (defs.length === 1) {
                // Fast path for the very common case
                defs[0].register(handler);
            }
            else {
                const len = defs.length;
                for (let d = 0; d < len; ++d) {
                    defs[d].register(handler);
                }
            }
            const newResolver = handler.resolvers.get(keyAsValue);
            if (newResolver != void 0) {
                return newResolver;
            }
            throw _reporter__WEBPACK_IMPORTED_MODULE_2__["Reporter"].error(40); // did not return a valid resolver from the static register method
        }
        else {
            const resolver = new Resolver(keyAsValue, 1 /* singleton */, keyAsValue);
            handler.resolvers.set(keyAsValue, resolver);
            return resolver;
        }
    }
}
/**
 * An implementation of IRegistry that delegates registration to a
 * separately registered class. The ParameterizedRegistry facilitates the
 * passing of parameters to the final registry.
 */
class ParameterizedRegistry {
    constructor(key, params) {
        this.key = key;
        this.params = params;
    }
    register(container) {
        if (container.has(this.key, true)) {
            const registry = container.get(this.key);
            registry.register(container, ...this.params);
        }
        else {
            container.register(...this.params.filter(x => typeof x === 'object'));
        }
    }
}
const cache = new WeakMap();
function cacheCallbackResult(fun) {
    return function (handler, requestor, resolver) {
        if (cache.has(resolver)) {
            return cache.get(resolver);
        }
        const t = fun(handler, requestor, resolver);
        cache.set(resolver, t);
        return t;
    };
}
/**
 * you can use the resulting {@linkcode IRegistration} of any of the factory methods
 * to register with the container, e.g.
 * ```
 * class Foo {}
 * const container = DI.createContainer();
 * container.register(Registration.instance(Foo, new Foo()));
 * container.get(Foo);
 * ```
 */
const Registration = {
    /**
     * allows you to pass an instance.
     * Every time you request this {@linkcode Key} you will get this instance back.
     * ```
     * Registration.instance(Foo, new Foo()));
     * ```
     *
     * @param key
     * @param value
     */
    instance(key, value) {
        return new Resolver(key, 0 /* instance */, value);
    },
    /**
     * Creates an instance from the class.
     * Every time you request this {@linkcode Key} you will get the same one back.
     * ```
     * Registration.singleton(Foo, Foo);
     * ```
     *
     * @param key
     * @param value
     */
    singleton(key, value) {
        return new Resolver(key, 1 /* singleton */, value);
    },
    /**
     * Creates an instance from a class.
     * Every time you request this {@linkcode Key} you will get a new instance.
     * ```
     * Registration.instance(Foo, Foo);
     * ```
     *
     * @param key
     * @param value
     */
    transient(key, value) {
        return new Resolver(key, 2 /* transient */, value);
    },
    /**
     * Creates an instance from the method passed.
     * Every time you request this {@linkcode Key} you will get a new instance.
     * ```
     * Registration.callback(Foo, () => new Foo());
     * Registration.callback(Bar, (c: IContainer) => new Bar(c.get(Foo)));
     * ```
     *
     * @param key
     * @param callback
     */
    callback(key, callback) {
        return new Resolver(key, 3 /* callback */, callback);
    },
    /**
     * Creates an instance from the method passed.
     * On the first request for the {@linkcode Key} your callback is called and returns an instance.
     * subsequent requests for the {@linkcode Key}, the initial instance returned will be returned.
     * If you pass the same {@linkcode Registration} to another container the same cached value will be used.
     * Should all references to the resolver returned be removed, the cache will expire.
     * ```
     * Registration.cachedCallback(Foo, () => new Foo());
     * Registration.cachedCallback(Bar, (c: IContainer) => new Bar(c.get(Foo)));
     * ```
     *
     * @param key
     * @param callback
     */
    cachedCallback(key, callback) {
        return new Resolver(key, 3 /* callback */, cacheCallbackResult(callback));
    },
    /**
     * creates an alternate {@linkcode Key} to retrieve an instance by.
     * Returns the same scope as the original {@linkcode Key}.
     * ```
     * Register.singleton(Foo, Foo)
     * Register.aliasTo(Foo, MyFoos);
     *
     * container.getAll(MyFoos) // contains an instance of Foo
     * ```
     *
     * @param originalKey
     * @param aliasKey
     */
    aliasTo(originalKey, aliasKey) {
        return new Resolver(aliasKey, 5 /* alias */, originalKey);
    },
    /**
     * @internal
     * @param key
     * @param params
     */
    defer(key, ...params) {
        return new ParameterizedRegistry(key, params);
    }
};
class InstanceProvider {
    constructor() {
        this.instance = null;
    }
    prepare(instance) {
        this.instance = instance;
    }
    resolve(handler, requestor) {
        if (this.instance === undefined) { // unmet precondition: call prepare
            throw _reporter__WEBPACK_IMPORTED_MODULE_2__["Reporter"].error(50); // TODO: organize error codes
        }
        return this.instance;
    }
    dispose() {
        this.instance = null;
    }
}
/** @internal */
function validateKey(key) {
    if (key === null || key === void 0) {
        throw _reporter__WEBPACK_IMPORTED_MODULE_2__["Reporter"].error(5);
    }
}
function buildAllResponse(resolver, handler, requestor) {
    if (resolver instanceof Resolver && resolver.strategy === 4 /* array */) {
        const state = resolver.state;
        let i = state.length;
        const results = new Array(i);
        while (i--) {
            results[i] = state[i].resolve(handler, requestor);
        }
        return results;
    }
    return [resolver.resolve(handler, requestor)];
}
//# sourceMappingURL=di.js.map

/***/ }),

/***/ "./node_modules/@aurelia/kernel/dist/esnext/eventaggregator.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@aurelia/kernel/dist/esnext/eventaggregator.js ***!
  \*********************************************************************/
/*! exports provided: IEventAggregator, EventAggregator */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IEventAggregator", function() { return IEventAggregator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EventAggregator", function() { return EventAggregator; });
/* harmony import */ var _di__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./di */ "./node_modules/@aurelia/kernel/dist/esnext/di.js");
/* harmony import */ var _reporter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./reporter */ "./node_modules/@aurelia/kernel/dist/esnext/reporter.js");


/**
 * Represents a handler for an EventAggregator event.
 */
class Handler {
    constructor(
    /** @internal */
    messageType, 
    /** @internal */
    callback) {
        this.messageType = messageType;
        this.callback = callback;
    }
    handle(message) {
        if (message instanceof this.messageType) {
            this.callback.call(null, message);
        }
    }
}
function invokeCallback(callback, data, event) {
    try {
        callback(data, event);
    }
    catch (e) {
        _reporter__WEBPACK_IMPORTED_MODULE_1__["Reporter"].error(0, e); // TODO: create error code
    }
}
function invokeHandler(handler, data) {
    try {
        handler.handle(data);
    }
    catch (e) {
        _reporter__WEBPACK_IMPORTED_MODULE_1__["Reporter"].error(0, e); // TODO: create error code
    }
}
const IEventAggregator = _di__WEBPACK_IMPORTED_MODULE_0__["DI"].createInterface('IEventAggregator').withDefault(x => x.singleton(EventAggregator));
/**
 * Enables loosely coupled publish/subscribe messaging.
 */
class EventAggregator {
    constructor() {
        /** @internal */
        this.eventLookup = {};
        /** @internal */
        this.messageHandlers = [];
    }
    publish(channelOrInstance, data) {
        let subscribers;
        let i;
        if (!channelOrInstance) {
            throw _reporter__WEBPACK_IMPORTED_MODULE_1__["Reporter"].error(0); // TODO: create error code for 'Event was invalid.'
        }
        if (typeof channelOrInstance === 'string') {
            const channel = channelOrInstance;
            subscribers = this.eventLookup[channel];
            if (subscribers != null) {
                subscribers = subscribers.slice();
                i = subscribers.length;
                while (i--) {
                    invokeCallback(subscribers[i], data, channel);
                }
            }
        }
        else {
            const instance = channelOrInstance;
            subscribers = this.messageHandlers.slice();
            i = subscribers.length;
            while (i--) {
                invokeHandler(subscribers[i], instance);
            }
        }
    }
    subscribe(channelOrType, callback) {
        let handler;
        let subscribers;
        if (!channelOrType) {
            throw _reporter__WEBPACK_IMPORTED_MODULE_1__["Reporter"].error(0); // TODO: create error code for 'Event channel/type was invalid.'
        }
        if (typeof channelOrType === 'string') {
            const channel = channelOrType;
            handler = callback;
            if (this.eventLookup[channel] === void 0) {
                this.eventLookup[channel] = [];
            }
            subscribers = this.eventLookup[channel];
        }
        else {
            handler = new Handler(channelOrType, callback);
            subscribers = this.messageHandlers;
        }
        subscribers.push(handler);
        return {
            dispose() {
                const idx = subscribers.indexOf(handler);
                if (idx !== -1) {
                    subscribers.splice(idx, 1);
                }
            }
        };
    }
    subscribeOnce(channelOrType, callback) {
        const sub = this.subscribe(channelOrType, (data, event) => {
            sub.dispose();
            return callback(data, event);
        });
        return sub;
    }
}
//# sourceMappingURL=eventaggregator.js.map

/***/ }),

/***/ "./node_modules/@aurelia/kernel/dist/esnext/functions.js":
/*!***************************************************************!*\
  !*** ./node_modules/@aurelia/kernel/dist/esnext/functions.js ***!
  \***************************************************************/
/*! exports provided: isArrayIndex, isNumberOrBigInt, isStringOrDate, camelCase, pascalCase, kebabCase, toArray, nextId, resetId, compareNumber, mergeDistinct, bound, mergeArrays, mergeObjects, firstDefined, getPrototypeChain, toLookup, isObject, isNullOrUndefined, isNativeFunction */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isArrayIndex", function() { return isArrayIndex; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isNumberOrBigInt", function() { return isNumberOrBigInt; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isStringOrDate", function() { return isStringOrDate; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "camelCase", function() { return camelCase; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "pascalCase", function() { return pascalCase; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "kebabCase", function() { return kebabCase; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "toArray", function() { return toArray; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "nextId", function() { return nextId; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "resetId", function() { return resetId; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "compareNumber", function() { return compareNumber; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mergeDistinct", function() { return mergeDistinct; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "bound", function() { return bound; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mergeArrays", function() { return mergeArrays; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mergeObjects", function() { return mergeObjects; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "firstDefined", function() { return firstDefined; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getPrototypeChain", function() { return getPrototypeChain; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "toLookup", function() { return toLookup; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isObject", function() { return isObject; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isNullOrUndefined", function() { return isNullOrUndefined; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isNativeFunction", function() { return isNativeFunction; });
/* harmony import */ var _platform__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./platform */ "./node_modules/@aurelia/kernel/dist/esnext/platform.js");

const isNumericLookup = {};
/**
 * Efficiently determine whether the provided property key is numeric
 * (and thus could be an array indexer) or not.
 *
 * Always returns true for values of type `'number'`.
 *
 * Otherwise, only returns true for strings that consist only of positive integers.
 *
 * Results are cached.
 */
function isArrayIndex(value) {
    switch (typeof value) {
        case 'number':
            return value >= 0 && (value | 0) === value;
        case 'string': {
            const result = isNumericLookup[value];
            if (result !== void 0) {
                return result;
            }
            const length = value.length;
            if (length === 0) {
                return isNumericLookup[value] = false;
            }
            let ch = 0;
            for (let i = 0; i < length; ++i) {
                ch = value.charCodeAt(i);
                if (i === 0 && ch === 0x30 && length > 1 /* must not start with 0 */ || ch < 0x30 /* 0 */ || ch > 0x39 /* 9 */) {
                    return isNumericLookup[value] = false;
                }
            }
            return isNumericLookup[value] = true;
        }
        default:
            return false;
    }
}
/**
 * Determines if the value passed is a number or bigint for parsing purposes
 *
 * @param value - Value to evaluate
 */
function isNumberOrBigInt(value) {
    switch (typeof value) {
        case 'number':
        case 'bigint':
            return true;
        default:
            return false;
    }
}
/**
 * Determines if the value passed is a number or bigint for parsing purposes
 *
 * @param value - Value to evaluate
 */
function isStringOrDate(value) {
    switch (typeof value) {
        case 'string':
            return true;
        case 'object':
            return value instanceof Date;
        default:
            return false;
    }
}
/**
 * Base implementation of camel and kebab cases
 */
const baseCase = (function () {
    let CharKind;
    (function (CharKind) {
        CharKind[CharKind["none"] = 0] = "none";
        CharKind[CharKind["digit"] = 1] = "digit";
        CharKind[CharKind["upper"] = 2] = "upper";
        CharKind[CharKind["lower"] = 3] = "lower";
    })(CharKind || (CharKind = {}));
    // eslint-disable-next-line @typescript-eslint/consistent-type-assertions
    const isDigit = Object.assign(Object.create(null), {
        '0': true,
        '1': true,
        '2': true,
        '3': true,
        '4': true,
        '5': true,
        '6': true,
        '7': true,
        '8': true,
        '9': true,
    });
    function charToKind(char) {
        if (char === '') {
            // We get this if we do charAt() with an index out of range
            return 0 /* none */;
        }
        if (char !== char.toUpperCase()) {
            return 3 /* lower */;
        }
        if (char !== char.toLowerCase()) {
            return 2 /* upper */;
        }
        if (isDigit[char] === true) {
            return 1 /* digit */;
        }
        return 0 /* none */;
    }
    return function (input, cb) {
        const len = input.length;
        if (len === 0) {
            return input;
        }
        let sep = false;
        let output = '';
        let prevKind;
        let curChar = '';
        let curKind = 0 /* none */;
        let nextChar = input.charAt(0);
        let nextKind = charToKind(nextChar);
        for (let i = 0; i < len; ++i) {
            prevKind = curKind;
            curChar = nextChar;
            curKind = nextKind;
            nextChar = input.charAt(i + 1);
            nextKind = charToKind(nextChar);
            if (curKind === 0 /* none */) {
                if (output.length > 0) {
                    // Only set sep to true if it's not at the beginning of output.
                    sep = true;
                }
            }
            else {
                if (!sep && output.length > 0 && curKind === 2 /* upper */) {
                    // Separate UAFoo into UA Foo.
                    // Separate uaFOO into ua FOO.
                    sep = prevKind === 3 /* lower */ || nextKind === 3 /* lower */;
                }
                output += cb(curChar, sep);
                sep = false;
            }
        }
        return output;
    };
})();
/**
 * Efficiently convert a string to camelCase.
 *
 * Non-alphanumeric characters are treated as separators.
 *
 * Primarily used by Aurelia to convert DOM attribute names to ViewModel property names.
 *
 * Results are cached.
 */
const camelCase = (function () {
    const cache = Object.create(null);
    function callback(char, sep) {
        return sep ? char.toUpperCase() : char.toLowerCase();
    }
    return function (input) {
        let output = cache[input];
        if (output === void 0) {
            output = cache[input] = baseCase(input, callback);
        }
        return output;
    };
})();
/**
 * Efficiently convert a string to PascalCase.
 *
 * Non-alphanumeric characters are treated as separators.
 *
 * Primarily used by Aurelia to convert element names to class names for synthetic types.
 *
 * Results are cached.
 */
const pascalCase = (function () {
    const cache = Object.create(null);
    return function (input) {
        let output = cache[input];
        if (output === void 0) {
            output = camelCase(input);
            if (output.length > 0) {
                output = output[0].toUpperCase() + output.slice(1);
            }
            cache[input] = output;
        }
        return output;
    };
})();
/**
 * Efficiently convert a string to kebab-case.
 *
 * Non-alphanumeric characters are treated as separators.
 *
 * Primarily used by Aurelia to convert ViewModel property names to DOM attribute names.
 *
 * Results are cached.
 */
const kebabCase = (function () {
    const cache = Object.create(null);
    function callback(char, sep) {
        return sep ? `-${char.toLowerCase()}` : char.toLowerCase();
    }
    return function (input) {
        let output = cache[input];
        if (output === void 0) {
            output = cache[input] = baseCase(input, callback);
        }
        return output;
    };
})();
/**
 * Efficiently (up to 10x faster than `Array.from`) convert an `ArrayLike` to a real array.
 *
 * Primarily used by Aurelia to convert DOM node lists to arrays.
 */
function toArray(input) {
    // benchmark: http://jsben.ch/xjsyF
    const { length } = input;
    const arr = Array(length);
    for (let i = 0; i < length; ++i) {
        arr[i] = input[i];
    }
    return arr;
}
const ids = {};
/**
 * Retrieve the next ID in a sequence for a given string, starting with `1`.
 *
 * Used by Aurelia to assign unique ID's to controllers and resources.
 *
 * Aurelia will always prepend the context name with `au$`, so as long as you avoid
 * using that convention you should be safe from collisions.
 */
function nextId(context) {
    if (ids[context] === void 0) {
        ids[context] = 0;
    }
    return ++ids[context];
}
/**
 * Reset the ID for the given string, so that `nextId` will return `1` again for the next call.
 *
 * Used by Aurelia to reset ID's in between unit tests.
 */
function resetId(context) {
    ids[context] = 0;
}
/**
 * A compare function to pass to `Array.prototype.sort` for sorting numbers.
 * This is needed for numeric sort, since the default sorts them as strings.
 */
function compareNumber(a, b) {
    return a - b;
}
const emptyArray = _platform__WEBPACK_IMPORTED_MODULE_0__["PLATFORM"].emptyArray;
/**
 * Efficiently merge and deduplicate the (primitive) values in two arrays.
 *
 * Does not deduplicate existing values in the first array.
 *
 * Guards against null or undefined arrays.
 *
 * Returns `PLATFORM.emptyArray` if both arrays are either `null`, `undefined` or `PLATFORM.emptyArray`
 *
 * @param slice - If `true`, always returns a new array copy (unless neither array is/has a value)
 */
function mergeDistinct(arr1, arr2, slice) {
    if (arr1 === void 0 || arr1 === null || arr1 === emptyArray) {
        if (arr2 === void 0 || arr2 === null || arr2 === emptyArray) {
            return emptyArray;
        }
        else {
            return slice ? arr2.slice(0) : arr2;
        }
    }
    else if (arr2 === void 0 || arr2 === null || arr2 === emptyArray) {
        return slice ? arr1.slice(0) : arr1;
    }
    const lookup = {};
    const arr3 = slice ? arr1.slice(0) : arr1;
    let len1 = arr1.length;
    let len2 = arr2.length;
    while (len1-- > 0) {
        lookup[arr1[len1]] = true;
    }
    let item;
    while (len2-- > 0) {
        item = arr2[len2];
        // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition
        if (lookup[item] === void 0) {
            arr3.push(item);
            lookup[item] = true;
        }
    }
    return arr3;
}
/**
 * Decorator. (lazily) bind the method to the class instance on first call.
 */
// eslint-disable-next-line @typescript-eslint/ban-types
function bound(target, key, descriptor) {
    return {
        configurable: true,
        enumerable: descriptor.enumerable,
        get() {
            // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion
            const boundFn = descriptor.value.bind(this);
            Reflect.defineProperty(this, key, {
                value: boundFn,
                writable: true,
                configurable: true,
                enumerable: descriptor.enumerable,
            });
            return boundFn;
        },
    };
}
function mergeArrays(...arrays) {
    const result = [];
    let k = 0;
    const arraysLen = arrays.length;
    let arrayLen = 0;
    let array;
    for (let i = 0; i < arraysLen; ++i) {
        array = arrays[i];
        if (array !== void 0) {
            arrayLen = array.length;
            for (let j = 0; j < arrayLen; ++j) {
                result[k++] = array[j];
            }
        }
    }
    return result;
}
function mergeObjects(...objects) {
    const result = {};
    const objectsLen = objects.length;
    let object;
    let key;
    for (let i = 0; i < objectsLen; ++i) {
        object = objects[i];
        if (object !== void 0) {
            for (key in object) {
                result[key] = object[key];
            }
        }
    }
    return result;
}
function firstDefined(...values) {
    const len = values.length;
    let value;
    for (let i = 0; i < len; ++i) {
        value = values[i];
        if (value !== void 0) {
            return value;
        }
    }
    throw new Error(`No default value found`);
}
const getPrototypeChain = (function () {
    const functionPrototype = Function.prototype;
    // eslint-disable-next-line @typescript-eslint/unbound-method
    const getPrototypeOf = Object.getPrototypeOf;
    const cache = new WeakMap();
    let proto = functionPrototype;
    let i = 0;
    let chain = void 0;
    return function (Type) {
        chain = cache.get(Type);
        if (chain === void 0) {
            cache.set(Type, chain = [proto = Type]);
            i = 0;
            while ((proto = getPrototypeOf(proto)) !== functionPrototype) {
                chain[++i] = proto;
            }
        }
        return chain;
    };
})();
function toLookup(...objs) {
    return Object.assign(Object.create(null), ...objs);
}
/**
 * Determine whether a value is an object.
 *
 * Uses `typeof` to guarantee this works cross-realm, which is where `instanceof Object` might fail.
 *
 * Some environments where these issues are known to arise:
 * - same-origin iframes (accessing the other realm via `window.top`)
 * - `jest`.
 *
 * The exact test is:
 * ```ts
 * typeof value === 'object' && value !== null || typeof value === 'function'
 * ```
 *
 * @param value - The value to test.
 * @returns `true` if the value is an object, otherwise `false`.
 * Also performs a type assertion that defaults to `value is Object | Function` which, if the input type is a union with an object type, will infer the correct type.
 * This can be overridden with the generic type argument.
 *
 * @example
 *
 * ```ts
 * class Foo {
 *   bar = 42;
 * }
 *
 * function doStuff(input?: Foo | null) {
 *   input.bar; // Object is possibly 'null' or 'undefined'
 *
 *   // input has an object type in its union (Foo) so that type will be extracted for the 'true' condition
 *   if (isObject(input)) {
 *     input.bar; // OK (input is now typed as Foo)
 *   }
 * }
 *
 * function doOtherStuff(input: unknown) {
 *   input.bar; // Object is of type 'unknown'
 *
 *   // input is 'unknown' so there is no union type to match and it will default to 'Object | Function'
 *   if (isObject(input)) {
 *     input.bar; // Property 'bar' does not exist on type 'Object | Function'
 *   }
 *
 *   // if we know for sure that, if input is an object, it must be a specific type, we can explicitly tell the function to assert that for us
 *   if (isObject<Foo>(input)) {
 *    input.bar; // OK (input is now typed as Foo)
 *   }
 * }
 * ```
 */
// eslint-disable-next-line @typescript-eslint/ban-types
function isObject(value) {
    return typeof value === 'object' && value !== null || typeof value === 'function';
}
/**
 * Determine whether a value is `null` or `undefined`.
 *
 * @param value - The value to test.
 * @returns `true` if the value is `null` or `undefined`, otherwise `false`.
 * Also performs a type assertion that ensures TypeScript treats the value appropriately in the `if` and `else` branches after this check.
 */
function isNullOrUndefined(value) {
    return value === null || value === void 0;
}
/**
 * Determine whether the value is a native function.
 *
 * @param fn - The function to check.
 * @returns `true` is the function is a native function, otherwise `false`
 */
const isNativeFunction = (function () {
    // eslint-disable-next-line @typescript-eslint/ban-types
    const lookup = new WeakMap();
    let isNative = false;
    let sourceText = '';
    let i = 0;
    // eslint-disable-next-line @typescript-eslint/ban-types
    return function (fn) {
        isNative = lookup.get(fn);
        if (isNative === void 0) {
            sourceText = fn.toString();
            i = sourceText.length;
            // http://www.ecma-international.org/ecma-262/#prod-NativeFunction
            isNative = (
            // 29 is the length of 'function () { [native code] }' which is the smallest length of a native function string
            i >= 29 &&
                // 100 seems to be a safe upper bound of the max length of a native function. In Chrome and FF it's 56, in Edge it's 61.
                i <= 100 &&
                // This whole heuristic *could* be tricked by a comment. Do we need to care about that?
                sourceText.charCodeAt(i - 1) === 0x7D && // }
                // TODO: the spec is a little vague about the precise constraints, so we do need to test this across various browsers to make sure just one whitespace is a safe assumption.
                sourceText.charCodeAt(i - 2) <= 0x20 && // whitespace
                sourceText.charCodeAt(i - 3) === 0x5D && // ]
                sourceText.charCodeAt(i - 4) === 0x65 && // e
                sourceText.charCodeAt(i - 5) === 0x64 && // d
                sourceText.charCodeAt(i - 6) === 0x6F && // o
                sourceText.charCodeAt(i - 7) === 0x63 && // c
                sourceText.charCodeAt(i - 8) === 0x20 && //
                sourceText.charCodeAt(i - 9) === 0x65 && // e
                sourceText.charCodeAt(i - 10) === 0x76 && // v
                sourceText.charCodeAt(i - 11) === 0x69 && // i
                sourceText.charCodeAt(i - 12) === 0x74 && // t
                sourceText.charCodeAt(i - 13) === 0x61 && // a
                sourceText.charCodeAt(i - 14) === 0x6E && // n
                sourceText.charCodeAt(i - 15) === 0x58 // [
            );
            lookup.set(fn, isNative);
        }
        return isNative;
    };
})();
//# sourceMappingURL=functions.js.map

/***/ }),

/***/ "./node_modules/@aurelia/kernel/dist/esnext/index.js":
/*!***********************************************************!*\
  !*** ./node_modules/@aurelia/kernel/dist/esnext/index.js ***!
  \***********************************************************/
/*! exports provided: all, DI, IContainer, inject, IServiceLocator, lazy, optional, Registration, singleton, transient, InstanceProvider, newInstanceForScope, newInstanceOf, metadata, Metadata, ColorOptions, ILogConfig, ILogEventFactory, ISink, ILogger, LogConfig, DefaultLogEvent, DefaultLogEventFactory, DefaultLogger, ConsoleSink, LoggerConfiguration, format, relativeToFile, join, PLATFORM, Reporter, Tracer, LogLevel, Profiler, Protocol, fromAnnotationOrDefinitionOrTypeOrDefault, fromAnnotationOrTypeOrDefault, fromDefinitionOrDefault, EventAggregator, IEventAggregator, isArrayIndex, camelCase, kebabCase, pascalCase, toArray, nextId, resetId, compareNumber, mergeDistinct, isNumberOrBigInt, isStringOrDate, bound, mergeArrays, mergeObjects, firstDefined, getPrototypeChain, isObject, isNullOrUndefined, isNativeFunction */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _di__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./di */ "./node_modules/@aurelia/kernel/dist/esnext/di.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "all", function() { return _di__WEBPACK_IMPORTED_MODULE_0__["all"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DI", function() { return _di__WEBPACK_IMPORTED_MODULE_0__["DI"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IContainer", function() { return _di__WEBPACK_IMPORTED_MODULE_0__["IContainer"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "inject", function() { return _di__WEBPACK_IMPORTED_MODULE_0__["inject"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IServiceLocator", function() { return _di__WEBPACK_IMPORTED_MODULE_0__["IServiceLocator"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "lazy", function() { return _di__WEBPACK_IMPORTED_MODULE_0__["lazy"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "optional", function() { return _di__WEBPACK_IMPORTED_MODULE_0__["optional"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Registration", function() { return _di__WEBPACK_IMPORTED_MODULE_0__["Registration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "singleton", function() { return _di__WEBPACK_IMPORTED_MODULE_0__["singleton"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "transient", function() { return _di__WEBPACK_IMPORTED_MODULE_0__["transient"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "InstanceProvider", function() { return _di__WEBPACK_IMPORTED_MODULE_0__["InstanceProvider"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "newInstanceForScope", function() { return _di__WEBPACK_IMPORTED_MODULE_0__["newInstanceForScope"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "newInstanceOf", function() { return _di__WEBPACK_IMPORTED_MODULE_0__["newInstanceOf"]; });

/* harmony import */ var _aurelia_metadata__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/metadata */ "./node_modules/@aurelia/metadata/dist/esnext/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "metadata", function() { return _aurelia_metadata__WEBPACK_IMPORTED_MODULE_1__["metadata"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Metadata", function() { return _aurelia_metadata__WEBPACK_IMPORTED_MODULE_1__["Metadata"]; });

/* harmony import */ var _logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./logger */ "./node_modules/@aurelia/kernel/dist/esnext/logger.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ColorOptions", function() { return _logger__WEBPACK_IMPORTED_MODULE_2__["ColorOptions"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ILogConfig", function() { return _logger__WEBPACK_IMPORTED_MODULE_2__["ILogConfig"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ILogEventFactory", function() { return _logger__WEBPACK_IMPORTED_MODULE_2__["ILogEventFactory"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ISink", function() { return _logger__WEBPACK_IMPORTED_MODULE_2__["ISink"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ILogger", function() { return _logger__WEBPACK_IMPORTED_MODULE_2__["ILogger"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LogConfig", function() { return _logger__WEBPACK_IMPORTED_MODULE_2__["LogConfig"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DefaultLogEvent", function() { return _logger__WEBPACK_IMPORTED_MODULE_2__["DefaultLogEvent"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DefaultLogEventFactory", function() { return _logger__WEBPACK_IMPORTED_MODULE_2__["DefaultLogEventFactory"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DefaultLogger", function() { return _logger__WEBPACK_IMPORTED_MODULE_2__["DefaultLogger"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConsoleSink", function() { return _logger__WEBPACK_IMPORTED_MODULE_2__["ConsoleSink"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LoggerConfiguration", function() { return _logger__WEBPACK_IMPORTED_MODULE_2__["LoggerConfiguration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "format", function() { return _logger__WEBPACK_IMPORTED_MODULE_2__["format"]; });

/* harmony import */ var _path__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./path */ "./node_modules/@aurelia/kernel/dist/esnext/path.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "relativeToFile", function() { return _path__WEBPACK_IMPORTED_MODULE_3__["relativeToFile"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "join", function() { return _path__WEBPACK_IMPORTED_MODULE_3__["join"]; });

/* harmony import */ var _platform__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./platform */ "./node_modules/@aurelia/kernel/dist/esnext/platform.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PLATFORM", function() { return _platform__WEBPACK_IMPORTED_MODULE_4__["PLATFORM"]; });

/* harmony import */ var _reporter__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./reporter */ "./node_modules/@aurelia/kernel/dist/esnext/reporter.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Reporter", function() { return _reporter__WEBPACK_IMPORTED_MODULE_5__["Reporter"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Tracer", function() { return _reporter__WEBPACK_IMPORTED_MODULE_5__["Tracer"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LogLevel", function() { return _reporter__WEBPACK_IMPORTED_MODULE_5__["LogLevel"]; });

/* harmony import */ var _profiler__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./profiler */ "./node_modules/@aurelia/kernel/dist/esnext/profiler.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Profiler", function() { return _profiler__WEBPACK_IMPORTED_MODULE_6__["Profiler"]; });

/* harmony import */ var _resource__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./resource */ "./node_modules/@aurelia/kernel/dist/esnext/resource.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Protocol", function() { return _resource__WEBPACK_IMPORTED_MODULE_7__["Protocol"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "fromAnnotationOrDefinitionOrTypeOrDefault", function() { return _resource__WEBPACK_IMPORTED_MODULE_7__["fromAnnotationOrDefinitionOrTypeOrDefault"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "fromAnnotationOrTypeOrDefault", function() { return _resource__WEBPACK_IMPORTED_MODULE_7__["fromAnnotationOrTypeOrDefault"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "fromDefinitionOrDefault", function() { return _resource__WEBPACK_IMPORTED_MODULE_7__["fromDefinitionOrDefault"]; });

/* harmony import */ var _eventaggregator__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./eventaggregator */ "./node_modules/@aurelia/kernel/dist/esnext/eventaggregator.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "EventAggregator", function() { return _eventaggregator__WEBPACK_IMPORTED_MODULE_8__["EventAggregator"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IEventAggregator", function() { return _eventaggregator__WEBPACK_IMPORTED_MODULE_8__["IEventAggregator"]; });

/* harmony import */ var _functions__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./functions */ "./node_modules/@aurelia/kernel/dist/esnext/functions.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "isArrayIndex", function() { return _functions__WEBPACK_IMPORTED_MODULE_9__["isArrayIndex"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "camelCase", function() { return _functions__WEBPACK_IMPORTED_MODULE_9__["camelCase"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "kebabCase", function() { return _functions__WEBPACK_IMPORTED_MODULE_9__["kebabCase"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "pascalCase", function() { return _functions__WEBPACK_IMPORTED_MODULE_9__["pascalCase"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "toArray", function() { return _functions__WEBPACK_IMPORTED_MODULE_9__["toArray"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "nextId", function() { return _functions__WEBPACK_IMPORTED_MODULE_9__["nextId"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "resetId", function() { return _functions__WEBPACK_IMPORTED_MODULE_9__["resetId"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "compareNumber", function() { return _functions__WEBPACK_IMPORTED_MODULE_9__["compareNumber"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "mergeDistinct", function() { return _functions__WEBPACK_IMPORTED_MODULE_9__["mergeDistinct"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "isNumberOrBigInt", function() { return _functions__WEBPACK_IMPORTED_MODULE_9__["isNumberOrBigInt"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "isStringOrDate", function() { return _functions__WEBPACK_IMPORTED_MODULE_9__["isStringOrDate"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "bound", function() { return _functions__WEBPACK_IMPORTED_MODULE_9__["bound"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "mergeArrays", function() { return _functions__WEBPACK_IMPORTED_MODULE_9__["mergeArrays"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "mergeObjects", function() { return _functions__WEBPACK_IMPORTED_MODULE_9__["mergeObjects"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "firstDefined", function() { return _functions__WEBPACK_IMPORTED_MODULE_9__["firstDefined"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getPrototypeChain", function() { return _functions__WEBPACK_IMPORTED_MODULE_9__["getPrototypeChain"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "isObject", function() { return _functions__WEBPACK_IMPORTED_MODULE_9__["isObject"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "isNullOrUndefined", function() { return _functions__WEBPACK_IMPORTED_MODULE_9__["isNullOrUndefined"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "isNativeFunction", function() { return _functions__WEBPACK_IMPORTED_MODULE_9__["isNativeFunction"]; });











//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./node_modules/@aurelia/kernel/dist/esnext/logger.js":
/*!************************************************************!*\
  !*** ./node_modules/@aurelia/kernel/dist/esnext/logger.js ***!
  \************************************************************/
/*! exports provided: ColorOptions, ILogConfig, ISink, ILogEventFactory, ILogger, format, LogConfig, DefaultLogEvent, DefaultLogEventFactory, ConsoleSink, DefaultLogger, LoggerConfiguration */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ColorOptions", function() { return ColorOptions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ILogConfig", function() { return ILogConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ISink", function() { return ISink; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ILogEventFactory", function() { return ILogEventFactory; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ILogger", function() { return ILogger; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "format", function() { return format; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LogConfig", function() { return LogConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DefaultLogEvent", function() { return DefaultLogEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DefaultLogEventFactory", function() { return DefaultLogEventFactory; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConsoleSink", function() { return ConsoleSink; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DefaultLogger", function() { return DefaultLogger; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LoggerConfiguration", function() { return LoggerConfiguration; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _functions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./functions */ "./node_modules/@aurelia/kernel/dist/esnext/functions.js");
/* harmony import */ var _di__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./di */ "./node_modules/@aurelia/kernel/dist/esnext/di.js");



/**
 * Flags to enable/disable color usage in the logging output.
 */
var ColorOptions;
(function (ColorOptions) {
    /**
     * Do not use ASCII color codes in logging output.
     */
    ColorOptions[ColorOptions["noColors"] = 0] = "noColors";
    /**
     * Use ASCII color codes in logging output. By default, timestamps and the TRC and DBG prefix are colored grey. INF white, WRN yellow, and ERR and FTL red.
     */
    ColorOptions[ColorOptions["colors"] = 1] = "colors";
})(ColorOptions || (ColorOptions = {}));
const ILogConfig = _di__WEBPACK_IMPORTED_MODULE_2__["DI"].createInterface('ILogConfig').withDefault(x => x.instance(new LogConfig(0 /* noColors */, 3 /* warn */)));
const ISink = _di__WEBPACK_IMPORTED_MODULE_2__["DI"].createInterface('ISink').noDefault();
const ILogEventFactory = _di__WEBPACK_IMPORTED_MODULE_2__["DI"].createInterface('ILogEventFactory').withDefault(x => x.singleton(DefaultLogEventFactory));
const ILogger = _di__WEBPACK_IMPORTED_MODULE_2__["DI"].createInterface('ILogger').withDefault(x => x.singleton(DefaultLogger));
// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics
const format = Object(_functions__WEBPACK_IMPORTED_MODULE_1__["toLookup"])({
    red(str) {
        return `\u001b[31m${str}\u001b[39m`;
    },
    green(str) {
        return `\u001b[32m${str}\u001b[39m`;
    },
    yellow(str) {
        return `\u001b[33m${str}\u001b[39m`;
    },
    blue(str) {
        return `\u001b[34m${str}\u001b[39m`;
    },
    magenta(str) {
        return `\u001b[35m${str}\u001b[39m`;
    },
    cyan(str) {
        return `\u001b[36m${str}\u001b[39m`;
    },
    white(str) {
        return `\u001b[37m${str}\u001b[39m`;
    },
    grey(str) {
        return `\u001b[90m${str}\u001b[39m`;
    },
});
class LogConfig {
    constructor(colorOptions, level) {
        this.colorOptions = colorOptions;
        this.level = level;
    }
}
const getLogLevelString = (function () {
    const logLevelString = [
        Object(_functions__WEBPACK_IMPORTED_MODULE_1__["toLookup"])({
            TRC: 'TRC',
            DBG: 'DBG',
            INF: 'INF',
            WRN: 'WRN',
            ERR: 'ERR',
            FTL: 'FTL',
            QQQ: '???',
        }),
        Object(_functions__WEBPACK_IMPORTED_MODULE_1__["toLookup"])({
            TRC: format.grey('TRC'),
            DBG: format.grey('DBG'),
            INF: format.white('INF'),
            WRN: format.yellow('WRN'),
            ERR: format.red('ERR'),
            FTL: format.red('FTL'),
            QQQ: format.grey('???'),
        }),
    ];
    return function (level, colorOptions) {
        if (level <= 0 /* trace */) {
            return logLevelString[colorOptions].TRC;
        }
        if (level <= 1 /* debug */) {
            return logLevelString[colorOptions].DBG;
        }
        if (level <= 2 /* info */) {
            return logLevelString[colorOptions].INF;
        }
        if (level <= 3 /* warn */) {
            return logLevelString[colorOptions].WRN;
        }
        if (level <= 4 /* error */) {
            return logLevelString[colorOptions].ERR;
        }
        if (level <= 5 /* fatal */) {
            return logLevelString[colorOptions].FTL;
        }
        return logLevelString[colorOptions].QQQ;
    };
})();
function getScopeString(scope, colorOptions) {
    if (colorOptions === 0 /* noColors */) {
        return scope.join('.');
    }
    // eslint-disable-next-line @typescript-eslint/unbound-method
    return scope.map(format.cyan).join('.');
}
function getIsoString(timestamp, colorOptions) {
    if (colorOptions === 0 /* noColors */) {
        return new Date(timestamp).toISOString();
    }
    return format.grey(new Date(timestamp).toISOString());
}
class DefaultLogEvent {
    constructor(severity, message, optionalParams, scope, colorOptions, timestamp) {
        this.severity = severity;
        this.message = message;
        this.optionalParams = optionalParams;
        this.scope = scope;
        this.colorOptions = colorOptions;
        this.timestamp = timestamp;
    }
    toString() {
        const { severity, message, scope, colorOptions, timestamp } = this;
        if (scope.length === 0) {
            return `${getIsoString(timestamp, colorOptions)} [${getLogLevelString(severity, colorOptions)}] ${message}`;
        }
        return `${getIsoString(timestamp, colorOptions)} [${getLogLevelString(severity, colorOptions)} ${getScopeString(scope, colorOptions)}] ${message}`;
    }
}
let DefaultLogEventFactory = class DefaultLogEventFactory {
    constructor(config) {
        this.config = config;
    }
    createLogEvent(logger, level, message, optionalParams) {
        return new DefaultLogEvent(level, message, optionalParams, logger.scope, this.config.colorOptions, Date.now());
    }
};
DefaultLogEventFactory = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(0, ILogConfig),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object])
], DefaultLogEventFactory);

class ConsoleSink {
    constructor($console) {
        this.emit = function emit(event) {
            const optionalParams = event.optionalParams;
            if (optionalParams === void 0 || optionalParams.length === 0) {
                switch (event.severity) {
                    case 0 /* trace */:
                    case 1 /* debug */:
                        return $console.debug(event.toString());
                    case 2 /* info */:
                        return $console.info(event.toString());
                    case 3 /* warn */:
                        return $console.warn(event.toString());
                    case 4 /* error */:
                    case 5 /* fatal */:
                        return $console.error(event.toString());
                }
            }
            else {
                switch (event.severity) {
                    case 0 /* trace */:
                    case 1 /* debug */:
                        return $console.debug(event.toString(), ...optionalParams);
                    case 2 /* info */:
                        return $console.info(event.toString(), ...optionalParams);
                    case 3 /* warn */:
                        return $console.warn(event.toString(), ...optionalParams);
                    case 4 /* error */:
                    case 5 /* fatal */:
                        return $console.error(event.toString(), ...optionalParams);
                }
            }
        };
    }
}
let DefaultLogger = class DefaultLogger {
    constructor(config, factory, sinks, scope = [], parent = null) {
        this.config = config;
        this.factory = factory;
        this.sinks = sinks;
        this.scope = scope;
        this.scopedLoggers = Object.create(null);
        if (parent === null) {
            this.root = this;
            this.parent = this;
        }
        else {
            this.root = parent.root;
            this.parent = parent;
        }
        const sinksLen = sinks.length;
        let i = 0;
        const emit = (level, msgOrGetMsg, optionalParams) => {
            const message = typeof msgOrGetMsg === 'function' ? msgOrGetMsg() : msgOrGetMsg;
            const event = factory.createLogEvent(this, level, message, optionalParams);
            for (i = 0; i < sinksLen; ++i) {
                sinks[i].emit(event);
            }
        };
        this.trace = function trace(messageOrGetMessage, ...optionalParams) {
            if (config.level <= 0 /* trace */) {
                emit(0 /* trace */, messageOrGetMessage, optionalParams);
            }
        };
        this.debug = function debug(messageOrGetMessage, ...optionalParams) {
            if (config.level <= 1 /* debug */) {
                emit(1 /* debug */, messageOrGetMessage, optionalParams);
            }
        };
        this.info = function info(messageOrGetMessage, ...optionalParams) {
            if (config.level <= 2 /* info */) {
                emit(2 /* info */, messageOrGetMessage, optionalParams);
            }
        };
        this.warn = function warn(messageOrGetMessage, ...optionalParams) {
            if (config.level <= 3 /* warn */) {
                emit(3 /* warn */, messageOrGetMessage, optionalParams);
            }
        };
        this.error = function error(messageOrGetMessage, ...optionalParams) {
            if (config.level <= 4 /* error */) {
                emit(4 /* error */, messageOrGetMessage, optionalParams);
            }
        };
        this.fatal = function fatal(messageOrGetMessage, ...optionalParams) {
            if (config.level <= 5 /* fatal */) {
                emit(5 /* fatal */, messageOrGetMessage, optionalParams);
            }
        };
    }
    scopeTo(name) {
        const scopedLoggers = this.scopedLoggers;
        let scopedLogger = scopedLoggers[name];
        if (scopedLogger === void 0) {
            scopedLogger = scopedLoggers[name] = new DefaultLogger(this.config, this.factory, this.sinks, this.scope.concat(name), this);
        }
        return scopedLogger;
    }
};
DefaultLogger = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(0, ILogConfig),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(1, ILogEventFactory),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(2, Object(_di__WEBPACK_IMPORTED_MODULE_2__["all"])(ISink)),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object, Object, Array, Array, Object])
], DefaultLogger);

/**
 * A basic `ILogger` configuration that configures a single `console` sink based on provided options.
 *
 * NOTE: You *must* register the return value of `.create` with the container / au instance, not this `LoggerConfiguration` object itself.
 *
 * ```ts
 * // GOOD
 * container.register(LoggerConfiguration.create(console))
 * // GOOD
 * container.register(LoggerConfiguration.create(console, LogLevel.debug))
 * // GOOD
 * container.register(LoggerConfiguration.create({
 *   debug: PLATFORM.noop,
 *   info: PLATFORM.noop,
 *   warn: PLATFORM.noop,
 *   error: msg => {
 *     throw new Error(msg);
 *   }
 * }, LogLevel.debug))
 *
 * // BAD
 * container.register(LoggerConfiguration)
 * ```
 */
const LoggerConfiguration = Object(_functions__WEBPACK_IMPORTED_MODULE_1__["toLookup"])({
    /**
     * @param $console - The `console` object to use. Can be the native `window.console` / `global.console`, but can also be a wrapper or mock that implements the same interface.
     * @param level - The global `LogLevel` to configure. Defaults to `warn` or higher.
     * @param colorOptions - Whether to use colors or not. Defaults to `noColors`. Colors are especially nice in nodejs environments but don't necessarily work (well) in all environments, such as browsers.
     */
    create($console, level = 3 /* warn */, colorOptions = 0 /* noColors */) {
        return Object(_functions__WEBPACK_IMPORTED_MODULE_1__["toLookup"])({
            register(container) {
                return container.register(_di__WEBPACK_IMPORTED_MODULE_2__["Registration"].instance(ILogConfig, new LogConfig(colorOptions, level)), _di__WEBPACK_IMPORTED_MODULE_2__["Registration"].instance(ISink, new ConsoleSink($console)));
            },
        });
    },
});
//# sourceMappingURL=logger.js.map

/***/ }),

/***/ "./node_modules/@aurelia/kernel/dist/esnext/path.js":
/*!**********************************************************!*\
  !*** ./node_modules/@aurelia/kernel/dist/esnext/path.js ***!
  \**********************************************************/
/*! exports provided: relativeToFile, join */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "relativeToFile", function() { return relativeToFile; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "join", function() { return join; });
function trimDots(ary) {
    const len = ary.length;
    let i = 0;
    let part;
    for (; i < len; ++i) {
        part = ary[i];
        if (part === '.') {
            ary.splice(i, 1);
            i -= 1;
        }
        else if (part === '..') {
            // If at the start, or previous value is still ..,
            // keep them so that when converted to a path it may
            // still work when converted to a path, even though
            // as an ID it is less than ideal. In larger point
            // releases, may be better to just kick out an error.
            if (i === 0 || (i === 1 && ary[2] === '..') || ary[i - 1] === '..') {
                continue;
            }
            if (i > 0) {
                ary.splice(i - 1, 2);
                i -= 2;
            }
        }
    }
}
/**
 * Calculates a path relative to a file.
 *
 * @param name - The relative path.
 * @param file - The file path.
 * @returns The calculated path.
 */
function relativeToFile(name, file) {
    const fileParts = !file ? file : file.split('/');
    const nameParts = name.trim().split('/');
    if (nameParts[0].startsWith('.') && fileParts) {
        // Convert file to array, and lop off the last part,
        // so that . matches that 'directory' and not name of the file's
        // module. For instance, file of 'one/two/three', maps to
        // 'one/two/three.js', but we want the directory, 'one/two' for
        // this normalization.
        const normalizedBaseParts = fileParts.slice(0, fileParts.length - 1);
        nameParts.unshift(...normalizedBaseParts);
    }
    trimDots(nameParts);
    return nameParts.join('/');
}
/**
 * Joins two paths.
 *
 * @param path1 - The first path.
 * @param path2 - The second path.
 * @returns The joined path.
 */
function join(path1, path2) {
    if (!path1) {
        return path2;
    }
    if (!path2) {
        return path1;
    }
    const schemeMatch = /^([^/]*?:)\//.exec(path1);
    const scheme = (schemeMatch && schemeMatch.length > 0) ? schemeMatch[1] : '';
    path1 = path1.slice(scheme.length);
    let urlPrefix;
    if (path1.startsWith('///') && scheme === 'file:') {
        urlPrefix = '///';
    }
    else if (path1.startsWith('//')) {
        urlPrefix = '//';
    }
    else if (path1.startsWith('/')) {
        urlPrefix = '/';
    }
    else {
        urlPrefix = '';
    }
    const trailingSlash = path2.endsWith('/') ? '/' : '';
    const url1 = path1.split('/');
    const url2 = path2.split('/');
    const url3 = [];
    for (let i = 0, ii = url1.length; i < ii; ++i) {
        if (url1[i] === '..') {
            url3.pop();
        }
        else if (url1[i] !== '.' && url1[i] !== '') {
            url3.push(url1[i]);
        }
    }
    for (let i = 0, ii = url2.length; i < ii; ++i) {
        if (url2[i] === '..') {
            url3.pop();
        }
        else if (url2[i] !== '.' && url2[i] !== '') {
            url3.push(url2[i]);
        }
    }
    return scheme + urlPrefix + url3.join('/') + trailingSlash;
}
//# sourceMappingURL=path.js.map

/***/ }),

/***/ "./node_modules/@aurelia/kernel/dist/esnext/platform.js":
/*!**************************************************************!*\
  !*** ./node_modules/@aurelia/kernel/dist/esnext/platform.js ***!
  \**************************************************************/
/*! exports provided: PLATFORM */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function(global, process) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PLATFORM", function() { return PLATFORM; });
function $noop() { return; }
const $global = (function () {
    if (typeof global !== 'undefined') {
        return global;
    }
    if (typeof self !== 'undefined') {
        return self;
    }
    if (typeof window !== 'undefined') {
        return window;
    }
    try {
        // Not all environments allow eval and Function. Use only as a last resort:
        // eslint-disable-next-line no-new-func
        return new Function('return this')();
    }
    catch (_a) {
        // If all fails, give up and create an object.
        // eslint-disable-next-line @typescript-eslint/consistent-type-assertions
        return {};
    }
})();
const isBrowserLike = (typeof window !== 'undefined'
    && typeof window.document !== 'undefined');
const isWebWorkerLike = (typeof self === 'object'
    && self.constructor != null
    && self.constructor.name === 'DedicatedWorkerGlobalScope');
const isNodeLike = (typeof process !== 'undefined'
    && process.versions != null
    && process.versions.node != null);
// performance.now polyfill for non-browser envs based on https://github.com/myrne/performance-now
const $now = (function () {
    var _a, _b;
    let getNanoSeconds;
    let hrtime;
    let moduleLoadTime;
    let nodeLoadTime;
    let upTime;
    if (((_a = $global.performance) === null || _a === void 0 ? void 0 : _a.now) != null) {
        const $performance = $global.performance;
        return function () {
            return $performance.now();
        };
    }
    else if (((_b = $global.process) === null || _b === void 0 ? void 0 : _b.hrtime) != null) {
        const now = function () {
            return (getNanoSeconds() - nodeLoadTime) / 1e6;
        };
        hrtime = $global.process.hrtime;
        getNanoSeconds = function () {
            const hr = hrtime();
            return hr[0] * 1e9 + hr[1];
        };
        moduleLoadTime = getNanoSeconds();
        upTime = $global.process.uptime() * 1e9;
        nodeLoadTime = moduleLoadTime - upTime;
        return now;
    }
    else {
        const now = function () {
            return Date.now() - nodeLoadTime;
        };
        nodeLoadTime = Date.now();
        return now;
    }
})();
const hasOwnProperty = Object.prototype.hasOwnProperty;
const emptyArray = Object.freeze([]);
const emptyObject = Object.freeze({});
const $PLATFORM = {
    /**
     * `true` if there is a `window` variable in the global scope with a `document` property.
     *
     * NOTE: this does not guarantee that the code is actually running in a browser, as some libraries tamper with globals.
     * The only conclusion that can be drawn is that the `window` global is available and likely behaves similar to how it would in a browser.
     */
    isBrowserLike,
    /**
     * `true` if there is a `self` variable (of type `object`) in the global scope with constructor name `'DedicatedWorkerGlobalScope'`.
     *
     * NOTE: this does not guarantee that the code is actually running in a web worker, as some libraries tamper with globals.
     * The only conclusion that can be drawn is that the `self` global is available and likely behaves similar to how it would in a web worker.
     */
    isWebWorkerLike,
    /**
     * `true` if there is a `process` variable in the global scope with a `versions` property which has a `node` property.
     *
     * NOTE: this is not a guarantee that the code is actually running in nodejs, as some libraries tamper with globals.
     * The only conclusion that can be drawn is that the `process` global is available and likely behaves similar to how it would in nodejs.
     */
    isNodeLike,
    global: $global,
    emptyArray,
    emptyObject,
    noop: $noop,
    now: $now,
    hasOwnProperty,
    restore() {
        Object.assign(PLATFORM, $PLATFORM);
    },
};
const PLATFORM = { ...$PLATFORM };
//# sourceMappingURL=platform.js.map
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js"), __webpack_require__(/*! ./../../../../process/browser.js */ "./node_modules/process/browser.js")))

/***/ }),

/***/ "./node_modules/@aurelia/kernel/dist/esnext/profiler.js":
/*!**************************************************************!*\
  !*** ./node_modules/@aurelia/kernel/dist/esnext/profiler.js ***!
  \**************************************************************/
/*! exports provided: Profiler */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Profiler", function() { return Profiler; });
/* harmony import */ var _platform__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./platform */ "./node_modules/@aurelia/kernel/dist/esnext/platform.js");

const Profiler = (function () {
    const now = _platform__WEBPACK_IMPORTED_MODULE_0__["PLATFORM"].now;
    const timers = [];
    let profileMap;
    const profiler = {
        createTimer,
        enable,
        disable,
        report,
        enabled: false
    };
    return profiler;
    function createTimer(name) {
        timers.push(name);
        let depth = 0;
        let mark = 0;
        return {
            enter,
            leave
        };
        function enter() {
            if (++depth === 1) {
                mark = now();
                ++profileMap[name].topLevelCount;
            }
            ++profileMap[name].totalCount;
        }
        function leave() {
            if (--depth === 0) {
                profileMap[name].duration += (now() - mark);
            }
        }
    }
    function enable() {
        profileMap = {};
        for (const timer of timers) {
            profileMap[timer] = {
                name: timer,
                duration: 0,
                topLevelCount: 0,
                totalCount: 0
            };
        }
        profiler.enabled = true;
    }
    function disable() {
        profiler.enabled = false;
    }
    function report(cb) {
        Object.keys(profileMap).map(key => profileMap[key]).sort((a, b) => b.duration - a.duration).forEach(p => {
            cb(p.name, p.duration, p.topLevelCount, p.totalCount);
        });
    }
})();
//# sourceMappingURL=profiler.js.map

/***/ }),

/***/ "./node_modules/@aurelia/kernel/dist/esnext/reporter.js":
/*!**************************************************************!*\
  !*** ./node_modules/@aurelia/kernel/dist/esnext/reporter.js ***!
  \**************************************************************/
/*! exports provided: LogLevel, Reporter, Tracer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LogLevel", function() { return LogLevel; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Reporter", function() { return Reporter; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Tracer", function() { return Tracer; });
var LogLevel;
(function (LogLevel) {
    /**
     * The most detailed information about internal app state.
     *
     * Disabled by default and should never be enabled in a production environment.
     */
    LogLevel[LogLevel["trace"] = 0] = "trace";
    /**
     * Information that is useful for debugging during development and has no long-term value.
     */
    LogLevel[LogLevel["debug"] = 1] = "debug";
    /**
     * Information about the general flow of the application that has long-term value.
     */
    LogLevel[LogLevel["info"] = 2] = "info";
    /**
     * Unexpected circumstances that require attention but do not otherwise cause the current flow of execution to stop.
     */
    LogLevel[LogLevel["warn"] = 3] = "warn";
    /**
     * Unexpected circumstances that cause the flow of execution in the current activity to stop but do not cause an app-wide failure.
     */
    LogLevel[LogLevel["error"] = 4] = "error";
    /**
     * Unexpected circumstances that cause an app-wide failure or otherwise require immediate attention.
     */
    LogLevel[LogLevel["fatal"] = 5] = "fatal";
    /**
     * No messages should be written.
     */
    LogLevel[LogLevel["none"] = 6] = "none";
})(LogLevel || (LogLevel = {}));
const Reporter = {
    level: 3 /* warn */,
    write(code, ...params) { return; },
    error(code, ...params) { return new Error(`Code ${code}`); }
};
const Tracer = {
    /**
     * A convenience property for the user to conditionally call the tracer.
     * This saves unnecessary `noop` and `slice` calls in non-AOT scenarios even if debugging is disabled.
     * In AOT these calls will simply be removed entirely.
     *
     * This property **only** turns on tracing if `@aurelia/debug` is included and configured as well.
     */
    enabled: false,
    liveLoggingEnabled: false,
    liveWriter: null,
    /**
     * Call this at the start of a method/function.
     * Each call to `enter` **must** have an accompanying call to `leave` for the tracer to work properly.
     *
     * @param objName - Any human-friendly name to identify the traced object with.
     * @param methodName - Any human-friendly name to identify the traced method with.
     * @param args - Pass in `Array.prototype.slice.call(arguments)` to also trace the parameters, or `null` if this is not needed (to save memory/cpu)
     */
    enter(objName, methodName, args) { return; },
    /**
     * Call this at the end of a method/function. Pops one trace item off the stack.
     */
    leave() { return; },
    /**
     * Writes only the trace info leading up to the current method call.
     *
     * @param writer - An object to write the output to.
     */
    writeStack(writer) { return; },
    /**
     * Writes all trace info captured since the previous flushAll operation.
     *
     * @param writer - An object to write the output to. Can be null to simply reset the tracer state.
     */
    flushAll(writer) { return; },
    enableLiveLogging,
    /**
     * Stops writing out each trace info item as they are traced.
     */
    disableLiveLogging() { return; }
};
function enableLiveLogging(optionsOrWriter) { return; }
//# sourceMappingURL=reporter.js.map

/***/ }),

/***/ "./node_modules/@aurelia/kernel/dist/esnext/resource.js":
/*!**************************************************************!*\
  !*** ./node_modules/@aurelia/kernel/dist/esnext/resource.js ***!
  \**************************************************************/
/*! exports provided: Protocol, fromAnnotationOrDefinitionOrTypeOrDefault, fromAnnotationOrTypeOrDefault, fromDefinitionOrDefault */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Protocol", function() { return Protocol; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fromAnnotationOrDefinitionOrTypeOrDefault", function() { return fromAnnotationOrDefinitionOrTypeOrDefault; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fromAnnotationOrTypeOrDefault", function() { return fromAnnotationOrTypeOrDefault; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fromDefinitionOrDefault", function() { return fromDefinitionOrDefault; });
/* harmony import */ var _aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/metadata */ "./node_modules/@aurelia/metadata/dist/esnext/index.js");
/* harmony import */ var _platform__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./platform */ "./node_modules/@aurelia/kernel/dist/esnext/platform.js");


const annotation = {
    name: 'au:annotation',
    appendTo(target, key) {
        const keys = _aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__["Metadata"].getOwn(annotation.name, target);
        if (keys === void 0) {
            _aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__["Metadata"].define(annotation.name, [key], target);
        }
        else {
            keys.push(key);
        }
    },
    set(target, prop, value) {
        _aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__["Metadata"].define(annotation.keyFor(prop), value, target);
    },
    get(target, prop) {
        return _aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__["Metadata"].getOwn(annotation.keyFor(prop), target);
    },
    getKeys(target) {
        let keys = _aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__["Metadata"].getOwn(annotation.name, target);
        if (keys === void 0) {
            _aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__["Metadata"].define(annotation.name, keys = [], target);
        }
        return keys;
    },
    isKey(key) {
        return key.startsWith(annotation.name);
    },
    keyFor(name, context) {
        if (context === void 0) {
            return `${annotation.name}:${name}`;
        }
        return `${annotation.name}:${name}:${context}`;
    },
};
const resource = {
    name: 'au:resource',
    appendTo(target, key) {
        const keys = _aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__["Metadata"].getOwn(resource.name, target);
        if (keys === void 0) {
            _aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__["Metadata"].define(resource.name, [key], target);
        }
        else {
            keys.push(key);
        }
    },
    has(target) {
        return _aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__["Metadata"].hasOwn(resource.name, target);
    },
    getAll(target) {
        const keys = _aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__["Metadata"].getOwn(resource.name, target);
        if (keys === void 0) {
            return _platform__WEBPACK_IMPORTED_MODULE_1__["PLATFORM"].emptyArray;
        }
        else {
            return keys.map(k => _aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__["Metadata"].getOwn(k, target));
        }
    },
    getKeys(target) {
        let keys = _aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__["Metadata"].getOwn(resource.name, target);
        if (keys === void 0) {
            _aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__["Metadata"].define(resource.name, keys = [], target);
        }
        return keys;
    },
    isKey(key) {
        return key.startsWith(resource.name);
    },
    keyFor(name, context) {
        if (context === void 0) {
            return `${resource.name}:${name}`;
        }
        return `${resource.name}:${name}:${context}`;
    },
};
const Protocol = {
    annotation,
    resource,
};
// eslint-disable-next-line @typescript-eslint/unbound-method
const hasOwn = Object.prototype.hasOwnProperty;
/**
 * The order in which the values are checked:
 * 1. Annotations (usually set by decorators) have the highest priority; they override the definition as well as static properties on the type.
 * 2. Definition properties (usually set by the customElement decorator object literal) come next. They override static properties on the type.
 * 3. Static properties on the type come last. Note that this does not look up the prototype chain (bindables are an exception here, but we do that differently anyway)
 * 4. The default property that is provided last. The function is only called if the default property is needed
 */
function fromAnnotationOrDefinitionOrTypeOrDefault(name, def, Type, getDefault) {
    let value = _aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__["Metadata"].getOwn(Protocol.annotation.keyFor(name), Type);
    if (value === void 0) {
        value = def[name];
        if (value === void 0) {
            value = Type[name];
            // eslint-disable-next-line @typescript-eslint/strict-boolean-expressions
            if (value === void 0 || !hasOwn.call(Type, name)) { // First just check the value (common case is faster), but do make sure it doesn't come from the proto chain
                return getDefault();
            }
            return value;
        }
        return value;
    }
    return value;
}
/**
 * The order in which the values are checked:
 * 1. Annotations (usually set by decorators) have the highest priority; they override static properties on the type.
 * 2. Static properties on the typ. Note that this does not look up the prototype chain (bindables are an exception here, but we do that differently anyway)
 * 3. The default property that is provided last. The function is only called if the default property is needed
 */
function fromAnnotationOrTypeOrDefault(name, Type, getDefault) {
    let value = _aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__["Metadata"].getOwn(Protocol.annotation.keyFor(name), Type);
    if (value === void 0) {
        value = Type[name];
        // eslint-disable-next-line @typescript-eslint/strict-boolean-expressions
        if (value === void 0 || !hasOwn.call(Type, name)) { // First just check the value (common case is faster), but do make sure it doesn't come from the proto chain
            return getDefault();
        }
        return value;
    }
    return value;
}
/**
 * The order in which the values are checked:
 * 1. Definition properties.
 * 2. The default property that is provided last. The function is only called if the default property is needed
 */
function fromDefinitionOrDefault(name, def, getDefault) {
    const value = def[name];
    if (value === void 0) {
        return getDefault();
    }
    return value;
}
//# sourceMappingURL=resource.js.map

/***/ }),

/***/ "./node_modules/@aurelia/metadata/dist/esnext/index.js":
/*!*************************************************************!*\
  !*** ./node_modules/@aurelia/metadata/dist/esnext/index.js ***!
  \*************************************************************/
/*! exports provided: Metadata, metadata */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Metadata", function() { return Metadata; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "metadata", function() { return metadata; });
// eslint-disable-next-line @typescript-eslint/ban-types
function isObject(value) {
    return typeof value === 'object' && value !== null || typeof value === 'function';
}
function isNullOrUndefined(value) {
    return value === null || value === void 0;
}
/* eslint-disable @typescript-eslint/no-explicit-any */
/* eslint-disable @typescript-eslint/ban-types */
const metadataInternalSlot = new WeakMap();
function $typeError(operation, args, paramName, actualValue, expectedType) {
    return new TypeError(`${operation}(${args.map(String).join(',')}) - Expected '${paramName}' to be of type ${expectedType}, but got: ${Object.prototype.toString.call(actualValue)} (${String(actualValue)})`);
}
function toPropertyKeyOrUndefined(propertyKey) {
    switch (typeof propertyKey) {
        case 'undefined':
        case 'string':
        case 'symbol':
            return propertyKey;
        default:
            return `${propertyKey}`;
    }
}
function toPropertyKey(propertyKey) {
    switch (typeof propertyKey) {
        case 'string':
        case 'symbol':
            return propertyKey;
        default:
            return `${propertyKey}`;
    }
}
function ensurePropertyKeyOrUndefined(propertyKey) {
    switch (typeof propertyKey) {
        case 'undefined':
        case 'string':
        case 'symbol':
            return propertyKey;
        default:
            throw new TypeError(`Invalid metadata propertyKey: ${propertyKey}.`);
    }
}
function GetOrCreateMetadataMap(O, P, Create) {
    // 1. Assert: P is undefined or IsPropertyKey(P) is true.
    // 2. Let targetMetadata be the value of O's [[Metadata]] internal slot.
    let targetMetadata = metadataInternalSlot.get(O);
    // 3. If targetMetadata is undefined, then
    if (targetMetadata === void 0) {
        // 3. a. If Create is false, return undefined.
        if (!Create) {
            return void 0;
        }
        // 3. b. Set targetMetadata to be a newly created Map object.
        targetMetadata = new Map();
        // 3. c. Set the [[Metadata]] internal slot of O to targetMetadata.
        metadataInternalSlot.set(O, targetMetadata);
    }
    // 4. Let metadataMap be ? Invoke(targetMetadata, "get", P).
    let metadataMap = targetMetadata.get(P);
    // 5. If metadataMap is undefined, then
    if (metadataMap === void 0) {
        // 5. a. If Create is false, return undefined.
        if (!Create) {
            return void 0;
        }
        // 5. b. Set metadataMap to be a newly created Map object.
        metadataMap = new Map();
        // 5. c. Perform ? Invoke(targetMetadata, "set", P, metadataMap).
        targetMetadata.set(P, metadataMap);
    }
    // 6. Return metadataMap.
    return metadataMap;
}
// 3.1.2.1 OrdinaryHasOwnMetadata(MetadataKey, O, P)
// https://rbuckton.github.io/reflect-metadata/#ordinaryhasownmetadata
function OrdinaryHasOwnMetadata(MetadataKey, O, P) {
    // 1. Assert: P is undefined or IsPropertyKey(P) is true.
    // 2. Let metadataMap be ? GetOrCreateMetadataMap(O, P, false).
    const metadataMap = GetOrCreateMetadataMap(O, P, /* Create */ false);
    // 3. If metadataMap is undefined, return false.
    if (metadataMap === void 0) {
        return false;
    }
    // 4. Return ? ToBoolean(? Invoke(metadataMap, "has", MetadataKey)).
    return metadataMap.has(MetadataKey);
}
// 3.1.1.1 OrdinaryHasMetadata(MetadataKey, O, P)
// https://rbuckton.github.io/reflect-metadata/#ordinaryhasmetadata
function OrdinaryHasMetadata(MetadataKey, O, P) {
    // 1. Assert: P is undefined or IsPropertyKey(P) is true.
    // 2. Let hasOwn be ? OrdinaryHasOwnMetadata(MetadataKey, O, P).
    // 3. If hasOwn is true, return true.
    if (OrdinaryHasOwnMetadata(MetadataKey, O, P)) {
        return true;
    }
    // 4. Let parent be ? O.[[GetPrototypeOf]]().
    const parent = Object.getPrototypeOf(O);
    // 5. If parent is not null, Return ? parent.[[HasMetadata]](MetadataKey, P).
    if (parent !== null) {
        return OrdinaryHasMetadata(MetadataKey, parent, P);
    }
    // 6. Return false.
    return false;
}
// 3.1.4.1 OrdinaryGetOwnMetadata(MetadataKey, O, P)
// https://rbuckton.github.io/reflect-metadata/#ordinarygetownmetadata
function OrdinaryGetOwnMetadata(MetadataKey, O, P) {
    // 1. Assert: P is undefined or IsPropertyKey(P) is true.
    // 2. Let metadataMap be ? GetOrCreateMetadataMap(O, P, false).
    const metadataMap = GetOrCreateMetadataMap(O, P, /* Create */ false);
    // 3. If metadataMap is undefined, return undefined.
    if (metadataMap === void 0) {
        return void 0;
    }
    // 4. Return ? Invoke(metadataMap, "get", MetadataKey).
    return metadataMap.get(MetadataKey);
}
// 3.1.3.1 OrdinaryGetMetadata(MetadataKey, O, P)
// https://rbuckton.github.io/reflect-metadata/#ordinarygetmetadata
function OrdinaryGetMetadata(MetadataKey, O, P) {
    // 1. Assert: P is undefined or IsPropertyKey(P) is true.
    // 2. Let hasOwn be ? OrdinaryHasOwnMetadata(MetadataKey, O, P).
    // 3. If hasOwn is true, return ? OrdinaryGetOwnMetadata(MetadataKey, O, P).
    if (OrdinaryHasOwnMetadata(MetadataKey, O, P)) {
        return OrdinaryGetOwnMetadata(MetadataKey, O, P);
    }
    // 4. Let parent be ? O.[[GetPrototypeOf]]().
    const parent = Object.getPrototypeOf(O);
    // 5. If parent is not null, return ? parent.[[GetMetadata]](MetadataKey, P).
    if (parent !== null) {
        return OrdinaryGetMetadata(MetadataKey, parent, P);
    }
    // 6. Return undefined.
    return void 0;
}
// 3.1.5.1 OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P)
// https://rbuckton.github.io/reflect-metadata/#ordinarydefineownmetadata
function OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P) {
    // 1. Assert: P is undefined or IsPropertyKey(P) is true.
    // 2. Let metadataMap be ? GetOrCreateMetadataMap(O, P, true).
    const metadataMap = GetOrCreateMetadataMap(O, P, /* Create */ true);
    // 3. Return ? Invoke(metadataMap, "set", MetadataKey, MetadataValue).
    metadataMap.set(MetadataKey, MetadataValue);
}
// 3.1.7.1 OrdinaryOwnMetadataKeys(O, P)
// https://rbuckton.github.io/reflect-metadata/#ordinaryownmetadatakeys
function OrdinaryOwnMetadataKeys(O, P) {
    // 1. Assert: P is undefined or IsPropertyKey(P) is true.
    // 2. Let keys be ? ArrayCreate(0).
    const keys = [];
    // 3. Let metadataMap be ? GetOrCreateMetadataMap(O, P, false).
    const metadataMap = GetOrCreateMetadataMap(O, P, /* Create */ false);
    // 4. If metadataMap is undefined, return keys.
    if (metadataMap === void 0) {
        return keys;
    }
    // 5. Let keysObj be ? Invoke(metadataMap, "keys").
    const keysObj = metadataMap.keys();
    // 6. Let iterator be ? GetIterator(keysObj).
    // 7. Let k be 0.
    let k = 0;
    // 8. Repeat
    for (const key of keysObj) {
        // 8. a. Let Pk be ! ToString(k).
        // 8. b. Let next be ? IteratorStep(iterator).
        // 8. c. If next is false, then
        // 8. c. i. Let setStatus be ? Set(keys, "length", k, true).
        // 8. c. ii. Assert: setStatus is true.
        // 8. c. iii. Return keys.
        // 8. d. Let nextValue be ? IteratorValue(next).
        // 8. e. Let defineStatus be CreateDataPropertyOrThrow(keys, Pk, nextValue).
        keys[k] = key;
        // 8. f. If defineStatus is an abrupt completion, return ? IteratorClose(iterator, defineStatus).
        // 8. g. Increase k by 1.
        ++k;
    }
    return keys;
}
// 3.1.6.1 OrdinaryMetadataKeys(O, P)
// https://rbuckton.github.io/reflect-metadata/#ordinarymetadatakeys
function OrdinaryMetadataKeys(O, P) {
    // 1. Assert: P is undefined or IsPropertyKey(P) is true.
    // 2. Let ownKeys be ? OrdinaryOwnMetadataKeys(O, P).
    const ownKeys = OrdinaryOwnMetadataKeys(O, P);
    // 3. Let parent be ? O.[[GetPrototypeOf]]().
    const parent = Object.getPrototypeOf(O);
    // 4. If parent is null, then return ownKeys.
    if (parent === null) {
        return ownKeys;
    }
    // 5. Let parentKeys be ? O.[[OrdinaryMetadataKeys]](P).
    const parentKeys = OrdinaryMetadataKeys(parent, P);
    // 6. Let ownKeysLen = ? Get(ownKeys, "length").
    const ownKeysLen = ownKeys.length;
    // 7. If ownKeysLen is 0, return parentKeys.
    if (ownKeysLen === 0) {
        return parentKeys;
    }
    // 8. Let parentKeysLen = ? Get(parentKeys, "length").
    const parentKeysLen = parentKeys.length;
    // 9. If parentKeysLen is 0, return ownKeys.
    if (parentKeysLen === 0) {
        return ownKeys;
    }
    // 10. Let set be a newly created Set object.
    const set = new Set();
    // 11. Let keys be ? ArrayCreate(0).
    const keys = [];
    // 12. Let k be 0.
    let k = 0;
    // 13. For each element key of ownKeys
    let key;
    for (let i = 0; i < ownKeysLen; ++i) {
        key = ownKeys[i];
        // 13. a. Let hasKey be ? Invoke(set, "has", key).
        // 13. b. If hasKey is false, then
        if (!set.has(key)) {
            // 13. b. i. Let Pk be ! ToString(k).
            // 13. b. ii. Perform ? Invoke(set, "add", key).
            set.add(key);
            // 13. b. iii. Let defineStatus be CreateDataProperty(keys, Pk, key).
            // 13. b. iv. Assert: defineStatus is true.
            keys[k] = key;
            // 13. b. v. Increase k by 1.
            ++k;
        }
    }
    // 14. For each element key of parentKeys
    for (let i = 0; i < parentKeysLen; ++i) {
        key = parentKeys[i];
        // 14. a. Let hasKey be ? Invoke(set, "has", key).
        // 14. b. If hasKey is false, then
        if (!set.has(key)) {
            // 14. b. i. Let Pk be ! ToString(k).
            // 14. b. ii. Perform ? Invoke(set, "add", key).
            set.add(key);
            // 14. b. iii. Let defineStatus be CreateDataProperty(keys, Pk, key).
            // 14. b. iv. Assert: defineStatus is true.
            keys[k] = key;
            // 14. b. v. Increase k by 1.
            ++k;
        }
    }
    // 15. Perform ? Set(keys, "length", k).
    // 16. return keys.
    return keys;
}
// 3.1.8 DeleteMetadata(MetadataKey, P)
// https://rbuckton.github.io/reflect-metadata/#ordinary-object-internal-methods-and-internal-slots-deletemetadata
function OrdinaryDeleteMetadata(O, MetadataKey, P) {
    // 1. Assert: P is undefined or IsPropertyKey(P) is true.
    // 2. Let metadataMap be ? GetOrCreateMetadataMap(O, P, false).
    const metadataMap = GetOrCreateMetadataMap(O, P, false);
    // 3. If metadataMap is undefined, return false.
    if (metadataMap === void 0) {
        return false;
    }
    // 4. Return ? Invoke(metadataMap, "delete", MetadataKey).
    return metadataMap.delete(MetadataKey);
}
// 4.1.2 Reflect.metadata(metadataKey, metadataValue)
// https://rbuckton.github.io/reflect-metadata/#reflect.metadata
/**
 * A default metadata decorator factory that can be used on a class, class member, or parameter.
 *
 * @param metadataKey - The key for the metadata entry.
 * If `metadataKey` is already defined for the target and target key, the
 * metadataValue for that key will be overwritten.
 * @param metadataValue - The value for the metadata entry.
 * @returns A decorator function.
 */
function metadata(metadataKey, metadataValue) {
    function decorator(target, propertyKey) {
        // 1. Assert: F has a [[MetadataKey]] internal slot whose value is an ECMAScript language value, or undefined.
        // 2. Assert: F has a [[MetadataValue]] internal slot whose value is an ECMAScript language value, or undefined.
        // 3. If Type(target) is not Object, throw a TypeError exception.
        if (!isObject(target)) {
            throw $typeError('@metadata', [metadataKey, metadataValue, target, propertyKey], 'target', target, 'Object or Function');
        }
        // 4. If key is not undefined and IsPropertyKey(key) is false, throw a TypeError exception.
        // 5. Let metadataKey be the value of F's [[MetadataKey]] internal slot.
        // 6. Let metadataValue be the value of F's [[MetadataValue]] internal slot.
        // 7. Perform ? target.[[DefineMetadata]](metadataKey, metadataValue, target, key).
        OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, ensurePropertyKeyOrUndefined(propertyKey));
        // 8. Return undefined.
    }
    return decorator;
}
function decorate(decorators, target, propertyKey, attributes) {
    if (propertyKey !== void 0) {
        if (!Array.isArray(decorators)) {
            throw $typeError('Metadata.decorate', [decorators, target, propertyKey, attributes], 'decorators', decorators, 'Array');
        }
        if (!isObject(target)) {
            throw $typeError('Metadata.decorate', [decorators, target, propertyKey, attributes], 'target', target, 'Object or Function');
        }
        if (!isObject(attributes) && !isNullOrUndefined(attributes)) {
            throw $typeError('Metadata.decorate', [decorators, target, propertyKey, attributes], 'attributes', attributes, 'Object, Function, null, or undefined');
        }
        if (attributes === null) {
            attributes = void 0;
        }
        propertyKey = toPropertyKey(propertyKey);
        return DecorateProperty(decorators, target, propertyKey, attributes);
    }
    else {
        if (!Array.isArray(decorators)) {
            throw $typeError('Metadata.decorate', [decorators, target, propertyKey, attributes], 'decorators', decorators, 'Array');
        }
        if (typeof target !== 'function') {
            throw $typeError('Metadata.decorate', [decorators, target, propertyKey, attributes], 'target', target, 'Function');
        }
        return DecorateConstructor(decorators, target);
    }
}
function DecorateConstructor(decorators, target) {
    for (let i = decorators.length - 1; i >= 0; --i) {
        const decorator = decorators[i];
        const decorated = decorator(target);
        if (!isNullOrUndefined(decorated)) {
            if (typeof decorated !== 'function') {
                throw $typeError('DecorateConstructor', [decorators, target], 'decorated', decorated, 'Function, null, or undefined');
            }
            target = decorated;
        }
    }
    return target;
}
function DecorateProperty(decorators, target, propertyKey, descriptor) {
    for (let i = decorators.length - 1; i >= 0; --i) {
        const decorator = decorators[i];
        const decorated = decorator(target, propertyKey, descriptor);
        if (!isNullOrUndefined(decorated)) {
            if (!isObject(decorated)) {
                throw $typeError('DecorateProperty', [decorators, target, propertyKey, descriptor], 'decorated', decorated, 'Object, Function, null, or undefined');
            }
            descriptor = decorated;
        }
    }
    return descriptor;
}
function $define(metadataKey, metadataValue, target, propertyKey) {
    // 1. If Type(target) is not Object, throw a TypeError exception.
    if (!isObject(target)) {
        throw $typeError('Metadata.define', [metadataKey, metadataValue, target, propertyKey], 'target', target, 'Object or Function');
    }
    // 2. Return ? target.[[DefineMetadata]](metadataKey, metadataValue, propertyKey).
    return OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, toPropertyKeyOrUndefined(propertyKey));
}
function $has(metadataKey, target, propertyKey) {
    // 1. If Type(target) is not Object, throw a TypeError exception.
    if (!isObject(target)) {
        throw $typeError('Metadata.has', [metadataKey, target, propertyKey], 'target', target, 'Object or Function');
    }
    // 2. Return ? target.[[HasMetadata]](metadataKey, propertyKey).
    return OrdinaryHasMetadata(metadataKey, target, toPropertyKeyOrUndefined(propertyKey));
}
function $hasOwn(metadataKey, target, propertyKey) {
    // 1. If Type(target) is not Object, throw a TypeError exception.
    if (!isObject(target)) {
        throw $typeError('Metadata.hasOwn', [metadataKey, target, propertyKey], 'target', target, 'Object or Function');
    }
    // 2. Return ? target.[[HasOwn]](metadataKey, propertyKey).
    return OrdinaryHasOwnMetadata(metadataKey, target, toPropertyKeyOrUndefined(propertyKey));
}
function $get(metadataKey, target, propertyKey) {
    // 1. If Type(target) is not Object, throw a TypeError exception.
    if (!isObject(target)) {
        throw $typeError('Metadata.get', [metadataKey, target, propertyKey], 'target', target, 'Object or Function');
    }
    // 2. Return ? target.[[GetMetadata]](metadataKey, propertyKey).
    return OrdinaryGetMetadata(metadataKey, target, toPropertyKeyOrUndefined(propertyKey));
}
function $getOwn(metadataKey, target, propertyKey) {
    // 1. If Type(target) is not Object, throw a TypeError exception.
    if (!isObject(target)) {
        throw $typeError('Metadata.getOwn', [metadataKey, target, propertyKey], 'target', target, 'Object or Function');
    }
    // 2. Return ? target.[[GetOwnMetadata]](metadataKey, propertyKey).
    return OrdinaryGetOwnMetadata(metadataKey, target, toPropertyKeyOrUndefined(propertyKey));
}
function $getKeys(target, propertyKey) {
    // 1. If Type(target) is not Object, throw a TypeError exception.
    if (!isObject(target)) {
        throw $typeError('Metadata.getKeys', [target, propertyKey], 'target', target, 'Object or Function');
    }
    // 2. Return ? target.[[GetMetadataKeys]](propertyKey).
    return OrdinaryMetadataKeys(target, toPropertyKeyOrUndefined(propertyKey));
}
function $getOwnKeys(target, propertyKey) {
    // 1. If Type(target) is not Object, throw a TypeError exception.
    if (!isObject(target)) {
        throw $typeError('Metadata.getOwnKeys', [target, propertyKey], 'target', target, 'Object or Function');
    }
    // 2. Return ? target.[[GetOwnMetadataKeys]](propertyKey).
    return OrdinaryOwnMetadataKeys(target, toPropertyKeyOrUndefined(propertyKey));
}
function $delete(metadataKey, target, propertyKey) {
    // 1. If Type(target) is not Object, throw a TypeError exception.
    if (!isObject(target)) {
        throw $typeError('Metadata.delete', [metadataKey, target, propertyKey], 'target', target, 'Object or Function');
    }
    // 2. Return ? target.[[DeleteMetadata]](metadataKey, propertyKey).
    return OrdinaryDeleteMetadata(target, metadataKey, toPropertyKeyOrUndefined(propertyKey));
}
const Metadata = {
    define: $define,
    has: $has,
    hasOwn: $hasOwn,
    get: $get,
    getOwn: $getOwn,
    getKeys: $getKeys,
    getOwnKeys: $getOwnKeys,
    delete: $delete,
};
function def(obj, key, value) {
    Reflect.defineProperty(obj, key, {
        writable: true,
        enumerable: false,
        configurable: true,
        value,
    });
}
def(Metadata, '$Internal', metadataInternalSlot);
const hasMetadata = 'metadata' in Reflect;
const hasDecorate = 'decorate' in Reflect;
const hasDefineMetadata = 'defineMetadata' in Reflect;
const hasHasMetadata = 'hasMetadata' in Reflect;
const hasHasOwnMetadata = 'hasOwnMetadata' in Reflect;
const hasGetMetadata = 'getMetadata' in Reflect;
const hasGetOwnMetadata = 'getOwnMetadata' in Reflect;
const hasGetMetadataKeys = 'getMetadataKeys' in Reflect;
const hasGetOwnMetadataKeys = 'getOwnMetadataKeys' in Reflect;
const hasDeleteMetadata = 'deleteMetadata' in Reflect;
const hasSome = (hasMetadata ||
    hasDecorate ||
    hasDefineMetadata ||
    hasHasMetadata ||
    hasHasOwnMetadata ||
    hasGetMetadata ||
    hasGetOwnMetadata ||
    hasGetMetadataKeys ||
    hasGetOwnMetadataKeys ||
    hasDeleteMetadata);
const hasAll = (hasMetadata &&
    hasDecorate &&
    hasDefineMetadata &&
    hasHasMetadata &&
    hasHasOwnMetadata &&
    hasGetMetadata &&
    hasGetOwnMetadata &&
    hasGetMetadataKeys &&
    hasGetOwnMetadataKeys &&
    hasDeleteMetadata);
if (hasSome && !hasAll) {
    // This is temporary until we have the reporter / logging component working properly.
    // We should kind of throw here, but it's a bit harsh to completely stop Aurelia from loading for something that's not guaranteed to fail,
    // so just log a warning instead.
    /* eslint-disable no-console, no-undef, @typescript-eslint/ban-ts-ignore */
    // @ts-ignore
    console.warn('Partial existing Reflect.metadata polyfill found. Working environment cannot be guaranteed. Please file an issue at https://github.com/aurelia/aurelia/issues so that we can look into compatibility options for this scenario.');
}
if (!hasMetadata) {
    def(Reflect, 'metadata', metadata);
}
if (!hasDecorate) {
    def(Reflect, 'decorate', decorate);
}
if (!hasDefineMetadata) {
    def(Reflect, 'defineMetadata', $define);
}
if (!hasHasMetadata) {
    def(Reflect, 'hasMetadata', $has);
}
if (!hasHasOwnMetadata) {
    def(Reflect, 'hasOwnMetadata', $hasOwn);
}
if (!hasGetMetadata) {
    def(Reflect, 'getMetadata', $get);
}
if (!hasGetOwnMetadata) {
    def(Reflect, 'getOwnMetadata', $getOwn);
}
if (!hasGetMetadataKeys) {
    def(Reflect, 'getMetadataKeys', $getKeys);
}
if (!hasGetOwnMetadataKeys) {
    def(Reflect, 'getOwnMetadataKeys', $getOwnKeys);
}
if (!hasDeleteMetadata) {
    def(Reflect, 'deleteMetadata', $delete);
}

//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./node_modules/@aurelia/route-recognizer/dist/esnext/index.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@aurelia/route-recognizer/dist/esnext/index.js ***!
  \*********************************************************************/
/*! exports provided: ConfigurableRoute, Endpoint, RecognizedRoute, RouteRecognizer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConfigurableRoute", function() { return ConfigurableRoute; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Endpoint", function() { return Endpoint; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RecognizedRoute", function() { return RecognizedRoute; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RouteRecognizer", function() { return RouteRecognizer; });
/* eslint-disable @typescript-eslint/no-unnecessary-type-assertion */
class ConfigurableRoute {
    constructor(path, caseSensitive, handler) {
        this.path = path;
        this.caseSensitive = caseSensitive;
        this.handler = handler;
    }
}
class Endpoint {
    constructor(route, paramNames) {
        this.route = route;
        this.paramNames = paramNames;
    }
}
class RecognizedRoute {
    constructor(endpoint, params, searchParams, isDynamic, queryString) {
        this.endpoint = endpoint;
        this.params = params;
        this.searchParams = searchParams;
        this.isDynamic = isDynamic;
        this.queryString = queryString;
    }
}
class Candidate {
    constructor(chars, states, skippedStates, result) {
        var _a;
        this.chars = chars;
        this.states = states;
        this.skippedStates = skippedStates;
        this.result = result;
        this.head = states[states.length - 1];
        this.endpoint = (_a = this.head) === null || _a === void 0 ? void 0 : _a.endpoint;
    }
    advance(ch) {
        const { chars, states, skippedStates, result } = this;
        let stateToAdd = null;
        let matchCount = 0;
        const state = states[states.length - 1];
        function $process(nextState, skippedState) {
            if (nextState.isMatch(ch)) {
                if (++matchCount === 1) {
                    stateToAdd = nextState;
                }
                else {
                    result.add(new Candidate(chars.concat(ch), states.concat(nextState), skippedState === null ? skippedStates : skippedStates.concat(skippedState), result));
                }
            }
            if (state.segment === null && nextState.isOptional && nextState.nextStates !== null) {
                if (nextState.nextStates.length > 1) {
                    throw new Error(`${nextState.nextStates.length} nextStates`);
                }
                const separator = nextState.nextStates[0];
                if (!separator.isSeparator) {
                    throw new Error(`Not a separator`);
                }
                if (separator.nextStates !== null) {
                    for (const $nextState of separator.nextStates) {
                        $process($nextState, nextState);
                    }
                }
            }
        }
        if (state.isDynamic) {
            $process(state, null);
        }
        if (state.nextStates !== null) {
            for (const nextState of state.nextStates) {
                $process(nextState, null);
            }
        }
        if (stateToAdd !== null) {
            states.push(this.head = stateToAdd);
            chars.push(ch);
            if (stateToAdd.endpoint !== null) {
                this.endpoint = stateToAdd.endpoint;
            }
        }
        if (matchCount === 0) {
            result.remove(this);
        }
    }
    finalize() {
        function collectSkippedStates(skippedStates, state) {
            const nextStates = state.nextStates;
            if (nextStates !== null) {
                if (nextStates.length === 1 && nextStates[0].segment === null) {
                    collectSkippedStates(skippedStates, nextStates[0]);
                }
                else {
                    for (const nextState of nextStates) {
                        if (nextState.isOptional && nextState.endpoint !== null) {
                            skippedStates.push(nextState);
                            if (nextState.nextStates !== null) {
                                for (const $nextState of nextState.nextStates) {
                                    collectSkippedStates(skippedStates, $nextState);
                                }
                            }
                            break;
                        }
                    }
                }
            }
        }
        collectSkippedStates(this.skippedStates, this.head);
    }
    getParams() {
        const { states, chars, endpoint } = this;
        const params = {};
        // First initialize all properties with undefined so they all exist (even if they're not filled, e.g. non-matched optional params)
        for (const name of endpoint.paramNames) {
            params[name] = void 0;
        }
        for (let i = 0, ii = states.length; i < ii; ++i) {
            const state = states[i];
            if (state.isDynamic) {
                const name = state.segment.name;
                if (params[name] === void 0) {
                    params[name] = chars[i];
                }
                else {
                    params[name] += chars[i];
                }
            }
        }
        return params;
    }
    /**
     * Compares this candidate to another candidate to determine the correct sorting order.
     *
     * This algorithm is different from `sortSolutions` in v1's route-recognizer in that it compares
     * the candidates segment-by-segment, rather than merely comparing the cumulative of segment types
     *
     * This resolves v1's ambiguity in situations like `/foo/:id/bar` vs. `/foo/bar/:id`, which had the
     * same sorting value because they both consist of two static segments and one dynamic segment.
     *
     * With this algorithm, `/foo/bar/:id` would always be sorted first because the second segment is different,
     * and static wins over dynamic.
     *
     * ### NOTE
     * This algorithm violates some of the invariants of v1's algorithm,
     * but those invariants were arguably not very sound to begin with. Example:
     *
     * `/foo/*path/bar/baz` vs. `/foo/bar/*path1/*path2`
     * - in v1, the first would win because that match has fewer stars
     * - in v2, the second will win because there is a bigger static match at the start of the pattern
     *
     * The algorithm should be more logical and easier to reason about in v2, but it's important to be aware of
     * subtle difference like this which might surprise some users who happened to rely on this behavior from v1,
     * intentionally or unintentionally.
     *
     * @param b - The candidate to compare this to.
     * Parameter name is `b` because the method should be used like so: `states.sort((a, b) => a.compareTo(b))`.
     * This will bring the candidate with the highest score to the first position of the array.
     */
    compareTo(b) {
        const statesA = this.states;
        const statesB = b.states;
        for (let iA = 0, iB = 0, ii = Math.max(statesA.length, statesB.length); iA < ii; ++iA) {
            let stateA = statesA[iA];
            if (stateA === void 0) {
                return 1;
            }
            let stateB = statesB[iB];
            if (stateB === void 0) {
                return -1;
            }
            let segmentA = stateA.segment;
            let segmentB = stateB.segment;
            if (segmentA === null) {
                if (segmentB === null) {
                    ++iB;
                    continue;
                }
                if ((stateA = statesA[++iA]) === void 0) {
                    return 1;
                }
                segmentA = stateA.segment;
            }
            else if (segmentB === null) {
                if ((stateB = statesB[++iB]) === void 0) {
                    return -1;
                }
                segmentB = stateB.segment;
            }
            if (segmentA.kind < segmentB.kind) {
                return 1;
            }
            if (segmentA.kind > segmentB.kind) {
                return -1;
            }
            ++iB;
        }
        const skippedStatesA = this.skippedStates;
        const skippedStatesB = b.skippedStates;
        const skippedStatesALen = skippedStatesA.length;
        const skippedStatesBLen = skippedStatesB.length;
        if (skippedStatesALen < skippedStatesBLen) {
            return 1;
        }
        if (skippedStatesALen > skippedStatesBLen) {
            return -1;
        }
        for (let i = 0; i < skippedStatesALen; ++i) {
            const skippedStateA = skippedStatesA[i];
            const skippedStateB = skippedStatesB[i];
            if (skippedStateA.length < skippedStateB.length) {
                return 1;
            }
            if (skippedStateA.length > skippedStateB.length) {
                return -1;
            }
        }
        // This should only be possible with a single pattern with multiple consecutive star segments.
        // TODO: probably want to warn or even throw here, but leave it be for now.
        return 0;
    }
}
function hasEndpoint(candidate) {
    return candidate.head.endpoint !== null;
}
function compareChains(a, b) {
    return a.compareTo(b);
}
class RecognizeResult {
    constructor(rootState) {
        this.candidates = [];
        this.candidates = [new Candidate([''], [rootState], [], this)];
    }
    get isEmpty() {
        return this.candidates.length === 0;
    }
    getSolution() {
        const candidates = this.candidates.filter(hasEndpoint);
        if (candidates.length === 0) {
            return null;
        }
        for (const candidate of candidates) {
            candidate.finalize();
        }
        candidates.sort(compareChains);
        return candidates[0];
    }
    add(candidate) {
        this.candidates.push(candidate);
    }
    remove(candidate) {
        this.candidates.splice(this.candidates.indexOf(candidate), 1);
    }
    advance(ch) {
        const candidates = this.candidates.slice();
        for (const candidate of candidates) {
            candidate.advance(ch);
        }
    }
}
class RouteRecognizer {
    constructor() {
        this.rootState = new State(null, null, '');
    }
    add(routeOrRoutes) {
        if (routeOrRoutes instanceof Array) {
            for (const route of routeOrRoutes) {
                this.add(route);
            }
            return;
        }
        const route = routeOrRoutes;
        const $route = new ConfigurableRoute(route.path, route.caseSensitive === true, route.handler);
        const parts = parsePath($route.path);
        const paramNames = [];
        let state = this.rootState;
        for (const part of parts) {
            // Each segment always begins with a slash, so we represent this with a non-segment state
            state = state.append(null, '/');
            switch (part.charAt(0)) {
                case ':': { // route parameter
                    const isOptional = part.endsWith('?');
                    const name = isOptional ? part.slice(1, -1) : part.slice(1);
                    paramNames.push(name);
                    state = new DynamicSegment(name, isOptional).appendTo(state);
                    break;
                }
                case '*': { // dynamic route
                    const name = part.slice(1);
                    paramNames.push(name);
                    state = new StarSegment(name).appendTo(state);
                    break;
                }
                default: { // standard path route
                    state = new StaticSegment(part, $route.caseSensitive).appendTo(state);
                    break;
                }
            }
        }
        const endpoint = new Endpoint($route, paramNames);
        state.setEndpoint(endpoint);
    }
    recognize(path) {
        let searchParams;
        let queryString = '';
        const queryStart = path.indexOf('?');
        if (queryStart >= 0) {
            queryString = path.slice(queryStart + 1);
            path = path.slice(0, queryStart);
            searchParams = new URLSearchParams(queryString);
        }
        else {
            searchParams = new URLSearchParams();
        }
        path = decodeURI(path);
        if (!path.startsWith('/')) {
            path = `/${path}`;
        }
        if (path.length > 1 && path.endsWith('/')) {
            path = path.slice(0, -1);
        }
        const result = new RecognizeResult(this.rootState);
        for (let i = 0, ii = path.length; i < ii; ++i) {
            const ch = path.charAt(i);
            result.advance(ch);
            if (result.isEmpty) {
                return null;
            }
        }
        const candidate = result.getSolution();
        if (candidate === null) {
            return null;
        }
        const { endpoint } = candidate;
        const params = candidate.getParams();
        const isDynamic = candidate.endpoint.paramNames.length > 0;
        return new RecognizedRoute(endpoint, params, searchParams, isDynamic, queryString);
    }
}
class State {
    constructor(prevState, segment, value) {
        this.prevState = prevState;
        this.segment = segment;
        this.value = value;
        this.nextStates = null;
        this.endpoint = null;
        switch (segment === null || segment === void 0 ? void 0 : segment.kind) {
            case 2 /* dynamic */:
                this.length = prevState.length + 1;
                this.isSeparator = false;
                this.isDynamic = true;
                this.isOptional = segment.optional;
                break;
            case 1 /* star */:
                this.length = prevState.length + 1;
                this.isSeparator = false;
                this.isDynamic = true;
                this.isOptional = false;
                break;
            case 3 /* static */:
                this.length = prevState.length + 1;
                this.isSeparator = false;
                this.isDynamic = false;
                this.isOptional = false;
                break;
            case undefined:
                this.length = prevState === null ? 0 : prevState.length;
                this.isSeparator = true;
                this.isDynamic = false;
                this.isOptional = false;
                break;
        }
    }
    append(segment, value) {
        let state;
        let nextStates = this.nextStates;
        if (nextStates === null) {
            state = void 0;
            nextStates = this.nextStates = [];
        }
        else if (segment === null) {
            state = nextStates.find(s => s.value === value);
        }
        else {
            state = nextStates.find(s => { var _a; return (_a = s.segment) === null || _a === void 0 ? void 0 : _a.equals(segment); });
        }
        if (state === void 0) {
            nextStates.push(state = new State(this, segment, value));
        }
        return state;
    }
    setEndpoint(endpoint) {
        if (this.endpoint !== null) {
            throw new Error(`Cannot add ambiguous route. The pattern ${endpoint.route.path} clashes with ${this.endpoint.route.path}`);
        }
        this.endpoint = endpoint;
        if (this.isOptional) {
            this.prevState.setEndpoint(endpoint);
            if (this.prevState.isSeparator && this.prevState.prevState !== null) {
                this.prevState.prevState.setEndpoint(endpoint);
            }
        }
    }
    isMatch(ch) {
        const segment = this.segment;
        switch (segment === null || segment === void 0 ? void 0 : segment.kind) {
            case 2 /* dynamic */:
                return !this.value.includes(ch);
            case 1 /* star */:
                return true;
            case 3 /* static */:
            case undefined:
                // segment separators (slashes) are non-segments. We could say return ch === '/' as well, technically.
                return this.value.includes(ch);
        }
    }
}
function isNotEmpty(segment) {
    return segment.length > 0;
}
function parsePath(path) {
    // Normalize leading, trailing and double slashes by ignoring empty segments
    return path.split('/').filter(isNotEmpty);
}
var SegmentKind;
(function (SegmentKind) {
    SegmentKind[SegmentKind["star"] = 1] = "star";
    SegmentKind[SegmentKind["dynamic"] = 2] = "dynamic";
    SegmentKind[SegmentKind["static"] = 3] = "static";
})(SegmentKind || (SegmentKind = {}));
class StaticSegment {
    constructor(value, caseSensitive) {
        this.value = value;
        this.caseSensitive = caseSensitive;
    }
    get kind() { return 3 /* static */; }
    appendTo(state) {
        const { value, value: { length } } = this;
        if (this.caseSensitive) {
            for (let i = 0; i < length; ++i) {
                state = state.append(
                /* segment */ this, 
                /* value   */ value.charAt(i));
            }
        }
        else {
            for (let i = 0; i < length; ++i) {
                const ch = value.charAt(i);
                state = state.append(
                /* segment */ this, 
                /* value   */ ch.toUpperCase() + ch.toLowerCase());
            }
        }
        return state;
    }
    equals(b) {
        return (b.kind === 3 /* static */ &&
            b.caseSensitive === this.caseSensitive &&
            b.value === this.value);
    }
}
class DynamicSegment {
    constructor(name, optional) {
        this.name = name;
        this.optional = optional;
    }
    get kind() { return 2 /* dynamic */; }
    appendTo(state) {
        state = state.append(
        /* segment */ this, 
        /* value   */ '/');
        return state;
    }
    equals(b) {
        return (b.kind === 2 /* dynamic */ &&
            b.optional === this.optional &&
            b.name === this.name);
    }
}
class StarSegment {
    constructor(name) {
        this.name = name;
    }
    get kind() { return 1 /* star */; }
    appendTo(state) {
        state = state.append(
        /* segment */ this, 
        /* value   */ '');
        return state;
    }
    equals(b) {
        return (b.kind === 1 /* star */ &&
            b.name === this.name);
    }
}
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./node_modules/@aurelia/router/dist/esnext/browser-navigator.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@aurelia/router/dist/esnext/browser-navigator.js ***!
  \***********************************************************************/
/*! exports provided: BrowserNavigator */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BrowserNavigator", function() { return BrowserNavigator; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aurelia/runtime */ "./node_modules/@aurelia/runtime/dist/esnext/index.js");
/* harmony import */ var _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @aurelia/runtime-html */ "./node_modules/@aurelia/runtime-html/dist/esnext/index.js");
/* harmony import */ var _queue__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./queue */ "./node_modules/@aurelia/router/dist/esnext/queue.js");





let BrowserNavigator = class BrowserNavigator {
    constructor(scheduler, dom) {
        this.scheduler = scheduler;
        this.allowedExecutionCostWithinTick = 2; // Limit no of executed actions within the same RAF (due to browser limitation)
        this.isActive = false;
        this.options = {
            useUrlFragmentHash: true,
            callback: () => { return; },
        };
        this.forwardedState = {};
        this.handlePopstate = (ev) => {
            return this.enqueue(this, 'popstate', [ev]);
        };
        this.processCalls = (qCall) => {
            const call = qCall;
            if (call.target === this && call.methodName !== 'forwardState') {
                call.parameters.push(this.forwardedState.resolve);
                this.forwardedState.resolve = null;
                // Should we suppress this popstate event?
                if (call.methodName === 'popstate' && this.forwardedState.suppressPopstate) {
                    call.parameters.push(true);
                    this.forwardedState.suppressPopstate = false;
                }
            }
            // eslint-disable-next-line @typescript-eslint/ban-types
            const method = call.target[call.methodName];
            _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Reporter"].write(10000, 'DEQUEUE', call.methodName, call.parameters);
            if (method) {
                method.apply(call.target, call.parameters);
            }
            qCall.resolve();
        };
        this.window = dom.window;
        this.history = dom.window.history;
        this.location = dom.window.location;
        this.pendingCalls = new _queue__WEBPACK_IMPORTED_MODULE_4__["Queue"](this.processCalls);
    }
    activate(options) {
        if (this.isActive) {
            throw new Error('Browser navigation has already been activated');
        }
        this.isActive = true;
        this.options.callback = options.callback;
        if (options.useUrlFragmentHash != void 0) {
            this.options.useUrlFragmentHash = options.useUrlFragmentHash;
        }
        this.pendingCalls.activate({ scheduler: this.scheduler, allowedExecutionCostWithinTick: this.allowedExecutionCostWithinTick });
        this.window.addEventListener('popstate', this.handlePopstate);
    }
    deactivate() {
        if (!this.isActive) {
            throw new Error('Browser navigation has not been activated');
        }
        this.window.removeEventListener('popstate', this.handlePopstate);
        this.pendingCalls.deactivate();
        this.options = { useUrlFragmentHash: true, callback: () => { return; } };
        this.isActive = false;
    }
    get length() {
        return this.history.length;
    }
    get state() {
        return this.history.state;
    }
    get viewerState() {
        const { pathname, search, hash } = this.location;
        return {
            path: pathname,
            query: search,
            hash,
            instruction: this.options.useUrlFragmentHash ? hash.slice(1) : pathname,
        };
    }
    go(delta, suppressPopstate = false) {
        return this.enqueue(this.history, 'go', [delta], suppressPopstate);
    }
    pushNavigatorState(state) {
        const { title, path } = state.currentEntry;
        const fragment = this.options.useUrlFragmentHash ? '#/' : '';
        return this.enqueue(this.history, 'pushState', [state, title, `${fragment}${path}`]);
    }
    replaceNavigatorState(state) {
        const { title, path } = state.currentEntry;
        const fragment = this.options.useUrlFragmentHash ? '#/' : '';
        return this.enqueue(this.history, 'replaceState', [state, title, `${fragment}${path}`]);
    }
    popNavigatorState() {
        return this.enqueue(this, 'popState', []);
    }
    popstate(ev, resolve, suppressPopstate = false) {
        if (!suppressPopstate) {
            this.options.callback({
                ...this.viewerState,
                ...{
                    event: ev,
                    state: this.history.state,
                },
            });
        }
        if (resolve !== null && resolve !== void 0) {
            resolve();
        }
    }
    async popState(resolve) {
        await this.go(-1, true);
        const state = this.history.state;
        // TODO: Fix browser forward bug after pop on first entry
        if (state && state.navigationEntry && !state.navigationEntry.firstEntry) {
            await this.go(-1, true);
            return this.pushNavigatorState(state);
        }
        resolve();
    }
    forwardState(state) {
        this.forwardedState = state;
    }
    // Everything that wants to await a browser event should pass suppressPopstate param
    // Events NOT resulting in popstate events should NOT pass suppressPopstate param
    enqueue(target, methodName, parameters, suppressPopstate) {
        const calls = [];
        const costs = [];
        const promises = [];
        if (suppressPopstate !== undefined) {
            // Due to (browser) events not having a promise, we create and propagate one
            let resolve = null;
            promises.push(new Promise(_resolve => {
                resolve = _resolve;
            }));
            calls.push({
                target: this,
                methodName: 'forwardState',
                parameters: [
                    {
                        resolve,
                        suppressPopstate,
                    }
                ],
            });
            costs.push(0);
        }
        calls.push({
            target: target,
            methodName: methodName,
            parameters: parameters,
        });
        costs.push(1);
        // The first promise is the relevant one since it's either a) the propagated one (in
        // case of a browser action), or b) the only one since there's only one call
        promises.push(this.pendingCalls.enqueue(calls, costs)[0]);
        return promises[0];
    }
};
BrowserNavigator = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(0, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["IScheduler"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(1, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["IDOM"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object, _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_3__["HTMLDOM"]])
], BrowserNavigator);

//# sourceMappingURL=browser-navigator.js.map

/***/ }),

/***/ "./node_modules/@aurelia/router/dist/esnext/browser-viewer-store.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@aurelia/router/dist/esnext/browser-viewer-store.js ***!
  \**************************************************************************/
/*! exports provided: BrowserViewerStore */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BrowserViewerStore", function() { return BrowserViewerStore; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/runtime */ "./node_modules/@aurelia/runtime/dist/esnext/index.js");
/* harmony import */ var _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aurelia/runtime-html */ "./node_modules/@aurelia/runtime-html/dist/esnext/index.js");
/* harmony import */ var _task_queue__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./task-queue */ "./node_modules/@aurelia/router/dist/esnext/task-queue.js");




let BrowserViewerStore = class BrowserViewerStore {
    constructor(scheduler, dom) {
        this.scheduler = scheduler;
        this.allowedExecutionCostWithinTick = 2; // Limit no of executed actions within the same RAF (due to browser limitation)
        this.isActive = false;
        this.options = {
            useUrlFragmentHash: true,
            callback: () => { return; },
        };
        this.forwardedState = { eventTask: null, suppressPopstate: false };
        this.handlePopstate = (event) => {
            const { eventTask, suppressPopstate } = this.forwardedState;
            this.forwardedState = { eventTask: null, suppressPopstate: false };
            return this.pendingCalls.enqueue(async (task) => {
                const store = this;
                const ev = event;
                const evTask = eventTask;
                const suppressPopstateEvent = suppressPopstate;
                await store.popstate(ev, evTask, suppressPopstateEvent);
                task.resolve();
            }, 1).wait();
        };
        this.window = dom.window;
        this.history = dom.window.history;
        this.location = dom.window.location;
        this.pendingCalls = new _task_queue__WEBPACK_IMPORTED_MODULE_3__["TaskQueue"]();
    }
    activate(options) {
        if (this.isActive) {
            throw new Error('Browser navigation has already been activated');
        }
        this.isActive = true;
        this.options.callback = options.callback;
        if (options.useUrlFragmentHash != void 0) {
            this.options.useUrlFragmentHash = options.useUrlFragmentHash;
        }
        this.pendingCalls.activate({ scheduler: this.scheduler, allowedExecutionCostWithinTick: this.allowedExecutionCostWithinTick });
        this.window.addEventListener('popstate', this.handlePopstate);
    }
    deactivate() {
        if (!this.isActive) {
            throw new Error('Browser navigation has not been activated');
        }
        this.window.removeEventListener('popstate', this.handlePopstate);
        this.pendingCalls.deactivate();
        this.options = { useUrlFragmentHash: true, callback: () => { return; } };
        this.isActive = false;
    }
    get length() {
        return this.history.length;
    }
    get state() {
        return this.history.state;
    }
    get viewerState() {
        const { pathname, search, hash } = this.location;
        return {
            path: pathname,
            query: search,
            hash,
            instruction: this.options.useUrlFragmentHash ? hash.slice(1) : pathname,
        };
    }
    go(delta, suppressPopstateEvent = false) {
        const doneTask = this.pendingCalls.createQueueTask((task) => task.resolve(), 1);
        this.pendingCalls.enqueue([
            (task) => {
                const store = this;
                const eventTask = doneTask;
                const suppressPopstate = suppressPopstateEvent;
                store.forwardState({ eventTask, suppressPopstate });
                task.resolve();
            },
            (task) => {
                const history = this.history;
                const steps = delta;
                history.go(steps);
                task.resolve();
            },
        ], [0, 1]);
        return doneTask.wait();
    }
    pushNavigatorState(state) {
        const { title, path } = state.currentEntry;
        const fragment = this.options.useUrlFragmentHash ? '#/' : '';
        return this.pendingCalls.enqueue((task) => {
            const history = this.history;
            const data = state;
            const titleOrEmpty = title || '';
            const url = `${fragment}${path}`;
            history.pushState(data, titleOrEmpty, url);
            task.resolve();
        }, 1).wait();
    }
    replaceNavigatorState(state) {
        const { title, path } = state.currentEntry;
        const fragment = this.options.useUrlFragmentHash ? '#/' : '';
        return this.pendingCalls.enqueue((task) => {
            const history = this.history;
            const data = state;
            const titleOrEmpty = title || '';
            const url = `${fragment}${path}`;
            history.replaceState(data, titleOrEmpty, url);
            task.resolve();
        }, 1).wait();
    }
    popNavigatorState() {
        const doneTask = this.pendingCalls.createQueueTask((task) => task.resolve(), 1);
        this.pendingCalls.enqueue(async (task) => {
            const store = this;
            const eventTask = doneTask;
            await store.popState(eventTask);
            task.resolve();
        }, 1);
        return doneTask.wait();
    }
    async popState(doneTask) {
        await this.go(-1, true);
        const state = this.history.state;
        // TODO: Fix browser forward bug after pop on first entry
        if (state && state.navigationEntry && !state.navigationEntry.firstEntry) {
            await this.go(-1, true);
            await this.pushNavigatorState(state);
        }
        await doneTask.execute();
    }
    forwardState(state) {
        this.forwardedState = state;
    }
    async popstate(ev, eventTask, suppressPopstate = false) {
        if (!suppressPopstate) {
            this.options.callback({
                ...this.viewerState,
                ...{
                    event: ev,
                    state: this.history.state,
                },
            });
        }
        if (eventTask !== null) {
            await eventTask.execute();
        }
    }
};
BrowserViewerStore = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(0, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["IScheduler"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(1, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["IDOM"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object, _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_2__["HTMLDOM"]])
], BrowserViewerStore);

//# sourceMappingURL=browser-viewer-store.js.map

/***/ }),

/***/ "./node_modules/@aurelia/router/dist/esnext/collection.js":
/*!****************************************************************!*\
  !*** ./node_modules/@aurelia/router/dist/esnext/collection.js ***!
  \****************************************************************/
/*! exports provided: Collection */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Collection", function() { return Collection; });
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils */ "./node_modules/@aurelia/router/dist/esnext/utils.js");

class Collection extends Array {
    constructor() {
        super(...arguments);
        this.currentIndex = -1;
    }
    next() {
        if (this.length > this.currentIndex + 1) {
            return this[++this.currentIndex];
        }
        else {
            this.currentIndex = -1;
            return null;
        }
    }
    removeCurrent() {
        this.splice(this.currentIndex--, 1);
    }
    remove(instruction) {
        Object(_utils__WEBPACK_IMPORTED_MODULE_0__["arrayRemove"])(this, value => value === instruction);
    }
}
//# sourceMappingURL=collection.js.map

/***/ }),

/***/ "./node_modules/@aurelia/router/dist/esnext/configuration.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@aurelia/router/dist/esnext/configuration.js ***!
  \*******************************************************************/
/*! exports provided: RouterRegistration, DefaultComponents, ViewportCustomElement, ViewportScopeCustomElement, NavCustomElement, GotoCustomAttribute, HrefCustomAttribute, ViewportCustomElementRegistration, ViewportScopeCustomElementRegistration, NavCustomElementRegistration, GotoCustomAttributeRegistration, HrefCustomAttributeRegistration, DefaultResources, RouterConfiguration */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RouterRegistration", function() { return RouterRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DefaultComponents", function() { return DefaultComponents; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ViewportCustomElementRegistration", function() { return ViewportCustomElementRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ViewportScopeCustomElementRegistration", function() { return ViewportScopeCustomElementRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NavCustomElementRegistration", function() { return NavCustomElementRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GotoCustomAttributeRegistration", function() { return GotoCustomAttributeRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HrefCustomAttributeRegistration", function() { return HrefCustomAttributeRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DefaultResources", function() { return DefaultResources; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RouterConfiguration", function() { return RouterConfiguration; });
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/runtime */ "./node_modules/@aurelia/runtime/dist/esnext/index.js");
/* harmony import */ var _resources_nav__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./resources/nav */ "./node_modules/@aurelia/router/dist/esnext/resources/nav.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "NavCustomElement", function() { return _resources_nav__WEBPACK_IMPORTED_MODULE_2__["NavCustomElement"]; });

/* harmony import */ var _resources_viewport__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./resources/viewport */ "./node_modules/@aurelia/router/dist/esnext/resources/viewport.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ViewportCustomElement", function() { return _resources_viewport__WEBPACK_IMPORTED_MODULE_3__["ViewportCustomElement"]; });

/* harmony import */ var _resources_viewport_scope__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./resources/viewport-scope */ "./node_modules/@aurelia/router/dist/esnext/resources/viewport-scope.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ViewportScopeCustomElement", function() { return _resources_viewport_scope__WEBPACK_IMPORTED_MODULE_4__["ViewportScopeCustomElement"]; });

/* harmony import */ var _resources_goto__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./resources/goto */ "./node_modules/@aurelia/router/dist/esnext/resources/goto.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "GotoCustomAttribute", function() { return _resources_goto__WEBPACK_IMPORTED_MODULE_5__["GotoCustomAttribute"]; });

/* harmony import */ var _resources_href__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./resources/href */ "./node_modules/@aurelia/router/dist/esnext/resources/href.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "HrefCustomAttribute", function() { return _resources_href__WEBPACK_IMPORTED_MODULE_6__["HrefCustomAttribute"]; });

/* harmony import */ var _router__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./router */ "./node_modules/@aurelia/router/dist/esnext/router.js");








const RouterRegistration = _router__WEBPACK_IMPORTED_MODULE_7__["IRouter"];
/**
 * Default runtime/environment-agnostic implementations for the following interfaces:
 * - `IRouter`
 */
const DefaultComponents = [
    RouterRegistration,
];

const ViewportCustomElementRegistration = _resources_viewport__WEBPACK_IMPORTED_MODULE_3__["ViewportCustomElement"];
const ViewportScopeCustomElementRegistration = _resources_viewport_scope__WEBPACK_IMPORTED_MODULE_4__["ViewportScopeCustomElement"];
const NavCustomElementRegistration = _resources_nav__WEBPACK_IMPORTED_MODULE_2__["NavCustomElement"];
const GotoCustomAttributeRegistration = _resources_goto__WEBPACK_IMPORTED_MODULE_5__["GotoCustomAttribute"];
const HrefCustomAttributeRegistration = _resources_href__WEBPACK_IMPORTED_MODULE_6__["HrefCustomAttribute"];
/**
 * Default router resources:
 * - Custom Elements: `au-viewport`, `au-nav`
 * - Custom Attributes: `goto`, `href`
 */
const DefaultResources = [
    _resources_viewport__WEBPACK_IMPORTED_MODULE_3__["ViewportCustomElement"],
    _resources_viewport_scope__WEBPACK_IMPORTED_MODULE_4__["ViewportScopeCustomElement"],
    _resources_nav__WEBPACK_IMPORTED_MODULE_2__["NavCustomElement"],
    _resources_goto__WEBPACK_IMPORTED_MODULE_5__["GotoCustomAttribute"],
    _resources_href__WEBPACK_IMPORTED_MODULE_6__["HrefCustomAttribute"],
];
let configurationOptions = {};
let configurationCall = (router) => {
    router.activate(configurationOptions);
};
/**
 * A DI configuration object containing router resource registrations.
 */
const routerConfiguration = {
    /**
     * Apply this configuration to the provided container.
     */
    register(container) {
        return container.register(...DefaultComponents, ...DefaultResources, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["StartTask"].with(_router__WEBPACK_IMPORTED_MODULE_7__["IRouter"]).beforeBind().call(configurationCall), _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["StartTask"].with(_router__WEBPACK_IMPORTED_MODULE_7__["IRouter"]).beforeAttach().call(router => router.loadUrl()));
    },
    /**
     * Create a new container with this configuration applied to it.
     */
    createContainer() {
        return this.register(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["DI"].createContainer());
    }
};
const RouterConfiguration = {
    /**
     * Make it possible to specify options to Router activation.
     * Parameter is either a config object that's passed to Router's activate
     * or a config function that's called instead of Router's activate.
     */
    customize(config) {
        if (config === undefined) {
            configurationOptions = {};
            configurationCall = (router) => {
                router.activate(configurationOptions);
            };
        }
        else if (config instanceof Function) {
            configurationCall = config;
        }
        else {
            configurationOptions = config;
        }
        return { ...routerConfiguration };
    },
    ...routerConfiguration,
};
//# sourceMappingURL=configuration.js.map

/***/ }),

/***/ "./node_modules/@aurelia/router/dist/esnext/found-route.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@aurelia/router/dist/esnext/found-route.js ***!
  \*****************************************************************/
/*! exports provided: FoundRoute */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FoundRoute", function() { return FoundRoute; });
class FoundRoute {
    constructor(match = null, matching = '', instructions = [], remaining = '') {
        this.match = match;
        this.matching = matching;
        this.instructions = instructions;
        this.remaining = remaining;
    }
    get foundConfiguration() {
        return this.match !== null;
    }
    get foundInstructions() {
        return this.instructions.length > 0;
    }
    get hasRemaining() {
        return this.remaining !== null && this.remaining.length > 0;
    }
}
//# sourceMappingURL=found-route.js.map

/***/ }),

/***/ "./node_modules/@aurelia/router/dist/esnext/hook-manager.js":
/*!******************************************************************!*\
  !*** ./node_modules/@aurelia/router/dist/esnext/hook-manager.js ***!
  \******************************************************************/
/*! exports provided: HookTypes, HookManager */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HookTypes", function() { return HookTypes; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HookManager", function() { return HookManager; });
/* harmony import */ var _hook__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./hook */ "./node_modules/@aurelia/router/dist/esnext/hook.js");

var HookTypes;
(function (HookTypes) {
    HookTypes["BeforeNavigation"] = "beforeNavigation";
    HookTypes["TransformFromUrl"] = "transformFromUrl";
    HookTypes["TransformToUrl"] = "transformToUrl";
})(HookTypes || (HookTypes = {}));
class HookManager {
    constructor() {
        this.hooks = {
            beforeNavigation: [],
            transformFromUrl: [],
            transformToUrl: [],
        };
        this.lastIdentity = 0;
    }
    addHook(hookFunction, options) {
        const hook = new _hook__WEBPACK_IMPORTED_MODULE_0__["Hook"](hookFunction, options || {}, ++this.lastIdentity);
        this.hooks[hook.type].push(hook);
        return this.lastIdentity;
    }
    removeHook(id) {
        for (const type in this.hooks) {
            if (Object.prototype.hasOwnProperty.call(this.hooks, type)) {
                const index = this.hooks[type].findIndex(hook => hook.id === id);
                if (index >= 0) {
                    this.hooks[type].splice(index, 1);
                }
            }
        }
    }
    invokeBeforeNavigation(viewportInstructions, navigationInstruction) {
        return this.invoke("beforeNavigation" /* BeforeNavigation */, navigationInstruction, viewportInstructions);
    }
    invokeTransformFromUrl(url, navigationInstruction) {
        return this.invoke("transformFromUrl" /* TransformFromUrl */, navigationInstruction, url);
    }
    invokeTransformToUrl(state, navigationInstruction) {
        return this.invoke("transformToUrl" /* TransformToUrl */, navigationInstruction, state);
    }
    async invoke(type, navigationInstruction, arg) {
        for (const hook of this.hooks[type]) {
            if (!hook.wantsMatch || hook.matches(arg)) {
                const outcome = await hook.invoke(navigationInstruction, arg);
                if (typeof outcome === 'boolean') {
                    if (!outcome) {
                        return false;
                    }
                }
                else {
                    arg = outcome;
                }
            }
        }
        return arg;
    }
}
//# sourceMappingURL=hook-manager.js.map

/***/ }),

/***/ "./node_modules/@aurelia/router/dist/esnext/hook.js":
/*!**********************************************************!*\
  !*** ./node_modules/@aurelia/router/dist/esnext/hook.js ***!
  \**********************************************************/
/*! exports provided: Hook */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Hook", function() { return Hook; });
/* harmony import */ var _type_resolvers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./type-resolvers */ "./node_modules/@aurelia/router/dist/esnext/type-resolvers.js");
/* harmony import */ var _viewport_instruction__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./viewport-instruction */ "./node_modules/@aurelia/router/dist/esnext/viewport-instruction.js");


class Hook {
    constructor(hook, options, id) {
        this.hook = hook;
        this.id = id;
        this.type = "beforeNavigation" /* BeforeNavigation */;
        this.includeTargets = [];
        this.excludeTargets = [];
        if (options.type !== void 0) {
            this.type = options.type;
        }
        for (const target of options.include || []) {
            this.includeTargets.push(new Target(target));
        }
        for (const target of options.exclude || []) {
            this.excludeTargets.push(new Target(target));
        }
    }
    get wantsMatch() {
        return this.includeTargets.length > 0 || this.excludeTargets.length > 0;
    }
    matches(viewportInstructions) {
        if (this.includeTargets.length && !this.includeTargets.some(target => target.matches(viewportInstructions))) {
            return false;
        }
        if (this.excludeTargets.length && this.excludeTargets.some(target => target.matches(viewportInstructions))) {
            return false;
        }
        return true;
    }
    invoke(navigationInstruction, arg) {
        // TODO: Fix the type here
        return this.hook(arg, navigationInstruction);
    }
}
class Target {
    constructor(target) {
        this.componentType = null;
        this.componentName = null;
        this.viewport = null;
        this.viewportName = null;
        if (typeof target === 'string') {
            this.componentName = target;
        }
        else if (_type_resolvers__WEBPACK_IMPORTED_MODULE_0__["ComponentAppellationResolver"].isType(target)) {
            this.componentType = target;
            this.componentName = _type_resolvers__WEBPACK_IMPORTED_MODULE_0__["ComponentAppellationResolver"].getName(target);
        }
        else {
            const cvTarget = target;
            if (cvTarget.component) {
                this.componentType = _type_resolvers__WEBPACK_IMPORTED_MODULE_0__["ComponentAppellationResolver"].isType(cvTarget.component)
                    ? _type_resolvers__WEBPACK_IMPORTED_MODULE_0__["ComponentAppellationResolver"].getType(cvTarget.component)
                    : null;
                this.componentName = _type_resolvers__WEBPACK_IMPORTED_MODULE_0__["ComponentAppellationResolver"].getName(cvTarget.component);
            }
            if (cvTarget.viewport) {
                this.viewport = _type_resolvers__WEBPACK_IMPORTED_MODULE_0__["ViewportHandleResolver"].isInstance(cvTarget.viewport) ? cvTarget.viewport : null;
                this.viewportName = _type_resolvers__WEBPACK_IMPORTED_MODULE_0__["ViewportHandleResolver"].getName(cvTarget.viewport);
            }
        }
    }
    matches(viewportInstructions) {
        const instructions = viewportInstructions.slice();
        if (!instructions.length) {
            instructions.push(new _viewport_instruction__WEBPACK_IMPORTED_MODULE_1__["ViewportInstruction"](''));
        }
        for (const instruction of instructions) {
            if ((this.componentName !== null && this.componentName === instruction.componentName) ||
                (this.componentType !== null && this.componentType === instruction.componentType) ||
                (this.viewportName !== null && this.viewportName === instruction.viewportName) ||
                (this.viewport !== null && this.viewport === instruction.viewport)) {
                return true;
            }
        }
        return false;
    }
}
//# sourceMappingURL=hook.js.map

/***/ }),

/***/ "./node_modules/@aurelia/router/dist/esnext/index.js":
/*!***********************************************************!*\
  !*** ./node_modules/@aurelia/router/dist/esnext/index.js ***!
  \***********************************************************/
/*! exports provided: BrowserNavigator, LinkHandler, InstructionResolver, ReentryBehavior, lifecycleLogger, LifecycleClass, HookManager, HookTypes, Nav, NavRoute, Navigator, Queue, RouteRecognizer, ConfigurableRoute, RecognizedRoute, Endpoint, IRouter, Router, Viewport, ContentStatus, ViewportContent, ViewportInstruction, RouterConfiguration, RouterRegistration, DefaultComponents, DefaultResources, ViewportCustomElement, ViewportCustomElementRegistration, NavCustomElement, NavCustomElementRegistration, GotoCustomAttribute, GotoCustomAttributeRegistration, HrefCustomAttribute, HrefCustomAttributeRegistration */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _browser_navigator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./browser-navigator */ "./node_modules/@aurelia/router/dist/esnext/browser-navigator.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BrowserNavigator", function() { return _browser_navigator__WEBPACK_IMPORTED_MODULE_0__["BrowserNavigator"]; });

/* harmony import */ var _link_handler__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./link-handler */ "./node_modules/@aurelia/router/dist/esnext/link-handler.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LinkHandler", function() { return _link_handler__WEBPACK_IMPORTED_MODULE_1__["LinkHandler"]; });

/* harmony import */ var _instruction_resolver__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./instruction-resolver */ "./node_modules/@aurelia/router/dist/esnext/instruction-resolver.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "InstructionResolver", function() { return _instruction_resolver__WEBPACK_IMPORTED_MODULE_2__["InstructionResolver"]; });

/* harmony import */ var _interfaces__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./interfaces */ "./node_modules/@aurelia/router/dist/esnext/interfaces.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ReentryBehavior", function() { return _interfaces__WEBPACK_IMPORTED_MODULE_3__["ReentryBehavior"]; });

/* harmony import */ var _lifecycle_logger__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./lifecycle-logger */ "./node_modules/@aurelia/router/dist/esnext/lifecycle-logger.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "lifecycleLogger", function() { return _lifecycle_logger__WEBPACK_IMPORTED_MODULE_4__["lifecycleLogger"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LifecycleClass", function() { return _lifecycle_logger__WEBPACK_IMPORTED_MODULE_4__["LifecycleClass"]; });

/* harmony import */ var _hook_manager__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./hook-manager */ "./node_modules/@aurelia/router/dist/esnext/hook-manager.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "HookManager", function() { return _hook_manager__WEBPACK_IMPORTED_MODULE_5__["HookManager"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "HookTypes", function() { return _hook_manager__WEBPACK_IMPORTED_MODULE_5__["HookTypes"]; });

/* harmony import */ var _nav__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./nav */ "./node_modules/@aurelia/router/dist/esnext/nav.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Nav", function() { return _nav__WEBPACK_IMPORTED_MODULE_6__["Nav"]; });

/* harmony import */ var _nav_route__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./nav-route */ "./node_modules/@aurelia/router/dist/esnext/nav-route.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "NavRoute", function() { return _nav_route__WEBPACK_IMPORTED_MODULE_7__["NavRoute"]; });

/* harmony import */ var _navigator__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./navigator */ "./node_modules/@aurelia/router/dist/esnext/navigator.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Navigator", function() { return _navigator__WEBPACK_IMPORTED_MODULE_8__["Navigator"]; });

/* harmony import */ var _queue__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./queue */ "./node_modules/@aurelia/router/dist/esnext/queue.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Queue", function() { return _queue__WEBPACK_IMPORTED_MODULE_9__["Queue"]; });

/* harmony import */ var _route_recognizer__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./route-recognizer */ "./node_modules/@aurelia/router/dist/esnext/route-recognizer.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RouteRecognizer", function() { return _route_recognizer__WEBPACK_IMPORTED_MODULE_10__["RouteRecognizer"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConfigurableRoute", function() { return _route_recognizer__WEBPACK_IMPORTED_MODULE_10__["ConfigurableRoute"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RecognizedRoute", function() { return _route_recognizer__WEBPACK_IMPORTED_MODULE_10__["RecognizedRoute"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Endpoint", function() { return _route_recognizer__WEBPACK_IMPORTED_MODULE_10__["Endpoint"]; });

/* harmony import */ var _router__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./router */ "./node_modules/@aurelia/router/dist/esnext/router.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IRouter", function() { return _router__WEBPACK_IMPORTED_MODULE_11__["IRouter"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Router", function() { return _router__WEBPACK_IMPORTED_MODULE_11__["Router"]; });

/* harmony import */ var _viewport__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./viewport */ "./node_modules/@aurelia/router/dist/esnext/viewport.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Viewport", function() { return _viewport__WEBPACK_IMPORTED_MODULE_12__["Viewport"]; });

/* harmony import */ var _viewport_content__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./viewport-content */ "./node_modules/@aurelia/router/dist/esnext/viewport-content.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ContentStatus", function() { return _viewport_content__WEBPACK_IMPORTED_MODULE_13__["ContentStatus"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ViewportContent", function() { return _viewport_content__WEBPACK_IMPORTED_MODULE_13__["ViewportContent"]; });

/* harmony import */ var _viewport_instruction__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./viewport-instruction */ "./node_modules/@aurelia/router/dist/esnext/viewport-instruction.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ViewportInstruction", function() { return _viewport_instruction__WEBPACK_IMPORTED_MODULE_14__["ViewportInstruction"]; });

/* harmony import */ var _configuration__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./configuration */ "./node_modules/@aurelia/router/dist/esnext/configuration.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RouterConfiguration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_15__["RouterConfiguration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RouterRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_15__["RouterRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DefaultComponents", function() { return _configuration__WEBPACK_IMPORTED_MODULE_15__["DefaultComponents"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DefaultResources", function() { return _configuration__WEBPACK_IMPORTED_MODULE_15__["DefaultResources"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ViewportCustomElement", function() { return _configuration__WEBPACK_IMPORTED_MODULE_15__["ViewportCustomElement"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ViewportCustomElementRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_15__["ViewportCustomElementRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "NavCustomElement", function() { return _configuration__WEBPACK_IMPORTED_MODULE_15__["NavCustomElement"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "NavCustomElementRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_15__["NavCustomElementRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "GotoCustomAttribute", function() { return _configuration__WEBPACK_IMPORTED_MODULE_15__["GotoCustomAttribute"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "GotoCustomAttributeRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_15__["GotoCustomAttributeRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "HrefCustomAttribute", function() { return _configuration__WEBPACK_IMPORTED_MODULE_15__["HrefCustomAttribute"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "HrefCustomAttributeRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_15__["HrefCustomAttributeRegistration"]; });

















//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./node_modules/@aurelia/router/dist/esnext/instruction-resolver.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@aurelia/router/dist/esnext/instruction-resolver.js ***!
  \**************************************************************************/
/*! exports provided: InstructionResolver */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "InstructionResolver", function() { return InstructionResolver; });
/* harmony import */ var _viewport_instruction__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./viewport-instruction */ "./node_modules/@aurelia/router/dist/esnext/viewport-instruction.js");

class InstructionResolver {
    constructor() {
        this.separators = {
            viewport: '@',
            sibling: '+',
            scope: '/',
            scopeStart: '(',
            scopeEnd: ')',
            noScope: '!',
            parameters: '(',
            parametersEnd: ')',
            parameterSeparator: ',',
            parameterKeySeparator: '=',
            parameter: '&',
            add: '+',
            clear: '-',
            action: '.',
        };
    }
    activate(options) {
        options = options || {};
        this.separators = { ...this.separators, ...options.separators };
    }
    get clearViewportInstruction() {
        return this.separators.clear;
    }
    get addViewportInstruction() {
        return this.separators.add;
    }
    isClearViewportInstruction(instruction) {
        return instruction instanceof _viewport_instruction__WEBPACK_IMPORTED_MODULE_0__["ViewportInstruction"]
            ? instruction.componentName === this.clearViewportInstruction && !!instruction.viewportName
            : instruction.startsWith(this.clearViewportInstruction) && instruction !== this.clearViewportInstruction;
    }
    isAddViewportInstruction(instruction) {
        return instruction instanceof _viewport_instruction__WEBPACK_IMPORTED_MODULE_0__["ViewportInstruction"]
            ? instruction.componentName === this.addViewportInstruction
            : (instruction === this.addViewportInstruction
                || instruction.startsWith(`${this.separators.add}${this.separators.viewport}`));
    }
    isClearViewportScopeInstruction(instruction) {
        return instruction instanceof _viewport_instruction__WEBPACK_IMPORTED_MODULE_0__["ViewportInstruction"]
            ? instruction.componentName === this.clearViewportInstruction && !!instruction.viewportScope
            : instruction.startsWith(this.clearViewportInstruction) && instruction !== this.clearViewportInstruction;
    }
    isClearAllViewportsInstruction(instruction) {
        return instruction instanceof _viewport_instruction__WEBPACK_IMPORTED_MODULE_0__["ViewportInstruction"]
            ? instruction.componentName === this.clearViewportInstruction && !instruction.viewportName
            : instruction === this.clearViewportInstruction;
    }
    isAddAllViewportsInstruction(instruction) {
        return instruction instanceof _viewport_instruction__WEBPACK_IMPORTED_MODULE_0__["ViewportInstruction"]
            ? instruction.componentName === this.addViewportInstruction && !instruction.viewportName
            : instruction === this.addViewportInstruction;
    }
    createViewportInstruction(component, viewport, parameters, ownsScope = true, nextScopeInstructions = null) {
        const instruction = new _viewport_instruction__WEBPACK_IMPORTED_MODULE_0__["ViewportInstruction"](component, viewport, parameters, ownsScope, nextScopeInstructions);
        instruction.setInstructionResolver(this);
        return instruction;
    }
    parseViewportInstructions(instructions) {
        const match = /^[./]+/.exec(instructions);
        let context = '';
        if (Array.isArray(match) && match.length > 0) {
            context = match[0];
            instructions = instructions.slice(context.length);
        }
        const parsedInstructions = this.parseViewportInstructionsWorker(instructions, true).instructions;
        for (const instruction of parsedInstructions) {
            instruction.context = context;
        }
        return parsedInstructions;
    }
    parseViewportInstruction(instruction) {
        const instructions = this.parseViewportInstructions(instruction);
        if (instructions.length) {
            return instructions[0];
        }
        return this.createViewportInstruction('');
    }
    stringifyViewportInstructions(instructions, excludeViewport = false, viewportContext = false) {
        return instructions
            .map(instruction => this.stringifyViewportInstruction(instruction, excludeViewport, viewportContext))
            .filter(instruction => instruction && instruction.length)
            .join(this.separators.sibling);
    }
    stringifyViewportInstruction(instruction, excludeViewport = false, viewportContext = false) {
        if (typeof instruction === 'string') {
            return this.stringifyAViewportInstruction(instruction, excludeViewport);
        }
        else {
            let excludeCurrentViewport = excludeViewport;
            let excludeCurrentComponent = false;
            if (viewportContext) {
                if (instruction.viewport && instruction.viewport.options.noLink) {
                    return '';
                }
                if (!instruction.needsViewportDescribed && instruction.viewport && !instruction.viewport.options.forceDescription) {
                    excludeCurrentViewport = true;
                }
                if (instruction.viewport && instruction.viewport.options.fallback === instruction.componentName) {
                    excludeCurrentComponent = true;
                }
                if (!instruction.needsViewportDescribed && instruction.viewportScope) {
                    excludeCurrentViewport = true;
                }
            }
            const route = instruction.route;
            const nextInstructions = instruction.nextScopeInstructions;
            let stringified = instruction.context;
            // It's a configured route
            if (route !== null) {
                // Already added as part of a configuration, skip to next scope
                if (route === '') {
                    return Array.isArray(nextInstructions)
                        ? this.stringifyViewportInstructions(nextInstructions, excludeViewport, viewportContext)
                        : '';
                }
                stringified += route.endsWith(this.separators.scope) ? route.slice(0, -this.separators.scope.length) : route;
            }
            else {
                stringified += this.stringifyAViewportInstruction(instruction, excludeCurrentViewport, excludeCurrentComponent);
            }
            if (Array.isArray(nextInstructions) && nextInstructions.length) {
                const nextStringified = this.stringifyViewportInstructions(nextInstructions, excludeViewport, viewportContext);
                if (nextStringified.length > 0) {
                    stringified += nextInstructions.length === 1 // TODO: This should really also check that the instructions have value
                        ? `${this.separators.scope}${nextStringified}`
                        : `${this.separators.scope}${this.separators.scopeStart}${nextStringified}${this.separators.scopeEnd}`;
                }
            }
            return stringified;
        }
    }
    stringifyScopedViewportInstructions(instructions) {
        if (!Array.isArray(instructions)) {
            return this.stringifyScopedViewportInstructions([instructions]);
        }
        return instructions.map((instruction) => this.stringifyViewportInstruction(instruction)).join(this.separators.scope);
    }
    encodeViewportInstructions(instructions) {
        return encodeURIComponent(this.stringifyViewportInstructions(instructions)).replace(/\(/g, '%28').replace(/\)/g, '%29');
    }
    decodeViewportInstructions(instructions) {
        return this.parseViewportInstructions(decodeURIComponent(instructions));
    }
    buildScopedLink(scopeContext, href) {
        if (scopeContext) {
            href = `/${scopeContext}${this.separators.scope}${href}`;
        }
        return href;
    }
    shouldClearViewports(path) {
        const clearViewports = (path === this.separators.clear || path.startsWith(this.separators.clear + this.separators.add));
        const newPath = path.startsWith(this.separators.clear) ? path.slice(2) : path;
        return { clearViewports, newPath };
    }
    mergeViewportInstructions(instructions) {
        const merged = [];
        for (let instruction of instructions) {
            if (typeof instruction === 'string') {
                instruction = this.parseViewportInstruction(instruction);
            }
            const index = merged.findIndex(merge => merge.sameViewport(instruction));
            if (index >= 0) {
                merged.splice(index, 1, instruction);
            }
            else {
                merged.push(instruction);
            }
        }
        return merged;
    }
    flattenViewportInstructions(instructions) {
        const flat = [];
        for (const instruction of instructions) {
            flat.push(instruction);
            if (instruction.nextScopeInstructions) {
                flat.push(...this.flattenViewportInstructions(instruction.nextScopeInstructions));
            }
        }
        return flat;
    }
    cloneViewportInstructions(instructions, keepInstances = false, context = false) {
        const clones = [];
        for (const instruction of instructions) {
            const clone = this.createViewportInstruction((keepInstances ? instruction.componentInstance : null) || instruction.componentType || instruction.componentName, keepInstances ? instruction.viewport || instruction.viewportName : instruction.viewportName, instruction.typedParameters !== null ? instruction.typedParameters : void 0);
            clone.needsViewportDescribed = instruction.needsViewportDescribed;
            clone.route = instruction.route;
            if (context) {
                clone.context = instruction.context;
            }
            clone.viewportScope = keepInstances ? instruction.viewportScope : null;
            clone.scope = keepInstances ? instruction.scope : null;
            if (instruction.nextScopeInstructions) {
                clone.nextScopeInstructions = this.cloneViewportInstructions(instruction.nextScopeInstructions, keepInstances, context);
            }
            clones.push(clone);
        }
        return clones;
    }
    // TODO: Deal with separators in data and complex types
    parseComponentParameters(parameters, uriComponent = false) {
        if (parameters === undefined || parameters === null || parameters.length === 0) {
            return [];
        }
        if (typeof parameters === 'string') {
            const list = [];
            const params = parameters.split(this.separators.parameterSeparator);
            for (const param of params) {
                let key;
                let value;
                [key, value] = param.split(this.separators.parameterKeySeparator);
                if (value === void 0) {
                    value = uriComponent ? decodeURIComponent(key) : key;
                    key = void 0;
                }
                else if (uriComponent) {
                    key = decodeURIComponent(key);
                    value = decodeURIComponent(value);
                }
                list.push({ key, value });
            }
            return list;
        }
        if (Array.isArray(parameters)) {
            return parameters.map(param => ({ key: void 0, value: param }));
        }
        const keys = Object.keys(parameters);
        keys.sort();
        return keys.map(key => ({ key, value: parameters[key] }));
    }
    // TODO: Deal with separators in data and complex types
    stringifyComponentParameters(parameters, uriComponent = false) {
        if (!Array.isArray(parameters) || parameters.length === 0) {
            return '';
        }
        const seps = this.separators;
        return parameters
            .map(param => {
            const key = param.key !== void 0 && uriComponent ? encodeURIComponent(param.key) : param.key;
            const value = uriComponent ? encodeURIComponent(param.value) : param.value;
            return key !== void 0 && key !== value ? key + seps.parameterKeySeparator + value : value;
        })
            .join(seps.parameterSeparator);
    }
    matchScope(instructions, scope) {
        const matching = [];
        matching.push(...instructions.filter(instruction => instruction.scope === scope));
        matching.push(...instructions
            .filter(instr => instr.scope !== scope)
            .map(instr => Array.isArray(instr.nextScopeInstructions) ? this.matchScope(instr.nextScopeInstructions, scope) : [])
            .flat());
        return matching;
    }
    matchChildren(instructions, active) {
        for (const instruction of instructions) {
            const matching = active.filter(instr => instr.sameComponent(instruction));
            if (matching.length === 0) {
                return false;
            }
            if (Array.isArray(instruction.nextScopeInstructions)
                && instruction.nextScopeInstructions.length > 0
                && this.matchChildren(instruction.nextScopeInstructions, matching.map(instr => Array.isArray(instr.nextScopeInstructions) ? instr.nextScopeInstructions : []).flat()) === false) {
                return false;
            }
        }
        return true;
    }
    parseViewportInstructionsWorker(instructions, grouped = false) {
        if (!instructions) {
            return { instructions: [], remaining: '' };
        }
        if (instructions.startsWith(this.separators.scopeStart)) {
            instructions = `${this.separators.scope}${instructions}`;
        }
        const viewportInstructions = [];
        let guard = 1000;
        while (instructions.length && guard) {
            guard--;
            if (instructions.startsWith(this.separators.scope)) {
                instructions = instructions.slice(this.separators.scope.length);
                const scopeStart = instructions.startsWith(this.separators.scopeStart);
                if (scopeStart) {
                    instructions = instructions.slice(this.separators.scopeStart.length);
                }
                const { instructions: found, remaining } = this.parseViewportInstructionsWorker(instructions, scopeStart);
                if (viewportInstructions.length) {
                    viewportInstructions[viewportInstructions.length - 1].nextScopeInstructions = found;
                }
                else {
                    viewportInstructions.push(...found);
                }
                instructions = remaining;
            }
            else if (instructions.startsWith(this.separators.scopeEnd)) {
                if (grouped) {
                    instructions = instructions.slice(this.separators.scopeEnd.length);
                }
                return { instructions: viewportInstructions, remaining: instructions };
            }
            else if (instructions.startsWith(this.separators.sibling) && !this.isAddViewportInstruction(instructions)) {
                if (!grouped) {
                    return { instructions: viewportInstructions, remaining: instructions };
                }
                instructions = instructions.slice(this.separators.sibling.length);
            }
            else {
                const { instruction: viewportInstruction, remaining } = this.parseAViewportInstruction(instructions);
                viewportInstructions.push(viewportInstruction);
                instructions = remaining;
            }
        }
        return { instructions: viewportInstructions, remaining: instructions };
    }
    findNextToken(instruction, tokens) {
        const matches = {};
        // Tokens can have length > 1
        for (const token of tokens) {
            const tokenPos = instruction.indexOf(token);
            if (tokenPos > -1) {
                matches[token] = instruction.indexOf(token);
            }
        }
        const pos = Math.min(...Object.values(matches));
        for (const token in matches) {
            if (matches[token] === pos) {
                return { token, pos };
            }
        }
        return { token: '', pos: -1 };
    }
    parseAViewportInstruction(instruction) {
        const seps = this.separators;
        const tokens = [seps.parameters, seps.viewport, seps.noScope, seps.scopeEnd, seps.scope, seps.sibling];
        let component = void 0;
        let parametersString = void 0;
        let viewport = void 0;
        let scope = true;
        let token;
        let pos;
        const specials = [seps.add, seps.clear];
        for (const special of specials) {
            if (instruction === special) {
                component = instruction;
                instruction = '';
                tokens.shift(); // parameters
                tokens.shift(); // viewport
                token = seps.viewport;
                break;
            }
        }
        if (component === void 0) {
            for (const special of specials) {
                if (instruction.startsWith(`${special}${seps.viewport}`)) {
                    component = special;
                    instruction = instruction.slice(`${special}${seps.viewport}`.length);
                    tokens.shift(); // parameters
                    tokens.shift(); // viewport
                    token = seps.viewport;
                    break;
                }
            }
        }
        if (component === void 0) {
            ({ token, pos } = this.findNextToken(instruction, tokens));
            component = pos !== -1 ? instruction.slice(0, pos) : instruction;
            instruction = pos !== -1 ? instruction.slice(pos + token.length) : '';
            tokens.shift(); // parameters
            if (token === seps.parameters) {
                ({ token, pos } = this.findNextToken(instruction, [seps.parametersEnd]));
                parametersString = instruction.slice(0, pos);
                instruction = instruction.slice(pos + token.length);
                ({ token } = this.findNextToken(instruction, tokens));
                instruction = instruction.slice(token.length);
            }
            tokens.shift(); // viewport
        }
        if (token === seps.viewport) {
            ({ token, pos } = this.findNextToken(instruction, tokens));
            viewport = pos !== -1 ? instruction.slice(0, pos) : instruction;
            instruction = pos !== -1 ? instruction.slice(pos + token.length) : '';
        }
        tokens.shift(); // noScope
        if (token === seps.noScope) {
            scope = false;
        }
        // Restore token that belongs to next instruction
        if (token === seps.scopeEnd || token === seps.scope || token === seps.sibling) {
            instruction = `${token}${instruction}`;
        }
        const viewportInstruction = this.createViewportInstruction(component, viewport, parametersString, scope);
        return { instruction: viewportInstruction, remaining: instruction };
    }
    stringifyAViewportInstruction(instruction, excludeViewport = false, excludeComponent = false) {
        if (typeof instruction === 'string') {
            return this.stringifyViewportInstruction(this.parseViewportInstruction(instruction), excludeViewport, excludeComponent);
        }
        else {
            let instructionString = !excludeComponent ? instruction.componentName : '';
            const specification = instruction.componentType ? instruction.componentType.parameters : null;
            const parameters = this.stringifyComponentParameters(instruction.toSortedParameters(specification));
            if (parameters.length > 0) {
                instructionString += !excludeComponent
                    ? `${this.separators.parameters}${parameters}${this.separators.parametersEnd}`
                    : parameters;
            }
            if (instruction.viewportName !== null && !excludeViewport) {
                instructionString += this.separators.viewport + instruction.viewportName;
            }
            if (!instruction.ownsScope) {
                instructionString += this.separators.noScope;
            }
            return instructionString || '';
        }
    }
}
//# sourceMappingURL=instruction-resolver.js.map

/***/ }),

/***/ "./node_modules/@aurelia/router/dist/esnext/interfaces.js":
/*!****************************************************************!*\
  !*** ./node_modules/@aurelia/router/dist/esnext/interfaces.js ***!
  \****************************************************************/
/*! exports provided: ReentryBehavior */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ReentryBehavior", function() { return ReentryBehavior; });
var ReentryBehavior;
(function (ReentryBehavior) {
    ReentryBehavior["default"] = "default";
    ReentryBehavior["disallow"] = "disallow";
    ReentryBehavior["enter"] = "enter";
    ReentryBehavior["refresh"] = "refresh";
})(ReentryBehavior || (ReentryBehavior = {}));
//# sourceMappingURL=interfaces.js.map

/***/ }),

/***/ "./node_modules/@aurelia/router/dist/esnext/lifecycle-logger.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@aurelia/router/dist/esnext/lifecycle-logger.js ***!
  \**********************************************************************/
/*! exports provided: lifecycleLogger, LifecycleClass */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "lifecycleLogger", function() { return lifecycleLogger; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LifecycleClass", function() { return LifecycleClass; });
function lifecycleLogger(name) {
    const lifecycles = [
        'canLeave', 'leave',
        'canEnter', 'enter',
        'created',
        'beforeBind', 'afterBind',
        'beforeAttach', 'afterAttach',
        'beforeDetach', 'afterDetach',
        'beforeUnbind', 'afterUnbind',
    ];
    return function (target) {
        for (const lifecycle of lifecycles) {
            const existing = target.prototype[lifecycle];
            if (existing !== void 0) {
                target.prototype[lifecycle] = function (...args) {
                    console.log(`${name} ${lifecycle}`, args);
                    return existing.apply(target, args);
                };
            }
            else {
                target.prototype[lifecycle] = function (...args) {
                    console.log(`${name} ${lifecycle}`, args);
                    if (lifecycle.startsWith('can')) {
                        return true;
                    }
                };
            }
        }
    };
}
class LifecycleClass {
    canEnter() { console.log(`name canEnter`); return true; }
    enter(params) { console.log(`name enter`); }
    created() { console.log(`name created`); }
    beforeBind() { console.log(`name binding`); }
    afterBind() { console.log(`name bound`); }
    beforeAttach() { console.log(`name beforeAttach`); }
    afterAttach() { console.log(`name afterAttach`); }
    canLeave() { console.log(`name canLeave`); return true; }
    leave() { console.log(`name leave`); }
    beforeDetach() { console.log(`name beforeDetach`); }
    afterDetach() { console.log(`name afterDetach`); }
    beforeUnbind() { console.log(`name beforeUnbind`); }
    afterUnbind() { console.log(`name unbound`); }
}
//# sourceMappingURL=lifecycle-logger.js.map

/***/ }),

/***/ "./node_modules/@aurelia/router/dist/esnext/link-handler.js":
/*!******************************************************************!*\
  !*** ./node_modules/@aurelia/router/dist/esnext/link-handler.js ***!
  \******************************************************************/
/*! exports provided: LinkHandler */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LinkHandler", function() { return LinkHandler; });
/* harmony import */ var _aurelia_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/runtime */ "./node_modules/@aurelia/runtime/dist/esnext/index.js");

/**
 * Class responsible for handling interactions that should trigger navigation.
 */
class LinkHandler {
    constructor(dom) {
        this.options = {
            useHref: true,
            callback: () => { return; }
        };
        this.isActive = false;
        this.handler = (e) => {
            const info = LinkHandler.getEventInfo(e, this.window, this.options);
            if (info.shouldHandleEvent) {
                e.preventDefault();
                this.options.callback(info);
            }
        };
        this.window = dom.window;
        this.document = dom.document;
    }
    /**
     * Gets the href and a "should handle" recommendation, given an Event.
     *
     * @param event - The Event to inspect for target anchor and href.
     */
    static getEventInfo(event, win, options) {
        const info = {
            shouldHandleEvent: false,
            instruction: null,
            anchor: null
        };
        const target = info.anchor = event.currentTarget;
        // Switch to this for delegation:
        // const target = info.anchor = LinkHandler.closestAnchor(event.target as Element);
        if (!target || !LinkHandler.targetIsThisWindow(target, win)) {
            return info;
        }
        if (target.hasAttribute('external')) {
            return info;
        }
        if (event.altKey || event.ctrlKey || event.metaKey || event.shiftKey) {
            return info;
        }
        const gotoAttr = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_0__["CustomAttribute"].for(target, 'goto');
        const goto = gotoAttr !== void 0 ? gotoAttr.viewModel.value : null;
        const href = options.useHref && target.hasAttribute('href') ? target.getAttribute('href') : null;
        if ((goto === null || goto.length === 0) && (href === null || href.length === 0)) {
            return info;
        }
        info.anchor = target;
        info.instruction = goto || href;
        const leftButtonClicked = event.button === 0;
        info.shouldHandleEvent = leftButtonClicked;
        return info;
    }
    /**
     * Finds the closest ancestor that's an anchor element.
     *
     * @param el - The element to search upward from.
     * @returns The link element that is the closest ancestor.
     */
    // private static closestAnchor(el: Element): Element | null {
    //   while (el !== null && el !== void 0) {
    //     if (el.tagName === 'A') {
    //       return el;
    //     }
    //     el = el.parentNode as Element;
    //   }
    //   return null;
    // }
    /**
     * Gets a value indicating whether or not an anchor targets the current window.
     *
     * @param target - The anchor element whose target should be inspected.
     * @returns True if the target of the link element is this window; false otherwise.
     */
    static targetIsThisWindow(target, win) {
        const targetWindow = target.getAttribute('target');
        return !targetWindow ||
            targetWindow === win.name ||
            targetWindow === '_self';
    }
    /**
     * Activate the instance.
     *
     */
    activate(options) {
        if (this.isActive) {
            throw new Error('Link handler has already been activated');
        }
        this.isActive = true;
        this.options = { ...options };
    }
    /**
     * Deactivate the instance. Event handlers and other resources should be cleaned up here.
     */
    deactivate() {
        if (!this.isActive) {
            throw new Error('Link handler has not been activated');
        }
        this.isActive = false;
    }
}
LinkHandler.inject = [_aurelia_runtime__WEBPACK_IMPORTED_MODULE_0__["IDOM"]];
//# sourceMappingURL=link-handler.js.map

/***/ }),

/***/ "./node_modules/@aurelia/router/dist/esnext/nav-route.js":
/*!***************************************************************!*\
  !*** ./node_modules/@aurelia/router/dist/esnext/nav-route.js ***!
  \***************************************************************/
/*! exports provided: NavRoute */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NavRoute", function() { return NavRoute; });
/* harmony import */ var _type_resolvers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./type-resolvers */ "./node_modules/@aurelia/router/dist/esnext/type-resolvers.js");

class NavRoute {
    constructor(nav, route) {
        this.nav = nav;
        this.instructions = [];
        this.link = null;
        this.linkVisible = null;
        this.linkActive = null;
        this.compareParameters = false;
        this.children = null;
        this.visible = true;
        this.active = '';
        this.title = route.title;
        this.meta = route.meta;
        if (route.route) {
            this.instructions = this.parseRoute(route.route);
            this.link = this.computeLink(this.instructions);
        }
        this.linkActive = route.consideredActive !== null && route.consideredActive !== void 0 ? route.consideredActive : this.link;
        if (this.linkActive !== null && (!(this.linkActive instanceof Function) || _type_resolvers__WEBPACK_IMPORTED_MODULE_0__["ComponentAppellationResolver"].isType(this.linkActive))) {
            this.linkActive = _type_resolvers__WEBPACK_IMPORTED_MODULE_0__["NavigationInstructionResolver"].toViewportInstructions(this.nav.router, this.linkActive);
        }
        this.execute = route.execute;
        this.compareParameters = !!route.compareParameters;
        this.linkVisible = route.condition === undefined ? true : route.condition;
        this.update();
    }
    get hasChildren() {
        return (this.children && this.children.length ? 'nav-has-children' : '');
    }
    update() {
        this.visible = this.computeVisible();
        if ((this.link && this.link.length) || this.execute) {
            this.active = this.computeActive();
        }
        else {
            this.active = (this.active === 'nav-active' ? 'nav-active' : (this.activeChild() ? 'nav-active-child' : ''));
        }
    }
    executeAction(event) {
        if (this.execute) {
            this.execute(this);
        }
        event.stopPropagation();
    }
    toggleActive() {
        this.active = (this.active.startsWith('nav-active') ? '' : 'nav-active');
    }
    parseRoute(routes) {
        return _type_resolvers__WEBPACK_IMPORTED_MODULE_0__["NavigationInstructionResolver"].toViewportInstructions(this.nav.router, routes);
    }
    computeVisible() {
        if (this.linkVisible instanceof Function) {
            return this.linkVisible(this);
        }
        return !!this.linkVisible;
    }
    computeActive() {
        if (!Array.isArray(this.linkActive)) {
            return this.linkActive(this) ? 'nav-active' : '';
        }
        const components = this.linkActive;
        const activeComponents = this.nav.router.instructionResolver.flattenViewportInstructions(this.nav.router.activeComponents);
        for (const component of components) {
            if (activeComponents.every((active) => !active.sameComponent(component, this.compareParameters && component.typedParameters !== null))) {
                return '';
            }
        }
        return 'nav-active';
    }
    computeLink(instructions) {
        return this.nav.router.instructionResolver.stringifyViewportInstructions(instructions);
    }
    activeChild() {
        if (this.children) {
            for (const child of this.children) {
                if (child.active.startsWith('nav-active') || child.activeChild()) {
                    return true;
                }
            }
        }
        return false;
    }
}
//# sourceMappingURL=nav-route.js.map

/***/ }),

/***/ "./node_modules/@aurelia/router/dist/esnext/nav.js":
/*!*********************************************************!*\
  !*** ./node_modules/@aurelia/router/dist/esnext/nav.js ***!
  \*********************************************************/
/*! exports provided: Nav */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Nav", function() { return Nav; });
/* harmony import */ var _nav_route__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./nav-route */ "./node_modules/@aurelia/router/dist/esnext/nav-route.js");

class Nav {
    constructor(router, name, routes = [], classes = {}) {
        this.router = router;
        this.name = name;
        this.routes = routes;
        this.classes = classes;
        this.update();
    }
    addRoutes(routes) {
        for (const route of routes) {
            this.addRoute(this.routes, route);
        }
        this.update();
    }
    update() {
        this.updateRoutes(this.routes);
        this.routes = this.routes.slice();
    }
    addRoute(routes, route) {
        const newRoute = new _nav_route__WEBPACK_IMPORTED_MODULE_0__["NavRoute"](this, route);
        routes.push(newRoute);
        if (route.children) {
            newRoute.children = [];
            for (const child of route.children) {
                this.addRoute(newRoute.children, child);
            }
        }
    }
    updateRoutes(routes) {
        for (const route of routes) {
            route.update();
            if (route.children && route.children.length) {
                this.updateRoutes(route.children);
            }
        }
    }
}
//# sourceMappingURL=nav.js.map

/***/ }),

/***/ "./node_modules/@aurelia/router/dist/esnext/navigator.js":
/*!***************************************************************!*\
  !*** ./node_modules/@aurelia/router/dist/esnext/navigator.js ***!
  \***************************************************************/
/*! exports provided: Navigator */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Navigator", function() { return Navigator; });
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _queue__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./queue */ "./node_modules/@aurelia/router/dist/esnext/queue.js");


class Navigator {
    constructor() {
        this.entries = [];
        this.options = {
            statefulHistoryLength: 0,
        };
        this.isActive = false;
        this.processNavigations = (qEntry) => {
            const entry = qEntry;
            const navigationFlags = {};
            if (this.currentEntry === this.uninitializedEntry) { // Refresh or first entry
                this.loadState();
                if (this.currentEntry !== this.uninitializedEntry) {
                    navigationFlags.refresh = true;
                }
                else {
                    navigationFlags.first = true;
                    navigationFlags.new = true;
                    // TODO: Should this really be created here? Shouldn't it be in the viewer?
                    this.currentEntry = {
                        index: 0,
                        instruction: '',
                        fullStateInstruction: '',
                    };
                    this.entries = [];
                }
            }
            if (entry.index !== void 0 && !entry.replacing && !entry.refreshing) { // History navigation
                entry.historyMovement = entry.index - (this.currentEntry.index !== void 0 ? this.currentEntry.index : 0);
                entry.instruction = this.entries[entry.index] !== void 0 && this.entries[entry.index] !== null ? this.entries[entry.index].fullStateInstruction : entry.fullStateInstruction;
                entry.replacing = true;
                if (entry.historyMovement > 0) {
                    navigationFlags.forward = true;
                }
                else if (entry.historyMovement < 0) {
                    navigationFlags.back = true;
                }
            }
            else if (entry.refreshing || navigationFlags.refresh) { // Refreshing
                entry.index = this.currentEntry.index;
            }
            else if (entry.replacing) { // Replacing
                navigationFlags.replace = true;
                navigationFlags.new = true;
                entry.index = this.currentEntry.index;
            }
            else { // New entry
                navigationFlags.new = true;
                entry.index = this.currentEntry.index !== void 0 ? this.currentEntry.index + 1 : this.entries.length;
            }
            this.invokeCallback(entry, navigationFlags, this.currentEntry);
        };
        this.uninitializedEntry = {
            instruction: 'NAVIGATOR UNINITIALIZED',
            fullStateInstruction: '',
        };
        this.currentEntry = this.uninitializedEntry;
        this.pendingNavigations = new _queue__WEBPACK_IMPORTED_MODULE_1__["Queue"](this.processNavigations);
    }
    get queued() {
        return this.pendingNavigations.length;
    }
    activate(router, options) {
        if (this.isActive) {
            throw new Error('Navigator has already been activated');
        }
        this.isActive = true;
        this.router = router;
        this.options = { ...options };
    }
    deactivate() {
        if (!this.isActive) {
            throw new Error('Navigator has not been activated');
        }
        this.pendingNavigations.clear();
        this.isActive = false;
    }
    navigate(entry) {
        return this.pendingNavigations.enqueue(entry);
    }
    refresh() {
        const entry = this.currentEntry;
        if (entry === this.uninitializedEntry) {
            return Promise.reject();
        }
        entry.replacing = true;
        entry.refreshing = true;
        return this.navigate(entry);
    }
    go(movement) {
        const newIndex = (this.currentEntry.index !== undefined ? this.currentEntry.index : 0) + movement;
        if (newIndex >= this.entries.length) {
            return Promise.reject();
        }
        const entry = this.entries[newIndex];
        return this.navigate(entry);
    }
    setEntryTitle(title) {
        this.currentEntry.title = title;
        return this.saveState();
    }
    get titles() {
        if (this.currentEntry == this.uninitializedEntry) {
            return [];
        }
        const index = this.currentEntry.index !== void 0 ? this.currentEntry.index : 0;
        return this.entries.slice(0, index + 1).filter((value) => !!value.title).map((value) => value.title ? value.title : '');
    }
    getState() {
        const state = this.options.store ? { ...this.options.store.state } : {};
        const entries = (state.entries || []);
        const currentEntry = (state.currentEntry || this.uninitializedEntry);
        return { state, entries, currentEntry };
    }
    loadState() {
        const state = this.getState();
        this.entries = state.entries;
        this.currentEntry = state.currentEntry;
    }
    async saveState(push = false) {
        if (this.currentEntry === this.uninitializedEntry) {
            return Promise.resolve();
        }
        const storedEntry = this.toStoredEntry(this.currentEntry);
        this.entries[storedEntry.index !== undefined ? storedEntry.index : 0] = storedEntry;
        if (this.options.serializeCallback !== void 0 && this.options.statefulHistoryLength > 0) {
            const index = this.entries.length - this.options.statefulHistoryLength;
            for (let i = 0; i < index; i++) {
                const entry = this.entries[i];
                if (typeof entry.instruction !== 'string' || typeof entry.fullStateInstruction !== 'string') {
                    this.entries[i] = await this.options.serializeCallback(entry, this.entries.slice(index));
                }
            }
        }
        if (!this.options.store) {
            return Promise.resolve();
        }
        const state = {
            entries: [],
            currentEntry: { ...this.toStoreableEntry(storedEntry) },
        };
        for (const entry of this.entries) {
            state.entries.push(this.toStoreableEntry(entry));
        }
        if (push) {
            return this.options.store.pushNavigatorState(state);
        }
        else {
            return this.options.store.replaceNavigatorState(state);
        }
    }
    toStoredEntry(entry) {
        const { previous, fromBrowser, replacing, refreshing, untracked, historyMovement, navigation, scope, resolve, reject, ...storableEntry } = entry;
        return storableEntry;
    }
    async finalize(instruction) {
        this.currentEntry = instruction;
        let index = this.currentEntry.index !== undefined ? this.currentEntry.index : 0;
        if (this.currentEntry.untracked) {
            if (instruction.fromBrowser && this.options.store) {
                await this.options.store.popNavigatorState();
            }
            index--;
            this.currentEntry.index = index;
            this.entries[index] = this.toStoredEntry(this.currentEntry);
            await this.saveState();
        }
        else if (this.currentEntry.replacing) {
            this.entries[index] = this.toStoredEntry(this.currentEntry);
            await this.saveState();
        }
        else { // New entry (add and discard later entries)
            if (this.options.serializeCallback !== void 0 && this.options.statefulHistoryLength > 0) {
                // Need to clear the instructions we discard!
                const indexPreserve = this.entries.length - this.options.statefulHistoryLength;
                for (const entry of this.entries.slice(index)) {
                    if (typeof entry.instruction !== 'string' || typeof entry.fullStateInstruction !== 'string') {
                        await this.options.serializeCallback(entry, this.entries.slice(indexPreserve, index));
                    }
                }
            }
            this.entries = this.entries.slice(0, index);
            this.entries.push(this.toStoredEntry(this.currentEntry));
            await this.saveState(true);
        }
        if (this.currentEntry.resolve) {
            this.currentEntry.resolve();
        }
    }
    async cancel(instruction) {
        if (instruction.fromBrowser && this.options.store) {
            if (instruction.navigation && instruction.navigation.new) {
                await this.options.store.popNavigatorState();
            }
            else {
                await this.options.store.go(-(instruction.historyMovement || 0), true);
            }
        }
        if (this.currentEntry.resolve) {
            this.currentEntry.resolve();
        }
    }
    invokeCallback(entry, navigationFlags, previousEntry) {
        const instruction = { ...entry };
        instruction.navigation = navigationFlags;
        instruction.previous = this.toStoredEntry(previousEntry);
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].write(10000, 'callback', instruction, instruction.previous, this.entries);
        if (this.options.callback) {
            this.options.callback(instruction);
        }
    }
    toStoreableEntry(entry) {
        const storeable = { ...entry };
        if (storeable.instruction && typeof storeable.instruction !== 'string') {
            storeable.instruction = this.router.instructionResolver.stringifyViewportInstructions(storeable.instruction);
        }
        if (storeable.fullStateInstruction && typeof storeable.fullStateInstruction !== 'string') {
            storeable.fullStateInstruction = this.router.instructionResolver.stringifyViewportInstructions(storeable.fullStateInstruction);
        }
        return storeable;
    }
}
//# sourceMappingURL=navigator.js.map

/***/ }),

/***/ "./node_modules/@aurelia/router/dist/esnext/parser.js":
/*!************************************************************!*\
  !*** ./node_modules/@aurelia/router/dist/esnext/parser.js ***!
  \************************************************************/
/*! exports provided: parseQuery */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "parseQuery", function() { return parseQuery; });
function parseQuery(query) {
    if (!query || !query.length) {
        return {};
    }
    const parameters = {};
    // TODO: Deal with complex parameters such as lists and objects
    const params = query.replace('+', ' ').split('&');
    for (const param of params) {
        const [key, value] = param.split('=');
        parameters[decodeURIComponent(key)] = decodeURIComponent(value !== void 0 ? value : key);
    }
    return parameters;
}
//# sourceMappingURL=parser.js.map

/***/ }),

/***/ "./node_modules/@aurelia/router/dist/esnext/queue.js":
/*!***********************************************************!*\
  !*** ./node_modules/@aurelia/router/dist/esnext/queue.js ***!
  \***********************************************************/
/*! exports provided: Queue */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Queue", function() { return Queue; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");


/**
 * A first-in-first-out queue that only processes the next queued item
 * when the current one has been resolved or rejected. Sends queued items
 * one at a time to a specified callback function. The callback function
 * should resolve or reject the queued item when processing is done.
 * Enqueued items can be awaited. Enqueued items can specify an (arbitrary)
 * execution cost and the queue can be set up (activated) to only process
 * a specific amount of execution cost per RAF/tick.
 */
class Queue {
    constructor(callback) {
        this.callback = callback;
        this.pending = [];
        this.processing = null;
        this.allowedExecutionCostWithinTick = null;
        this.currentExecutionCostInCurrentTick = 0;
        this.scheduler = null;
        this.task = null;
    }
    get isActive() {
        return this.task !== null;
    }
    get length() {
        return this.pending.length;
    }
    activate(options) {
        if (this.isActive) {
            throw new Error('Queue has already been activated');
        }
        this.scheduler = options.scheduler;
        this.allowedExecutionCostWithinTick = options.allowedExecutionCostWithinTick;
        this.task = this.scheduler.queueRenderTask(this.dequeue, { persistent: true });
    }
    deactivate() {
        if (!this.isActive) {
            throw new Error('Queue has not been activated');
        }
        this.task.cancel();
        this.task = null;
        this.allowedExecutionCostWithinTick = null;
        this.clear();
    }
    enqueue(itemOrItems, costOrCosts) {
        const list = Array.isArray(itemOrItems);
        const items = list ? itemOrItems : [itemOrItems];
        const costs = items
            .map((value, index) => !Array.isArray(costOrCosts) ? costOrCosts : costOrCosts[index])
            .map(value => value !== undefined ? value : 1);
        const promises = [];
        for (const item of items) {
            const qItem = { ...item };
            qItem.cost = costs.shift();
            promises.push(new Promise((resolve, reject) => {
                qItem.resolve = () => {
                    resolve();
                    this.processing = null;
                    this.dequeue();
                };
                qItem.reject = (reason) => {
                    reject(reason);
                    this.processing = null;
                    this.dequeue();
                };
            }));
            this.pending.push(qItem);
        }
        this.dequeue();
        return list ? promises : promises[0];
    }
    dequeue(delta) {
        if (this.processing !== null) {
            return;
        }
        if (delta !== undefined) {
            this.currentExecutionCostInCurrentTick = 0;
        }
        if (!this.pending.length) {
            return;
        }
        if (this.allowedExecutionCostWithinTick !== null && delta === undefined && this.currentExecutionCostInCurrentTick + (this.pending[0].cost || 0) > this.allowedExecutionCostWithinTick) {
            return;
        }
        this.processing = this.pending.shift() || null;
        if (this.processing) {
            this.currentExecutionCostInCurrentTick += this.processing.cost || 0;
            this.callback(this.processing);
        }
    }
    clear() {
        this.pending.splice(0, this.pending.length);
    }
}
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["bound"],
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:type", Function),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Number]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:returntype", void 0)
], Queue.prototype, "dequeue", null);
//# sourceMappingURL=queue.js.map

/***/ }),

/***/ "./node_modules/@aurelia/router/dist/esnext/resources/goto.js":
/*!********************************************************************!*\
  !*** ./node_modules/@aurelia/router/dist/esnext/resources/goto.js ***!
  \********************************************************************/
/*! exports provided: GotoCustomAttribute */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GotoCustomAttribute", function() { return GotoCustomAttribute; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _type_resolvers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../type-resolvers */ "./node_modules/@aurelia/router/dist/esnext/type-resolvers.js");
/* harmony import */ var _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aurelia/runtime */ "./node_modules/@aurelia/runtime/dist/esnext/index.js");
/* harmony import */ var _router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../router */ "./node_modules/@aurelia/router/dist/esnext/router.js");
/* harmony import */ var _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @aurelia/runtime-html */ "./node_modules/@aurelia/runtime-html/dist/esnext/index.js");





let GotoCustomAttribute = class GotoCustomAttribute {
    constructor(dom, element, router, eventManager) {
        this.dom = dom;
        this.router = router;
        this.eventManager = eventManager;
        this.listener = null;
        this.hasHref = null;
        this.activeClass = 'goto-active';
        this.element = element;
    }
    beforeBind() {
        this.listener = this.eventManager.addEventListener(this.dom, this.element, 'click', this.router.linkHandler.handler, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["DelegationStrategy"].none);
        this.updateValue();
        const observerLocator = this.router.container.get(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["IObserverLocator"]);
        this.observer = observerLocator.getObserver(0 /* none */, this.router, 'activeComponents');
        this.observer.subscribe(this);
    }
    beforeUnbind() {
        if (this.listener !== null) {
            this.listener.dispose();
        }
        this.observer.unsubscribe(this);
    }
    valueChanged(newValue) {
        this.updateValue();
    }
    updateValue() {
        if (this.hasHref === null) {
            this.hasHref = this.element.hasAttribute('href');
        }
        if (!this.hasHref) {
            // TODO: Figure out a better value here for non-strings (using InstructionResolver?)
            const value = typeof this.value === 'string' ? this.value : JSON.stringify(this.value);
            this.element.setAttribute('href', value);
        }
    }
    handleChange() {
        const controller = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["CustomAttribute"].for(this.element, 'goto').parent;
        const created = _type_resolvers__WEBPACK_IMPORTED_MODULE_1__["NavigationInstructionResolver"].createViewportInstructions(this.router, this.value, { context: controller });
        const instructions = _type_resolvers__WEBPACK_IMPORTED_MODULE_1__["NavigationInstructionResolver"].toViewportInstructions(this.router, created.instructions);
        for (const instruction of instructions) {
            if (instruction.scope === null) {
                instruction.scope = created.scope;
            }
        }
        // TODO: Use router configuration for class name and update target
        if (this.router.checkActive(instructions)) {
            this.element.classList.add(this.activeClass);
        }
        else {
            this.element.classList.remove(this.activeClass);
        }
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["bindable"])({ mode: _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["BindingMode"].toView }),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:type", Object)
], GotoCustomAttribute.prototype, "value", void 0);
GotoCustomAttribute = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["customAttribute"])('goto'),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(0, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["IDOM"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(1, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["INode"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(2, _router__WEBPACK_IMPORTED_MODULE_3__["IRouter"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(3, _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_4__["IEventManager"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object, Object, Object, Object])
], GotoCustomAttribute);

//# sourceMappingURL=goto.js.map

/***/ }),

/***/ "./node_modules/@aurelia/router/dist/esnext/resources/href.js":
/*!********************************************************************!*\
  !*** ./node_modules/@aurelia/router/dist/esnext/resources/href.js ***!
  \********************************************************************/
/*! exports provided: HrefCustomAttribute */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HrefCustomAttribute", function() { return HrefCustomAttribute; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/runtime */ "./node_modules/@aurelia/runtime/dist/esnext/index.js");
/* harmony import */ var _router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../router */ "./node_modules/@aurelia/router/dist/esnext/router.js");
/* harmony import */ var _configuration__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../configuration */ "./node_modules/@aurelia/router/dist/esnext/configuration.js");
/* harmony import */ var _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @aurelia/runtime-html */ "./node_modules/@aurelia/runtime-html/dist/esnext/index.js");





let HrefCustomAttribute = class HrefCustomAttribute {
    constructor(dom, element, router, eventManager) {
        this.dom = dom;
        this.router = router;
        this.eventManager = eventManager;
        this.eventListener = null;
        this.element = element;
    }
    beforeBind() {
        if (this.router.options.useHref && !this.hasGoto()) {
            this.eventListener = this.eventManager.addEventListener(this.dom, this.element, 'click', this.router.linkHandler.handler, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["DelegationStrategy"].none);
        }
        this.updateValue();
    }
    beforeUnbind() {
        if (this.eventListener !== null) {
            this.eventListener.dispose();
        }
    }
    valueChanged() {
        this.updateValue();
    }
    updateValue() {
        this.element.setAttribute('href', this.value);
    }
    hasGoto() {
        const parent = this.$controller.parent;
        const siblings = parent.vmKind !== 1 /* customAttribute */ ? parent.controllers : void 0;
        return siblings !== void 0
            && siblings.some(c => c.vmKind === 1 /* customAttribute */ && c.viewModel instanceof _configuration__WEBPACK_IMPORTED_MODULE_3__["GotoCustomAttribute"]);
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["bindable"])({ mode: _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["BindingMode"].toView }),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:type", Object)
], HrefCustomAttribute.prototype, "value", void 0);
HrefCustomAttribute = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["customAttribute"])({
        name: 'href',
        noMultiBindings: true
    }),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(0, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["IDOM"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(1, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["INode"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(2, _router__WEBPACK_IMPORTED_MODULE_2__["IRouter"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(3, _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_4__["IEventManager"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object, Object, Object, Object])
], HrefCustomAttribute);

//# sourceMappingURL=href.js.map

/***/ }),

/***/ "./node_modules/@aurelia/router/dist/esnext/resources/nav.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@aurelia/router/dist/esnext/resources/nav.js ***!
  \*******************************************************************/
/*! exports provided: NavCustomElement */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NavCustomElement", function() { return NavCustomElement; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aurelia/runtime */ "./node_modules/@aurelia/runtime/dist/esnext/index.js");
/* harmony import */ var _router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../router */ "./node_modules/@aurelia/router/dist/esnext/router.js");




let NavCustomElement = class NavCustomElement {
    constructor(router) {
        this.router = router;
        this.name = null;
        this.routes = null;
        this.level = 0;
        this.classes = {};
    }
    get navRoutes() {
        const nav = this.router.navs[this.name];
        return (nav !== void 0 && nav !== null ? nav.routes : []);
    }
    get navClasses() {
        const nav = this.router.navs[this.name];
        const navClasses = (nav !== void 0 && nav !== null ? nav.classes : {});
        return {
            ...{
                nav: '',
                ul: '',
                li: '',
                a: '',
                ulActive: '',
                liActive: 'nav-active',
                aActive: '',
            }, ...navClasses
        };
    }
    active(route) {
        return 'Active';
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["bindable"],
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:type", Object)
], NavCustomElement.prototype, "name", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["bindable"],
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:type", Object)
], NavCustomElement.prototype, "routes", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["bindable"],
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:type", Number)
], NavCustomElement.prototype, "level", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["bindable"],
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:type", Object)
], NavCustomElement.prototype, "classes", void 0);
NavCustomElement = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["inject"])(_router__WEBPACK_IMPORTED_MODULE_3__["IRouter"], _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["INode"]),
    Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["customElement"])({
        name: 'au-nav', template: `<template>
  <nav if.bind="name" class="\${name} \${navClasses.nav}">
    <au-nav routes.bind="navRoutes" classes.bind="navClasses" containerless></au-nav>
  </nav>
  <ul if.bind="routes" class="nav-level-\${level} \${classes.ul}">
    <li repeat.for="route of routes" if.bind="route.visible" class="\${route.active ? classes.liActive : ''} \${route.hasChildren} \${classes.li}">
      <a if.bind="route.link && route.link.length" goto="\${route.link}" class="\${route.active ? classes.aActive : ''} \${classes.a}" innerhtml.bind="route.title"></a>
      <a if.bind="route.execute" click.trigger="route.executeAction($event)" href="" class="\${route.active ? classes.aActive : ''} \${classes.a}" innerhtml.bind="route.title"></a>
      <span if.bind="(!route.link || !route.link.length) && !route.execute && !route.children" class="\${route.active ? classes.aActive : ''} \${classes.span} nav-separator" innerhtml.bind="route.title"></span>
      <a if.bind="(!route.link || !route.link.length) && !route.execute && route.children" click.delegate="route.toggleActive()" href="" class="\${route.active ? classes.aActive : ''} \${classes.a}" innerhtml.bind="route.title"></a>
      <au-nav if.bind="route.children" routes.bind="route.children" level.bind="level + 1" classes.bind="classes" containerless></au-nav>
    </li>
  </ul>
</template>`
    }),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object])
], NavCustomElement);

//# sourceMappingURL=nav.js.map

/***/ }),

/***/ "./node_modules/@aurelia/router/dist/esnext/resources/viewport-scope.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@aurelia/router/dist/esnext/resources/viewport-scope.js ***!
  \******************************************************************************/
/*! exports provided: ParentViewportScope, ViewportScopeCustomElement */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ParentViewportScope", function() { return ParentViewportScope; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ViewportScopeCustomElement", function() { return ViewportScopeCustomElement; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/runtime */ "./node_modules/@aurelia/runtime/dist/esnext/index.js");
/* harmony import */ var _router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../router */ "./node_modules/@aurelia/router/dist/esnext/router.js");
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");




const ParentViewportScope = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["CustomElement"].createInjectable();
let ViewportScopeCustomElement = class ViewportScopeCustomElement {
    constructor(router, element, container, parent, parentController) {
        this.router = router;
        this.container = container;
        this.parent = parent;
        this.parentController = parentController;
        this.name = 'default';
        this.catches = '';
        this.collection = false;
        this.source = null;
        this.viewportScope = null;
        this.isBound = false;
        this.element = element;
    }
    create(controller, parentContainer, definition, parts) {
        // TODO(fkleuver): describe this somewhere in the docs instead
        // Under the condition that there is no `replace` attribute on this custom element's declaration,
        // and this custom element is containerless, its content will be placed in a part named 'default'
        // See packages/jit-html/src/template-binder.ts line 411 (`replace = 'default';`) for the logic that governs this.
        // We could tidy this up into a formal api in the future. For now, there are two ways to do this:
        // 1. inject the `@ITargetedInstruction` (IHydrateElementInstruction) and grab .parts['default'] from there, manually creating a view factory from that, etc.
        // 2. what we're doing right here: grab the 'default' part from the create hook and return it as the definition, telling the render context to use that part to compile this element instead
        // This effectively causes this element to render its declared content as if it was its own template.
        // We do need to set `containerless` to true on the part definition so that the correct projector is used since parts default to non-containerless.
        // Otherwise, the controller will try to do `appendChild` on a comment node when it has to do `insertBefore`.
        // Also, in this particular scenario (specific to viewport-scope) we need to clone the part so as to prevent the resulting compiled definition
        // from ever being cached. That's the only reason why we're spreading the part into a new object for `getOrCreate`. If we didn't clone the object, this specific element wouldn't work correctly.
        const part = parts['default'];
        return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["CustomElementDefinition"].getOrCreate({ ...part, containerless: true });
    }
    afterCompile(controller) {
        this.container = controller.context.get(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_3__["IContainer"]);
        // console.log('ViewportScope creating', this.getAttribute('name', this.name), this.container, this.parent, controller, this);
        // this.connect();
    }
    afterUnbound() {
        this.isBound = false;
    }
    connect() {
        if (this.router.rootScope === null) {
            return;
        }
        const name = this.getAttribute('name', this.name);
        const options = {};
        let value = this.getAttribute('catches', this.catches);
        if (value !== void 0) {
            options.catches = value;
        }
        value = this.getAttribute('collection', this.collection, true);
        if (value !== void 0) {
            options.collection = value;
        }
        // TODO: Needs to be bound? How to solve?
        options.source = this.source || null;
        this.viewportScope = this.router.connectViewportScope(this.viewportScope, name, this.container, this.element, options);
    }
    disconnect() {
        if (this.viewportScope) {
            this.router.disconnectViewportScope(this.viewportScope, this.container);
        }
        this.viewportScope = null;
    }
    beforeBind(flags) {
        this.isBound = true;
        this.$controller.scope = this.parentController.scope;
        this.connect();
        if (this.viewportScope !== null) {
            this.viewportScope.beforeBind();
        }
    }
    async beforeUnbind(flags) {
        if (this.viewportScope !== null) {
            this.viewportScope.beforeUnbind();
        }
        this.disconnect();
        return Promise.resolve();
    }
    getAttribute(key, value, checkExists = false) {
        const result = {};
        if (this.isBound) {
            return value;
        }
        else {
            if (this.element.hasAttribute(key)) {
                if (checkExists) {
                    return true;
                }
                else {
                    value = this.element.getAttribute(key);
                    if (value.length > 0) {
                        return value;
                    }
                }
            }
        }
        return void 0;
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["bindable"],
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:type", String)
], ViewportScopeCustomElement.prototype, "name", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["bindable"],
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:type", String)
], ViewportScopeCustomElement.prototype, "catches", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["bindable"],
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:type", Boolean)
], ViewportScopeCustomElement.prototype, "collection", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["bindable"],
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:type", Object)
], ViewportScopeCustomElement.prototype, "source", void 0);
ViewportScopeCustomElement = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["customElement"])({
        name: 'au-viewport-scope',
        template: '<template></template>',
        containerless: true,
        injectable: ParentViewportScope
    }),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(0, _router__WEBPACK_IMPORTED_MODULE_2__["IRouter"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(1, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["INode"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(2, _aurelia_kernel__WEBPACK_IMPORTED_MODULE_3__["IContainer"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(3, ParentViewportScope),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(4, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["IController"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object, Object, Object, ViewportScopeCustomElement, Object])
], ViewportScopeCustomElement);

//# sourceMappingURL=viewport-scope.js.map

/***/ }),

/***/ "./node_modules/@aurelia/router/dist/esnext/resources/viewport.js":
/*!************************************************************************!*\
  !*** ./node_modules/@aurelia/router/dist/esnext/resources/viewport.js ***!
  \************************************************************************/
/*! exports provided: ParentViewport, ViewportCustomElement */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ParentViewport", function() { return ParentViewport; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ViewportCustomElement", function() { return ViewportCustomElement; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aurelia/runtime */ "./node_modules/@aurelia/runtime/dist/esnext/index.js");
/* harmony import */ var _router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../router */ "./node_modules/@aurelia/router/dist/esnext/router.js");




const ParentViewport = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["CustomElement"].createInjectable();
let ViewportCustomElement = class ViewportCustomElement {
    constructor(router, element, container, parentViewport) {
        this.router = router;
        this.container = container;
        this.parentViewport = parentViewport;
        this.name = 'default';
        this.usedBy = '';
        this.default = '';
        this.fallback = '';
        this.noScope = false;
        this.noLink = false;
        this.noHistory = false;
        this.stateful = false;
        this.viewport = null;
        this.isBound = false;
        this.element = element;
    }
    afterCompile(controller) {
        this.container = controller.context.get(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["IContainer"]);
        // console.log('Viewport creating', this.getAttribute('name', this.name), this.container, this.parentViewport, controller, this);
        // this.connect();
    }
    afterUnbind() {
        this.isBound = false;
    }
    connect() {
        if (this.router.rootScope === null) {
            return;
        }
        const name = this.getAttribute('name', this.name);
        let value = this.getAttribute('no-scope', this.noScope);
        const options = { scope: value === void 0 || !value ? true : false };
        value = this.getAttribute('used-by', this.usedBy);
        if (value !== void 0) {
            options.usedBy = value;
        }
        value = this.getAttribute('default', this.default);
        if (value !== void 0) {
            options.default = value;
        }
        value = this.getAttribute('fallback', this.fallback);
        if (value !== void 0) {
            options.fallback = value;
        }
        value = this.getAttribute('no-link', this.noLink, true);
        if (value !== void 0) {
            options.noLink = value;
        }
        value = this.getAttribute('no-history', this.noHistory, true);
        if (value !== void 0) {
            options.noHistory = value;
        }
        value = this.getAttribute('stateful', this.stateful, true);
        if (value !== void 0) {
            options.stateful = value;
        }
        this.viewport = this.router.connectViewport(this.viewport, this.container, name, this.element, options);
    }
    disconnect() {
        if (this.viewport) {
            this.router.disconnectViewport(this.viewport, this.container, this.element);
        }
        this.viewport = null;
    }
    beforeBind(flags) {
        this.isBound = true;
        this.connect();
        if (this.viewport) {
            this.viewport.beforeBind(flags);
        }
    }
    beforeAttach(flags) {
        if (this.viewport) {
            return this.viewport.beforeAttach(flags);
        }
        return Promise.resolve();
    }
    beforeDetach(flags) {
        if (this.viewport) {
            return this.viewport.beforeDetach(flags);
        }
        return Promise.resolve();
    }
    async beforeUnbind(flags) {
        if (this.viewport) {
            await this.viewport.beforeUnbind(flags);
            this.disconnect();
        }
    }
    getAttribute(key, value, checkExists = false) {
        const result = {};
        if (this.isBound && !checkExists) {
            return value;
        }
        else {
            if (this.element.hasAttribute(key)) {
                if (checkExists) {
                    return true;
                }
                else {
                    value = this.element.getAttribute(key);
                    if (value.length > 0) {
                        return value;
                    }
                }
            }
        }
        return void 0;
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["bindable"],
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:type", String)
], ViewportCustomElement.prototype, "name", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["bindable"],
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:type", String)
], ViewportCustomElement.prototype, "usedBy", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["bindable"],
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:type", String)
], ViewportCustomElement.prototype, "default", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["bindable"],
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:type", String)
], ViewportCustomElement.prototype, "fallback", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["bindable"],
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:type", Boolean)
], ViewportCustomElement.prototype, "noScope", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["bindable"],
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:type", Boolean)
], ViewportCustomElement.prototype, "noLink", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["bindable"],
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:type", Boolean)
], ViewportCustomElement.prototype, "noHistory", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["bindable"],
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:type", Boolean)
], ViewportCustomElement.prototype, "stateful", void 0);
ViewportCustomElement = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["customElement"])({
        name: 'au-viewport',
        injectable: ParentViewport
    }),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(0, _router__WEBPACK_IMPORTED_MODULE_3__["IRouter"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(1, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["INode"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(2, _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["IContainer"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(3, ParentViewport),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object, Object, Object, ViewportCustomElement])
], ViewportCustomElement);

//# sourceMappingURL=viewport.js.map

/***/ }),

/***/ "./node_modules/@aurelia/router/dist/esnext/route-recognizer.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@aurelia/router/dist/esnext/route-recognizer.js ***!
  \**********************************************************************/
/*! exports provided: RouteRecognizer, ConfigurableRoute, RecognizedRoute, Endpoint */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RouteRecognizer", function() { return RouteRecognizer; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConfigurableRoute", function() { return ConfigurableRoute; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RecognizedRoute", function() { return RecognizedRoute; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Endpoint", function() { return Endpoint; });
/* harmony import */ var _aurelia_route_recognizer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/route-recognizer */ "./node_modules/@aurelia/route-recognizer/dist/esnext/index.js");

const RouteRecognizer = _aurelia_route_recognizer__WEBPACK_IMPORTED_MODULE_0__["RouteRecognizer"];
const ConfigurableRoute = _aurelia_route_recognizer__WEBPACK_IMPORTED_MODULE_0__["ConfigurableRoute"];
const RecognizedRoute = _aurelia_route_recognizer__WEBPACK_IMPORTED_MODULE_0__["RecognizedRoute"];
const Endpoint = _aurelia_route_recognizer__WEBPACK_IMPORTED_MODULE_0__["Endpoint"];
//# sourceMappingURL=route-recognizer.js.map

/***/ }),

/***/ "./node_modules/@aurelia/router/dist/esnext/router.js":
/*!************************************************************!*\
  !*** ./node_modules/@aurelia/router/dist/esnext/router.js ***!
  \************************************************************/
/*! exports provided: IRouter, Router */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IRouter", function() { return IRouter; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Router", function() { return Router; });
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/runtime */ "./node_modules/@aurelia/runtime/dist/esnext/index.js");
/* harmony import */ var _instruction_resolver__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./instruction-resolver */ "./node_modules/@aurelia/router/dist/esnext/instruction-resolver.js");
/* harmony import */ var _link_handler__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./link-handler */ "./node_modules/@aurelia/router/dist/esnext/link-handler.js");
/* harmony import */ var _nav__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./nav */ "./node_modules/@aurelia/router/dist/esnext/nav.js");
/* harmony import */ var _navigator__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./navigator */ "./node_modules/@aurelia/router/dist/esnext/navigator.js");
/* harmony import */ var _type_resolvers__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./type-resolvers */ "./node_modules/@aurelia/router/dist/esnext/type-resolvers.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./utils */ "./node_modules/@aurelia/router/dist/esnext/utils.js");
/* harmony import */ var _viewport__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./viewport */ "./node_modules/@aurelia/router/dist/esnext/viewport.js");
/* harmony import */ var _found_route__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./found-route */ "./node_modules/@aurelia/router/dist/esnext/found-route.js");
/* harmony import */ var _hook_manager__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./hook-manager */ "./node_modules/@aurelia/router/dist/esnext/hook-manager.js");
/* harmony import */ var _scope__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./scope */ "./node_modules/@aurelia/router/dist/esnext/scope.js");
/* harmony import */ var _viewport_scope__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./viewport-scope */ "./node_modules/@aurelia/router/dist/esnext/viewport-scope.js");
/* harmony import */ var _browser_viewer_store__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./browser-viewer-store */ "./node_modules/@aurelia/router/dist/esnext/browser-viewer-store.js");
/* eslint-disable max-lines-per-function */














class ClosestViewportCustomElement {
}
class ClosestScope {
}
const IRouter = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["DI"].createInterface('IRouter').withDefault(x => x.singleton(Router));
class Router {
    constructor(container, navigator, navigation, linkHandler, instructionResolver) {
        this.container = container;
        this.navigator = navigator;
        this.navigation = navigation;
        this.linkHandler = linkHandler;
        this.instructionResolver = instructionResolver;
        this.rootScope = null;
        this.navs = {};
        this.activeComponents = [];
        this.appendedInstructions = [];
        this.options = {
            useHref: true,
            statefulHistoryLength: 0,
            useDirectRoutes: true,
            useConfiguredRoutes: true,
        };
        this.isActive = false;
        this.loadedFirst = false;
        this.processingNavigation = null;
        this.lastNavigation = null;
        this.staleChecks = {};
        // TODO: use @bound and improve name (eslint-disable is temp)
        // eslint-disable-next-line @typescript-eslint/typedef
        this.linkCallback = (info) => {
            let instruction = info.instruction || '';
            if (typeof instruction === 'string' && instruction.startsWith('#')) {
                instruction = instruction.slice(1);
                // '#' === '/' === '#/'
                if (!instruction.startsWith('/')) {
                    instruction = `/${instruction}`;
                }
            }
            // Adds to Navigator's Queue, which makes sure it's serial
            this.goto(instruction, { origin: info.anchor }).catch(error => { throw error; });
        };
        // TODO: use @bound and improve name (eslint-disable is temp)
        // eslint-disable-next-line @typescript-eslint/typedef
        this.navigatorCallback = (instruction) => {
            // Instructions extracted from queue, one at a time
            this.processNavigations(instruction).catch(error => { throw error; });
        };
        // TODO: use @bound and improve name (eslint-disable is temp)
        // eslint-disable-next-line @typescript-eslint/typedef
        this.navigatorSerializeCallback = async (entry, preservedEntries) => {
            let excludeComponents = [];
            for (const preservedEntry of preservedEntries) {
                if (typeof preservedEntry.instruction !== 'string') {
                    excludeComponents.push(...this.instructionResolver.flattenViewportInstructions(preservedEntry.instruction)
                        .filter(instruction => instruction.viewport !== null)
                        .map(instruction => instruction.componentInstance));
                }
                if (typeof preservedEntry.fullStateInstruction !== 'string') {
                    excludeComponents.push(...this.instructionResolver.flattenViewportInstructions(preservedEntry.fullStateInstruction)
                        .filter(instruction => instruction.viewport !== null)
                        .map(instruction => instruction.componentInstance));
                }
            }
            excludeComponents = excludeComponents.filter((component, i, arr) => component !== null && arr.indexOf(component) === i);
            const serialized = { ...entry };
            let instructions = [];
            if (serialized.fullStateInstruction && typeof serialized.fullStateInstruction !== 'string') {
                instructions.push(...serialized.fullStateInstruction);
                serialized.fullStateInstruction = this.instructionResolver.stringifyViewportInstructions(serialized.fullStateInstruction);
            }
            if (serialized.instruction && typeof serialized.instruction !== 'string') {
                instructions.push(...serialized.instruction);
                serialized.instruction = this.instructionResolver.stringifyViewportInstructions(serialized.instruction);
            }
            instructions = instructions.filter((instruction, i, arr) => instruction !== null
                && instruction.componentInstance !== null
                && arr.indexOf(instruction) === i);
            const alreadyDone = [];
            for (const instruction of instructions) {
                await this.freeComponents(instruction, excludeComponents, alreadyDone);
            }
            return serialized;
        };
        // TODO: use @bound and improve name (eslint-disable is temp)
        // eslint-disable-next-line @typescript-eslint/typedef
        this.browserNavigatorCallback = (browserNavigationEvent) => {
            const entry = (browserNavigationEvent.state && browserNavigationEvent.state.currentEntry
                ? browserNavigationEvent.state.currentEntry
                : { instruction: '', fullStateInstruction: '' });
            entry.instruction = browserNavigationEvent.instruction;
            entry.fromBrowser = true;
            this.navigator.navigate(entry).catch(error => { throw error; });
        };
        // TODO: use @bound and improve name (eslint-disable is temp)
        // eslint-disable-next-line @typescript-eslint/typedef
        this.processNavigations = async (qInstruction) => {
            const instruction = this.processingNavigation = qInstruction;
            if (this.options.reportCallback) {
                this.options.reportCallback(instruction);
            }
            let fullStateInstruction = false;
            const instructionNavigation = instruction.navigation;
            if ((instructionNavigation.back || instructionNavigation.forward) && instruction.fullStateInstruction) {
                fullStateInstruction = true;
                // if (!confirm('Perform history navigation?')) { this.navigator.cancel(instruction); this.processingNavigation = null; return Promise.resolve(); }
            }
            let configuredRoute = await this.findInstructions(this.rootScope.scope, instruction.instruction, instruction.scope || this.rootScope.scope, !fullStateInstruction);
            let instructions = configuredRoute.instructions;
            let configuredRoutePath = null;
            if (instruction.instruction.length > 0 && !configuredRoute.foundConfiguration && !configuredRoute.foundInstructions) {
                // TODO: Do something here!
                this.unknownRoute(configuredRoute.remaining);
            }
            if (configuredRoute.foundConfiguration) {
                instruction.path = instruction.instruction.startsWith('/')
                    ? instruction.instruction.slice(1) : instruction.instruction;
                configuredRoutePath = `${configuredRoutePath || ''}${configuredRoute.matching}`;
                this.rootScope.path = configuredRoutePath;
            }
            // TODO: Used to have an early exit if no instructions. Restore it?
            const clearScopeOwners = [];
            let clearViewportScopes = [];
            for (const clearInstruction of instructions.filter(instr => this.instructionResolver.isClearAllViewportsInstruction(instr))) {
                const scope = clearInstruction.scope || this.rootScope.scope;
                clearScopeOwners.push(...scope.children.filter(scope => !scope.owner.isEmpty).map(scope => scope.owner));
                if (scope.viewportScope !== null) {
                    clearViewportScopes.push(scope.viewportScope);
                }
            }
            instructions = instructions.filter(instr => !this.instructionResolver.isClearAllViewportsInstruction(instr));
            for (const addInstruction of instructions.filter(instr => this.instructionResolver.isAddAllViewportsInstruction(instr))) {
                addInstruction.setViewport((addInstruction.scope || this.rootScope.scope).viewportScope.name);
                addInstruction.scope = addInstruction.scope.owningScope;
            }
            const updatedScopeOwners = [];
            const alreadyFoundInstructions = [];
            // TODO: Take care of cancellations down in subsets/iterations
            let { found: viewportInstructions, remaining: remainingInstructions } = this.findViewports(instructions, alreadyFoundInstructions);
            let guard = 100;
            do {
                if (!guard--) { // Guard against endless loop
                    console.log('remainingInstructions', remainingInstructions);
                    throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].error(2002);
                }
                const changedScopeOwners = [];
                const hooked = await this.hookManager.invokeBeforeNavigation(viewportInstructions, instruction);
                if (hooked === false) {
                    return this.cancelNavigation([...changedScopeOwners, ...updatedScopeOwners], instruction);
                }
                else {
                    viewportInstructions = hooked;
                }
                for (const viewportInstruction of viewportInstructions) {
                    const scopeOwner = viewportInstruction.owner;
                    if (scopeOwner !== null) {
                        scopeOwner.path = configuredRoutePath;
                        if (scopeOwner.setNextContent(viewportInstruction, instruction)) {
                            changedScopeOwners.push(scopeOwner);
                        }
                        Object(_utils__WEBPACK_IMPORTED_MODULE_7__["arrayRemove"])(clearScopeOwners, value => value === scopeOwner);
                        if (!this.instructionResolver.isClearViewportInstruction(viewportInstruction)
                            && viewportInstruction.scope !== null
                            && viewportInstruction.scope.parent !== null
                            && viewportInstruction.scope.parent.isViewportScope) {
                            Object(_utils__WEBPACK_IMPORTED_MODULE_7__["arrayRemove"])(clearViewportScopes, value => value === viewportInstruction.scope.parent.viewportScope);
                        }
                    }
                }
                let results = await Promise.all(changedScopeOwners.map((value) => value.canLeave()));
                if (results.some(result => result === false)) {
                    return this.cancelNavigation([...changedScopeOwners, ...updatedScopeOwners], instruction);
                }
                results = await Promise.all(changedScopeOwners.map(async (value) => {
                    const canEnter = await value.canEnter();
                    if (typeof canEnter === 'boolean') {
                        if (canEnter) {
                            return value.enter();
                        }
                        else {
                            return false;
                        }
                    }
                    await this.goto(canEnter, { append: true });
                    await value.abortContentChange();
                    // TODO: Abort content change in the viewports
                    return true;
                }));
                if (results.some(result => result === false)) {
                    return this.cancelNavigation([...changedScopeOwners, ...updatedScopeOwners], qInstruction);
                }
                for (const viewport of changedScopeOwners) {
                    if (updatedScopeOwners.every(value => value !== viewport)) {
                        updatedScopeOwners.push(viewport);
                    }
                }
                // TODO: Fix multi level recursiveness!
                alreadyFoundInstructions.push(...viewportInstructions);
                ({ found: viewportInstructions, remaining: remainingInstructions } = this.findViewports(remainingInstructions, alreadyFoundInstructions));
                // Look for configured child routes (once we've loaded everything so far?)
                if (configuredRoute.hasRemaining &&
                    viewportInstructions.length === 0 &&
                    remainingInstructions.length === 0) {
                    let configured = new _found_route__WEBPACK_IMPORTED_MODULE_9__["FoundRoute"]();
                    const routeScopeOwners = alreadyFoundInstructions
                        .filter(instr => instr.owner !== null && instr.owner.path === configuredRoutePath)
                        .map(instr => instr.owner)
                        .filter((value, index, arr) => arr.indexOf(value) === index);
                    for (const owner of routeScopeOwners) {
                        configured = await this.findInstructions(owner.scope, configuredRoute.remaining, owner.scope);
                        if (configured.foundConfiguration) {
                            break;
                        }
                    }
                    if (configured.foundInstructions) {
                        configuredRoute = configured;
                        configuredRoutePath = `${configuredRoutePath || ''}/${configuredRoute.matching}`;
                    }
                    else {
                        // TODO: Do something here!
                        this.unknownRoute(configured.remaining);
                    }
                    this.appendInstructions(configured.instructions);
                }
                // Don't use defaults when it's a full state navigation
                if (fullStateInstruction) {
                    this.appendedInstructions = this.appendedInstructions.filter(instruction => !instruction.default);
                }
                // Process non-defaults first
                let appendedInstructions = this.appendedInstructions.filter(instruction => !instruction.default);
                this.appendedInstructions = this.appendedInstructions.filter(instruction => instruction.default);
                if (appendedInstructions.length === 0) {
                    const index = this.appendedInstructions.findIndex(instruction => instruction.default);
                    if (index >= 0) {
                        appendedInstructions = this.appendedInstructions.splice(index, 1);
                    }
                }
                while (appendedInstructions.length > 0) {
                    const appendedInstruction = appendedInstructions.shift();
                    const existingAlreadyFound = alreadyFoundInstructions.some(instruction => instruction.sameViewport(appendedInstruction));
                    const existingFound = viewportInstructions.find(value => value.sameViewport(appendedInstruction));
                    const existingRemaining = remainingInstructions.find(value => value.sameViewport(appendedInstruction));
                    if (appendedInstruction.default &&
                        (existingAlreadyFound ||
                            (existingFound !== void 0 && !existingFound.default) ||
                            (existingRemaining !== void 0 && !existingRemaining.default))) {
                        continue;
                    }
                    if (existingFound !== void 0) {
                        Object(_utils__WEBPACK_IMPORTED_MODULE_7__["arrayRemove"])(viewportInstructions, value => value === existingFound);
                    }
                    if (existingRemaining !== void 0) {
                        Object(_utils__WEBPACK_IMPORTED_MODULE_7__["arrayRemove"])(remainingInstructions, value => value === existingRemaining);
                    }
                    if (appendedInstruction.viewport !== null) {
                        viewportInstructions.push(appendedInstruction);
                    }
                    else {
                        remainingInstructions.push(appendedInstruction);
                    }
                }
                if (viewportInstructions.length === 0 && remainingInstructions.length === 0) {
                    viewportInstructions = clearScopeOwners.map(owner => {
                        const instruction = this.createViewportInstruction(this.instructionResolver.clearViewportInstruction, owner.isViewport ? owner : void 0);
                        if (owner.isViewportScope) {
                            instruction.viewportScope = owner;
                        }
                        return instruction;
                    });
                    viewportInstructions.push(...clearViewportScopes.map(viewportScope => {
                        const instr = this.createViewportInstruction(this.instructionResolver.clearViewportInstruction);
                        instr.viewportScope = viewportScope;
                        return instr;
                    }));
                    clearViewportScopes = [];
                }
            } while (viewportInstructions.length > 0 || remainingInstructions.length > 0);
            await Promise.all(updatedScopeOwners.map((value) => value.loadContent()));
            await this.replacePaths(instruction);
            // this.updateNav();
            // Remove history entry if no history viewports updated
            if (instructionNavigation.new && !instructionNavigation.first && !instruction.repeating && updatedScopeOwners.every(viewport => viewport.options.noHistory)) {
                instruction.untracked = true;
            }
            updatedScopeOwners.forEach((viewport) => {
                viewport.finalizeContentChange();
            });
            this.lastNavigation = this.processingNavigation;
            if (this.lastNavigation.repeating) {
                this.lastNavigation.repeating = false;
            }
            this.processingNavigation = null;
            await this.navigator.finalize(instruction);
        };
        this.hookManager = new _hook_manager__WEBPACK_IMPORTED_MODULE_10__["HookManager"]();
    }
    get isNavigating() {
        return this.processingNavigation !== null;
    }
    get statefulHistory() {
        return this.options.statefulHistoryLength !== void 0 && this.options.statefulHistoryLength > 0;
    }
    activate(options) {
        if (this.isActive) {
            throw new Error('Router has already been activated');
        }
        this.isActive = true;
        this.options = {
            ...this.options,
            ...options
        };
        if (this.options.hooks !== void 0) {
            this.addHooks(this.options.hooks);
        }
        this.instructionResolver.activate({ separators: this.options.separators });
        this.navigator.activate(this, {
            callback: this.navigatorCallback,
            store: this.navigation,
            statefulHistoryLength: this.options.statefulHistoryLength,
            serializeCallback: this.statefulHistory ? this.navigatorSerializeCallback : void 0,
        });
        this.linkHandler.activate({ callback: this.linkCallback, useHref: this.options.useHref });
        this.navigation.activate({
            callback: this.browserNavigatorCallback,
            useUrlFragmentHash: this.options.useUrlFragmentHash
        });
        this.ensureRootScope();
    }
    async loadUrl() {
        const entry = {
            ...this.navigation.viewerState,
            ...{
                fullStateInstruction: '',
                replacing: true,
                fromBrowser: false,
            }
        };
        const result = this.navigator.navigate(entry);
        this.loadedFirst = true;
        return result;
    }
    deactivate() {
        if (!this.isActive) {
            throw new Error('Router has not been activated');
        }
        this.linkHandler.deactivate();
        this.navigator.deactivate();
        this.navigation.deactivate();
    }
    findScope(origin) {
        // this.ensureRootScope();
        if (origin === void 0 || origin === null) {
            return this.rootScope.scope;
        }
        if (origin instanceof _scope__WEBPACK_IMPORTED_MODULE_11__["Scope"] || origin instanceof _viewport__WEBPACK_IMPORTED_MODULE_8__["Viewport"]) {
            return origin.scope;
        }
        return this.getClosestScope(origin) || this.rootScope.scope;
    }
    findParentScope(container) {
        if (container === null) {
            return this.rootScope.scope;
        }
        // Already (prematurely) set on this view model so get it from container's parent instead
        if (container.has(ClosestScope, false)) {
            container = container.parent;
            if (container === null) {
                return this.rootScope.scope;
            }
        }
        if (container.has(ClosestScope, true)) {
            return container.get(ClosestScope);
        }
        return this.rootScope.scope;
    }
    // External API to get viewport by name
    getViewport(name) {
        return this.allViewports().find(viewport => viewport.name === name) || null;
    }
    // Called from the viewport scope custom element in created()
    setClosestScope(viewModelOrContainer, scope) {
        const container = this.getContainer(viewModelOrContainer);
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Registration"].instance(ClosestScope, scope).register(container);
    }
    getClosestScope(viewModelOrElement) {
        const container = 'resourceResolvers' in viewModelOrElement
            ? viewModelOrElement
            : this.getClosestContainer(viewModelOrElement);
        if (container === null) {
            return null;
        }
        if (!container.has(ClosestScope, true)) {
            return null;
        }
        return container.get(ClosestScope) || null;
    }
    unsetClosestScope(viewModelOrContainer) {
        const container = this.getContainer(viewModelOrContainer);
        // TODO: Get an 'unregister' on container
        container.resolvers.delete(ClosestScope);
    }
    // Called from the viewport custom element in attached()
    connectViewport(viewport, container, name, element, options) {
        const parentScope = this.findParentScope(container);
        if (viewport === null) {
            viewport = parentScope.addViewport(name, element, container, options);
            this.setClosestScope(container, viewport.connectedScope);
        }
        return viewport;
    }
    // Called from the viewport custom element
    disconnectViewport(viewport, container, element) {
        if (!viewport.connectedScope.parent.removeViewport(viewport, element, container)) {
            throw new Error(`Failed to remove viewport: ${viewport.name}`);
        }
        this.unsetClosestScope(container);
    }
    // Called from the viewport scope custom element in attached()
    connectViewportScope(viewportScope, name, container, element, options) {
        const parentScope = this.findParentScope(container);
        if (viewportScope === null) {
            viewportScope = parentScope.addViewportScope(name, element, options);
            this.setClosestScope(container, viewportScope.connectedScope);
        }
        return viewportScope;
    }
    // Called from the viewport scope custom element
    disconnectViewportScope(viewportScope, container) {
        if (!viewportScope.connectedScope.parent.removeViewportScope(viewportScope)) {
            throw new Error(`Failed to remove viewport scope: ${viewportScope.path}`);
        }
        this.unsetClosestScope(container);
    }
    allViewports(includeDisabled = false, includeReplaced = false) {
        // this.ensureRootScope();
        return this.rootScope.scope.allViewports(includeDisabled, includeReplaced);
    }
    goto(instructions, options) {
        options = options || {};
        // TODO: Review query extraction; different pos for path and fragment!
        if (typeof instructions === 'string' && !options.query) {
            const [path, search] = instructions.split('?');
            instructions = path;
            options.query = search;
        }
        const toOptions = {};
        if (options.origin) {
            toOptions.context = options.origin;
        }
        let scope = null;
        ({ instructions, scope } = _type_resolvers__WEBPACK_IMPORTED_MODULE_6__["NavigationInstructionResolver"].createViewportInstructions(this, instructions, toOptions));
        if (options.append && this.processingNavigation) {
            instructions = _type_resolvers__WEBPACK_IMPORTED_MODULE_6__["NavigationInstructionResolver"].toViewportInstructions(this, instructions);
            this.appendInstructions(instructions, scope);
            // Can't return current navigation promise since it can lead to deadlock in enter
            return Promise.resolve();
        }
        const entry = {
            instruction: instructions,
            fullStateInstruction: '',
            scope: scope,
            title: options.title,
            data: options.data,
            query: options.query,
            replacing: options.replace,
            repeating: options.append,
            fromBrowser: false,
        };
        return this.navigator.navigate(entry);
    }
    refresh() {
        return this.navigator.refresh();
    }
    back() {
        return this.navigator.go(-1);
    }
    forward() {
        return this.navigator.go(1);
    }
    checkActive(instructions) {
        for (const instruction of instructions) {
            const scopeInstructions = this.instructionResolver.matchScope(this.activeComponents, instruction.scope);
            const matching = scopeInstructions.filter(instr => instr.sameComponent(instruction, true));
            if (matching.length === 0) {
                return false;
            }
            if (Array.isArray(instruction.nextScopeInstructions)
                && instruction.nextScopeInstructions.length > 0
                && this.instructionResolver.matchChildren(instruction.nextScopeInstructions, matching.map(instr => Array.isArray(instr.nextScopeInstructions) ? instr.nextScopeInstructions : []).flat()) === false) {
                return false;
            }
        }
        return true;
    }
    setNav(name, routes, classes) {
        const nav = this.findNav(name);
        if (nav !== void 0 && nav !== null) {
            nav.routes = [];
        }
        this.addNav(name, routes, classes);
    }
    addNav(name, routes, classes) {
        let nav = this.navs[name];
        if (nav === void 0 || nav === null) {
            nav = this.navs[name] = new _nav__WEBPACK_IMPORTED_MODULE_4__["Nav"](this, name, [], classes);
        }
        nav.addRoutes(routes);
        nav.update();
    }
    updateNav(name) {
        const navs = name
            ? [name]
            : Object.keys(this.navs);
        for (const nav of navs) {
            if (this.navs[nav] !== void 0 && this.navs[nav] !== null) {
                this.navs[nav].update();
            }
        }
    }
    findNav(name) {
        return this.navs[name];
    }
    addRoutes(routes, context) {
        // TODO: This should add to the context instead
        // TODO: Add routes without context to rootScope content (which needs to be created)?
        return [];
        // const viewport = (context !== void 0 ? this.closestViewport(context) : this.rootScope) || this.rootScope as Viewport;
        // return viewport.addRoutes(routes);
    }
    removeRoutes(routes, context) {
        // TODO: This should remove from the context instead
        // const viewport = (context !== void 0 ? this.closestViewport(context) : this.rootScope) || this.rootScope as Viewport;
        // return viewport.removeRoutes(routes);
    }
    addHooks(hooks) {
        return hooks.map(hook => this.addHook(hook.hook, hook.options));
    }
    addHook(hook, options) {
        return this.hookManager.addHook(hook, options);
    }
    removeHooks(hooks) {
        return;
    }
    createViewportInstruction(component, viewport, parameters, ownsScope = true, nextScopeInstructions = null) {
        return this.instructionResolver.createViewportInstruction(component, viewport, parameters, ownsScope, nextScopeInstructions);
    }
    async findInstructions(scope, instruction, instructionScope, transformUrl = false) {
        let route = new _found_route__WEBPACK_IMPORTED_MODULE_9__["FoundRoute"]();
        if (typeof instruction === 'string') {
            instruction = transformUrl
                ? await this.hookManager.invokeTransformFromUrl(instruction, this.processingNavigation)
                : instruction;
            if (Array.isArray(instruction)) {
                route.instructions = instruction;
            }
            else {
                // TODO: Review this
                if (instruction === '/') {
                    instruction = '';
                }
                const instructions = this.instructionResolver.parseViewportInstructions(instruction);
                if (this.options.useConfiguredRoutes && !this.hasSiblingInstructions(instructions)) {
                    const foundRoute = scope.findMatchingRoute(instruction);
                    if (foundRoute !== null && foundRoute.foundConfiguration) {
                        route = foundRoute;
                    }
                    else {
                        if (this.options.useDirectRoutes) {
                            route.instructions = instructions;
                            if (route.instructions.length > 0) {
                                const nextInstructions = route.instructions[0].nextScopeInstructions || [];
                                route.remaining = this.instructionResolver.stringifyViewportInstructions(nextInstructions);
                                route.instructions[0].nextScopeInstructions = null;
                            }
                        }
                    }
                }
                else if (this.options.useDirectRoutes) {
                    route.instructions = instructions;
                }
            }
        }
        else {
            route.instructions = instruction;
        }
        for (const instr of route.instructions) {
            if (instr.scope === null) {
                instr.scope = instructionScope;
            }
        }
        return route;
    }
    hasSiblingInstructions(instructions) {
        if (instructions === null) {
            return false;
        }
        if (instructions.length > 1) {
            return true;
        }
        return instructions.some(instruction => this.hasSiblingInstructions(instruction.nextScopeInstructions));
    }
    appendInstructions(instructions, scope = null) {
        if (scope === null) {
            scope = this.rootScope.scope;
        }
        for (const instruction of instructions) {
            if (instruction.scope === null) {
                instruction.scope = scope;
            }
        }
        this.appendedInstructions.push(...instructions);
    }
    checkStale(name, instructions) {
        const staleCheck = this.staleChecks[name];
        if (staleCheck === void 0) {
            this.staleChecks[name] = instructions.slice();
            return false;
        }
        if (staleCheck.length !== instructions.length) {
            this.staleChecks[name] = instructions.slice();
            return false;
        }
        for (let i = 0, ii = instructions.length; i < ii; i++) {
            if (staleCheck[i] !== instructions[i]) {
                this.staleChecks[name] = instructions.slice();
                return false;
            }
        }
        return true;
    }
    unknownRoute(route) {
        if (typeof route !== 'string' || route.length === 0) {
            return;
        }
        if (this.options.useConfiguredRoutes && this.options.useDirectRoutes) {
            // TODO: Add missing/unknown route handling
            throw new Error(`No matching configured route or component found for '${route}'`);
        }
        else if (this.options.useConfiguredRoutes) {
            // TODO: Add missing/unknown route handling
            throw new Error(`No matching configured route found for '${route}'`);
        }
        else {
            // TODO: Add missing/unknown route handling
            throw new Error(`No matching route/component found for '${route}'`);
        }
    }
    findViewports(instructions, alreadyFound, withoutViewports = false) {
        const found = [];
        const remaining = [];
        while (instructions.length) {
            if (instructions[0].scope === null) {
                instructions[0].scope = this.rootScope.scope;
            }
            const scope = instructions[0].scope;
            const { foundViewports, remainingInstructions } = scope.findViewports(instructions.filter(instruction => instruction.scope === scope), alreadyFound, withoutViewports);
            found.push(...foundViewports);
            remaining.push(...remainingInstructions);
            instructions = instructions.filter(instruction => instruction.scope !== scope);
        }
        return { found: found.slice(), remaining };
    }
    async cancelNavigation(updatedScopeOwners, qInstruction) {
        // TODO: Take care of disabling viewports when cancelling and stateful!
        updatedScopeOwners.forEach((viewport) => {
            viewport.abortContentChange().catch(error => { throw error; });
        });
        await this.navigator.cancel(qInstruction);
        this.processingNavigation = null;
        qInstruction.resolve();
    }
    ensureRootScope() {
        if (!this.rootScope) {
            const root = this.container.get(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["Aurelia"]).root;
            // root.config.component shouldn't be used in the end. Metadata will probably eliminate it
            this.rootScope = new _viewport_scope__WEBPACK_IMPORTED_MODULE_12__["ViewportScope"]('rootScope', this, root.config.host, null, true, root.config.component);
        }
        return this.rootScope;
    }
    async replacePaths(instruction) {
        this.rootScope.scope.reparentViewportInstructions();
        let instructions = this.rootScope.scope.hoistedChildren
            .filter(scope => scope.viewportInstruction !== null && !scope.viewportInstruction.isEmpty())
            .map(scope => scope.viewportInstruction);
        instructions = this.instructionResolver.cloneViewportInstructions(instructions, true);
        // The following makes sure right viewport/viewport scopes are set and update
        // whether viewport name is necessary or not
        const alreadyFound = [];
        let { found, remaining } = this.findViewports(instructions, alreadyFound, true);
        let guard = 100;
        while (remaining.length) {
            // Guard against endless loop
            if (!guard--) {
                throw new Error('Failed to find viewport when updating viewer paths.');
            }
            alreadyFound.push(...found);
            ({ found, remaining } = this.findViewports(remaining, alreadyFound, true));
        }
        this.activeComponents = instructions;
        this.activeRoute = instruction.route;
        // First invoke with viewport instructions (should it perhaps get full state?)
        let state = await this.hookManager.invokeTransformToUrl(instructions, instruction);
        if (typeof state !== 'string') {
            // Convert to string if necessary
            state = this.instructionResolver.stringifyViewportInstructions(state, false, true);
        }
        // Invoke again with string
        state = await this.hookManager.invokeTransformToUrl(state, instruction);
        const query = (instruction.query && instruction.query.length ? `?${instruction.query}` : '');
        // if (instruction.path === void 0 || instruction.path.length === 0 || instruction.path === '/') {
        instruction.path = state + query;
        // }
        const fullViewportStates = [this.createViewportInstruction(this.instructionResolver.clearViewportInstruction)];
        fullViewportStates.push(...this.instructionResolver.cloneViewportInstructions(instructions, this.statefulHistory));
        instruction.fullStateInstruction = fullViewportStates;
        // TODO: Fetch and update title
        return Promise.resolve();
    }
    async freeComponents(instruction, excludeComponents, alreadyDone) {
        const component = instruction.componentInstance;
        const viewport = instruction.viewport;
        if (component === null || viewport === null || alreadyDone.some(done => done === component)) {
            return;
        }
        if (!excludeComponents.some(exclude => exclude === component)) {
            await viewport.freeContent(component);
            alreadyDone.push(component);
            return;
        }
        if (instruction.nextScopeInstructions !== null) {
            for (const nextInstruction of instruction.nextScopeInstructions) {
                await this.freeComponents(nextInstruction, excludeComponents, alreadyDone);
            }
        }
    }
    getClosestContainer(viewModelOrElement) {
        if ('context' in viewModelOrElement) {
            return viewModelOrElement.context;
        }
        if ('$controller' in viewModelOrElement) {
            return viewModelOrElement.$controller.context;
        }
        const controller = this.CustomElementFor(viewModelOrElement);
        if (controller === void 0) {
            return null;
        }
        return controller.context;
    }
    getContainer(viewModelOrContainer) {
        if ('resourceResolvers' in viewModelOrContainer) {
            return viewModelOrContainer;
        }
        if (Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["isRenderContext"])(viewModelOrContainer)) {
            return viewModelOrContainer.get(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["IContainer"]);
        }
        if ('$controller' in viewModelOrContainer) {
            return viewModelOrContainer.$controller.context.get(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["IContainer"]);
        }
        return null;
    }
    // TODO: This is probably wrong since it caused test fails when in CustomElement.for
    // Fred probably knows and will need to look at it
    // This can most likely also be changed so that the node traversal isn't necessary
    CustomElementFor(node) {
        let cur = node;
        while (cur !== null) {
            const nodeResourceName = cur.nodeName.toLowerCase();
            const controller = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Metadata"].getOwn(`${_aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["CustomElement"].name}:${nodeResourceName}`, cur)
                || _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Metadata"].getOwn(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["CustomElement"].name, cur);
            if (controller !== void 0) {
                return controller;
            }
            cur = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["DOM"].getEffectiveParentNode(cur);
        }
        return (void 0);
    }
}
Router.inject = [_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["IContainer"], _navigator__WEBPACK_IMPORTED_MODULE_5__["Navigator"], _browser_viewer_store__WEBPACK_IMPORTED_MODULE_13__["BrowserViewerStore"], _link_handler__WEBPACK_IMPORTED_MODULE_3__["LinkHandler"], _instruction_resolver__WEBPACK_IMPORTED_MODULE_2__["InstructionResolver"]];
//# sourceMappingURL=router.js.map

/***/ }),

/***/ "./node_modules/@aurelia/router/dist/esnext/scope.js":
/*!***********************************************************!*\
  !*** ./node_modules/@aurelia/router/dist/esnext/scope.js ***!
  \***********************************************************/
/*! exports provided: Scope */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Scope", function() { return Scope; });
/* harmony import */ var _viewport_scope__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./viewport-scope */ "./node_modules/@aurelia/router/dist/esnext/viewport-scope.js");
/* harmony import */ var _found_route__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./found-route */ "./node_modules/@aurelia/router/dist/esnext/found-route.js");
/* harmony import */ var _type_resolvers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./type-resolvers */ "./node_modules/@aurelia/router/dist/esnext/type-resolvers.js");
/* harmony import */ var _viewport__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./viewport */ "./node_modules/@aurelia/router/dist/esnext/viewport.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./utils */ "./node_modules/@aurelia/router/dist/esnext/utils.js");
/* harmony import */ var _collection__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./collection */ "./node_modules/@aurelia/router/dist/esnext/collection.js");
/* harmony import */ var _route_recognizer__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./route-recognizer */ "./node_modules/@aurelia/router/dist/esnext/route-recognizer.js");







class Scope {
    constructor(router, hasScope, owningScope, viewport = null, viewportScope = null, rootComponentType = null) {
        this.router = router;
        this.hasScope = hasScope;
        this.owningScope = owningScope;
        this.viewport = viewport;
        this.viewportScope = viewportScope;
        this.rootComponentType = rootComponentType;
        this.id = '.';
        this.parent = null;
        this.children = [];
        this.replacedChildren = [];
        this.path = null;
        this.enabled = true;
        // Support collection feature in viewport scopes
        this.childCollections = {};
        this.owningScope = owningScope || this;
        this.scope = this.hasScope ? this : this.owningScope;
    }
    get isViewport() {
        return this.viewport !== null;
    }
    get isViewportScope() {
        return this.viewportScope !== null;
    }
    get passThroughScope() {
        return this.isViewportScope && this.viewportScope.passThroughScope;
    }
    get owner() {
        if (this.isViewport) {
            return this.viewport;
        }
        if (this.isViewportScope) {
            return this.viewportScope;
        }
        return null;
    }
    get enabledChildren() {
        return this.children.filter(scope => scope.enabled);
    }
    get hoistedChildren() {
        const scopes = this.enabledChildren;
        while (scopes.some(scope => scope.passThroughScope)) {
            for (const scope of scopes.slice()) {
                if (scope.passThroughScope) {
                    const index = scopes.indexOf(scope);
                    scopes.splice(index, 1, ...scope.enabledChildren);
                }
            }
        }
        return scopes;
    }
    get enabledViewports() {
        return this.children.filter(scope => scope.isViewport && scope.enabled)
            .map(scope => scope.viewport);
    }
    get viewportInstruction() {
        if (this.isViewportScope) {
            return this.viewportScope.content;
        }
        if (this.isViewport) {
            return this.viewport.content.content;
        }
        return null;
    }
    getEnabledViewports(viewportScopes) {
        return viewportScopes.filter(scope => !scope.isViewportScope).map(scope => scope.viewport).reduce((viewports, viewport) => {
            viewports[viewport.name] = viewport;
            return viewports;
        }, {});
    }
    getOwnedViewports(includeDisabled = false) {
        return this.allViewports(includeDisabled).filter(viewport => viewport.owningScope === this);
    }
    getOwnedScopes(includeDisabled = false) {
        const scopes = this.allScopes(includeDisabled).filter(scope => scope.owningScope === this);
        // Hoist children to pass through scopes
        for (const scope of scopes.slice()) {
            if (scope.passThroughScope) {
                const index = scopes.indexOf(scope);
                scopes.splice(index, 1, ...scope.getOwnedScopes());
            }
        }
        return scopes;
    }
    // Note: This can't change state other than the instructions!
    findViewports(instructions, alreadyFound, disregardViewports = false) {
        const foundViewports = [];
        let remainingInstructions = [];
        const ownedScopes = this.getOwnedScopes();
        // Get a shallow copy of all available manual viewport scopes
        const viewportScopes = ownedScopes.filter(scope => scope.isViewportScope).map(scope => scope.viewportScope);
        const availableViewportScopes = viewportScopes.filter(viewportScope => alreadyFound.every(found => found.viewportScope !== viewportScope));
        // Get a shallow copy of all available viewports
        const availableViewports = { ...this.getEnabledViewports(ownedScopes) };
        for (const instruction of alreadyFound.filter(found => found.scope === this)) {
            availableViewports[instruction.viewportName] = null;
        }
        const viewportInstructions = new _collection__WEBPACK_IMPORTED_MODULE_5__["Collection"](...instructions.slice());
        let instruction = null;
        // The viewport scope is already known
        while ((instruction = viewportInstructions.next()) !== null) {
            if (instruction.viewportScope !== null && !this.router.instructionResolver.isAddViewportInstruction(instruction)) {
                remainingInstructions.push(...this.foundViewportScope(instruction, instruction.viewportScope));
                foundViewports.push(instruction);
                Object(_utils__WEBPACK_IMPORTED_MODULE_4__["arrayRemove"])(availableViewportScopes, available => available === instruction.viewportScope);
                viewportInstructions.removeCurrent();
            }
        }
        // The viewport is already known
        if (!disregardViewports) {
            while ((instruction = viewportInstructions.next()) !== null) {
                if (instruction.viewport) {
                    remainingInstructions.push(...this.foundViewport(instruction, instruction.viewport, disregardViewports));
                    foundViewports.push(instruction);
                    availableViewports[instruction.viewport.name] = null;
                    viewportInstructions.removeCurrent();
                }
            }
        }
        // Viewport scopes have priority
        while ((instruction = viewportInstructions.next()) !== null) {
            for (let viewportScope of viewportScopes) {
                if (viewportScope.acceptSegment(instruction.componentName)) {
                    if (Array.isArray(viewportScope.source)) {
                        // console.log('available', viewportScope.available, source);
                        let available = availableViewportScopes.find(available => available.name === viewportScope.name);
                        if (available === void 0 || this.router.instructionResolver.isAddViewportInstruction(instruction)) {
                            const item = viewportScope.addSourceItem();
                            available = this.getOwnedScopes()
                                .filter(scope => scope.isViewportScope)
                                .map(scope => scope.viewportScope)
                                .find(viewportScope => viewportScope.sourceItem === item);
                        }
                        viewportScope = available;
                    }
                    remainingInstructions.push(...this.foundViewportScope(instruction, viewportScope));
                    foundViewports.push(instruction);
                    Object(_utils__WEBPACK_IMPORTED_MODULE_4__["arrayRemove"])(availableViewportScopes, available => available === instruction.viewportScope);
                    viewportInstructions.removeCurrent();
                    break;
                }
            }
        }
        // Configured viewport is ruling
        while ((instruction = viewportInstructions.next()) !== null) {
            instruction.needsViewportDescribed = true;
            for (const name in availableViewports) {
                if (Object.prototype.hasOwnProperty.call(availableViewports, name)) {
                    const viewport = availableViewports[name];
                    // TODO: Also check if (resolved) component wants a specific viewport
                    if (viewport && viewport.wantComponent(instruction.componentName)) {
                        const remaining = this.foundViewport(instruction, viewport, disregardViewports, true);
                        foundViewports.push(instruction);
                        remainingInstructions.push(...remaining);
                        availableViewports[name] = null;
                        viewportInstructions.removeCurrent();
                        break;
                    }
                }
            }
        }
        // Next in line is specified viewport (but not if we're disregarding viewports)
        if (!disregardViewports) {
            while ((instruction = viewportInstructions.next()) !== null) {
                const name = instruction.viewportName;
                if (!name || !name.length) {
                    continue;
                }
                const newScope = instruction.ownsScope;
                if (!this.getEnabledViewports(ownedScopes)[name]) {
                    continue;
                    // TODO: No longer pre-creating viewports. Evaluate!
                    this.addViewport(name, null, null, { scope: newScope, forceDescription: true });
                    availableViewports[name] = this.getEnabledViewports(ownedScopes)[name];
                }
                const viewport = availableViewports[name];
                if (viewport && viewport.acceptComponent(instruction.componentName)) {
                    const remaining = this.foundViewport(instruction, viewport, disregardViewports, true);
                    foundViewports.push(instruction);
                    remainingInstructions.push(...remaining);
                    availableViewports[name] = null;
                    viewportInstructions.removeCurrent();
                }
            }
        }
        // Finally, only one accepting viewport left?
        while ((instruction = viewportInstructions.next()) !== null) {
            const remainingViewports = [];
            for (const name in availableViewports) {
                if (Object.prototype.hasOwnProperty.call(availableViewports, name)) {
                    const viewport = availableViewports[name];
                    if (viewport && viewport.acceptComponent(instruction.componentName)) {
                        remainingViewports.push(viewport);
                    }
                }
            }
            if (remainingViewports.length === 1) {
                const viewport = remainingViewports.shift();
                const remaining = this.foundViewport(instruction, viewport, disregardViewports, true);
                foundViewports.push(instruction);
                remainingInstructions.push(...remaining);
                availableViewports[viewport.name] = null;
                viewportInstructions.removeCurrent();
            }
        }
        // If we're ignoring viewports, we now match them anyway
        if (disregardViewports) {
            while ((instruction = viewportInstructions.next()) !== null) {
                let viewport = instruction.viewport;
                if (!viewport) {
                    const name = instruction.viewportName;
                    if (!name || !name.length) {
                        continue;
                    }
                    const newScope = instruction.ownsScope;
                    if (!this.getEnabledViewports(ownedScopes)[name]) {
                        continue;
                        // TODO: No longer pre-creating viewports. Evaluate!
                        this.addViewport(name, null, null, { scope: newScope, forceDescription: true });
                        availableViewports[name] = this.getEnabledViewports(ownedScopes)[name];
                    }
                    viewport = availableViewports[name];
                }
                if (viewport && viewport.acceptComponent(instruction.componentName)) {
                    const remaining = this.foundViewport(instruction, viewport, disregardViewports);
                    foundViewports.push(instruction);
                    remainingInstructions.push(...remaining);
                    availableViewports[viewport.name] = null;
                    viewportInstructions.removeCurrent();
                }
            }
        }
        remainingInstructions = [...viewportInstructions, ...remainingInstructions];
        return {
            foundViewports,
            remainingInstructions,
        };
    }
    foundViewportScope(instruction, viewportScope) {
        instruction.viewportScope = viewportScope;
        instruction.needsViewportDescribed = false;
        const remaining = (instruction.nextScopeInstructions || []).slice();
        for (const rem of remaining) {
            if (rem.scope === null) {
                rem.scope = viewportScope.scope.scope;
            }
        }
        return remaining;
    }
    foundViewport(instruction, viewport, withoutViewports, doesntNeedViewportDescribed = false) {
        instruction.setViewport(viewport);
        if (doesntNeedViewportDescribed) {
            instruction.needsViewportDescribed = false;
        }
        const remaining = (instruction.nextScopeInstructions || []).slice();
        for (const rem of remaining) {
            if (rem.scope === null) {
                rem.scope = viewport.scope;
            }
        }
        return remaining;
    }
    addViewport(name, element, container, options = {}) {
        let viewport = this.getEnabledViewports(this.getOwnedScopes())[name];
        // Each au-viewport element has its own Viewport
        if (element && viewport && viewport.element !== null && viewport.element !== element) {
            viewport.enabled = false;
            viewport = this.getOwnedViewports(true).find(child => child.name === name && child.element === element) || null;
            if (viewport) {
                viewport.enabled = true;
            }
        }
        if (!viewport) {
            viewport = new _viewport__WEBPACK_IMPORTED_MODULE_3__["Viewport"](this.router, name, null, null, this.scope, !!options.scope, options);
            this.addChild(viewport.connectedScope);
        }
        // TODO: Either explain why || instead of && here (might only need one) or change it to && if that should turn out to not be relevant
        if (element || container) {
            viewport.setElement(element, container, options);
        }
        return viewport;
    }
    removeViewport(viewport, element, container) {
        if ((!element && !container) || viewport.remove(element, container)) {
            this.removeChild(viewport.connectedScope);
            return true;
        }
        return false;
    }
    addViewportScope(name, element, options = {}) {
        const viewportScope = new _viewport_scope__WEBPACK_IMPORTED_MODULE_0__["ViewportScope"](name, this.router, element, this.scope, true, null, options);
        this.addChild(viewportScope.connectedScope);
        return viewportScope;
    }
    removeViewportScope(viewportScope) {
        // viewportScope.remove();
        this.removeChild(viewportScope.connectedScope);
        return true;
    }
    addChild(scope) {
        if (!this.children.some(vp => vp === scope)) {
            if (scope.parent !== null) {
                scope.parent.removeChild(scope);
            }
            this.children.push(scope);
            scope.parent = this;
        }
    }
    removeChild(scope) {
        const index = this.children.indexOf(scope);
        if (index >= 0) {
            this.children.splice(index, 1);
            scope.parent = null;
        }
    }
    clearReplacedChildren() {
        this.replacedChildren = [];
    }
    disableReplacedChildren() {
        this.replacedChildren = this.enabledChildren;
        for (const scope of this.replacedChildren) {
            scope.enabled = false;
        }
    }
    reenableReplacedChildren() {
        for (const scope of this.replacedChildren) {
            scope.enabled = true;
        }
    }
    allViewports(includeDisabled = false, includeReplaced = false) {
        return this.allScopes(includeDisabled, includeReplaced).filter(scope => scope.isViewport).map(scope => scope.viewport);
    }
    allScopes(includeDisabled = false, includeReplaced = false) {
        const scopes = includeDisabled ? this.children.slice() : this.enabledChildren;
        for (const scope of scopes.slice()) {
            scopes.push(...scope.allScopes(includeDisabled, includeReplaced));
        }
        return scopes;
    }
    reparentViewportInstructions() {
        const scopes = this.hoistedChildren
            .filter(scope => scope.viewportInstruction !== null && scope.viewportInstruction.componentName);
        if (!scopes.length) {
            return null;
        }
        for (const scope of scopes) {
            const childInstructions = scope.reparentViewportInstructions();
            scope.viewportInstruction.nextScopeInstructions =
                childInstructions !== null && childInstructions.length > 0 ? childInstructions : null;
        }
        return scopes.map(scope => scope.viewportInstruction);
    }
    findMatchingRoute(path) {
        if (this.isViewportScope && !this.passThroughScope) {
            return this.findMatchingRouteInRoutes(path, this.viewportScope.getRoutes());
        }
        if (this.isViewport) {
            return this.findMatchingRouteInRoutes(path, this.viewport.getRoutes());
        }
        // TODO: Match specified names here
        for (const child of this.enabledChildren) {
            const found = child.findMatchingRoute(path);
            if (found !== null) {
                return found;
            }
        }
        return null;
    }
    async canLeave() {
        const results = await Promise.all(this.children.map(child => child.viewport !== null
            ? child.viewport.canLeave()
            : child.canLeave()));
        return !results.some(result => result === false);
    }
    findMatchingRouteInRoutes(path, routes) {
        if (!Array.isArray(routes)) {
            return null;
        }
        routes = routes.map(route => this.ensureProperRoute(route));
        const cRoutes = routes.map(route => ({
            path: route.path,
            handler: route,
        }));
        for (let i = 0, ii = cRoutes.length; i < ii; ++i) {
            const cRoute = cRoutes[i];
            cRoutes.push({
                ...cRoute,
                path: `${cRoute.path}/*remainingPath`,
            });
        }
        const found = new _found_route__WEBPACK_IMPORTED_MODULE_1__["FoundRoute"]();
        let params = {};
        if (path.startsWith('/') || path.startsWith('+')) {
            path = path.slice(1);
        }
        const recognizer = new _route_recognizer__WEBPACK_IMPORTED_MODULE_6__["RouteRecognizer"]();
        recognizer.add(cRoutes);
        const result = recognizer.recognize(path);
        if (result !== null) {
            found.match = result.endpoint.route.handler;
            found.matching = path;
            const $params = { ...result.params };
            if ($params.remainingPath !== void 0) {
                found.remaining = $params.remainingPath;
                Reflect.deleteProperty($params, 'remainingPath');
                found.matching = found.matching.slice(0, found.matching.indexOf(found.remaining));
            }
            params = $params;
        }
        if (found.foundConfiguration) {
            // clone it so config doesn't get modified
            found.instructions = this.router.instructionResolver.cloneViewportInstructions(found.match.instructions, false, true);
            const instructions = found.instructions.slice();
            while (instructions.length > 0) {
                const instruction = instructions.shift();
                instruction.addParameters(params);
                instruction.route = '';
                if (instruction.nextScopeInstructions !== null) {
                    instructions.unshift(...instruction.nextScopeInstructions);
                }
            }
            if (found.instructions.length > 0) {
                found.instructions[0].route = found.matching;
            }
        }
        return found;
    }
    ensureProperRoute(route) {
        if (route.id === void 0) {
            route.id = route.path;
        }
        route.instructions = _type_resolvers__WEBPACK_IMPORTED_MODULE_2__["NavigationInstructionResolver"].toViewportInstructions(this.router, route.instructions);
        return route;
    }
}
//# sourceMappingURL=scope.js.map

/***/ }),

/***/ "./node_modules/@aurelia/router/dist/esnext/task-queue.js":
/*!****************************************************************!*\
  !*** ./node_modules/@aurelia/router/dist/esnext/task-queue.js ***!
  \****************************************************************/
/*! exports provided: QueueTask, TaskQueue */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "QueueTask", function() { return QueueTask; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaskQueue", function() { return TaskQueue; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");


class QueueTask {
    constructor(taskQueue, item, cost = 0) {
        this.taskQueue = taskQueue;
        this.item = item;
        this.cost = cost;
        this.done = false;
        this.promise = new Promise((resolve, reject) => {
            this.resolve = () => {
                this.taskQueue.resolve(this, resolve);
            };
            this.reject = (reason) => {
                this.taskQueue.reject(this, reject, reason);
            };
        });
    }
    async execute() {
        if ('execute' in this.item) {
            await this.item.execute(this);
        }
        else {
            await this.item(this);
        }
    }
    wait() {
        return this.promise;
    }
    canCancel() {
        return false;
    }
    cancel() { return; }
}
/**
 * A first-in-first-out task queue that only processes the next queued item
 * when the current one has been resolved or rejected. If a callback function
 * is specified, it receives the queued items as tasks one at a time. If no
 * callback is specified, the tasks themselves are either executed (if a
 * function) or the execute method in them are run. The executed function
 * should resolve or reject the task when processing is done.
 * Enqueued items' tasks can be awaited. Enqueued items can specify an
 * (arbitrary) execution cost and the queue can be set up (activated) to
 * only process a specific amount of execution cost per RAF/tick.
 */
class TaskQueue {
    constructor(callback) {
        this.callback = callback;
        this.pending = [];
        this.processing = null;
        this.allowedExecutionCostWithinTick = null;
        this.currentExecutionCostInCurrentTick = 0;
        this.scheduler = null;
        this.task = null;
    }
    get isActive() {
        return this.task !== null;
    }
    get length() {
        return this.pending.length;
    }
    activate(options) {
        if (this.isActive) {
            throw new Error('TaskQueue has already been activated');
        }
        this.scheduler = options.scheduler;
        this.allowedExecutionCostWithinTick = options.allowedExecutionCostWithinTick;
        this.task = this.scheduler.queueRenderTask(this.dequeue, { persistent: true });
    }
    deactivate() {
        if (!this.isActive) {
            throw new Error('TaskQueue has not been activated');
        }
        this.task.cancel();
        this.task = null;
        this.allowedExecutionCostWithinTick = null;
        this.clear();
    }
    enqueue(itemOrItems, costOrCosts) {
        const list = Array.isArray(itemOrItems);
        const items = (list ? itemOrItems : [itemOrItems]);
        const costs = items
            .map((value, index) => !Array.isArray(costOrCosts) ? costOrCosts : costOrCosts[index])
            .map((value) => value !== undefined ? value : 1);
        const tasks = [];
        for (const item of items) {
            tasks.push(item instanceof QueueTask
                ? item
                : this.createQueueTask(item, costs.shift())); // TODO: Get cancellable in as well
        }
        this.pending.push(...tasks);
        this.dequeue();
        return list ? tasks : tasks[0];
    }
    createQueueTask(item, cost) {
        return new QueueTask(this, item, cost);
    }
    dequeue(delta) {
        if (this.processing !== null) {
            return;
        }
        if (delta !== undefined) {
            this.currentExecutionCostInCurrentTick = 0;
        }
        if (!this.pending.length) {
            return;
        }
        if (this.allowedExecutionCostWithinTick !== null && delta === undefined && this.currentExecutionCostInCurrentTick + (this.pending[0].cost || 0) > this.allowedExecutionCostWithinTick) {
            return;
        }
        this.processing = this.pending.shift() || null;
        if (this.processing) {
            this.currentExecutionCostInCurrentTick += this.processing.cost || 0;
            if (this.callback !== void 0) {
                this.callback(this.processing);
            }
            else {
                // Don't need to await this since next task won't be dequeued until
                // executed function is resolved
                this.processing.execute().catch(error => { throw error; });
            }
        }
    }
    clear() {
        this.pending.splice(0, this.pending.length);
    }
    resolve(task, resolve) {
        resolve();
        this.processing = null;
        this.dequeue();
    }
    reject(task, reject, reason) {
        reject(reason);
        this.processing = null;
        this.dequeue();
    }
}
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["bound"],
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:type", Function),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Number]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:returntype", void 0)
], TaskQueue.prototype, "dequeue", null);
//# sourceMappingURL=task-queue.js.map

/***/ }),

/***/ "./node_modules/@aurelia/router/dist/esnext/type-resolvers.js":
/*!********************************************************************!*\
  !*** ./node_modules/@aurelia/router/dist/esnext/type-resolvers.js ***!
  \********************************************************************/
/*! exports provided: ComponentAppellationResolver, ViewportHandleResolver, NavigationInstructionResolver */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ComponentAppellationResolver", function() { return ComponentAppellationResolver; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ViewportHandleResolver", function() { return ViewportHandleResolver; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NavigationInstructionResolver", function() { return NavigationInstructionResolver; });
/* harmony import */ var _aurelia_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/runtime */ "./node_modules/@aurelia/runtime/dist/esnext/index.js");
/* harmony import */ var _viewport__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./viewport */ "./node_modules/@aurelia/router/dist/esnext/viewport.js");
/* harmony import */ var _viewport_instruction__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./viewport-instruction */ "./node_modules/@aurelia/router/dist/esnext/viewport-instruction.js");



const ComponentAppellationResolver = {
    isName: function (component) {
        return typeof component === 'string';
    },
    isType: function (component) {
        return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_0__["CustomElement"].isType(component);
    },
    isInstance: function (component) {
        return !ComponentAppellationResolver.isName(component) && !ComponentAppellationResolver.isType(component);
    },
    getName: function (component) {
        if (ComponentAppellationResolver.isName(component)) {
            return component;
        }
        else if (ComponentAppellationResolver.isType(component)) {
            return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_0__["CustomElement"].getDefinition(component).name;
        }
        else {
            return ComponentAppellationResolver.getName(component.constructor);
        }
    },
    getType: function (component) {
        if (ComponentAppellationResolver.isName(component)) {
            return null;
        }
        else if (ComponentAppellationResolver.isType(component)) {
            return component;
        }
        else {
            return component.constructor;
        }
    },
    getInstance: function (component) {
        if (ComponentAppellationResolver.isName(component) || ComponentAppellationResolver.isType(component)) {
            return null;
        }
        else {
            return component;
        }
    },
};
const ViewportHandleResolver = {
    isName: function (viewport) {
        return typeof viewport === 'string';
    },
    isInstance: function (viewport) {
        return viewport instanceof _viewport__WEBPACK_IMPORTED_MODULE_1__["Viewport"];
    },
    getName: function (viewport) {
        if (ViewportHandleResolver.isName(viewport)) {
            return viewport;
        }
        else {
            return viewport ? (viewport).name : null;
        }
    },
    getInstance: function (viewport) {
        if (ViewportHandleResolver.isName(viewport)) {
            return null;
        }
        else {
            return viewport;
        }
    },
};
const NavigationInstructionResolver = {
    createViewportInstructions: function (router, navigationInstructions, options) {
        options = options || {};
        let scope = null;
        if (options.context) {
            scope = router.findScope(options.context);
            if (typeof navigationInstructions === 'string') {
                // If it's not from scope root, figure out which scope
                if (!navigationInstructions.startsWith('/')) {
                    // Scope modifications
                    if (navigationInstructions.startsWith('.')) {
                        // The same as no scope modification
                        if (navigationInstructions.startsWith('./')) {
                            navigationInstructions = navigationInstructions.slice(2);
                        }
                        // Find out how many scopes upwards we should move
                        while (navigationInstructions.startsWith('../')) {
                            scope = scope.parent || scope;
                            navigationInstructions = navigationInstructions.slice(3);
                        }
                    }
                    if (scope.path !== null) {
                        navigationInstructions = `${scope.path}/${navigationInstructions}`;
                        scope = router.rootScope.scope;
                    }
                }
                else { // Specified root scope with /
                    scope = router.rootScope.scope;
                }
            }
            else {
                navigationInstructions = NavigationInstructionResolver.toViewportInstructions(router, navigationInstructions);
                for (const instruction of navigationInstructions) {
                    if (instruction.scope === null) {
                        instruction.scope = scope;
                    }
                }
            }
        }
        return {
            instructions: navigationInstructions,
            scope,
        };
    },
    toViewportInstructions: function (router, navigationInstructions) {
        if (!Array.isArray(navigationInstructions)) {
            return NavigationInstructionResolver.toViewportInstructions(router, [navigationInstructions]);
        }
        const instructions = [];
        for (const instruction of navigationInstructions) {
            if (typeof instruction === 'string') {
                instructions.push(...router.instructionResolver.parseViewportInstructions(instruction));
            }
            else if (instruction instanceof _viewport_instruction__WEBPACK_IMPORTED_MODULE_2__["ViewportInstruction"]) {
                instructions.push(instruction);
            }
            else if (instruction.component) {
                const viewportComponent = instruction;
                const newInstruction = router.createViewportInstruction(viewportComponent.component, viewportComponent.viewport, viewportComponent.parameters);
                if (viewportComponent.children !== void 0 && viewportComponent.children !== null) {
                    newInstruction.nextScopeInstructions = NavigationInstructionResolver.toViewportInstructions(router, viewportComponent.children);
                }
                instructions.push(newInstruction);
            }
            else {
                instructions.push(router.createViewportInstruction(instruction));
            }
        }
        return instructions;
    },
};
//# sourceMappingURL=type-resolvers.js.map

/***/ }),

/***/ "./node_modules/@aurelia/router/dist/esnext/utils.js":
/*!***********************************************************!*\
  !*** ./node_modules/@aurelia/router/dist/esnext/utils.js ***!
  \***********************************************************/
/*! exports provided: arrayRemove */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "arrayRemove", function() { return arrayRemove; });
function arrayRemove(arr, func) {
    const removed = [];
    let arrIndex = arr.findIndex(func);
    while (arrIndex >= 0) {
        removed.push(arr.splice(arrIndex, 1)[0]);
        arrIndex = arr.findIndex(func);
    }
    return removed;
}
//# sourceMappingURL=utils.js.map

/***/ }),

/***/ "./node_modules/@aurelia/router/dist/esnext/viewport-content.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@aurelia/router/dist/esnext/viewport-content.js ***!
  \**********************************************************************/
/*! exports provided: ContentStatus, ViewportContent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ContentStatus", function() { return ContentStatus; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ViewportContent", function() { return ViewportContent; });
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/runtime */ "./node_modules/@aurelia/runtime/dist/esnext/index.js");
/* harmony import */ var _parser__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./parser */ "./node_modules/@aurelia/router/dist/esnext/parser.js");
/* harmony import */ var _viewport_instruction__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./viewport-instruction */ "./node_modules/@aurelia/router/dist/esnext/viewport-instruction.js");




var ContentStatus;
(function (ContentStatus) {
    ContentStatus[ContentStatus["none"] = 0] = "none";
    ContentStatus[ContentStatus["created"] = 1] = "created";
    ContentStatus[ContentStatus["loaded"] = 2] = "loaded";
    ContentStatus[ContentStatus["initialized"] = 3] = "initialized";
    ContentStatus[ContentStatus["added"] = 4] = "added";
})(ContentStatus || (ContentStatus = {}));
class ViewportContent {
    constructor(
    // Can (and wants) be a (resolved) type or a string (to be resolved later)
    content = new _viewport_instruction__WEBPACK_IMPORTED_MODULE_3__["ViewportInstruction"](''), instruction = {
        instruction: '',
        fullStateInstruction: '',
    }, container = null) {
        this.content = content;
        this.instruction = instruction;
        this.contentStatus = 0 /* none */;
        this.entered = false;
        this.fromCache = false;
        this.fromHistory = false;
        this.reentry = false;
        // If we've got a container, we're good to resolve type
        if (!this.content.isComponentType() && container !== null) {
            this.content.componentType = this.toComponentType(container);
        }
    }
    get componentInstance() {
        return this.content.componentInstance;
    }
    get viewport() {
        return this.content.viewport;
    }
    equalComponent(other) {
        return this.content.sameComponent(other.content);
    }
    equalParameters(other) {
        return this.content.sameComponent(other.content, true) &&
            // TODO: Review whether query is relevant
            this.instruction.query === other.instruction.query;
    }
    reentryBehavior() {
        return (this.content.componentInstance !== null &&
            'reentryBehavior' in this.content.componentInstance &&
            this.content.componentInstance.reentryBehavior !== void 0)
            ? this.content.componentInstance.reentryBehavior
            : "default" /* default */;
    }
    isCacheEqual(other) {
        return this.content.sameComponent(other.content, true);
    }
    createComponent(container, fallback) {
        if (this.contentStatus !== 0 /* none */) {
            return;
        }
        // Don't load cached content or instantiated history content
        if (!this.fromCache && !this.fromHistory) {
            try {
                this.content.componentInstance = this.toComponentInstance(container);
            }
            catch (e) {
                if (fallback !== void 0) {
                    this.content.setParameters({ id: this.content.componentName });
                    this.content.setComponent(fallback);
                    try {
                        this.content.componentInstance = this.toComponentInstance(container);
                    }
                    catch (ee) {
                        throw e;
                    }
                }
                else {
                    throw e;
                }
            }
        }
        this.contentStatus = 1 /* created */;
    }
    destroyComponent() {
        // TODO: We might want to do something here eventually, who knows?
        if (this.contentStatus !== 1 /* created */) {
            return;
        }
        // Don't destroy components when stateful
        this.contentStatus = 0 /* none */;
    }
    async canEnter(viewport, previousInstruction) {
        if (!this.content.componentInstance) {
            return false;
        }
        if (!this.content.componentInstance.canEnter) {
            return true;
        }
        const typeParameters = this.content.componentType ? this.content.componentType.parameters : null;
        this.instruction.parameters = this.content.toSpecifiedParameters(typeParameters);
        const merged = { ...Object(_parser__WEBPACK_IMPORTED_MODULE_2__["parseQuery"])(this.instruction.query), ...this.instruction.parameters };
        const result = this.content.componentInstance.canEnter(merged, this.instruction, previousInstruction);
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].write(10000, 'viewport canEnter', result);
        if (typeof result === 'boolean') {
            return result;
        }
        if (typeof result === 'string') {
            return [viewport.router.createViewportInstruction(result, viewport)];
        }
        return result;
    }
    async canLeave(nextInstruction) {
        if (!this.content.componentInstance || !this.content.componentInstance.canLeave) {
            return true;
        }
        const result = this.content.componentInstance.canLeave(nextInstruction, this.instruction);
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].write(10000, 'viewport canLeave', result);
        if (typeof result === 'boolean') {
            return result;
        }
        return result;
    }
    async enter(previousInstruction) {
        // if (!this.reentry && (this.contentStatus !== ContentStatus.created || this.entered)) {
        if (!this.reentry && (this.contentStatus !== 2 /* loaded */ || this.entered)) {
            return;
        }
        if (this.content.componentInstance && this.content.componentInstance.enter) {
            const typeParameters = this.content.componentType ? this.content.componentType.parameters : null;
            this.instruction.parameters = this.content.toSpecifiedParameters(typeParameters);
            const merged = { ...Object(_parser__WEBPACK_IMPORTED_MODULE_2__["parseQuery"])(this.instruction.query), ...this.instruction.parameters };
            await this.content.componentInstance.enter(merged, this.instruction, previousInstruction);
        }
        this.entered = true;
    }
    async leave(nextInstruction) {
        if (this.contentStatus !== 4 /* added */ || !this.entered) {
            return;
        }
        if (this.content.componentInstance && this.content.componentInstance.leave) {
            await this.content.componentInstance.leave(nextInstruction, this.instruction);
        }
        this.entered = false;
    }
    // eslint-disable-next-line @typescript-eslint/require-await
    async loadComponent(container, element, viewport) {
        // if (this.contentStatus !== ContentStatus.created || !this.entered || !this.content.componentInstance) {
        if (this.contentStatus !== 1 /* created */ || this.entered || !this.content.componentInstance) {
            return;
        }
        // Don't load cached content or instantiated history content
        if (!this.fromCache || !this.fromHistory) {
            const host = element;
            const controller = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["Controller"].forCustomElement(this.content.componentInstance, container.get(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["ILifecycle"]), host, container, void 0, void 0);
            controller.parent = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["CustomElement"].for(element);
        }
        this.contentStatus = 2 /* loaded */;
    }
    unloadComponent(cache, stateful = false) {
        // TODO: We might want to do something here eventually, who knows?
        if (this.contentStatus !== 2 /* loaded */) {
            return;
        }
        // Don't unload components when stateful
        if (!stateful) {
            this.contentStatus = 1 /* created */;
        }
        else {
            cache.push(this);
        }
    }
    initializeComponent(parent) {
        if (this.contentStatus !== 2 /* loaded */) {
            return;
        }
        // Don't initialize cached content or instantiated history content
        // if (!this.fromCache || !this.fromHistory) {
        // ((this.content.componentInstance as IRouteableComponent).$controller as IController).parent = parent;
        this.content.componentInstance.$controller.bind(1024 /* fromStartTask */ | 4096 /* fromBind */);
        // }
        this.contentStatus = 3 /* initialized */;
    }
    async terminateComponent(stateful = false) {
        if (this.contentStatus !== 3 /* initialized */) {
            return;
        }
        // Don't terminate cached content
        // if (!stateful) {
        await this.content.componentInstance.$controller.unbind(2048 /* fromStopTask */ | 8192 /* fromUnbind */).wait();
        // ((this.content.componentInstance as IRouteableComponent).$controller as IController).parent = void 0;
        // }
        this.contentStatus = 2 /* loaded */;
    }
    addComponent(element) {
        if (this.contentStatus !== 3 /* initialized */) {
            return;
        }
        this.content.componentInstance.$controller.attach(1024 /* fromStartTask */);
        if (this.fromCache || this.fromHistory) {
            const elements = Array.from(element.getElementsByTagName('*'));
            for (const el of elements) {
                const attr = el.getAttribute('au-element-scroll');
                if (attr) {
                    const [top, left] = attr.split(',');
                    el.removeAttribute('au-element-scroll');
                    el.scrollTo(+left, +top);
                }
            }
        }
        this.contentStatus = 4 /* added */;
    }
    removeComponent(element, stateful = false) {
        if (this.contentStatus !== 4 /* added */ || this.entered) {
            return;
        }
        if (stateful && element !== null) {
            const elements = Array.from(element.getElementsByTagName('*'));
            for (const el of elements) {
                if (el.scrollTop > 0 || el.scrollLeft) {
                    el.setAttribute('au-element-scroll', `${el.scrollTop},${el.scrollLeft}`);
                }
            }
        }
        this.content.componentInstance.$controller.detach(2048 /* fromStopTask */);
        this.contentStatus = 3 /* initialized */;
    }
    async freeContent(element, nextInstruction, cache, stateful = false) {
        switch (this.contentStatus) {
            case 4 /* added */:
                await this.leave(nextInstruction);
                this.removeComponent(element, stateful);
            case 3 /* initialized */:
                await this.terminateComponent(stateful);
            case 2 /* loaded */:
                this.unloadComponent(cache, stateful);
            case 1 /* created */:
                this.destroyComponent();
        }
    }
    toComponentName() {
        return this.content.componentName;
    }
    toComponentType(container) {
        if (this.content.isEmpty()) {
            return null;
        }
        return this.content.toComponentType(container);
    }
    toComponentInstance(container) {
        if (this.content.isEmpty()) {
            return null;
        }
        return this.content.toComponentInstance(container);
    }
}
//# sourceMappingURL=viewport-content.js.map

/***/ }),

/***/ "./node_modules/@aurelia/router/dist/esnext/viewport-instruction.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@aurelia/router/dist/esnext/viewport-instruction.js ***!
  \**************************************************************************/
/*! exports provided: ParametersType, ViewportInstruction */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ParametersType", function() { return ParametersType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ViewportInstruction", function() { return ViewportInstruction; });
/* harmony import */ var _aurelia_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/runtime */ "./node_modules/@aurelia/runtime/dist/esnext/index.js");
/* harmony import */ var _type_resolvers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./type-resolvers */ "./node_modules/@aurelia/router/dist/esnext/type-resolvers.js");


var ParametersType;
(function (ParametersType) {
    ParametersType["none"] = "none";
    ParametersType["string"] = "string";
    ParametersType["array"] = "array";
    ParametersType["object"] = "object";
})(ParametersType || (ParametersType = {}));
class ViewportInstruction {
    constructor(component, viewport, parameters, ownsScope = true, nextScopeInstructions = null) {
        this.ownsScope = ownsScope;
        this.nextScopeInstructions = nextScopeInstructions;
        this.componentName = null;
        this.componentType = null;
        this.componentInstance = null;
        this.viewportName = null;
        this.viewport = null;
        this.parametersString = null;
        this.parametersRecord = null;
        this.parametersList = null;
        this.parametersType = "none" /* none */;
        this.scope = null;
        this.context = '';
        this.viewportScope = null;
        this.needsViewportDescribed = false;
        this.route = null;
        this.default = false;
        this.instructionResolver = null;
        this.setComponent(component);
        this.setViewport(viewport);
        this.setParameters(parameters);
    }
    get owner() {
        return this.viewport || this.viewportScope || null;
    }
    get typedParameters() {
        switch (this.parametersType) {
            case "string" /* string */:
                return this.parametersString;
            case "array" /* array */:
                return this.parametersList;
            case "object" /* object */:
                return this.parametersRecord;
            default:
                return null;
        }
    }
    get parameters() {
        if (this.instructionResolver !== null) {
            return this.instructionResolver.parseComponentParameters(this.typedParameters);
        }
        return [];
    }
    get normalizedParameters() {
        if (this.instructionResolver !== null && this.typedParameters !== null) {
            return this.instructionResolver.stringifyComponentParameters(this.parameters);
        }
        return '';
    }
    setComponent(component) {
        if (_type_resolvers__WEBPACK_IMPORTED_MODULE_1__["ComponentAppellationResolver"].isName(component)) {
            this.componentName = _type_resolvers__WEBPACK_IMPORTED_MODULE_1__["ComponentAppellationResolver"].getName(component);
            this.componentType = null;
            this.componentInstance = null;
        }
        else if (_type_resolvers__WEBPACK_IMPORTED_MODULE_1__["ComponentAppellationResolver"].isType(component)) {
            this.componentName = _type_resolvers__WEBPACK_IMPORTED_MODULE_1__["ComponentAppellationResolver"].getName(component);
            this.componentType = _type_resolvers__WEBPACK_IMPORTED_MODULE_1__["ComponentAppellationResolver"].getType(component);
            this.componentInstance = null;
        }
        else if (_type_resolvers__WEBPACK_IMPORTED_MODULE_1__["ComponentAppellationResolver"].isInstance(component)) {
            this.componentName = _type_resolvers__WEBPACK_IMPORTED_MODULE_1__["ComponentAppellationResolver"].getName(component);
            this.componentType = _type_resolvers__WEBPACK_IMPORTED_MODULE_1__["ComponentAppellationResolver"].getType(component);
            this.componentInstance = _type_resolvers__WEBPACK_IMPORTED_MODULE_1__["ComponentAppellationResolver"].getInstance(component);
        }
    }
    setViewport(viewport) {
        if (viewport === undefined || viewport === '') {
            viewport = null;
        }
        if (typeof viewport === 'string') {
            this.viewportName = viewport;
            this.viewport = null;
        }
        else {
            this.viewport = viewport;
            if (viewport !== null) {
                this.viewportName = viewport.name;
                this.scope = viewport.owningScope;
            }
        }
    }
    setParameters(parameters) {
        if (parameters === undefined || parameters === null || parameters === '') {
            this.parametersType = "none" /* none */;
            parameters = null;
        }
        else if (typeof parameters === 'string') {
            this.parametersType = "string" /* string */;
            this.parametersString = parameters;
        }
        else if (Array.isArray(parameters)) {
            this.parametersType = "array" /* array */;
            this.parametersList = parameters;
        }
        else {
            this.parametersType = "object" /* object */;
            this.parametersRecord = parameters;
        }
    }
    // This only works with objects added to objects!
    addParameters(parameters) {
        if (this.parametersType === "none" /* none */) {
            return this.setParameters(parameters);
        }
        if (this.parametersType !== "object" /* object */) {
            throw new Error('Can\'t add object parameters to existing non-object parameters!');
        }
        this.setParameters({ ...this.parametersRecord, ...parameters });
    }
    setInstructionResolver(instructionResolver) {
        this.instructionResolver = instructionResolver;
    }
    isEmpty() {
        return !this.isComponentName() && !this.isComponentType() && !this.isComponentInstance();
    }
    isComponentName() {
        return !!this.componentName && !this.isComponentType() && !this.isComponentInstance();
    }
    isComponentType() {
        return this.componentType !== null && !this.isComponentInstance();
    }
    isComponentInstance() {
        return this.componentInstance !== null;
    }
    toComponentType(container) {
        if (this.componentType !== null) {
            return this.componentType;
        }
        if (this.componentName !== null
            && typeof this.componentName === 'string'
            && container !== null
            && container.has(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_0__["CustomElement"].keyFrom(this.componentName), true)) {
            const resolver = container.getResolver(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_0__["CustomElement"].keyFrom(this.componentName));
            if (resolver !== null && resolver.getFactory !== void 0) {
                const factory = resolver.getFactory(container);
                if (factory) {
                    return factory.Type;
                }
            }
        }
        return null;
    }
    toComponentInstance(container) {
        if (this.componentInstance !== null) {
            return this.componentInstance;
        }
        if (container !== void 0 && container !== null) {
            if (this.isComponentType()) {
                return container.get(this.componentType);
            }
            else {
                return container.get(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_0__["CustomElement"].keyFrom(this.componentName));
            }
        }
        return null;
    }
    toViewportInstance(router) {
        if (this.viewport !== null) {
            return this.viewport;
        }
        return router.getViewport(this.viewportName);
    }
    toSpecifiedParameters(specifications) {
        specifications = specifications || [];
        const parameters = this.parameters;
        const specified = {};
        for (const spec of specifications) {
            // First get named if it exists
            let index = parameters.findIndex(param => param.key === spec);
            if (index >= 0) {
                const [parameter] = parameters.splice(index, 1);
                specified[spec] = parameter.value;
            }
            else {
                // Otherwise get first unnamed
                index = parameters.findIndex(param => param.key === void 0);
                if (index >= 0) {
                    const [parameter] = parameters.splice(index, 1);
                    specified[spec] = parameter.value;
                }
            }
        }
        // Add all remaining named
        for (const parameter of parameters.filter(param => param.key !== void 0)) {
            specified[parameter.key] = parameter.value;
        }
        let index = specifications.length;
        // Add all remaining unnamed...
        for (const parameter of parameters.filter(param => param.key === void 0)) {
            // ..with an index
            specified[index++] = parameter.value;
        }
        return specified;
    }
    toSortedParameters(specifications) {
        specifications = specifications || [];
        const parameters = this.parameters;
        const sorted = [];
        for (const spec of specifications) {
            // First get named if it exists
            let index = parameters.findIndex(param => param.key === spec);
            if (index >= 0) {
                const parameter = { ...parameters.splice(index, 1)[0] };
                parameter.key = void 0;
                sorted.push(parameter);
            }
            else {
                // Otherwise get first unnamed
                index = parameters.findIndex(param => param.key === void 0);
                if (index >= 0) {
                    const parameter = { ...parameters.splice(index, 1)[0] };
                    sorted.push(parameter);
                }
                else {
                    // Or an empty
                    sorted.push({ value: void 0 });
                }
            }
        }
        // Add all remaining named
        const params = parameters.filter(param => param.key !== void 0);
        params.sort((a, b) => (a.key || '') < (b.key || '') ? 1 : (b.key || '') < (a.key || '') ? -1 : 0);
        sorted.push(...params);
        // Add all remaining unnamed...
        sorted.push(...parameters.filter(param => param.key === void 0));
        return sorted;
    }
    sameComponent(other, compareParameters = false, compareType = false) {
        if (compareParameters && !this.sameParameters(other, compareType)) {
            return false;
        }
        return compareType ? this.componentType === other.componentType : this.componentName === other.componentName;
    }
    // TODO: Somewhere we need to check for format such as spaces etc
    sameParameters(other, compareType = false) {
        if (!this.sameComponent(other, false, compareType)) {
            return false;
        }
        const typeParameters = this.componentType ? this.componentType.parameters : [];
        const mine = this.toSpecifiedParameters(typeParameters);
        const others = other.toSpecifiedParameters(typeParameters);
        return Object.keys(mine).every(key => mine[key] === others[key])
            && Object.keys(others).every(key => others[key] === mine[key]);
    }
    sameViewport(other) {
        if (this.viewport !== null && other.viewport !== null) {
            return this.viewport === other.viewport;
        }
        return this.scope === other.scope &&
            (this.viewport ? this.viewport.name : this.viewportName) === (other.viewport ? other.viewport.name : other.viewportName);
    }
}
//# sourceMappingURL=viewport-instruction.js.map

/***/ }),

/***/ "./node_modules/@aurelia/router/dist/esnext/viewport-scope.js":
/*!********************************************************************!*\
  !*** ./node_modules/@aurelia/router/dist/esnext/viewport-scope.js ***!
  \********************************************************************/
/*! exports provided: ViewportScope */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ViewportScope", function() { return ViewportScope; });
/* harmony import */ var _viewport_instruction__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./viewport-instruction */ "./node_modules/@aurelia/router/dist/esnext/viewport-instruction.js");
/* harmony import */ var _scope__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./scope */ "./node_modules/@aurelia/router/dist/esnext/scope.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils */ "./node_modules/@aurelia/router/dist/esnext/utils.js");



class ViewportScope {
    constructor(name, router, element, owningScope, scope, rootComponentType = null, // temporary. Metadata will probably eliminate it
    options = {
        catches: [],
        source: null,
    }) {
        this.name = name;
        this.router = router;
        this.element = element;
        this.rootComponentType = rootComponentType;
        this.options = options;
        this.path = null;
        this.content = null;
        this.nextContent = null;
        this.available = true;
        this.sourceItem = null;
        this.sourceItemIndex = -1;
        this.remove = false;
        this.add = false;
        this.connectedScope = new _scope__WEBPACK_IMPORTED_MODULE_1__["Scope"](router, scope, owningScope, null, this);
        if (this.catches.length > 0) {
            this.content = router.createViewportInstruction(this.catches[0], this.name);
        }
    }
    get scope() {
        return this.connectedScope.scope;
    }
    get owningScope() {
        return this.connectedScope.owningScope;
    }
    get enabled() {
        return this.connectedScope.enabled;
    }
    set enabled(enabled) {
        this.connectedScope.enabled = enabled;
    }
    get isViewport() {
        return false;
    }
    get isViewportScope() {
        return true;
    }
    get isEmpty() {
        return this.content === null;
    }
    get passThroughScope() {
        return this.rootComponentType === null && this.catches.length === 0;
    }
    get siblings() {
        const parent = this.connectedScope.parent;
        if (parent === null) {
            return [this];
        }
        return parent.enabledChildren
            .filter(child => child.isViewportScope && child.viewportScope.name === this.name)
            .map(child => child.viewportScope);
    }
    get source() {
        return this.options.source || null;
    }
    get catches() {
        let catches = this.options.catches || [];
        if (typeof catches === 'string') {
            catches = catches.split(',');
        }
        return catches;
    }
    get default() {
        if (this.catches.length > 0) {
            return this.catches[0];
        }
    }
    setNextContent(content, instruction) {
        let viewportInstruction;
        if (content instanceof _viewport_instruction__WEBPACK_IMPORTED_MODULE_0__["ViewportInstruction"]) {
            viewportInstruction = content;
        }
        else {
            if (typeof content === 'string') {
                viewportInstruction = this.router.instructionResolver.parseViewportInstruction(content);
            }
            else {
                viewportInstruction = this.router.createViewportInstruction(content);
            }
        }
        viewportInstruction.viewportScope = this;
        this.remove = this.router.instructionResolver.isClearViewportInstruction(viewportInstruction)
            || this.router.instructionResolver.isClearAllViewportsInstruction(viewportInstruction);
        this.add = this.router.instructionResolver.isAddViewportInstruction(viewportInstruction)
            && Array.isArray(this.source);
        if (this.add) {
            viewportInstruction.componentName = null;
        }
        if (this.default !== void 0 && viewportInstruction.componentName === null) {
            viewportInstruction.componentName = this.default;
        }
        this.nextContent = viewportInstruction;
        return true;
    }
    canLeave() {
        return Promise.resolve(true);
    }
    canEnter() {
        return Promise.resolve(true);
    }
    enter() {
        return Promise.resolve(true);
    }
    loadContent() {
        this.content = !this.remove ? this.nextContent : null;
        this.nextContent = null;
        return Promise.resolve(true);
    }
    finalizeContentChange() {
        // console.log('ViewportScope finalizing', this.content);
        if (this.remove && Array.isArray(this.source)) {
            this.removeSourceItem();
        }
    }
    abortContentChange() {
        this.nextContent = null;
        if (this.add) {
            const index = this.source.indexOf(this.sourceItem);
            this.source.splice(index, 1);
            this.sourceItem = null;
        }
        return Promise.resolve();
    }
    acceptSegment(segment) {
        if (segment === null && segment === void 0 || segment.length === 0) {
            return true;
        }
        if (segment === this.router.instructionResolver.clearViewportInstruction
            || segment === this.router.instructionResolver.addViewportInstruction
            || segment === this.name) {
            return true;
        }
        if (this.catches.length === 0) {
            return true;
        }
        if (this.catches.includes(segment)) {
            return true;
        }
        if (this.catches.filter((value) => value.includes('*')).length) {
            return true;
        }
        return false;
    }
    beforeBind() {
        const source = this.source || [];
        if (source.length > 0 && this.sourceItem === null) {
            this.sourceItem = this.getAvailableSourceItem();
        }
    }
    beforeUnbind() {
        if (this.sourceItem !== null && this.source !== null) {
            Object(_utils__WEBPACK_IMPORTED_MODULE_2__["arrayRemove"])(this.source, (item) => item === this.sourceItem);
        }
        this.sourceItem = null;
    }
    getAvailableSourceItem() {
        if (this.source === null) {
            return null;
        }
        const siblings = this.siblings;
        for (const item of this.source) {
            if (siblings.every(sibling => sibling.sourceItem !== item)) {
                return item;
            }
        }
        return null;
    }
    addSourceItem() {
        const item = {};
        this.source.push(item);
        return item;
    }
    removeSourceItem() {
        this.sourceItemIndex = this.source.indexOf(this.sourceItem);
        if (this.sourceItemIndex >= 0) {
            this.source.splice(this.sourceItemIndex, 1);
        }
    }
    getRoutes() {
        if (this.rootComponentType !== null) {
            return this.rootComponentType.routes;
        }
        return null;
    }
}
//# sourceMappingURL=viewport-scope.js.map

/***/ }),

/***/ "./node_modules/@aurelia/router/dist/esnext/viewport.js":
/*!**************************************************************!*\
  !*** ./node_modules/@aurelia/router/dist/esnext/viewport.js ***!
  \**************************************************************/
/*! exports provided: Viewport */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Viewport", function() { return Viewport; });
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/runtime */ "./node_modules/@aurelia/runtime/dist/esnext/index.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils */ "./node_modules/@aurelia/router/dist/esnext/utils.js");
/* harmony import */ var _viewport_content__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./viewport-content */ "./node_modules/@aurelia/router/dist/esnext/viewport-content.js");
/* harmony import */ var _viewport_instruction__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./viewport-instruction */ "./node_modules/@aurelia/router/dist/esnext/viewport-instruction.js");
/* harmony import */ var _scope__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./scope */ "./node_modules/@aurelia/router/dist/esnext/scope.js");






class Viewport {
    constructor(router, name, element, container, owningScope, scope, options = {}) {
        this.router = router;
        this.name = name;
        this.element = element;
        this.container = container;
        this.options = options;
        this.nextContent = null;
        this.forceRemove = false;
        this.path = null;
        this.clear = false;
        this.elementResolve = null;
        this.previousViewportState = null;
        this.cache = [];
        this.historyCache = [];
        this.content = new _viewport_content__WEBPACK_IMPORTED_MODULE_3__["ViewportContent"]();
        this.connectedScope = new _scope__WEBPACK_IMPORTED_MODULE_5__["Scope"](router, scope, owningScope, this);
    }
    get scope() {
        return this.connectedScope.scope;
    }
    get owningScope() {
        return this.connectedScope.owningScope;
    }
    get enabled() {
        return this.connectedScope.enabled;
    }
    set enabled(enabled) {
        this.connectedScope.enabled = enabled;
    }
    get isViewport() {
        return true;
    }
    get isViewportScope() {
        return false;
    }
    get isEmpty() {
        return this.content.componentInstance === null;
    }
    get doForceRemove() {
        let scope = this.connectedScope;
        while (scope !== null) {
            if (scope.viewport !== null && scope.viewport.forceRemove) {
                return true;
            }
            scope = scope.parent;
        }
        return false;
    }
    setNextContent(content, instruction) {
        let viewportInstruction;
        if (content instanceof _viewport_instruction__WEBPACK_IMPORTED_MODULE_4__["ViewportInstruction"]) {
            viewportInstruction = content;
        }
        else {
            if (typeof content === 'string') {
                viewportInstruction = this.router.instructionResolver.parseViewportInstruction(content);
            }
            else {
                viewportInstruction = this.router.createViewportInstruction(content);
            }
        }
        viewportInstruction.setViewport(this);
        this.clear = this.router.instructionResolver.isClearViewportInstruction(viewportInstruction);
        // Can have a (resolved) type or a string (to be resolved later)
        this.nextContent = new _viewport_content__WEBPACK_IMPORTED_MODULE_3__["ViewportContent"](!this.clear ? viewportInstruction : void 0, instruction, this.container);
        this.nextContent.fromHistory = this.nextContent.componentInstance && instruction.navigation
            ? !!instruction.navigation.back || !!instruction.navigation.forward
            : false;
        if (this.options.stateful) {
            // TODO: Add a parameter here to decide required equality
            const cached = this.cache.find((item) => this.nextContent.isCacheEqual(item));
            if (cached) {
                this.nextContent = cached;
                this.nextContent.fromCache = true;
            }
            else {
                this.cache.push(this.nextContent);
            }
        }
        // Children that will be replaced (unless added again) by next content. Will
        // be re-enabled on cancel
        this.connectedScope.clearReplacedChildren();
        // If we get the same _instance_, don't do anything (happens with cached and history)
        if (this.nextContent.componentInstance !== null && this.content.componentInstance === this.nextContent.componentInstance) {
            this.nextContent = null;
            return false;
        }
        // ReentryBehavior 'refresh' takes precedence
        if (!this.content.equalComponent(this.nextContent) ||
            instruction.navigation.refresh ||
            this.content.reentryBehavior() === "refresh" /* refresh */) {
            this.connectedScope.disableReplacedChildren();
            return true;
        }
        // Explicitly don't allow navigation back to the same component again
        if (this.content.reentryBehavior() === "disallow" /* disallow */) {
            this.nextContent = null;
            return false;
        }
        // Explicitly re-enter same component again
        if (this.content.reentryBehavior() === "enter" /* enter */) {
            this.content.reentry = true;
            this.nextContent.content.setComponent(this.content.componentInstance);
            this.nextContent.contentStatus = this.content.contentStatus;
            this.nextContent.reentry = this.content.reentry;
            return true;
        }
        // ReentryBehavior is now 'default'
        // Requires updated parameters if viewport stateful
        if (this.options.stateful &&
            this.content.equalParameters(this.nextContent)) {
            this.nextContent = null;
            return false;
        }
        // Default is to trigger a refresh (without a check of parameters)
        this.connectedScope.disableReplacedChildren();
        return true;
    }
    setElement(element, container, options) {
        options = options || {};
        if (this.element !== element) {
            // TODO: Restore this state on navigation cancel
            this.previousViewportState = { ...this };
            this.clearState();
            this.element = element;
            if (options.usedBy) {
                this.options.usedBy = options.usedBy;
            }
            if (options.default) {
                this.options.default = options.default;
            }
            if (options.fallback) {
                this.options.fallback = options.fallback;
            }
            if (options.noLink) {
                this.options.noLink = options.noLink;
            }
            if (options.noHistory) {
                this.options.noHistory = options.noHistory;
            }
            if (options.stateful) {
                this.options.stateful = options.stateful;
            }
            if (this.elementResolve) {
                this.elementResolve();
            }
        }
        // TODO: Might not need this? Figure it out
        // if (container) {
        //   container['viewportName'] = this.name;
        // }
        if (this.container !== container) {
            this.container = container;
        }
        if (!this.content.componentInstance && (!this.nextContent || !this.nextContent.componentInstance) && this.options.default) {
            const instructions = this.router.instructionResolver.parseViewportInstructions(this.options.default);
            for (const instruction of instructions) {
                // Set to name to be delayed one turn
                instruction.setViewport(this.name);
                instruction.scope = this.owningScope;
                instruction.default = true;
            }
            this.router.goto(instructions, { append: true }).catch(error => { throw error; });
        }
    }
    async remove(element, container) {
        if (this.element === element && this.container === container) {
            if (this.content.componentInstance) {
                await this.content.freeContent(this.element, (this.nextContent ? this.nextContent.instruction : null), this.historyCache, this.doForceRemove ? false : this.router.statefulHistory || this.options.stateful); // .catch(error => { throw error; });
            }
            if (this.doForceRemove) {
                await Promise.all(this.historyCache.map(content => content.freeContent(null, null, this.historyCache, false)));
                this.historyCache = [];
            }
            return true;
        }
        return false;
    }
    async canLeave() {
        const canLeaveChildren = await this.connectedScope.canLeave();
        if (!canLeaveChildren) {
            return false;
        }
        return this.content.canLeave(this.nextContent ? this.nextContent.instruction : null);
    }
    async canEnter() {
        if (this.clear) {
            return true;
        }
        if ((this.nextContent.content || null) === null) {
            return false;
        }
        await this.waitForElement();
        this.nextContent.createComponent(this.container, this.options.fallback);
        await this.nextContent.loadComponent(this.container, this.element, this);
        return this.nextContent.canEnter(this, this.content.instruction);
    }
    async enter() {
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].write(10000, 'Viewport enter', this.name);
        if (this.clear) {
            return true;
        }
        if (!this.nextContent || !this.nextContent.componentInstance) {
            return false;
        }
        await this.nextContent.enter(this.content.instruction);
        // await this.nextContent.loadComponent(this.container as IContainer, this.element as Element, this);
        this.nextContent.initializeComponent(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["CustomElement"].for(this.element));
        return true;
    }
    async loadContent() {
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].write(10000, 'Viewport loadContent', this.name);
        // No need to wait for next component activation
        if (this.content.componentInstance && !this.nextContent.componentInstance) {
            await this.content.leave(this.nextContent.instruction);
            await this.unloadContent();
        }
        if (this.nextContent.componentInstance) {
            if (this.content.componentInstance !== this.nextContent.componentInstance) {
                this.nextContent.addComponent(this.element);
            }
            else {
                this.connectedScope.reenableReplacedChildren();
            }
            // Only when next component activation is done
            if (this.content.componentInstance) {
                await this.content.leave(this.nextContent.instruction);
                if (!this.content.reentry && this.content.componentInstance !== this.nextContent.componentInstance) {
                    await this.unloadContent();
                }
            }
            this.content = this.nextContent;
            this.content.reentry = false;
        }
        if (this.clear) {
            this.content = new _viewport_content__WEBPACK_IMPORTED_MODULE_3__["ViewportContent"](void 0, this.nextContent.instruction);
        }
        this.nextContent = null;
        return true;
    }
    finalizeContentChange() {
        this.previousViewportState = null;
        this.connectedScope.clearReplacedChildren();
    }
    async abortContentChange() {
        this.connectedScope.reenableReplacedChildren();
        await this.nextContent.freeContent(this.element, this.nextContent.instruction, this.historyCache, this.router.statefulHistory || this.options.stateful);
        if (this.previousViewportState) {
            Object.assign(this, this.previousViewportState);
        }
    }
    // TODO: Deal with non-string components
    wantComponent(component) {
        let usedBy = this.options.usedBy || [];
        if (typeof usedBy === 'string') {
            usedBy = usedBy.split(',');
        }
        return usedBy.includes(component);
    }
    // TODO: Deal with non-string components
    acceptComponent(component) {
        if (component === '-' || component === null) {
            return true;
        }
        let usedBy = this.options.usedBy;
        if (!usedBy || !usedBy.length) {
            return true;
        }
        if (typeof usedBy === 'string') {
            usedBy = usedBy.split(',');
        }
        if (usedBy.includes(component)) {
            return true;
        }
        if (usedBy.filter((value) => value.includes('*')).length) {
            return true;
        }
        return false;
    }
    beforeBind(flags) {
        if (this.content.componentInstance) {
            this.content.initializeComponent(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["CustomElement"].for(this.element));
        }
    }
    async beforeAttach(flags) {
        this.enabled = true;
        if (this.content.componentInstance) {
            // Only acts if not already entered
            await this.content.enter(this.content.instruction);
            this.content.addComponent(this.element);
        }
    }
    async beforeDetach(flags) {
        if (this.content.componentInstance) {
            // Only acts if not already left
            await this.content.leave(this.content.instruction);
            this.content.removeComponent(this.element, this.doForceRemove ? false : this.router.statefulHistory || this.options.stateful);
        }
        this.enabled = false;
    }
    async beforeUnbind(flags) {
        if (this.content.componentInstance) {
            await this.content.terminateComponent(this.doForceRemove ? false : this.router.statefulHistory || this.options.stateful);
        }
    }
    async freeContent(component) {
        const content = this.historyCache.find(cached => cached.componentInstance === component);
        if (content !== void 0) {
            this.forceRemove = true;
            await content.freeContent(null, null, this.historyCache, false);
            this.forceRemove = false;
            Object(_utils__WEBPACK_IMPORTED_MODULE_2__["arrayRemove"])(this.historyCache, (cached => cached === content));
        }
    }
    getRoutes() {
        let componentType = this.nextContent !== null
            && this.nextContent.content !== null
            ? this.nextContent.content.componentType
            : this.content.content.componentType;
        // TODO: This is going away once Metadata is in!
        if (componentType === null || componentType === void 0) {
            const controller = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["CustomElement"].for(this.element);
            componentType = controller.context.componentType;
        }
        if (componentType === null || componentType === void 0) {
            return null;
        }
        const routes = componentType.routes;
        return Array.isArray(routes) ? routes : null;
    }
    async unloadContent() {
        this.content.removeComponent(this.element, this.router.statefulHistory || this.options.stateful);
        await this.content.terminateComponent(this.router.statefulHistory || this.options.stateful);
        this.content.unloadComponent(this.historyCache, this.router.statefulHistory || this.options.stateful);
        this.content.destroyComponent();
    }
    clearState() {
        this.options = {};
        this.content = new _viewport_content__WEBPACK_IMPORTED_MODULE_3__["ViewportContent"]();
        this.cache = [];
    }
    async waitForElement() {
        if (this.element) {
            return Promise.resolve();
        }
        return new Promise((resolve) => {
            this.elementResolve = resolve;
        });
    }
}
//# sourceMappingURL=viewport.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime-html-browser/dist/esnext/index.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime-html-browser/dist/esnext/index.js ***!
  \*************************************************************************/
/*! exports provided: IDOMInitializerRegistration, DefaultComponents, RuntimeHtmlBrowserConfiguration, BrowserDOMInitializer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IDOMInitializerRegistration", function() { return IDOMInitializerRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DefaultComponents", function() { return DefaultComponents; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RuntimeHtmlBrowserConfiguration", function() { return RuntimeHtmlBrowserConfiguration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BrowserDOMInitializer", function() { return BrowserDOMInitializer; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aurelia/runtime */ "./node_modules/@aurelia/runtime/dist/esnext/index.js");
/* harmony import */ var _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @aurelia/runtime-html */ "./node_modules/@aurelia/runtime-html/dist/esnext/index.js");
/* harmony import */ var _aurelia_scheduler_dom__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @aurelia/scheduler-dom */ "./node_modules/@aurelia/scheduler-dom/dist/esnext/index.js");





let BrowserDOMInitializer = class BrowserDOMInitializer {
    constructor(container) {
        this.container = container;
    }
    static register(container) {
        return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Registration"].singleton(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["IDOMInitializer"], this).register(container);
    }
    initialize(config) {
        if (this.container.has(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["IDOM"], false)) {
            return this.container.get(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["IDOM"]);
        }
        let dom;
        if (config !== undefined) {
            if (config.dom !== undefined) {
                dom = config.dom;
            }
            else if (config.host.ownerDocument !== null) {
                dom = new _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_3__["HTMLDOM"](window, config.host.ownerDocument, Node, Element, HTMLElement, CustomEvent, CSSStyleSheet, ShadowRoot);
            }
            else {
                dom = new _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_3__["HTMLDOM"](window, document, Node, Element, HTMLElement, CustomEvent, CSSStyleSheet, ShadowRoot);
            }
        }
        else {
            dom = new _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_3__["HTMLDOM"](window, document, Node, Element, HTMLElement, CustomEvent, CSSStyleSheet, ShadowRoot);
        }
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Registration"].instance(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["IDOM"], dom).register(this.container);
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Registration"].instance(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["IScheduler"], Object(_aurelia_scheduler_dom__WEBPACK_IMPORTED_MODULE_4__["createDOMScheduler"])(this.container, window)).register(this.container);
        return dom;
    }
};
BrowserDOMInitializer = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(0, _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["IContainer"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object])
], BrowserDOMInitializer);
const IDOMInitializerRegistration = BrowserDOMInitializer;
/**
 * Default HTML-specific, browser-specific implementations for the following interfaces:
 * - `IDOMInitializer`
 */
const DefaultComponents = [
    IDOMInitializerRegistration,
];
/**
 * A DI configuration object containing html-specific, browser-specific registrations:
 * - `RuntimeHtmlConfiguration` from `@aurelia/runtime-html`
 * - `DefaultComponents`
 */
const RuntimeHtmlBrowserConfiguration = {
    /**
     * Apply this configuration to the provided container.
     */
    register(container) {
        return _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_3__["RuntimeHtmlConfiguration"]
            .register(container)
            .register(...DefaultComponents);
    },
    /**
     * Create a new container with this configuration applied to it.
     */
    createContainer() {
        return this.register(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["DI"].createContainer());
    }
};

//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime-html/dist/esnext/binding/attribute.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime-html/dist/esnext/binding/attribute.js ***!
  \*****************************************************************************/
/*! exports provided: AttributeBinding */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AttributeBinding", function() { return AttributeBinding; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aurelia/runtime */ "./node_modules/@aurelia/runtime/dist/esnext/index.js");
/* harmony import */ var _observation_element_attribute_observer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../observation/element-attribute-observer */ "./node_modules/@aurelia/runtime-html/dist/esnext/observation/element-attribute-observer.js");




// BindingMode is not a const enum (and therefore not inlined), so assigning them to a variable to save a member accessor is a minor perf tweak
const { oneTime, toView, fromView } = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["BindingMode"];
// pre-combining flags for bitwise checks is a minor perf tweak
const toViewOrOneTime = toView | oneTime;
/**
 * Attribute binding. Handle attribute binding betwen view/view model. Understand Html special attributes
 */
let AttributeBinding = class AttributeBinding {
    constructor(sourceExpression, target, 
    // some attributes may have inner structure
    // such as class -> collection of class names
    // such as style -> collection of style rules
    //
    // for normal attributes, targetAttribute and targetProperty are the same and can be ignore
    targetAttribute, targetProperty, mode, observerLocator, locator) {
        this.sourceExpression = sourceExpression;
        this.targetAttribute = targetAttribute;
        this.targetProperty = targetProperty;
        this.mode = mode;
        this.observerLocator = observerLocator;
        this.locator = locator;
        this.interceptor = this;
        this.$state = 0 /* none */;
        this.$scope = null;
        this.persistentFlags = 0 /* none */;
        this.target = target;
        _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["connectable"].assignIdTo(this);
        this.$scheduler = locator.get(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["IScheduler"]);
    }
    updateTarget(value, flags) {
        flags |= this.persistentFlags;
        this.targetObserver.setValue(value, flags | 16 /* updateTargetInstance */);
    }
    updateSource(value, flags) {
        flags |= this.persistentFlags;
        this.sourceExpression.assign(flags | 32 /* updateSourceExpression */, this.$scope, this.locator, value);
    }
    handleChange(newValue, _previousValue, flags) {
        if (!(this.$state & 4 /* isBound */)) {
            return;
        }
        flags |= this.persistentFlags;
        if (this.mode === _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["BindingMode"].fromView) {
            flags &= ~16 /* updateTargetInstance */;
            flags |= 32 /* updateSourceExpression */;
        }
        if (flags & 16 /* updateTargetInstance */) {
            const previousValue = this.targetObserver.getValue();
            // if the only observable is an AccessScope then we can assume the passed-in newValue is the correct and latest value
            if (this.sourceExpression.$kind !== 10082 /* AccessScope */ || this.observerSlots > 1) {
                newValue = this.sourceExpression.evaluate(flags, this.$scope, this.locator, this.part);
            }
            if (newValue !== previousValue) {
                this.interceptor.updateTarget(newValue, flags);
            }
            if ((this.mode & oneTime) === 0) {
                this.version++;
                this.sourceExpression.connect(flags, this.$scope, this.interceptor, this.part);
                this.interceptor.unobserve(false);
            }
            return;
        }
        if (flags & 32 /* updateSourceExpression */) {
            if (newValue !== this.sourceExpression.evaluate(flags, this.$scope, this.locator, this.part)) {
                this.interceptor.updateSource(newValue, flags);
            }
            return;
        }
        throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Reporter"].error(15, flags);
    }
    $bind(flags, scope, part) {
        if (this.$state & 4 /* isBound */) {
            if (this.$scope === scope) {
                return;
            }
            this.interceptor.$unbind(flags | 4096 /* fromBind */);
        }
        // add isBinding flag
        this.$state |= 1 /* isBinding */;
        // Store flags which we can only receive during $bind and need to pass on
        // to the AST during evaluate/connect/assign
        this.persistentFlags = flags & 2080374799 /* persistentBindingFlags */;
        this.$scope = scope;
        this.part = part;
        let sourceExpression = this.sourceExpression;
        if (Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["hasBind"])(sourceExpression)) {
            sourceExpression.bind(flags, scope, this.interceptor);
        }
        let targetObserver = this.targetObserver;
        if (!targetObserver) {
            targetObserver = this.targetObserver = new _observation_element_attribute_observer__WEBPACK_IMPORTED_MODULE_3__["AttributeObserver"](this.$scheduler, flags, this.observerLocator, this.target, this.targetProperty, this.targetAttribute);
        }
        if (targetObserver.bind) {
            targetObserver.bind(flags);
        }
        // during bind, binding behavior might have changed sourceExpression
        sourceExpression = this.sourceExpression;
        if (this.mode & toViewOrOneTime) {
            this.interceptor.updateTarget(sourceExpression.evaluate(flags, scope, this.locator, part), flags);
        }
        if (this.mode & toView) {
            sourceExpression.connect(flags, scope, this, part);
        }
        if (this.mode & fromView) {
            targetObserver[this.id] |= 32 /* updateSourceExpression */;
            targetObserver.subscribe(this.interceptor);
        }
        // add isBound flag and remove isBinding flag
        this.$state |= 4 /* isBound */;
        this.$state &= ~1 /* isBinding */;
    }
    $unbind(flags) {
        if (!(this.$state & 4 /* isBound */)) {
            return;
        }
        // add isUnbinding flag
        this.$state |= 2 /* isUnbinding */;
        // clear persistent flags
        this.persistentFlags = 0 /* none */;
        if (Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["hasUnbind"])(this.sourceExpression)) {
            this.sourceExpression.unbind(flags, this.$scope, this.interceptor);
        }
        this.$scope = null;
        if (this.targetObserver.unbind) {
            this.targetObserver.unbind(flags);
        }
        if (this.targetObserver.unsubscribe) {
            this.targetObserver.unsubscribe(this.interceptor);
            this.targetObserver[this.id] &= ~32 /* updateSourceExpression */;
        }
        this.interceptor.unobserve(true);
        // remove isBound and isUnbinding flags
        this.$state &= ~(4 /* isBound */ | 2 /* isUnbinding */);
    }
    connect(flags) {
        if (this.$state & 4 /* isBound */) {
            flags |= this.persistentFlags;
            this.sourceExpression.connect(flags | 2097152 /* mustEvaluate */, this.$scope, this.interceptor, this.part); // why do we have a connect method here in the first place? will this be called after bind?
        }
    }
};
AttributeBinding = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["connectable"])(),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object, Object, String, String, Number, Object, Object])
], AttributeBinding);

//# sourceMappingURL=attribute.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime-html/dist/esnext/binding/listener.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime-html/dist/esnext/binding/listener.js ***!
  \****************************************************************************/
/*! exports provided: Listener */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Listener", function() { return Listener; });
/* harmony import */ var _aurelia_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/runtime */ "./node_modules/@aurelia/runtime/dist/esnext/index.js");

/**
 * Listener binding. Handle event binding between view and view model
 */
class Listener {
    constructor(dom, targetEvent, delegationStrategy, sourceExpression, target, preventDefault, eventManager, locator) {
        this.dom = dom;
        this.targetEvent = targetEvent;
        this.delegationStrategy = delegationStrategy;
        this.sourceExpression = sourceExpression;
        this.target = target;
        this.preventDefault = preventDefault;
        this.eventManager = eventManager;
        this.locator = locator;
        this.interceptor = this;
        this.$state = 0 /* none */;
    }
    callSource(event) {
        const overrideContext = this.$scope.overrideContext;
        overrideContext.$event = event;
        const result = this.sourceExpression.evaluate(2097152 /* mustEvaluate */, this.$scope, this.locator, this.part);
        Reflect.deleteProperty(overrideContext, '$event');
        if (result !== true && this.preventDefault) {
            event.preventDefault();
        }
        return result;
    }
    handleEvent(event) {
        this.interceptor.callSource(event);
    }
    $bind(flags, scope, part) {
        if (this.$state & 4 /* isBound */) {
            if (this.$scope === scope) {
                return;
            }
            this.interceptor.$unbind(flags | 4096 /* fromBind */);
        }
        // add isBinding flag
        this.$state |= 1 /* isBinding */;
        this.$scope = scope;
        this.part = part;
        const sourceExpression = this.sourceExpression;
        if (Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_0__["hasBind"])(sourceExpression)) {
            sourceExpression.bind(flags, scope, this.interceptor);
        }
        this.handler = this.eventManager.addEventListener(this.dom, this.target, this.targetEvent, this.interceptor, this.delegationStrategy);
        // add isBound flag and remove isBinding flag
        this.$state |= 4 /* isBound */;
        this.$state &= ~1 /* isBinding */;
    }
    $unbind(flags) {
        if (!(this.$state & 4 /* isBound */)) {
            return;
        }
        // add isUnbinding flag
        this.$state |= 2 /* isUnbinding */;
        const sourceExpression = this.sourceExpression;
        if (Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_0__["hasUnbind"])(sourceExpression)) {
            sourceExpression.unbind(flags, this.$scope, this.interceptor);
        }
        this.$scope = null;
        this.handler.dispose();
        this.handler = null;
        // remove isBound and isUnbinding flags
        this.$state &= ~(4 /* isBound */ | 2 /* isUnbinding */);
    }
    observeProperty(flags, obj, propertyName) {
        return;
    }
    handleChange(newValue, previousValue, flags) {
        return;
    }
}
//# sourceMappingURL=listener.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime-html/dist/esnext/configuration.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime-html/dist/esnext/configuration.js ***!
  \*************************************************************************/
/*! exports provided: IProjectorLocatorRegistration, ITargetAccessorLocatorRegistration, ITargetObserverLocatorRegistration, DefaultComponents, AttrBindingBehaviorRegistration, SelfBindingBehaviorRegistration, UpdateTriggerBindingBehaviorRegistration, ComposeRegistration, PortalRegistration, FocusRegistration, BlurRegistration, DefaultResources, ListenerBindingRendererRegistration, AttributeBindingRendererRegistration, SetAttributeRendererRegistration, SetClassAttributeRendererRegistration, SetStyleAttributeRendererRegistration, StylePropertyBindingRendererRegistration, TextBindingRendererRegistration, DefaultRenderers, RuntimeHtmlConfiguration */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IProjectorLocatorRegistration", function() { return IProjectorLocatorRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ITargetAccessorLocatorRegistration", function() { return ITargetAccessorLocatorRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ITargetObserverLocatorRegistration", function() { return ITargetObserverLocatorRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DefaultComponents", function() { return DefaultComponents; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AttrBindingBehaviorRegistration", function() { return AttrBindingBehaviorRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SelfBindingBehaviorRegistration", function() { return SelfBindingBehaviorRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UpdateTriggerBindingBehaviorRegistration", function() { return UpdateTriggerBindingBehaviorRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ComposeRegistration", function() { return ComposeRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PortalRegistration", function() { return PortalRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FocusRegistration", function() { return FocusRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BlurRegistration", function() { return BlurRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DefaultResources", function() { return DefaultResources; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ListenerBindingRendererRegistration", function() { return ListenerBindingRendererRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AttributeBindingRendererRegistration", function() { return AttributeBindingRendererRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SetAttributeRendererRegistration", function() { return SetAttributeRendererRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SetClassAttributeRendererRegistration", function() { return SetClassAttributeRendererRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SetStyleAttributeRendererRegistration", function() { return SetStyleAttributeRendererRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StylePropertyBindingRendererRegistration", function() { return StylePropertyBindingRendererRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TextBindingRendererRegistration", function() { return TextBindingRendererRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DefaultRenderers", function() { return DefaultRenderers; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RuntimeHtmlConfiguration", function() { return RuntimeHtmlConfiguration; });
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/runtime */ "./node_modules/@aurelia/runtime/dist/esnext/index.js");
/* harmony import */ var _html_renderer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./html-renderer */ "./node_modules/@aurelia/runtime-html/dist/esnext/html-renderer.js");
/* harmony import */ var _observation_observer_locator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./observation/observer-locator */ "./node_modules/@aurelia/runtime-html/dist/esnext/observation/observer-locator.js");
/* harmony import */ var _projectors__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./projectors */ "./node_modules/@aurelia/runtime-html/dist/esnext/projectors.js");
/* harmony import */ var _resources_binding_behaviors_attr__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./resources/binding-behaviors/attr */ "./node_modules/@aurelia/runtime-html/dist/esnext/resources/binding-behaviors/attr.js");
/* harmony import */ var _resources_binding_behaviors_self__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./resources/binding-behaviors/self */ "./node_modules/@aurelia/runtime-html/dist/esnext/resources/binding-behaviors/self.js");
/* harmony import */ var _resources_binding_behaviors_update_trigger__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./resources/binding-behaviors/update-trigger */ "./node_modules/@aurelia/runtime-html/dist/esnext/resources/binding-behaviors/update-trigger.js");
/* harmony import */ var _resources_custom_attributes_blur__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./resources/custom-attributes/blur */ "./node_modules/@aurelia/runtime-html/dist/esnext/resources/custom-attributes/blur.js");
/* harmony import */ var _resources_custom_attributes_focus__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./resources/custom-attributes/focus */ "./node_modules/@aurelia/runtime-html/dist/esnext/resources/custom-attributes/focus.js");
/* harmony import */ var _resources_custom_attributes_portal__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./resources/custom-attributes/portal */ "./node_modules/@aurelia/runtime-html/dist/esnext/resources/custom-attributes/portal.js");
/* harmony import */ var _resources_custom_elements_compose__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./resources/custom-elements/compose */ "./node_modules/@aurelia/runtime-html/dist/esnext/resources/custom-elements/compose.js");












const IProjectorLocatorRegistration = _projectors__WEBPACK_IMPORTED_MODULE_4__["HTMLProjectorLocator"];
const ITargetAccessorLocatorRegistration = _observation_observer_locator__WEBPACK_IMPORTED_MODULE_3__["TargetAccessorLocator"];
const ITargetObserverLocatorRegistration = _observation_observer_locator__WEBPACK_IMPORTED_MODULE_3__["TargetObserverLocator"];
/**
 * Default HTML-specific (but environment-agnostic) implementations for the following interfaces:
 * - `IProjectorLocator`
 * - `ITargetAccessorLocator`
 * - `ITargetObserverLocator`
 * - `ITemplateFactory`
 */
const DefaultComponents = [
    IProjectorLocatorRegistration,
    ITargetAccessorLocatorRegistration,
    ITargetObserverLocatorRegistration,
];
const AttrBindingBehaviorRegistration = _resources_binding_behaviors_attr__WEBPACK_IMPORTED_MODULE_5__["AttrBindingBehavior"];
const SelfBindingBehaviorRegistration = _resources_binding_behaviors_self__WEBPACK_IMPORTED_MODULE_6__["SelfBindingBehavior"];
const UpdateTriggerBindingBehaviorRegistration = _resources_binding_behaviors_update_trigger__WEBPACK_IMPORTED_MODULE_7__["UpdateTriggerBindingBehavior"];
const ComposeRegistration = _resources_custom_elements_compose__WEBPACK_IMPORTED_MODULE_11__["Compose"];
const PortalRegistration = _resources_custom_attributes_portal__WEBPACK_IMPORTED_MODULE_10__["Portal"];
const FocusRegistration = _resources_custom_attributes_focus__WEBPACK_IMPORTED_MODULE_9__["Focus"];
const BlurRegistration = _resources_custom_attributes_blur__WEBPACK_IMPORTED_MODULE_8__["Blur"];
/**
 * Default HTML-specific (but environment-agnostic) resources:
 * - Binding Behaviors: `attr`, `self`, `updateTrigger`
 * - Custom Elements: `au-compose`
 * - Custom Attributes: `blur`, `focus`, `portal`
 */
const DefaultResources = [
    AttrBindingBehaviorRegistration,
    SelfBindingBehaviorRegistration,
    UpdateTriggerBindingBehaviorRegistration,
    ComposeRegistration,
    PortalRegistration,
    FocusRegistration,
    BlurRegistration
];
const ListenerBindingRendererRegistration = _html_renderer__WEBPACK_IMPORTED_MODULE_2__["ListenerBindingRenderer"];
const AttributeBindingRendererRegistration = _html_renderer__WEBPACK_IMPORTED_MODULE_2__["AttributeBindingRenderer"];
const SetAttributeRendererRegistration = _html_renderer__WEBPACK_IMPORTED_MODULE_2__["SetAttributeRenderer"];
const SetClassAttributeRendererRegistration = _html_renderer__WEBPACK_IMPORTED_MODULE_2__["SetClassAttributeRenderer"];
const SetStyleAttributeRendererRegistration = _html_renderer__WEBPACK_IMPORTED_MODULE_2__["SetStyleAttributeRenderer"];
const StylePropertyBindingRendererRegistration = _html_renderer__WEBPACK_IMPORTED_MODULE_2__["StylePropertyBindingRenderer"];
const TextBindingRendererRegistration = _html_renderer__WEBPACK_IMPORTED_MODULE_2__["TextBindingRenderer"];
/**
 * Default HTML-specfic (but environment-agnostic) renderers for:
 * - Listener Bindings: `trigger`, `capture`, `delegate`
 * - SetAttribute
 * - StyleProperty: `style`, `css`
 * - TextBinding: `${}`
 */
const DefaultRenderers = [
    ListenerBindingRendererRegistration,
    AttributeBindingRendererRegistration,
    SetAttributeRendererRegistration,
    SetClassAttributeRendererRegistration,
    SetStyleAttributeRendererRegistration,
    StylePropertyBindingRendererRegistration,
    TextBindingRendererRegistration
];
/**
 * A DI configuration object containing html-specific (but environment-agnostic) registrations:
 * - `RuntimeConfiguration` from `@aurelia/runtime`
 * - `DefaultComponents`
 * - `DefaultResources`
 * - `DefaultRenderers`
 */
const RuntimeHtmlConfiguration = {
    /**
     * Apply this configuration to the provided container.
     */
    register(container) {
        return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["RuntimeConfiguration"]
            .register(container)
            .register(...DefaultComponents, ...DefaultResources, ...DefaultRenderers);
    },
    /**
     * Create a new container with this configuration applied to it.
     */
    createContainer() {
        return this.register(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["DI"].createContainer());
    }
};
//# sourceMappingURL=configuration.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime-html/dist/esnext/create-element.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime-html/dist/esnext/create-element.js ***!
  \**************************************************************************/
/*! exports provided: createElement, RenderPlan */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createElement", function() { return createElement; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RenderPlan", function() { return RenderPlan; });
/* harmony import */ var _aurelia_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/runtime */ "./node_modules/@aurelia/runtime/dist/esnext/index.js");
/* harmony import */ var _definitions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./definitions */ "./node_modules/@aurelia/runtime-html/dist/esnext/definitions.js");
/* harmony import */ var _instructions__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./instructions */ "./node_modules/@aurelia/runtime-html/dist/esnext/instructions.js");



function createElement(dom, tagOrType, props, children) {
    if (typeof tagOrType === 'string') {
        return createElementForTag(dom, tagOrType, props, children);
    }
    else if (_aurelia_runtime__WEBPACK_IMPORTED_MODULE_0__["CustomElement"].isType(tagOrType)) {
        return createElementForType(dom, tagOrType, props, children);
    }
    else {
        throw new Error(`Invalid tagOrType.`);
    }
}
/**
 * RenderPlan. Todo: describe goal of this class
 */
class RenderPlan {
    constructor(dom, node, instructions, dependencies) {
        this.dom = dom;
        this.node = node;
        this.instructions = instructions;
        this.dependencies = dependencies;
        this.lazyDefinition = void 0;
    }
    get definition() {
        if (this.lazyDefinition === void 0) {
            this.lazyDefinition = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_0__["CustomElementDefinition"].create({
                name: _aurelia_runtime__WEBPACK_IMPORTED_MODULE_0__["CustomElement"].generateName(),
                template: this.node,
                needsCompile: typeof this.node === 'string',
                instructions: this.instructions,
                dependencies: this.dependencies,
            });
        }
        return this.lazyDefinition;
    }
    getContext(parentContainer) {
        return Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_0__["getRenderContext"])(this.definition, parentContainer, void 0);
    }
    createView(parentContainer) {
        return this.getViewFactory(parentContainer).create();
    }
    getViewFactory(parentContainer) {
        return this.getContext(parentContainer).getViewFactory();
    }
    /** @internal */
    mergeInto(parent, instructions, dependencies) {
        this.dom.appendChild(parent, this.node);
        instructions.push(...this.instructions);
        dependencies.push(...this.dependencies);
    }
}
function createElementForTag(dom, tagName, props, children) {
    const instructions = [];
    const allInstructions = [];
    const dependencies = [];
    const element = dom.createElement(tagName);
    let hasInstructions = false;
    if (props) {
        Object.keys(props)
            .forEach(to => {
            const value = props[to];
            if (Object(_definitions__WEBPACK_IMPORTED_MODULE_1__["isHTMLTargetedInstruction"])(value)) {
                hasInstructions = true;
                instructions.push(value);
            }
            else {
                dom.setAttribute(element, to, value);
            }
        });
    }
    if (hasInstructions) {
        dom.makeTarget(element);
        allInstructions.push(instructions);
    }
    if (children) {
        addChildren(dom, element, children, allInstructions, dependencies);
    }
    return new RenderPlan(dom, element, allInstructions, dependencies);
}
function createElementForType(dom, Type, props, children) {
    const definition = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_0__["CustomElement"].getDefinition(Type);
    const tagName = definition.name;
    const instructions = [];
    const allInstructions = [instructions];
    const dependencies = [];
    const childInstructions = [];
    const bindables = definition.bindables;
    const element = dom.createElement(tagName);
    dom.makeTarget(element);
    if (!dependencies.includes(Type)) {
        dependencies.push(Type);
    }
    instructions.push(new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_0__["HydrateElementInstruction"](tagName, childInstructions));
    if (props) {
        Object.keys(props)
            .forEach(to => {
            const value = props[to];
            if (Object(_definitions__WEBPACK_IMPORTED_MODULE_1__["isHTMLTargetedInstruction"])(value)) {
                childInstructions.push(value);
            }
            else {
                const bindable = bindables[to];
                if (bindable !== void 0) {
                    childInstructions.push({
                        type: "re" /* setProperty */,
                        to,
                        value
                    });
                }
                else {
                    childInstructions.push(new _instructions__WEBPACK_IMPORTED_MODULE_2__["SetAttributeInstruction"](value, to));
                }
            }
        });
    }
    if (children) {
        addChildren(dom, element, children, allInstructions, dependencies);
    }
    return new RenderPlan(dom, element, allInstructions, dependencies);
}
function addChildren(dom, parent, children, allInstructions, dependencies) {
    for (let i = 0, ii = children.length; i < ii; ++i) {
        const current = children[i];
        switch (typeof current) {
            case 'string':
                dom.appendChild(parent, dom.createTextNode(current));
                break;
            case 'object':
                if (dom.isNodeInstance(current)) {
                    dom.appendChild(parent, current);
                }
                else if ('mergeInto' in current) {
                    current.mergeInto(parent, allInstructions, dependencies);
                }
        }
    }
}
//# sourceMappingURL=create-element.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime-html/dist/esnext/definitions.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@aurelia/runtime-html/dist/esnext/definitions.js ***!
  \***********************************************************************/
/*! exports provided: HTMLTargetedInstructionType, isHTMLTargetedInstruction */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HTMLTargetedInstructionType", function() { return HTMLTargetedInstructionType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isHTMLTargetedInstruction", function() { return isHTMLTargetedInstruction; });
var HTMLTargetedInstructionType;
(function (HTMLTargetedInstructionType) {
    HTMLTargetedInstructionType["textBinding"] = "ha";
    HTMLTargetedInstructionType["listenerBinding"] = "hb";
    HTMLTargetedInstructionType["attributeBinding"] = "hc";
    HTMLTargetedInstructionType["stylePropertyBinding"] = "hd";
    HTMLTargetedInstructionType["setAttribute"] = "he";
    HTMLTargetedInstructionType["setClassAttribute"] = "hf";
    HTMLTargetedInstructionType["setStyleAttribute"] = "hg";
})(HTMLTargetedInstructionType || (HTMLTargetedInstructionType = {}));
function isHTMLTargetedInstruction(value) {
    const type = value.type;
    return typeof type === 'string' && type.length === 2;
}
//# sourceMappingURL=definitions.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime-html/dist/esnext/dom.js":
/*!***************************************************************!*\
  !*** ./node_modules/@aurelia/runtime-html/dist/esnext/dom.js ***!
  \***************************************************************/
/*! exports provided: NodeType, HTMLDOM, DOM, FragmentNodeSequence, AuMarker */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NodeType", function() { return NodeType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HTMLDOM", function() { return HTMLDOM; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DOM", function() { return $DOM; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FragmentNodeSequence", function() { return FragmentNodeSequence; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AuMarker", function() { return AuMarker; });
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/runtime */ "./node_modules/@aurelia/runtime/dist/esnext/index.js");
/* harmony import */ var _projectors__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./projectors */ "./node_modules/@aurelia/runtime-html/dist/esnext/projectors.js");



var NodeType;
(function (NodeType) {
    NodeType[NodeType["Element"] = 1] = "Element";
    NodeType[NodeType["Attr"] = 2] = "Attr";
    NodeType[NodeType["Text"] = 3] = "Text";
    NodeType[NodeType["CDATASection"] = 4] = "CDATASection";
    NodeType[NodeType["EntityReference"] = 5] = "EntityReference";
    NodeType[NodeType["Entity"] = 6] = "Entity";
    NodeType[NodeType["ProcessingInstruction"] = 7] = "ProcessingInstruction";
    NodeType[NodeType["Comment"] = 8] = "Comment";
    NodeType[NodeType["Document"] = 9] = "Document";
    NodeType[NodeType["DocumentType"] = 10] = "DocumentType";
    NodeType[NodeType["DocumentFragment"] = 11] = "DocumentFragment";
    NodeType[NodeType["Notation"] = 12] = "Notation";
})(NodeType || (NodeType = {}));
const effectiveParentNodeOverrides = new WeakMap();
/**
 * IDOM implementation for Html.
 */
class HTMLDOM {
    constructor(window, document, TNode, TElement, THTMLElement, TCustomEvent, TCSSStyleSheet, TShadowRoot) {
        this.window = window;
        this.document = document;
        this.Node = TNode;
        this.Element = TElement;
        this.HTMLElement = THTMLElement;
        this.CustomEvent = TCustomEvent;
        this.CSSStyleSheet = TCSSStyleSheet;
        this.ShadowRoot = TShadowRoot;
        if (_aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["DOM"].isInitialized) {
            _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].write(1001); // TODO: create reporters code // DOM already initialized (just info)
            _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["DOM"].destroy();
        }
        _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["DOM"].initialize(this);
        this.emptyNodes = new FragmentNodeSequence(this, document.createDocumentFragment());
    }
    static register(container) {
        return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Registration"].aliasTo(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["IDOM"], this).register(container);
    }
    addEventListener(eventName, subscriber, publisher, options) {
        (publisher || this.document).addEventListener(eventName, subscriber, options);
    }
    appendChild(parent, child) {
        parent.appendChild(child);
    }
    cloneNode(node, deep) {
        return node.cloneNode(deep !== false);
    }
    convertToRenderLocation(node) {
        if (this.isRenderLocation(node)) {
            return node; // it's already a IRenderLocation (converted by FragmentNodeSequence)
        }
        if (node.parentNode == null) {
            throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].error(52);
        }
        const locationEnd = this.document.createComment('au-end');
        const locationStart = this.document.createComment('au-start');
        node.parentNode.replaceChild(locationEnd, node);
        locationEnd.parentNode.insertBefore(locationStart, locationEnd);
        locationEnd.$start = locationStart;
        locationStart.$nodes = null;
        return locationEnd;
    }
    createDocumentFragment(markupOrNode) {
        if (markupOrNode == null) {
            return this.document.createDocumentFragment();
        }
        if (this.isNodeInstance(markupOrNode)) {
            if (markupOrNode.content !== undefined) {
                return markupOrNode.content;
            }
            const fragment = this.document.createDocumentFragment();
            fragment.appendChild(markupOrNode);
            return fragment;
        }
        return this.createTemplate(markupOrNode).content;
    }
    createNodeSequence(fragment) {
        if (fragment === null) {
            return this.emptyNodes;
        }
        return new FragmentNodeSequence(this, fragment.cloneNode(true));
    }
    createElement(name) {
        return this.document.createElement(name);
    }
    fetch(input, init) {
        return this.window.fetch(input, init);
    }
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    createCustomEvent(eventType, options) {
        return new this.CustomEvent(eventType, options);
    }
    dispatchEvent(evt) {
        this.document.dispatchEvent(evt);
    }
    createNodeObserver(node, cb, init) {
        if (typeof MutationObserver === 'undefined') {
            // TODO: find a proper response for this scenario
            return {
                disconnect() { },
                observe() { },
                takeRecords() { return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["PLATFORM"].emptyArray; }
            };
        }
        const observer = new MutationObserver(cb);
        observer.observe(node, init);
        return observer;
    }
    createTemplate(markup) {
        if (markup == null) {
            return this.document.createElement('template');
        }
        const template = this.document.createElement('template');
        template.innerHTML = markup.toString();
        return template;
    }
    createTextNode(text) {
        return this.document.createTextNode(text);
    }
    /**
     * Returns the effective parentNode according to Aurelia's component hierarchy.
     *
     * Used by Aurelia to find the closest parent controller relative to a node.
     *
     * This method supports 3 additional scenarios that `node.parentNode` does not support:
     * - Containerless elements. The parentNode in this case is a comment precending the element under specific conditions, rather than a node wrapping the element.
     * - ShadowDOM. If a `ShadowRoot` is encountered, this method retrieves the associated controller via the metadata api to locate the original host.
     * - Portals. If the provided node was moved to a different location in the DOM by a `portal` attribute, then the original parent of the node will be returned.
     *
     * @param node - The node to get the parent for.
     * @returns Either the closest parent node, the closest `IRenderLocation` (comment node that is the containerless host), original portal host, or `null` if this is either the absolute document root or a disconnected node.
     */
    getEffectiveParentNode(node) {
        // TODO: this method needs more tests!
        // First look for any overrides
        if (effectiveParentNodeOverrides.has(node)) {
            return effectiveParentNodeOverrides.get(node);
        }
        // Then try to get the nearest au-start render location, which would be the containerless parent,
        // again looking for any overrides along the way.
        // otherwise return the normal parent node
        let containerlessOffset = 0;
        let next = node.nextSibling;
        while (next !== null) {
            if (next.nodeType === 8 /* Comment */) {
                switch (next.textContent) {
                    case 'au-start':
                        // If we see an au-start before we see au-end, it will precede the host of a sibling containerless element rather than a parent.
                        // So we use the offset to ignore the next au-end
                        ++containerlessOffset;
                        break;
                    case 'au-end':
                        if (containerlessOffset-- === 0) {
                            return next;
                        }
                }
            }
            next = next.nextSibling;
        }
        if (node.parentNode === null && node.nodeType === 11 /* DocumentFragment */) {
            // Could be a shadow root; see if there's a controller and if so, get the original host via the projector
            const controller = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["CustomElement"].for(node);
            if (controller === void 0) {
                // Not a shadow root (or at least, not one created by Aurelia)
                // Nothing more we can try, just return null
                return null;
            }
            const projector = controller.projector;
            if (projector instanceof _projectors__WEBPACK_IMPORTED_MODULE_2__["ShadowDOMProjector"]) {
                // Now we can use the original host to traverse further up
                return this.getEffectiveParentNode(projector.host);
            }
        }
        return node.parentNode;
    }
    setEffectiveParentNode(childNodeOrNodeSequence, parentNode) {
        if (this.isNodeInstance(childNodeOrNodeSequence)) {
            effectiveParentNodeOverrides.set(childNodeOrNodeSequence, parentNode);
        }
        else {
            const nodes = childNodeOrNodeSequence.childNodes;
            for (let i = 0, ii = nodes.length; i < ii; ++i) {
                effectiveParentNodeOverrides.set(nodes[i], parentNode);
            }
        }
    }
    insertBefore(nodeToInsert, referenceNode) {
        referenceNode.parentNode.insertBefore(nodeToInsert, referenceNode);
    }
    isMarker(node) {
        return node.nodeName === 'AU-M';
    }
    isNodeInstance(potentialNode) {
        return potentialNode != null && potentialNode.nodeType > 0;
    }
    isRenderLocation(node) {
        return node.textContent === 'au-end';
    }
    makeTarget(node) {
        node.className = 'au';
    }
    registerElementResolver(container, resolver) {
        container.registerResolver(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["INode"], resolver);
        container.registerResolver(this.Node, resolver);
        container.registerResolver(this.Element, resolver);
        container.registerResolver(this.HTMLElement, resolver);
    }
    remove(node) {
        if (node.remove) {
            node.remove();
        }
        else {
            node.parentNode.removeChild(node);
        }
    }
    removeEventListener(eventName, subscriber, publisher, options) {
        (publisher || this.document).removeEventListener(eventName, subscriber, options);
    }
    setAttribute(node, name, value) {
        node.setAttribute(name, value);
    }
}
const $DOM = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["DOM"];

/* eslint-enable @typescript-eslint/no-explicit-any */
// This is the most common form of INodeSequence.
// Every custom element or template controller whose node sequence is based on an HTML template
// has an instance of this under the hood. Anyone who wants to create a node sequence from
// a string of markup would also receive an instance of this.
// CompiledTemplates create instances of FragmentNodeSequence.
/**
 * This is the most common form of INodeSequence.
 *
 * @internal
 */
class FragmentNodeSequence {
    constructor(dom, fragment) {
        this.dom = dom;
        this.fragment = fragment;
        this.isMounted = false;
        this.isLinked = false;
        this.next = void 0;
        this.refNode = void 0;
        const targetNodeList = fragment.querySelectorAll('.au');
        let i = 0;
        let ii = targetNodeList.length;
        const targets = this.targets = Array(ii);
        while (i < ii) {
            // eagerly convert all markers to RenderLocations (otherwise the renderer
            // will do it anyway) and store them in the target list (since the comments
            // can't be queried)
            const target = targetNodeList[i];
            if (target.nodeName === 'AU-M') {
                // note the renderer will still call this method, but it will just return the
                // location if it sees it's already a location
                targets[i] = this.dom.convertToRenderLocation(target);
            }
            else {
                // also store non-markers for consistent ordering
                targets[i] = target;
            }
            ++i;
        }
        const childNodeList = fragment.childNodes;
        i = 0;
        ii = childNodeList.length;
        const childNodes = this.childNodes = Array(ii);
        while (i < ii) {
            childNodes[i] = childNodeList[i];
            ++i;
        }
        this.firstChild = fragment.firstChild;
        this.lastChild = fragment.lastChild;
    }
    findTargets() {
        return this.targets;
    }
    insertBefore(refNode) {
        if (this.isLinked && !!this.refNode) {
            this.addToLinked();
        }
        else {
            const parent = refNode.parentNode;
            if (this.isMounted) {
                let current = this.firstChild;
                const end = this.lastChild;
                let next;
                while (current != null) {
                    next = current.nextSibling;
                    parent.insertBefore(current, refNode);
                    if (current === end) {
                        break;
                    }
                    current = next;
                }
            }
            else {
                this.isMounted = true;
                refNode.parentNode.insertBefore(this.fragment, refNode);
            }
        }
    }
    appendTo(parent) {
        if (this.isMounted) {
            let current = this.firstChild;
            const end = this.lastChild;
            let next;
            while (current != null) {
                next = current.nextSibling;
                parent.appendChild(current);
                if (current === end) {
                    break;
                }
                current = next;
            }
        }
        else {
            this.isMounted = true;
            parent.appendChild(this.fragment);
        }
    }
    remove() {
        if (this.isMounted) {
            this.isMounted = false;
            const fragment = this.fragment;
            const end = this.lastChild;
            let next;
            let current = this.firstChild;
            while (current !== null) {
                next = current.nextSibling;
                fragment.appendChild(current);
                if (current === end) {
                    break;
                }
                current = next;
            }
        }
    }
    addToLinked() {
        const refNode = this.refNode;
        const parent = refNode.parentNode;
        if (this.isMounted) {
            let current = this.firstChild;
            const end = this.lastChild;
            let next;
            while (current != null) {
                next = current.nextSibling;
                parent.insertBefore(current, refNode);
                if (current === end) {
                    break;
                }
                current = next;
            }
        }
        else {
            this.isMounted = true;
            parent.insertBefore(this.fragment, refNode);
        }
    }
    unlink() {
        this.isLinked = false;
        this.next = void 0;
        this.refNode = void 0;
    }
    link(next) {
        this.isLinked = true;
        if (this.dom.isRenderLocation(next)) {
            this.refNode = next;
        }
        else {
            this.next = next;
            this.obtainRefNode();
        }
    }
    obtainRefNode() {
        if (this.next !== void 0) {
            this.refNode = this.next.firstChild;
        }
        else {
            this.refNode = void 0;
        }
    }
}
/** @internal */
class AuMarker {
    constructor(nextSibling) {
        this.nextSibling = nextSibling;
        this.textContent = '';
    }
    get parentNode() {
        return this.nextSibling.parentNode;
    }
    remove() { }
}
(proto => {
    proto.previousSibling = null;
    proto.childNodes = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["PLATFORM"].emptyArray;
    proto.nodeName = 'AU-M';
    proto.nodeType = 1 /* Element */;
})(AuMarker.prototype);
//# sourceMappingURL=dom.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime-html/dist/esnext/html-renderer.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime-html/dist/esnext/html-renderer.js ***!
  \*************************************************************************/
/*! exports provided: TextBindingRenderer, ListenerBindingRenderer, SetAttributeRenderer, SetClassAttributeRenderer, SetStyleAttributeRenderer, StylePropertyBindingRenderer, AttributeBindingRenderer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TextBindingRenderer", function() { return TextBindingRenderer; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ListenerBindingRenderer", function() { return ListenerBindingRenderer; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SetAttributeRenderer", function() { return SetAttributeRenderer; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SetClassAttributeRenderer", function() { return SetClassAttributeRenderer; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SetStyleAttributeRenderer", function() { return SetStyleAttributeRenderer; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StylePropertyBindingRenderer", function() { return StylePropertyBindingRenderer; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AttributeBindingRenderer", function() { return AttributeBindingRenderer; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/runtime */ "./node_modules/@aurelia/runtime/dist/esnext/index.js");
/* harmony import */ var _binding_attribute__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./binding/attribute */ "./node_modules/@aurelia/runtime-html/dist/esnext/binding/attribute.js");
/* harmony import */ var _binding_listener__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./binding/listener */ "./node_modules/@aurelia/runtime-html/dist/esnext/binding/listener.js");
/* harmony import */ var _observation_event_manager__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./observation/event-manager */ "./node_modules/@aurelia/runtime-html/dist/esnext/observation/event-manager.js");





let TextBindingRenderer = 
/** @internal */
class TextBindingRenderer {
    constructor(parser, observerLocator) {
        this.parser = parser;
        this.observerLocator = observerLocator;
    }
    render(flags, context, controller, target, instruction) {
        const next = target.nextSibling;
        if (context.dom.isMarker(target)) {
            context.dom.remove(target);
        }
        let binding;
        const expr = Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["ensureExpression"])(this.parser, instruction.from, 2048 /* Interpolation */);
        if (expr.isMulti) {
            binding = Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["applyBindingBehavior"])(new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["MultiInterpolationBinding"](this.observerLocator, expr, next, 'textContent', _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["BindingMode"].toView, context), expr, context);
        }
        else {
            binding = Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["applyBindingBehavior"])(new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["InterpolationBinding"](expr.firstExpression, expr, next, 'textContent', _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["BindingMode"].toView, this.observerLocator, context, true), expr, context);
        }
        controller.addBinding(binding);
    }
};
TextBindingRenderer = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["instructionRenderer"])("ha" /* textBinding */)
    /** @internal */
    ,
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(0, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["IExpressionParser"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(1, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["IObserverLocator"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object, Object])
], TextBindingRenderer);

let ListenerBindingRenderer = 
/** @internal */
class ListenerBindingRenderer {
    constructor(parser, eventManager) {
        this.parser = parser;
        this.eventManager = eventManager;
    }
    render(flags, context, controller, target, instruction) {
        // eslint-disable-next-line @typescript-eslint/restrict-plus-operands
        const expr = Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["ensureExpression"])(this.parser, instruction.from, 80 /* IsEventCommand */ | (instruction.strategy + 6 /* DelegationStrategyDelta */));
        const binding = Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["applyBindingBehavior"])(new _binding_listener__WEBPACK_IMPORTED_MODULE_3__["Listener"](context.dom, instruction.to, instruction.strategy, expr, target, instruction.preventDefault, this.eventManager, context), expr, context);
        controller.addBinding(binding);
    }
};
ListenerBindingRenderer = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["instructionRenderer"])("hb" /* listenerBinding */)
    /** @internal */
    ,
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(0, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["IExpressionParser"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(1, _observation_event_manager__WEBPACK_IMPORTED_MODULE_4__["IEventManager"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object, Object])
], ListenerBindingRenderer);

let SetAttributeRenderer = 
/** @internal */
class SetAttributeRenderer {
    render(flags, context, controller, target, instruction) {
        target.setAttribute(instruction.to, instruction.value);
    }
};
SetAttributeRenderer = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["instructionRenderer"])("he" /* setAttribute */)
    /** @internal */
], SetAttributeRenderer);

let SetClassAttributeRenderer = class SetClassAttributeRenderer {
    render(flags, context, controller, target, instruction) {
        addClasses(target.classList, instruction.value);
    }
};
SetClassAttributeRenderer = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["instructionRenderer"])("hf" /* setClassAttribute */)
], SetClassAttributeRenderer);

let SetStyleAttributeRenderer = class SetStyleAttributeRenderer {
    render(flags, context, controller, target, instruction) {
        target.style.cssText += instruction.value;
    }
};
SetStyleAttributeRenderer = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["instructionRenderer"])("hg" /* setStyleAttribute */)
], SetStyleAttributeRenderer);

let StylePropertyBindingRenderer = 
/** @internal */
class StylePropertyBindingRenderer {
    constructor(parser, observerLocator) {
        this.parser = parser;
        this.observerLocator = observerLocator;
    }
    render(flags, context, controller, target, instruction) {
        const expr = Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["ensureExpression"])(this.parser, instruction.from, 48 /* IsPropertyCommand */ | _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["BindingMode"].toView);
        const binding = Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["applyBindingBehavior"])(new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["PropertyBinding"](expr, target.style, instruction.to, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["BindingMode"].toView, this.observerLocator, context), expr, context);
        controller.addBinding(binding);
    }
};
StylePropertyBindingRenderer = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["instructionRenderer"])("hd" /* stylePropertyBinding */)
    /** @internal */
    ,
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(0, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["IExpressionParser"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(1, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["IObserverLocator"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object, Object])
], StylePropertyBindingRenderer);

let AttributeBindingRenderer = 
/** @internal */
class AttributeBindingRenderer {
    constructor(parser, observerLocator) {
        this.parser = parser;
        this.observerLocator = observerLocator;
    }
    render(flags, context, controller, target, instruction) {
        const expr = Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["ensureExpression"])(this.parser, instruction.from, 48 /* IsPropertyCommand */ | _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["BindingMode"].toView);
        const binding = Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["applyBindingBehavior"])(new _binding_attribute__WEBPACK_IMPORTED_MODULE_2__["AttributeBinding"](expr, target, instruction.attr /* targetAttribute */, instruction.to /* targetKey */, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["BindingMode"].toView, this.observerLocator, context), expr, context);
        controller.addBinding(binding);
    }
};
AttributeBindingRenderer = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["instructionRenderer"])("hc" /* attributeBinding */)
    /** @internal */
    ,
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(0, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["IExpressionParser"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(1, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["IObserverLocator"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object, Object])
], AttributeBindingRenderer);

// http://jsben.ch/7n5Kt
function addClasses(classList, className) {
    const len = className.length;
    let start = 0;
    for (let i = 0; i < len; ++i) {
        if (className.charCodeAt(i) === 0x20) {
            if (i !== start) {
                classList.add(className.slice(start, i));
            }
            start = i + 1;
        }
        else if (i + 1 === len) {
            classList.add(className.slice(start));
        }
    }
}
//# sourceMappingURL=html-renderer.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime-html/dist/esnext/index.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@aurelia/runtime-html/dist/esnext/index.js ***!
  \*****************************************************************/
/*! exports provided: Listener, AttributeBinding, AttributeNSAccessor, CheckedObserver, ClassAttributeAccessor, DataAttributeAccessor, ElementPropertyAccessor, ListenerTracker, DelegateOrCaptureSubscription, TriggerSubscription, IEventManager, EventSubscriber, EventManager, TargetAccessorLocator, TargetObserverLocator, SelectValueObserver, StyleAttributeAccessor, ISVGAnalyzer, ValueAttributeObserver, AttrBindingBehavior, SelfBindingBehavior, UpdateTriggerBindingBehavior, Blur, BlurManager, Focus, Portal, Compose, IProjectorLocatorRegistration, ITargetAccessorLocatorRegistration, ITargetObserverLocatorRegistration, DefaultComponents, AttrBindingBehaviorRegistration, SelfBindingBehaviorRegistration, UpdateTriggerBindingBehaviorRegistration, ComposeRegistration, DefaultResources, AttributeBindingRendererRegistration, ListenerBindingRendererRegistration, SetAttributeRendererRegistration, SetClassAttributeRendererRegistration, SetStyleAttributeRendererRegistration, StylePropertyBindingRendererRegistration, TextBindingRendererRegistration, DefaultRenderers, RuntimeHtmlConfiguration, createElement, RenderPlan, HTMLTargetedInstructionType, isHTMLTargetedInstruction, NodeType, HTMLDOM, DOM, FragmentNodeSequence, AttributeBindingInstruction, CaptureBindingInstruction, DelegateBindingInstruction, SetAttributeInstruction, SetClassAttributeInstruction, SetStyleAttributeInstruction, StylePropertyBindingInstruction, TextBindingInstruction, TriggerBindingInstruction, ContainerlessProjector, HostProjector, HTMLProjectorLocator, ShadowDOMProjector, StyleConfiguration, CSSModulesProcessorRegistry, cssModules, ShadowDOMRegistry, IShadowDOMStyleFactory, shadowCSS, AdoptedStyleSheetsStyles, StyleElementStyles, IShadowDOMStyles, IShadowDOMGlobalStyles */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _binding_listener__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./binding/listener */ "./node_modules/@aurelia/runtime-html/dist/esnext/binding/listener.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Listener", function() { return _binding_listener__WEBPACK_IMPORTED_MODULE_0__["Listener"]; });

/* harmony import */ var _binding_attribute__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./binding/attribute */ "./node_modules/@aurelia/runtime-html/dist/esnext/binding/attribute.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AttributeBinding", function() { return _binding_attribute__WEBPACK_IMPORTED_MODULE_1__["AttributeBinding"]; });

/* harmony import */ var _observation_attribute_ns_accessor__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./observation/attribute-ns-accessor */ "./node_modules/@aurelia/runtime-html/dist/esnext/observation/attribute-ns-accessor.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AttributeNSAccessor", function() { return _observation_attribute_ns_accessor__WEBPACK_IMPORTED_MODULE_2__["AttributeNSAccessor"]; });

/* harmony import */ var _observation_checked_observer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./observation/checked-observer */ "./node_modules/@aurelia/runtime-html/dist/esnext/observation/checked-observer.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CheckedObserver", function() { return _observation_checked_observer__WEBPACK_IMPORTED_MODULE_3__["CheckedObserver"]; });

/* harmony import */ var _observation_class_attribute_accessor__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./observation/class-attribute-accessor */ "./node_modules/@aurelia/runtime-html/dist/esnext/observation/class-attribute-accessor.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ClassAttributeAccessor", function() { return _observation_class_attribute_accessor__WEBPACK_IMPORTED_MODULE_4__["ClassAttributeAccessor"]; });

/* harmony import */ var _observation_data_attribute_accessor__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./observation/data-attribute-accessor */ "./node_modules/@aurelia/runtime-html/dist/esnext/observation/data-attribute-accessor.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DataAttributeAccessor", function() { return _observation_data_attribute_accessor__WEBPACK_IMPORTED_MODULE_5__["DataAttributeAccessor"]; });

/* harmony import */ var _observation_element_property_accessor__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./observation/element-property-accessor */ "./node_modules/@aurelia/runtime-html/dist/esnext/observation/element-property-accessor.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ElementPropertyAccessor", function() { return _observation_element_property_accessor__WEBPACK_IMPORTED_MODULE_6__["ElementPropertyAccessor"]; });

/* harmony import */ var _observation_event_manager__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./observation/event-manager */ "./node_modules/@aurelia/runtime-html/dist/esnext/observation/event-manager.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ListenerTracker", function() { return _observation_event_manager__WEBPACK_IMPORTED_MODULE_7__["ListenerTracker"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DelegateOrCaptureSubscription", function() { return _observation_event_manager__WEBPACK_IMPORTED_MODULE_7__["DelegateOrCaptureSubscription"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TriggerSubscription", function() { return _observation_event_manager__WEBPACK_IMPORTED_MODULE_7__["TriggerSubscription"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IEventManager", function() { return _observation_event_manager__WEBPACK_IMPORTED_MODULE_7__["IEventManager"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "EventSubscriber", function() { return _observation_event_manager__WEBPACK_IMPORTED_MODULE_7__["EventSubscriber"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "EventManager", function() { return _observation_event_manager__WEBPACK_IMPORTED_MODULE_7__["EventManager"]; });

/* harmony import */ var _observation_observer_locator__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./observation/observer-locator */ "./node_modules/@aurelia/runtime-html/dist/esnext/observation/observer-locator.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TargetAccessorLocator", function() { return _observation_observer_locator__WEBPACK_IMPORTED_MODULE_8__["TargetAccessorLocator"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TargetObserverLocator", function() { return _observation_observer_locator__WEBPACK_IMPORTED_MODULE_8__["TargetObserverLocator"]; });

/* harmony import */ var _observation_select_value_observer__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./observation/select-value-observer */ "./node_modules/@aurelia/runtime-html/dist/esnext/observation/select-value-observer.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SelectValueObserver", function() { return _observation_select_value_observer__WEBPACK_IMPORTED_MODULE_9__["SelectValueObserver"]; });

/* harmony import */ var _observation_style_attribute_accessor__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./observation/style-attribute-accessor */ "./node_modules/@aurelia/runtime-html/dist/esnext/observation/style-attribute-accessor.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "StyleAttributeAccessor", function() { return _observation_style_attribute_accessor__WEBPACK_IMPORTED_MODULE_10__["StyleAttributeAccessor"]; });

/* harmony import */ var _observation_svg_analyzer__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./observation/svg-analyzer */ "./node_modules/@aurelia/runtime-html/dist/esnext/observation/svg-analyzer.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ISVGAnalyzer", function() { return _observation_svg_analyzer__WEBPACK_IMPORTED_MODULE_11__["ISVGAnalyzer"]; });

/* harmony import */ var _observation_value_attribute_observer__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./observation/value-attribute-observer */ "./node_modules/@aurelia/runtime-html/dist/esnext/observation/value-attribute-observer.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ValueAttributeObserver", function() { return _observation_value_attribute_observer__WEBPACK_IMPORTED_MODULE_12__["ValueAttributeObserver"]; });

/* harmony import */ var _resources_binding_behaviors_attr__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./resources/binding-behaviors/attr */ "./node_modules/@aurelia/runtime-html/dist/esnext/resources/binding-behaviors/attr.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AttrBindingBehavior", function() { return _resources_binding_behaviors_attr__WEBPACK_IMPORTED_MODULE_13__["AttrBindingBehavior"]; });

/* harmony import */ var _resources_binding_behaviors_self__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./resources/binding-behaviors/self */ "./node_modules/@aurelia/runtime-html/dist/esnext/resources/binding-behaviors/self.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SelfBindingBehavior", function() { return _resources_binding_behaviors_self__WEBPACK_IMPORTED_MODULE_14__["SelfBindingBehavior"]; });

/* harmony import */ var _resources_binding_behaviors_update_trigger__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./resources/binding-behaviors/update-trigger */ "./node_modules/@aurelia/runtime-html/dist/esnext/resources/binding-behaviors/update-trigger.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "UpdateTriggerBindingBehavior", function() { return _resources_binding_behaviors_update_trigger__WEBPACK_IMPORTED_MODULE_15__["UpdateTriggerBindingBehavior"]; });

/* harmony import */ var _resources_custom_attributes_blur__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./resources/custom-attributes/blur */ "./node_modules/@aurelia/runtime-html/dist/esnext/resources/custom-attributes/blur.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Blur", function() { return _resources_custom_attributes_blur__WEBPACK_IMPORTED_MODULE_16__["Blur"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BlurManager", function() { return _resources_custom_attributes_blur__WEBPACK_IMPORTED_MODULE_16__["BlurManager"]; });

/* harmony import */ var _resources_custom_attributes_focus__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./resources/custom-attributes/focus */ "./node_modules/@aurelia/runtime-html/dist/esnext/resources/custom-attributes/focus.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Focus", function() { return _resources_custom_attributes_focus__WEBPACK_IMPORTED_MODULE_17__["Focus"]; });

/* harmony import */ var _resources_custom_attributes_portal__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./resources/custom-attributes/portal */ "./node_modules/@aurelia/runtime-html/dist/esnext/resources/custom-attributes/portal.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Portal", function() { return _resources_custom_attributes_portal__WEBPACK_IMPORTED_MODULE_18__["Portal"]; });

/* harmony import */ var _resources_custom_elements_compose__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./resources/custom-elements/compose */ "./node_modules/@aurelia/runtime-html/dist/esnext/resources/custom-elements/compose.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Compose", function() { return _resources_custom_elements_compose__WEBPACK_IMPORTED_MODULE_19__["Compose"]; });

/* harmony import */ var _configuration__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./configuration */ "./node_modules/@aurelia/runtime-html/dist/esnext/configuration.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IProjectorLocatorRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_20__["IProjectorLocatorRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ITargetAccessorLocatorRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_20__["ITargetAccessorLocatorRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ITargetObserverLocatorRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_20__["ITargetObserverLocatorRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DefaultComponents", function() { return _configuration__WEBPACK_IMPORTED_MODULE_20__["DefaultComponents"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AttrBindingBehaviorRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_20__["AttrBindingBehaviorRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SelfBindingBehaviorRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_20__["SelfBindingBehaviorRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "UpdateTriggerBindingBehaviorRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_20__["UpdateTriggerBindingBehaviorRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ComposeRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_20__["ComposeRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DefaultResources", function() { return _configuration__WEBPACK_IMPORTED_MODULE_20__["DefaultResources"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AttributeBindingRendererRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_20__["AttributeBindingRendererRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ListenerBindingRendererRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_20__["ListenerBindingRendererRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SetAttributeRendererRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_20__["SetAttributeRendererRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SetClassAttributeRendererRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_20__["SetClassAttributeRendererRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SetStyleAttributeRendererRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_20__["SetStyleAttributeRendererRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "StylePropertyBindingRendererRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_20__["StylePropertyBindingRendererRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TextBindingRendererRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_20__["TextBindingRendererRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DefaultRenderers", function() { return _configuration__WEBPACK_IMPORTED_MODULE_20__["DefaultRenderers"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RuntimeHtmlConfiguration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_20__["RuntimeHtmlConfiguration"]; });

/* harmony import */ var _create_element__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./create-element */ "./node_modules/@aurelia/runtime-html/dist/esnext/create-element.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createElement", function() { return _create_element__WEBPACK_IMPORTED_MODULE_21__["createElement"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RenderPlan", function() { return _create_element__WEBPACK_IMPORTED_MODULE_21__["RenderPlan"]; });

/* harmony import */ var _definitions__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./definitions */ "./node_modules/@aurelia/runtime-html/dist/esnext/definitions.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "HTMLTargetedInstructionType", function() { return _definitions__WEBPACK_IMPORTED_MODULE_22__["HTMLTargetedInstructionType"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "isHTMLTargetedInstruction", function() { return _definitions__WEBPACK_IMPORTED_MODULE_22__["isHTMLTargetedInstruction"]; });

/* harmony import */ var _dom__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./dom */ "./node_modules/@aurelia/runtime-html/dist/esnext/dom.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "NodeType", function() { return _dom__WEBPACK_IMPORTED_MODULE_23__["NodeType"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "HTMLDOM", function() { return _dom__WEBPACK_IMPORTED_MODULE_23__["HTMLDOM"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DOM", function() { return _dom__WEBPACK_IMPORTED_MODULE_23__["DOM"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "FragmentNodeSequence", function() { return _dom__WEBPACK_IMPORTED_MODULE_23__["FragmentNodeSequence"]; });

/* harmony import */ var _instructions__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./instructions */ "./node_modules/@aurelia/runtime-html/dist/esnext/instructions.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AttributeBindingInstruction", function() { return _instructions__WEBPACK_IMPORTED_MODULE_24__["AttributeBindingInstruction"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CaptureBindingInstruction", function() { return _instructions__WEBPACK_IMPORTED_MODULE_24__["CaptureBindingInstruction"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DelegateBindingInstruction", function() { return _instructions__WEBPACK_IMPORTED_MODULE_24__["DelegateBindingInstruction"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SetAttributeInstruction", function() { return _instructions__WEBPACK_IMPORTED_MODULE_24__["SetAttributeInstruction"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SetClassAttributeInstruction", function() { return _instructions__WEBPACK_IMPORTED_MODULE_24__["SetClassAttributeInstruction"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SetStyleAttributeInstruction", function() { return _instructions__WEBPACK_IMPORTED_MODULE_24__["SetStyleAttributeInstruction"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "StylePropertyBindingInstruction", function() { return _instructions__WEBPACK_IMPORTED_MODULE_24__["StylePropertyBindingInstruction"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TextBindingInstruction", function() { return _instructions__WEBPACK_IMPORTED_MODULE_24__["TextBindingInstruction"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TriggerBindingInstruction", function() { return _instructions__WEBPACK_IMPORTED_MODULE_24__["TriggerBindingInstruction"]; });

/* harmony import */ var _projectors__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./projectors */ "./node_modules/@aurelia/runtime-html/dist/esnext/projectors.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ContainerlessProjector", function() { return _projectors__WEBPACK_IMPORTED_MODULE_25__["ContainerlessProjector"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "HostProjector", function() { return _projectors__WEBPACK_IMPORTED_MODULE_25__["HostProjector"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "HTMLProjectorLocator", function() { return _projectors__WEBPACK_IMPORTED_MODULE_25__["HTMLProjectorLocator"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ShadowDOMProjector", function() { return _projectors__WEBPACK_IMPORTED_MODULE_25__["ShadowDOMProjector"]; });

/* harmony import */ var _styles_style_configuration__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./styles/style-configuration */ "./node_modules/@aurelia/runtime-html/dist/esnext/styles/style-configuration.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "StyleConfiguration", function() { return _styles_style_configuration__WEBPACK_IMPORTED_MODULE_26__["StyleConfiguration"]; });

/* harmony import */ var _styles_css_modules_registry__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./styles/css-modules-registry */ "./node_modules/@aurelia/runtime-html/dist/esnext/styles/css-modules-registry.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CSSModulesProcessorRegistry", function() { return _styles_css_modules_registry__WEBPACK_IMPORTED_MODULE_27__["CSSModulesProcessorRegistry"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "cssModules", function() { return _styles_css_modules_registry__WEBPACK_IMPORTED_MODULE_27__["cssModules"]; });

/* harmony import */ var _styles_shadow_dom_registry__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./styles/shadow-dom-registry */ "./node_modules/@aurelia/runtime-html/dist/esnext/styles/shadow-dom-registry.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ShadowDOMRegistry", function() { return _styles_shadow_dom_registry__WEBPACK_IMPORTED_MODULE_28__["ShadowDOMRegistry"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IShadowDOMStyleFactory", function() { return _styles_shadow_dom_registry__WEBPACK_IMPORTED_MODULE_28__["IShadowDOMStyleFactory"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "shadowCSS", function() { return _styles_shadow_dom_registry__WEBPACK_IMPORTED_MODULE_28__["shadowCSS"]; });

/* harmony import */ var _styles_shadow_dom_styles__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./styles/shadow-dom-styles */ "./node_modules/@aurelia/runtime-html/dist/esnext/styles/shadow-dom-styles.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AdoptedStyleSheetsStyles", function() { return _styles_shadow_dom_styles__WEBPACK_IMPORTED_MODULE_29__["AdoptedStyleSheetsStyles"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "StyleElementStyles", function() { return _styles_shadow_dom_styles__WEBPACK_IMPORTED_MODULE_29__["StyleElementStyles"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IShadowDOMStyles", function() { return _styles_shadow_dom_styles__WEBPACK_IMPORTED_MODULE_29__["IShadowDOMStyles"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IShadowDOMGlobalStyles", function() { return _styles_shadow_dom_styles__WEBPACK_IMPORTED_MODULE_29__["IShadowDOMGlobalStyles"]; });































//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime-html/dist/esnext/instructions.js":
/*!************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime-html/dist/esnext/instructions.js ***!
  \************************************************************************/
/*! exports provided: TextBindingInstruction, TriggerBindingInstruction, DelegateBindingInstruction, CaptureBindingInstruction, StylePropertyBindingInstruction, SetAttributeInstruction, SetClassAttributeInstruction, SetStyleAttributeInstruction, AttributeBindingInstruction */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TextBindingInstruction", function() { return TextBindingInstruction; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TriggerBindingInstruction", function() { return TriggerBindingInstruction; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DelegateBindingInstruction", function() { return DelegateBindingInstruction; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CaptureBindingInstruction", function() { return CaptureBindingInstruction; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StylePropertyBindingInstruction", function() { return StylePropertyBindingInstruction; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SetAttributeInstruction", function() { return SetAttributeInstruction; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SetClassAttributeInstruction", function() { return SetClassAttributeInstruction; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SetStyleAttributeInstruction", function() { return SetStyleAttributeInstruction; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AttributeBindingInstruction", function() { return AttributeBindingInstruction; });
/* harmony import */ var _aurelia_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/runtime */ "./node_modules/@aurelia/runtime/dist/esnext/index.js");

class TextBindingInstruction {
    constructor(from) {
        this.from = from;
        this.type = "ha" /* textBinding */;
    }
}
class TriggerBindingInstruction {
    constructor(from, to) {
        this.from = from;
        this.to = to;
        this.type = "hb" /* listenerBinding */;
        this.preventDefault = true;
        this.strategy = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_0__["DelegationStrategy"].none;
    }
}
class DelegateBindingInstruction {
    constructor(from, to) {
        this.from = from;
        this.to = to;
        this.type = "hb" /* listenerBinding */;
        this.preventDefault = false;
        this.strategy = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_0__["DelegationStrategy"].bubbling;
    }
}
class CaptureBindingInstruction {
    constructor(from, to) {
        this.from = from;
        this.to = to;
        this.type = "hb" /* listenerBinding */;
        this.preventDefault = false;
        this.strategy = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_0__["DelegationStrategy"].capturing;
    }
}
class StylePropertyBindingInstruction {
    constructor(from, to) {
        this.from = from;
        this.to = to;
        this.type = "hd" /* stylePropertyBinding */;
    }
}
class SetAttributeInstruction {
    constructor(value, to) {
        this.value = value;
        this.to = to;
        this.type = "he" /* setAttribute */;
    }
}
class SetClassAttributeInstruction {
    constructor(value) {
        this.value = value;
        this.type = "hf" /* setClassAttribute */;
    }
}
class SetStyleAttributeInstruction {
    constructor(value) {
        this.value = value;
        this.type = "hg" /* setStyleAttribute */;
    }
}
class AttributeBindingInstruction {
    constructor(
    /**
     * `attr` and `to` have the same value on a normal attribute
     * Will be different on `class` and `style`
     * on `class`: attr = `class` (from binding command), to = attribute name
     * on `style`: attr = `style` (from binding command), to = attribute name
     */
    attr, from, to) {
        this.attr = attr;
        this.from = from;
        this.to = to;
        this.type = "hc" /* attributeBinding */;
    }
}
//# sourceMappingURL=instructions.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime-html/dist/esnext/observation/attribute-ns-accessor.js":
/*!*********************************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime-html/dist/esnext/observation/attribute-ns-accessor.js ***!
  \*********************************************************************************************/
/*! exports provided: AttributeNSAccessor */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AttributeNSAccessor", function() { return AttributeNSAccessor; });
/**
 * Attribute accessor in a XML document/element that can be accessed via a namespace.
 * Wraps [`getAttributeNS`](https://developer.mozilla.org/en-US/docs/Web/API/Element/getAttributeNS).
 */
class AttributeNSAccessor {
    constructor(scheduler, flags, obj, propertyKey, namespace) {
        this.scheduler = scheduler;
        this.propertyKey = propertyKey;
        this.namespace = namespace;
        this.currentValue = null;
        this.oldValue = null;
        this.hasChanges = false;
        this.task = null;
        this.obj = obj;
        this.persistentFlags = flags & 805306383 /* targetObserverFlags */;
    }
    getValue() {
        return this.currentValue;
    }
    setValue(newValue, flags) {
        this.currentValue = newValue;
        this.hasChanges = newValue !== this.oldValue;
        if ((flags & 4096 /* fromBind */) > 0 || this.persistentFlags === 268435456 /* noTargetObserverQueue */) {
            this.flushChanges(flags);
        }
        else if (this.persistentFlags !== 536870912 /* persistentTargetObserverQueue */ && this.task === null) {
            this.task = this.scheduler.queueRenderTask(() => {
                this.flushChanges(flags);
                this.task = null;
            });
        }
    }
    flushChanges(flags) {
        if (this.hasChanges) {
            this.hasChanges = false;
            const { currentValue } = this;
            this.oldValue = currentValue;
            if (currentValue == void 0) {
                this.obj.removeAttributeNS(this.namespace, this.propertyKey);
            }
            else {
                this.obj.setAttributeNS(this.namespace, this.propertyKey, currentValue);
            }
        }
    }
    bind(flags) {
        if (this.persistentFlags === 536870912 /* persistentTargetObserverQueue */) {
            if (this.task !== null) {
                this.task.cancel();
            }
            this.task = this.scheduler.queueRenderTask(() => this.flushChanges(flags), { persistent: true });
        }
        this.currentValue = this.oldValue = this.obj.getAttributeNS(this.namespace, this.propertyKey);
    }
    unbind(flags) {
        if (this.task !== null) {
            this.task.cancel();
            this.task = null;
        }
    }
}
//# sourceMappingURL=attribute-ns-accessor.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime-html/dist/esnext/observation/checked-observer.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime-html/dist/esnext/observation/checked-observer.js ***!
  \****************************************************************************************/
/*! exports provided: CheckedObserver */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CheckedObserver", function() { return CheckedObserver; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/runtime */ "./node_modules/@aurelia/runtime/dist/esnext/index.js");


const toStringTag = Object.prototype.toString;
function defaultMatcher(a, b) {
    return a === b;
}
let CheckedObserver = class CheckedObserver {
    constructor(scheduler, flags, lifecycle, handler, obj) {
        this.scheduler = scheduler;
        this.lifecycle = lifecycle;
        this.handler = handler;
        this.obj = obj;
        this.currentValue = void 0;
        this.oldValue = void 0;
        this.hasChanges = false;
        this.task = null;
        this.collectionObserver = void 0;
        this.valueObserver = void 0;
        this.persistentFlags = flags & 805306383 /* targetObserverFlags */;
    }
    getValue() {
        return this.currentValue;
    }
    setValue(newValue, flags) {
        this.currentValue = newValue;
        this.hasChanges = newValue !== this.oldValue;
        if ((flags & 4096 /* fromBind */) === 4096 /* fromBind */ || this.persistentFlags === 268435456 /* noTargetObserverQueue */) {
            this.flushChanges(flags);
        }
        else if (this.persistentFlags !== 536870912 /* persistentTargetObserverQueue */ && this.task === null) {
            this.task = this.scheduler.queueRenderTask(() => {
                this.flushChanges(flags);
                this.task = null;
            });
        }
    }
    flushChanges(flags) {
        if (this.hasChanges) {
            this.hasChanges = false;
            const currentValue = this.oldValue = this.currentValue;
            if (this.valueObserver === void 0) {
                if (this.obj.$observers !== void 0) {
                    if (this.obj.$observers.model !== void 0) {
                        this.valueObserver = this.obj.$observers.model;
                    }
                    else if (this.obj.$observers.value !== void 0) {
                        this.valueObserver = this.obj.$observers.value;
                    }
                }
                if (this.valueObserver !== void 0) {
                    this.valueObserver.subscribe(this);
                }
            }
            if (this.collectionObserver !== void 0) {
                this.collectionObserver.unsubscribeFromCollection(this);
                this.collectionObserver = void 0;
            }
            if (this.obj.type === 'checkbox') {
                this.collectionObserver = Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["getCollectionObserver"])(flags, this.lifecycle, currentValue);
                if (this.collectionObserver !== void 0) {
                    this.collectionObserver.subscribeToCollection(this);
                }
            }
            this.synchronizeElement();
        }
    }
    handleCollectionChange(indexMap, flags) {
        const { currentValue, oldValue } = this;
        if ((flags & 4096 /* fromBind */) > 0 || this.persistentFlags === 268435456 /* noTargetObserverQueue */) {
            this.oldValue = currentValue;
            this.synchronizeElement();
        }
        else {
            this.hasChanges = true;
        }
        if (this.persistentFlags !== 536870912 /* persistentTargetObserverQueue */ && this.task === null) {
            this.task = this.scheduler.queueRenderTask(() => {
                this.flushChanges(flags);
                this.task = null;
            });
        }
        this.callSubscribers(currentValue, oldValue, flags);
    }
    handleChange(newValue, previousValue, flags) {
        if ((flags & 4096 /* fromBind */) > 0 || this.persistentFlags === 268435456 /* noTargetObserverQueue */) {
            this.synchronizeElement();
        }
        else {
            this.hasChanges = true;
        }
        if (this.persistentFlags !== 536870912 /* persistentTargetObserverQueue */ && this.task === null) {
            this.task = this.scheduler.queueRenderTask(() => this.flushChanges(flags));
        }
        this.callSubscribers(newValue, previousValue, flags);
    }
    synchronizeElement() {
        const currentValue = this.currentValue;
        const obj = this.obj;
        const elementValue = Object.prototype.hasOwnProperty.call(obj, 'model') ? obj.model : obj.value;
        const isRadio = obj.type === 'radio';
        const matcher = obj.matcher !== void 0 ? obj.matcher : defaultMatcher;
        if (isRadio) {
            obj.checked = !!matcher(currentValue, elementValue);
        }
        else if (currentValue === true) {
            obj.checked = true;
        }
        else {
            let hasMatch = false;
            switch (toStringTag.call(currentValue)) {
                case '[object Array]':
                    hasMatch = currentValue.findIndex(item => !!matcher(item, elementValue)) !== -1;
                    break;
                case '[object Set]':
                    for (const v of currentValue) {
                        if (matcher(v, elementValue)) {
                            hasMatch = true;
                            break;
                        }
                    }
                    break;
                case '[object Map]':
                    for (const pair of currentValue) {
                        const existingItem = pair[0];
                        const $isChecked = pair[1];
                        // a potential complain, when only `true` is supported
                        // but it's consistent with array
                        if (matcher(existingItem, elementValue) && $isChecked === true) {
                            hasMatch = true;
                            break;
                        }
                    }
            }
            obj.checked = hasMatch;
        }
    }
    handleEvent() {
        let currentValue = this.oldValue = this.currentValue;
        const obj = this.obj;
        const elementValue = Object.prototype.hasOwnProperty.call(obj, 'model') ? obj.model : obj.value;
        const isChecked = obj.checked;
        const matcher = obj.matcher !== void 0 ? obj.matcher : defaultMatcher;
        if (obj.type === 'checkbox') {
            const toStringRet = toStringTag.call(currentValue);
            if (toStringRet === '[object Array]') {
                // Array binding steps on a change event:
                // 1. find corresponding item INDEX in the Set based on current model/value and matcher
                // 2. is the checkbox checked?
                //    2.1. Yes: is the corresponding item in the Array (index === -1)?
                //        2.1.1 No: push the current model/value to the Array
                //    2.2. No: is the corresponding item in the Array (index !== -1)?
                //        2.2.1: Yes: remove the corresponding item
                // =================================================
                const index = currentValue.findIndex(item => !!matcher(item, elementValue));
                // if the checkbox is checkde, and there's no matching value in the existing array
                // add the checkbox model/value to the array
                if (isChecked && index === -1) {
                    currentValue.push(elementValue);
                }
                else if (!isChecked && index !== -1) {
                    // if the checkbox is not checked, and found a matching item in the array
                    // based on the checkbox model/value
                    // remove the existing item
                    currentValue.splice(index, 1);
                }
                // when existing currentValue is an array,
                // do not invoke callback as only the array obj has changed
                return;
            }
            else if (toStringRet === '[object Set]') {
                // Set binding steps on a change event:
                // 1. find corresponding item in the Set based on current model/value and matcher
                // 2. is the checkbox checked?
                //    2.1. Yes: is the corresponding item in the Set?
                //        2.1.1 No: add the current model/value to the Set
                //    2.2. No: is the corresponding item in the Set?
                //        2.2.1: Yes: remove the corresponding item
                // =================================================
                // 1. find corresponding item
                const unset = {};
                let existingItem = unset;
                for (const value of currentValue) {
                    if (matcher(value, elementValue) === true) {
                        existingItem = value;
                        break;
                    }
                }
                // 2.1. Checkbox is checked, is the corresponding item in the Set?
                //
                // if checkbox is checked and there's no value in the existing Set
                // add the checkbox model/value to the Set
                if (isChecked && existingItem === unset) {
                    // 2.1.1. add the current model/value to the Set
                    currentValue.add(elementValue);
                }
                else if (!isChecked && existingItem !== unset) {
                    // 2.2.1 Checkbox is unchecked, corresponding is in the Set
                    //
                    // if checkbox is not checked, and found a matching item in the Set
                    // based on the checkbox model/value
                    // remove the existing item
                    currentValue.delete(existingItem);
                }
                // when existing value is a Set,
                // do not invoke callback as only the Set has been mutated
                return;
            }
            else if (toStringRet === '[object Map]') {
                // Map binding steps on a change event
                // 1. find corresponding item in the Map based on current model/value and matcher
                // 2. Set the value of the corresponding item in the Map based on checked state of the checkbox
                // =================================================
                // 1. find the corresponding item
                let existingItem;
                for (const pair of currentValue) {
                    const currItem = pair[0];
                    if (matcher(currItem, elementValue) === true) {
                        existingItem = currItem;
                        break;
                    }
                }
                // 2. set the value of the corresponding item in the map
                // if checkbox is checked and there's no value in the existing Map
                // add the checkbox model/value to the Map as key,
                // and value will be checked state of the checkbox
                currentValue.set(existingItem, isChecked);
                // when existing value is a Map,
                // do not invoke callback as only the Map has been mutated
                return;
            }
            currentValue = isChecked;
        }
        else if (isChecked) {
            currentValue = elementValue;
        }
        else {
            // if it's a radio and it has been unchecked
            // do nothing, as the radio that was checked will fire change event and it will be handle there
            // a radio cannot be unchecked by user
            return;
        }
        this.currentValue = currentValue;
        this.callSubscribers(this.currentValue, this.oldValue, 131072 /* fromDOMEvent */ | 524288 /* allowPublishRoundtrip */);
    }
    bind(flags) {
        if (this.persistentFlags === 536870912 /* persistentTargetObserverQueue */) {
            if (this.task !== null) {
                this.task.cancel();
            }
            this.task = this.scheduler.queueRenderTask(() => this.flushChanges(flags), { persistent: true });
        }
        this.currentValue = this.obj.checked;
    }
    // eslint-disable-next-line @typescript-eslint/no-unused-vars
    unbind(flags) {
        if (this.collectionObserver !== void 0) {
            this.collectionObserver.unsubscribeFromCollection(this);
            this.collectionObserver = void 0;
        }
        if (this.valueObserver !== void 0) {
            this.valueObserver.unsubscribe(this);
        }
        if (this.task !== null) {
            this.task.cancel();
            this.task = null;
        }
    }
    subscribe(subscriber) {
        if (!this.hasSubscribers()) {
            this.handler.subscribe(this.obj, this);
        }
        this.addSubscriber(subscriber);
    }
    unsubscribe(subscriber) {
        this.removeSubscriber(subscriber);
        if (!this.hasSubscribers()) {
            this.handler.dispose();
        }
    }
};
CheckedObserver = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["subscriberCollection"])(),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object, Number, Object, Object, Object])
], CheckedObserver);

//# sourceMappingURL=checked-observer.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime-html/dist/esnext/observation/class-attribute-accessor.js":
/*!************************************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime-html/dist/esnext/observation/class-attribute-accessor.js ***!
  \************************************************************************************************/
/*! exports provided: ClassAttributeAccessor, getClassesToAdd */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ClassAttributeAccessor", function() { return ClassAttributeAccessor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getClassesToAdd", function() { return getClassesToAdd; });
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");

class ClassAttributeAccessor {
    constructor(scheduler, flags, obj) {
        this.scheduler = scheduler;
        this.currentValue = '';
        this.oldValue = '';
        this.doNotCache = true;
        this.nameIndex = {};
        this.version = 0;
        this.hasChanges = false;
        this.isActive = false;
        this.task = null;
        this.obj = obj;
        this.persistentFlags = flags & 805306383 /* targetObserverFlags */;
    }
    getValue() {
        return this.currentValue;
    }
    setValue(newValue, flags) {
        this.currentValue = newValue;
        this.hasChanges = newValue !== this.oldValue;
        if ((flags & 4096 /* fromBind */) > 0 || this.persistentFlags === 268435456 /* noTargetObserverQueue */) {
            this.flushChanges(flags);
        }
        else if (this.persistentFlags !== 536870912 /* persistentTargetObserverQueue */ && this.task === null) {
            this.task = this.scheduler.queueRenderTask(() => {
                this.flushChanges(flags);
                this.task = null;
            });
        }
    }
    flushChanges(flags) {
        if (this.hasChanges) {
            this.hasChanges = false;
            const { currentValue, nameIndex } = this;
            let { version } = this;
            this.oldValue = currentValue;
            const classesToAdd = getClassesToAdd(currentValue);
            // Get strings split on a space not including empties
            if (classesToAdd.length > 0) {
                this.addClassesAndUpdateIndex(classesToAdd);
            }
            this.version += 1;
            // First call to setValue?  We're done.
            if (version === 0) {
                return;
            }
            // Remove classes from previous version.
            version -= 1;
            for (const name in nameIndex) {
                if (!Object.prototype.hasOwnProperty.call(nameIndex, name) || nameIndex[name] !== version) {
                    continue;
                }
                // TODO: this has the side-effect that classes already present which are added again,
                // will be removed if they're not present in the next update.
                // Better would be do have some configurability for this behavior, allowing the user to
                // decide whether initial classes always need to be kept, always removed, or something in between
                this.obj.classList.remove(name);
            }
        }
    }
    bind(flags) {
        if (this.persistentFlags === 536870912 /* persistentTargetObserverQueue */) {
            if (this.task !== null) {
                this.task.cancel();
            }
            this.task = this.scheduler.queueRenderTask(() => this.flushChanges(flags), { persistent: true });
        }
    }
    unbind(flags) {
        if (this.task !== null) {
            this.task.cancel();
            this.task = null;
        }
    }
    addClassesAndUpdateIndex(classes) {
        const node = this.obj;
        for (let i = 0, ii = classes.length; i < ii; i++) {
            const className = classes[i];
            if (className.length === 0) {
                continue;
            }
            this.nameIndex[className] = this.version;
            node.classList.add(className);
        }
    }
}
function getClassesToAdd(object) {
    function splitClassString(classString) {
        const matches = classString.match(/\S+/g);
        if (matches === null) {
            return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["PLATFORM"].emptyArray;
        }
        return matches;
    }
    if (typeof object === 'string') {
        return splitClassString(object);
    }
    if (object instanceof Array) {
        const len = object.length;
        if (len > 0) {
            const classes = [];
            for (let i = 0; i < len; ++i) {
                classes.push(...getClassesToAdd(object[i]));
            }
            return classes;
        }
        else {
            return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["PLATFORM"].emptyArray;
        }
    }
    else if (object instanceof Object) {
        const classes = [];
        for (const property in object) {
            // Let non typical values also evaluate true so disable bool check
            // eslint-disable-next-line @typescript-eslint/strict-boolean-expressions, no-extra-boolean-cast
            if (Boolean(object[property])) {
                // We must do this in case object property has a space in the name which results in two classes
                if (property.includes(' ')) {
                    classes.push(...splitClassString(property));
                }
                else {
                    classes.push(property);
                }
            }
        }
        return classes;
    }
    return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["PLATFORM"].emptyArray;
}
//# sourceMappingURL=class-attribute-accessor.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime-html/dist/esnext/observation/data-attribute-accessor.js":
/*!***********************************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime-html/dist/esnext/observation/data-attribute-accessor.js ***!
  \***********************************************************************************************/
/*! exports provided: DataAttributeAccessor */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DataAttributeAccessor", function() { return DataAttributeAccessor; });
/**
 * Attribute accessor for HTML elements.
 * Note that Aurelia works with properties, so in all case it will try to assign to property instead of attributes.
 * Unless the property falls into a special set, then it will use attribute for it.
 *
 * @see ElementPropertyAccessor
 */
class DataAttributeAccessor {
    constructor(scheduler, flags, obj, propertyKey) {
        this.scheduler = scheduler;
        this.propertyKey = propertyKey;
        this.currentValue = null;
        this.oldValue = null;
        this.hasChanges = false;
        this.task = null;
        this.obj = obj;
        this.persistentFlags = flags & 805306383 /* targetObserverFlags */;
    }
    getValue() {
        return this.currentValue;
    }
    setValue(newValue, flags) {
        this.currentValue = newValue;
        this.hasChanges = newValue !== this.oldValue;
        if ((flags & 4096 /* fromBind */) > 0 || this.persistentFlags === 268435456 /* noTargetObserverQueue */) {
            this.flushChanges(flags);
        }
        else if (this.persistentFlags !== 536870912 /* persistentTargetObserverQueue */ && this.task === null) {
            this.task = this.scheduler.queueRenderTask(() => {
                this.flushChanges(flags);
                this.task = null;
            });
        }
    }
    flushChanges(flags) {
        if (this.hasChanges) {
            this.hasChanges = false;
            const { currentValue } = this;
            this.oldValue = currentValue;
            if (currentValue == void 0) {
                this.obj.removeAttribute(this.propertyKey);
            }
            else {
                this.obj.setAttribute(this.propertyKey, currentValue);
            }
        }
    }
    bind(flags) {
        if (this.persistentFlags === 536870912 /* persistentTargetObserverQueue */) {
            if (this.task !== null) {
                this.task.cancel();
            }
            this.task = this.scheduler.queueRenderTask(() => this.flushChanges(flags), { persistent: true });
        }
        this.currentValue = this.oldValue = this.obj.getAttribute(this.propertyKey);
    }
    unbind(flags) {
        if (this.task !== null) {
            this.task.cancel();
            this.task = null;
        }
    }
}
//# sourceMappingURL=data-attribute-accessor.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime-html/dist/esnext/observation/element-attribute-observer.js":
/*!**************************************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime-html/dist/esnext/observation/element-attribute-observer.js ***!
  \**************************************************************************************************/
/*! exports provided: AttributeObserver */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AttributeObserver", function() { return AttributeObserver; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/runtime */ "./node_modules/@aurelia/runtime/dist/esnext/index.js");


/**
 * Observer for handling two-way binding with attributes
 * Has different strategy for class/style and normal attributes
 * TODO: handle SVG/attributes with namespace
 */
let AttributeObserver = class AttributeObserver {
    constructor(scheduler, flags, observerLocator, obj, propertyKey, targetAttribute) {
        this.scheduler = scheduler;
        this.observerLocator = observerLocator;
        this.obj = obj;
        this.propertyKey = propertyKey;
        this.targetAttribute = targetAttribute;
        this.currentValue = null;
        this.oldValue = null;
        this.hasChanges = false;
        this.task = null;
        this.persistentFlags = flags & 805306383 /* targetObserverFlags */;
    }
    getValue() {
        return this.currentValue;
    }
    setValue(newValue, flags) {
        this.currentValue = newValue;
        this.hasChanges = newValue !== this.oldValue;
        if ((flags & 4096 /* fromBind */) > 0 || this.persistentFlags === 268435456 /* noTargetObserverQueue */) {
            this.flushChanges(flags);
        }
        else if (this.persistentFlags !== 536870912 /* persistentTargetObserverQueue */ && this.task === null) {
            this.task = this.scheduler.queueRenderTask(() => {
                this.flushChanges(flags);
                this.task = null;
            });
        }
    }
    flushChanges(flags) {
        if (this.hasChanges) {
            this.hasChanges = false;
            const { currentValue } = this;
            this.oldValue = currentValue;
            switch (this.targetAttribute) {
                case 'class': {
                    // Why is class attribute observer setValue look different with class attribute accessor?
                    // ==============
                    // For class list
                    // newValue is simply checked if truthy or falsy
                    // and toggle the class accordingly
                    // -- the rule of this is quite different to normal attribute
                    //
                    // for class attribute, observer is different in a way that it only observe a particular class at a time
                    // this also comes from syntax, where it would typically be my-class.class="someProperty"
                    //
                    // so there is no need for separating class by space and add all of them like class accessor
                    if (!!currentValue) {
                        this.obj.classList.add(this.propertyKey);
                    }
                    else {
                        this.obj.classList.remove(this.propertyKey);
                    }
                    break;
                }
                case 'style': {
                    let priority = '';
                    let newValue = currentValue;
                    if (typeof newValue === 'string' && newValue.includes('!important')) {
                        priority = 'important';
                        newValue = newValue.replace('!important', '');
                    }
                    this.obj.style.setProperty(this.propertyKey, newValue, priority);
                }
            }
        }
    }
    handleMutation(mutationRecords) {
        let shouldProcess = false;
        for (let i = 0, ii = mutationRecords.length; ii > i; ++i) {
            const record = mutationRecords[i];
            if (record.type === 'attributes' && record.attributeName === this.propertyKey) {
                shouldProcess = true;
                break;
            }
        }
        if (shouldProcess) {
            let newValue;
            switch (this.targetAttribute) {
                case 'class':
                    newValue = this.obj.classList.contains(this.propertyKey);
                    break;
                case 'style':
                    newValue = this.obj.style.getPropertyValue(this.propertyKey);
                    break;
                default:
                    throw new Error(`Unsupported targetAttribute: ${this.targetAttribute}`);
            }
            if (newValue !== this.currentValue) {
                const { currentValue } = this;
                this.currentValue = this.oldValue = newValue;
                this.hasChanges = false;
                this.callSubscribers(newValue, currentValue, 131072 /* fromDOMEvent */);
            }
        }
    }
    subscribe(subscriber) {
        if (!this.hasSubscribers()) {
            this.currentValue = this.oldValue = this.obj.getAttribute(this.propertyKey);
            startObservation(this.obj, this);
        }
        this.addSubscriber(subscriber);
    }
    unsubscribe(subscriber) {
        this.removeSubscriber(subscriber);
        if (!this.hasSubscribers()) {
            stopObservation(this.obj, this);
        }
    }
    bind(flags) {
        if (this.persistentFlags === 536870912 /* persistentTargetObserverQueue */) {
            if (this.task !== null) {
                this.task.cancel();
            }
            this.task = this.scheduler.queueRenderTask(() => this.flushChanges(flags), { persistent: true });
        }
    }
    unbind(flags) {
        if (this.task !== null) {
            this.task.cancel();
            this.task = null;
        }
    }
};
AttributeObserver = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["subscriberCollection"])(),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object, Number, Object, Object, String, String])
], AttributeObserver);

const startObservation = (element, subscription) => {
    if (element.$eMObservers === undefined) {
        element.$eMObservers = new Set();
    }
    if (element.$mObserver === undefined) {
        element.$mObserver = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["DOM"].createNodeObserver(element, handleMutation, { attributes: true });
    }
    element.$eMObservers.add(subscription);
};
const stopObservation = (element, subscription) => {
    const $eMObservers = element.$eMObservers;
    if ($eMObservers && $eMObservers.delete(subscription)) {
        if ($eMObservers.size === 0) {
            element.$mObserver.disconnect();
            element.$mObserver = undefined;
        }
        return true;
    }
    return false;
};
const handleMutation = (mutationRecords) => {
    mutationRecords[0].target.$eMObservers.forEach(invokeHandleMutation, mutationRecords);
};
function invokeHandleMutation(s) {
    s.handleMutation(this);
}
//# sourceMappingURL=element-attribute-observer.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime-html/dist/esnext/observation/element-property-accessor.js":
/*!*************************************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime-html/dist/esnext/observation/element-property-accessor.js ***!
  \*************************************************************************************************/
/*! exports provided: ElementPropertyAccessor */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ElementPropertyAccessor", function() { return ElementPropertyAccessor; });
/**
 * Property accessor for HTML Elements.
 * Note that Aurelia works with properties, so in all case it will try to assign to property instead of attributes.
 * Unless the property falls into a special set, then it will use attribute for it.
 *
 * @see DataAttributeAccessor
 */
class ElementPropertyAccessor {
    constructor(scheduler, flags, obj, propertyKey) {
        this.scheduler = scheduler;
        this.obj = obj;
        this.propertyKey = propertyKey;
        this.currentValue = void 0;
        this.oldValue = void 0;
        this.hasChanges = false;
        this.task = null;
        this.persistentFlags = flags & 805306383 /* targetObserverFlags */;
    }
    getValue() {
        return this.currentValue;
    }
    setValue(newValue, flags) {
        this.currentValue = newValue;
        this.hasChanges = newValue !== this.oldValue;
        if ((flags & 4096 /* fromBind */) > 0 || this.persistentFlags === 268435456 /* noTargetObserverQueue */) {
            this.flushChanges(flags);
        }
        else if (this.persistentFlags !== 536870912 /* persistentTargetObserverQueue */ && this.task === null) {
            this.task = this.scheduler.queueRenderTask(() => {
                this.flushChanges(flags);
                this.task = null;
            });
        }
    }
    flushChanges(flags) {
        if (this.hasChanges) {
            this.hasChanges = false;
            const { currentValue } = this;
            this.oldValue = currentValue;
            this.obj[this.propertyKey] = currentValue;
        }
    }
    bind(flags) {
        if (this.persistentFlags === 536870912 /* persistentTargetObserverQueue */) {
            if (this.task !== null) {
                this.task.cancel();
            }
            this.task = this.scheduler.queueRenderTask(() => this.flushChanges(flags), { persistent: true });
        }
        this.currentValue = this.oldValue = this.obj[this.propertyKey];
    }
    unbind(flags) {
        if (this.task !== null) {
            this.task.cancel();
            this.task = null;
        }
    }
}
//# sourceMappingURL=element-property-accessor.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime-html/dist/esnext/observation/event-manager.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime-html/dist/esnext/observation/event-manager.js ***!
  \*************************************************************************************/
/*! exports provided: findOriginalEventTarget, ListenerTracker, DelegateOrCaptureSubscription, TriggerSubscription, EventSubscriber, IEventManager, EventManager */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "findOriginalEventTarget", function() { return findOriginalEventTarget; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ListenerTracker", function() { return ListenerTracker; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DelegateOrCaptureSubscription", function() { return DelegateOrCaptureSubscription; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TriggerSubscription", function() { return TriggerSubscription; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EventSubscriber", function() { return EventSubscriber; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IEventManager", function() { return IEventManager; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EventManager", function() { return EventManager; });
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/runtime */ "./node_modules/@aurelia/runtime/dist/esnext/index.js");


// Note: path and deepPath are designed to handle v0 and v1 shadow dom specs respectively
/** @internal */
function findOriginalEventTarget(event) {
    return (event.composedPath && event.composedPath()[0]) || (event.deepPath && event.deepPath()[0]) || (event.path && event.path[0]) || event.target;
}
function stopPropagation() {
    this.standardStopPropagation();
    this.propagationStopped = true;
}
function handleCapturedEvent(event) {
    event.propagationStopped = false;
    let target = findOriginalEventTarget(event);
    const orderedCallbacks = [];
    /**
     * During capturing phase, event 'bubbles' down from parent. Needs to reorder callback from root down to target
     */
    while (target) {
        if (target.capturedCallbacks) {
            const callback = target.capturedCallbacks[event.type];
            if (callback) {
                if (event.stopPropagation !== stopPropagation) {
                    event.standardStopPropagation = event.stopPropagation;
                    event.stopPropagation = stopPropagation;
                }
                orderedCallbacks.push(callback);
            }
        }
        target = target.parentNode;
    }
    for (let i = orderedCallbacks.length - 1; i >= 0 && !event.propagationStopped; i--) {
        const orderedCallback = orderedCallbacks[i];
        if ('handleEvent' in orderedCallback) {
            orderedCallback.handleEvent(event);
        }
        else {
            orderedCallback(event);
        }
    }
}
function handleDelegatedEvent(event) {
    event.propagationStopped = false;
    let target = findOriginalEventTarget(event);
    while (target && !event.propagationStopped) {
        if (target.delegatedCallbacks) {
            const callback = target.delegatedCallbacks[event.type];
            if (callback) {
                if (event.stopPropagation !== stopPropagation) {
                    event.standardStopPropagation = event.stopPropagation;
                    event.stopPropagation = stopPropagation;
                }
                if ('handleEvent' in callback) {
                    callback.handleEvent(event);
                }
                else {
                    callback(event);
                }
            }
        }
        target = target.parentNode;
    }
}
class ListenerTracker {
    constructor(dom, eventName, listener, capture) {
        this.dom = dom;
        this.eventName = eventName;
        this.listener = listener;
        this.capture = capture;
        this.count = 0;
    }
    increment() {
        this.count++;
        if (this.count === 1) {
            this.dom.addEventListener(this.eventName, this.listener, null, this.capture);
        }
    }
    decrement() {
        this.count--;
        if (this.count === 0) {
            this.dom.removeEventListener(this.eventName, this.listener, null, this.capture);
        }
    }
    /* @internal */
    dispose() {
        if (this.count > 0) {
            this.count = 0;
            this.dom.removeEventListener(this.eventName, this.listener, null, this.capture);
        }
    }
}
/**
 * Enable dispose() pattern for `delegate` & `capture` commands
 */
class DelegateOrCaptureSubscription {
    constructor(entry, lookup, targetEvent, callback) {
        this.entry = entry;
        this.lookup = lookup;
        this.targetEvent = targetEvent;
        lookup[targetEvent] = callback;
    }
    dispose() {
        this.entry.decrement();
        this.lookup[this.targetEvent] = null;
    }
}
/**
 * Enable dispose() pattern for addEventListener for `trigger`
 */
class TriggerSubscription {
    constructor(dom, target, targetEvent, callback) {
        this.dom = dom;
        this.target = target;
        this.targetEvent = targetEvent;
        this.callback = callback;
        dom.addEventListener(targetEvent, callback, target);
    }
    dispose() {
        this.dom.removeEventListener(this.targetEvent, this.callback, this.target);
    }
}
class EventSubscriber {
    constructor(dom, events) {
        this.dom = dom;
        this.events = events;
        this.target = null;
        this.handler = null;
    }
    subscribe(node, callbackOrListener) {
        this.target = node;
        this.handler = callbackOrListener;
        const add = this.dom.addEventListener;
        const events = this.events;
        for (let i = 0, ii = events.length; ii > i; ++i) {
            add(events[i], callbackOrListener, node);
        }
    }
    dispose() {
        const node = this.target;
        const callbackOrListener = this.handler;
        const events = this.events;
        const dom = this.dom;
        for (let i = 0, ii = events.length; ii > i; ++i) {
            dom.removeEventListener(events[i], callbackOrListener, node);
        }
        this.target = this.handler = null;
    }
}
const IEventManager = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["DI"].createInterface('IEventManager').withDefault(x => x.singleton(EventManager));
/** @internal */
class EventManager {
    constructor() {
        this.delegatedHandlers = {};
        this.capturedHandlers = {};
    }
    addEventListener(dom, target, targetEvent, callbackOrListener, strategy) {
        let delegatedHandlers;
        let capturedHandlers;
        let handlerEntry;
        if (strategy === _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["DelegationStrategy"].bubbling) {
            delegatedHandlers = this.delegatedHandlers;
            handlerEntry = delegatedHandlers[targetEvent] || (delegatedHandlers[targetEvent] = new ListenerTracker(dom, targetEvent, handleDelegatedEvent, false));
            handlerEntry.increment();
            const delegatedCallbacks = target.delegatedCallbacks || (target.delegatedCallbacks = {});
            return new DelegateOrCaptureSubscription(handlerEntry, delegatedCallbacks, targetEvent, callbackOrListener);
        }
        if (strategy === _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["DelegationStrategy"].capturing) {
            capturedHandlers = this.capturedHandlers;
            handlerEntry = capturedHandlers[targetEvent] || (capturedHandlers[targetEvent] = new ListenerTracker(dom, targetEvent, handleCapturedEvent, true));
            handlerEntry.increment();
            const capturedCallbacks = target.capturedCallbacks || (target.capturedCallbacks = {});
            return new DelegateOrCaptureSubscription(handlerEntry, capturedCallbacks, targetEvent, callbackOrListener);
        }
        return new TriggerSubscription(dom, target, targetEvent, callbackOrListener);
    }
    dispose() {
        let key;
        const { delegatedHandlers, capturedHandlers } = this;
        for (key in delegatedHandlers) {
            delegatedHandlers[key].dispose();
        }
        for (key in capturedHandlers) {
            capturedHandlers[key].dispose();
        }
    }
}
//# sourceMappingURL=event-manager.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime-html/dist/esnext/observation/observer-locator.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime-html/dist/esnext/observation/observer-locator.js ***!
  \****************************************************************************************/
/*! exports provided: TargetObserverLocator, TargetAccessorLocator */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TargetObserverLocator", function() { return TargetObserverLocator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TargetAccessorLocator", function() { return TargetAccessorLocator; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aurelia/runtime */ "./node_modules/@aurelia/runtime/dist/esnext/index.js");
/* harmony import */ var _attribute_ns_accessor__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./attribute-ns-accessor */ "./node_modules/@aurelia/runtime-html/dist/esnext/observation/attribute-ns-accessor.js");
/* harmony import */ var _checked_observer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./checked-observer */ "./node_modules/@aurelia/runtime-html/dist/esnext/observation/checked-observer.js");
/* harmony import */ var _class_attribute_accessor__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./class-attribute-accessor */ "./node_modules/@aurelia/runtime-html/dist/esnext/observation/class-attribute-accessor.js");
/* harmony import */ var _data_attribute_accessor__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./data-attribute-accessor */ "./node_modules/@aurelia/runtime-html/dist/esnext/observation/data-attribute-accessor.js");
/* harmony import */ var _element_property_accessor__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./element-property-accessor */ "./node_modules/@aurelia/runtime-html/dist/esnext/observation/element-property-accessor.js");
/* harmony import */ var _event_manager__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./event-manager */ "./node_modules/@aurelia/runtime-html/dist/esnext/observation/event-manager.js");
/* harmony import */ var _select_value_observer__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./select-value-observer */ "./node_modules/@aurelia/runtime-html/dist/esnext/observation/select-value-observer.js");
/* harmony import */ var _style_attribute_accessor__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./style-attribute-accessor */ "./node_modules/@aurelia/runtime-html/dist/esnext/observation/style-attribute-accessor.js");
/* harmony import */ var _svg_analyzer__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./svg-analyzer */ "./node_modules/@aurelia/runtime-html/dist/esnext/observation/svg-analyzer.js");
/* harmony import */ var _value_attribute_observer__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./value-attribute-observer */ "./node_modules/@aurelia/runtime-html/dist/esnext/observation/value-attribute-observer.js");













// https://infra.spec.whatwg.org/#namespaces
const htmlNS = 'http://www.w3.org/1999/xhtml';
const mathmlNS = 'http://www.w3.org/1998/Math/MathML';
const svgNS = 'http://www.w3.org/2000/svg';
const xlinkNS = 'http://www.w3.org/1999/xlink';
const xmlNS = 'http://www.w3.org/XML/1998/namespace';
const xmlnsNS = 'http://www.w3.org/2000/xmlns/';
// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2
const nsAttributes = Object.assign(Object.create(null), {
    'xlink:actuate': ['actuate', xlinkNS],
    'xlink:arcrole': ['arcrole', xlinkNS],
    'xlink:href': ['href', xlinkNS],
    'xlink:role': ['role', xlinkNS],
    'xlink:show': ['show', xlinkNS],
    'xlink:title': ['title', xlinkNS],
    'xlink:type': ['type', xlinkNS],
    'xml:lang': ['lang', xmlNS],
    'xml:space': ['space', xmlNS],
    'xmlns': ['xmlns', xmlnsNS],
    'xmlns:xlink': ['xlink', xmlnsNS],
});
const inputEvents = ['change', 'input'];
const selectEvents = ['change'];
const contentEvents = ['change', 'input', 'blur', 'keyup', 'paste'];
const scrollEvents = ['scroll'];
const overrideProps = Object.assign(Object.create(null), {
    'class': true,
    'style': true,
    'css': true,
    'checked': true,
    'value': true,
    'model': true,
    'xlink:actuate': true,
    'xlink:arcrole': true,
    'xlink:href': true,
    'xlink:role': true,
    'xlink:show': true,
    'xlink:title': true,
    'xlink:type': true,
    'xml:lang': true,
    'xml:space': true,
    'xmlns': true,
    'xmlns:xlink': true,
});
let TargetObserverLocator = class TargetObserverLocator {
    constructor(dom, svgAnalyzer) {
        this.dom = dom;
        this.svgAnalyzer = svgAnalyzer;
    }
    static register(container) {
        return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Registration"].singleton(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["ITargetObserverLocator"], this).register(container);
    }
    getObserver(flags, scheduler, lifecycle, observerLocator, obj, propertyName) {
        switch (propertyName) {
            case 'checked':
                return new _checked_observer__WEBPACK_IMPORTED_MODULE_4__["CheckedObserver"](scheduler, flags, lifecycle, new _event_manager__WEBPACK_IMPORTED_MODULE_8__["EventSubscriber"](this.dom, inputEvents), obj);
            case 'value':
                if (obj.tagName === 'SELECT') {
                    return new _select_value_observer__WEBPACK_IMPORTED_MODULE_9__["SelectValueObserver"](scheduler, flags, observerLocator, this.dom, new _event_manager__WEBPACK_IMPORTED_MODULE_8__["EventSubscriber"](this.dom, selectEvents), obj);
                }
                return new _value_attribute_observer__WEBPACK_IMPORTED_MODULE_12__["ValueAttributeObserver"](scheduler, flags, new _event_manager__WEBPACK_IMPORTED_MODULE_8__["EventSubscriber"](this.dom, inputEvents), obj, propertyName);
            case 'files':
                return new _value_attribute_observer__WEBPACK_IMPORTED_MODULE_12__["ValueAttributeObserver"](scheduler, flags, new _event_manager__WEBPACK_IMPORTED_MODULE_8__["EventSubscriber"](this.dom, inputEvents), obj, propertyName);
            case 'textContent':
            case 'innerHTML':
                return new _value_attribute_observer__WEBPACK_IMPORTED_MODULE_12__["ValueAttributeObserver"](scheduler, flags, new _event_manager__WEBPACK_IMPORTED_MODULE_8__["EventSubscriber"](this.dom, contentEvents), obj, propertyName);
            case 'scrollTop':
            case 'scrollLeft':
                return new _value_attribute_observer__WEBPACK_IMPORTED_MODULE_12__["ValueAttributeObserver"](scheduler, flags, new _event_manager__WEBPACK_IMPORTED_MODULE_8__["EventSubscriber"](this.dom, scrollEvents), obj, propertyName);
            case 'class':
                return new _class_attribute_accessor__WEBPACK_IMPORTED_MODULE_5__["ClassAttributeAccessor"](scheduler, flags, obj);
            case 'style':
            case 'css':
                return new _style_attribute_accessor__WEBPACK_IMPORTED_MODULE_10__["StyleAttributeAccessor"](scheduler, flags, obj);
            case 'model':
                return new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["SetterObserver"](lifecycle, flags, obj, propertyName);
            case 'role':
                return new _data_attribute_accessor__WEBPACK_IMPORTED_MODULE_6__["DataAttributeAccessor"](scheduler, flags, obj, propertyName);
            default:
                if (nsAttributes[propertyName] !== undefined) {
                    const nsProps = nsAttributes[propertyName];
                    return new _attribute_ns_accessor__WEBPACK_IMPORTED_MODULE_3__["AttributeNSAccessor"](scheduler, flags, obj, nsProps[0], nsProps[1]);
                }
                if (isDataAttribute(obj, propertyName, this.svgAnalyzer)) {
                    return new _data_attribute_accessor__WEBPACK_IMPORTED_MODULE_6__["DataAttributeAccessor"](scheduler, flags, obj, propertyName);
                }
        }
        return null;
    }
    overridesAccessor(flags, obj, propertyName) {
        return overrideProps[propertyName] === true;
    }
    // consider a scenario where user would want to provide a Date object observation via patching a few mutation method on it
    // then this extension point of this default implementaion cannot be used,
    // and a new implementation of ITargetObserverLocator should be used instead
    // This default implementation only accounts for the most common target scenarios
    handles(flags, obj) {
        return this.dom.isNodeInstance(obj);
    }
};
TargetObserverLocator = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(0, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["IDOM"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(1, _svg_analyzer__WEBPACK_IMPORTED_MODULE_11__["ISVGAnalyzer"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object, Object])
], TargetObserverLocator);

let TargetAccessorLocator = class TargetAccessorLocator {
    constructor(dom, svgAnalyzer) {
        this.dom = dom;
        this.svgAnalyzer = svgAnalyzer;
    }
    static register(container) {
        return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Registration"].singleton(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["ITargetAccessorLocator"], this).register(container);
    }
    getAccessor(flags, scheduler, lifecycle, obj, propertyName) {
        switch (propertyName) {
            case 'textContent':
                // note: this case is just an optimization (textContent is the most often used property)
                return new _element_property_accessor__WEBPACK_IMPORTED_MODULE_7__["ElementPropertyAccessor"](scheduler, flags, obj, propertyName);
            case 'class':
                return new _class_attribute_accessor__WEBPACK_IMPORTED_MODULE_5__["ClassAttributeAccessor"](scheduler, flags, obj);
            case 'style':
            case 'css':
                return new _style_attribute_accessor__WEBPACK_IMPORTED_MODULE_10__["StyleAttributeAccessor"](scheduler, flags, obj);
            // TODO: there are (many) more situation where we want to default to DataAttributeAccessor,
            // but for now stick to what vCurrent does
            case 'src':
            case 'href':
            // https://html.spec.whatwg.org/multipage/dom.html#wai-aria
            case 'role':
                return new _data_attribute_accessor__WEBPACK_IMPORTED_MODULE_6__["DataAttributeAccessor"](scheduler, flags, obj, propertyName);
            default:
                if (nsAttributes[propertyName] !== undefined) {
                    const nsProps = nsAttributes[propertyName];
                    return new _attribute_ns_accessor__WEBPACK_IMPORTED_MODULE_3__["AttributeNSAccessor"](scheduler, flags, obj, nsProps[0], nsProps[1]);
                }
                if (isDataAttribute(obj, propertyName, this.svgAnalyzer)) {
                    return new _data_attribute_accessor__WEBPACK_IMPORTED_MODULE_6__["DataAttributeAccessor"](scheduler, flags, obj, propertyName);
                }
                return new _element_property_accessor__WEBPACK_IMPORTED_MODULE_7__["ElementPropertyAccessor"](scheduler, flags, obj, propertyName);
        }
    }
    handles(flags, obj) {
        return this.dom.isNodeInstance(obj);
    }
};
TargetAccessorLocator = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(0, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["IDOM"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(1, _svg_analyzer__WEBPACK_IMPORTED_MODULE_11__["ISVGAnalyzer"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object, Object])
], TargetAccessorLocator);

const IsDataAttribute = {};
function isDataAttribute(obj, propertyName, svgAnalyzer) {
    if (IsDataAttribute[propertyName] === true) {
        return true;
    }
    const prefix = propertyName.slice(0, 5);
    // https://html.spec.whatwg.org/multipage/dom.html#wai-aria
    // https://html.spec.whatwg.org/multipage/dom.html#custom-data-attribute
    return IsDataAttribute[propertyName] =
        prefix === 'aria-' ||
            prefix === 'data-' ||
            svgAnalyzer.isStandardSvgAttribute(obj, propertyName);
}
//# sourceMappingURL=observer-locator.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime-html/dist/esnext/observation/select-value-observer.js":
/*!*********************************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime-html/dist/esnext/observation/select-value-observer.js ***!
  \*********************************************************************************************/
/*! exports provided: SelectValueObserver */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SelectValueObserver", function() { return SelectValueObserver; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/runtime */ "./node_modules/@aurelia/runtime/dist/esnext/index.js");
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");



const childObserverOptions = {
    childList: true,
    subtree: true,
    characterData: true
};
function defaultMatcher(a, b) {
    return a === b;
}
let SelectValueObserver = class SelectValueObserver {
    constructor(scheduler, flags, observerLocator, dom, handler, obj) {
        this.scheduler = scheduler;
        this.observerLocator = observerLocator;
        this.dom = dom;
        this.handler = handler;
        this.obj = obj;
        this.currentValue = void 0;
        this.oldValue = void 0;
        this.hasChanges = false;
        this.task = null;
        this.arrayObserver = void 0;
        this.nodeObserver = void 0;
        this.persistentFlags = flags & 805306383 /* targetObserverFlags */;
    }
    getValue() {
        return this.currentValue;
    }
    setValue(newValue, flags) {
        this.currentValue = newValue;
        this.hasChanges = newValue !== this.oldValue;
        if ((flags & 4096 /* fromBind */) > 0 || this.persistentFlags === 268435456 /* noTargetObserverQueue */) {
            this.flushChanges(flags);
        }
        else if (this.persistentFlags !== 536870912 /* persistentTargetObserverQueue */ && this.task === null) {
            this.task = this.scheduler.queueRenderTask(() => {
                this.flushChanges(flags);
                this.task = null;
            });
        }
    }
    flushChanges(flags) {
        if (this.hasChanges) {
            this.hasChanges = false;
            const { currentValue } = this;
            this.oldValue = currentValue;
            const isArray = Array.isArray(currentValue);
            if (!isArray && currentValue != void 0 && this.obj.multiple) {
                throw new Error('Only null or Array instances can be bound to a multi-select.');
            }
            if (this.arrayObserver) {
                this.arrayObserver.unsubscribeFromCollection(this);
                this.arrayObserver = void 0;
            }
            if (isArray) {
                this.arrayObserver = this.observerLocator.getArrayObserver(flags, currentValue);
                this.arrayObserver.subscribeToCollection(this);
            }
            this.synchronizeOptions();
            this.notify(flags);
        }
    }
    handleCollectionChange(indexMap, flags) {
        if ((flags & 4096 /* fromBind */) > 0 || this.persistentFlags === 268435456 /* noTargetObserverQueue */) {
            this.synchronizeOptions();
        }
        else {
            this.hasChanges = true;
        }
        if (this.persistentFlags !== 536870912 /* persistentTargetObserverQueue */ && this.task === null) {
            this.task = this.scheduler.queueRenderTask(() => {
                this.flushChanges(flags);
                this.task = null;
            });
        }
        this.callSubscribers(this.currentValue, this.oldValue, flags);
    }
    handleChange(newValue, previousValue, flags) {
        if ((flags & 4096 /* fromBind */) > 0 || this.persistentFlags === 268435456 /* noTargetObserverQueue */) {
            this.synchronizeOptions();
        }
        else {
            this.hasChanges = true;
        }
        if (this.persistentFlags !== 536870912 /* persistentTargetObserverQueue */ && this.task === null) {
            this.task = this.scheduler.queueRenderTask(() => {
                this.flushChanges(flags);
                this.task = null;
            });
        }
        this.callSubscribers(newValue, previousValue, flags);
    }
    notify(flags) {
        if ((flags & 4096 /* fromBind */) > 0 || this.persistentFlags === 268435456 /* noTargetObserverQueue */) {
            return;
        }
        const oldValue = this.oldValue;
        const newValue = this.currentValue;
        if (newValue === oldValue) {
            return;
        }
        this.callSubscribers(newValue, oldValue, flags);
    }
    handleEvent() {
        // "from-view" changes are always synchronous now, so immediately sync the value and notify subscribers
        const shouldNotify = this.synchronizeValue();
        if (shouldNotify) {
            this.callSubscribers(this.currentValue, this.oldValue, 131072 /* fromDOMEvent */ | 524288 /* allowPublishRoundtrip */);
        }
    }
    synchronizeOptions(indexMap) {
        const { currentValue, obj } = this;
        const isArray = Array.isArray(currentValue);
        const matcher = obj.matcher !== void 0 ? obj.matcher : defaultMatcher;
        const options = obj.options;
        let i = options.length;
        while (i-- > 0) {
            const option = options[i];
            const optionValue = Object.prototype.hasOwnProperty.call(option, 'model') ? option.model : option.value;
            if (isArray) {
                option.selected = currentValue.findIndex(item => !!matcher(optionValue, item)) !== -1;
                continue;
            }
            option.selected = !!matcher(optionValue, currentValue);
        }
    }
    synchronizeValue() {
        // Spec for synchronizing value from `SelectObserver` to `<select/>`
        // When synchronizing value to observed <select/> element, do the following steps:
        // A. If `<select/>` is multiple
        //    1. Check if current value, called `currentValue` is an array
        //      a. If not an array, return true to signal value has changed
        //      b. If is an array:
        //        i. gather all current selected <option/>, in to array called `values`
        //        ii. loop through the `currentValue` array and remove items that are nolonger selected based on matcher
        //        iii. loop through the `values` array and add items that are selected based on matcher
        //        iv. Return false to signal value hasn't changed
        // B. If the select is single
        //    1. Let `value` equal the first selected option, if no option selected, then `value` is `null`
        //    2. assign `this.currentValue` to `this.oldValue`
        //    3. assign `value` to `this.currentValue`
        //    4. return `true` to signal value has changed
        const obj = this.obj;
        const options = obj.options;
        const len = options.length;
        const currentValue = this.currentValue;
        let i = 0;
        if (obj.multiple) {
            // A.
            if (!Array.isArray(currentValue)) {
                // A.1.a
                return true;
            }
            // A.1.b
            // multi select
            let option;
            const matcher = obj.matcher || defaultMatcher;
            // A.1.b.i
            const values = [];
            while (i < len) {
                option = options[i];
                if (option.selected) {
                    values.push(Object.prototype.hasOwnProperty.call(option, 'model')
                        ? option.model
                        : option.value);
                }
                ++i;
            }
            // A.1.b.ii
            i = 0;
            while (i < currentValue.length) {
                const a = currentValue[i];
                // Todo: remove arrow fn
                if (values.findIndex(b => !!matcher(a, b)) === -1) {
                    currentValue.splice(i, 1);
                }
                else {
                    ++i;
                }
            }
            // A.1.b.iii
            i = 0;
            while (i < values.length) {
                const a = values[i];
                // Todo: remove arrow fn
                if (currentValue.findIndex(b => !!matcher(a, b)) === -1) {
                    currentValue.push(a);
                }
                ++i;
            }
            // A.1.b.iv
            return false;
        }
        // B. single select
        // B.1
        let value = null;
        while (i < len) {
            const option = options[i];
            if (option.selected) {
                value = Object.prototype.hasOwnProperty.call(option, 'model')
                    ? option.model
                    : option.value;
                break;
            }
            ++i;
        }
        // B.2
        this.oldValue = this.currentValue;
        // B.3
        this.currentValue = value;
        // B.4
        return true;
    }
    bind(flags) {
        this.nodeObserver = this.dom.createNodeObserver(this.obj, this.handleNodeChange, childObserverOptions);
        if (this.persistentFlags === 536870912 /* persistentTargetObserverQueue */) {
            if (this.task !== null) {
                this.task.cancel();
            }
            this.task = this.scheduler.queueRenderTask(() => this.flushChanges(flags), { persistent: true });
        }
    }
    unbind(flags) {
        this.nodeObserver.disconnect();
        this.nodeObserver = null;
        if (this.task !== null) {
            this.task.cancel();
            this.task = null;
        }
        if (this.arrayObserver) {
            this.arrayObserver.unsubscribeFromCollection(this);
            this.arrayObserver = null;
        }
    }
    handleNodeChange() {
        this.synchronizeOptions();
        const shouldNotify = this.synchronizeValue();
        if (shouldNotify) {
            this.notify(131072 /* fromDOMEvent */);
        }
    }
    subscribe(subscriber) {
        if (!this.hasSubscribers()) {
            this.handler.subscribe(this.obj, this);
        }
        this.addSubscriber(subscriber);
    }
    unsubscribe(subscriber) {
        this.removeSubscriber(subscriber);
        if (!this.hasSubscribers()) {
            this.handler.dispose();
        }
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__["bound"],
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:type", Function),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", []),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:returntype", void 0)
], SelectValueObserver.prototype, "handleNodeChange", null);
SelectValueObserver = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["subscriberCollection"])(),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object, Number, Object, Object, Object, Object])
], SelectValueObserver);

//# sourceMappingURL=select-value-observer.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime-html/dist/esnext/observation/style-attribute-accessor.js":
/*!************************************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime-html/dist/esnext/observation/style-attribute-accessor.js ***!
  \************************************************************************************************/
/*! exports provided: StyleAttributeAccessor */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StyleAttributeAccessor", function() { return StyleAttributeAccessor; });
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");

class StyleAttributeAccessor {
    constructor(scheduler, flags, obj) {
        this.scheduler = scheduler;
        this.currentValue = '';
        this.oldValue = '';
        this.styles = {};
        this.version = 0;
        this.hasChanges = false;
        this.task = null;
        this.obj = obj;
        this.persistentFlags = flags & 805306383 /* targetObserverFlags */;
    }
    getValue() {
        return this.obj.style.cssText;
    }
    setValue(newValue, flags) {
        this.currentValue = newValue;
        this.hasChanges = newValue !== this.oldValue;
        if ((flags & 4096 /* fromBind */) > 0 || this.persistentFlags === 268435456 /* noTargetObserverQueue */) {
            this.flushChanges(flags);
        }
        else if (this.persistentFlags !== 536870912 /* persistentTargetObserverQueue */ && this.task === null) {
            this.task = this.scheduler.queueRenderTask(() => {
                this.flushChanges(flags);
                this.task = null;
            });
        }
    }
    getStyleTuplesFromString(currentValue) {
        const styleTuples = [];
        const rx = /\s*([\w-]+)\s*:\s*((?:(?:[\w-]+\(\s*(?:"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[\w-]+\(\s*(?:[^"](?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^)]*)\),?|[^)]*)\),?|"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^;]*),?\s*)+);?/g;
        let pair;
        let name;
        while ((pair = rx.exec(currentValue)) !== null) {
            name = pair[1];
            if (name.length === 0) {
                continue;
            }
            styleTuples.push([name, pair[2]]);
        }
        return styleTuples;
    }
    getStyleTuplesFromObject(currentValue) {
        let value;
        const styles = [];
        for (const property in currentValue) {
            value = currentValue[property];
            if (value == null) {
                continue;
            }
            if (typeof value === 'string') {
                styles.push([Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["kebabCase"])(property), value]);
                continue;
            }
            styles.push(...this.getStyleTuples(value));
        }
        return styles;
    }
    getStyleTuplesFromArray(currentValue) {
        const len = currentValue.length;
        if (len > 0) {
            const styles = [];
            for (let i = 0; i < len; ++i) {
                styles.push(...this.getStyleTuples(currentValue[i]));
            }
            return styles;
        }
        return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["PLATFORM"].emptyArray;
    }
    getStyleTuples(currentValue) {
        if (typeof currentValue === 'string') {
            return this.getStyleTuplesFromString(currentValue);
        }
        if (currentValue instanceof Array) {
            return this.getStyleTuplesFromArray(currentValue);
        }
        if (currentValue instanceof Object) {
            return this.getStyleTuplesFromObject(currentValue);
        }
        return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["PLATFORM"].emptyArray;
    }
    flushChanges(flags) {
        if (this.hasChanges) {
            this.hasChanges = false;
            const { currentValue } = this;
            this.oldValue = currentValue;
            const styles = this.styles;
            let style;
            let version = this.version;
            const styleTuples = this.getStyleTuples(currentValue);
            let tuple;
            let name;
            let value;
            const len = styleTuples.length;
            for (let i = 0; i < len; ++i) {
                tuple = styleTuples[i];
                name = tuple[0];
                value = tuple[1];
                this.setProperty(name, value);
                styles[name] = version;
            }
            this.styles = styles;
            this.version += 1;
            if (version === 0) {
                return;
            }
            version -= 1;
            for (style in styles) {
                if (!Object.prototype.hasOwnProperty.call(styles, style) || styles[style] !== version) {
                    continue;
                }
                this.obj.style.removeProperty(style);
            }
        }
    }
    setProperty(style, value) {
        let priority = '';
        if (value != null && typeof value.indexOf === 'function' && value.includes('!important')) {
            priority = 'important';
            value = value.replace('!important', '');
        }
        this.obj.style.setProperty(style, value, priority);
    }
    bind(flags) {
        if (this.persistentFlags === 536870912 /* persistentTargetObserverQueue */) {
            if (this.task !== null) {
                this.task.cancel();
            }
            this.task = this.scheduler.queueRenderTask(() => this.flushChanges(flags), { persistent: true });
        }
        this.oldValue = this.currentValue = this.obj.style.cssText;
    }
    unbind(flags) {
        if (this.task !== null) {
            this.task.cancel();
            this.task = null;
        }
    }
}
//# sourceMappingURL=style-attribute-accessor.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime-html/dist/esnext/observation/svg-analyzer.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime-html/dist/esnext/observation/svg-analyzer.js ***!
  \************************************************************************************/
/*! exports provided: ISVGAnalyzer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ISVGAnalyzer", function() { return ISVGAnalyzer; });
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");

const ISVGAnalyzer = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["DI"].createInterface('ISVGAnalyzer').withDefault(x => x.singleton(class {
    isStandardSvgAttribute(node, attributeName) {
        return false;
    }
}));
//# sourceMappingURL=svg-analyzer.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime-html/dist/esnext/observation/value-attribute-observer.js":
/*!************************************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime-html/dist/esnext/observation/value-attribute-observer.js ***!
  \************************************************************************************************/
/*! exports provided: ValueAttributeObserver */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ValueAttributeObserver", function() { return ValueAttributeObserver; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/runtime */ "./node_modules/@aurelia/runtime/dist/esnext/index.js");


// TODO: handle file attribute properly again, etc
/**
 * Observer for non-radio, non-checkbox input.
 */
let ValueAttributeObserver = class ValueAttributeObserver {
    constructor(scheduler, flags, handler, obj, propertyKey) {
        this.scheduler = scheduler;
        this.handler = handler;
        this.obj = obj;
        this.propertyKey = propertyKey;
        this.currentValue = '';
        this.oldValue = '';
        this.hasChanges = false;
        this.task = null;
        this.persistentFlags = flags & 805306383 /* targetObserverFlags */;
    }
    getValue() {
        return this.currentValue;
    }
    setValue(newValue, flags) {
        this.currentValue = newValue;
        this.hasChanges = newValue !== this.oldValue;
        if ((flags & 4096 /* fromBind */) > 0 || this.persistentFlags === 268435456 /* noTargetObserverQueue */) {
            this.flushChanges(flags);
        }
        else if (this.persistentFlags !== 536870912 /* persistentTargetObserverQueue */ && this.task === null) {
            this.task = this.scheduler.queueRenderTask(() => {
                this.flushChanges(flags);
                this.task = null;
            });
        }
    }
    flushChanges(flags) {
        if (this.hasChanges) {
            this.hasChanges = false;
            const { currentValue, oldValue } = this;
            this.oldValue = currentValue;
            if (currentValue == void 0) {
                this.obj[this.propertyKey] = '';
            }
            else {
                this.obj[this.propertyKey] = currentValue;
            }
            if ((flags & 4096 /* fromBind */) === 0) {
                this.callSubscribers(currentValue, oldValue, flags);
            }
        }
    }
    handleEvent() {
        const oldValue = this.oldValue = this.currentValue;
        const currentValue = this.currentValue = this.obj[this.propertyKey];
        if (oldValue !== currentValue) {
            this.oldValue = currentValue;
            this.callSubscribers(currentValue, oldValue, 131072 /* fromDOMEvent */ | 524288 /* allowPublishRoundtrip */);
        }
    }
    subscribe(subscriber) {
        if (!this.hasSubscribers()) {
            this.handler.subscribe(this.obj, this);
            this.currentValue = this.oldValue = this.obj[this.propertyKey];
        }
        this.addSubscriber(subscriber);
    }
    unsubscribe(subscriber) {
        this.removeSubscriber(subscriber);
        if (!this.hasSubscribers()) {
            this.handler.dispose();
        }
    }
    bind(flags) {
        if (this.persistentFlags === 536870912 /* persistentTargetObserverQueue */) {
            if (this.task !== null) {
                this.task.cancel();
            }
            this.task = this.scheduler.queueRenderTask(() => this.flushChanges(flags), { persistent: true });
        }
    }
    unbind(flags) {
        if (this.task !== null) {
            this.task.cancel();
            this.task = null;
        }
    }
};
ValueAttributeObserver = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["subscriberCollection"])(),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object, Number, Object, Object, String])
], ValueAttributeObserver);

//# sourceMappingURL=value-attribute-observer.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime-html/dist/esnext/projectors.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@aurelia/runtime-html/dist/esnext/projectors.js ***!
  \**********************************************************************/
/*! exports provided: HTMLProjectorLocator, ShadowDOMProjector, ContainerlessProjector, HostProjector */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HTMLProjectorLocator", function() { return HTMLProjectorLocator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ShadowDOMProjector", function() { return ShadowDOMProjector; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ContainerlessProjector", function() { return ContainerlessProjector; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HostProjector", function() { return HostProjector; });
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/runtime */ "./node_modules/@aurelia/runtime/dist/esnext/index.js");
/* harmony import */ var _styles_shadow_dom_styles__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./styles/shadow-dom-styles */ "./node_modules/@aurelia/runtime-html/dist/esnext/styles/shadow-dom-styles.js");



const defaultShadowOptions = {
    mode: 'open'
};
class HTMLProjectorLocator {
    static register(container) {
        return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Registration"].singleton(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["IProjectorLocator"], this).register(container);
    }
    getElementProjector(dom, $component, host, def) {
        if (def.shadowOptions || def.hasSlots) {
            if (def.containerless) {
                throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].error(21);
            }
            return new ShadowDOMProjector(dom, $component, host, def);
        }
        if (def.containerless) {
            return new ContainerlessProjector(dom, $component, host);
        }
        return new HostProjector($component, host);
    }
}
const childObserverOptions = { childList: true };
/** @internal */
class ShadowDOMProjector {
    constructor(dom, 
    // eslint-disable-next-line @typescript-eslint/prefer-readonly
    $controller, host, definition) {
        this.dom = dom;
        this.$controller = $controller;
        this.host = host;
        let shadowOptions;
        if (definition.shadowOptions instanceof Object &&
            'mode' in definition.shadowOptions) {
            shadowOptions = definition.shadowOptions;
        }
        else {
            shadowOptions = defaultShadowOptions;
        }
        this.shadowRoot = host.attachShadow(shadowOptions);
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Metadata"].define(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["CustomElement"].name, $controller, this.host);
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Metadata"].define(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["CustomElement"].name, $controller, this.shadowRoot);
    }
    get children() {
        return this.host.childNodes;
    }
    subscribeToChildrenChange(callback, options = childObserverOptions) {
        // TODO: add a way to dispose/disconnect
        this.dom.createNodeObserver(this.host, callback, options);
    }
    provideEncapsulationSource() {
        return this.shadowRoot;
    }
    project(nodes) {
        const context = this.$controller.context;
        const styles = context.has(_styles_shadow_dom_styles__WEBPACK_IMPORTED_MODULE_2__["IShadowDOMStyles"], false)
            ? context.get(_styles_shadow_dom_styles__WEBPACK_IMPORTED_MODULE_2__["IShadowDOMStyles"])
            : context.get(_styles_shadow_dom_styles__WEBPACK_IMPORTED_MODULE_2__["IShadowDOMGlobalStyles"]);
        styles.applyTo(this.shadowRoot);
        nodes.appendTo(this.shadowRoot);
    }
    take(nodes) {
        nodes.remove();
        nodes.unlink();
    }
}
/** @internal */
class ContainerlessProjector {
    constructor(dom, $controller, host) {
        if (host.childNodes.length) {
            this.childNodes = Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["toArray"])(host.childNodes);
        }
        else {
            this.childNodes = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["PLATFORM"].emptyArray;
        }
        this.host = dom.convertToRenderLocation(host);
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Metadata"].define(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["CustomElement"].name, $controller, this.host);
    }
    get children() {
        return this.childNodes;
    }
    subscribeToChildrenChange(callback) {
        // TODO: turn this into an error
        // Containerless does not have a container node to observe children on.
    }
    provideEncapsulationSource() {
        return this.host.getRootNode();
    }
    project(nodes) {
        nodes.insertBefore(this.host);
    }
    take(nodes) {
        nodes.remove();
        nodes.unlink();
    }
}
/** @internal */
class HostProjector {
    constructor($controller, host) {
        this.host = host;
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Metadata"].define(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["CustomElement"].name, $controller, host);
    }
    get children() {
        return this.host.childNodes;
    }
    subscribeToChildrenChange(callback) {
        // Do nothing since this scenario will never have children.
    }
    provideEncapsulationSource() {
        return this.host.getRootNode();
    }
    project(nodes) {
        nodes.appendTo(this.host);
    }
    take(nodes) {
        nodes.remove();
        nodes.unlink();
    }
}
//# sourceMappingURL=projectors.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime-html/dist/esnext/resources/binding-behaviors/attr.js":
/*!********************************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime-html/dist/esnext/resources/binding-behaviors/attr.js ***!
  \********************************************************************************************/
/*! exports provided: AttrBindingBehavior */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AttrBindingBehavior", function() { return AttrBindingBehavior; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/runtime */ "./node_modules/@aurelia/runtime/dist/esnext/index.js");
/* harmony import */ var _observation_data_attribute_accessor__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../observation/data-attribute-accessor */ "./node_modules/@aurelia/runtime-html/dist/esnext/observation/data-attribute-accessor.js");



let AttrBindingBehavior = class AttrBindingBehavior {
    bind(flags, scope, binding) {
        binding.targetObserver = new _observation_data_attribute_accessor__WEBPACK_IMPORTED_MODULE_2__["DataAttributeAccessor"](binding.locator.get(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["IScheduler"]), flags, binding.target, binding.targetProperty);
    }
    unbind(flags, scope, binding) {
        return;
    }
};
AttrBindingBehavior = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["bindingBehavior"])('attr')
], AttrBindingBehavior);

//# sourceMappingURL=attr.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime-html/dist/esnext/resources/binding-behaviors/self.js":
/*!********************************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime-html/dist/esnext/resources/binding-behaviors/self.js ***!
  \********************************************************************************************/
/*! exports provided: handleSelfEvent, SelfBindingBehavior */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "handleSelfEvent", function() { return handleSelfEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SelfBindingBehavior", function() { return SelfBindingBehavior; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aurelia/runtime */ "./node_modules/@aurelia/runtime/dist/esnext/index.js");
/* harmony import */ var _observation_event_manager__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../observation/event-manager */ "./node_modules/@aurelia/runtime-html/dist/esnext/observation/event-manager.js");




/** @internal */
function handleSelfEvent(event) {
    const target = Object(_observation_event_manager__WEBPACK_IMPORTED_MODULE_3__["findOriginalEventTarget"])(event);
    if (this.target !== target) {
        return;
    }
    return this.selfEventCallSource(event);
}
let SelfBindingBehavior = class SelfBindingBehavior {
    bind(flags, scope, binding) {
        if (!binding.callSource || !binding.targetEvent) {
            throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Reporter"].error(8);
        }
        binding.selfEventCallSource = binding.callSource;
        binding.callSource = handleSelfEvent;
    }
    unbind(flags, scope, binding) {
        binding.callSource = binding.selfEventCallSource;
        binding.selfEventCallSource = null;
    }
};
SelfBindingBehavior = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["bindingBehavior"])('self')
], SelfBindingBehavior);

//# sourceMappingURL=self.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime-html/dist/esnext/resources/binding-behaviors/update-trigger.js":
/*!******************************************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime-html/dist/esnext/resources/binding-behaviors/update-trigger.js ***!
  \******************************************************************************************************/
/*! exports provided: UpdateTriggerBindingBehavior */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UpdateTriggerBindingBehavior", function() { return UpdateTriggerBindingBehavior; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aurelia/runtime */ "./node_modules/@aurelia/runtime/dist/esnext/index.js");
/* harmony import */ var _observation_event_manager__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../observation/event-manager */ "./node_modules/@aurelia/runtime-html/dist/esnext/observation/event-manager.js");




let UpdateTriggerBindingBehavior = class UpdateTriggerBindingBehavior {
    constructor(observerLocator) {
        this.observerLocator = observerLocator;
    }
    bind(flags, scope, binding, ...events) {
        if (events.length === 0) {
            throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Reporter"].error(9);
        }
        if (binding.mode !== _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["BindingMode"].twoWay && binding.mode !== _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["BindingMode"].fromView) {
            throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Reporter"].error(10);
        }
        this.persistentFlags = flags & 2080374799 /* persistentBindingFlags */;
        // ensure the binding's target observer has been set.
        const targetObserver = this.observerLocator.getObserver(this.persistentFlags | flags, binding.target, binding.targetProperty);
        if (!targetObserver.handler) {
            throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Reporter"].error(10);
        }
        binding.targetObserver = targetObserver;
        // stash the original element subscribe function.
        targetObserver.originalHandler = binding.targetObserver.handler;
        // replace the element subscribe function with one that uses the correct events.
        targetObserver.handler = new _observation_event_manager__WEBPACK_IMPORTED_MODULE_3__["EventSubscriber"](binding.locator.get(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["IDOM"]), events);
    }
    unbind(flags, scope, binding) {
        // restore the state of the binding.
        binding.targetObserver.handler.dispose();
        binding.targetObserver.handler = binding.targetObserver.originalHandler;
        binding.targetObserver.originalHandler = null;
    }
};
UpdateTriggerBindingBehavior = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["bindingBehavior"])('updateTrigger'),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(0, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["IObserverLocator"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object])
], UpdateTriggerBindingBehavior);

//# sourceMappingURL=update-trigger.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime-html/dist/esnext/resources/custom-attributes/blur.js":
/*!********************************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime-html/dist/esnext/resources/custom-attributes/blur.js ***!
  \********************************************************************************************/
/*! exports provided: BlurManager, Blur */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BlurManager", function() { return BlurManager; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Blur", function() { return Blur; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aurelia/runtime */ "./node_modules/@aurelia/runtime/dist/esnext/index.js");
/* harmony import */ var _dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../dom */ "./node_modules/@aurelia/runtime-html/dist/esnext/dom.js");




const unset = Symbol();
// Using passive to help with performance
const defaultCaptureEventInit = {
    passive: true,
    capture: true
};
// Using passive to help with performance
const defaultBubbleEventInit = {
    passive: true
};
// weakly connect a document to a blur manager
// to avoid polluting the document properties
const blurDocMap = new WeakMap();
class BlurManager {
    constructor(dom, scheduler) {
        this.dom = dom;
        this.scheduler = scheduler;
        this.blurs = [];
        blurDocMap.set(dom.document, this);
        this.handler = createHandler(this, this.blurs);
    }
    static createFor(dom, scheduler) {
        return blurDocMap.get(dom.document) || new BlurManager(dom, scheduler);
    }
    register(blur) {
        const blurs = this.blurs;
        if (!blurs.includes(blur) && blurs.push(blur) === 1) {
            this.addListeners();
        }
    }
    unregister(blur) {
        const blurs = this.blurs;
        const index = blurs.indexOf(blur);
        if (index > -1) {
            blurs.splice(index, 1);
        }
        if (blurs.length === 0) {
            this.removeListeners();
        }
    }
    addListeners() {
        const dom = this.dom;
        const doc = dom.document;
        const win = dom.window;
        const handler = this.handler;
        if (win.navigator.pointerEnabled) {
            doc.addEventListener('pointerdown', handler, defaultCaptureEventInit);
        }
        doc.addEventListener('touchstart', handler, defaultCaptureEventInit);
        doc.addEventListener('mousedown', handler, defaultCaptureEventInit);
        doc.addEventListener('focus', handler, defaultCaptureEventInit);
        win.addEventListener('blur', handler, defaultBubbleEventInit);
    }
    removeListeners() {
        const dom = this.dom;
        const doc = dom.document;
        const win = dom.window;
        const handler = this.handler;
        if (win.navigator.pointerEnabled) {
            doc.removeEventListener('pointerdown', handler, defaultCaptureEventInit);
        }
        doc.removeEventListener('touchstart', handler, defaultCaptureEventInit);
        doc.removeEventListener('mousedown', handler, defaultCaptureEventInit);
        doc.removeEventListener('focus', handler, defaultCaptureEventInit);
        win.removeEventListener('blur', handler, defaultBubbleEventInit);
    }
}
let Blur = class Blur {
    constructor(element, dom, scheduler) {
        this.dom = dom;
        this.element = element;
        /**
         * By default, the behavior should be least surprise possible, that:
         *
         * it searches for anything from root context,
         * and root context is document body
         */
        this.linkedMultiple = true;
        this.searchSubTree = true;
        this.linkingContext = null;
        this.value = unset;
        this.manager = BlurManager.createFor(dom, scheduler);
    }
    afterAttach() {
        this.manager.register(this);
    }
    beforeDetach() {
        this.manager.unregister(this);
    }
    handleEventTarget(target) {
        if (this.value === false) {
            return;
        }
        const dom = this.dom;
        if (target === dom.window || target === dom.document || !this.contains(target)) {
            this.triggerBlur();
        }
    }
    contains(target) {
        if (!this.value) {
            return false;
        }
        let els;
        let i;
        let j, jj;
        let link;
        const element = this.element;
        if (containsElementOrShadowRoot(element, target)) {
            return true;
        }
        if (!this.linkedWith) {
            return false;
        }
        const doc = this.dom.document;
        const linkedWith = this.linkedWith;
        const linkingContext = this.linkingContext;
        const searchSubTree = this.searchSubTree;
        const linkedMultiple = this.linkedMultiple;
        const links = Array.isArray(linkedWith) ? linkedWith : [linkedWith];
        const contextNode = (typeof linkingContext === 'string'
            ? doc.querySelector(linkingContext)
            : linkingContext)
            || doc.body;
        const ii = links.length;
        for (i = 0; ii > i; ++i) {
            link = links[i];
            // When user specify to link with something by a string, it acts as a CSS selector
            // We need to do some querying stuff to determine if target above is contained.
            if (typeof link === 'string') {
                // Default behavior, search the whole tree, from context that user specified, which default to document body
                if (searchSubTree) {
                    // todo: are there too many knobs?? Consider remove "linkedMultiple"??
                    if (!linkedMultiple) {
                        const el = contextNode.querySelector(link);
                        els = el !== null ? [el] : _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["PLATFORM"].emptyArray;
                    }
                    else {
                        els = contextNode.querySelectorAll(link);
                    }
                    jj = els.length;
                    for (j = 0; jj > j; ++j) {
                        if (els[j].contains(target)) {
                            return true;
                        }
                    }
                }
                else {
                    // default to document body, if user didn't define a linking context, and wanted to ignore subtree.
                    // This is specifically performant and useful for dialogs, plugins
                    // that usually generate contents to document body
                    els = contextNode.children;
                    jj = els.length;
                    for (j = 0; jj > j; ++j) {
                        if (els[j].matches(link)) {
                            return true;
                        }
                    }
                }
            }
            else {
                // When user passed in something that is not a string,
                // simply check if has method `contains` (allow duck typing)
                // and call it against target.
                // This enables flexible usages
                if (link && link.contains(target)) {
                    return true;
                }
            }
        }
        return false;
    }
    triggerBlur() {
        this.value = false;
        if (typeof this.onBlur === 'function') {
            this.onBlur.call(null);
        }
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["bindable"])(),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:type", Object)
], Blur.prototype, "value", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["bindable"])(),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:type", Function)
], Blur.prototype, "onBlur", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["bindable"])(),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:type", Object)
], Blur.prototype, "linkedWith", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["bindable"])(),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:type", Boolean)
], Blur.prototype, "linkedMultiple", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["bindable"])(),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:type", Boolean)
], Blur.prototype, "searchSubTree", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["bindable"])(),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:type", Object)
], Blur.prototype, "linkingContext", void 0);
Blur = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["customAttribute"])('blur'),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(0, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["INode"]), Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(1, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["IDOM"]), Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(2, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["IScheduler"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object, _dom__WEBPACK_IMPORTED_MODULE_3__["HTMLDOM"], Object])
], Blur);

const containsElementOrShadowRoot = (container, target) => {
    if (container.contains(target)) {
        return true;
    }
    let parentNode = null;
    while (target != null) {
        if (target === container) {
            return true;
        }
        parentNode = target.parentNode;
        if (parentNode === null && target.nodeType === 11 /* DocumentFragment */) {
            target = target.host;
            continue;
        }
        target = parentNode;
    }
    return false;
};
const createHandler = (manager, checkTargets) => {
    // *******************************
    // EVENTS ORDER
    // -----------------------------
    // pointerdown
    // touchstart
    // pointerup
    // touchend
    // mousedown
    // --------------
    // BLUR
    // FOCUS
    // --------------
    // mouseup
    // click
    //
    // ******************************
    //
    // There are cases focus happens without mouse interaction (keyboard)
    // So it needs to capture both mouse / focus movement
    //
    // ******************************
    let hasChecked = false;
    const revertCheckage = () => {
        hasChecked = false;
    };
    const markChecked = () => {
        hasChecked = true;
        manager.scheduler.queueRenderTask(revertCheckage, { preempt: true });
    };
    const handleMousedown = (e) => {
        if (!hasChecked) {
            handleEvent(e);
            markChecked();
        }
    };
    /**
     * Handle globally captured focus event
     * This can happen via a few way:
     * User clicks on a focusable element
     * User uses keyboard to navigate to a focusable element
     * User goes back to the window from another browser tab
     * User clicks on a non-focusable element
     * User clicks on the window, outside of the document
     */
    const handleFocus = (e) => {
        if (hasChecked) {
            return;
        }
        // there are two way a focus gets captured on window
        // when the windows itself got focus
        // and when an element in the document gets focus
        // when the window itself got focus, reacting to it is quite unnecessary
        // as it doesn't really affect element inside the document
        // Do a simple check and bail immediately
        const isWindow = e.target === manager.dom.window;
        if (isWindow) {
            for (let i = 0, ii = checkTargets.length; ii > i; ++i) {
                checkTargets[i].triggerBlur();
            }
        }
        else {
            handleEvent(e);
        }
        markChecked();
    };
    const handleWindowBlur = () => {
        hasChecked = false;
        for (let i = 0, ii = checkTargets.length; i < ii; ++i) {
            checkTargets[i].triggerBlur();
        }
    };
    const handleEvent = (e) => {
        const target = e.composed ? e.composedPath()[0] : e.target;
        if (target === null) {
            return;
        }
        for (let i = 0, ii = checkTargets.length; i < ii; ++i) {
            checkTargets[i].handleEventTarget(target);
        }
    };
    return {
        onpointerdown: handleMousedown,
        ontouchstart: handleMousedown,
        onmousedown: handleMousedown,
        onfocus: handleFocus,
        onblur: handleWindowBlur,
        handleEvent(e) {
            this[`on${e.type}`](e);
        }
    };
};
//# sourceMappingURL=blur.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime-html/dist/esnext/resources/custom-attributes/focus.js":
/*!*********************************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime-html/dist/esnext/resources/custom-attributes/focus.js ***!
  \*********************************************************************************************/
/*! exports provided: Focus */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Focus", function() { return Focus; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/runtime */ "./node_modules/@aurelia/runtime/dist/esnext/index.js");
/* harmony import */ var _dom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../dom */ "./node_modules/@aurelia/runtime-html/dist/esnext/dom.js");



/**
 * Focus attribute for element focus binding
 */
let Focus = class Focus {
    constructor(element, dom) {
        this.dom = dom;
        /**
         * Indicates whether `apply` should be called when `afterAttach` callback is invoked
         */
        this.needsApply = false;
        this.element = element;
    }
    beforeBind() {
        this.valueChanged();
    }
    /**
     * Invoked everytime the bound value changes.
     *
     * @param newValue - The new value.
     */
    valueChanged() {
        // In theory, we could/should react immediately
        // but focus state of an element cannot be achieved
        // while it's disconnected from the document
        // thus, there neesd to be a check if it's currently connected or not
        // before applying the value to the element
        if (this.$controller.state & 32 /* isAttached */) {
            this.apply();
        }
        else {
            // If the element is not currently connect
            // toggle the flag to add pending work for later
            // in afterAttach lifecycle
            this.needsApply = true;
        }
    }
    /**
     * Invoked when the attribute is afterAttach to the DOM.
     */
    afterAttach() {
        if (this.needsApply) {
            this.needsApply = false;
            this.apply();
        }
        const el = this.element;
        el.addEventListener('focus', this);
        el.addEventListener('blur', this);
    }
    /**
     * Invoked when the attribute is afterDetach from the DOM.
     */
    afterDetach() {
        const el = this.element;
        el.removeEventListener('focus', this);
        el.removeEventListener('blur', this);
    }
    /**
     * EventTarget interface handler for better memory usage
     */
    handleEvent(e) {
        // there are only two event listened to
        // if the even is focus, it menans the element is focused
        // only need to switch the value to true
        if (e.type === 'focus') {
            this.value = true;
        }
        else if (this.dom.document.activeElement !== this.element) {
            // else, it's blur event
            // when a blur event happens, there are two situations
            // 1. the element itself lost the focus
            // 2. window lost the focus
            // To handle both (1) and (2), only need to check if
            // current active element is still the same element of this focus custom attribute
            // If it's not, it's a blur event happened on Window because the browser tab lost focus
            this.value = false;
        }
    }
    /**
     * Focus/blur based on current value
     */
    apply() {
        const el = this.element;
        if (this.value) {
            el.focus();
        }
        else {
            el.blur();
        }
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["bindable"])({ mode: _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["BindingMode"].twoWay }),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:type", Object)
], Focus.prototype, "value", void 0);
Focus = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["customAttribute"])('focus'),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(0, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["INode"]), Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(1, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["IDOM"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object, _dom__WEBPACK_IMPORTED_MODULE_2__["HTMLDOM"]])
], Focus);

//# sourceMappingURL=focus.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime-html/dist/esnext/resources/custom-attributes/portal.js":
/*!**********************************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime-html/dist/esnext/resources/custom-attributes/portal.js ***!
  \**********************************************************************************************/
/*! exports provided: Portal */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Portal", function() { return Portal; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aurelia/runtime */ "./node_modules/@aurelia/runtime/dist/esnext/index.js");
/* harmony import */ var _dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../dom */ "./node_modules/@aurelia/runtime-html/dist/esnext/dom.js");




function toTask(maybePromiseOrTask) {
    if (maybePromiseOrTask == null) {
        return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["LifecycleTask"].done;
    }
    if (typeof maybePromiseOrTask.then === 'function') {
        return new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["TerminalTask"](maybePromiseOrTask);
    }
    return maybePromiseOrTask;
}
let Portal = class Portal {
    constructor(factory, originalLoc, dom) {
        this.factory = factory;
        this.originalLoc = originalLoc;
        this.dom = dom;
        this.id = Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["nextId"])('au$component');
        this.strict = false;
        this.task = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["LifecycleTask"].done;
        // to make the shape of this object consistent.
        // todo: is this necessary
        this.currentTarget = dom.createElement('div');
        this.view = this.factory.create();
        dom.setEffectiveParentNode(this.view.nodes, originalLoc);
        this.view.hold(originalLoc, 1 /* insertBefore */);
    }
    beforeBind(flags) {
        if (this.callbackContext == null) {
            this.callbackContext = this.$controller.scope.bindingContext;
        }
        return this.view.bind(flags, this.$controller.scope);
    }
    afterAttach(flags) {
        this.targetChanged();
    }
    beforeDetach(flags) {
        this.task = this.deactivate(flags);
    }
    beforeUnbind(flags) {
        this.callbackContext = null;
        return this.view.unbind(flags);
    }
    targetChanged() {
        const $controller = this.$controller;
        if (($controller.state & 4 /* isBound */) === 0) {
            return;
        }
        this.project($controller.flags);
    }
    project(flags) {
        const oldTarget = this.currentTarget;
        const newTarget = this.currentTarget = this.resolveTarget();
        if (oldTarget === newTarget) {
            return;
        }
        this.task = this.deactivate(flags);
        this.task = this.activate(newTarget, flags);
    }
    activate(target, flags) {
        const { activating, activated, callbackContext, view } = this;
        let task = this.task;
        view.hold(target, 2 /* append */);
        if ((this.$controller.state & 40 /* isAttachedOrAttaching */) === 0) {
            return task;
        }
        if (typeof activating === 'function') {
            if (task.done) {
                task = toTask(activating.call(callbackContext, target, view));
            }
            else {
                task = new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["ContinuationTask"](task, activating, callbackContext, target, view);
            }
        }
        if (task.done) {
            view.attach(flags);
        }
        else {
            task = new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["ContinuationTask"](task, view.attach, view, flags);
        }
        if (typeof activated === 'function') {
            if (task.done) {
                // TODO: chain this up with RAF queue mount callback so activated is called only when
                // node is actually mounted (is this needed as per the spec of this resource?)
                task = toTask(activated.call(callbackContext, target, view));
            }
            else {
                task = new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["ContinuationTask"](task, activated, callbackContext, target, view);
            }
        }
        return task;
    }
    deactivate(flags) {
        const { deactivating, deactivated, callbackContext, view, target: target } = this;
        let task = this.task;
        if (typeof deactivating === 'function') {
            if (task.done) {
                task = toTask(deactivating.call(callbackContext, target, view));
            }
            else {
                task = new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["ContinuationTask"](task, deactivating, callbackContext, target, view);
            }
        }
        if (task.done) {
            view.detach(flags);
        }
        else {
            task = new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["ContinuationTask"](task, view.detach, view, flags);
        }
        if (typeof deactivated === 'function') {
            if (task.done) {
                task = toTask(deactivated.call(callbackContext, target, view));
            }
            else {
                task = new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["ContinuationTask"](task, deactivated, callbackContext, target, view);
            }
        }
        return task;
    }
    resolveTarget() {
        const dom = this.dom;
        // with a $ in front to make it less confusing/error prone
        const $document = dom.document;
        let target = this.target;
        let context = this.renderContext;
        if (typeof target === 'string') {
            let queryContext = $document;
            if (typeof context === 'string') {
                context = $document.querySelector(context);
            }
            if (dom.isNodeInstance(context)) {
                queryContext = context;
            }
            target = queryContext.querySelector(target);
        }
        if (dom.isNodeInstance(target)) {
            return target;
        }
        if (target == null) {
            if (this.strict) {
                throw new Error('Render target not found');
            }
            else {
                target = $document.body;
            }
        }
        return target;
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["bindable"])({ primary: true }),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:type", Object)
], Portal.prototype, "target", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["bindable"])({ callback: 'targetChanged' }),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:type", Object)
], Portal.prototype, "renderContext", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["bindable"])(),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:type", Boolean)
], Portal.prototype, "strict", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["bindable"])(),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:type", Function)
], Portal.prototype, "deactivating", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["bindable"])(),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:type", Function)
], Portal.prototype, "activating", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["bindable"])(),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:type", Function)
], Portal.prototype, "deactivated", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["bindable"])(),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:type", Function)
], Portal.prototype, "activated", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["bindable"])(),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:type", Object)
], Portal.prototype, "callbackContext", void 0);
Portal = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["templateController"])('portal'),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(0, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["IViewFactory"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(1, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["IRenderLocation"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(2, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["IDOM"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object, Object, _dom__WEBPACK_IMPORTED_MODULE_3__["HTMLDOM"]])
], Portal);

//# sourceMappingURL=portal.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime-html/dist/esnext/resources/custom-elements/compose.js":
/*!*********************************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime-html/dist/esnext/resources/custom-elements/compose.js ***!
  \*********************************************************************************************/
/*! exports provided: Compose */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Compose", function() { return Compose; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aurelia/runtime */ "./node_modules/@aurelia/runtime/dist/esnext/index.js");
/* harmony import */ var _create_element__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../create-element */ "./node_modules/@aurelia/runtime-html/dist/esnext/create-element.js");




const bindables = ['subject', 'composing'];
let Compose = class Compose {
    constructor(dom, instruction) {
        this.dom = dom;
        this.id = Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["nextId"])('au$component');
        this.subject = void 0;
        this.composing = false;
        this.view = void 0;
        this.task = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["LifecycleTask"].done;
        this.lastSubject = void 0;
        this.properties = instruction.instructions
            .filter((x) => !bindables.includes(x.to))
            .reduce((acc, item) => {
            if (item.to) {
                acc[item.to] = item;
            }
            return acc;
        }, {});
    }
    beforeBind(flags) {
        if (this.task.done) {
            this.task = this.compose(this.subject, flags);
        }
        else {
            this.task = new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["ContinuationTask"](this.task, this.compose, this, this.subject, flags);
        }
        if (this.task.done) {
            this.task = this.bindView(flags);
        }
        else {
            this.task = new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["ContinuationTask"](this.task, this.bindView, this, flags);
        }
        return this.task;
    }
    beforeAttach(flags) {
        if (this.task.done) {
            this.attachView(flags);
        }
        else {
            this.task = new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["ContinuationTask"](this.task, this.attachView, this, flags);
        }
    }
    beforeDetach(flags) {
        if (this.view != void 0) {
            if (this.task.done) {
                this.view.detach(flags);
            }
            else {
                this.task = new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["ContinuationTask"](this.task, this.view.detach, this.view, flags);
            }
        }
    }
    beforeUnbind(flags) {
        this.lastSubject = void 0;
        if (this.view != void 0) {
            if (this.task.done) {
                this.task = this.view.unbind(flags);
            }
            else {
                this.task = new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["ContinuationTask"](this.task, this.view.unbind, this.view, flags);
            }
        }
        return this.task;
    }
    caching(flags) {
        this.view = void 0;
    }
    subjectChanged(newValue, previousValue, flags) {
        flags |= this.$controller.flags;
        if (this.task.done) {
            this.task = this.compose(newValue, flags);
        }
        else {
            this.task = new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["ContinuationTask"](this.task, this.compose, this, newValue, flags);
        }
    }
    compose(subject, flags) {
        if (this.lastSubject === subject) {
            return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["LifecycleTask"].done;
        }
        this.lastSubject = subject;
        this.composing = true;
        let task = this.deactivate(flags);
        if (subject instanceof Promise) {
            let viewPromise;
            if (task.done) {
                viewPromise = subject.then(s => this.resolveView(s, flags));
            }
            else {
                viewPromise = task.wait().then(() => subject.then(s => this.resolveView(s, flags)));
            }
            task = new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["PromiseTask"](viewPromise, this.activate, this, flags);
        }
        else {
            const view = this.resolveView(subject, flags);
            if (task.done) {
                task = this.activate(view, flags);
            }
            else {
                task = new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["ContinuationTask"](task, this.activate, this, view, flags);
            }
        }
        if (task.done) {
            this.onComposed();
        }
        else {
            task = new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["ContinuationTask"](task, this.onComposed, this);
        }
        return task;
    }
    deactivate(flags) {
        const view = this.view;
        if (view == void 0) {
            return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["LifecycleTask"].done;
        }
        view.detach(flags);
        return view.unbind(flags);
    }
    activate(view, flags) {
        this.view = view;
        if (view == void 0) {
            return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["LifecycleTask"].done;
        }
        let task = this.bindView(flags);
        if (task.done) {
            this.attachView(flags);
        }
        else {
            task = new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["ContinuationTask"](task, this.attachView, this, flags);
        }
        return task;
    }
    bindView(flags) {
        if (this.view != void 0 && (this.$controller.state & (5 /* isBoundOrBinding */)) > 0) {
            return this.view.bind(flags, this.$controller.scope, this.$controller.part);
        }
        return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["LifecycleTask"].done;
    }
    attachView(flags) {
        if (this.view != void 0 && (this.$controller.state & (40 /* isAttachedOrAttaching */)) > 0) {
            this.view.attach(flags);
        }
    }
    onComposed() {
        this.composing = false;
    }
    resolveView(subject, flags) {
        const view = this.provideViewFor(subject, flags);
        if (view) {
            view.hold(this.$controller.projector.host, 1 /* insertBefore */);
            view.lockScope(this.$controller.scope);
            return view;
        }
        return void 0;
    }
    provideViewFor(subject, flags) {
        if (!subject) {
            return void 0;
        }
        if (isController(subject)) { // IController
            return subject;
        }
        if ('createView' in subject) { // RenderPlan
            return subject.createView(this.$controller.context);
        }
        if ('create' in subject) { // IViewFactory
            return subject.create(flags);
        }
        if ('template' in subject) { // Raw Template Definition
            const definition = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["CustomElementDefinition"].getOrCreate(subject);
            return Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["getRenderContext"])(definition, this.$controller.context, void 0).getViewFactory().create(flags);
        }
        // Constructable (Custom Element Constructor)
        return Object(_create_element__WEBPACK_IMPORTED_MODULE_3__["createElement"])(this.dom, subject, this.properties, this.$controller.projector === void 0
            ? _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["PLATFORM"].emptyArray
            : this.$controller.projector.children).createView(this.$controller.context);
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["bindable"],
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:type", Object)
], Compose.prototype, "subject", void 0);
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["bindable"])({ mode: _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["BindingMode"].fromView }),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:type", Boolean)
], Compose.prototype, "composing", void 0);
Compose = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["customElement"])({ name: 'au-compose', template: null, containerless: true }),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(0, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["IDOM"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(1, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_2__["ITargetedInstruction"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object, Object])
], Compose);

function isController(subject) {
    return 'lockScope' in subject;
}
//# sourceMappingURL=compose.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime-html/dist/esnext/styles/css-modules-registry.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime-html/dist/esnext/styles/css-modules-registry.js ***!
  \***************************************************************************************/
/*! exports provided: cssModules, CSSModulesProcessorRegistry */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "cssModules", function() { return cssModules; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CSSModulesProcessorRegistry", function() { return CSSModulesProcessorRegistry; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/runtime */ "./node_modules/@aurelia/runtime/dist/esnext/index.js");
/* harmony import */ var _observation_class_attribute_accessor__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../observation/class-attribute-accessor */ "./node_modules/@aurelia/runtime-html/dist/esnext/observation/class-attribute-accessor.js");



function cssModules(...cssModules) {
    return new CSSModulesProcessorRegistry(cssModules);
}
class CSSModulesProcessorRegistry {
    constructor(cssModules) {
        this.cssModules = cssModules;
    }
    register(container) {
        const classLookup = Object.assign({}, ...this.cssModules);
        let ClassCustomAttribute = class ClassCustomAttribute {
            constructor(element /* TODO(fkleuver): fix this type annotation reflection issue in AOT */) {
                this.element = element;
            }
            beforeBind() {
                this.valueChanged();
            }
            valueChanged() {
                if (!this.value) {
                    this.element.className = '';
                    return;
                }
                this.element.className = Object(_observation_class_attribute_accessor__WEBPACK_IMPORTED_MODULE_2__["getClassesToAdd"])(this.value)
                    .map(x => classLookup[x] || x)
                    .join(' ');
            }
        };
        Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
            _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["bindable"],
            Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:type", String)
        ], ClassCustomAttribute.prototype, "value", void 0);
        ClassCustomAttribute = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
            Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["customAttribute"])('class'),
            Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(0, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["INode"]),
            Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object])
        ], ClassCustomAttribute);
        container.register(ClassCustomAttribute);
    }
}
//# sourceMappingURL=css-modules-registry.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime-html/dist/esnext/styles/shadow-dom-registry.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime-html/dist/esnext/styles/shadow-dom-registry.js ***!
  \**************************************************************************************/
/*! exports provided: shadowCSS, IShadowDOMStyleFactory, ShadowDOMRegistry */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shadowCSS", function() { return shadowCSS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IShadowDOMStyleFactory", function() { return IShadowDOMStyleFactory; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ShadowDOMRegistry", function() { return ShadowDOMRegistry; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _shadow_dom_styles__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./shadow-dom-styles */ "./node_modules/@aurelia/runtime-html/dist/esnext/styles/shadow-dom-styles.js");
/* harmony import */ var _dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../dom */ "./node_modules/@aurelia/runtime-html/dist/esnext/dom.js");
/* harmony import */ var _aurelia_runtime__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @aurelia/runtime */ "./node_modules/@aurelia/runtime/dist/esnext/index.js");





function shadowCSS(...css) {
    return new ShadowDOMRegistry(css);
}
const factoryCache = new WeakMap();
const IShadowDOMStyleFactory = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["DI"].createInterface('IShadowDOMStyleFactory')
    .withDefault(x => x.callback((handler, requestor, resolver) => {
    let factory = factoryCache.get(resolver);
    if (factory === void 0) {
        factoryCache.set(resolver, factory = ShadowDOMRegistry.createStyleFactory(handler));
    }
    return factory;
}));
class ShadowDOMRegistry {
    constructor(css) {
        this.css = css;
    }
    register(container) {
        const sharedStyles = container.get(_shadow_dom_styles__WEBPACK_IMPORTED_MODULE_2__["IShadowDOMGlobalStyles"]);
        const factory = container.get(IShadowDOMStyleFactory);
        container.register(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Registration"].instance(_shadow_dom_styles__WEBPACK_IMPORTED_MODULE_2__["IShadowDOMStyles"], factory.createStyles(this.css, sharedStyles)));
    }
    static createStyleFactory(container) {
        if (_shadow_dom_styles__WEBPACK_IMPORTED_MODULE_2__["AdoptedStyleSheetsStyles"].supported(container.get(_dom__WEBPACK_IMPORTED_MODULE_3__["HTMLDOM"]))) {
            return container.get(AdoptedStyleSheetsStylesFactory);
        }
        return container.get(StyleElementStylesFactory);
    }
}
let AdoptedStyleSheetsStylesFactory = class AdoptedStyleSheetsStylesFactory {
    constructor(dom) {
        this.dom = dom;
        this.cache = new Map();
    }
    createStyles(localStyles, sharedStyles) {
        return new _shadow_dom_styles__WEBPACK_IMPORTED_MODULE_2__["AdoptedStyleSheetsStyles"](this.dom, localStyles, this.cache, sharedStyles);
    }
};
AdoptedStyleSheetsStylesFactory = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(0, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_4__["IDOM"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [_dom__WEBPACK_IMPORTED_MODULE_3__["HTMLDOM"]])
], AdoptedStyleSheetsStylesFactory);
let StyleElementStylesFactory = class StyleElementStylesFactory {
    constructor(dom) {
        this.dom = dom;
    }
    createStyles(localStyles, sharedStyles) {
        if (localStyles.some(x => typeof x !== 'string')) {
            // TODO: use reporter
            throw new Error('Shadow DOM CSS must be a string.');
        }
        return new _shadow_dom_styles__WEBPACK_IMPORTED_MODULE_2__["StyleElementStyles"](this.dom, localStyles, sharedStyles);
    }
};
StyleElementStylesFactory = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(0, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_4__["IDOM"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [_dom__WEBPACK_IMPORTED_MODULE_3__["HTMLDOM"]])
], StyleElementStylesFactory);
//# sourceMappingURL=shadow-dom-registry.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime-html/dist/esnext/styles/shadow-dom-styles.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime-html/dist/esnext/styles/shadow-dom-styles.js ***!
  \************************************************************************************/
/*! exports provided: noopShadowDOMStyles, IShadowDOMStyles, IShadowDOMGlobalStyles, AdoptedStyleSheetsStyles, StyleElementStyles */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "noopShadowDOMStyles", function() { return noopShadowDOMStyles; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IShadowDOMStyles", function() { return IShadowDOMStyles; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IShadowDOMGlobalStyles", function() { return IShadowDOMGlobalStyles; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AdoptedStyleSheetsStyles", function() { return AdoptedStyleSheetsStyles; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StyleElementStyles", function() { return StyleElementStyles; });
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");

const noopShadowDOMStyles = Object.freeze({
    applyTo: _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["PLATFORM"].noop
});
const IShadowDOMStyles = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["DI"].createInterface('IShadowDOMStyles').noDefault();
const IShadowDOMGlobalStyles = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["DI"].createInterface('IShadowDOMGlobalStyles')
    .withDefault(x => x.instance(noopShadowDOMStyles));
class AdoptedStyleSheetsStyles {
    constructor(dom, localStyles, styleSheetCache, sharedStyles = null) {
        this.sharedStyles = sharedStyles;
        this.styleSheets = localStyles.map(x => {
            let sheet;
            if (x instanceof dom.CSSStyleSheet) {
                sheet = x;
            }
            else {
                sheet = styleSheetCache.get(x);
                if (!sheet) {
                    sheet = new dom.CSSStyleSheet();
                    sheet.replaceSync(x);
                    styleSheetCache.set(x, sheet);
                }
            }
            return sheet;
        });
    }
    static supported(dom) {
        return 'adoptedStyleSheets' in dom.ShadowRoot.prototype;
    }
    applyTo(shadowRoot) {
        if (this.sharedStyles !== null) {
            this.sharedStyles.applyTo(shadowRoot);
        }
        // https://wicg.github.io/construct-stylesheets/
        // https://developers.google.com/web/updates/2019/02/constructable-stylesheets
        shadowRoot.adoptedStyleSheets = [
            ...shadowRoot.adoptedStyleSheets,
            ...this.styleSheets
        ];
    }
}
class StyleElementStyles {
    constructor(dom, localStyles, sharedStyles = null) {
        this.dom = dom;
        this.localStyles = localStyles;
        this.sharedStyles = sharedStyles;
    }
    applyTo(shadowRoot) {
        const styles = this.localStyles;
        const dom = this.dom;
        for (let i = styles.length - 1; i > -1; --i) {
            const element = dom.createElement('style');
            element.innerHTML = styles[i];
            shadowRoot.prepend(element);
        }
        if (this.sharedStyles !== null) {
            this.sharedStyles.applyTo(shadowRoot);
        }
    }
}
//# sourceMappingURL=shadow-dom-styles.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime-html/dist/esnext/styles/style-configuration.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime-html/dist/esnext/styles/style-configuration.js ***!
  \**************************************************************************************/
/*! exports provided: StyleConfiguration */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StyleConfiguration", function() { return StyleConfiguration; });
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/runtime */ "./node_modules/@aurelia/runtime/dist/esnext/index.js");
/* harmony import */ var _shadow_dom_styles__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./shadow-dom-styles */ "./node_modules/@aurelia/runtime-html/dist/esnext/styles/shadow-dom-styles.js");
/* harmony import */ var _shadow_dom_registry__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./shadow-dom-registry */ "./node_modules/@aurelia/runtime-html/dist/esnext/styles/shadow-dom-registry.js");




const StyleConfiguration = {
    shadowDOM(config) {
        return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["StartTask"].with(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["IContainer"]).beforeCreate().call(container => {
            if (config.sharedStyles) {
                const factory = container.get(_shadow_dom_registry__WEBPACK_IMPORTED_MODULE_3__["IShadowDOMStyleFactory"]);
                container.register(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Registration"].instance(_shadow_dom_styles__WEBPACK_IMPORTED_MODULE_2__["IShadowDOMGlobalStyles"], factory.createStyles(config.sharedStyles, null)));
            }
        });
    }
};
//# sourceMappingURL=style-configuration.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esnext/activator.js":
/*!****************************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esnext/activator.js ***!
  \****************************************************************/
/*! exports provided: IActivator, Activator */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IActivator", function() { return IActivator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Activator", function() { return Activator; });
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _lifecycle__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./lifecycle */ "./node_modules/@aurelia/runtime/dist/esnext/lifecycle.js");
/* harmony import */ var _lifecycle_task__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./lifecycle-task */ "./node_modules/@aurelia/runtime/dist/esnext/lifecycle-task.js");
/* harmony import */ var _templating_controller__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./templating/controller */ "./node_modules/@aurelia/runtime/dist/esnext/templating/controller.js");




const IActivator = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["DI"].createInterface('IActivator').withDefault(x => x.singleton(Activator));
/** @internal */
class Activator {
    constructor(taskManager) {
        this.taskManager = taskManager;
    }
    static register(container) {
        return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Registration"].singleton(IActivator, this).register(container);
    }
    activate(host, component, container, flags = 1024 /* fromStartTask */, parentScope) {
        flags = flags === void 0 ? 0 /* none */ : flags;
        const mgr = this.taskManager;
        let task = mgr.runBeforeRender();
        if (task.done) {
            this.render(host, component, container, flags);
        }
        else {
            task = new _lifecycle_task__WEBPACK_IMPORTED_MODULE_2__["ContinuationTask"](task, this.render, this, host, component, container, flags);
        }
        if (task.done) {
            task = mgr.runBeforeBind();
        }
        else {
            task = new _lifecycle_task__WEBPACK_IMPORTED_MODULE_2__["ContinuationTask"](task, mgr.runBeforeBind, mgr);
        }
        if (task.done) {
            task = this.bind(component, flags, parentScope);
        }
        else {
            task = new _lifecycle_task__WEBPACK_IMPORTED_MODULE_2__["ContinuationTask"](task, this.bind, this, component, flags, parentScope);
        }
        if (task.done) {
            task = mgr.runBeforeAttach();
        }
        else {
            task = new _lifecycle_task__WEBPACK_IMPORTED_MODULE_2__["ContinuationTask"](task, mgr.runBeforeAttach, mgr);
        }
        if (task.done) {
            this.attach(component, flags);
        }
        else {
            task = new _lifecycle_task__WEBPACK_IMPORTED_MODULE_2__["ContinuationTask"](task, this.attach, this, component, flags);
        }
        return task;
    }
    deactivate(component, flags = 2048 /* fromStopTask */) {
        const controller = _templating_controller__WEBPACK_IMPORTED_MODULE_3__["Controller"].getCachedOrThrow(component);
        controller.detach(flags | 32768 /* fromDetach */);
        return controller.unbind(flags | 8192 /* fromUnbind */);
    }
    render(host, component, container, flags) {
        const lifecycle = container.get(_lifecycle__WEBPACK_IMPORTED_MODULE_1__["ILifecycle"]);
        _templating_controller__WEBPACK_IMPORTED_MODULE_3__["Controller"].forCustomElement(component, lifecycle, host, container, void 0, flags);
    }
    bind(component, flags, parentScope) {
        return _templating_controller__WEBPACK_IMPORTED_MODULE_3__["Controller"].getCachedOrThrow(component).bind(flags | 4096 /* fromBind */, parentScope);
    }
    attach(component, flags) {
        _templating_controller__WEBPACK_IMPORTED_MODULE_3__["Controller"].getCachedOrThrow(component).attach(flags | 16384 /* fromAttach */);
    }
}
Activator.inject = [_lifecycle_task__WEBPACK_IMPORTED_MODULE_2__["IStartTaskManager"]];
//# sourceMappingURL=activator.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esnext/aurelia.js":
/*!**************************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esnext/aurelia.js ***!
  \**************************************************************/
/*! exports provided: CompositionRoot, Aurelia, IDOMInitializer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CompositionRoot", function() { return CompositionRoot; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Aurelia", function() { return Aurelia; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IDOMInitializer", function() { return IDOMInitializer; });
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _activator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./activator */ "./node_modules/@aurelia/runtime/dist/esnext/activator.js");
/* harmony import */ var _dom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./dom */ "./node_modules/@aurelia/runtime/dist/esnext/dom.js");
/* harmony import */ var _lifecycle__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./lifecycle */ "./node_modules/@aurelia/runtime/dist/esnext/lifecycle.js");
/* harmony import */ var _lifecycle_task__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./lifecycle-task */ "./node_modules/@aurelia/runtime/dist/esnext/lifecycle-task.js");
/* harmony import */ var _resources_custom_element__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./resources/custom-element */ "./node_modules/@aurelia/runtime/dist/esnext/resources/custom-element.js");
/* harmony import */ var _templating_controller__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./templating/controller */ "./node_modules/@aurelia/runtime/dist/esnext/templating/controller.js");







class CompositionRoot {
    constructor(config, container) {
        this.config = config;
        if (config.host != void 0) {
            if (container.has(_dom__WEBPACK_IMPORTED_MODULE_2__["INode"], false)) {
                this.container = container.createChild();
            }
            else {
                this.container = container;
            }
            _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Registration"].instance(_dom__WEBPACK_IMPORTED_MODULE_2__["INode"], config.host).register(this.container);
            this.host = config.host;
        }
        else if (container.has(_dom__WEBPACK_IMPORTED_MODULE_2__["INode"], true)) {
            this.container = container;
            this.host = container.get(_dom__WEBPACK_IMPORTED_MODULE_2__["INode"]);
        }
        else {
            throw new Error(`No host element found.`);
        }
        this.strategy = config.strategy != void 0 ? config.strategy : 1 /* getterSetter */;
        const initializer = this.container.get(IDOMInitializer);
        this.dom = initializer.initialize(config);
        this.lifecycle = this.container.get(_lifecycle__WEBPACK_IMPORTED_MODULE_3__["ILifecycle"]);
        this.activator = this.container.get(_activator__WEBPACK_IMPORTED_MODULE_1__["IActivator"]);
        const taskManager = this.container.get(_lifecycle_task__WEBPACK_IMPORTED_MODULE_4__["IStartTaskManager"]);
        const beforeCreateTask = taskManager.runBeforeCreate();
        if (beforeCreateTask.done) {
            this.task = _lifecycle_task__WEBPACK_IMPORTED_MODULE_4__["LifecycleTask"].done;
            this.create();
        }
        else {
            this.task = new _lifecycle_task__WEBPACK_IMPORTED_MODULE_4__["ContinuationTask"](beforeCreateTask, this.create, this);
        }
    }
    activate(antecedent) {
        const { task, host, viewModel, container, activator, strategy } = this;
        const flags = strategy | 1024 /* fromStartTask */;
        if (viewModel === void 0) {
            if (this.createTask === void 0) {
                this.createTask = new _lifecycle_task__WEBPACK_IMPORTED_MODULE_4__["ContinuationTask"](task, this.activate, this, antecedent);
            }
            return this.createTask;
        }
        if (task.done) {
            if (antecedent == void 0 || antecedent.done) {
                this.task = activator.activate(host, viewModel, container, flags, void 0);
            }
            else {
                this.task = new _lifecycle_task__WEBPACK_IMPORTED_MODULE_4__["ContinuationTask"](antecedent, activator.activate, activator, host, viewModel, container, flags, void 0);
            }
        }
        else {
            if (antecedent == void 0 || antecedent.done) {
                this.task = new _lifecycle_task__WEBPACK_IMPORTED_MODULE_4__["ContinuationTask"](task, activator.activate, activator, host, viewModel, container, flags, void 0);
            }
            else {
                const combinedAntecedent = new _lifecycle_task__WEBPACK_IMPORTED_MODULE_4__["ContinuationTask"](task, antecedent.wait, antecedent);
                this.task = new _lifecycle_task__WEBPACK_IMPORTED_MODULE_4__["ContinuationTask"](combinedAntecedent, activator.activate, activator, host, viewModel, container, flags, void 0);
            }
        }
        return this.task;
    }
    deactivate(antecedent) {
        const { task, viewModel, activator, strategy } = this;
        const flags = strategy | 2048 /* fromStopTask */;
        if (viewModel === void 0) {
            if (this.createTask === void 0) {
                this.createTask = new _lifecycle_task__WEBPACK_IMPORTED_MODULE_4__["ContinuationTask"](task, this.deactivate, this, antecedent);
            }
            return this.createTask;
        }
        if (task.done) {
            if (antecedent == void 0 || antecedent.done) {
                this.task = activator.deactivate(viewModel, flags);
            }
            else {
                this.task = new _lifecycle_task__WEBPACK_IMPORTED_MODULE_4__["ContinuationTask"](antecedent, activator.deactivate, activator, viewModel, flags);
            }
        }
        else {
            if (antecedent == void 0 || antecedent.done) {
                this.task = new _lifecycle_task__WEBPACK_IMPORTED_MODULE_4__["ContinuationTask"](task, activator.deactivate, activator, viewModel, flags);
            }
            else {
                const combinedAntecedent = new _lifecycle_task__WEBPACK_IMPORTED_MODULE_4__["ContinuationTask"](task, antecedent.wait, antecedent);
                this.task = new _lifecycle_task__WEBPACK_IMPORTED_MODULE_4__["ContinuationTask"](combinedAntecedent, activator.deactivate, activator, viewModel, flags);
            }
        }
        return this.task;
    }
    create() {
        const config = this.config;
        const instance = this.viewModel = _resources_custom_element__WEBPACK_IMPORTED_MODULE_5__["CustomElement"].isType(config.component)
            ? this.container.get(config.component)
            : config.component;
        const container = this.container;
        const lifecycle = container.get(_lifecycle__WEBPACK_IMPORTED_MODULE_3__["ILifecycle"]);
        this.controller = _templating_controller__WEBPACK_IMPORTED_MODULE_6__["Controller"].forCustomElement(instance, lifecycle, this.host, container, void 0, this.strategy);
    }
}
class Aurelia {
    constructor(container = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["DI"].createContainer()) {
        this.container = container;
        this.task = _lifecycle_task__WEBPACK_IMPORTED_MODULE_4__["LifecycleTask"].done;
        this._isRunning = false;
        this._isStarting = false;
        this._isStopping = false;
        this._root = void 0;
        this.next = (void 0);
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Registration"].instance(Aurelia, this).register(container);
    }
    get isRunning() {
        return this._isRunning;
    }
    get isStarting() {
        return this._isStarting;
    }
    get isStopping() {
        return this._isStopping;
    }
    get root() {
        if (this._root == void 0) {
            if (this.next == void 0) {
                throw new Error(`root is not defined`); // TODO: create error code
            }
            return this.next;
        }
        return this._root;
    }
    register(...params) {
        this.container.register(...params);
        return this;
    }
    app(config) {
        this.next = new CompositionRoot(config, this.container);
        if (this.isRunning) {
            this.start();
        }
        return this;
    }
    start(root = this.next) {
        if (root == void 0) {
            throw new Error(`There is no composition root`); // TODO: create error code
        }
        this.stop(root);
        if (this.task.done) {
            this.onBeforeStart(root);
        }
        else {
            this.task = new _lifecycle_task__WEBPACK_IMPORTED_MODULE_4__["ContinuationTask"](this.task, this.onBeforeStart, this, root);
        }
        this.task = this.root.activate(this.task);
        if (this.task.done) {
            this.task = this.onAfterStart(root);
        }
        else {
            this.task = new _lifecycle_task__WEBPACK_IMPORTED_MODULE_4__["ContinuationTask"](this.task, this.onAfterStart, this, root);
        }
        return this.task;
    }
    stop(root = this._root) {
        if (this._isRunning && root != void 0) {
            if (this.task.done) {
                this.onBeforeStop(root);
            }
            else {
                this.task = new _lifecycle_task__WEBPACK_IMPORTED_MODULE_4__["ContinuationTask"](this.task, this.onBeforeStop, this, root);
            }
            this.task = root.deactivate(this.task);
            if (this.task.done) {
                this.task = this.onAfterStop(root);
            }
            else {
                this.task = new _lifecycle_task__WEBPACK_IMPORTED_MODULE_4__["ContinuationTask"](this.task, this.onAfterStop, this, root);
            }
        }
        return this.task;
    }
    wait() {
        return this.task.wait();
    }
    onBeforeStart(root) {
        Reflect.set(root.host, '$aurelia', this);
        this._root = root;
        this._isStarting = true;
    }
    onAfterStart(root) {
        this._isRunning = true;
        this._isStarting = false;
        this.dispatchEvent(root, 'aurelia-composed', root.dom);
        this.dispatchEvent(root, 'au-started', root.host);
        return _lifecycle_task__WEBPACK_IMPORTED_MODULE_4__["LifecycleTask"].done;
    }
    onBeforeStop(root) {
        this._isRunning = false;
        this._isStopping = true;
    }
    onAfterStop(root) {
        Reflect.deleteProperty(root.host, '$aurelia');
        this._root = void 0;
        this._isStopping = false;
        this.dispatchEvent(root, 'au-stopped', root.host);
        return _lifecycle_task__WEBPACK_IMPORTED_MODULE_4__["LifecycleTask"].done;
    }
    dispatchEvent(root, name, target) {
        target = 'dispatchEvent' in target ? target : root.dom;
        target.dispatchEvent(root.dom.createCustomEvent(name, { detail: this, bubbles: true, cancelable: true }));
    }
}
_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["PLATFORM"].global.Aurelia = Aurelia;
const IDOMInitializer = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["DI"].createInterface('IDOMInitializer').noDefault();
//# sourceMappingURL=aurelia.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esnext/binding/ast.js":
/*!******************************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esnext/binding/ast.js ***!
  \******************************************************************/
/*! exports provided: connects, observes, callsFunction, hasAncestor, isAssignable, isLeftHandSide, isPrimary, isResource, hasBind, hasUnbind, isLiteral, arePureLiterals, isPureLiteral, CustomExpression, BindingBehaviorExpression, ValueConverterExpression, AssignExpression, ConditionalExpression, AccessThisExpression, AccessScopeExpression, AccessMemberExpression, AccessKeyedExpression, CallScopeExpression, CallMemberExpression, CallFunctionExpression, BinaryExpression, UnaryExpression, PrimitiveLiteralExpression, HtmlLiteralExpression, ArrayLiteralExpression, ObjectLiteralExpression, TemplateExpression, TaggedTemplateExpression, ArrayBindingPattern, ObjectBindingPattern, BindingIdentifier, ForOfStatement, Interpolation */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "connects", function() { return connects; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "observes", function() { return observes; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "callsFunction", function() { return callsFunction; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hasAncestor", function() { return hasAncestor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isAssignable", function() { return isAssignable; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isLeftHandSide", function() { return isLeftHandSide; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isPrimary", function() { return isPrimary; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isResource", function() { return isResource; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hasBind", function() { return hasBind; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hasUnbind", function() { return hasUnbind; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isLiteral", function() { return isLiteral; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "arePureLiterals", function() { return arePureLiterals; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isPureLiteral", function() { return isPureLiteral; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CustomExpression", function() { return CustomExpression; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BindingBehaviorExpression", function() { return BindingBehaviorExpression; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ValueConverterExpression", function() { return ValueConverterExpression; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AssignExpression", function() { return AssignExpression; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ConditionalExpression", function() { return ConditionalExpression; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AccessThisExpression", function() { return AccessThisExpression; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AccessScopeExpression", function() { return AccessScopeExpression; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AccessMemberExpression", function() { return AccessMemberExpression; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AccessKeyedExpression", function() { return AccessKeyedExpression; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CallScopeExpression", function() { return CallScopeExpression; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CallMemberExpression", function() { return CallMemberExpression; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CallFunctionExpression", function() { return CallFunctionExpression; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BinaryExpression", function() { return BinaryExpression; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UnaryExpression", function() { return UnaryExpression; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PrimitiveLiteralExpression", function() { return PrimitiveLiteralExpression; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HtmlLiteralExpression", function() { return HtmlLiteralExpression; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ArrayLiteralExpression", function() { return ArrayLiteralExpression; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ObjectLiteralExpression", function() { return ObjectLiteralExpression; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TemplateExpression", function() { return TemplateExpression; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaggedTemplateExpression", function() { return TaggedTemplateExpression; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ArrayBindingPattern", function() { return ArrayBindingPattern; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ObjectBindingPattern", function() { return ObjectBindingPattern; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BindingIdentifier", function() { return BindingIdentifier; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ForOfStatement", function() { return ForOfStatement; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Interpolation", function() { return Interpolation; });
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _observation_binding_context__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../observation/binding-context */ "./node_modules/@aurelia/runtime/dist/esnext/observation/binding-context.js");
/* harmony import */ var _observation_proxy_observer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../observation/proxy-observer */ "./node_modules/@aurelia/runtime/dist/esnext/observation/proxy-observer.js");
/* harmony import */ var _observation_signaler__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../observation/signaler */ "./node_modules/@aurelia/runtime/dist/esnext/observation/signaler.js");
/* harmony import */ var _resources_binding_behavior__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../resources/binding-behavior */ "./node_modules/@aurelia/runtime/dist/esnext/resources/binding-behavior.js");
/* harmony import */ var _resources_value_converter__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../resources/value-converter */ "./node_modules/@aurelia/runtime/dist/esnext/resources/value-converter.js");






function connects(expr) {
    return (expr.$kind & 32 /* Connects */) === 32 /* Connects */;
}
function observes(expr) {
    return (expr.$kind & 64 /* Observes */) === 64 /* Observes */;
}
function callsFunction(expr) {
    return (expr.$kind & 128 /* CallsFunction */) === 128 /* CallsFunction */;
}
function hasAncestor(expr) {
    return (expr.$kind & 256 /* HasAncestor */) === 256 /* HasAncestor */;
}
function isAssignable(expr) {
    return (expr.$kind & 8192 /* IsAssignable */) === 8192 /* IsAssignable */;
}
function isLeftHandSide(expr) {
    return (expr.$kind & 1024 /* IsLeftHandSide */) === 1024 /* IsLeftHandSide */;
}
function isPrimary(expr) {
    return (expr.$kind & 512 /* IsPrimary */) === 512 /* IsPrimary */;
}
function isResource(expr) {
    return (expr.$kind & 32768 /* IsResource */) === 32768 /* IsResource */;
}
function hasBind(expr) {
    return (expr.$kind & 2048 /* HasBind */) === 2048 /* HasBind */;
}
function hasUnbind(expr) {
    return (expr.$kind & 4096 /* HasUnbind */) === 4096 /* HasUnbind */;
}
function isLiteral(expr) {
    return (expr.$kind & 16384 /* IsLiteral */) === 16384 /* IsLiteral */;
}
function arePureLiterals(expressions) {
    if (expressions === void 0 || expressions.length === 0) {
        return true;
    }
    for (let i = 0; i < expressions.length; ++i) {
        if (!isPureLiteral(expressions[i])) {
            return false;
        }
    }
    return true;
}
function isPureLiteral(expr) {
    if (isLiteral(expr)) {
        switch (expr.$kind) {
            case 17955 /* ArrayLiteral */:
                return arePureLiterals(expr.elements);
            case 17956 /* ObjectLiteral */:
                return arePureLiterals(expr.values);
            case 17958 /* Template */:
                return arePureLiterals(expr.expressions);
            case 17925 /* PrimitiveLiteral */:
                return true;
        }
    }
    return false;
}
var RuntimeError;
(function (RuntimeError) {
    RuntimeError[RuntimeError["NoLocator"] = 202] = "NoLocator";
    RuntimeError[RuntimeError["NoBehaviorFound"] = 203] = "NoBehaviorFound";
    RuntimeError[RuntimeError["BehaviorAlreadyApplied"] = 204] = "BehaviorAlreadyApplied";
    RuntimeError[RuntimeError["NoConverterFound"] = 205] = "NoConverterFound";
    RuntimeError[RuntimeError["NoBinding"] = 206] = "NoBinding";
    RuntimeError[RuntimeError["NotAFunction"] = 207] = "NotAFunction";
    RuntimeError[RuntimeError["UnknownOperator"] = 208] = "UnknownOperator";
    RuntimeError[RuntimeError["NilScope"] = 250] = "NilScope";
})(RuntimeError || (RuntimeError = {}));
class CustomExpression {
    constructor(value) {
        this.value = value;
    }
    evaluate(flags, scope, locator, part) {
        return this.value;
    }
}
class BindingBehaviorExpression {
    constructor(expression, name, args) {
        this.expression = expression;
        this.name = name;
        this.args = args;
        this.$kind = 38962 /* BindingBehavior */;
        this.behaviorKey = _resources_binding_behavior__WEBPACK_IMPORTED_MODULE_4__["BindingBehavior"].keyFrom(name);
    }
    evaluate(flags, scope, locator, part) {
        return this.expression.evaluate(flags, scope, locator, part);
    }
    assign(flags, scope, locator, value, part) {
        return this.expression.assign(flags, scope, locator, value, part);
    }
    connect(flags, scope, binding, part) {
        this.expression.connect(flags, scope, binding, part);
    }
    bind(flags, scope, binding) {
        if (scope == null) {
            throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].error(250 /* NilScope */, this);
        }
        if (!binding) {
            throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].error(206 /* NoBinding */, this);
        }
        const locator = binding.locator;
        if (!locator) {
            throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].error(202 /* NoLocator */, this);
        }
        if (hasBind(this.expression)) {
            this.expression.bind(flags, scope, binding);
        }
        const behaviorKey = this.behaviorKey;
        const behavior = locator.get(behaviorKey);
        if (!behavior) {
            throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].error(203 /* NoBehaviorFound */, this);
        }
        if (!(behavior instanceof _resources_binding_behavior__WEBPACK_IMPORTED_MODULE_4__["BindingBehaviorFactory"])) {
            if (binding[behaviorKey] === void 0) {
                binding[behaviorKey] = behavior;
                behavior.bind.call(behavior, flags, scope, binding, ...evalList(flags, scope, locator, this.args));
            }
            else {
                _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].write(204 /* BehaviorAlreadyApplied */, this);
            }
        }
    }
    unbind(flags, scope, binding) {
        const behaviorKey = this.behaviorKey;
        if (binding[behaviorKey] !== void 0) {
            binding[behaviorKey].unbind(flags, scope, binding);
            binding[behaviorKey] = void 0;
        }
        if (hasUnbind(this.expression)) {
            this.expression.unbind(flags, scope, binding);
        }
    }
    accept(visitor) {
        return visitor.visitBindingBehavior(this);
    }
}
class ValueConverterExpression {
    constructor(expression, name, args) {
        this.expression = expression;
        this.name = name;
        this.args = args;
        this.$kind = 36913 /* ValueConverter */;
        this.converterKey = _resources_value_converter__WEBPACK_IMPORTED_MODULE_5__["ValueConverter"].keyFrom(name);
    }
    evaluate(flags, scope, locator, part) {
        if (!locator) {
            throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].error(202 /* NoLocator */, this);
        }
        const converter = locator.get(this.converterKey);
        if (!converter) {
            throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].error(205 /* NoConverterFound */, this);
        }
        if ('toView' in converter) {
            const args = this.args;
            const len = args.length;
            const result = Array(len + 1);
            result[0] = this.expression.evaluate(flags, scope, locator, part);
            for (let i = 0; i < len; ++i) {
                result[i + 1] = args[i].evaluate(flags, scope, locator, part);
            }
            return converter.toView.call(converter, ...result);
        }
        return this.expression.evaluate(flags, scope, locator, part);
    }
    assign(flags, scope, locator, value, part) {
        if (!locator) {
            throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].error(202 /* NoLocator */, this);
        }
        const converter = locator.get(this.converterKey);
        if (!converter) {
            throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].error(205 /* NoConverterFound */, this);
        }
        if ('fromView' in converter) {
            value = converter.fromView.call(converter, value, ...(evalList(flags, scope, locator, this.args)));
        }
        return this.expression.assign(flags, scope, locator, value, part);
    }
    connect(flags, scope, binding, part) {
        if (scope == null) {
            throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].error(250 /* NilScope */, this);
        }
        if (!binding) {
            throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].error(206 /* NoBinding */, this);
        }
        const locator = binding.locator;
        if (!locator) {
            throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].error(202 /* NoLocator */, this);
        }
        this.expression.connect(flags, scope, binding, part);
        const args = this.args;
        for (let i = 0, ii = args.length; i < ii; ++i) {
            args[i].connect(flags, scope, binding, part);
        }
        const converter = locator.get(this.converterKey);
        if (!converter) {
            throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].error(205 /* NoConverterFound */, this);
        }
        const signals = converter.signals;
        if (signals === void 0) {
            return;
        }
        const signaler = locator.get(_observation_signaler__WEBPACK_IMPORTED_MODULE_3__["ISignaler"]);
        for (let i = 0, ii = signals.length; i < ii; ++i) {
            signaler.addSignalListener(signals[i], binding);
        }
    }
    unbind(flags, scope, binding) {
        const locator = binding.locator;
        const converter = locator.get(this.converterKey);
        const signals = converter.signals;
        if (signals === void 0) {
            return;
        }
        const signaler = locator.get(_observation_signaler__WEBPACK_IMPORTED_MODULE_3__["ISignaler"]);
        for (let i = 0, ii = signals.length; i < ii; ++i) {
            signaler.removeSignalListener(signals[i], binding);
        }
    }
    accept(visitor) {
        return visitor.visitValueConverter(this);
    }
}
class AssignExpression {
    constructor(target, value) {
        this.target = target;
        this.value = value;
        this.$kind = 8208 /* Assign */;
    }
    evaluate(flags, scope, locator, part) {
        return this.target.assign(flags, scope, locator, this.value.evaluate(flags, scope, locator), part);
    }
    connect(flags, scope, binding, part) {
        return;
    }
    assign(flags, scope, locator, value, part) {
        this.value.assign(flags, scope, locator, value, part);
        return this.target.assign(flags, scope, locator, value, part);
    }
    accept(visitor) {
        return visitor.visitAssign(this);
    }
}
class ConditionalExpression {
    constructor(condition, yes, no) {
        this.condition = condition;
        this.yes = yes;
        this.no = no;
        this.$kind = 63 /* Conditional */;
    }
    evaluate(flags, scope, locator, part) {
        return (!!this.condition.evaluate(flags, scope, locator, part))
            ? this.yes.evaluate(flags, scope, locator, part)
            : this.no.evaluate(flags, scope, locator, part);
    }
    assign(flags, scope, locator, obj, part) {
        return void 0;
    }
    connect(flags, scope, binding, part) {
        const condition = this.condition;
        if (condition.evaluate(flags, scope, null, part)) {
            this.condition.connect(flags, scope, binding, part);
            this.yes.connect(flags, scope, binding, part);
        }
        else {
            this.condition.connect(flags, scope, binding, part);
            this.no.connect(flags, scope, binding, part);
        }
    }
    accept(visitor) {
        return visitor.visitConditional(this);
    }
}
class AccessThisExpression {
    constructor(ancestor = 0) {
        this.ancestor = ancestor;
        this.$kind = 1793 /* AccessThis */;
    }
    evaluate(flags, scope, locator, part) {
        if (scope == null) {
            throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].error(250 /* NilScope */, this);
        }
        if ((flags & 67108864 /* allowParentScopeTraversal */) > 0) {
            let parent = scope.parentScope;
            while (parent !== null) {
                if (!parent.scopeParts.includes(part)) {
                    parent = parent.parentScope;
                }
            }
            if (parent === null) {
                throw new Error(`No target scope cold be found for part "${part}"`);
            }
        }
        let oc = scope.overrideContext;
        let i = this.ancestor;
        while (i-- && oc) {
            oc = oc.parentOverrideContext;
        }
        return i < 1 && oc ? oc.bindingContext : void 0;
    }
    assign(flags, scope, locator, obj, part) {
        return void 0;
    }
    connect(flags, scope, binding, part) {
        return;
    }
    accept(visitor) {
        return visitor.visitAccessThis(this);
    }
}
AccessThisExpression.$this = new AccessThisExpression(0);
AccessThisExpression.$parent = new AccessThisExpression(1);
class AccessScopeExpression {
    constructor(name, ancestor = 0) {
        this.name = name;
        this.ancestor = ancestor;
        this.$kind = 10082 /* AccessScope */;
    }
    evaluate(flags, scope, locator, part) {
        const obj = _observation_binding_context__WEBPACK_IMPORTED_MODULE_1__["BindingContext"].get(scope, this.name, this.ancestor, flags, part);
        const evaluatedValue = obj[this.name];
        if (flags & 4 /* isStrictBindingStrategy */) {
            return evaluatedValue;
        }
        return evaluatedValue == null ? '' : evaluatedValue;
    }
    assign(flags, scope, locator, value, part) {
        const obj = _observation_binding_context__WEBPACK_IMPORTED_MODULE_1__["BindingContext"].get(scope, this.name, this.ancestor, flags, part);
        if (obj instanceof Object) {
            if (obj.$observers !== void 0 && obj.$observers[this.name] !== void 0) {
                obj.$observers[this.name].setValue(value, flags);
                return value;
            }
            else {
                return obj[this.name] = value;
            }
        }
        return void 0;
    }
    connect(flags, scope, binding, part) {
        const context = _observation_binding_context__WEBPACK_IMPORTED_MODULE_1__["BindingContext"].get(scope, this.name, this.ancestor, flags, part);
        binding.observeProperty(flags, context, this.name);
    }
    accept(visitor) {
        return visitor.visitAccessScope(this);
    }
}
class AccessMemberExpression {
    constructor(object, name) {
        this.object = object;
        this.name = name;
        this.$kind = 9323 /* AccessMember */;
    }
    evaluate(flags, scope, locator, part) {
        const instance = this.object.evaluate(flags, scope, locator, part);
        if (flags & 4 /* isStrictBindingStrategy */) {
            return instance == null ? instance : instance[this.name];
        }
        return instance ? instance[this.name] : '';
    }
    assign(flags, scope, locator, value, part) {
        const obj = this.object.evaluate(flags, scope, locator, part);
        if (obj instanceof Object) {
            if (obj.$observers !== void 0 && obj.$observers[this.name] !== void 0) {
                obj.$observers[this.name].setValue(value, flags);
            }
            else {
                obj[this.name] = value;
            }
        }
        else {
            this.object.assign(flags, scope, locator, { [this.name]: value });
        }
        return value;
    }
    connect(flags, scope, binding, part) {
        const obj = this.object.evaluate(flags, scope, null, part);
        if ((flags & 134217728 /* observeLeafPropertiesOnly */) === 0) {
            this.object.connect(flags, scope, binding, part);
        }
        if (obj instanceof Object) {
            binding.observeProperty(flags, obj, this.name);
        }
    }
    accept(visitor) {
        return visitor.visitAccessMember(this);
    }
}
class AccessKeyedExpression {
    constructor(object, key) {
        this.object = object;
        this.key = key;
        this.$kind = 9324 /* AccessKeyed */;
    }
    evaluate(flags, scope, locator, part) {
        const instance = this.object.evaluate(flags, scope, locator, part);
        if (instance instanceof Object) {
            const key = this.key.evaluate(flags, scope, locator, part);
            return instance[key];
        }
        return void 0;
    }
    assign(flags, scope, locator, value, part) {
        const instance = this.object.evaluate(flags, scope, locator, part);
        const key = this.key.evaluate(flags, scope, locator, part);
        return instance[key] = value;
    }
    connect(flags, scope, binding, part) {
        const obj = this.object.evaluate(flags, scope, null, part);
        if ((flags & 134217728 /* observeLeafPropertiesOnly */) === 0) {
            this.object.connect(flags, scope, binding, part);
        }
        if (obj instanceof Object) {
            this.key.connect(flags, scope, binding, part);
            const key = this.key.evaluate(flags, scope, null, part);
            // (note: string indexers behave the same way as numeric indexers as long as they represent numbers)
            binding.observeProperty(flags, obj, key);
        }
    }
    accept(visitor) {
        return visitor.visitAccessKeyed(this);
    }
}
class CallScopeExpression {
    constructor(name, args, ancestor = 0) {
        this.name = name;
        this.args = args;
        this.ancestor = ancestor;
        this.$kind = 1448 /* CallScope */;
    }
    evaluate(flags, scope, locator, part) {
        const args = evalList(flags, scope, locator, this.args, part);
        const context = _observation_binding_context__WEBPACK_IMPORTED_MODULE_1__["BindingContext"].get(scope, this.name, this.ancestor, flags, part);
        const func = getFunction(flags, context, this.name);
        if (func) {
            return func.apply(context, args);
        }
        return void 0;
    }
    assign(flags, scope, locator, obj, part) {
        return void 0;
    }
    connect(flags, scope, binding, part) {
        const args = this.args;
        for (let i = 0, ii = args.length; i < ii; ++i) {
            args[i].connect(flags, scope, binding, part);
        }
    }
    accept(visitor) {
        return visitor.visitCallScope(this);
    }
}
class CallMemberExpression {
    constructor(object, name, args) {
        this.object = object;
        this.name = name;
        this.args = args;
        this.$kind = 1161 /* CallMember */;
    }
    evaluate(flags, scope, locator, part) {
        const instance = this.object.evaluate(flags, scope, locator, part);
        const args = evalList(flags, scope, locator, this.args, part);
        const func = getFunction(flags, instance, this.name);
        if (func) {
            return func.apply(instance, args);
        }
        return void 0;
    }
    assign(flags, scope, locator, obj, part) {
        return void 0;
    }
    connect(flags, scope, binding, part) {
        const obj = this.object.evaluate(flags, scope, null, part);
        if ((flags & 134217728 /* observeLeafPropertiesOnly */) === 0) {
            this.object.connect(flags, scope, binding, part);
        }
        if (getFunction(flags & ~2097152 /* mustEvaluate */, obj, this.name)) {
            const args = this.args;
            for (let i = 0, ii = args.length; i < ii; ++i) {
                args[i].connect(flags, scope, binding, part);
            }
        }
    }
    accept(visitor) {
        return visitor.visitCallMember(this);
    }
}
class CallFunctionExpression {
    constructor(func, args) {
        this.func = func;
        this.args = args;
        this.$kind = 1162 /* CallFunction */;
    }
    evaluate(flags, scope, locator, part) {
        const func = this.func.evaluate(flags, scope, locator, part);
        if (typeof func === 'function') {
            return func(...evalList(flags, scope, locator, this.args, part));
        }
        if (!(flags & 2097152 /* mustEvaluate */) && (func == null)) {
            return void 0;
        }
        throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].error(207 /* NotAFunction */, this);
    }
    assign(flags, scope, locator, obj, part) {
        return void 0;
    }
    connect(flags, scope, binding, part) {
        const func = this.func.evaluate(flags, scope, null, part);
        this.func.connect(flags, scope, binding, part);
        if (typeof func === 'function') {
            const args = this.args;
            for (let i = 0, ii = args.length; i < ii; ++i) {
                args[i].connect(flags, scope, binding, part);
            }
        }
    }
    accept(visitor) {
        return visitor.visitCallFunction(this);
    }
}
class BinaryExpression {
    constructor(operation, left, right) {
        this.operation = operation;
        this.left = left;
        this.right = right;
        this.$kind = 46 /* Binary */;
        // what we're doing here is effectively moving the large switch statement from evaluate to the constructor
        // so that the check only needs to be done once, and evaluate (which is called many times) will have a lot less
        // work to do; we can do this because the operation can't change after it's parsed
        this.evaluate = this[operation];
    }
    evaluate(flags, scope, locator, part) {
        throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].error(208 /* UnknownOperator */, this);
    }
    assign(flags, scope, locator, obj, part) {
        return void 0;
    }
    connect(flags, scope, binding, part) {
        this.left.connect(flags, scope, binding, part);
        this.right.connect(flags, scope, binding, part);
    }
    ['&&'](f, s, l, p) {
        return this.left.evaluate(f, s, l, p) && this.right.evaluate(f, s, l, p);
    }
    ['||'](f, s, l, p) {
        return this.left.evaluate(f, s, l, p) || this.right.evaluate(f, s, l, p);
    }
    ['=='](f, s, l, p) {
        // eslint-disable-next-line eqeqeq
        return this.left.evaluate(f, s, l, p) == this.right.evaluate(f, s, l, p);
    }
    ['==='](f, s, l, p) {
        return this.left.evaluate(f, s, l, p) === this.right.evaluate(f, s, l, p);
    }
    ['!='](f, s, l, p) {
        // eslint-disable-next-line eqeqeq
        return this.left.evaluate(f, s, l, p) != this.right.evaluate(f, s, l, p);
    }
    ['!=='](f, s, l, p) {
        return this.left.evaluate(f, s, l, p) !== this.right.evaluate(f, s, l, p);
    }
    ['instanceof'](f, s, l, p) {
        const right = this.right.evaluate(f, s, l, p);
        if (typeof right === 'function') {
            return this.left.evaluate(f, s, l, p) instanceof right;
        }
        return false;
    }
    ['in'](f, s, l, p) {
        const right = this.right.evaluate(f, s, l, p);
        if (right instanceof Object) {
            return this.left.evaluate(f, s, l, p) in right;
        }
        return false;
    }
    // note: autoConvertAdd (and the null check) is removed because the default spec behavior is already largely similar
    // and where it isn't, you kind of want it to behave like the spec anyway (e.g. return NaN when adding a number to undefined)
    // this makes bugs in user code easier to track down for end users
    // also, skipping these checks and leaving it to the runtime is a nice little perf boost and simplifies our code
    ['+'](f, s, l, p) {
        const left = this.left.evaluate(f, s, l, p);
        const right = this.right.evaluate(f, s, l, p);
        if ((f & 4 /* isStrictBindingStrategy */) > 0) {
            return left + right;
        }
        // eslint-disable-next-line @typescript-eslint/strict-boolean-expressions
        if (!left || !right) {
            if (Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["isNumberOrBigInt"])(left) || Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["isNumberOrBigInt"])(right)) {
                // eslint-disable-next-line @typescript-eslint/strict-boolean-expressions, @typescript-eslint/no-unnecessary-condition
                return (left || 0) + (right || 0);
            }
            if (Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["isStringOrDate"])(left) || Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["isStringOrDate"])(right)) {
                // eslint-disable-next-line @typescript-eslint/strict-boolean-expressions, @typescript-eslint/no-unnecessary-condition
                return (left || '') + (right || '');
            }
        }
        return left + right;
    }
    ['-'](f, s, l, p) {
        return this.left.evaluate(f, s, l, p) - this.right.evaluate(f, s, l, p);
    }
    ['*'](f, s, l, p) {
        return this.left.evaluate(f, s, l, p) * this.right.evaluate(f, s, l, p);
    }
    ['/'](f, s, l, p) {
        return this.left.evaluate(f, s, l, p) / this.right.evaluate(f, s, l, p);
    }
    ['%'](f, s, l, p) {
        return this.left.evaluate(f, s, l, p) % this.right.evaluate(f, s, l, p);
    }
    ['<'](f, s, l, p) {
        return this.left.evaluate(f, s, l, p) < this.right.evaluate(f, s, l, p);
    }
    ['>'](f, s, l, p) {
        return this.left.evaluate(f, s, l, p) > this.right.evaluate(f, s, l, p);
    }
    ['<='](f, s, l, p) {
        return this.left.evaluate(f, s, l, p) <= this.right.evaluate(f, s, l, p);
    }
    ['>='](f, s, l, p) {
        return this.left.evaluate(f, s, l, p) >= this.right.evaluate(f, s, l, p);
    }
    accept(visitor) {
        return visitor.visitBinary(this);
    }
}
class UnaryExpression {
    constructor(operation, expression) {
        this.operation = operation;
        this.expression = expression;
        this.$kind = 39 /* Unary */;
        // see Binary (we're doing the same thing here)
        this.evaluate = this[operation];
    }
    evaluate(flags, scope, locator, part) {
        throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].error(208 /* UnknownOperator */, this);
    }
    assign(flags, scope, locator, obj, part) {
        return void 0;
    }
    connect(flags, scope, binding, part) {
        this.expression.connect(flags, scope, binding, part);
    }
    ['void'](f, s, l, p) {
        return void this.expression.evaluate(f, s, l, p);
    }
    ['typeof'](f, s, l, p) {
        return typeof this.expression.evaluate(f | 4 /* isStrictBindingStrategy */, s, l, p);
    }
    ['!'](f, s, l, p) {
        return !this.expression.evaluate(f, s, l, p);
    }
    ['-'](f, s, l, p) {
        return -this.expression.evaluate(f, s, l, p);
    }
    ['+'](f, s, l, p) {
        return +this.expression.evaluate(f, s, l, p);
    }
    accept(visitor) {
        return visitor.visitUnary(this);
    }
}
class PrimitiveLiteralExpression {
    constructor(value) {
        this.value = value;
        this.$kind = 17925 /* PrimitiveLiteral */;
    }
    evaluate(flags, scope, locator, part) {
        return this.value;
    }
    assign(flags, scope, locator, obj, part) {
        return void 0;
    }
    connect(flags, scope, binding, part) {
        return;
    }
    accept(visitor) {
        return visitor.visitPrimitiveLiteral(this);
    }
}
PrimitiveLiteralExpression.$undefined = new PrimitiveLiteralExpression(void 0);
PrimitiveLiteralExpression.$null = new PrimitiveLiteralExpression(null);
PrimitiveLiteralExpression.$true = new PrimitiveLiteralExpression(true);
PrimitiveLiteralExpression.$false = new PrimitiveLiteralExpression(false);
PrimitiveLiteralExpression.$empty = new PrimitiveLiteralExpression('');
class HtmlLiteralExpression {
    constructor(parts) {
        this.parts = parts;
        this.$kind = 51 /* HtmlLiteral */;
    }
    evaluate(flags, scope, locator, part) {
        const elements = this.parts;
        let result = '';
        let value;
        for (let i = 0, ii = elements.length; i < ii; ++i) {
            value = elements[i].evaluate(flags, scope, locator, part);
            if (value == null) {
                continue;
            }
            result += value;
        }
        return result;
    }
    assign(flags, scope, locator, obj, part) {
        return void 0;
    }
    connect(flags, scope, binding, part) {
        for (let i = 0, ii = this.parts.length; i < ii; ++i) {
            this.parts[i].connect(flags, scope, binding, part);
        }
    }
    accept(visitor) {
        return visitor.visitHtmlLiteral(this);
    }
}
class ArrayLiteralExpression {
    constructor(elements) {
        this.elements = elements;
        this.$kind = 17955 /* ArrayLiteral */;
    }
    evaluate(flags, scope, locator, part) {
        const elements = this.elements;
        const length = elements.length;
        const result = Array(length);
        for (let i = 0; i < length; ++i) {
            result[i] = elements[i].evaluate(flags, scope, locator, part);
        }
        return result;
    }
    assign(flags, scope, locator, obj, part) {
        return void 0;
    }
    connect(flags, scope, binding, part) {
        const elements = this.elements;
        for (let i = 0, ii = elements.length; i < ii; ++i) {
            elements[i].connect(flags, scope, binding, part);
        }
    }
    accept(visitor) {
        return visitor.visitArrayLiteral(this);
    }
}
ArrayLiteralExpression.$empty = new ArrayLiteralExpression(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["PLATFORM"].emptyArray);
class ObjectLiteralExpression {
    constructor(keys, values) {
        this.keys = keys;
        this.values = values;
        this.$kind = 17956 /* ObjectLiteral */;
    }
    evaluate(flags, scope, locator, part) {
        const instance = {};
        const keys = this.keys;
        const values = this.values;
        for (let i = 0, ii = keys.length; i < ii; ++i) {
            instance[keys[i]] = values[i].evaluate(flags, scope, locator, part);
        }
        return instance;
    }
    assign(flags, scope, locator, obj, part) {
        return void 0;
    }
    connect(flags, scope, binding, part) {
        const keys = this.keys;
        const values = this.values;
        for (let i = 0, ii = keys.length; i < ii; ++i) {
            values[i].connect(flags, scope, binding, part);
        }
    }
    accept(visitor) {
        return visitor.visitObjectLiteral(this);
    }
}
ObjectLiteralExpression.$empty = new ObjectLiteralExpression(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["PLATFORM"].emptyArray, _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["PLATFORM"].emptyArray);
class TemplateExpression {
    constructor(cooked, expressions = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["PLATFORM"].emptyArray) {
        this.cooked = cooked;
        this.expressions = expressions;
        this.$kind = 17958 /* Template */;
    }
    evaluate(flags, scope, locator, part) {
        const expressions = this.expressions;
        const cooked = this.cooked;
        let result = cooked[0];
        for (let i = 0, ii = expressions.length; i < ii; ++i) {
            result += expressions[i].evaluate(flags, scope, locator, part);
            result += cooked[i + 1];
        }
        return result;
    }
    assign(flags, scope, locator, obj, part) {
        return void 0;
    }
    connect(flags, scope, binding, part) {
        const expressions = this.expressions;
        for (let i = 0, ii = expressions.length; i < ii; ++i) {
            expressions[i].connect(flags, scope, binding, part);
            i++;
        }
    }
    accept(visitor) {
        return visitor.visitTemplate(this);
    }
}
TemplateExpression.$empty = new TemplateExpression(['']);
class TaggedTemplateExpression {
    constructor(cooked, raw, func, expressions = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["PLATFORM"].emptyArray) {
        this.cooked = cooked;
        this.func = func;
        this.expressions = expressions;
        this.$kind = 1197 /* TaggedTemplate */;
        cooked.raw = raw;
    }
    evaluate(flags, scope, locator, part) {
        const expressions = this.expressions;
        const len = expressions.length;
        const results = Array(len);
        for (let i = 0, ii = len; i < ii; ++i) {
            results[i] = expressions[i].evaluate(flags, scope, locator, part);
        }
        const func = this.func.evaluate(flags, scope, locator, part);
        if (typeof func !== 'function') {
            throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].error(207 /* NotAFunction */, this);
        }
        return func(this.cooked, ...results);
    }
    assign(flags, scope, locator, obj, part) {
        return void 0;
    }
    connect(flags, scope, binding, part) {
        const expressions = this.expressions;
        for (let i = 0, ii = expressions.length; i < ii; ++i) {
            expressions[i].connect(flags, scope, binding);
        }
        this.func.connect(flags, scope, binding);
    }
    accept(visitor) {
        return visitor.visitTaggedTemplate(this);
    }
}
class ArrayBindingPattern {
    // We'll either have elements, or keys+values, but never all 3
    constructor(elements) {
        this.elements = elements;
        this.$kind = 65556 /* ArrayBindingPattern */;
    }
    evaluate(flags, scope, locator, part) {
        // TODO
        return void 0;
    }
    assign(flags, scope, locator, obj, part) {
        // TODO
        return void 0;
    }
    connect(flags, scope, binding, part) {
        return;
    }
    accept(visitor) {
        return visitor.visitArrayBindingPattern(this);
    }
}
class ObjectBindingPattern {
    // We'll either have elements, or keys+values, but never all 3
    constructor(keys, values) {
        this.keys = keys;
        this.values = values;
        this.$kind = 65557 /* ObjectBindingPattern */;
    }
    evaluate(flags, scope, locator, part) {
        // TODO
        return void 0;
    }
    assign(flags, scope, locator, obj, part) {
        // TODO
        return void 0;
    }
    connect(flags, scope, binding, part) {
        return;
    }
    accept(visitor) {
        return visitor.visitObjectBindingPattern(this);
    }
}
class BindingIdentifier {
    constructor(name) {
        this.name = name;
        this.$kind = 65558 /* BindingIdentifier */;
    }
    evaluate(flags, scope, locator, part) {
        return this.name;
    }
    connect(flags, scope, binding, part) {
        return;
    }
    accept(visitor) {
        return visitor.visitBindingIdentifier(this);
    }
}
const toStringTag = Object.prototype.toString;
// https://tc39.github.io/ecma262/#sec-iteration-statements
// https://tc39.github.io/ecma262/#sec-for-in-and-for-of-statements
class ForOfStatement {
    constructor(declaration, iterable) {
        this.declaration = declaration;
        this.iterable = iterable;
        this.$kind = 6199 /* ForOfStatement */;
    }
    evaluate(flags, scope, locator, part) {
        return this.iterable.evaluate(flags, scope, locator, part);
    }
    assign(flags, scope, locator, obj, part) {
        return void 0;
    }
    count(flags, result) {
        switch (toStringTag.call(result)) {
            case '[object Array]': return result.length;
            case '[object Map]': return result.size;
            case '[object Set]': return result.size;
            case '[object Number]': return result;
            case '[object Null]': return 0;
            case '[object Undefined]': return 0;
            default: throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].error(0); // TODO: Set error code
        }
    }
    iterate(flags, result, func) {
        switch (toStringTag.call(result)) {
            case '[object Array]': return $array(flags | 8388608 /* isOriginalArray */, result, func);
            case '[object Map]': return $map(flags | 8388608 /* isOriginalArray */, result, func);
            case '[object Set]': return $set(flags | 8388608 /* isOriginalArray */, result, func);
            case '[object Number]': return $number(flags | 8388608 /* isOriginalArray */, result, func);
            case '[object Null]': return;
            case '[object Undefined]': return;
            default: throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].error(0); // TODO: Set error code
        }
    }
    connect(flags, scope, binding, part) {
        this.declaration.connect(flags, scope, binding, part);
        this.iterable.connect(flags, scope, binding, part);
    }
    bind(flags, scope, binding) {
        if (hasBind(this.iterable)) {
            this.iterable.bind(flags, scope, binding);
        }
    }
    unbind(flags, scope, binding) {
        if (hasUnbind(this.iterable)) {
            this.iterable.unbind(flags, scope, binding);
        }
    }
    accept(visitor) {
        return visitor.visitForOfStatement(this);
    }
}
/*
* Note: this implementation is far simpler than the one in vCurrent and might be missing important stuff (not sure yet)
* so while this implementation is identical to Template and we could reuse that one, we don't want to lock outselves in to potentially the wrong abstraction
* but this class might be a candidate for removal if it turns out it does provide all we need
*/
class Interpolation {
    constructor(parts, expressions = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["PLATFORM"].emptyArray) {
        this.parts = parts;
        this.expressions = expressions;
        this.$kind = 24 /* Interpolation */;
        this.isMulti = expressions.length > 1;
        this.firstExpression = expressions[0];
    }
    evaluate(flags, scope, locator, part) {
        if (this.isMulti) {
            const expressions = this.expressions;
            const parts = this.parts;
            let result = parts[0];
            for (let i = 0, ii = expressions.length; i < ii; ++i) {
                result += expressions[i].evaluate(flags, scope, locator, part);
                result += parts[i + 1];
            }
            return result;
        }
        else {
            const parts = this.parts;
            return `${parts[0]}${this.firstExpression.evaluate(flags, scope, locator, part)}${parts[1]}`;
        }
    }
    assign(flags, scope, locator, obj, part) {
        return void 0;
    }
    connect(flags, scope, binding, part) {
        return;
    }
    accept(visitor) {
        return visitor.visitInterpolation(this);
    }
}
/// Evaluate the [list] in context of the [scope].
function evalList(flags, scope, locator, list, part) {
    const len = list.length;
    const result = Array(len);
    for (let i = 0; i < len; ++i) {
        result[i] = list[i].evaluate(flags, scope, locator, part);
    }
    return result;
}
function getFunction(flags, obj, name) {
    const func = obj == null ? null : obj[name];
    if (typeof func === 'function') {
        return func;
    }
    if (!(flags & 2097152 /* mustEvaluate */) && func == null) {
        return null;
    }
    throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].error(207 /* NotAFunction */, obj, name, func);
}
const proxyAndOriginalArray = 2 /* proxyStrategy */ | 8388608 /* isOriginalArray */;
function $array(flags, result, func) {
    if ((flags & proxyAndOriginalArray) === proxyAndOriginalArray) {
        // If we're in proxy mode, and the array is the original "items" (and not an array we created here to iterate over e.g. a set)
        // then replace all items (which are Objects) with proxies so their properties are observed in the source view model even if no
        // observers are explicitly created
        const rawArray = _observation_proxy_observer__WEBPACK_IMPORTED_MODULE_2__["ProxyObserver"].getRawIfProxy(result);
        const len = rawArray.length;
        let item;
        let i = 0;
        for (; i < len; ++i) {
            item = rawArray[i];
            if (item instanceof Object) {
                item = rawArray[i] = _observation_proxy_observer__WEBPACK_IMPORTED_MODULE_2__["ProxyObserver"].getOrCreate(item).proxy;
            }
            func(rawArray, i, item);
        }
    }
    else {
        for (let i = 0, ii = result.length; i < ii; ++i) {
            func(result, i, result[i]);
        }
    }
}
function $map(flags, result, func) {
    const arr = Array(result.size);
    let i = -1;
    for (const entry of result.entries()) {
        arr[++i] = entry;
    }
    $array(flags & ~8388608 /* isOriginalArray */, arr, func);
}
function $set(flags, result, func) {
    const arr = Array(result.size);
    let i = -1;
    for (const key of result.keys()) {
        arr[++i] = key;
    }
    $array(flags & ~8388608 /* isOriginalArray */, arr, func);
}
function $number(flags, result, func) {
    const arr = Array(result);
    for (let i = 0; i < result; ++i) {
        arr[i] = i;
    }
    $array(flags & ~8388608 /* isOriginalArray */, arr, func);
}
//# sourceMappingURL=ast.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esnext/binding/call-binding.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esnext/binding/call-binding.js ***!
  \***************************************************************************/
/*! exports provided: CallBinding */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CallBinding", function() { return CallBinding; });
/* harmony import */ var _ast__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ast */ "./node_modules/@aurelia/runtime/dist/esnext/binding/ast.js");

class CallBinding {
    constructor(sourceExpression, target, targetProperty, observerLocator, locator) {
        this.sourceExpression = sourceExpression;
        this.locator = locator;
        this.interceptor = this;
        this.$state = 0 /* none */;
        this.targetObserver = observerLocator.getObserver(0 /* none */, target, targetProperty);
    }
    callSource(args) {
        const overrideContext = this.$scope.overrideContext;
        Object.assign(overrideContext, args);
        const result = this.sourceExpression.evaluate(2097152 /* mustEvaluate */, this.$scope, this.locator, this.part);
        for (const prop in args) {
            Reflect.deleteProperty(overrideContext, prop);
        }
        return result;
    }
    $bind(flags, scope, part) {
        if (this.$state & 4 /* isBound */) {
            if (this.$scope === scope) {
                return;
            }
            this.interceptor.$unbind(flags | 4096 /* fromBind */);
        }
        // add isBinding flag
        this.$state |= 1 /* isBinding */;
        this.$scope = scope;
        this.part = part;
        if (Object(_ast__WEBPACK_IMPORTED_MODULE_0__["hasBind"])(this.sourceExpression)) {
            this.sourceExpression.bind(flags, scope, this.interceptor);
        }
        this.targetObserver.setValue(($args) => this.interceptor.callSource($args), flags);
        // add isBound flag and remove isBinding flag
        this.$state |= 4 /* isBound */;
        this.$state &= ~1 /* isBinding */;
    }
    $unbind(flags) {
        if (!(this.$state & 4 /* isBound */)) {
            return;
        }
        // add isUnbinding flag
        this.$state |= 2 /* isUnbinding */;
        if (Object(_ast__WEBPACK_IMPORTED_MODULE_0__["hasUnbind"])(this.sourceExpression)) {
            this.sourceExpression.unbind(flags, this.$scope, this.interceptor);
        }
        this.$scope = void 0;
        this.targetObserver.setValue(null, flags);
        // remove isBound and isUnbinding flags
        this.$state &= ~(4 /* isBound */ | 2 /* isUnbinding */);
    }
    observeProperty(flags, obj, propertyName) {
        return;
    }
    handleChange(newValue, previousValue, flags) {
        return;
    }
}
//# sourceMappingURL=call-binding.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esnext/binding/connectable.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esnext/binding/connectable.js ***!
  \**************************************************************************/
/*! exports provided: addObserver, observeProperty, unobserve, connectable, BindingMediator */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "addObserver", function() { return addObserver; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "observeProperty", function() { return observeProperty; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "unobserve", function() { return unobserve; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "connectable", function() { return connectable; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BindingMediator", function() { return BindingMediator; });
// TODO: add connect-queue (or something similar) back in when everything else is working, to improve startup time
const slice = Array.prototype.slice;
const slotNames = [];
const versionSlotNames = [];
let lastSlot = -1;
function ensureEnoughSlotNames(currentSlot) {
    if (currentSlot === lastSlot) {
        lastSlot += 5;
        const ii = slotNames.length = versionSlotNames.length = lastSlot + 1;
        for (let i = currentSlot + 1; i < ii; ++i) {
            slotNames[i] = `_observer${i}`;
            versionSlotNames[i] = `_observerVersion${i}`;
        }
    }
}
ensureEnoughSlotNames(-1);
/** @internal */
function addObserver(observer) {
    // find the observer.
    const observerSlots = this.observerSlots == null ? 0 : this.observerSlots;
    let i = observerSlots;
    while (i-- && this[slotNames[i]] !== observer)
        ;
    // if we are not already observing, put the observer in an open slot and subscribe.
    if (i === -1) {
        i = 0;
        while (this[slotNames[i]]) {
            i++;
        }
        this[slotNames[i]] = observer;
        observer.subscribe(this);
        observer[this.id] |= 16 /* updateTargetInstance */;
        // increment the slot count.
        if (i === observerSlots) {
            this.observerSlots = i + 1;
        }
    }
    // set the "version" when the observer was used.
    if (this.version == null) {
        this.version = 0;
    }
    this[versionSlotNames[i]] = this.version;
    ensureEnoughSlotNames(i);
}
/** @internal */
function observeProperty(flags, obj, propertyName) {
    const observer = this.observerLocator.getObserver(flags, obj, propertyName);
    /* Note: we need to cast here because we can indeed get an accessor instead of an observer,
     *  in which case the call to observer.subscribe will throw. It's not very clean and we can solve this in 2 ways:
     *  1. Fail earlier: only let the locator resolve observers from .getObserver, and throw if no branches are left (e.g. it would otherwise return an accessor)
     *  2. Fail silently (without throwing): give all accessors a no-op subscribe method
     *
     * We'll probably want to implement some global configuration (like a "strict" toggle) so users can pick between enforced correctness vs. ease-of-use
     */
    this.addObserver(observer);
}
/** @internal */
function unobserve(all) {
    const slots = this.observerSlots;
    let slotName;
    let observer;
    if (all === true) {
        for (let i = 0; i < slots; ++i) {
            slotName = slotNames[i];
            observer = this[slotName];
            if (observer != null) {
                this[slotName] = void 0;
                observer.unsubscribe(this);
                observer[this.id] &= ~16 /* updateTargetInstance */;
            }
        }
    }
    else {
        const version = this.version;
        for (let i = 0; i < slots; ++i) {
            if (this[versionSlotNames[i]] !== version) {
                slotName = slotNames[i];
                observer = this[slotName];
                if (observer != null) {
                    this[slotName] = void 0;
                    observer.unsubscribe(this);
                    observer[this.id] &= ~16 /* updateTargetInstance */;
                }
            }
        }
    }
}
function connectableDecorator(target) {
    const proto = target.prototype;
    if (!Object.prototype.hasOwnProperty.call(proto, 'observeProperty'))
        proto.observeProperty = observeProperty;
    if (!Object.prototype.hasOwnProperty.call(proto, 'unobserve'))
        proto.unobserve = unobserve;
    if (!Object.prototype.hasOwnProperty.call(proto, 'addObserver'))
        proto.addObserver = addObserver;
    return target;
}
function connectable(target) {
    return target == null ? connectableDecorator : connectableDecorator(target);
}
let value = 0;
connectable.assignIdTo = (instance) => {
    instance.id = ++value;
};
// @connectable
class BindingMediator {
    constructor(key, binding, observerLocator, locator) {
        this.key = key;
        this.binding = binding;
        this.observerLocator = observerLocator;
        this.locator = locator;
        this.observeProperty = observeProperty;
        this.unobserve = unobserve;
        this.addObserver = addObserver;
        connectable.assignIdTo(this);
    }
    $bind(flags, scope, part) {
        throw new Error('Method not implemented.');
    }
    $unbind(flags) {
        throw new Error('Method not implemented.');
    }
    handleChange(newValue, previousValue, flags) {
        this.binding[this.key](newValue, previousValue, flags);
    }
}
//# sourceMappingURL=connectable.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esnext/binding/expression-parser.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esnext/binding/expression-parser.js ***!
  \********************************************************************************/
/*! exports provided: IExpressionParser, ExpressionParser, BindingType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IExpressionParser", function() { return IExpressionParser; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ExpressionParser", function() { return ExpressionParser; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BindingType", function() { return BindingType; });
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _ast__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ast */ "./node_modules/@aurelia/runtime/dist/esnext/binding/ast.js");


const IExpressionParser = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["DI"].createInterface('IExpressionParser').withDefault(x => x.singleton(ExpressionParser));
/** @internal */
class ExpressionParser {
    constructor() {
        this.expressionLookup = Object.create(null);
        this.forOfLookup = Object.create(null);
        this.interpolationLookup = Object.create(null);
    }
    parse(expression, bindingType) {
        switch (bindingType) {
            case 2048 /* Interpolation */: {
                let found = this.interpolationLookup[expression];
                if (found === void 0) {
                    found = this.interpolationLookup[expression] = this.parseCore(expression, bindingType);
                }
                return found;
            }
            case 539 /* ForCommand */: {
                let found = this.forOfLookup[expression];
                if (found === void 0) {
                    found = this.forOfLookup[expression] = this.parseCore(expression, bindingType);
                }
                return found;
            }
            default: {
                // Allow empty strings for normal bindings and those that are empty by default (such as a custom attribute without an equals sign)
                // But don't cache it, because empty strings are always invalid for any other type of binding
                if (expression.length === 0 && (bindingType & (53 /* BindCommand */ | 49 /* OneTimeCommand */ | 50 /* ToViewCommand */))) {
                    return _ast__WEBPACK_IMPORTED_MODULE_1__["PrimitiveLiteralExpression"].$empty;
                }
                let found = this.expressionLookup[expression];
                if (found === void 0) {
                    found = this.expressionLookup[expression] = this.parseCore(expression, bindingType);
                }
                return found;
            }
        }
    }
    cache(expressions) {
        const { forOfLookup, expressionLookup, interpolationLookup } = this;
        for (const expression in expressions) {
            const expr = expressions[expression];
            switch (expr.$kind) {
                case 24 /* Interpolation */:
                    interpolationLookup[expression] = expr;
                    break;
                case 6199 /* ForOfStatement */:
                    forOfLookup[expression] = expr;
                    break;
                default:
                    expressionLookup[expression] = expr;
            }
        }
    }
    parseCore(expression, bindingType) {
        try {
            const parts = expression.split('.');
            const firstPart = parts[0];
            let current;
            if (firstPart.endsWith('()')) {
                current = new _ast__WEBPACK_IMPORTED_MODULE_1__["CallScopeExpression"](firstPart.replace('()', ''), _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["PLATFORM"].emptyArray);
            }
            else {
                current = new _ast__WEBPACK_IMPORTED_MODULE_1__["AccessScopeExpression"](parts[0]);
            }
            let index = 1;
            while (index < parts.length) {
                const currentPart = parts[index];
                if (currentPart.endsWith('()')) {
                    current = new _ast__WEBPACK_IMPORTED_MODULE_1__["CallMemberExpression"](current, currentPart.replace('()', ''), _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["PLATFORM"].emptyArray);
                }
                else {
                    current = new _ast__WEBPACK_IMPORTED_MODULE_1__["AccessMemberExpression"](current, parts[index]);
                }
                index++;
            }
            return current;
        }
        catch (e) {
            throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].error(3, e);
        }
    }
}
/* eslint-disable @typescript-eslint/indent */
var BindingType;
(function (BindingType) {
    BindingType[BindingType["None"] = 0] = "None";
    BindingType[BindingType["IgnoreCustomAttr"] = 4096] = "IgnoreCustomAttr";
    BindingType[BindingType["Interpolation"] = 2048] = "Interpolation";
    BindingType[BindingType["IsRef"] = 5376] = "IsRef";
    BindingType[BindingType["IsIterator"] = 512] = "IsIterator";
    BindingType[BindingType["IsCustom"] = 256] = "IsCustom";
    BindingType[BindingType["IsFunction"] = 128] = "IsFunction";
    BindingType[BindingType["IsEvent"] = 64] = "IsEvent";
    BindingType[BindingType["IsProperty"] = 32] = "IsProperty";
    BindingType[BindingType["IsCommand"] = 16] = "IsCommand";
    BindingType[BindingType["IsPropertyCommand"] = 48] = "IsPropertyCommand";
    BindingType[BindingType["IsEventCommand"] = 80] = "IsEventCommand";
    BindingType[BindingType["DelegationStrategyDelta"] = 6] = "DelegationStrategyDelta";
    BindingType[BindingType["Command"] = 15] = "Command";
    BindingType[BindingType["OneTimeCommand"] = 49] = "OneTimeCommand";
    BindingType[BindingType["ToViewCommand"] = 50] = "ToViewCommand";
    BindingType[BindingType["FromViewCommand"] = 51] = "FromViewCommand";
    BindingType[BindingType["TwoWayCommand"] = 52] = "TwoWayCommand";
    BindingType[BindingType["BindCommand"] = 53] = "BindCommand";
    BindingType[BindingType["TriggerCommand"] = 4182] = "TriggerCommand";
    BindingType[BindingType["CaptureCommand"] = 4183] = "CaptureCommand";
    BindingType[BindingType["DelegateCommand"] = 4184] = "DelegateCommand";
    BindingType[BindingType["CallCommand"] = 153] = "CallCommand";
    BindingType[BindingType["OptionsCommand"] = 26] = "OptionsCommand";
    BindingType[BindingType["ForCommand"] = 539] = "ForCommand";
    BindingType[BindingType["CustomCommand"] = 284] = "CustomCommand";
})(BindingType || (BindingType = {}));
/* eslint-enable @typescript-eslint/indent */
//# sourceMappingURL=expression-parser.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esnext/binding/interpolation-binding.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esnext/binding/interpolation-binding.js ***!
  \************************************************************************************/
/*! exports provided: MultiInterpolationBinding, InterpolationBinding */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MultiInterpolationBinding", function() { return MultiInterpolationBinding; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "InterpolationBinding", function() { return InterpolationBinding; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _flags__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../flags */ "./node_modules/@aurelia/runtime/dist/esnext/flags.js");
/* harmony import */ var _observation_observer_locator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../observation/observer-locator */ "./node_modules/@aurelia/runtime/dist/esnext/observation/observer-locator.js");
/* harmony import */ var _connectable__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./connectable */ "./node_modules/@aurelia/runtime/dist/esnext/binding/connectable.js");





const { toView, oneTime } = _flags__WEBPACK_IMPORTED_MODULE_2__["BindingMode"];
class MultiInterpolationBinding {
    constructor(observerLocator, interpolation, target, targetProperty, mode, locator) {
        this.observerLocator = observerLocator;
        this.interpolation = interpolation;
        this.target = target;
        this.targetProperty = targetProperty;
        this.mode = mode;
        this.locator = locator;
        this.interceptor = this;
        this.$state = 0 /* none */;
        this.$scope = void 0;
        // Note: the child expressions of an Interpolation expression are full Aurelia expressions, meaning they may include
        // value converters and binding behaviors.
        // Each expression represents one ${interpolation}, and for each we create a child TextBinding unless there is only one,
        // in which case the renderer will create the TextBinding directly
        const expressions = interpolation.expressions;
        const parts = this.parts = Array(expressions.length);
        for (let i = 0, ii = expressions.length; i < ii; ++i) {
            parts[i] = new InterpolationBinding(expressions[i], interpolation, target, targetProperty, mode, observerLocator, locator, i === 0);
        }
    }
    ;
    $bind(flags, scope, part) {
        if (this.$state & 4 /* isBound */) {
            if (this.$scope === scope) {
                return;
            }
            this.interceptor.$unbind(flags);
        }
        this.$state |= 4 /* isBound */;
        this.$scope = scope;
        this.part = part;
        const parts = this.parts;
        for (let i = 0, ii = parts.length; i < ii; ++i) {
            parts[i].interceptor.$bind(flags, scope, part);
        }
    }
    $unbind(flags) {
        if (!(this.$state & 4 /* isBound */)) {
            return;
        }
        this.$state &= ~4 /* isBound */;
        this.$scope = void 0;
        const parts = this.parts;
        for (let i = 0, ii = parts.length; i < ii; ++i) {
            parts[i].interceptor.$unbind(flags);
        }
    }
}
let InterpolationBinding = class InterpolationBinding {
    constructor(sourceExpression, interpolation, target, targetProperty, mode, observerLocator, locator, isFirst) {
        this.sourceExpression = sourceExpression;
        this.interpolation = interpolation;
        this.target = target;
        this.targetProperty = targetProperty;
        this.mode = mode;
        this.observerLocator = observerLocator;
        this.locator = locator;
        this.isFirst = isFirst;
        this.interceptor = this;
        this.$state = 0 /* none */;
        _connectable__WEBPACK_IMPORTED_MODULE_4__["connectable"].assignIdTo(this);
        this.targetObserver = observerLocator.getAccessor(0 /* none */, target, targetProperty);
    }
    updateTarget(value, flags) {
        this.targetObserver.setValue(value, flags | 16 /* updateTargetInstance */);
    }
    handleChange(_newValue, _previousValue, flags) {
        if (!(this.$state & 4 /* isBound */)) {
            return;
        }
        const previousValue = this.targetObserver.getValue();
        const newValue = this.interpolation.evaluate(flags, this.$scope, this.locator, this.part);
        if (newValue !== previousValue) {
            this.interceptor.updateTarget(newValue, flags);
        }
        if ((this.mode & oneTime) === 0) {
            this.version++;
            this.sourceExpression.connect(flags, this.$scope, this.interceptor, this.part);
            this.interceptor.unobserve(false);
        }
    }
    $bind(flags, scope, part) {
        if (this.$state & 4 /* isBound */) {
            if (this.$scope === scope) {
                return;
            }
            this.interceptor.$unbind(flags);
        }
        this.$state |= 4 /* isBound */;
        this.$scope = scope;
        this.part = part;
        const sourceExpression = this.sourceExpression;
        if (sourceExpression.bind) {
            sourceExpression.bind(flags, scope, this.interceptor);
        }
        if (this.mode !== _flags__WEBPACK_IMPORTED_MODULE_2__["BindingMode"].oneTime && this.targetObserver.bind) {
            this.targetObserver.bind(flags);
        }
        // since the interpolation already gets the whole value, we only need to let the first
        // text binding do the update if there are multiple
        if (this.isFirst) {
            this.interceptor.updateTarget(this.interpolation.evaluate(flags, scope, this.locator, part), flags);
        }
        if (this.mode & toView) {
            sourceExpression.connect(flags, scope, this.interceptor, part);
        }
    }
    $unbind(flags) {
        if (!(this.$state & 4 /* isBound */)) {
            return;
        }
        this.$state &= ~4 /* isBound */;
        const sourceExpression = this.sourceExpression;
        if (sourceExpression.unbind) {
            sourceExpression.unbind(flags, this.$scope, this.interceptor);
        }
        if (this.targetObserver.unbind) {
            this.targetObserver.unbind(flags);
        }
        this.$scope = void 0;
        this.interceptor.unobserve(true);
    }
};
InterpolationBinding = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_connectable__WEBPACK_IMPORTED_MODULE_4__["connectable"])(),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object, Object, Object, String, Number, Object, Object, Boolean])
], InterpolationBinding);

//# sourceMappingURL=interpolation-binding.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esnext/binding/let-binding.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esnext/binding/let-binding.js ***!
  \**************************************************************************/
/*! exports provided: LetBinding */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LetBinding", function() { return LetBinding; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _lifecycle__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lifecycle */ "./node_modules/@aurelia/runtime/dist/esnext/lifecycle.js");
/* harmony import */ var _observation_observer_locator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../observation/observer-locator */ "./node_modules/@aurelia/runtime/dist/esnext/observation/observer-locator.js");
/* harmony import */ var _connectable__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./connectable */ "./node_modules/@aurelia/runtime/dist/esnext/binding/connectable.js");





let LetBinding = class LetBinding {
    constructor(sourceExpression, targetProperty, observerLocator, locator, toBindingContext = false) {
        this.sourceExpression = sourceExpression;
        this.targetProperty = targetProperty;
        this.observerLocator = observerLocator;
        this.locator = locator;
        this.toBindingContext = toBindingContext;
        this.interceptor = this;
        this.$state = 0 /* none */;
        this.$scope = void 0;
        this.target = null;
        _connectable__WEBPACK_IMPORTED_MODULE_4__["connectable"].assignIdTo(this);
        this.$lifecycle = locator.get(_lifecycle__WEBPACK_IMPORTED_MODULE_2__["ILifecycle"]);
    }
    handleChange(_newValue, _previousValue, flags) {
        if (!(this.$state & 4 /* isBound */)) {
            return;
        }
        if (flags & 16 /* updateTargetInstance */) {
            const { target, targetProperty } = this;
            const previousValue = target[targetProperty];
            const newValue = this.sourceExpression.evaluate(flags, this.$scope, this.locator, this.part);
            if (newValue !== previousValue) {
                target[targetProperty] = newValue;
            }
            return;
        }
        throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Reporter"].error(15, flags);
    }
    $bind(flags, scope, part) {
        if (this.$state & 4 /* isBound */) {
            if (this.$scope === scope) {
                return;
            }
            this.interceptor.$unbind(flags | 4096 /* fromBind */);
        }
        // add isBinding flag
        this.$state |= 1 /* isBinding */;
        this.$scope = scope;
        this.part = part;
        this.target = (this.toBindingContext ? scope.bindingContext : scope.overrideContext);
        const sourceExpression = this.sourceExpression;
        if (sourceExpression.bind) {
            sourceExpression.bind(flags, scope, this.interceptor);
        }
        // sourceExpression might have been changed during bind
        this.target[this.targetProperty] = this.sourceExpression.evaluate(flags | 4096 /* fromBind */, scope, this.locator, part);
        this.sourceExpression.connect(flags, scope, this.interceptor, part);
        // add isBound flag and remove isBinding flag
        this.$state |= 4 /* isBound */;
        this.$state &= ~1 /* isBinding */;
    }
    $unbind(flags) {
        if (!(this.$state & 4 /* isBound */)) {
            return;
        }
        // add isUnbinding flag
        this.$state |= 2 /* isUnbinding */;
        const sourceExpression = this.sourceExpression;
        if (sourceExpression.unbind) {
            sourceExpression.unbind(flags, this.$scope, this.interceptor);
        }
        this.$scope = void 0;
        this.interceptor.unobserve(true);
        // remove isBound and isUnbinding flags
        this.$state &= ~(4 /* isBound */ | 2 /* isUnbinding */);
    }
};
LetBinding = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_connectable__WEBPACK_IMPORTED_MODULE_4__["connectable"])(),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object, String, Object, Object, Boolean])
], LetBinding);

//# sourceMappingURL=let-binding.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esnext/binding/property-binding.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esnext/binding/property-binding.js ***!
  \*******************************************************************************/
/*! exports provided: PropertyBinding */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PropertyBinding", function() { return PropertyBinding; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _flags__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../flags */ "./node_modules/@aurelia/runtime/dist/esnext/flags.js");
/* harmony import */ var _lifecycle__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../lifecycle */ "./node_modules/@aurelia/runtime/dist/esnext/lifecycle.js");
/* harmony import */ var _observation_observer_locator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../observation/observer-locator */ "./node_modules/@aurelia/runtime/dist/esnext/observation/observer-locator.js");
/* harmony import */ var _ast__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./ast */ "./node_modules/@aurelia/runtime/dist/esnext/binding/ast.js");
/* harmony import */ var _connectable__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./connectable */ "./node_modules/@aurelia/runtime/dist/esnext/binding/connectable.js");







// BindingMode is not a const enum (and therefore not inlined), so assigning them to a variable to save a member accessor is a minor perf tweak
const { oneTime, toView, fromView } = _flags__WEBPACK_IMPORTED_MODULE_2__["BindingMode"];
// pre-combining flags for bitwise checks is a minor perf tweak
const toViewOrOneTime = toView | oneTime;
let PropertyBinding = class PropertyBinding {
    constructor(sourceExpression, target, targetProperty, mode, observerLocator, locator) {
        this.sourceExpression = sourceExpression;
        this.target = target;
        this.targetProperty = targetProperty;
        this.mode = mode;
        this.observerLocator = observerLocator;
        this.locator = locator;
        this.interceptor = this;
        this.$state = 0 /* none */;
        this.$scope = void 0;
        this.targetObserver = void 0;
        this.persistentFlags = 0 /* none */;
        _connectable__WEBPACK_IMPORTED_MODULE_6__["connectable"].assignIdTo(this);
        this.$lifecycle = locator.get(_lifecycle__WEBPACK_IMPORTED_MODULE_3__["ILifecycle"]);
    }
    ;
    updateTarget(value, flags) {
        flags |= this.persistentFlags;
        this.targetObserver.setValue(value, flags);
    }
    updateSource(value, flags) {
        flags |= this.persistentFlags;
        this.sourceExpression.assign(flags, this.$scope, this.locator, value, this.part);
    }
    handleChange(newValue, _previousValue, flags) {
        if ((this.$state & 4 /* isBound */) === 0) {
            return;
        }
        flags |= this.persistentFlags;
        if ((flags & 16 /* updateTargetInstance */) > 0) {
            const previousValue = this.targetObserver.getValue();
            // if the only observable is an AccessScope then we can assume the passed-in newValue is the correct and latest value
            if (this.sourceExpression.$kind !== 10082 /* AccessScope */ || this.observerSlots > 1) {
                newValue = this.sourceExpression.evaluate(flags, this.$scope, this.locator, this.part);
            }
            if (newValue !== previousValue) {
                this.interceptor.updateTarget(newValue, flags);
            }
            if ((this.mode & oneTime) === 0) {
                this.version++;
                this.sourceExpression.connect(flags, this.$scope, this.interceptor, this.part);
                this.interceptor.unobserve(false);
            }
            return;
        }
        if ((flags & 32 /* updateSourceExpression */) > 0) {
            if (newValue !== this.sourceExpression.evaluate(flags, this.$scope, this.locator, this.part)) {
                this.interceptor.updateSource(newValue, flags);
            }
            return;
        }
        throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Reporter"].error(15, flags);
    }
    $bind(flags, scope, part) {
        if (this.$state & 4 /* isBound */) {
            if (this.$scope === scope) {
                return;
            }
            this.interceptor.$unbind(flags | 4096 /* fromBind */);
        }
        // add isBinding flag
        this.$state |= 1 /* isBinding */;
        // Force property binding to always be strict
        flags |= 4 /* isStrictBindingStrategy */;
        // Store flags which we can only receive during $bind and need to pass on
        // to the AST during evaluate/connect/assign
        this.persistentFlags = flags & 2080374799 /* persistentBindingFlags */;
        this.$scope = scope;
        this.part = part;
        let sourceExpression = this.sourceExpression;
        if (Object(_ast__WEBPACK_IMPORTED_MODULE_5__["hasBind"])(sourceExpression)) {
            sourceExpression.bind(flags, scope, this.interceptor);
        }
        let targetObserver = this.targetObserver;
        if (!targetObserver) {
            if (this.mode & fromView) {
                targetObserver = this.targetObserver = this.observerLocator.getObserver(flags, this.target, this.targetProperty);
            }
            else {
                targetObserver = this.targetObserver = this.observerLocator.getAccessor(flags, this.target, this.targetProperty);
            }
        }
        if (this.mode !== _flags__WEBPACK_IMPORTED_MODULE_2__["BindingMode"].oneTime && targetObserver.bind) {
            targetObserver.bind(flags);
        }
        // during bind, binding behavior might have changed sourceExpression
        sourceExpression = this.sourceExpression;
        if (this.mode & toViewOrOneTime) {
            this.interceptor.updateTarget(sourceExpression.evaluate(flags, scope, this.locator, part), flags);
        }
        if (this.mode & toView) {
            sourceExpression.connect(flags, scope, this.interceptor, part);
        }
        if (this.mode & fromView) {
            targetObserver.subscribe(this.interceptor);
            if ((this.mode & toView) === 0) {
                this.interceptor.updateSource(targetObserver.getValue(), flags);
            }
            targetObserver[this.id] |= 32 /* updateSourceExpression */;
        }
        // add isBound flag and remove isBinding flag
        this.$state |= 4 /* isBound */;
        this.$state &= ~1 /* isBinding */;
    }
    $unbind(flags) {
        if (!(this.$state & 4 /* isBound */)) {
            return;
        }
        // add isUnbinding flag
        this.$state |= 2 /* isUnbinding */;
        // clear persistent flags
        this.persistentFlags = 0 /* none */;
        if (Object(_ast__WEBPACK_IMPORTED_MODULE_5__["hasUnbind"])(this.sourceExpression)) {
            this.sourceExpression.unbind(flags, this.$scope, this.interceptor);
        }
        this.$scope = void 0;
        if (this.targetObserver.unbind) {
            this.targetObserver.unbind(flags);
        }
        if (this.targetObserver.unsubscribe) {
            this.targetObserver.unsubscribe(this.interceptor);
            this.targetObserver[this.id] &= ~32 /* updateSourceExpression */;
        }
        this.interceptor.unobserve(true);
        // remove isBound and isUnbinding flags
        this.$state &= ~(4 /* isBound */ | 2 /* isUnbinding */);
    }
};
PropertyBinding = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_connectable__WEBPACK_IMPORTED_MODULE_6__["connectable"])(),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object, Object, String, Number, Object, Object])
], PropertyBinding);

//# sourceMappingURL=property-binding.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esnext/binding/ref-binding.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esnext/binding/ref-binding.js ***!
  \**************************************************************************/
/*! exports provided: RefBinding */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RefBinding", function() { return RefBinding; });
/* harmony import */ var _ast__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ast */ "./node_modules/@aurelia/runtime/dist/esnext/binding/ast.js");

class RefBinding {
    constructor(sourceExpression, target, locator) {
        this.sourceExpression = sourceExpression;
        this.target = target;
        this.locator = locator;
        this.interceptor = this;
        this.$state = 0 /* none */;
        this.$scope = void 0;
    }
    $bind(flags, scope, part) {
        if (this.$state & 4 /* isBound */) {
            if (this.$scope === scope) {
                return;
            }
            this.interceptor.$unbind(flags | 4096 /* fromBind */);
        }
        // add isBinding flag
        this.$state |= 1 /* isBinding */;
        this.$scope = scope;
        this.part = part;
        if (Object(_ast__WEBPACK_IMPORTED_MODULE_0__["hasBind"])(this.sourceExpression)) {
            this.sourceExpression.bind(flags, scope, this);
        }
        this.sourceExpression.assign(flags | 32 /* updateSourceExpression */, this.$scope, this.locator, this.target, part);
        // add isBound flag and remove isBinding flag
        this.$state |= 4 /* isBound */;
        this.$state &= ~1 /* isBinding */;
    }
    $unbind(flags) {
        if (!(this.$state & 4 /* isBound */)) {
            return;
        }
        // add isUnbinding flag
        this.$state |= 2 /* isUnbinding */;
        let sourceExpression = this.sourceExpression;
        if (sourceExpression.evaluate(flags, this.$scope, this.locator, this.part) === this.target) {
            sourceExpression.assign(flags, this.$scope, this.locator, null, this.part);
        }
        // source expression might have been modified durring assign, via a BB
        sourceExpression = this.sourceExpression;
        if (Object(_ast__WEBPACK_IMPORTED_MODULE_0__["hasUnbind"])(sourceExpression)) {
            sourceExpression.unbind(flags, this.$scope, this.interceptor);
        }
        this.$scope = void 0;
        // remove isBound and isUnbinding flags
        this.$state &= ~(4 /* isBound */ | 2 /* isUnbinding */);
    }
    observeProperty(flags, obj, propertyName) {
        return;
    }
    handleChange(newValue, previousValue, flags) {
        return;
    }
}
//# sourceMappingURL=ref-binding.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esnext/configuration.js":
/*!********************************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esnext/configuration.js ***!
  \********************************************************************/
/*! exports provided: IObserverLocatorRegistration, ILifecycleRegistration, IRendererRegistration, IStartTaskManagerRegistration, IViewLocatorRegistration, DefaultComponents, FrequentMutationsRegistration, InfrequentMutationsRegistration, ObserveShallowRegistration, IfRegistration, ElseRegistration, RepeatRegistration, ReplaceableRegistration, WithRegistration, SanitizeValueConverterRegistration, ViewValueConverterRegistration, DebounceBindingBehaviorRegistration, OneTimeBindingBehaviorRegistration, ToViewBindingBehaviorRegistration, FromViewBindingBehaviorRegistration, SignalBindingBehaviorRegistration, ThrottleBindingBehaviorRegistration, TwoWayBindingBehaviorRegistration, DefaultResources, CallBindingRendererRegistration, CustomAttributeRendererRegistration, CustomElementRendererRegistration, InterpolationBindingRendererRegistration, IteratorBindingRendererRegistration, LetElementRendererRegistration, PropertyBindingRendererRegistration, RefBindingRendererRegistration, SetPropertyRendererRegistration, TemplateControllerRendererRegistration, DefaultRenderers, RuntimeConfiguration */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IObserverLocatorRegistration", function() { return IObserverLocatorRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ILifecycleRegistration", function() { return ILifecycleRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IRendererRegistration", function() { return IRendererRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IStartTaskManagerRegistration", function() { return IStartTaskManagerRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IViewLocatorRegistration", function() { return IViewLocatorRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DefaultComponents", function() { return DefaultComponents; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FrequentMutationsRegistration", function() { return FrequentMutationsRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "InfrequentMutationsRegistration", function() { return InfrequentMutationsRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ObserveShallowRegistration", function() { return ObserveShallowRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IfRegistration", function() { return IfRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ElseRegistration", function() { return ElseRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RepeatRegistration", function() { return RepeatRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ReplaceableRegistration", function() { return ReplaceableRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WithRegistration", function() { return WithRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SanitizeValueConverterRegistration", function() { return SanitizeValueConverterRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ViewValueConverterRegistration", function() { return ViewValueConverterRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DebounceBindingBehaviorRegistration", function() { return DebounceBindingBehaviorRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OneTimeBindingBehaviorRegistration", function() { return OneTimeBindingBehaviorRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ToViewBindingBehaviorRegistration", function() { return ToViewBindingBehaviorRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FromViewBindingBehaviorRegistration", function() { return FromViewBindingBehaviorRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SignalBindingBehaviorRegistration", function() { return SignalBindingBehaviorRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ThrottleBindingBehaviorRegistration", function() { return ThrottleBindingBehaviorRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TwoWayBindingBehaviorRegistration", function() { return TwoWayBindingBehaviorRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DefaultResources", function() { return DefaultResources; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CallBindingRendererRegistration", function() { return CallBindingRendererRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CustomAttributeRendererRegistration", function() { return CustomAttributeRendererRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CustomElementRendererRegistration", function() { return CustomElementRendererRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "InterpolationBindingRendererRegistration", function() { return InterpolationBindingRendererRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IteratorBindingRendererRegistration", function() { return IteratorBindingRendererRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LetElementRendererRegistration", function() { return LetElementRendererRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PropertyBindingRendererRegistration", function() { return PropertyBindingRendererRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RefBindingRendererRegistration", function() { return RefBindingRendererRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SetPropertyRendererRegistration", function() { return SetPropertyRendererRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TemplateControllerRendererRegistration", function() { return TemplateControllerRendererRegistration; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DefaultRenderers", function() { return DefaultRenderers; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RuntimeConfiguration", function() { return RuntimeConfiguration; });
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _lifecycle__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./lifecycle */ "./node_modules/@aurelia/runtime/dist/esnext/lifecycle.js");
/* harmony import */ var _lifecycle_task__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./lifecycle-task */ "./node_modules/@aurelia/runtime/dist/esnext/lifecycle-task.js");
/* harmony import */ var _observation_observer_locator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./observation/observer-locator */ "./node_modules/@aurelia/runtime/dist/esnext/observation/observer-locator.js");
/* harmony import */ var _renderer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./renderer */ "./node_modules/@aurelia/runtime/dist/esnext/renderer.js");
/* harmony import */ var _resources_binding_behaviors_binding_mode__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./resources/binding-behaviors/binding-mode */ "./node_modules/@aurelia/runtime/dist/esnext/resources/binding-behaviors/binding-mode.js");
/* harmony import */ var _resources_binding_behaviors_debounce__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./resources/binding-behaviors/debounce */ "./node_modules/@aurelia/runtime/dist/esnext/resources/binding-behaviors/debounce.js");
/* harmony import */ var _resources_binding_behaviors_signals__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./resources/binding-behaviors/signals */ "./node_modules/@aurelia/runtime/dist/esnext/resources/binding-behaviors/signals.js");
/* harmony import */ var _resources_binding_behaviors_throttle__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./resources/binding-behaviors/throttle */ "./node_modules/@aurelia/runtime/dist/esnext/resources/binding-behaviors/throttle.js");
/* harmony import */ var _resources_custom_attributes_flags__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./resources/custom-attributes/flags */ "./node_modules/@aurelia/runtime/dist/esnext/resources/custom-attributes/flags.js");
/* harmony import */ var _resources_custom_attributes_if__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./resources/custom-attributes/if */ "./node_modules/@aurelia/runtime/dist/esnext/resources/custom-attributes/if.js");
/* harmony import */ var _resources_custom_attributes_repeat__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./resources/custom-attributes/repeat */ "./node_modules/@aurelia/runtime/dist/esnext/resources/custom-attributes/repeat.js");
/* harmony import */ var _resources_custom_attributes_replaceable__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./resources/custom-attributes/replaceable */ "./node_modules/@aurelia/runtime/dist/esnext/resources/custom-attributes/replaceable.js");
/* harmony import */ var _resources_custom_attributes_with__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./resources/custom-attributes/with */ "./node_modules/@aurelia/runtime/dist/esnext/resources/custom-attributes/with.js");
/* harmony import */ var _resources_value_converters_sanitize__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./resources/value-converters/sanitize */ "./node_modules/@aurelia/runtime/dist/esnext/resources/value-converters/sanitize.js");
/* harmony import */ var _resources_value_converters_view__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./resources/value-converters/view */ "./node_modules/@aurelia/runtime/dist/esnext/resources/value-converters/view.js");
/* harmony import */ var _templating_view__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./templating/view */ "./node_modules/@aurelia/runtime/dist/esnext/templating/view.js");
/* harmony import */ var _aurelia_scheduler__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @aurelia/scheduler */ "./node_modules/@aurelia/scheduler/dist/esnext/index.js");


















const IObserverLocatorRegistration = _observation_observer_locator__WEBPACK_IMPORTED_MODULE_3__["ObserverLocator"];
const ILifecycleRegistration = _lifecycle__WEBPACK_IMPORTED_MODULE_1__["Lifecycle"];
const IRendererRegistration = _renderer__WEBPACK_IMPORTED_MODULE_4__["Renderer"];
const IStartTaskManagerRegistration = _lifecycle_task__WEBPACK_IMPORTED_MODULE_2__["StartTaskManager"];
const IViewLocatorRegistration = _templating_view__WEBPACK_IMPORTED_MODULE_16__["ViewLocator"];
/**
 * Default implementations for the following interfaces:
 * - `IObserverLocator`
 * - `ILifecycle`
 * - `IRenderer`
 * - `IStartTaskManager`
 * - `IViewLocator`
 * - `IClockRegistration`
 * - `ISchedulerRegistration`
 */
const DefaultComponents = [
    IObserverLocatorRegistration,
    ILifecycleRegistration,
    IRendererRegistration,
    IStartTaskManagerRegistration,
    IViewLocatorRegistration,
    _aurelia_scheduler__WEBPACK_IMPORTED_MODULE_17__["Now"],
];
const FrequentMutationsRegistration = _resources_custom_attributes_flags__WEBPACK_IMPORTED_MODULE_9__["FrequentMutations"];
const InfrequentMutationsRegistration = _resources_custom_attributes_flags__WEBPACK_IMPORTED_MODULE_9__["InfrequentMutations"];
const ObserveShallowRegistration = _resources_custom_attributes_flags__WEBPACK_IMPORTED_MODULE_9__["ObserveShallow"];
const IfRegistration = _resources_custom_attributes_if__WEBPACK_IMPORTED_MODULE_10__["If"];
const ElseRegistration = _resources_custom_attributes_if__WEBPACK_IMPORTED_MODULE_10__["Else"];
const RepeatRegistration = _resources_custom_attributes_repeat__WEBPACK_IMPORTED_MODULE_11__["Repeat"];
const ReplaceableRegistration = _resources_custom_attributes_replaceable__WEBPACK_IMPORTED_MODULE_12__["Replaceable"];
const WithRegistration = _resources_custom_attributes_with__WEBPACK_IMPORTED_MODULE_13__["With"];
const SanitizeValueConverterRegistration = _resources_value_converters_sanitize__WEBPACK_IMPORTED_MODULE_14__["SanitizeValueConverter"];
const ViewValueConverterRegistration = _resources_value_converters_view__WEBPACK_IMPORTED_MODULE_15__["ViewValueConverter"];
const DebounceBindingBehaviorRegistration = _resources_binding_behaviors_debounce__WEBPACK_IMPORTED_MODULE_6__["DebounceBindingBehavior"];
const OneTimeBindingBehaviorRegistration = _resources_binding_behaviors_binding_mode__WEBPACK_IMPORTED_MODULE_5__["OneTimeBindingBehavior"];
const ToViewBindingBehaviorRegistration = _resources_binding_behaviors_binding_mode__WEBPACK_IMPORTED_MODULE_5__["ToViewBindingBehavior"];
const FromViewBindingBehaviorRegistration = _resources_binding_behaviors_binding_mode__WEBPACK_IMPORTED_MODULE_5__["FromViewBindingBehavior"];
const SignalBindingBehaviorRegistration = _resources_binding_behaviors_signals__WEBPACK_IMPORTED_MODULE_7__["SignalBindingBehavior"];
const ThrottleBindingBehaviorRegistration = _resources_binding_behaviors_throttle__WEBPACK_IMPORTED_MODULE_8__["ThrottleBindingBehavior"];
const TwoWayBindingBehaviorRegistration = _resources_binding_behaviors_binding_mode__WEBPACK_IMPORTED_MODULE_5__["TwoWayBindingBehavior"];
/**
 * Default resources:
 * - Template controllers (`if`/`else`, `repeat`, `replaceable`, `with`)
 * - Value Converters (`sanitize`)
 * - Binding Behaviors (`oneTime`, `toView`, `fromView`, `twoWay`, `signal`, `debounce`, `throttle`)
 */
const DefaultResources = [
    FrequentMutationsRegistration,
    InfrequentMutationsRegistration,
    ObserveShallowRegistration,
    IfRegistration,
    ElseRegistration,
    RepeatRegistration,
    ReplaceableRegistration,
    WithRegistration,
    SanitizeValueConverterRegistration,
    ViewValueConverterRegistration,
    DebounceBindingBehaviorRegistration,
    OneTimeBindingBehaviorRegistration,
    ToViewBindingBehaviorRegistration,
    FromViewBindingBehaviorRegistration,
    SignalBindingBehaviorRegistration,
    ThrottleBindingBehaviorRegistration,
    TwoWayBindingBehaviorRegistration
];
const CallBindingRendererRegistration = _renderer__WEBPACK_IMPORTED_MODULE_4__["CallBindingRenderer"];
const CustomAttributeRendererRegistration = _renderer__WEBPACK_IMPORTED_MODULE_4__["CustomAttributeRenderer"];
const CustomElementRendererRegistration = _renderer__WEBPACK_IMPORTED_MODULE_4__["CustomElementRenderer"];
const InterpolationBindingRendererRegistration = _renderer__WEBPACK_IMPORTED_MODULE_4__["InterpolationBindingRenderer"];
const IteratorBindingRendererRegistration = _renderer__WEBPACK_IMPORTED_MODULE_4__["IteratorBindingRenderer"];
const LetElementRendererRegistration = _renderer__WEBPACK_IMPORTED_MODULE_4__["LetElementRenderer"];
const PropertyBindingRendererRegistration = _renderer__WEBPACK_IMPORTED_MODULE_4__["PropertyBindingRenderer"];
const RefBindingRendererRegistration = _renderer__WEBPACK_IMPORTED_MODULE_4__["RefBindingRenderer"];
const SetPropertyRendererRegistration = _renderer__WEBPACK_IMPORTED_MODULE_4__["SetPropertyRenderer"];
const TemplateControllerRendererRegistration = _renderer__WEBPACK_IMPORTED_MODULE_4__["TemplateControllerRenderer"];
/**
 * Default renderers for:
 * - PropertyBinding: `bind`, `one-time`, `to-view`, `from-view`, `two-way`
 * - IteratorBinding: `for`
 * - CallBinding: `call`
 * - RefBinding: `ref`
 * - InterpolationBinding: `${}`
 * - SetProperty
 * - `customElement` hydration
 * - `customAttribute` hydration
 * - `templateController` hydration
 * - `let` element hydration
 */
const DefaultRenderers = [
    PropertyBindingRendererRegistration,
    IteratorBindingRendererRegistration,
    CallBindingRendererRegistration,
    RefBindingRendererRegistration,
    InterpolationBindingRendererRegistration,
    SetPropertyRendererRegistration,
    CustomElementRendererRegistration,
    CustomAttributeRendererRegistration,
    TemplateControllerRendererRegistration,
    LetElementRendererRegistration
];
/**
 * A DI configuration object containing environment/runtime-agnostic registrations:
 * - `DefaultComponents`
 * - `DefaultResources`
 * - `DefaultRenderers`
 */
const RuntimeConfiguration = {
    /**
     * Apply this configuration to the provided container.
     */
    register(container) {
        return container.register(...DefaultComponents, ...DefaultResources, ...DefaultRenderers);
    },
    /**
     * Create a new container with this configuration applied to it.
     */
    createContainer() {
        return this.register(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["DI"].createContainer());
    }
};
//# sourceMappingURL=configuration.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esnext/definitions.js":
/*!******************************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esnext/definitions.js ***!
  \******************************************************************/
/*! exports provided: TargetedInstructionType, mergeParts, ITargetedInstruction, isTargetedInstruction, HooksDefinition, alias, registerAliases */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TargetedInstructionType", function() { return TargetedInstructionType; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mergeParts", function() { return mergeParts; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ITargetedInstruction", function() { return ITargetedInstruction; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isTargetedInstruction", function() { return isTargetedInstruction; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HooksDefinition", function() { return HooksDefinition; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "alias", function() { return alias; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "registerAliases", function() { return registerAliases; });
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");

/**
 * TargetedInstructionType enum values become the property names for the associated renderers when they are injected
 * into the `Renderer`.
 *
 * Additional instruction types can be added as long as they are 2 characters long and do not clash with existing ones.
 *
 * By convention, the instruction types for a particular runtime start with the same first letter, and the second letter
 * starts counting from letter `a`. The standard runtime instruction types all start with the letter `r`.
 */
var TargetedInstructionType;
(function (TargetedInstructionType) {
    TargetedInstructionType["hydrateElement"] = "ra";
    TargetedInstructionType["hydrateAttribute"] = "rb";
    TargetedInstructionType["hydrateTemplateController"] = "rc";
    TargetedInstructionType["hydrateLetElement"] = "rd";
    TargetedInstructionType["setProperty"] = "re";
    TargetedInstructionType["interpolation"] = "rf";
    TargetedInstructionType["propertyBinding"] = "rg";
    TargetedInstructionType["callBinding"] = "rh";
    TargetedInstructionType["letBinding"] = "ri";
    TargetedInstructionType["refBinding"] = "rj";
    TargetedInstructionType["iteratorBinding"] = "rk";
})(TargetedInstructionType || (TargetedInstructionType = {}));
const parentPartsOwnPartsLookup = new WeakMap();
/**
 * Efficiently merge parts, performing the minimal amount of work / using the minimal amount of memory.
 *
 * If either of the two part records is undefined, the other will simply be returned.
 *
 * If both are undefined, undefined will be returned.
 *
 * If neither are undefined, a new object will be returned where parts of the second value will be written last (and thus may overwrite duplicate named parts).
 *
 * This function is idempotent via a WeakMap cache: results are cached and if the same two variables are provided again, the same object will be returned.
 */
function mergeParts(parentParts, ownParts) {
    if (parentParts === ownParts) {
        return parentParts;
    }
    if (parentParts === void 0) {
        return ownParts;
    }
    if (ownParts === void 0) {
        return parentParts;
    }
    let ownPartsLookup = parentPartsOwnPartsLookup.get(parentParts);
    if (ownPartsLookup === void 0) {
        parentPartsOwnPartsLookup.set(parentParts, ownPartsLookup = new WeakMap());
    }
    let mergedParts = ownPartsLookup.get(ownParts);
    if (mergedParts === void 0) {
        ownPartsLookup.set(ownParts, mergedParts = {
            ...parentParts,
            ...ownParts,
        });
    }
    return mergedParts;
}
const ITargetedInstruction = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["DI"].createInterface('ITargetedInstruction').noDefault();
function isTargetedInstruction(value) {
    const type = value.type;
    return typeof type === 'string' && type.length === 2;
}
class HooksDefinition {
    constructor(target) {
        this.hasCreate = 'create' in target;
        this.hasBeforeCompile = 'beforeCompile' in target;
        this.hasAfterCompile = 'afterCompile' in target;
        this.hasAfterCompileChildren = 'afterCompileChildren' in target;
        this.hasBeforeBind = 'beforeBind' in target;
        this.hasAfterBind = 'afterBind' in target;
        this.hasBeforeUnbind = 'beforeUnbind' in target;
        this.hasAfterUnbind = 'afterUnbind' in target;
        this.hasBeforeAttach = 'beforeAttach' in target;
        this.hasAfterAttach = 'afterAttach' in target;
        this.hasBeforeDetach = 'beforeDetach' in target;
        this.hasAfterDetach = 'afterDetach' in target;
        this.hasCaching = 'caching' in target;
    }
}
HooksDefinition.none = new HooksDefinition({});
function alias(...aliases) {
    return function (target) {
        const key = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Protocol"].annotation.keyFor('aliases');
        const existing = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Metadata"].getOwn(key, target);
        if (existing === void 0) {
            _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Metadata"].define(key, aliases, target);
        }
        else {
            existing.push(...aliases);
        }
    };
}
function registerAliases(aliases, resource, key, container) {
    for (let i = 0, ii = aliases.length; i < ii; ++i) {
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Registration"].aliasTo(key, resource.keyFrom(aliases[i])).register(container);
    }
}
//# sourceMappingURL=definitions.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esnext/dom.js":
/*!**********************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esnext/dom.js ***!
  \**********************************************************/
/*! exports provided: INode, IRenderLocation, IDOM, DOM, NodeSequence */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "INode", function() { return INode; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IRenderLocation", function() { return IRenderLocation; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IDOM", function() { return IDOM; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DOM", function() { return DOM; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NodeSequence", function() { return NodeSequence; });
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");

const INode = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["DI"].createInterface('INode').noDefault();
const IRenderLocation = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["DI"].createInterface('IRenderLocation').noDefault();
const IDOM = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["DI"].createInterface('IDOM').noDefault();
const ni = function (...args) {
    throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].error(1000); // TODO: create error code (not implemented exception)
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
}; // this function doesn't need typing because it is never directly called
const niDOM = {
    addEventListener: ni,
    appendChild: ni,
    cloneNode: ni,
    convertToRenderLocation: ni,
    createDocumentFragment: ni,
    createNodeSequence: ni,
    createElement: ni,
    createCustomEvent: ni,
    dispatchEvent: ni,
    createNodeObserver: ni,
    createTemplate: ni,
    createTextNode: ni,
    getEffectiveParentNode: ni,
    setEffectiveParentNode: ni,
    insertBefore: ni,
    isMarker: ni,
    isNodeInstance: ni,
    isRenderLocation: ni,
    makeTarget: ni,
    registerElementResolver: ni,
    remove: ni,
    removeEventListener: ni,
    setAttribute: ni
};
const DOM = {
    ...niDOM,
    scheduler: (void 0),
    get isInitialized() {
        return Reflect.get(this, '$initialized') === true;
    },
    initialize(dom) {
        if (this.isInitialized) {
            throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].error(1001); // TODO: create error code (already initialized, check isInitialized property and call destroy() if you want to assign a different dom)
        }
        const descriptors = {};
        const protos = [dom];
        let proto = Object.getPrototypeOf(dom);
        while (proto && proto !== Object.prototype) {
            protos.unshift(proto);
            proto = Object.getPrototypeOf(proto);
        }
        for (proto of protos) {
            Object.assign(descriptors, Object.getOwnPropertyDescriptors(proto));
        }
        const keys = [];
        let key;
        let descriptor;
        for (key in descriptors) {
            descriptor = descriptors[key];
            if (descriptor.configurable && descriptor.writable) {
                Reflect.defineProperty(this, key, descriptor);
                keys.push(key);
            }
        }
        Reflect.set(this, '$domKeys', keys);
        Reflect.set(this, '$initialized', true);
    },
    destroy() {
        if (!this.isInitialized) {
            throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].error(1002); // TODO: create error code (already destroyed)
        }
        const keys = Reflect.get(this, '$domKeys');
        keys.forEach(key => {
            Reflect.deleteProperty(this, key);
        });
        Object.assign(this, niDOM);
        Reflect.set(this, '$domKeys', _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["PLATFORM"].emptyArray);
        Reflect.set(this, '$initialized', false);
    }
};
// This is an implementation of INodeSequence that represents "no DOM" to render.
// It's used in various places to avoid null and to encode
// the explicit idea of "no view".
const emptySequence = {
    isMounted: false,
    isLinked: false,
    next: void 0,
    childNodes: _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["PLATFORM"].emptyArray,
    firstChild: null,
    lastChild: null,
    findTargets() { return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["PLATFORM"].emptyArray; },
    insertBefore(refNode) { },
    appendTo(parent) { },
    remove() { },
    addToLinked() { },
    unlink() { },
    link(next) { },
};
const NodeSequence = {
    empty: emptySequence
};
//# sourceMappingURL=dom.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esnext/flags.js":
/*!************************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esnext/flags.js ***!
  \************************************************************/
/*! exports provided: BindingMode, BindingStrategy, ensureValidStrategy, State, LifecycleFlags, ExpressionKind */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BindingMode", function() { return BindingMode; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BindingStrategy", function() { return BindingStrategy; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ensureValidStrategy", function() { return ensureValidStrategy; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "State", function() { return State; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LifecycleFlags", function() { return LifecycleFlags; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ExpressionKind", function() { return ExpressionKind; });
/*
* Note: the oneTime binding now has a non-zero value for 2 reasons:
*  - plays nicer with bitwise operations (more consistent code, more explicit settings)
*  - allows for potentially having something like BindingMode.oneTime | BindingMode.fromView, where an initial value is set once to the view but updates from the view also propagate back to the view model
*
* Furthermore, the "default" mode would be for simple ".bind" expressions to make it explicit for our logic that the default is being used.
* This essentially adds extra information which binding could use to do smarter things and allows bindingBehaviors that add a mode instead of simply overwriting it
*/
var BindingMode;
(function (BindingMode) {
    BindingMode[BindingMode["oneTime"] = 1] = "oneTime";
    BindingMode[BindingMode["toView"] = 2] = "toView";
    BindingMode[BindingMode["fromView"] = 4] = "fromView";
    BindingMode[BindingMode["twoWay"] = 6] = "twoWay";
    BindingMode[BindingMode["default"] = 8] = "default";
})(BindingMode || (BindingMode = {}));
var BindingStrategy;
(function (BindingStrategy) {
    /**
     * Configures all components "below" this one to operate in getterSetter binding mode.
     * This is the default; if no strategy is specified, this one is implied.
     *
     * This strategy is the most compatible, convenient and has the best performance on frequently updated bindings on components that are infrequently replaced.
     * However, it also consumes the most resources on initialization.
     */
    BindingStrategy[BindingStrategy["getterSetter"] = 1] = "getterSetter";
    /**
     * Configures all components "below" this one to operate in proxy binding mode.
     * No getters/setters are created.
     *
     * This strategy consumes significantly fewer resources than `getterSetter` on initialization and has the best performance on infrequently updated bindings on
     * components that are frequently replaced.
     * However, it consumes more resources on updates.
     */
    BindingStrategy[BindingStrategy["proxies"] = 2] = "proxies";
})(BindingStrategy || (BindingStrategy = {}));
const mandatoryStrategy = 1 /* getterSetter */ | 2 /* proxies */;
function ensureValidStrategy(strategy) {
    if ((strategy & mandatoryStrategy) === 0) {
        // TODO: probably want to validate that user isn't trying to mix getterSetter/proxy
        // TODO: also need to make sure that strategy can be changed away from proxies inside the component tree (not here though, but just making a note)
        return strategy | 1 /* getterSetter */;
    }
    return strategy;
}
var State;
(function (State) {
    State[State["none"] = 0] = "none";
    State[State["isBinding"] = 1] = "isBinding";
    State[State["isUnbinding"] = 2] = "isUnbinding";
    State[State["isBound"] = 4] = "isBound";
    State[State["isBoundOrBinding"] = 5] = "isBoundOrBinding";
    State[State["isBoundOrUnbinding"] = 6] = "isBoundOrUnbinding";
    State[State["isAttaching"] = 8] = "isAttaching";
    State[State["isDetaching"] = 16] = "isDetaching";
    State[State["isAttached"] = 32] = "isAttached";
    State[State["isAttachedOrAttaching"] = 40] = "isAttachedOrAttaching";
    State[State["isAttachedOrDetaching"] = 48] = "isAttachedOrDetaching";
    State[State["isMounted"] = 64] = "isMounted";
    State[State["hasLockedScope"] = 256] = "hasLockedScope";
    State[State["canBeCached"] = 512] = "canBeCached";
})(State || (State = {}));
var LifecycleFlags;
(function (LifecycleFlags) {
    LifecycleFlags[LifecycleFlags["none"] = 0] = "none";
    // Bitmask for flags that need to be stored on a binding during $bind for mutation
    // callbacks outside of $bind
    LifecycleFlags[LifecycleFlags["persistentBindingFlags"] = 2080374799] = "persistentBindingFlags";
    LifecycleFlags[LifecycleFlags["allowParentScopeTraversal"] = 67108864] = "allowParentScopeTraversal";
    LifecycleFlags[LifecycleFlags["observeLeafPropertiesOnly"] = 134217728] = "observeLeafPropertiesOnly";
    LifecycleFlags[LifecycleFlags["targetObserverFlags"] = 805306383] = "targetObserverFlags";
    LifecycleFlags[LifecycleFlags["noTargetObserverQueue"] = 268435456] = "noTargetObserverQueue";
    LifecycleFlags[LifecycleFlags["persistentTargetObserverQueue"] = 536870912] = "persistentTargetObserverQueue";
    LifecycleFlags[LifecycleFlags["secondaryExpression"] = 1073741824] = "secondaryExpression";
    LifecycleFlags[LifecycleFlags["bindingStrategy"] = 15] = "bindingStrategy";
    LifecycleFlags[LifecycleFlags["getterSetterStrategy"] = 1] = "getterSetterStrategy";
    LifecycleFlags[LifecycleFlags["proxyStrategy"] = 2] = "proxyStrategy";
    LifecycleFlags[LifecycleFlags["isStrictBindingStrategy"] = 4] = "isStrictBindingStrategy";
    LifecycleFlags[LifecycleFlags["update"] = 48] = "update";
    LifecycleFlags[LifecycleFlags["updateTargetInstance"] = 16] = "updateTargetInstance";
    LifecycleFlags[LifecycleFlags["updateSourceExpression"] = 32] = "updateSourceExpression";
    LifecycleFlags[LifecycleFlags["from"] = 524224] = "from";
    LifecycleFlags[LifecycleFlags["fromFlush"] = 960] = "fromFlush";
    LifecycleFlags[LifecycleFlags["fromAsyncFlush"] = 64] = "fromAsyncFlush";
    LifecycleFlags[LifecycleFlags["fromSyncFlush"] = 128] = "fromSyncFlush";
    LifecycleFlags[LifecycleFlags["fromTick"] = 256] = "fromTick";
    LifecycleFlags[LifecycleFlags["fromBatch"] = 512] = "fromBatch";
    LifecycleFlags[LifecycleFlags["fromStartTask"] = 1024] = "fromStartTask";
    LifecycleFlags[LifecycleFlags["fromStopTask"] = 2048] = "fromStopTask";
    LifecycleFlags[LifecycleFlags["fromBind"] = 4096] = "fromBind";
    LifecycleFlags[LifecycleFlags["fromUnbind"] = 8192] = "fromUnbind";
    LifecycleFlags[LifecycleFlags["fromAttach"] = 16384] = "fromAttach";
    LifecycleFlags[LifecycleFlags["fromDetach"] = 32768] = "fromDetach";
    LifecycleFlags[LifecycleFlags["fromCache"] = 65536] = "fromCache";
    LifecycleFlags[LifecycleFlags["fromDOMEvent"] = 131072] = "fromDOMEvent";
    LifecycleFlags[LifecycleFlags["fromLifecycleTask"] = 262144] = "fromLifecycleTask";
    LifecycleFlags[LifecycleFlags["allowPublishRoundtrip"] = 524288] = "allowPublishRoundtrip";
    LifecycleFlags[LifecycleFlags["isPublishing"] = 1048576] = "isPublishing";
    LifecycleFlags[LifecycleFlags["mustEvaluate"] = 2097152] = "mustEvaluate";
    LifecycleFlags[LifecycleFlags["isTraversingParentScope"] = 4194304] = "isTraversingParentScope";
    LifecycleFlags[LifecycleFlags["isOriginalArray"] = 8388608] = "isOriginalArray";
    LifecycleFlags[LifecycleFlags["isCollectionMutation"] = 16777216] = "isCollectionMutation";
    LifecycleFlags[LifecycleFlags["reorderNodes"] = 33554432] = "reorderNodes";
})(LifecycleFlags || (LifecycleFlags = {}));
var ExpressionKind;
(function (ExpressionKind) {
    ExpressionKind[ExpressionKind["Connects"] = 32] = "Connects";
    ExpressionKind[ExpressionKind["Observes"] = 64] = "Observes";
    ExpressionKind[ExpressionKind["CallsFunction"] = 128] = "CallsFunction";
    ExpressionKind[ExpressionKind["HasAncestor"] = 256] = "HasAncestor";
    ExpressionKind[ExpressionKind["IsPrimary"] = 512] = "IsPrimary";
    ExpressionKind[ExpressionKind["IsLeftHandSide"] = 1024] = "IsLeftHandSide";
    ExpressionKind[ExpressionKind["HasBind"] = 2048] = "HasBind";
    ExpressionKind[ExpressionKind["HasUnbind"] = 4096] = "HasUnbind";
    ExpressionKind[ExpressionKind["IsAssignable"] = 8192] = "IsAssignable";
    ExpressionKind[ExpressionKind["IsLiteral"] = 16384] = "IsLiteral";
    ExpressionKind[ExpressionKind["IsResource"] = 32768] = "IsResource";
    ExpressionKind[ExpressionKind["IsForDeclaration"] = 65536] = "IsForDeclaration";
    ExpressionKind[ExpressionKind["Type"] = 31] = "Type";
    // ---------------------------------------------------------------------------------------------------------------------------
    ExpressionKind[ExpressionKind["AccessThis"] = 1793] = "AccessThis";
    ExpressionKind[ExpressionKind["AccessScope"] = 10082] = "AccessScope";
    ExpressionKind[ExpressionKind["ArrayLiteral"] = 17955] = "ArrayLiteral";
    ExpressionKind[ExpressionKind["ObjectLiteral"] = 17956] = "ObjectLiteral";
    ExpressionKind[ExpressionKind["PrimitiveLiteral"] = 17925] = "PrimitiveLiteral";
    ExpressionKind[ExpressionKind["Template"] = 17958] = "Template";
    ExpressionKind[ExpressionKind["Unary"] = 39] = "Unary";
    ExpressionKind[ExpressionKind["CallScope"] = 1448] = "CallScope";
    ExpressionKind[ExpressionKind["CallMember"] = 1161] = "CallMember";
    ExpressionKind[ExpressionKind["CallFunction"] = 1162] = "CallFunction";
    ExpressionKind[ExpressionKind["AccessMember"] = 9323] = "AccessMember";
    ExpressionKind[ExpressionKind["AccessKeyed"] = 9324] = "AccessKeyed";
    ExpressionKind[ExpressionKind["TaggedTemplate"] = 1197] = "TaggedTemplate";
    ExpressionKind[ExpressionKind["Binary"] = 46] = "Binary";
    ExpressionKind[ExpressionKind["Conditional"] = 63] = "Conditional";
    ExpressionKind[ExpressionKind["Assign"] = 8208] = "Assign";
    ExpressionKind[ExpressionKind["ValueConverter"] = 36913] = "ValueConverter";
    ExpressionKind[ExpressionKind["BindingBehavior"] = 38962] = "BindingBehavior";
    ExpressionKind[ExpressionKind["HtmlLiteral"] = 51] = "HtmlLiteral";
    ExpressionKind[ExpressionKind["ArrayBindingPattern"] = 65556] = "ArrayBindingPattern";
    ExpressionKind[ExpressionKind["ObjectBindingPattern"] = 65557] = "ObjectBindingPattern";
    ExpressionKind[ExpressionKind["BindingIdentifier"] = 65558] = "BindingIdentifier";
    ExpressionKind[ExpressionKind["ForOfStatement"] = 6199] = "ForOfStatement";
    ExpressionKind[ExpressionKind["Interpolation"] = 24] = "Interpolation"; //
})(ExpressionKind || (ExpressionKind = {}));
//# sourceMappingURL=flags.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esnext/index.js":
/*!************************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esnext/index.js ***!
  \************************************************************/
/*! exports provided: CallFunctionExpression, connects, observes, callsFunction, hasAncestor, isAssignable, isLeftHandSide, isPrimary, isResource, hasBind, hasUnbind, isLiteral, arePureLiterals, isPureLiteral, CustomExpression, BindingBehaviorExpression, ValueConverterExpression, AssignExpression, ConditionalExpression, AccessThisExpression, AccessScopeExpression, AccessMemberExpression, AccessKeyedExpression, CallScopeExpression, CallMemberExpression, BinaryExpression, UnaryExpression, PrimitiveLiteralExpression, HtmlLiteralExpression, ArrayLiteralExpression, ObjectLiteralExpression, TemplateExpression, TaggedTemplateExpression, ArrayBindingPattern, ObjectBindingPattern, BindingIdentifier, ForOfStatement, Interpolation, PropertyBinding, CallBinding, connectable, BindingMediator, IExpressionParser, BindingType, MultiInterpolationBinding, InterpolationBinding, LetBinding, RefBinding, ArrayObserver, ArrayIndexObserver, enableArrayObservation, disableArrayObservation, applyMutationsToIndices, synchronizeIndices, MapObserver, enableMapObservation, disableMapObservation, SetObserver, enableSetObservation, disableSetObservation, BindingContext, Scope, OverrideContext, CollectionLengthObserver, CollectionSizeObserver, computed, createComputedObserver, CustomSetterObserver, GetterObserver, IDirtyChecker, DirtyCheckProperty, DirtyCheckSettings, IObserverLocator, ITargetObserverLocator, ITargetAccessorLocator, getCollectionObserver, ObserverLocator, PrimitiveObserver, PropertyAccessor, ProxyObserver, BindableObserver, SetterObserver, ISignaler, subscriberCollection, collectionSubscriberCollection, proxySubscriberCollection, bindingBehavior, BindingBehavior, BindingBehaviorDefinition, BindingInterceptor, BindingModeBehavior, OneTimeBindingBehavior, ToViewBindingBehavior, FromViewBindingBehavior, TwoWayBindingBehavior, DebounceBindingBehavior, SignalBindingBehavior, ThrottleBindingBehavior, customAttribute, CustomAttribute, CustomAttributeDefinition, templateController, FrequentMutations, InfrequentMutations, ObserveShallow, If, Else, Repeat, Replaceable, With, containerless, customElement, CustomElement, CustomElementDefinition, IProjectorLocator, useShadowDOM, ValueConverter, ValueConverterDefinition, valueConverter, ISanitizer, SanitizeValueConverter, ViewValueConverter, Now, IScheduler, Task, TaskAbortError, TaskQueue, TaskQueuePriority, bindable, BindableDefinition, Bindable, ChildrenDefinition, Children, children, ChildrenObserver, Controller, ViewFactory, IViewLocator, ViewLocator, view, Views, Aurelia, IDOMInitializer, CompositionRoot, IfRegistration, ElseRegistration, RepeatRegistration, ReplaceableRegistration, WithRegistration, SanitizeValueConverterRegistration, DebounceBindingBehaviorRegistration, OneTimeBindingBehaviorRegistration, ToViewBindingBehaviorRegistration, FromViewBindingBehaviorRegistration, SignalBindingBehaviorRegistration, ThrottleBindingBehaviorRegistration, TwoWayBindingBehaviorRegistration, RefBindingRendererRegistration, CallBindingRendererRegistration, CustomAttributeRendererRegistration, CustomElementRendererRegistration, InterpolationBindingRendererRegistration, IteratorBindingRendererRegistration, LetElementRendererRegistration, PropertyBindingRendererRegistration, SetPropertyRendererRegistration, TemplateControllerRendererRegistration, DefaultResources, IObserverLocatorRegistration, ILifecycleRegistration, IRendererRegistration, RuntimeConfiguration, HooksDefinition, isTargetedInstruction, ITargetedInstruction, TargetedInstructionType, alias, registerAliases, DOM, INode, IRenderLocation, IDOM, NodeSequence, BindingMode, BindingStrategy, ExpressionKind, LifecycleFlags, State, CallBindingInstruction, FromViewBindingInstruction, HydrateAttributeInstruction, HydrateElementInstruction, HydrateTemplateController, InterpolationInstruction, IteratorBindingInstruction, LetBindingInstruction, LetElementInstruction, OneTimeBindingInstruction, RefBindingInstruction, SetPropertyInstruction, ToViewBindingInstruction, TwoWayBindingInstruction, ViewModelKind, ILifecycle, IController, IViewFactory, MountStrategy, getRenderContext, isRenderContext, AggregateContinuationTask, TerminalTask, AggregateTerminalTask, ContinuationTask, LifecycleTask, PromiseTask, TaskSlot, StartTask, IStartTask, IStartTaskManager, ProviderTask, CollectionKind, DelegationStrategy, isIndexMap, copyIndexMap, cloneIndexMap, createIndexMap, applyBindingBehavior, IInstructionRenderer, IRenderer, ITemplateCompiler, instructionRenderer, ensureExpression */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _binding_ast__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./binding/ast */ "./node_modules/@aurelia/runtime/dist/esnext/binding/ast.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CallFunctionExpression", function() { return _binding_ast__WEBPACK_IMPORTED_MODULE_0__["CallFunctionExpression"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "connects", function() { return _binding_ast__WEBPACK_IMPORTED_MODULE_0__["connects"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "observes", function() { return _binding_ast__WEBPACK_IMPORTED_MODULE_0__["observes"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "callsFunction", function() { return _binding_ast__WEBPACK_IMPORTED_MODULE_0__["callsFunction"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "hasAncestor", function() { return _binding_ast__WEBPACK_IMPORTED_MODULE_0__["hasAncestor"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "isAssignable", function() { return _binding_ast__WEBPACK_IMPORTED_MODULE_0__["isAssignable"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "isLeftHandSide", function() { return _binding_ast__WEBPACK_IMPORTED_MODULE_0__["isLeftHandSide"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "isPrimary", function() { return _binding_ast__WEBPACK_IMPORTED_MODULE_0__["isPrimary"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "isResource", function() { return _binding_ast__WEBPACK_IMPORTED_MODULE_0__["isResource"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "hasBind", function() { return _binding_ast__WEBPACK_IMPORTED_MODULE_0__["hasBind"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "hasUnbind", function() { return _binding_ast__WEBPACK_IMPORTED_MODULE_0__["hasUnbind"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "isLiteral", function() { return _binding_ast__WEBPACK_IMPORTED_MODULE_0__["isLiteral"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "arePureLiterals", function() { return _binding_ast__WEBPACK_IMPORTED_MODULE_0__["arePureLiterals"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "isPureLiteral", function() { return _binding_ast__WEBPACK_IMPORTED_MODULE_0__["isPureLiteral"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CustomExpression", function() { return _binding_ast__WEBPACK_IMPORTED_MODULE_0__["CustomExpression"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BindingBehaviorExpression", function() { return _binding_ast__WEBPACK_IMPORTED_MODULE_0__["BindingBehaviorExpression"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ValueConverterExpression", function() { return _binding_ast__WEBPACK_IMPORTED_MODULE_0__["ValueConverterExpression"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AssignExpression", function() { return _binding_ast__WEBPACK_IMPORTED_MODULE_0__["AssignExpression"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ConditionalExpression", function() { return _binding_ast__WEBPACK_IMPORTED_MODULE_0__["ConditionalExpression"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AccessThisExpression", function() { return _binding_ast__WEBPACK_IMPORTED_MODULE_0__["AccessThisExpression"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AccessScopeExpression", function() { return _binding_ast__WEBPACK_IMPORTED_MODULE_0__["AccessScopeExpression"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AccessMemberExpression", function() { return _binding_ast__WEBPACK_IMPORTED_MODULE_0__["AccessMemberExpression"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AccessKeyedExpression", function() { return _binding_ast__WEBPACK_IMPORTED_MODULE_0__["AccessKeyedExpression"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CallScopeExpression", function() { return _binding_ast__WEBPACK_IMPORTED_MODULE_0__["CallScopeExpression"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CallMemberExpression", function() { return _binding_ast__WEBPACK_IMPORTED_MODULE_0__["CallMemberExpression"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BinaryExpression", function() { return _binding_ast__WEBPACK_IMPORTED_MODULE_0__["BinaryExpression"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "UnaryExpression", function() { return _binding_ast__WEBPACK_IMPORTED_MODULE_0__["UnaryExpression"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PrimitiveLiteralExpression", function() { return _binding_ast__WEBPACK_IMPORTED_MODULE_0__["PrimitiveLiteralExpression"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "HtmlLiteralExpression", function() { return _binding_ast__WEBPACK_IMPORTED_MODULE_0__["HtmlLiteralExpression"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ArrayLiteralExpression", function() { return _binding_ast__WEBPACK_IMPORTED_MODULE_0__["ArrayLiteralExpression"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ObjectLiteralExpression", function() { return _binding_ast__WEBPACK_IMPORTED_MODULE_0__["ObjectLiteralExpression"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TemplateExpression", function() { return _binding_ast__WEBPACK_IMPORTED_MODULE_0__["TemplateExpression"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TaggedTemplateExpression", function() { return _binding_ast__WEBPACK_IMPORTED_MODULE_0__["TaggedTemplateExpression"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ArrayBindingPattern", function() { return _binding_ast__WEBPACK_IMPORTED_MODULE_0__["ArrayBindingPattern"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ObjectBindingPattern", function() { return _binding_ast__WEBPACK_IMPORTED_MODULE_0__["ObjectBindingPattern"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BindingIdentifier", function() { return _binding_ast__WEBPACK_IMPORTED_MODULE_0__["BindingIdentifier"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ForOfStatement", function() { return _binding_ast__WEBPACK_IMPORTED_MODULE_0__["ForOfStatement"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Interpolation", function() { return _binding_ast__WEBPACK_IMPORTED_MODULE_0__["Interpolation"]; });

/* harmony import */ var _binding_property_binding__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./binding/property-binding */ "./node_modules/@aurelia/runtime/dist/esnext/binding/property-binding.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PropertyBinding", function() { return _binding_property_binding__WEBPACK_IMPORTED_MODULE_1__["PropertyBinding"]; });

/* harmony import */ var _binding_call_binding__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./binding/call-binding */ "./node_modules/@aurelia/runtime/dist/esnext/binding/call-binding.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CallBinding", function() { return _binding_call_binding__WEBPACK_IMPORTED_MODULE_2__["CallBinding"]; });

/* harmony import */ var _binding_connectable__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./binding/connectable */ "./node_modules/@aurelia/runtime/dist/esnext/binding/connectable.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "connectable", function() { return _binding_connectable__WEBPACK_IMPORTED_MODULE_3__["connectable"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BindingMediator", function() { return _binding_connectable__WEBPACK_IMPORTED_MODULE_3__["BindingMediator"]; });

/* harmony import */ var _binding_expression_parser__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./binding/expression-parser */ "./node_modules/@aurelia/runtime/dist/esnext/binding/expression-parser.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IExpressionParser", function() { return _binding_expression_parser__WEBPACK_IMPORTED_MODULE_4__["IExpressionParser"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BindingType", function() { return _binding_expression_parser__WEBPACK_IMPORTED_MODULE_4__["BindingType"]; });

/* harmony import */ var _binding_interpolation_binding__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./binding/interpolation-binding */ "./node_modules/@aurelia/runtime/dist/esnext/binding/interpolation-binding.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "MultiInterpolationBinding", function() { return _binding_interpolation_binding__WEBPACK_IMPORTED_MODULE_5__["MultiInterpolationBinding"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "InterpolationBinding", function() { return _binding_interpolation_binding__WEBPACK_IMPORTED_MODULE_5__["InterpolationBinding"]; });

/* harmony import */ var _binding_let_binding__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./binding/let-binding */ "./node_modules/@aurelia/runtime/dist/esnext/binding/let-binding.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LetBinding", function() { return _binding_let_binding__WEBPACK_IMPORTED_MODULE_6__["LetBinding"]; });

/* harmony import */ var _binding_ref_binding__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./binding/ref-binding */ "./node_modules/@aurelia/runtime/dist/esnext/binding/ref-binding.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RefBinding", function() { return _binding_ref_binding__WEBPACK_IMPORTED_MODULE_7__["RefBinding"]; });

/* harmony import */ var _observation_array_observer__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./observation/array-observer */ "./node_modules/@aurelia/runtime/dist/esnext/observation/array-observer.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ArrayObserver", function() { return _observation_array_observer__WEBPACK_IMPORTED_MODULE_8__["ArrayObserver"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ArrayIndexObserver", function() { return _observation_array_observer__WEBPACK_IMPORTED_MODULE_8__["ArrayIndexObserver"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "enableArrayObservation", function() { return _observation_array_observer__WEBPACK_IMPORTED_MODULE_8__["enableArrayObservation"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "disableArrayObservation", function() { return _observation_array_observer__WEBPACK_IMPORTED_MODULE_8__["disableArrayObservation"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "applyMutationsToIndices", function() { return _observation_array_observer__WEBPACK_IMPORTED_MODULE_8__["applyMutationsToIndices"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "synchronizeIndices", function() { return _observation_array_observer__WEBPACK_IMPORTED_MODULE_8__["synchronizeIndices"]; });

/* harmony import */ var _observation_map_observer__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./observation/map-observer */ "./node_modules/@aurelia/runtime/dist/esnext/observation/map-observer.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "MapObserver", function() { return _observation_map_observer__WEBPACK_IMPORTED_MODULE_9__["MapObserver"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "enableMapObservation", function() { return _observation_map_observer__WEBPACK_IMPORTED_MODULE_9__["enableMapObservation"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "disableMapObservation", function() { return _observation_map_observer__WEBPACK_IMPORTED_MODULE_9__["disableMapObservation"]; });

/* harmony import */ var _observation_set_observer__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./observation/set-observer */ "./node_modules/@aurelia/runtime/dist/esnext/observation/set-observer.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SetObserver", function() { return _observation_set_observer__WEBPACK_IMPORTED_MODULE_10__["SetObserver"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "enableSetObservation", function() { return _observation_set_observer__WEBPACK_IMPORTED_MODULE_10__["enableSetObservation"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "disableSetObservation", function() { return _observation_set_observer__WEBPACK_IMPORTED_MODULE_10__["disableSetObservation"]; });

/* harmony import */ var _observation_binding_context__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./observation/binding-context */ "./node_modules/@aurelia/runtime/dist/esnext/observation/binding-context.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BindingContext", function() { return _observation_binding_context__WEBPACK_IMPORTED_MODULE_11__["BindingContext"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Scope", function() { return _observation_binding_context__WEBPACK_IMPORTED_MODULE_11__["Scope"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "OverrideContext", function() { return _observation_binding_context__WEBPACK_IMPORTED_MODULE_11__["OverrideContext"]; });

/* harmony import */ var _observation_collection_length_observer__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./observation/collection-length-observer */ "./node_modules/@aurelia/runtime/dist/esnext/observation/collection-length-observer.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CollectionLengthObserver", function() { return _observation_collection_length_observer__WEBPACK_IMPORTED_MODULE_12__["CollectionLengthObserver"]; });

/* harmony import */ var _observation_collection_size_observer__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./observation/collection-size-observer */ "./node_modules/@aurelia/runtime/dist/esnext/observation/collection-size-observer.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CollectionSizeObserver", function() { return _observation_collection_size_observer__WEBPACK_IMPORTED_MODULE_13__["CollectionSizeObserver"]; });

/* harmony import */ var _observation_computed_observer__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./observation/computed-observer */ "./node_modules/@aurelia/runtime/dist/esnext/observation/computed-observer.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "computed", function() { return _observation_computed_observer__WEBPACK_IMPORTED_MODULE_14__["computed"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createComputedObserver", function() { return _observation_computed_observer__WEBPACK_IMPORTED_MODULE_14__["createComputedObserver"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CustomSetterObserver", function() { return _observation_computed_observer__WEBPACK_IMPORTED_MODULE_14__["CustomSetterObserver"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "GetterObserver", function() { return _observation_computed_observer__WEBPACK_IMPORTED_MODULE_14__["GetterObserver"]; });

/* harmony import */ var _observation_dirty_checker__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./observation/dirty-checker */ "./node_modules/@aurelia/runtime/dist/esnext/observation/dirty-checker.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IDirtyChecker", function() { return _observation_dirty_checker__WEBPACK_IMPORTED_MODULE_15__["IDirtyChecker"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DirtyCheckProperty", function() { return _observation_dirty_checker__WEBPACK_IMPORTED_MODULE_15__["DirtyCheckProperty"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DirtyCheckSettings", function() { return _observation_dirty_checker__WEBPACK_IMPORTED_MODULE_15__["DirtyCheckSettings"]; });

/* harmony import */ var _observation_observer_locator__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./observation/observer-locator */ "./node_modules/@aurelia/runtime/dist/esnext/observation/observer-locator.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IObserverLocator", function() { return _observation_observer_locator__WEBPACK_IMPORTED_MODULE_16__["IObserverLocator"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ITargetObserverLocator", function() { return _observation_observer_locator__WEBPACK_IMPORTED_MODULE_16__["ITargetObserverLocator"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ITargetAccessorLocator", function() { return _observation_observer_locator__WEBPACK_IMPORTED_MODULE_16__["ITargetAccessorLocator"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getCollectionObserver", function() { return _observation_observer_locator__WEBPACK_IMPORTED_MODULE_16__["getCollectionObserver"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ObserverLocator", function() { return _observation_observer_locator__WEBPACK_IMPORTED_MODULE_16__["ObserverLocator"]; });

/* harmony import */ var _observation_primitive_observer__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./observation/primitive-observer */ "./node_modules/@aurelia/runtime/dist/esnext/observation/primitive-observer.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PrimitiveObserver", function() { return _observation_primitive_observer__WEBPACK_IMPORTED_MODULE_17__["PrimitiveObserver"]; });

/* harmony import */ var _observation_property_accessor__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./observation/property-accessor */ "./node_modules/@aurelia/runtime/dist/esnext/observation/property-accessor.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PropertyAccessor", function() { return _observation_property_accessor__WEBPACK_IMPORTED_MODULE_18__["PropertyAccessor"]; });

/* harmony import */ var _observation_proxy_observer__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./observation/proxy-observer */ "./node_modules/@aurelia/runtime/dist/esnext/observation/proxy-observer.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ProxyObserver", function() { return _observation_proxy_observer__WEBPACK_IMPORTED_MODULE_19__["ProxyObserver"]; });

/* harmony import */ var _observation_bindable_observer__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./observation/bindable-observer */ "./node_modules/@aurelia/runtime/dist/esnext/observation/bindable-observer.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BindableObserver", function() { return _observation_bindable_observer__WEBPACK_IMPORTED_MODULE_20__["BindableObserver"]; });

/* harmony import */ var _observation_setter_observer__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./observation/setter-observer */ "./node_modules/@aurelia/runtime/dist/esnext/observation/setter-observer.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SetterObserver", function() { return _observation_setter_observer__WEBPACK_IMPORTED_MODULE_21__["SetterObserver"]; });

/* harmony import */ var _observation_signaler__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./observation/signaler */ "./node_modules/@aurelia/runtime/dist/esnext/observation/signaler.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ISignaler", function() { return _observation_signaler__WEBPACK_IMPORTED_MODULE_22__["ISignaler"]; });

/* harmony import */ var _observation_subscriber_collection__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./observation/subscriber-collection */ "./node_modules/@aurelia/runtime/dist/esnext/observation/subscriber-collection.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "subscriberCollection", function() { return _observation_subscriber_collection__WEBPACK_IMPORTED_MODULE_23__["subscriberCollection"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "collectionSubscriberCollection", function() { return _observation_subscriber_collection__WEBPACK_IMPORTED_MODULE_23__["collectionSubscriberCollection"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "proxySubscriberCollection", function() { return _observation_subscriber_collection__WEBPACK_IMPORTED_MODULE_23__["proxySubscriberCollection"]; });

/* harmony import */ var _resources_binding_behavior__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./resources/binding-behavior */ "./node_modules/@aurelia/runtime/dist/esnext/resources/binding-behavior.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "bindingBehavior", function() { return _resources_binding_behavior__WEBPACK_IMPORTED_MODULE_24__["bindingBehavior"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BindingBehavior", function() { return _resources_binding_behavior__WEBPACK_IMPORTED_MODULE_24__["BindingBehavior"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BindingBehaviorDefinition", function() { return _resources_binding_behavior__WEBPACK_IMPORTED_MODULE_24__["BindingBehaviorDefinition"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BindingInterceptor", function() { return _resources_binding_behavior__WEBPACK_IMPORTED_MODULE_24__["BindingInterceptor"]; });

/* harmony import */ var _resources_binding_behaviors_binding_mode__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./resources/binding-behaviors/binding-mode */ "./node_modules/@aurelia/runtime/dist/esnext/resources/binding-behaviors/binding-mode.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BindingModeBehavior", function() { return _resources_binding_behaviors_binding_mode__WEBPACK_IMPORTED_MODULE_25__["BindingModeBehavior"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "OneTimeBindingBehavior", function() { return _resources_binding_behaviors_binding_mode__WEBPACK_IMPORTED_MODULE_25__["OneTimeBindingBehavior"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ToViewBindingBehavior", function() { return _resources_binding_behaviors_binding_mode__WEBPACK_IMPORTED_MODULE_25__["ToViewBindingBehavior"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "FromViewBindingBehavior", function() { return _resources_binding_behaviors_binding_mode__WEBPACK_IMPORTED_MODULE_25__["FromViewBindingBehavior"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TwoWayBindingBehavior", function() { return _resources_binding_behaviors_binding_mode__WEBPACK_IMPORTED_MODULE_25__["TwoWayBindingBehavior"]; });

/* harmony import */ var _resources_binding_behaviors_debounce__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./resources/binding-behaviors/debounce */ "./node_modules/@aurelia/runtime/dist/esnext/resources/binding-behaviors/debounce.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DebounceBindingBehavior", function() { return _resources_binding_behaviors_debounce__WEBPACK_IMPORTED_MODULE_26__["DebounceBindingBehavior"]; });

/* harmony import */ var _resources_binding_behaviors_signals__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./resources/binding-behaviors/signals */ "./node_modules/@aurelia/runtime/dist/esnext/resources/binding-behaviors/signals.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SignalBindingBehavior", function() { return _resources_binding_behaviors_signals__WEBPACK_IMPORTED_MODULE_27__["SignalBindingBehavior"]; });

/* harmony import */ var _resources_binding_behaviors_throttle__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./resources/binding-behaviors/throttle */ "./node_modules/@aurelia/runtime/dist/esnext/resources/binding-behaviors/throttle.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ThrottleBindingBehavior", function() { return _resources_binding_behaviors_throttle__WEBPACK_IMPORTED_MODULE_28__["ThrottleBindingBehavior"]; });

/* harmony import */ var _resources_custom_attribute__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./resources/custom-attribute */ "./node_modules/@aurelia/runtime/dist/esnext/resources/custom-attribute.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "customAttribute", function() { return _resources_custom_attribute__WEBPACK_IMPORTED_MODULE_29__["customAttribute"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CustomAttribute", function() { return _resources_custom_attribute__WEBPACK_IMPORTED_MODULE_29__["CustomAttribute"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CustomAttributeDefinition", function() { return _resources_custom_attribute__WEBPACK_IMPORTED_MODULE_29__["CustomAttributeDefinition"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "templateController", function() { return _resources_custom_attribute__WEBPACK_IMPORTED_MODULE_29__["templateController"]; });

/* harmony import */ var _resources_custom_attributes_flags__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./resources/custom-attributes/flags */ "./node_modules/@aurelia/runtime/dist/esnext/resources/custom-attributes/flags.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "FrequentMutations", function() { return _resources_custom_attributes_flags__WEBPACK_IMPORTED_MODULE_30__["FrequentMutations"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "InfrequentMutations", function() { return _resources_custom_attributes_flags__WEBPACK_IMPORTED_MODULE_30__["InfrequentMutations"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ObserveShallow", function() { return _resources_custom_attributes_flags__WEBPACK_IMPORTED_MODULE_30__["ObserveShallow"]; });

/* harmony import */ var _resources_custom_attributes_if__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./resources/custom-attributes/if */ "./node_modules/@aurelia/runtime/dist/esnext/resources/custom-attributes/if.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "If", function() { return _resources_custom_attributes_if__WEBPACK_IMPORTED_MODULE_31__["If"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Else", function() { return _resources_custom_attributes_if__WEBPACK_IMPORTED_MODULE_31__["Else"]; });

/* harmony import */ var _resources_custom_attributes_repeat__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./resources/custom-attributes/repeat */ "./node_modules/@aurelia/runtime/dist/esnext/resources/custom-attributes/repeat.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Repeat", function() { return _resources_custom_attributes_repeat__WEBPACK_IMPORTED_MODULE_32__["Repeat"]; });

/* harmony import */ var _resources_custom_attributes_replaceable__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./resources/custom-attributes/replaceable */ "./node_modules/@aurelia/runtime/dist/esnext/resources/custom-attributes/replaceable.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Replaceable", function() { return _resources_custom_attributes_replaceable__WEBPACK_IMPORTED_MODULE_33__["Replaceable"]; });

/* harmony import */ var _resources_custom_attributes_with__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ./resources/custom-attributes/with */ "./node_modules/@aurelia/runtime/dist/esnext/resources/custom-attributes/with.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "With", function() { return _resources_custom_attributes_with__WEBPACK_IMPORTED_MODULE_34__["With"]; });

/* harmony import */ var _resources_custom_element__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ./resources/custom-element */ "./node_modules/@aurelia/runtime/dist/esnext/resources/custom-element.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "containerless", function() { return _resources_custom_element__WEBPACK_IMPORTED_MODULE_35__["containerless"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "customElement", function() { return _resources_custom_element__WEBPACK_IMPORTED_MODULE_35__["customElement"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CustomElement", function() { return _resources_custom_element__WEBPACK_IMPORTED_MODULE_35__["CustomElement"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CustomElementDefinition", function() { return _resources_custom_element__WEBPACK_IMPORTED_MODULE_35__["CustomElementDefinition"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IProjectorLocator", function() { return _resources_custom_element__WEBPACK_IMPORTED_MODULE_35__["IProjectorLocator"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useShadowDOM", function() { return _resources_custom_element__WEBPACK_IMPORTED_MODULE_35__["useShadowDOM"]; });

/* harmony import */ var _resources_value_converter__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ./resources/value-converter */ "./node_modules/@aurelia/runtime/dist/esnext/resources/value-converter.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ValueConverter", function() { return _resources_value_converter__WEBPACK_IMPORTED_MODULE_36__["ValueConverter"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ValueConverterDefinition", function() { return _resources_value_converter__WEBPACK_IMPORTED_MODULE_36__["ValueConverterDefinition"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "valueConverter", function() { return _resources_value_converter__WEBPACK_IMPORTED_MODULE_36__["valueConverter"]; });

/* harmony import */ var _resources_value_converters_sanitize__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ./resources/value-converters/sanitize */ "./node_modules/@aurelia/runtime/dist/esnext/resources/value-converters/sanitize.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ISanitizer", function() { return _resources_value_converters_sanitize__WEBPACK_IMPORTED_MODULE_37__["ISanitizer"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SanitizeValueConverter", function() { return _resources_value_converters_sanitize__WEBPACK_IMPORTED_MODULE_37__["SanitizeValueConverter"]; });

/* harmony import */ var _resources_value_converters_view__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ./resources/value-converters/view */ "./node_modules/@aurelia/runtime/dist/esnext/resources/value-converters/view.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ViewValueConverter", function() { return _resources_value_converters_view__WEBPACK_IMPORTED_MODULE_38__["ViewValueConverter"]; });

/* harmony import */ var _aurelia_scheduler__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! @aurelia/scheduler */ "./node_modules/@aurelia/scheduler/dist/esnext/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Now", function() { return _aurelia_scheduler__WEBPACK_IMPORTED_MODULE_39__["Now"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IScheduler", function() { return _aurelia_scheduler__WEBPACK_IMPORTED_MODULE_39__["IScheduler"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Task", function() { return _aurelia_scheduler__WEBPACK_IMPORTED_MODULE_39__["Task"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TaskAbortError", function() { return _aurelia_scheduler__WEBPACK_IMPORTED_MODULE_39__["TaskAbortError"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TaskQueue", function() { return _aurelia_scheduler__WEBPACK_IMPORTED_MODULE_39__["TaskQueue"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TaskQueuePriority", function() { return _aurelia_scheduler__WEBPACK_IMPORTED_MODULE_39__["TaskQueuePriority"]; });

/* harmony import */ var _templating_bindable__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! ./templating/bindable */ "./node_modules/@aurelia/runtime/dist/esnext/templating/bindable.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "bindable", function() { return _templating_bindable__WEBPACK_IMPORTED_MODULE_40__["bindable"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BindableDefinition", function() { return _templating_bindable__WEBPACK_IMPORTED_MODULE_40__["BindableDefinition"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Bindable", function() { return _templating_bindable__WEBPACK_IMPORTED_MODULE_40__["Bindable"]; });

/* harmony import */ var _templating_children__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! ./templating/children */ "./node_modules/@aurelia/runtime/dist/esnext/templating/children.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ChildrenDefinition", function() { return _templating_children__WEBPACK_IMPORTED_MODULE_41__["ChildrenDefinition"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Children", function() { return _templating_children__WEBPACK_IMPORTED_MODULE_41__["Children"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "children", function() { return _templating_children__WEBPACK_IMPORTED_MODULE_41__["children"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ChildrenObserver", function() { return _templating_children__WEBPACK_IMPORTED_MODULE_41__["ChildrenObserver"]; });

/* harmony import */ var _templating_controller__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! ./templating/controller */ "./node_modules/@aurelia/runtime/dist/esnext/templating/controller.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Controller", function() { return _templating_controller__WEBPACK_IMPORTED_MODULE_42__["Controller"]; });

/* harmony import */ var _templating_view__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! ./templating/view */ "./node_modules/@aurelia/runtime/dist/esnext/templating/view.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ViewFactory", function() { return _templating_view__WEBPACK_IMPORTED_MODULE_43__["ViewFactory"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IViewLocator", function() { return _templating_view__WEBPACK_IMPORTED_MODULE_43__["IViewLocator"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ViewLocator", function() { return _templating_view__WEBPACK_IMPORTED_MODULE_43__["ViewLocator"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "view", function() { return _templating_view__WEBPACK_IMPORTED_MODULE_43__["view"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Views", function() { return _templating_view__WEBPACK_IMPORTED_MODULE_43__["Views"]; });

/* harmony import */ var _aurelia__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! ./aurelia */ "./node_modules/@aurelia/runtime/dist/esnext/aurelia.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Aurelia", function() { return _aurelia__WEBPACK_IMPORTED_MODULE_44__["Aurelia"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IDOMInitializer", function() { return _aurelia__WEBPACK_IMPORTED_MODULE_44__["IDOMInitializer"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CompositionRoot", function() { return _aurelia__WEBPACK_IMPORTED_MODULE_44__["CompositionRoot"]; });

/* harmony import */ var _configuration__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(/*! ./configuration */ "./node_modules/@aurelia/runtime/dist/esnext/configuration.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IfRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_45__["IfRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ElseRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_45__["ElseRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RepeatRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_45__["RepeatRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ReplaceableRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_45__["ReplaceableRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "WithRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_45__["WithRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SanitizeValueConverterRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_45__["SanitizeValueConverterRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DebounceBindingBehaviorRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_45__["DebounceBindingBehaviorRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "OneTimeBindingBehaviorRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_45__["OneTimeBindingBehaviorRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ToViewBindingBehaviorRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_45__["ToViewBindingBehaviorRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "FromViewBindingBehaviorRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_45__["FromViewBindingBehaviorRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SignalBindingBehaviorRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_45__["SignalBindingBehaviorRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ThrottleBindingBehaviorRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_45__["ThrottleBindingBehaviorRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TwoWayBindingBehaviorRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_45__["TwoWayBindingBehaviorRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RefBindingRendererRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_45__["RefBindingRendererRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CallBindingRendererRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_45__["CallBindingRendererRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CustomAttributeRendererRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_45__["CustomAttributeRendererRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CustomElementRendererRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_45__["CustomElementRendererRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "InterpolationBindingRendererRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_45__["InterpolationBindingRendererRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IteratorBindingRendererRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_45__["IteratorBindingRendererRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LetElementRendererRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_45__["LetElementRendererRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PropertyBindingRendererRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_45__["PropertyBindingRendererRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SetPropertyRendererRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_45__["SetPropertyRendererRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TemplateControllerRendererRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_45__["TemplateControllerRendererRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DefaultResources", function() { return _configuration__WEBPACK_IMPORTED_MODULE_45__["DefaultResources"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IObserverLocatorRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_45__["IObserverLocatorRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ILifecycleRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_45__["ILifecycleRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IRendererRegistration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_45__["IRendererRegistration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RuntimeConfiguration", function() { return _configuration__WEBPACK_IMPORTED_MODULE_45__["RuntimeConfiguration"]; });

/* harmony import */ var _definitions__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(/*! ./definitions */ "./node_modules/@aurelia/runtime/dist/esnext/definitions.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "HooksDefinition", function() { return _definitions__WEBPACK_IMPORTED_MODULE_46__["HooksDefinition"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "isTargetedInstruction", function() { return _definitions__WEBPACK_IMPORTED_MODULE_46__["isTargetedInstruction"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ITargetedInstruction", function() { return _definitions__WEBPACK_IMPORTED_MODULE_46__["ITargetedInstruction"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TargetedInstructionType", function() { return _definitions__WEBPACK_IMPORTED_MODULE_46__["TargetedInstructionType"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "alias", function() { return _definitions__WEBPACK_IMPORTED_MODULE_46__["alias"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "registerAliases", function() { return _definitions__WEBPACK_IMPORTED_MODULE_46__["registerAliases"]; });

/* harmony import */ var _dom__WEBPACK_IMPORTED_MODULE_47__ = __webpack_require__(/*! ./dom */ "./node_modules/@aurelia/runtime/dist/esnext/dom.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DOM", function() { return _dom__WEBPACK_IMPORTED_MODULE_47__["DOM"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "INode", function() { return _dom__WEBPACK_IMPORTED_MODULE_47__["INode"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IRenderLocation", function() { return _dom__WEBPACK_IMPORTED_MODULE_47__["IRenderLocation"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IDOM", function() { return _dom__WEBPACK_IMPORTED_MODULE_47__["IDOM"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "NodeSequence", function() { return _dom__WEBPACK_IMPORTED_MODULE_47__["NodeSequence"]; });

/* harmony import */ var _flags__WEBPACK_IMPORTED_MODULE_48__ = __webpack_require__(/*! ./flags */ "./node_modules/@aurelia/runtime/dist/esnext/flags.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BindingMode", function() { return _flags__WEBPACK_IMPORTED_MODULE_48__["BindingMode"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BindingStrategy", function() { return _flags__WEBPACK_IMPORTED_MODULE_48__["BindingStrategy"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ExpressionKind", function() { return _flags__WEBPACK_IMPORTED_MODULE_48__["ExpressionKind"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LifecycleFlags", function() { return _flags__WEBPACK_IMPORTED_MODULE_48__["LifecycleFlags"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "State", function() { return _flags__WEBPACK_IMPORTED_MODULE_48__["State"]; });

/* harmony import */ var _instructions__WEBPACK_IMPORTED_MODULE_49__ = __webpack_require__(/*! ./instructions */ "./node_modules/@aurelia/runtime/dist/esnext/instructions.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CallBindingInstruction", function() { return _instructions__WEBPACK_IMPORTED_MODULE_49__["CallBindingInstruction"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "FromViewBindingInstruction", function() { return _instructions__WEBPACK_IMPORTED_MODULE_49__["FromViewBindingInstruction"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "HydrateAttributeInstruction", function() { return _instructions__WEBPACK_IMPORTED_MODULE_49__["HydrateAttributeInstruction"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "HydrateElementInstruction", function() { return _instructions__WEBPACK_IMPORTED_MODULE_49__["HydrateElementInstruction"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "HydrateTemplateController", function() { return _instructions__WEBPACK_IMPORTED_MODULE_49__["HydrateTemplateController"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "InterpolationInstruction", function() { return _instructions__WEBPACK_IMPORTED_MODULE_49__["InterpolationInstruction"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IteratorBindingInstruction", function() { return _instructions__WEBPACK_IMPORTED_MODULE_49__["IteratorBindingInstruction"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LetBindingInstruction", function() { return _instructions__WEBPACK_IMPORTED_MODULE_49__["LetBindingInstruction"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LetElementInstruction", function() { return _instructions__WEBPACK_IMPORTED_MODULE_49__["LetElementInstruction"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "OneTimeBindingInstruction", function() { return _instructions__WEBPACK_IMPORTED_MODULE_49__["OneTimeBindingInstruction"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RefBindingInstruction", function() { return _instructions__WEBPACK_IMPORTED_MODULE_49__["RefBindingInstruction"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SetPropertyInstruction", function() { return _instructions__WEBPACK_IMPORTED_MODULE_49__["SetPropertyInstruction"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ToViewBindingInstruction", function() { return _instructions__WEBPACK_IMPORTED_MODULE_49__["ToViewBindingInstruction"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TwoWayBindingInstruction", function() { return _instructions__WEBPACK_IMPORTED_MODULE_49__["TwoWayBindingInstruction"]; });

/* harmony import */ var _lifecycle__WEBPACK_IMPORTED_MODULE_50__ = __webpack_require__(/*! ./lifecycle */ "./node_modules/@aurelia/runtime/dist/esnext/lifecycle.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ViewModelKind", function() { return _lifecycle__WEBPACK_IMPORTED_MODULE_50__["ViewModelKind"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ILifecycle", function() { return _lifecycle__WEBPACK_IMPORTED_MODULE_50__["ILifecycle"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IController", function() { return _lifecycle__WEBPACK_IMPORTED_MODULE_50__["IController"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IViewFactory", function() { return _lifecycle__WEBPACK_IMPORTED_MODULE_50__["IViewFactory"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "MountStrategy", function() { return _lifecycle__WEBPACK_IMPORTED_MODULE_50__["MountStrategy"]; });

/* harmony import */ var _templating_render_context__WEBPACK_IMPORTED_MODULE_51__ = __webpack_require__(/*! ./templating/render-context */ "./node_modules/@aurelia/runtime/dist/esnext/templating/render-context.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getRenderContext", function() { return _templating_render_context__WEBPACK_IMPORTED_MODULE_51__["getRenderContext"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "isRenderContext", function() { return _templating_render_context__WEBPACK_IMPORTED_MODULE_51__["isRenderContext"]; });

/* harmony import */ var _lifecycle_task__WEBPACK_IMPORTED_MODULE_52__ = __webpack_require__(/*! ./lifecycle-task */ "./node_modules/@aurelia/runtime/dist/esnext/lifecycle-task.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AggregateContinuationTask", function() { return _lifecycle_task__WEBPACK_IMPORTED_MODULE_52__["AggregateContinuationTask"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TerminalTask", function() { return _lifecycle_task__WEBPACK_IMPORTED_MODULE_52__["TerminalTask"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AggregateTerminalTask", function() { return _lifecycle_task__WEBPACK_IMPORTED_MODULE_52__["AggregateTerminalTask"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ContinuationTask", function() { return _lifecycle_task__WEBPACK_IMPORTED_MODULE_52__["ContinuationTask"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LifecycleTask", function() { return _lifecycle_task__WEBPACK_IMPORTED_MODULE_52__["LifecycleTask"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PromiseTask", function() { return _lifecycle_task__WEBPACK_IMPORTED_MODULE_52__["PromiseTask"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TaskSlot", function() { return _lifecycle_task__WEBPACK_IMPORTED_MODULE_52__["TaskSlot"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "StartTask", function() { return _lifecycle_task__WEBPACK_IMPORTED_MODULE_52__["StartTask"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IStartTask", function() { return _lifecycle_task__WEBPACK_IMPORTED_MODULE_52__["IStartTask"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IStartTaskManager", function() { return _lifecycle_task__WEBPACK_IMPORTED_MODULE_52__["IStartTaskManager"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ProviderTask", function() { return _lifecycle_task__WEBPACK_IMPORTED_MODULE_52__["ProviderTask"]; });

/* harmony import */ var _observation__WEBPACK_IMPORTED_MODULE_53__ = __webpack_require__(/*! ./observation */ "./node_modules/@aurelia/runtime/dist/esnext/observation.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CollectionKind", function() { return _observation__WEBPACK_IMPORTED_MODULE_53__["CollectionKind"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DelegationStrategy", function() { return _observation__WEBPACK_IMPORTED_MODULE_53__["DelegationStrategy"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "isIndexMap", function() { return _observation__WEBPACK_IMPORTED_MODULE_53__["isIndexMap"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "copyIndexMap", function() { return _observation__WEBPACK_IMPORTED_MODULE_53__["copyIndexMap"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "cloneIndexMap", function() { return _observation__WEBPACK_IMPORTED_MODULE_53__["cloneIndexMap"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createIndexMap", function() { return _observation__WEBPACK_IMPORTED_MODULE_53__["createIndexMap"]; });

/* harmony import */ var _renderer__WEBPACK_IMPORTED_MODULE_54__ = __webpack_require__(/*! ./renderer */ "./node_modules/@aurelia/runtime/dist/esnext/renderer.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "applyBindingBehavior", function() { return _renderer__WEBPACK_IMPORTED_MODULE_54__["applyBindingBehavior"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IInstructionRenderer", function() { return _renderer__WEBPACK_IMPORTED_MODULE_54__["IInstructionRenderer"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IRenderer", function() { return _renderer__WEBPACK_IMPORTED_MODULE_54__["IRenderer"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ITemplateCompiler", function() { return _renderer__WEBPACK_IMPORTED_MODULE_54__["ITemplateCompiler"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "instructionRenderer", function() { return _renderer__WEBPACK_IMPORTED_MODULE_54__["instructionRenderer"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ensureExpression", function() { return _renderer__WEBPACK_IMPORTED_MODULE_54__["ensureExpression"]; });











































// These exports are temporary until we have a proper way to unit test them













//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esnext/instructions.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esnext/instructions.js ***!
  \*******************************************************************/
/*! exports provided: InterpolationInstruction, OneTimeBindingInstruction, ToViewBindingInstruction, FromViewBindingInstruction, TwoWayBindingInstruction, IteratorBindingInstruction, CallBindingInstruction, RefBindingInstruction, SetPropertyInstruction, HydrateElementInstruction, HydrateAttributeInstruction, HydrateTemplateController, LetElementInstruction, LetBindingInstruction */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "InterpolationInstruction", function() { return InterpolationInstruction; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OneTimeBindingInstruction", function() { return OneTimeBindingInstruction; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ToViewBindingInstruction", function() { return ToViewBindingInstruction; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FromViewBindingInstruction", function() { return FromViewBindingInstruction; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TwoWayBindingInstruction", function() { return TwoWayBindingInstruction; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IteratorBindingInstruction", function() { return IteratorBindingInstruction; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CallBindingInstruction", function() { return CallBindingInstruction; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RefBindingInstruction", function() { return RefBindingInstruction; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SetPropertyInstruction", function() { return SetPropertyInstruction; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HydrateElementInstruction", function() { return HydrateElementInstruction; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HydrateAttributeInstruction", function() { return HydrateAttributeInstruction; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HydrateTemplateController", function() { return HydrateTemplateController; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LetElementInstruction", function() { return LetElementInstruction; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LetBindingInstruction", function() { return LetBindingInstruction; });
/* harmony import */ var _flags__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./flags */ "./node_modules/@aurelia/runtime/dist/esnext/flags.js");

class InterpolationInstruction {
    constructor(from, to) {
        this.from = from;
        this.to = to;
        this.type = "rf" /* interpolation */;
    }
}
class OneTimeBindingInstruction {
    constructor(from, to) {
        this.from = from;
        this.to = to;
        this.type = "rg" /* propertyBinding */;
        this.mode = _flags__WEBPACK_IMPORTED_MODULE_0__["BindingMode"].oneTime;
        this.oneTime = true;
    }
}
class ToViewBindingInstruction {
    constructor(from, to) {
        this.from = from;
        this.to = to;
        this.type = "rg" /* propertyBinding */;
        this.mode = _flags__WEBPACK_IMPORTED_MODULE_0__["BindingMode"].toView;
        this.oneTime = false;
    }
}
class FromViewBindingInstruction {
    constructor(from, to) {
        this.from = from;
        this.to = to;
        this.type = "rg" /* propertyBinding */;
        this.mode = _flags__WEBPACK_IMPORTED_MODULE_0__["BindingMode"].fromView;
        this.oneTime = false;
    }
}
class TwoWayBindingInstruction {
    constructor(from, to) {
        this.from = from;
        this.to = to;
        this.type = "rg" /* propertyBinding */;
        this.mode = _flags__WEBPACK_IMPORTED_MODULE_0__["BindingMode"].twoWay;
        this.oneTime = false;
    }
}
class IteratorBindingInstruction {
    constructor(from, to) {
        this.from = from;
        this.to = to;
        this.type = "rk" /* iteratorBinding */;
    }
}
class CallBindingInstruction {
    constructor(from, to) {
        this.from = from;
        this.to = to;
        this.type = "rh" /* callBinding */;
    }
}
class RefBindingInstruction {
    constructor(from, to) {
        this.from = from;
        this.to = to;
        this.type = "rj" /* refBinding */;
        this.type = "rj" /* refBinding */;
    }
}
class SetPropertyInstruction {
    constructor(value, to) {
        this.value = value;
        this.to = to;
        this.type = "re" /* setProperty */;
    }
}
class HydrateElementInstruction {
    constructor(res, instructions, parts) {
        this.res = res;
        this.instructions = instructions;
        this.parts = parts;
        this.type = "ra" /* hydrateElement */;
    }
}
class HydrateAttributeInstruction {
    constructor(res, instructions) {
        this.res = res;
        this.instructions = instructions;
        this.type = "rb" /* hydrateAttribute */;
    }
}
class HydrateTemplateController {
    constructor(def, res, instructions, link, parts) {
        this.def = def;
        this.res = res;
        this.instructions = instructions;
        this.link = link;
        this.parts = parts;
        this.type = "rc" /* hydrateTemplateController */;
    }
}
class LetElementInstruction {
    constructor(instructions, toBindingContext) {
        this.instructions = instructions;
        this.toBindingContext = toBindingContext;
        this.type = "rd" /* hydrateLetElement */;
    }
}
class LetBindingInstruction {
    constructor(from, to) {
        this.from = from;
        this.to = to;
        this.type = "ri" /* letBinding */;
    }
}
//# sourceMappingURL=instructions.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esnext/lifecycle-task.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esnext/lifecycle-task.js ***!
  \*********************************************************************/
/*! exports provided: LifecycleTask, TaskSlot, IStartTask, StartTask, IStartTaskManager, StartTaskManager, PromiseTask, ProviderTask, ContinuationTask, TerminalTask, AggregateContinuationTask, AggregateTerminalTask, hasAsyncWork */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LifecycleTask", function() { return LifecycleTask; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaskSlot", function() { return TaskSlot; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IStartTask", function() { return IStartTask; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StartTask", function() { return StartTask; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IStartTaskManager", function() { return IStartTaskManager; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StartTaskManager", function() { return StartTaskManager; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PromiseTask", function() { return PromiseTask; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ProviderTask", function() { return ProviderTask; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ContinuationTask", function() { return ContinuationTask; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TerminalTask", function() { return TerminalTask; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AggregateContinuationTask", function() { return AggregateContinuationTask; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AggregateTerminalTask", function() { return AggregateTerminalTask; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hasAsyncWork", function() { return hasAsyncWork; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");


const LifecycleTask = {
    done: {
        done: true,
        canCancel() { return false; },
        cancel() { return; },
        wait() { return Promise.resolve(); }
    }
};
var TaskSlot;
(function (TaskSlot) {
    TaskSlot[TaskSlot["beforeCreate"] = 0] = "beforeCreate";
    TaskSlot[TaskSlot["beforeRender"] = 1] = "beforeRender";
    TaskSlot[TaskSlot["beforeBind"] = 2] = "beforeBind";
    TaskSlot[TaskSlot["beforeAttach"] = 3] = "beforeAttach";
})(TaskSlot || (TaskSlot = {}));
const IStartTask = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["DI"].createInterface('IStartTask').noDefault();
var TaskType;
(function (TaskType) {
    TaskType[TaskType["with"] = 0] = "with";
    TaskType[TaskType["from"] = 1] = "from";
})(TaskType || (TaskType = {}));
// eslint-disable-next-line @typescript-eslint/class-name-casing
const StartTask = class $StartTask {
    constructor(type) {
        this.type = type;
        this._slot = void 0;
        this._promiseOrTask = void 0;
        this._container = void 0;
        this._key = void 0;
        this._callback = void 0;
        this._task = void 0;
    }
    get slot() {
        if (this._slot === void 0) {
            throw new Error('StartTask.slot is not set');
        }
        return this._slot;
    }
    get promiseOrTask() {
        if (this._promiseOrTask === void 0) {
            throw new Error('StartTask.promiseOrTask is not set');
        }
        return this._promiseOrTask;
    }
    get container() {
        if (this._container === void 0) {
            throw new Error('StartTask.container is not set');
        }
        return this._container;
    }
    get key() {
        if (this._key === void 0) {
            throw new Error('StartTask.key is not set');
        }
        return this._key;
    }
    get callback() {
        if (this._callback === void 0) {
            throw new Error('StartTask.callback is not set');
        }
        return this._callback;
    }
    get task() {
        if (this._task === void 0) {
            throw new Error('StartTask.task is not set');
        }
        return this._task;
    }
    static with(key) {
        const task = new $StartTask(0 /* with */);
        task._key = key;
        return task;
    }
    static from(promiseOrTask) {
        const task = new $StartTask(1 /* from */);
        task._promiseOrTask = promiseOrTask;
        return task;
    }
    beforeCreate() {
        return this.at(0 /* beforeCreate */);
    }
    beforeRender() {
        return this.at(1 /* beforeRender */);
    }
    beforeBind() {
        return this.at(2 /* beforeBind */);
    }
    beforeAttach() {
        return this.at(3 /* beforeAttach */);
    }
    at(slot) {
        this._slot = slot;
        return this;
    }
    call(fn) {
        this._callback = fn;
        return this;
    }
    register(container) {
        return this._container = container.register(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Registration"].instance(IStartTask, this));
    }
    resolveTask() {
        if (this._task === void 0) {
            switch (this.type) {
                case 0 /* with */:
                    this._task = new ProviderTask(this.container, this.key, this.callback);
                    break;
                case 1 /* from */:
                    this._task = new TerminalTask(this.promiseOrTask);
                    break;
            }
        }
        return this.task;
    }
};
const IStartTaskManager = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["DI"].createInterface('IStartTaskManager').noDefault();
let StartTaskManager = class StartTaskManager {
    constructor(locator) {
        this.locator = locator;
    }
    static register(container) {
        return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Registration"].singleton(IStartTaskManager, this).register(container);
    }
    runBeforeCreate(locator = this.locator) {
        return this.run(0 /* beforeCreate */, locator);
    }
    runBeforeRender(locator = this.locator) {
        return this.run(1 /* beforeRender */, locator);
    }
    runBeforeBind(locator = this.locator) {
        return this.run(2 /* beforeBind */, locator);
    }
    runBeforeAttach(locator = this.locator) {
        return this.run(3 /* beforeAttach */, locator);
    }
    run(slot, locator = this.locator) {
        const tasks = locator.getAll(IStartTask)
            .filter(startTask => startTask.slot === slot)
            .map(startTask => startTask.resolveTask())
            .filter(task => !task.done);
        if (tasks.length === 0) {
            return LifecycleTask.done;
        }
        return new AggregateTerminalTask(tasks);
    }
};
StartTaskManager = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(0, _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["IServiceLocator"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object])
], StartTaskManager);

class PromiseTask {
    constructor(promise, next, context, ...args) {
        this.done = false;
        this.hasStarted = false;
        this.isCancelled = false;
        this.promise = promise.then(value => {
            if (this.isCancelled === true) {
                return;
            }
            this.hasStarted = true;
            if (next !== null) {
                const nextResult = next.call(context, value, ...args);
                if (nextResult === void 0) {
                    this.done = true;
                }
                else {
                    const nextPromise = nextResult.then instanceof Function
                        ? nextResult
                        : nextResult.wait();
                    return nextPromise.then(() => {
                        this.done = true;
                    });
                }
            }
        });
    }
    canCancel() {
        return !this.hasStarted;
    }
    cancel() {
        if (this.canCancel()) {
            this.isCancelled = true;
        }
    }
    wait() {
        return this.promise;
    }
}
class ProviderTask {
    constructor(container, key, callback) {
        this.container = container;
        this.key = key;
        this.callback = callback;
        this.done = false;
    }
    canCancel() {
        return false;
    }
    cancel() {
        return;
    }
    wait() {
        if (this.promise === void 0) {
            const instance = this.container.get(this.key);
            const maybePromiseOrTask = this.callback.call(void 0, instance);
            this.promise = maybePromiseOrTask === void 0
                ? Promise.resolve()
                : maybePromiseOrTask.then instanceof Function
                    ? maybePromiseOrTask
                    : maybePromiseOrTask.wait();
            this.promise = this.promise.then(() => {
                this.done = true;
                this.container = (void 0);
                this.key = (void 0);
                this.callback = (void 0);
            }).catch(e => { throw e; });
        }
        return this.promise;
    }
}
class ContinuationTask {
    constructor(antecedent, next, context, ...args) {
        this.done = false;
        this.hasStarted = false;
        this.isCancelled = false;
        const promise = antecedent.then instanceof Function
            ? antecedent
            : antecedent.wait();
        this.promise = promise.then(() => {
            if (this.isCancelled === true) {
                return;
            }
            this.hasStarted = true;
            const nextResult = next.call(context, ...args);
            if (nextResult === void 0) {
                this.done = true;
            }
            else {
                const nextPromise = nextResult.then instanceof Function
                    ? nextResult
                    : nextResult.wait();
                return nextPromise.then(() => {
                    this.done = true;
                });
            }
        });
    }
    canCancel() {
        return !this.hasStarted;
    }
    cancel() {
        if (this.canCancel()) {
            this.isCancelled = true;
        }
    }
    wait() {
        return this.promise;
    }
}
class TerminalTask {
    constructor(antecedent) {
        this.done = false;
        this.promise = antecedent.then instanceof Function
            ? antecedent
            : antecedent.wait();
        this.promise.then(() => {
            this.done = true;
        }).catch(e => { throw e; });
    }
    canCancel() {
        return false;
    }
    cancel() {
        return;
    }
    wait() {
        return this.promise;
    }
}
class AggregateContinuationTask {
    constructor(antecedents, next, context, ...args) {
        this.done = false;
        this.hasStarted = false;
        this.isCancelled = false;
        this.promise = Promise.all(antecedents.map(t => t.wait())).then(() => {
            if (this.isCancelled === true) {
                return;
            }
            this.hasStarted = true;
            const nextResult = next.call(context, ...args);
            if (nextResult === void 0) {
                this.done = true;
            }
            else {
                return nextResult.wait().then(() => {
                    this.done = true;
                });
            }
        });
    }
    canCancel() {
        return !this.hasStarted;
    }
    cancel() {
        if (this.canCancel()) {
            this.isCancelled = true;
        }
    }
    wait() {
        return this.promise;
    }
}
class AggregateTerminalTask {
    constructor(antecedents) {
        this.done = false;
        this.promise = Promise.all(antecedents.map(t => t.wait())).then(() => {
            this.done = true;
        });
    }
    canCancel() {
        return false;
    }
    cancel() {
        return;
    }
    wait() {
        return this.promise;
    }
}
function hasAsyncWork(value) {
    return !(value === void 0 || value.done === true);
}
//# sourceMappingURL=lifecycle-task.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esnext/lifecycle.js":
/*!****************************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esnext/lifecycle.js ***!
  \****************************************************************/
/*! exports provided: ViewModelKind, IController, MountStrategy, IViewFactory, ILifecycle, BoundQueue, UnboundQueue, AttachedQueue, DetachedQueue, MountQueue, UnmountQueue, BatchQueue, Lifecycle */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ViewModelKind", function() { return ViewModelKind; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IController", function() { return IController; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MountStrategy", function() { return MountStrategy; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IViewFactory", function() { return IViewFactory; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ILifecycle", function() { return ILifecycle; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BoundQueue", function() { return BoundQueue; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UnboundQueue", function() { return UnboundQueue; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AttachedQueue", function() { return AttachedQueue; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DetachedQueue", function() { return DetachedQueue; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MountQueue", function() { return MountQueue; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UnmountQueue", function() { return UnmountQueue; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BatchQueue", function() { return BatchQueue; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Lifecycle", function() { return Lifecycle; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");


var ViewModelKind;
(function (ViewModelKind) {
    ViewModelKind[ViewModelKind["customElement"] = 0] = "customElement";
    ViewModelKind[ViewModelKind["customAttribute"] = 1] = "customAttribute";
    ViewModelKind[ViewModelKind["synthetic"] = 2] = "synthetic";
})(ViewModelKind || (ViewModelKind = {}));
const IController = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["DI"].createInterface('IController').noDefault();
/**
 * Describing characteristics of a mounting operation a controller will perform
 */
var MountStrategy;
(function (MountStrategy) {
    MountStrategy[MountStrategy["insertBefore"] = 1] = "insertBefore";
    MountStrategy[MountStrategy["append"] = 2] = "append";
})(MountStrategy || (MountStrategy = {}));
const IViewFactory = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["DI"].createInterface('IViewFactory').noDefault();
const ILifecycle = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["DI"].createInterface('ILifecycle').withDefault(x => x.singleton(Lifecycle));
let BoundQueue = class BoundQueue {
    constructor(lifecycle) {
        this.lifecycle = lifecycle;
        this.depth = 0;
        this.head = void 0;
        this.tail = void 0;
    }
    begin() {
        ++this.depth;
    }
    end(flags) {
        if (flags === void 0) {
            flags = 0 /* none */;
        }
        if (--this.depth === 0) {
            this.process(flags);
        }
    }
    inline(fn, flags) {
        this.begin();
        fn();
        this.end(flags);
    }
    add(controller) {
        if (this.head === void 0) {
            this.head = controller;
        }
        else {
            controller.prevBound = this.tail;
            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
            this.tail.nextBound = controller; // implied by boundHead not being undefined
        }
        this.tail = controller;
    }
    remove(controller) {
        if (controller.prevBound !== void 0) {
            controller.prevBound.nextBound = controller.nextBound;
        }
        if (controller.nextBound !== void 0) {
            controller.nextBound.prevBound = controller.prevBound;
        }
        controller.prevBound = void 0;
        controller.nextBound = void 0;
        if (this.tail === controller) {
            this.tail = controller.prevBound;
        }
        if (this.head === controller) {
            this.head = controller.nextBound;
        }
    }
    process(flags) {
        while (this.head !== void 0) {
            let cur = this.head;
            this.head = this.tail = void 0;
            let next;
            do {
                cur.afterBind(flags);
                next = cur.nextBound;
                cur.nextBound = void 0;
                cur.prevBound = void 0;
                // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
                cur = next; // we're checking it for undefined the next line
            } while (cur !== void 0);
        }
    }
};
BoundQueue = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(0, ILifecycle),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object])
], BoundQueue);

let UnboundQueue = class UnboundQueue {
    constructor(lifecycle) {
        this.lifecycle = lifecycle;
        this.depth = 0;
        this.head = void 0;
        this.tail = void 0;
    }
    begin() {
        ++this.depth;
    }
    end(flags) {
        if (flags === void 0) {
            flags = 0 /* none */;
        }
        if (--this.depth === 0) {
            this.process(flags);
        }
    }
    inline(fn, flags) {
        this.begin();
        fn();
        this.end(flags);
    }
    add(controller) {
        if (this.head === void 0) {
            this.head = controller;
        }
        else {
            controller.prevUnbound = this.tail;
            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
            this.tail.nextUnbound = controller; // implied by unboundHead not being undefined
        }
        this.tail = controller;
    }
    remove(controller) {
        if (controller.prevUnbound !== void 0) {
            controller.prevUnbound.nextUnbound = controller.nextUnbound;
        }
        if (controller.nextUnbound !== void 0) {
            controller.nextUnbound.prevUnbound = controller.prevUnbound;
        }
        controller.prevUnbound = void 0;
        controller.nextUnbound = void 0;
        if (this.tail === controller) {
            this.tail = controller.prevUnbound;
        }
        if (this.head === controller) {
            this.head = controller.nextUnbound;
        }
    }
    process(flags) {
        while (this.head !== void 0) {
            let cur = this.head;
            this.head = this.tail = void 0;
            let next;
            do {
                cur.afterUnbind(flags);
                next = cur.nextUnbound;
                cur.nextUnbound = void 0;
                cur.prevUnbound = void 0;
                // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
                cur = next; // we're checking it for undefined the next line
            } while (cur !== void 0);
        }
    }
};
UnboundQueue = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(0, ILifecycle),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object])
], UnboundQueue);

let AttachedQueue = class AttachedQueue {
    constructor(lifecycle) {
        this.lifecycle = lifecycle;
        this.depth = 0;
        this.head = void 0;
        this.tail = void 0;
    }
    begin() {
        ++this.depth;
    }
    end(flags) {
        if (flags === void 0) {
            flags = 0 /* none */;
        }
        if (--this.depth === 0) {
            // temporary, until everything else works and we're ready for integrating mount/unmount in the RAF queue
            this.lifecycle.mount.process(flags);
            this.process(flags);
        }
    }
    inline(fn, flags) {
        this.begin();
        fn();
        this.end(flags);
    }
    add(controller) {
        if (this.head === void 0) {
            this.head = controller;
        }
        else {
            controller.prevAttached = this.tail;
            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
            this.tail.nextAttached = controller; // implied by attachedHead not being undefined
        }
        this.tail = controller;
    }
    remove(controller) {
        if (controller.prevAttached !== void 0) {
            controller.prevAttached.nextAttached = controller.nextAttached;
        }
        if (controller.nextAttached !== void 0) {
            controller.nextAttached.prevAttached = controller.prevAttached;
        }
        controller.prevAttached = void 0;
        controller.nextAttached = void 0;
        if (this.tail === controller) {
            this.tail = controller.prevAttached;
        }
        if (this.head === controller) {
            this.head = controller.nextAttached;
        }
    }
    process(flags) {
        while (this.head !== void 0) {
            let cur = this.head;
            this.head = this.tail = void 0;
            let next;
            do {
                cur.afterAttach(flags);
                next = cur.nextAttached;
                cur.nextAttached = void 0;
                cur.prevAttached = void 0;
                // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
                cur = next; // we're checking it for undefined the next line
            } while (cur !== void 0);
        }
    }
};
AttachedQueue = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(0, ILifecycle),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object])
], AttachedQueue);

let DetachedQueue = class DetachedQueue {
    constructor(lifecycle) {
        this.lifecycle = lifecycle;
        this.depth = 0;
        this.head = void 0;
        this.tail = void 0;
    }
    begin() {
        ++this.depth;
    }
    end(flags) {
        if (flags === void 0) {
            flags = 0 /* none */;
        }
        if (--this.depth === 0) {
            // temporary, until everything else works and we're ready for integrating mount/unmount in the RAF queue
            this.lifecycle.unmount.process(flags);
            this.process(flags);
        }
    }
    inline(fn, flags) {
        this.begin();
        fn();
        this.end(flags);
    }
    add(controller) {
        if (this.head === void 0) {
            this.head = controller;
        }
        else {
            controller.prevDetached = this.tail;
            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
            this.tail.nextDetached = controller; // implied by detachedHead not being undefined
        }
        this.tail = controller;
    }
    remove(controller) {
        if (controller.prevDetached !== void 0) {
            controller.prevDetached.nextDetached = controller.nextDetached;
        }
        if (controller.nextDetached !== void 0) {
            controller.nextDetached.prevDetached = controller.prevDetached;
        }
        controller.prevDetached = void 0;
        controller.nextDetached = void 0;
        if (this.tail === controller) {
            this.tail = controller.prevDetached;
        }
        if (this.head === controller) {
            this.head = controller.nextDetached;
        }
    }
    process(flags) {
        while (this.head !== void 0) {
            let cur = this.head;
            this.head = this.tail = void 0;
            let next;
            do {
                cur.afterDetach(flags);
                next = cur.nextDetached;
                cur.nextDetached = void 0;
                cur.prevDetached = void 0;
                // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
                cur = next; // we're checking it for undefined the next line
            } while (cur !== void 0);
        }
    }
};
DetachedQueue = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(0, ILifecycle),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object])
], DetachedQueue);

let MountQueue = class MountQueue {
    constructor(lifecycle) {
        this.lifecycle = lifecycle;
        this.depth = 0;
        this.head = void 0;
        this.tail = void 0;
    }
    add(controller) {
        if (this.head === void 0) {
            this.head = controller;
        }
        else {
            controller.prevMount = this.tail;
            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
            this.tail.nextMount = controller; // implied by mountHead not being undefined
        }
        this.tail = controller;
    }
    remove(controller) {
        if (controller.prevMount !== void 0) {
            controller.prevMount.nextMount = controller.nextMount;
        }
        if (controller.nextMount !== void 0) {
            controller.nextMount.prevMount = controller.prevMount;
        }
        controller.prevMount = void 0;
        controller.nextMount = void 0;
        if (this.tail === controller) {
            this.tail = controller.prevMount;
        }
        if (this.head === controller) {
            this.head = controller.nextMount;
        }
    }
    process(flags) {
        let i = 0;
        while (this.head !== void 0) {
            let cur = this.head;
            this.head = this.tail = void 0;
            let next;
            do {
                ++i;
                cur.mount(flags);
                next = cur.nextMount;
                cur.nextMount = void 0;
                cur.prevMount = void 0;
                // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
                cur = next; // we're checking it for undefined the next line
            } while (cur !== void 0);
        }
    }
};
MountQueue = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(0, ILifecycle),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object])
], MountQueue);

let UnmountQueue = class UnmountQueue {
    constructor(lifecycle) {
        this.lifecycle = lifecycle;
        this.head = void 0;
        this.tail = void 0;
    }
    add(controller) {
        if (this.head === void 0) {
            this.head = controller;
        }
        else {
            controller.prevUnmount = this.tail;
            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
            this.tail.nextUnmount = controller; // implied by unmountHead not being undefined
        }
        this.tail = controller;
    }
    remove(controller) {
        if (controller.prevUnmount !== void 0) {
            controller.prevUnmount.nextUnmount = controller.nextUnmount;
        }
        if (controller.nextUnmount !== void 0) {
            controller.nextUnmount.prevUnmount = controller.prevUnmount;
        }
        controller.prevUnmount = void 0;
        controller.nextUnmount = void 0;
        if (this.tail === controller) {
            this.tail = controller.prevUnmount;
        }
        if (this.head === controller) {
            this.head = controller.nextUnmount;
        }
    }
    process(flags) {
        let i = 0;
        while (this.head !== void 0) {
            let cur = this.head;
            this.head = this.tail = void 0;
            let next;
            do {
                ++i;
                cur.unmount(flags);
                next = cur.nextUnmount;
                cur.nextUnmount = void 0;
                cur.prevUnmount = void 0;
                // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
                cur = next; // we're checking it for undefined the next line
            } while (cur !== void 0);
        }
    }
};
UnmountQueue = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(0, ILifecycle),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object])
], UnmountQueue);

let BatchQueue = class BatchQueue {
    constructor(lifecycle) {
        this.lifecycle = lifecycle;
        this.queue = [];
        this.depth = 0;
    }
    begin() {
        ++this.depth;
    }
    end(flags) {
        if (flags === void 0) {
            flags = 0 /* none */;
        }
        if (--this.depth === 0) {
            this.process(flags);
        }
    }
    inline(fn, flags) {
        this.begin();
        fn();
        this.end(flags);
    }
    add(requestor) {
        this.queue.push(requestor);
    }
    remove(requestor) {
        const index = this.queue.indexOf(requestor);
        if (index > -1) {
            this.queue.splice(index, 1);
        }
    }
    process(flags) {
        flags |= 512 /* fromBatch */;
        while (this.queue.length > 0) {
            const batch = this.queue.slice();
            this.queue = [];
            const { length } = batch;
            for (let i = 0; i < length; ++i) {
                batch[i].flushBatch(flags);
            }
        }
    }
};
BatchQueue = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(0, ILifecycle),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object])
], BatchQueue);

class Lifecycle {
    constructor() {
        this.batch = new BatchQueue(this);
        this.mount = new MountQueue(this);
        this.unmount = new UnmountQueue(this);
        this.afterBind = new BoundQueue(this);
        this.afterUnbind = new UnboundQueue(this);
        this.afterAttach = new AttachedQueue(this);
        this.afterDetach = new DetachedQueue(this);
    }
    static register(container) {
        return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Registration"].singleton(ILifecycle, this).register(container);
    }
}
//# sourceMappingURL=lifecycle.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esnext/observation.js":
/*!******************************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esnext/observation.js ***!
  \******************************************************************/
/*! exports provided: SubscriberFlags, DelegationStrategy, CollectionKind, copyIndexMap, createIndexMap, cloneIndexMap, isIndexMap */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SubscriberFlags", function() { return SubscriberFlags; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DelegationStrategy", function() { return DelegationStrategy; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CollectionKind", function() { return CollectionKind; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "copyIndexMap", function() { return copyIndexMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createIndexMap", function() { return createIndexMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "cloneIndexMap", function() { return cloneIndexMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isIndexMap", function() { return isIndexMap; });
/** @internal */
var SubscriberFlags;
(function (SubscriberFlags) {
    SubscriberFlags[SubscriberFlags["None"] = 0] = "None";
    SubscriberFlags[SubscriberFlags["Subscriber0"] = 1] = "Subscriber0";
    SubscriberFlags[SubscriberFlags["Subscriber1"] = 2] = "Subscriber1";
    SubscriberFlags[SubscriberFlags["Subscriber2"] = 4] = "Subscriber2";
    SubscriberFlags[SubscriberFlags["SubscribersRest"] = 8] = "SubscribersRest";
    SubscriberFlags[SubscriberFlags["Any"] = 15] = "Any";
})(SubscriberFlags || (SubscriberFlags = {}));
var DelegationStrategy;
(function (DelegationStrategy) {
    DelegationStrategy[DelegationStrategy["none"] = 0] = "none";
    DelegationStrategy[DelegationStrategy["capturing"] = 1] = "capturing";
    DelegationStrategy[DelegationStrategy["bubbling"] = 2] = "bubbling";
})(DelegationStrategy || (DelegationStrategy = {}));
var CollectionKind;
(function (CollectionKind) {
    CollectionKind[CollectionKind["indexed"] = 8] = "indexed";
    CollectionKind[CollectionKind["keyed"] = 4] = "keyed";
    CollectionKind[CollectionKind["array"] = 9] = "array";
    CollectionKind[CollectionKind["map"] = 6] = "map";
    CollectionKind[CollectionKind["set"] = 7] = "set";
})(CollectionKind || (CollectionKind = {}));
function copyIndexMap(existing, deletedItems) {
    const { length } = existing;
    const arr = Array(length);
    let i = 0;
    while (i < length) {
        arr[i] = existing[i];
        ++i;
    }
    if (deletedItems !== void 0) {
        arr.deletedItems = deletedItems.slice(0);
    }
    else if (existing.deletedItems !== void 0) {
        arr.deletedItems = existing.deletedItems.slice(0);
    }
    else {
        arr.deletedItems = [];
    }
    arr.isIndexMap = true;
    return arr;
}
function createIndexMap(length = 0) {
    const arr = Array(length);
    let i = 0;
    while (i < length) {
        arr[i] = i++;
    }
    arr.deletedItems = [];
    arr.isIndexMap = true;
    return arr;
}
function cloneIndexMap(indexMap) {
    const clone = indexMap.slice();
    clone.deletedItems = indexMap.deletedItems.slice();
    clone.isIndexMap = true;
    return clone;
}
function isIndexMap(value) {
    return value instanceof Array && value.isIndexMap === true;
}
//# sourceMappingURL=observation.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esnext/observation/array-observer.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esnext/observation/array-observer.js ***!
  \*********************************************************************************/
/*! exports provided: enableArrayObservation, disableArrayObservation, ArrayObserver, ArrayIndexObserver, getArrayObserver, applyMutationsToIndices, synchronizeIndices */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "enableArrayObservation", function() { return enableArrayObservation; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "disableArrayObservation", function() { return disableArrayObservation; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ArrayObserver", function() { return ArrayObserver; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ArrayIndexObserver", function() { return ArrayIndexObserver; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getArrayObserver", function() { return getArrayObserver; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "applyMutationsToIndices", function() { return applyMutationsToIndices; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "synchronizeIndices", function() { return synchronizeIndices; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _lifecycle__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../lifecycle */ "./node_modules/@aurelia/runtime/dist/esnext/lifecycle.js");
/* harmony import */ var _observation__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../observation */ "./node_modules/@aurelia/runtime/dist/esnext/observation.js");
/* harmony import */ var _collection_length_observer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./collection-length-observer */ "./node_modules/@aurelia/runtime/dist/esnext/observation/collection-length-observer.js");
/* harmony import */ var _subscriber_collection__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./subscriber-collection */ "./node_modules/@aurelia/runtime/dist/esnext/observation/subscriber-collection.js");





const observerLookup = new WeakMap();
// https://tc39.github.io/ecma262/#sec-sortcompare
function sortCompare(x, y) {
    if (x === y) {
        return 0;
    }
    x = x === null ? 'null' : x.toString();
    y = y === null ? 'null' : y.toString();
    return x < y ? -1 : 1;
}
function preSortCompare(x, y) {
    if (x === void 0) {
        if (y === void 0) {
            return 0;
        }
        else {
            return 1;
        }
    }
    if (y === void 0) {
        return -1;
    }
    return 0;
}
function insertionSort(arr, indexMap, from, to, compareFn) {
    let velement, ielement, vtmp, itmp, order;
    let i, j;
    for (i = from + 1; i < to; i++) {
        velement = arr[i];
        ielement = indexMap[i];
        for (j = i - 1; j >= from; j--) {
            vtmp = arr[j];
            itmp = indexMap[j];
            order = compareFn(vtmp, velement);
            if (order > 0) {
                arr[j + 1] = vtmp;
                indexMap[j + 1] = itmp;
            }
            else {
                break;
            }
        }
        arr[j + 1] = velement;
        indexMap[j + 1] = ielement;
    }
}
function quickSort(arr, indexMap, from, to, compareFn) {
    let thirdIndex = 0, i = 0;
    let v0, v1, v2;
    let i0, i1, i2;
    let c01, c02, c12;
    let vtmp, itmp;
    let vpivot, ipivot, lowEnd, highStart;
    let velement, ielement, order, vtopElement;
    // eslint-disable-next-line no-constant-condition
    while (true) {
        if (to - from <= 10) {
            insertionSort(arr, indexMap, from, to, compareFn);
            return;
        }
        thirdIndex = from + ((to - from) >> 1);
        v0 = arr[from];
        i0 = indexMap[from];
        v1 = arr[to - 1];
        i1 = indexMap[to - 1];
        v2 = arr[thirdIndex];
        i2 = indexMap[thirdIndex];
        c01 = compareFn(v0, v1);
        if (c01 > 0) {
            vtmp = v0;
            itmp = i0;
            v0 = v1;
            i0 = i1;
            v1 = vtmp;
            i1 = itmp;
        }
        c02 = compareFn(v0, v2);
        if (c02 >= 0) {
            vtmp = v0;
            itmp = i0;
            v0 = v2;
            i0 = i2;
            v2 = v1;
            i2 = i1;
            v1 = vtmp;
            i1 = itmp;
        }
        else {
            c12 = compareFn(v1, v2);
            if (c12 > 0) {
                vtmp = v1;
                itmp = i1;
                v1 = v2;
                i1 = i2;
                v2 = vtmp;
                i2 = itmp;
            }
        }
        arr[from] = v0;
        indexMap[from] = i0;
        arr[to - 1] = v2;
        indexMap[to - 1] = i2;
        vpivot = v1;
        ipivot = i1;
        lowEnd = from + 1;
        highStart = to - 1;
        arr[thirdIndex] = arr[lowEnd];
        indexMap[thirdIndex] = indexMap[lowEnd];
        arr[lowEnd] = vpivot;
        indexMap[lowEnd] = ipivot;
        partition: for (i = lowEnd + 1; i < highStart; i++) {
            velement = arr[i];
            ielement = indexMap[i];
            order = compareFn(velement, vpivot);
            if (order < 0) {
                arr[i] = arr[lowEnd];
                indexMap[i] = indexMap[lowEnd];
                arr[lowEnd] = velement;
                indexMap[lowEnd] = ielement;
                lowEnd++;
            }
            else if (order > 0) {
                do {
                    highStart--;
                    // eslint-disable-next-line eqeqeq
                    if (highStart == i) {
                        break partition;
                    }
                    vtopElement = arr[highStart];
                    order = compareFn(vtopElement, vpivot);
                } while (order > 0);
                arr[i] = arr[highStart];
                indexMap[i] = indexMap[highStart];
                arr[highStart] = velement;
                indexMap[highStart] = ielement;
                if (order < 0) {
                    velement = arr[i];
                    ielement = indexMap[i];
                    arr[i] = arr[lowEnd];
                    indexMap[i] = indexMap[lowEnd];
                    arr[lowEnd] = velement;
                    indexMap[lowEnd] = ielement;
                    lowEnd++;
                }
            }
        }
        if (to - highStart < lowEnd - from) {
            quickSort(arr, indexMap, highStart, to, compareFn);
            to = lowEnd;
        }
        else {
            quickSort(arr, indexMap, from, lowEnd, compareFn);
            from = highStart;
        }
    }
}
const proto = Array.prototype;
const $push = proto.push;
const $unshift = proto.unshift;
const $pop = proto.pop;
const $shift = proto.shift;
const $splice = proto.splice;
const $reverse = proto.reverse;
const $sort = proto.sort;
const native = { push: $push, unshift: $unshift, pop: $pop, shift: $shift, splice: $splice, reverse: $reverse, sort: $sort };
const methods = ['push', 'unshift', 'pop', 'shift', 'splice', 'reverse', 'sort'];
const observe = {
    // https://tc39.github.io/ecma262/#sec-array.prototype.push
    push: function (...args) {
        let $this = this;
        if ($this.$raw !== void 0) {
            $this = $this.$raw;
        }
        const o = observerLookup.get($this);
        if (o === void 0) {
            return $push.apply($this, args);
        }
        const len = $this.length;
        const argCount = args.length;
        if (argCount === 0) {
            return len;
        }
        $this.length = o.indexMap.length = len + argCount;
        let i = len;
        while (i < $this.length) {
            $this[i] = args[i - len];
            o.indexMap[i] = -2;
            i++;
        }
        o.notify();
        return $this.length;
    },
    // https://tc39.github.io/ecma262/#sec-array.prototype.unshift
    unshift: function (...args) {
        let $this = this;
        if ($this.$raw !== void 0) {
            $this = $this.$raw;
        }
        const o = observerLookup.get($this);
        if (o === void 0) {
            return $unshift.apply($this, args);
        }
        const argCount = args.length;
        const inserts = new Array(argCount);
        let i = 0;
        while (i < argCount) {
            inserts[i++] = -2;
        }
        $unshift.apply(o.indexMap, inserts);
        const len = $unshift.apply($this, args);
        o.notify();
        return len;
    },
    // https://tc39.github.io/ecma262/#sec-array.prototype.pop
    pop: function () {
        let $this = this;
        if ($this.$raw !== void 0) {
            $this = $this.$raw;
        }
        const o = observerLookup.get($this);
        if (o === void 0) {
            return $pop.call($this);
        }
        const indexMap = o.indexMap;
        const element = $pop.call($this);
        // only mark indices as deleted if they actually existed in the original array
        const index = indexMap.length - 1;
        if (indexMap[index] > -1) {
            indexMap.deletedItems.push(indexMap[index]);
        }
        $pop.call(indexMap);
        o.notify();
        return element;
    },
    // https://tc39.github.io/ecma262/#sec-array.prototype.shift
    shift: function () {
        let $this = this;
        if ($this.$raw !== void 0) {
            $this = $this.$raw;
        }
        const o = observerLookup.get($this);
        if (o === void 0) {
            return $shift.call($this);
        }
        const indexMap = o.indexMap;
        const element = $shift.call($this);
        // only mark indices as deleted if they actually existed in the original array
        if (indexMap[0] > -1) {
            indexMap.deletedItems.push(indexMap[0]);
        }
        $shift.call(indexMap);
        o.notify();
        return element;
    },
    // https://tc39.github.io/ecma262/#sec-array.prototype.splice
    splice: function (...args) {
        const start = args[0];
        const deleteCount = args[1];
        let $this = this;
        if ($this.$raw !== void 0) {
            $this = $this.$raw;
        }
        const o = observerLookup.get($this);
        if (o === void 0) {
            return $splice.apply($this, args);
        }
        const len = this.length;
        const relativeStart = start | 0;
        const actualStart = relativeStart < 0 ? Math.max((len + relativeStart), 0) : Math.min(relativeStart, len);
        const indexMap = o.indexMap;
        const argCount = args.length;
        const actualDeleteCount = argCount === 0 ? 0 : argCount === 1 ? len - actualStart : deleteCount;
        if (actualDeleteCount > 0) {
            let i = actualStart;
            const to = i + actualDeleteCount;
            while (i < to) {
                if (indexMap[i] > -1) {
                    indexMap.deletedItems.push(indexMap[i]);
                }
                i++;
            }
        }
        if (argCount > 2) {
            const itemCount = argCount - 2;
            const inserts = new Array(itemCount);
            let i = 0;
            while (i < itemCount) {
                inserts[i++] = -2;
            }
            $splice.call(indexMap, start, deleteCount, ...inserts);
        }
        else {
            $splice.apply(indexMap, args);
        }
        const deleted = $splice.apply($this, args);
        o.notify();
        return deleted;
    },
    // https://tc39.github.io/ecma262/#sec-array.prototype.reverse
    reverse: function () {
        let $this = this;
        if ($this.$raw !== void 0) {
            $this = $this.$raw;
        }
        const o = observerLookup.get($this);
        if (o === void 0) {
            $reverse.call($this);
            return this;
        }
        const len = $this.length;
        const middle = (len / 2) | 0;
        let lower = 0;
        while (lower !== middle) {
            const upper = len - lower - 1;
            const lowerValue = $this[lower];
            const lowerIndex = o.indexMap[lower];
            const upperValue = $this[upper];
            const upperIndex = o.indexMap[upper];
            $this[lower] = upperValue;
            o.indexMap[lower] = upperIndex;
            $this[upper] = lowerValue;
            o.indexMap[upper] = lowerIndex;
            lower++;
        }
        o.notify();
        return this;
    },
    // https://tc39.github.io/ecma262/#sec-array.prototype.sort
    // https://github.com/v8/v8/blob/master/src/js/array.js
    sort: function (compareFn) {
        let $this = this;
        if ($this.$raw !== void 0) {
            $this = $this.$raw;
        }
        const o = observerLookup.get($this);
        if (o === void 0) {
            $sort.call($this, compareFn);
            return this;
        }
        const len = $this.length;
        if (len < 2) {
            return this;
        }
        quickSort($this, o.indexMap, 0, len, preSortCompare);
        let i = 0;
        while (i < len) {
            if ($this[i] === void 0) {
                break;
            }
            i++;
        }
        if (compareFn === void 0 || typeof compareFn !== 'function' /* spec says throw a TypeError, should we do that too? */) {
            compareFn = sortCompare;
        }
        quickSort($this, o.indexMap, 0, i, compareFn);
        o.notify();
        return this;
    }
};
const descriptorProps = {
    writable: true,
    enumerable: false,
    configurable: true
};
const def = Reflect.defineProperty;
for (const method of methods) {
    def(observe[method], 'observing', { value: true, writable: false, configurable: false, enumerable: false });
}
let enableArrayObservationCalled = false;
function enableArrayObservation() {
    for (const method of methods) {
        if (proto[method].observing !== true) {
            def(proto, method, { ...descriptorProps, value: observe[method] });
        }
    }
}
function disableArrayObservation() {
    for (const method of methods) {
        if (proto[method].observing === true) {
            def(proto, method, { ...descriptorProps, value: native[method] });
        }
    }
}
let ArrayObserver = class ArrayObserver {
    constructor(flags, lifecycle, array) {
        if (!enableArrayObservationCalled) {
            enableArrayObservationCalled = true;
            enableArrayObservation();
        }
        this.inBatch = false;
        this.indexObservers = {};
        this.collection = array;
        this.persistentFlags = flags & 2080374799 /* persistentBindingFlags */;
        this.indexMap = Object(_observation__WEBPACK_IMPORTED_MODULE_2__["createIndexMap"])(array.length);
        this.lifecycle = lifecycle;
        this.lengthObserver = (void 0);
        observerLookup.set(array, this);
    }
    notify() {
        if (this.lifecycle.batch.depth > 0) {
            if (!this.inBatch) {
                this.inBatch = true;
                this.lifecycle.batch.add(this);
            }
        }
        else {
            this.flushBatch(0 /* none */);
        }
    }
    getLengthObserver() {
        if (this.lengthObserver === void 0) {
            this.lengthObserver = new _collection_length_observer__WEBPACK_IMPORTED_MODULE_3__["CollectionLengthObserver"](this.collection);
        }
        return this.lengthObserver;
    }
    getIndexObserver(index) {
        return this.getOrCreateIndexObserver(index);
    }
    flushBatch(flags) {
        this.inBatch = false;
        const indexMap = this.indexMap;
        const length = this.collection.length;
        this.indexMap = Object(_observation__WEBPACK_IMPORTED_MODULE_2__["createIndexMap"])(length);
        this.callCollectionSubscribers(indexMap, 16 /* updateTargetInstance */ | this.persistentFlags);
        if (this.lengthObserver !== void 0) {
            this.lengthObserver.setValue(length, 16 /* updateTargetInstance */);
        }
    }
    /**
     * @internal used by friend class ArrayIndexObserver only
     */
    addIndexObserver(indexObserver) {
        this.addCollectionSubscriber(indexObserver);
    }
    /**
     * @internal used by friend class ArrayIndexObserver only
     */
    removeIndexObserver(indexObserver) {
        this.removeCollectionSubscriber(indexObserver);
    }
    /**
     * @internal
     */
    getOrCreateIndexObserver(index) {
        const indexObservers = this.indexObservers;
        let observer = indexObservers[index];
        if (observer === void 0) {
            observer = indexObservers[index] = new ArrayIndexObserver(this, index);
        }
        return observer;
    }
};
ArrayObserver = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_subscriber_collection__WEBPACK_IMPORTED_MODULE_4__["collectionSubscriberCollection"])(),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Number, Object, Object])
], ArrayObserver);

let ArrayIndexObserver = class ArrayIndexObserver {
    constructor(owner, index) {
        this.owner = owner;
        this.index = index;
        this.subscriberCount = 0;
        this.currentValue = this.getValue();
    }
    getValue() {
        return this.owner.collection[this.index];
    }
    setValue(newValue, flags) {
        if (newValue === this.getValue()) {
            return;
        }
        const arrayObserver = this.owner;
        const index = this.index;
        const indexMap = arrayObserver.indexMap;
        if (indexMap[index] > -1) {
            indexMap.deletedItems.push(indexMap[index]);
        }
        indexMap[index] = -2;
        // do not need to update current value here
        // as it will be updated inside handle collection change
        arrayObserver.collection[index] = newValue;
        arrayObserver.notify();
    }
    /**
     * From interface `ICollectionSubscriber`
     */
    handleCollectionChange(indexMap, flags) {
        const index = this.index;
        const noChange = indexMap[index] === index;
        if (noChange) {
            return;
        }
        const prevValue = this.currentValue;
        const currValue = this.currentValue = this.getValue();
        // hmm
        if (prevValue !== currValue) {
            this.callSubscribers(currValue, prevValue, flags);
        }
    }
    subscribe(subscriber) {
        if (this.addSubscriber(subscriber) && ++this.subscriberCount === 1) {
            this.owner.addIndexObserver(this);
        }
    }
    unsubscribe(subscriber) {
        if (this.removeSubscriber(subscriber) && --this.subscriberCount === 0) {
            this.owner.removeIndexObserver(this);
        }
    }
};
ArrayIndexObserver = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_subscriber_collection__WEBPACK_IMPORTED_MODULE_4__["subscriberCollection"])(),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [ArrayObserver, Number])
], ArrayIndexObserver);

function getArrayObserver(flags, lifecycle, array) {
    const observer = observerLookup.get(array);
    if (observer === void 0) {
        return new ArrayObserver(flags, lifecycle, array);
    }
    return observer;
}
/**
 * Applies offsets to the non-negative indices in the IndexMap
 * based on added and deleted items relative to those indices.
 *
 * e.g. turn `[-2, 0, 1]` into `[-2, 1, 2]`, allowing the values at the indices to be
 * used for sorting/reordering items if needed
 */
function applyMutationsToIndices(indexMap) {
    let offset = 0;
    let j = 0;
    const len = indexMap.length;
    for (let i = 0; i < len; ++i) {
        while (indexMap.deletedItems[j] <= i - offset) {
            ++j;
            --offset;
        }
        if (indexMap[i] === -2) {
            ++offset;
        }
        else {
            indexMap[i] += offset;
        }
    }
}
/**
 * After `applyMutationsToIndices`, this function can be used to reorder items in a derived
 * array (e.g.  the items in the `views` in the repeater are derived from the `items` property)
 */
function synchronizeIndices(items, indexMap) {
    const copy = items.slice();
    const len = indexMap.length;
    let to = 0;
    let from = 0;
    while (to < len) {
        from = indexMap[to];
        if (from !== -2) {
            items[to] = copy[from];
        }
        ++to;
    }
}
//# sourceMappingURL=array-observer.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esnext/observation/bindable-observer.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esnext/observation/bindable-observer.js ***!
  \************************************************************************************/
/*! exports provided: BindableObserver */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BindableObserver", function() { return BindableObserver; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _lifecycle__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lifecycle */ "./node_modules/@aurelia/runtime/dist/esnext/lifecycle.js");
/* harmony import */ var _proxy_observer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./proxy-observer */ "./node_modules/@aurelia/runtime/dist/esnext/observation/proxy-observer.js");
/* harmony import */ var _subscriber_collection__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./subscriber-collection */ "./node_modules/@aurelia/runtime/dist/esnext/observation/subscriber-collection.js");
var BindableObserver_1;





let BindableObserver = BindableObserver_1 = class BindableObserver {
    constructor(lifecycle, flags, obj, propertyKey, cbName, $set) {
        this.lifecycle = lifecycle;
        this.obj = obj;
        this.propertyKey = propertyKey;
        this.$set = $set;
        this.currentValue = void 0;
        this.oldValue = void 0;
        this.inBatch = false;
        let isProxy = false;
        if (_proxy_observer__WEBPACK_IMPORTED_MODULE_3__["ProxyObserver"].isProxy(obj)) {
            isProxy = true;
            obj.$observer.subscribe(this, propertyKey);
            this.obj = obj.$raw;
        }
        this.callback = this.obj[cbName];
        const propertyChangedCallback = this.propertyChangedCallback = this.obj.propertyChanged;
        const hasPropertyChangedCallback = this.hasPropertyChangedCallback = typeof propertyChangedCallback === 'function';
        const shouldInterceptSet = this.shouldInterceptSet = $set !== _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["PLATFORM"].noop;
        // when user declare @bindable({ set })
        // it's expected to work from the start,
        // regardless where the assignment comes from: either direct view model assignment or from binding during render
        // so if either getter/setter config is present, alter the accessor straight await
        if (this.callback === void 0 && !hasPropertyChangedCallback && !shouldInterceptSet) {
            this.observing = false;
        }
        else {
            this.observing = true;
            const currentValue = obj[propertyKey];
            this.currentValue = shouldInterceptSet && currentValue !== void 0
                ? $set(currentValue)
                : currentValue;
            if (!isProxy) {
                this.createGetterSetter();
            }
        }
        this.persistentFlags = flags & 2080374799 /* persistentBindingFlags */;
    }
    handleChange(newValue, oldValue, flags) {
        this.setValue(newValue, flags);
    }
    getValue() {
        return this.currentValue;
    }
    setValue(newValue, flags) {
        if (this.shouldInterceptSet) {
            newValue = this.$set(newValue);
        }
        if (this.observing) {
            const currentValue = this.currentValue;
            // eslint-disable-next-line compat/compat
            if (Object.is(newValue, currentValue)) {
                return;
            }
            this.currentValue = newValue;
            if (this.lifecycle.batch.depth === 0) {
                this.callSubscribers(newValue, currentValue, this.persistentFlags | flags);
                if ((flags & 4096 /* fromBind */) === 0 || (flags & 32 /* updateSourceExpression */) > 0) {
                    const callback = this.callback;
                    if (callback !== void 0) {
                        callback.call(this.obj, newValue, currentValue, this.persistentFlags | flags);
                    }
                    if (this.hasPropertyChangedCallback) {
                        // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion
                        this.propertyChangedCallback.call(this.obj, this.propertyKey, newValue, currentValue, this.persistentFlags | flags);
                    }
                }
            }
            else if (!this.inBatch) {
                this.inBatch = true;
                this.oldValue = currentValue;
                this.lifecycle.batch.add(this);
            }
        }
        else {
            // See SetterObserver.setValue for explanation
            this.obj[this.propertyKey] = newValue;
        }
    }
    subscribe(subscriber) {
        if (this.observing === false) {
            this.observing = true;
            const currentValue = this.obj[this.propertyKey];
            this.currentValue = this.shouldInterceptSet
                ? this.$set(currentValue)
                : currentValue;
            this.createGetterSetter();
        }
        this.addSubscriber(subscriber);
    }
    createGetterSetter() {
        if (!Reflect.defineProperty(this.obj, this.propertyKey, {
            enumerable: true,
            configurable: true,
            get: () => this.currentValue,
            set: (value) => {
                this.setValue(value, 0 /* none */);
            }
        })) {
            _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Reporter"].write(1, this.propertyKey, this.obj);
        }
    }
};
BindableObserver = BindableObserver_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_subscriber_collection__WEBPACK_IMPORTED_MODULE_4__["subscriberCollection"])(),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object, Number, Object, String, String, Function])
], BindableObserver);

//# sourceMappingURL=bindable-observer.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esnext/observation/binding-context.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esnext/observation/binding-context.js ***!
  \**********************************************************************************/
/*! exports provided: InternalObserversLookup, BindingContext, Scope, OverrideContext */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "InternalObserversLookup", function() { return InternalObserversLookup; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BindingContext", function() { return BindingContext; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Scope", function() { return Scope; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OverrideContext", function() { return OverrideContext; });
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _proxy_observer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./proxy-observer */ "./node_modules/@aurelia/runtime/dist/esnext/observation/proxy-observer.js");
/* harmony import */ var _setter_observer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./setter-observer */ "./node_modules/@aurelia/runtime/dist/esnext/observation/setter-observer.js");



var RuntimeError;
(function (RuntimeError) {
    RuntimeError[RuntimeError["NilScope"] = 250] = "NilScope";
    RuntimeError[RuntimeError["NilOverrideContext"] = 252] = "NilOverrideContext";
    RuntimeError[RuntimeError["NilParentScope"] = 253] = "NilParentScope";
})(RuntimeError || (RuntimeError = {}));
const marker = Object.freeze({});
/** @internal */
class InternalObserversLookup {
    getOrCreate(lifecycle, flags, obj, key) {
        if (this[key] === void 0) {
            this[key] = new _setter_observer__WEBPACK_IMPORTED_MODULE_2__["SetterObserver"](lifecycle, flags, obj, key);
        }
        return this[key];
    }
}
class BindingContext {
    constructor(keyOrObj, value) {
        this.$synthetic = true;
        if (keyOrObj !== void 0) {
            if (value !== void 0) {
                // if value is defined then it's just a property and a value to initialize with
                this[keyOrObj] = value;
            }
            else {
                // can either be some random object or another bindingContext to clone from
                for (const prop in keyOrObj) {
                    if (Object.prototype.hasOwnProperty.call(keyOrObj, prop)) {
                        this[prop] = keyOrObj[prop];
                    }
                }
            }
        }
    }
    static create(flags, keyOrObj, value) {
        const bc = new BindingContext(keyOrObj, value);
        if (flags & 2 /* proxyStrategy */) {
            return _proxy_observer__WEBPACK_IMPORTED_MODULE_1__["ProxyObserver"].getOrCreate(bc).proxy;
        }
        return bc;
    }
    static get(scope, name, ancestor, flags, part) {
        if (scope == null) {
            throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].error(250 /* NilScope */);
        }
        let overrideContext = scope.overrideContext;
        if (ancestor > 0) {
            // jump up the required number of ancestor contexts (eg $parent.$parent requires two jumps)
            while (ancestor > 0) {
                if (overrideContext.parentOverrideContext == null) {
                    return void 0;
                }
                ancestor--;
                overrideContext = overrideContext.parentOverrideContext;
            }
            return name in overrideContext ? overrideContext : overrideContext.bindingContext;
        }
        // traverse the context and it's ancestors, searching for a context that has the name.
        while (overrideContext && !(name in overrideContext) && !(overrideContext.bindingContext && name in overrideContext.bindingContext)) {
            overrideContext = overrideContext.parentOverrideContext;
        }
        if (overrideContext) {
            // we located a context with the property.  return it.
            return name in overrideContext ? overrideContext : overrideContext.bindingContext;
        }
        // the name wasn't found. see if parent scope traversal is allowed and if so, try that
        if ((flags & 67108864 /* allowParentScopeTraversal */) > 0) {
            let parent = scope.parentScope;
            while (parent !== null) {
                if (parent.scopeParts.includes(part)) {
                    const result = this.get(parent, name, ancestor, flags
                        // unset the flag; only allow one level of scope boundary traversal
                        & ~67108864 /* allowParentScopeTraversal */
                        // tell the scope to return null if the name could not be found
                        | 4194304 /* isTraversingParentScope */);
                    if (result === marker) {
                        return scope.bindingContext || scope.overrideContext;
                    }
                    else {
                        return result;
                    }
                }
                else {
                    parent = parent.parentScope;
                }
            }
            if (parent === null) {
                throw new Error(`No target scope could be found for part "${part}"`);
            }
        }
        // still nothing found. return the root binding context (or null
        // if this is a parent scope traversal, to ensure we fall back to the
        // correct level)
        if (flags & 4194304 /* isTraversingParentScope */) {
            return marker;
        }
        return scope.bindingContext || scope.overrideContext;
    }
    getObservers(flags) {
        if (this.$observers == null) {
            this.$observers = new InternalObserversLookup();
        }
        return this.$observers;
    }
}
class Scope {
    constructor(parentScope, bindingContext, overrideContext) {
        this.parentScope = parentScope;
        this.scopeParts = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["PLATFORM"].emptyArray;
        this.bindingContext = bindingContext;
        this.overrideContext = overrideContext;
    }
    static create(flags, bc, oc) {
        return new Scope(null, bc, oc == null ? OverrideContext.create(flags, bc, oc) : oc);
    }
    static fromOverride(flags, oc) {
        if (oc == null) {
            throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].error(252 /* NilOverrideContext */);
        }
        return new Scope(null, oc.bindingContext, oc);
    }
    static fromParent(flags, ps, bc) {
        if (ps == null) {
            throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Reporter"].error(253 /* NilParentScope */);
        }
        return new Scope(ps, bc, OverrideContext.create(flags, bc, ps.overrideContext));
    }
}
class OverrideContext {
    constructor(bindingContext, parentOverrideContext) {
        this.$synthetic = true;
        this.bindingContext = bindingContext;
        this.parentOverrideContext = parentOverrideContext;
    }
    static create(flags, bc, poc) {
        return new OverrideContext(bc, poc === void 0 ? null : poc);
    }
    getObservers() {
        if (this.$observers === void 0) {
            this.$observers = new InternalObserversLookup();
        }
        return this.$observers;
    }
}
//# sourceMappingURL=binding-context.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esnext/observation/collection-length-observer.js":
/*!*********************************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esnext/observation/collection-length-observer.js ***!
  \*********************************************************************************************/
/*! exports provided: CollectionLengthObserver */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CollectionLengthObserver", function() { return CollectionLengthObserver; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _subscriber_collection__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./subscriber-collection */ "./node_modules/@aurelia/runtime/dist/esnext/observation/subscriber-collection.js");


let CollectionLengthObserver = class CollectionLengthObserver {
    constructor(obj) {
        this.obj = obj;
        this.currentValue = obj.length;
    }
    getValue() {
        return this.obj.length;
    }
    setValue(newValue, flags) {
        const { currentValue } = this;
        if (newValue !== currentValue) {
            this.currentValue = newValue;
            this.callSubscribers(newValue, currentValue, flags | 16 /* updateTargetInstance */);
        }
    }
};
CollectionLengthObserver = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_subscriber_collection__WEBPACK_IMPORTED_MODULE_1__["subscriberCollection"])(),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Array])
], CollectionLengthObserver);

//# sourceMappingURL=collection-length-observer.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esnext/observation/collection-size-observer.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esnext/observation/collection-size-observer.js ***!
  \*******************************************************************************************/
/*! exports provided: CollectionSizeObserver */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CollectionSizeObserver", function() { return CollectionSizeObserver; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _subscriber_collection__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./subscriber-collection */ "./node_modules/@aurelia/runtime/dist/esnext/observation/subscriber-collection.js");


let CollectionSizeObserver = class CollectionSizeObserver {
    constructor(obj) {
        this.obj = obj;
        this.currentValue = obj.size;
    }
    getValue() {
        return this.obj.size;
    }
    setValue(newValue, flags) {
        const { currentValue } = this;
        if (newValue !== currentValue) {
            this.currentValue = newValue;
            this.callSubscribers(newValue, currentValue, flags | 16 /* updateTargetInstance */);
        }
    }
};
CollectionSizeObserver = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_subscriber_collection__WEBPACK_IMPORTED_MODULE_1__["subscriberCollection"])(),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object])
], CollectionSizeObserver);

//# sourceMappingURL=collection-size-observer.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esnext/observation/computed-observer.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esnext/observation/computed-observer.js ***!
  \************************************************************************************/
/*! exports provided: computed, createComputedObserver, CustomSetterObserver, GetterObserver */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "computed", function() { return computed; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createComputedObserver", function() { return createComputedObserver; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CustomSetterObserver", function() { return CustomSetterObserver; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GetterObserver", function() { return GetterObserver; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _observer_locator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./observer-locator */ "./node_modules/@aurelia/runtime/dist/esnext/observation/observer-locator.js");
/* harmony import */ var _subscriber_collection__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./subscriber-collection */ "./node_modules/@aurelia/runtime/dist/esnext/observation/subscriber-collection.js");

/* eslint-disable eqeqeq, compat/compat */



function computed(config) {
    return function (target, key) {
        /**
         * The 'computed' property defined on prototype needs to be non-enumerable to prevent getting this in loops,
         * iterating over object properties, such as for..in.
         *
         * The 'value' of the property should not have any prototype. Otherwise if by mistake the target passed
         * here is `Object`, then we are in soup. Because then every instance of `Object` will have the `computed`
         * property, including the `value` (in the descriptor of the property), when assigned `{}`. This might
         * lead to infinite recursion for the cases as mentioned above.
         */
        if (target.computed == null) {
            Reflect.defineProperty(target, 'computed', {
                writable: true,
                configurable: true,
                enumerable: false,
                value: Object.create(null)
            });
        }
        // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion
        target.computed[key] = config;
    };
}
const computedOverrideDefaults = { static: false, volatile: false };
/* @internal */
function createComputedObserver(flags, observerLocator, dirtyChecker, lifecycle, instance, propertyName, descriptor) {
    if (descriptor.configurable === false) {
        return dirtyChecker.createProperty(instance, propertyName);
    }
    if (descriptor.get != null) {
        const { constructor: { prototype: { computed: givenOverrides } } } = instance;
        // eslint-disable-next-line @typescript-eslint/strict-boolean-expressions, @typescript-eslint/no-unnecessary-type-assertion
        const overrides = givenOverrides && givenOverrides[propertyName] || computedOverrideDefaults;
        if (descriptor.set != null) {
            if (overrides.volatile) {
                return new GetterObserver(flags, overrides, instance, propertyName, descriptor, observerLocator);
            }
            return new CustomSetterObserver(instance, propertyName, descriptor);
        }
        return new GetterObserver(flags, overrides, instance, propertyName, descriptor, observerLocator);
    }
    throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Reporter"].error(18, propertyName);
}
// Used when the getter is dependent solely on changes that happen within the setter.
let CustomSetterObserver = class CustomSetterObserver {
    constructor(obj, propertyKey, descriptor) {
        this.obj = obj;
        this.propertyKey = propertyKey;
        this.descriptor = descriptor;
        this.currentValue = void 0;
        this.oldValue = void 0;
        this.observing = false;
    }
    setValue(newValue) {
        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion, @typescript-eslint/no-unnecessary-type-assertion
        this.descriptor.set.call(this.obj, newValue); // Non-null is implied because descriptors without setters won't end up here
        if (this.currentValue !== newValue) {
            this.oldValue = this.currentValue;
            this.currentValue = newValue;
            this.callSubscribers(newValue, this.oldValue, 16 /* updateTargetInstance */);
        }
    }
    subscribe(subscriber) {
        if (!this.observing) {
            this.convertProperty();
        }
        this.addSubscriber(subscriber);
    }
    unsubscribe(subscriber) {
        this.removeSubscriber(subscriber);
    }
    convertProperty() {
        this.observing = true;
        this.currentValue = this.obj[this.propertyKey];
        const set = (newValue) => { this.setValue(newValue); };
        Reflect.defineProperty(this.obj, this.propertyKey, { set, get: this.descriptor.get });
    }
};
CustomSetterObserver = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_subscriber_collection__WEBPACK_IMPORTED_MODULE_3__["subscriberCollection"])(),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object, String, Object])
], CustomSetterObserver);

// Used when there is no setter, and the getter is dependent on other properties of the object;
// Used when there is a setter but the value of the getter can change based on properties set outside of the setter.
let GetterObserver = class GetterObserver {
    constructor(flags, overrides, obj, propertyKey, descriptor, observerLocator) {
        this.overrides = overrides;
        this.obj = obj;
        this.propertyKey = propertyKey;
        this.descriptor = descriptor;
        this.currentValue = void 0;
        this.oldValue = void 0;
        this.propertyDeps = [];
        this.collectionDeps = [];
        this.subscriberCount = 0;
        this.isCollecting = false;
        this.proxy = new Proxy(obj, createGetterTraps(flags, observerLocator, this));
        const get = () => this.getValue();
        Reflect.defineProperty(obj, propertyKey, { get, set: descriptor.set });
    }
    addPropertyDep(subscribable) {
        if (!this.propertyDeps.includes(subscribable)) {
            this.propertyDeps.push(subscribable);
        }
    }
    addCollectionDep(subscribable) {
        if (!this.collectionDeps.includes(subscribable)) {
            this.collectionDeps.push(subscribable);
        }
    }
    getValue() {
        if (this.subscriberCount > 0 || this.isCollecting) {
            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
            this.currentValue = Reflect.apply(this.descriptor.get, this.proxy, _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["PLATFORM"].emptyArray); // Non-null is implied because descriptors without getters won't end up here
        }
        else {
            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
            this.currentValue = Reflect.apply(this.descriptor.get, this.obj, _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["PLATFORM"].emptyArray); // Non-null is implied because descriptors without getters won't end up here
        }
        return this.currentValue;
    }
    subscribe(subscriber) {
        this.addSubscriber(subscriber);
        if (++this.subscriberCount === 1) {
            this.getValueAndCollectDependencies(true);
        }
    }
    unsubscribe(subscriber) {
        this.removeSubscriber(subscriber);
        if (--this.subscriberCount === 0) {
            this.unsubscribeAllDependencies();
        }
    }
    handleChange() {
        const oldValue = this.currentValue;
        const newValue = this.getValueAndCollectDependencies(false);
        if (oldValue !== newValue) {
            this.callSubscribers(newValue, oldValue, 16 /* updateTargetInstance */);
        }
    }
    handleCollectionChange() {
        const oldValue = this.currentValue;
        const newValue = this.getValueAndCollectDependencies(false);
        if (oldValue !== newValue) {
            this.callSubscribers(newValue, oldValue, 16 /* updateTargetInstance */);
        }
    }
    getValueAndCollectDependencies(requireCollect) {
        const dynamicDependencies = !this.overrides.static || requireCollect;
        if (dynamicDependencies) {
            this.unsubscribeAllDependencies();
            this.isCollecting = true;
        }
        this.currentValue = this.getValue();
        if (dynamicDependencies) {
            this.propertyDeps.forEach(x => { x.subscribe(this); });
            this.collectionDeps.forEach(x => { x.subscribeToCollection(this); });
            this.isCollecting = false;
        }
        return this.currentValue;
    }
    doNotCollect(target, key, receiver) {
        return !this.isCollecting
            || key === '$observers'
            || key === '$synthetic'
            || key === 'constructor';
    }
    unsubscribeAllDependencies() {
        this.propertyDeps.forEach(x => { x.unsubscribe(this); });
        this.propertyDeps.length = 0;
        this.collectionDeps.forEach(x => { x.unsubscribeFromCollection(this); });
        this.collectionDeps.length = 0;
    }
};
GetterObserver = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_subscriber_collection__WEBPACK_IMPORTED_MODULE_3__["subscriberCollection"])(),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Number, Object, Object, String, Object, Object])
], GetterObserver);

const toStringTag = Object.prototype.toString;
/**
 * _@param observer The owning observer of current evaluation, will subscribe to all observers created via proxy
 */
function createGetterTraps(flags, observerLocator, observer) {
    return {
        get: function (target, key, receiver) {
            if (observer.doNotCollect(target, key, receiver)) {
                return Reflect.get(target, key, receiver);
            }
            // The length and iterator properties need to be invoked on the original object
            // (for Map and Set at least) or they will throw.
            switch (toStringTag.call(target)) {
                case '[object Array]':
                    if (key === 'length' || Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["isArrayIndex"])(key)) {
                        observer.addCollectionDep(observerLocator.getArrayObserver(flags, target));
                        return proxyOrValue(flags, target, key, observerLocator, observer);
                    }
                    break;
                case '[object Map]':
                    if (key === 'size') {
                        observer.addCollectionDep(observerLocator.getMapObserver(flags, target));
                        return Reflect.get(target, key, target);
                    }
                    break;
                case '[object Set]':
                    if (key === 'size') {
                        observer.addCollectionDep(observerLocator.getSetObserver(flags, target));
                        return Reflect.get(target, key, target);
                    }
                    break;
            }
            observer.addPropertyDep(observerLocator.getObserver(flags, target, key));
            return proxyOrValue(flags, target, key, observerLocator, observer);
        }
    };
}
/**
 * _@param observer The owning observer of current evaluation, will subscribe to all observers created via proxy
 */
function proxyOrValue(flags, target, key, observerLocator, observer) {
    const value = Reflect.get(target, key, target);
    if (typeof value !== 'object' || typeof value === 'function' || value === null) {
        return value;
    }
    return new Proxy(value, createGetterTraps(flags, observerLocator, observer));
}
//# sourceMappingURL=computed-observer.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esnext/observation/dirty-checker.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esnext/observation/dirty-checker.js ***!
  \********************************************************************************/
/*! exports provided: IDirtyChecker, DirtyCheckSettings, DirtyChecker, DirtyCheckProperty */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IDirtyChecker", function() { return IDirtyChecker; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DirtyCheckSettings", function() { return DirtyCheckSettings; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DirtyChecker", function() { return DirtyChecker; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DirtyCheckProperty", function() { return DirtyCheckProperty; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _subscriber_collection__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./subscriber-collection */ "./node_modules/@aurelia/runtime/dist/esnext/observation/subscriber-collection.js");
/* harmony import */ var _aurelia_scheduler__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @aurelia/scheduler */ "./node_modules/@aurelia/scheduler/dist/esnext/index.js");




const IDirtyChecker = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["DI"].createInterface('IDirtyChecker').withDefault(x => x.singleton(DirtyChecker));
const DirtyCheckSettings = {
    /**
     * Default: `6`
     *
     * Adjust the global dirty check frequency.
     * Measures in "frames per check", such that (given an FPS of 60):
     * - A value of 1 will result in 60 dirty checks per second
     * - A value of 6 will result in 10 dirty checks per second
     */
    framesPerCheck: 6,
    /**
     * Default: `false`
     *
     * Disable dirty-checking entirely. Properties that cannot be observed without dirty checking
     * or an adapter, will simply not be observed.
     */
    disabled: false,
    /**
     * Default: `true`
     *
     * Log a warning message to the console if a property is being dirty-checked.
     */
    warn: true,
    /**
     * Default: `false`
     *
     * Throw an error if a property is being dirty-checked.
     */
    throw: false,
    /**
     * Resets all dirty checking settings to the framework's defaults.
     */
    resetToDefault() {
        this.framesPerCheck = 6;
        this.disabled = false;
        this.warn = true;
        this.throw = false;
    }
};
/** @internal */
let DirtyChecker = class DirtyChecker {
    constructor(scheduler) {
        this.scheduler = scheduler;
        this.tracked = [];
        this.task = null;
        this.elapsedFrames = 0;
    }
    createProperty(obj, propertyName) {
        if (DirtyCheckSettings.throw) {
            throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Reporter"].error(800, propertyName); // TODO: create/organize error code
        }
        if (DirtyCheckSettings.warn) {
            _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Reporter"].write(801, propertyName);
        }
        return new DirtyCheckProperty(this, obj, propertyName);
    }
    addProperty(property) {
        this.tracked.push(property);
        if (this.tracked.length === 1) {
            this.task = this.scheduler.queueRenderTask(() => this.check(), { persistent: true });
        }
    }
    removeProperty(property) {
        this.tracked.splice(this.tracked.indexOf(property), 1);
        if (this.tracked.length === 0) {
            this.task.cancel();
            this.task = null;
        }
    }
    check(delta) {
        if (DirtyCheckSettings.disabled) {
            return;
        }
        if (++this.elapsedFrames < DirtyCheckSettings.framesPerCheck) {
            return;
        }
        this.elapsedFrames = 0;
        const tracked = this.tracked;
        const len = tracked.length;
        let current;
        let i = 0;
        for (; i < len; ++i) {
            current = tracked[i];
            if (current.isDirty()) {
                current.flush(256 /* fromTick */);
            }
        }
    }
};
DirtyChecker = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(0, _aurelia_scheduler__WEBPACK_IMPORTED_MODULE_3__["IScheduler"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object])
], DirtyChecker);

let DirtyCheckProperty = class DirtyCheckProperty {
    constructor(dirtyChecker, obj, propertyKey) {
        this.dirtyChecker = dirtyChecker;
        this.obj = obj;
        this.propertyKey = propertyKey;
    }
    isDirty() {
        return this.oldValue !== this.obj[this.propertyKey];
    }
    flush(flags) {
        const oldValue = this.oldValue;
        const newValue = this.obj[this.propertyKey];
        this.callSubscribers(newValue, oldValue, flags | 16 /* updateTargetInstance */);
        this.oldValue = newValue;
    }
    subscribe(subscriber) {
        if (!this.hasSubscribers()) {
            this.oldValue = this.obj[this.propertyKey];
            this.dirtyChecker.addProperty(this);
        }
        this.addSubscriber(subscriber);
    }
    unsubscribe(subscriber) {
        if (this.removeSubscriber(subscriber) && !this.hasSubscribers()) {
            this.dirtyChecker.removeProperty(this);
        }
    }
};
DirtyCheckProperty = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_subscriber_collection__WEBPACK_IMPORTED_MODULE_2__["subscriberCollection"])(),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object, Object, String])
], DirtyCheckProperty);

//# sourceMappingURL=dirty-checker.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esnext/observation/map-observer.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esnext/observation/map-observer.js ***!
  \*******************************************************************************/
/*! exports provided: enableMapObservation, disableMapObservation, MapObserver, getMapObserver */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "enableMapObservation", function() { return enableMapObservation; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "disableMapObservation", function() { return disableMapObservation; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MapObserver", function() { return MapObserver; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getMapObserver", function() { return getMapObserver; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _lifecycle__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../lifecycle */ "./node_modules/@aurelia/runtime/dist/esnext/lifecycle.js");
/* harmony import */ var _observation__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../observation */ "./node_modules/@aurelia/runtime/dist/esnext/observation.js");
/* harmony import */ var _collection_size_observer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./collection-size-observer */ "./node_modules/@aurelia/runtime/dist/esnext/observation/collection-size-observer.js");
/* harmony import */ var _subscriber_collection__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./subscriber-collection */ "./node_modules/@aurelia/runtime/dist/esnext/observation/subscriber-collection.js");





const observerLookup = new WeakMap();
const proto = Map.prototype;
const $set = proto.set;
const $clear = proto.clear;
const $delete = proto.delete;
const native = { set: $set, clear: $clear, delete: $delete };
const methods = ['set', 'clear', 'delete'];
// note: we can't really do much with Map due to the internal data structure not being accessible so we're just using the native calls
// fortunately, map/delete/clear are easy to reconstruct for the indexMap
const observe = {
    // https://tc39.github.io/ecma262/#sec-map.prototype.map
    set: function (key, value) {
        let $this = this;
        if ($this.$raw !== undefined) {
            $this = $this.$raw;
        }
        const o = observerLookup.get($this);
        if (o === undefined) {
            $set.call($this, key, value);
            return this;
        }
        const oldValue = $this.get(key);
        const oldSize = $this.size;
        $set.call($this, key, value);
        const newSize = $this.size;
        if (newSize === oldSize) {
            let i = 0;
            for (const entry of $this.entries()) {
                if (entry[0] === key) {
                    if (entry[1] !== oldValue) {
                        o.indexMap.deletedItems.push(o.indexMap[i]);
                        o.indexMap[i] = -2;
                        o.notify();
                    }
                    return this;
                }
                i++;
            }
            return this;
        }
        o.indexMap[oldSize] = -2;
        o.notify();
        return this;
    },
    // https://tc39.github.io/ecma262/#sec-map.prototype.clear
    clear: function () {
        let $this = this;
        if ($this.$raw !== undefined) {
            $this = $this.$raw;
        }
        const o = observerLookup.get($this);
        if (o === undefined) {
            return $clear.call($this);
        }
        const size = $this.size;
        if (size > 0) {
            const indexMap = o.indexMap;
            let i = 0;
            for (const entry of $this.keys()) {
                if (indexMap[i] > -1) {
                    indexMap.deletedItems.push(indexMap[i]);
                }
                i++;
            }
            $clear.call($this);
            indexMap.length = 0;
            o.notify();
        }
        return undefined;
    },
    // https://tc39.github.io/ecma262/#sec-map.prototype.delete
    delete: function (value) {
        let $this = this;
        if ($this.$raw !== undefined) {
            $this = $this.$raw;
        }
        const o = observerLookup.get($this);
        if (o === undefined) {
            return $delete.call($this, value);
        }
        const size = $this.size;
        if (size === 0) {
            return false;
        }
        let i = 0;
        const indexMap = o.indexMap;
        for (const entry of $this.keys()) {
            if (entry === value) {
                if (indexMap[i] > -1) {
                    indexMap.deletedItems.push(indexMap[i]);
                }
                indexMap.splice(i, 1);
                const deleteResult = $delete.call($this, value);
                if (deleteResult === true) {
                    o.notify();
                }
                return deleteResult;
            }
            ++i;
        }
        return false;
    }
};
const descriptorProps = {
    writable: true,
    enumerable: false,
    configurable: true
};
const def = Reflect.defineProperty;
for (const method of methods) {
    def(observe[method], 'observing', { value: true, writable: false, configurable: false, enumerable: false });
}
let enableMapObservationCalled = false;
function enableMapObservation() {
    for (const method of methods) {
        if (proto[method].observing !== true) {
            def(proto, method, { ...descriptorProps, value: observe[method] });
        }
    }
}
function disableMapObservation() {
    for (const method of methods) {
        if (proto[method].observing === true) {
            def(proto, method, { ...descriptorProps, value: native[method] });
        }
    }
}
const slice = Array.prototype.slice;
let MapObserver = class MapObserver {
    constructor(flags, lifecycle, map) {
        if (!enableMapObservationCalled) {
            enableMapObservationCalled = true;
            enableMapObservation();
        }
        this.inBatch = false;
        this.collection = map;
        this.persistentFlags = flags & 2080374799 /* persistentBindingFlags */;
        this.indexMap = Object(_observation__WEBPACK_IMPORTED_MODULE_2__["createIndexMap"])(map.size);
        this.lifecycle = lifecycle;
        this.lengthObserver = (void 0);
        observerLookup.set(map, this);
    }
    notify() {
        if (this.lifecycle.batch.depth > 0) {
            if (!this.inBatch) {
                this.inBatch = true;
                this.lifecycle.batch.add(this);
            }
        }
        else {
            this.flushBatch(0 /* none */);
        }
    }
    getLengthObserver() {
        if (this.lengthObserver === void 0) {
            this.lengthObserver = new _collection_size_observer__WEBPACK_IMPORTED_MODULE_3__["CollectionSizeObserver"](this.collection);
        }
        return this.lengthObserver;
    }
    getIndexObserver(index) {
        throw new Error('Map index observation not supported');
    }
    flushBatch(flags) {
        this.inBatch = false;
        const { indexMap, collection } = this;
        const { size } = collection;
        this.indexMap = Object(_observation__WEBPACK_IMPORTED_MODULE_2__["createIndexMap"])(size);
        this.callCollectionSubscribers(indexMap, 16 /* updateTargetInstance */ | this.persistentFlags);
        if (this.lengthObserver !== void 0) {
            this.lengthObserver.setValue(size, 16 /* updateTargetInstance */);
        }
    }
};
MapObserver = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_subscriber_collection__WEBPACK_IMPORTED_MODULE_4__["collectionSubscriberCollection"])(),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Number, Object, Object])
], MapObserver);

function getMapObserver(flags, lifecycle, map) {
    const observer = observerLookup.get(map);
    if (observer === void 0) {
        return new MapObserver(flags, lifecycle, map);
    }
    return observer;
}
//# sourceMappingURL=map-observer.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esnext/observation/observer-locator.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esnext/observation/observer-locator.js ***!
  \***********************************************************************************/
/*! exports provided: IObserverLocator, ITargetObserverLocator, ITargetAccessorLocator, ObserverLocator, getCollectionObserver */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IObserverLocator", function() { return IObserverLocator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ITargetObserverLocator", function() { return ITargetObserverLocator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ITargetAccessorLocator", function() { return ITargetAccessorLocator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ObserverLocator", function() { return ObserverLocator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getCollectionObserver", function() { return getCollectionObserver; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _lifecycle__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lifecycle */ "./node_modules/@aurelia/runtime/dist/esnext/lifecycle.js");
/* harmony import */ var _array_observer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./array-observer */ "./node_modules/@aurelia/runtime/dist/esnext/observation/array-observer.js");
/* harmony import */ var _computed_observer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./computed-observer */ "./node_modules/@aurelia/runtime/dist/esnext/observation/computed-observer.js");
/* harmony import */ var _dirty_checker__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./dirty-checker */ "./node_modules/@aurelia/runtime/dist/esnext/observation/dirty-checker.js");
/* harmony import */ var _map_observer__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./map-observer */ "./node_modules/@aurelia/runtime/dist/esnext/observation/map-observer.js");
/* harmony import */ var _primitive_observer__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./primitive-observer */ "./node_modules/@aurelia/runtime/dist/esnext/observation/primitive-observer.js");
/* harmony import */ var _property_accessor__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./property-accessor */ "./node_modules/@aurelia/runtime/dist/esnext/observation/property-accessor.js");
/* harmony import */ var _proxy_observer__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./proxy-observer */ "./node_modules/@aurelia/runtime/dist/esnext/observation/proxy-observer.js");
/* harmony import */ var _set_observer__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./set-observer */ "./node_modules/@aurelia/runtime/dist/esnext/observation/set-observer.js");
/* harmony import */ var _setter_observer__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./setter-observer */ "./node_modules/@aurelia/runtime/dist/esnext/observation/setter-observer.js");
/* harmony import */ var _aurelia_scheduler__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @aurelia/scheduler */ "./node_modules/@aurelia/scheduler/dist/esnext/index.js");













const toStringTag = Object.prototype.toString;
const IObserverLocator = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["DI"].createInterface('IObserverLocator').noDefault();
const ITargetObserverLocator = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["DI"].createInterface('ITargetObserverLocator').noDefault();
const ITargetAccessorLocator = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["DI"].createInterface('ITargetAccessorLocator').noDefault();
function getPropertyDescriptor(subject, name) {
    let pd = Object.getOwnPropertyDescriptor(subject, name);
    let proto = Object.getPrototypeOf(subject);
    while (pd == null && proto != null) {
        pd = Object.getOwnPropertyDescriptor(proto, name);
        proto = Object.getPrototypeOf(proto);
    }
    return pd;
}
/** @internal */
let ObserverLocator = class ObserverLocator {
    constructor(lifecycle, scheduler, dirtyChecker, targetObserverLocator, targetAccessorLocator) {
        this.lifecycle = lifecycle;
        this.scheduler = scheduler;
        this.dirtyChecker = dirtyChecker;
        this.targetObserverLocator = targetObserverLocator;
        this.targetAccessorLocator = targetAccessorLocator;
        this.adapters = [];
    }
    static register(container) {
        return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Registration"].singleton(IObserverLocator, this).register(container);
    }
    getObserver(flags, obj, propertyName) {
        if (flags & 2 /* proxyStrategy */ && typeof obj === 'object') {
            return _proxy_observer__WEBPACK_IMPORTED_MODULE_9__["ProxyObserver"].getOrCreate(obj, propertyName); // TODO: fix typings (and ensure proper contracts ofc)
        }
        if (isBindingContext(obj)) {
            return obj.getObservers(flags).getOrCreate(this.lifecycle, flags, obj, propertyName);
        }
        let observersLookup = obj.$observers;
        if (observersLookup && propertyName in observersLookup) {
            return observersLookup[propertyName];
        }
        const observer = this.createPropertyObserver(flags, obj, propertyName);
        if (!observer.doNotCache) {
            if (observersLookup === void 0) {
                observersLookup = this.getOrCreateObserversLookup(obj);
            }
            observersLookup[propertyName] = observer;
        }
        return observer;
    }
    addAdapter(adapter) {
        this.adapters.push(adapter);
    }
    getAccessor(flags, obj, propertyName) {
        if (this.targetAccessorLocator.handles(flags, obj)) {
            if (this.targetObserverLocator.overridesAccessor(flags, obj, propertyName)) {
                return this.getObserver(flags, obj, propertyName);
            }
            return this.targetAccessorLocator.getAccessor(flags, this.scheduler, this.lifecycle, obj, propertyName);
        }
        if (flags & 2 /* proxyStrategy */) {
            return _proxy_observer__WEBPACK_IMPORTED_MODULE_9__["ProxyObserver"].getOrCreate(obj, propertyName);
        }
        return new _property_accessor__WEBPACK_IMPORTED_MODULE_8__["PropertyAccessor"](obj, propertyName);
    }
    getArrayObserver(flags, observedArray) {
        return Object(_array_observer__WEBPACK_IMPORTED_MODULE_3__["getArrayObserver"])(flags, this.lifecycle, observedArray);
    }
    getMapObserver(flags, observedMap) {
        return Object(_map_observer__WEBPACK_IMPORTED_MODULE_6__["getMapObserver"])(flags, this.lifecycle, observedMap);
    }
    getSetObserver(flags, observedSet) {
        return Object(_set_observer__WEBPACK_IMPORTED_MODULE_10__["getSetObserver"])(flags, this.lifecycle, observedSet);
    }
    getOrCreateObserversLookup(obj) {
        return obj.$observers || this.createObserversLookup(obj);
    }
    createObserversLookup(obj) {
        const value = {};
        if (!Reflect.defineProperty(obj, '$observers', {
            enumerable: false,
            configurable: false,
            writable: false,
            value: value
        })) {
            _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Reporter"].write(0, obj);
        }
        return value;
    }
    getAdapterObserver(flags, obj, propertyName, descriptor) {
        for (let i = 0, ii = this.adapters.length; i < ii; i++) {
            const adapter = this.adapters[i];
            const observer = adapter.getObserver(flags, obj, propertyName, descriptor);
            if (observer != null) {
                return observer;
            }
        }
        return null;
    }
    createPropertyObserver(flags, obj, propertyName) {
        if (!(obj instanceof Object)) {
            return new _primitive_observer__WEBPACK_IMPORTED_MODULE_7__["PrimitiveObserver"](obj, propertyName);
        }
        let isNode = false;
        if (this.targetObserverLocator.handles(flags, obj)) {
            const observer = this.targetObserverLocator.getObserver(flags, this.scheduler, this.lifecycle, this, obj, propertyName);
            if (observer != null) {
                return observer;
            }
            isNode = true;
        }
        const tag = toStringTag.call(obj);
        switch (tag) {
            case '[object Array]':
                if (propertyName === 'length') {
                    return this.getArrayObserver(flags, obj).getLengthObserver();
                }
                // is numer only returns true for integer
                if (Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["isArrayIndex"])(propertyName)) {
                    return this.getArrayObserver(flags, obj).getIndexObserver(Number(propertyName));
                }
                break;
            case '[object Map]':
                if (propertyName === 'size') {
                    return this.getMapObserver(flags, obj).getLengthObserver();
                }
                break;
            case '[object Set]':
                if (propertyName === 'size') {
                    return this.getSetObserver(flags, obj).getLengthObserver();
                }
                break;
        }
        const descriptor = getPropertyDescriptor(obj, propertyName);
        if (descriptor != null && (descriptor.get != null || descriptor.set != null)) {
            if (descriptor.get != null && descriptor.get.getObserver != null) {
                return descriptor.get.getObserver(obj);
            }
            // attempt to use an adapter before resorting to dirty checking.
            const adapterObserver = this.getAdapterObserver(flags, obj, propertyName, descriptor);
            if (adapterObserver != null) {
                return adapterObserver;
            }
            if (isNode) {
                // TODO: use MutationObserver
                return this.dirtyChecker.createProperty(obj, propertyName);
            }
            return Object(_computed_observer__WEBPACK_IMPORTED_MODULE_4__["createComputedObserver"])(flags, this, this.dirtyChecker, this.lifecycle, obj, propertyName, descriptor);
        }
        return new _setter_observer__WEBPACK_IMPORTED_MODULE_11__["SetterObserver"](this.lifecycle, flags, obj, propertyName);
    }
};
ObserverLocator = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(0, _lifecycle__WEBPACK_IMPORTED_MODULE_2__["ILifecycle"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(1, _aurelia_scheduler__WEBPACK_IMPORTED_MODULE_12__["IScheduler"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(2, _dirty_checker__WEBPACK_IMPORTED_MODULE_5__["IDirtyChecker"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(3, ITargetObserverLocator),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(4, ITargetAccessorLocator),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object, Object, Object, Object, Object])
], ObserverLocator);

function getCollectionObserver(flags, lifecycle, collection) {
    // If the collection is wrapped by a proxy then `$observer` will return the proxy observer instead of the collection observer, which is not what we want
    // when we ask for getCollectionObserver
    const rawCollection = collection instanceof Object ? _proxy_observer__WEBPACK_IMPORTED_MODULE_9__["ProxyObserver"].getRawIfProxy(collection) : collection;
    switch (toStringTag.call(collection)) {
        case '[object Array]':
            return Object(_array_observer__WEBPACK_IMPORTED_MODULE_3__["getArrayObserver"])(flags, lifecycle, rawCollection);
        case '[object Map]':
            return Object(_map_observer__WEBPACK_IMPORTED_MODULE_6__["getMapObserver"])(flags, lifecycle, rawCollection);
        case '[object Set]':
            return Object(_set_observer__WEBPACK_IMPORTED_MODULE_10__["getSetObserver"])(flags, lifecycle, rawCollection);
    }
    return void 0;
}
function isBindingContext(obj) {
    return obj.$synthetic === true;
}
//# sourceMappingURL=observer-locator.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esnext/observation/primitive-observer.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esnext/observation/primitive-observer.js ***!
  \*************************************************************************************/
/*! exports provided: PrimitiveObserver */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PrimitiveObserver", function() { return PrimitiveObserver; });
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");

const slice = Array.prototype.slice;
const noop = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["PLATFORM"].noop;
// note: string.length is the only property of any primitive that is not a function,
// so we can hardwire it to that and simply return undefined for anything else
// note#2: a modified primitive constructor prototype would not work (and really, it shouldn't..)
class PrimitiveObserver {
    constructor(obj, propertyKey) {
        this.doNotCache = true;
        // we don't need to store propertyName because only 'length' can return a useful value
        if (propertyKey === 'length') {
            // deliberately not checking for typeof string as users probably still want to know via an error that their string is undefined
            this.obj = obj;
            this.getValue = this.getStringLength;
        }
        else {
            this.getValue = this.returnUndefined;
        }
    }
    getStringLength() {
        return this.obj.length;
    }
    returnUndefined() {
        return undefined;
    }
}
PrimitiveObserver.prototype.setValue = noop;
PrimitiveObserver.prototype.subscribe = noop;
PrimitiveObserver.prototype.unsubscribe = noop;
PrimitiveObserver.prototype.dispose = noop;
//# sourceMappingURL=primitive-observer.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esnext/observation/property-accessor.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esnext/observation/property-accessor.js ***!
  \************************************************************************************/
/*! exports provided: PropertyAccessor */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PropertyAccessor", function() { return PropertyAccessor; });
class PropertyAccessor {
    constructor(obj, propertyKey) {
        this.obj = obj;
        this.propertyKey = propertyKey;
        if (obj.$observers !== void 0
            && obj.$observers[propertyKey] !== void 0
            && obj.$observers[propertyKey].setValue !== void 0) {
            this.setValue = this.setValueDirect;
        }
    }
    getValue() {
        return this.obj[this.propertyKey];
    }
    setValue(value, flags) {
        this.obj[this.propertyKey] = value;
    }
    setValueDirect(value, flags) {
        this.obj.$observers[this.propertyKey].setValue(value, flags);
    }
}
//# sourceMappingURL=property-accessor.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esnext/observation/proxy-observer.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esnext/observation/proxy-observer.js ***!
  \*********************************************************************************/
/*! exports provided: ProxySubscriberCollection, ProxyObserver */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ProxySubscriberCollection", function() { return ProxySubscriberCollection; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ProxyObserver", function() { return ProxyObserver; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _subscriber_collection__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./subscriber-collection */ "./node_modules/@aurelia/runtime/dist/esnext/observation/subscriber-collection.js");
var ProxyObserver_1;



const lookup = new WeakMap();
let ProxySubscriberCollection = class ProxySubscriberCollection {
    constructor(proxy, raw, key) {
        this.proxy = proxy;
        this.raw = raw;
        this.key = key;
        this.inBatch = false;
        this.subscribe = this.addSubscriber;
        this.unsubscribe = this.removeSubscriber;
        if (raw[key] instanceof Object) { // Ensure we observe array indices and newly created object properties
            raw[key] = ProxyObserver.getOrCreate(raw[key]).proxy;
        }
    }
    setValue(value, flags) {
        const oldValue = this.raw[this.key];
        if (oldValue !== value) {
            this.raw[this.key] = value;
            this.callSubscribers(value, oldValue, flags | 2 /* proxyStrategy */ | 16 /* updateTargetInstance */);
        }
    }
    getValue() {
        return this.raw[this.key];
    }
    flushBatch(flags) {
        return;
    }
};
ProxySubscriberCollection = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_subscriber_collection__WEBPACK_IMPORTED_MODULE_2__["subscriberCollection"])(),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object, Object, Object])
], ProxySubscriberCollection);

let ProxyObserver = ProxyObserver_1 = class ProxyObserver {
    constructor(obj) {
        this.raw = obj;
        this.proxy = new Proxy(obj, this);
        lookup.set(obj, this.proxy);
        this.subscribers = {};
    }
    static getProxyOrSelf(obj) {
        if (obj.$raw === void 0) {
            const proxy = lookup.get(obj);
            if (proxy === void 0) {
                return obj;
            }
            return proxy;
        }
        return obj;
    }
    static getRawIfProxy(obj) {
        const raw = obj.$raw;
        if (raw === void 0) {
            return obj;
        }
        return raw;
    }
    static getOrCreate(obj, key) {
        let proxyObserver;
        if (obj.$raw === void 0) {
            const proxy = lookup.get(obj);
            if (proxy === void 0) {
                proxyObserver = new ProxyObserver_1(obj);
            }
            else {
                proxyObserver = proxy.$observer;
            }
        }
        else {
            proxyObserver = obj.$observer;
        }
        if (key === void 0) {
            return proxyObserver;
        }
        let subscribers = proxyObserver.subscribers[key];
        if (subscribers === void 0) {
            const raw = this.getRawIfProxy(obj);
            const proxy = proxyObserver.proxy;
            subscribers = proxyObserver.subscribers[key] = new ProxySubscriberCollection(proxy, raw, key);
        }
        return subscribers;
    }
    static isProxy(obj) {
        return obj.$raw !== void 0;
    }
    get(target, p, receiver) {
        if (p === '$observer') {
            return this;
        }
        if (p === '$raw') {
            return target;
        }
        return target[p];
    }
    set(target, p, value, receiver) {
        const oldValue = target[p];
        if (oldValue !== value) {
            target[p] = value;
            this.callPropertySubscribers(value, oldValue, p);
            this.callProxySubscribers(p, value, oldValue, 2 /* proxyStrategy */ | 16 /* updateTargetInstance */);
        }
        return true;
    }
    deleteProperty(target, p) {
        const oldValue = target[p];
        if (Reflect.deleteProperty(target, p)) {
            if (oldValue !== void 0) {
                this.callPropertySubscribers(undefined, oldValue, p);
                this.callProxySubscribers(p, undefined, oldValue, 2 /* proxyStrategy */ | 16 /* updateTargetInstance */);
            }
            return true;
        }
        return false;
    }
    defineProperty(target, p, attributes) {
        const oldValue = target[p];
        if (Reflect.defineProperty(target, p, attributes)) {
            if (attributes.value !== oldValue) {
                this.callPropertySubscribers(attributes.value, oldValue, p);
                this.callProxySubscribers(p, attributes.value, oldValue, 2 /* proxyStrategy */ | 16 /* updateTargetInstance */);
            }
            return true;
        }
        return false;
    }
    apply(target, thisArg, argArray = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["PLATFORM"].emptyArray) {
        // eslint-disable-next-line @typescript-eslint/ban-types
        return Reflect.apply(target, target, argArray); // Reflect API dictates this
    }
    subscribe(subscriber, key) {
        if (key === void 0) {
            this.addProxySubscriber(subscriber);
        }
        else {
            let subscribers = this.subscribers[key];
            if (subscribers === void 0) {
                subscribers = this.subscribers[key] = new ProxySubscriberCollection(this.proxy, this.raw, key);
            }
            subscribers.addSubscriber(subscriber);
        }
    }
    unsubscribe(subscriber, key) {
        if (key === void 0) {
            this.removeProxySubscriber(subscriber);
        }
        else {
            const subscribers = this.subscribers[key];
            if (subscribers !== undefined) {
                subscribers.removeSubscriber(subscriber);
            }
        }
    }
    callPropertySubscribers(newValue, oldValue, key) {
        const subscribers = this.subscribers[key];
        if (subscribers !== void 0) {
            subscribers.callSubscribers(newValue, oldValue, 2 /* proxyStrategy */ | 16 /* updateTargetInstance */);
        }
    }
};
ProxyObserver = ProxyObserver_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_subscriber_collection__WEBPACK_IMPORTED_MODULE_2__["proxySubscriberCollection"])(),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object])
], ProxyObserver);

//# sourceMappingURL=proxy-observer.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esnext/observation/set-observer.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esnext/observation/set-observer.js ***!
  \*******************************************************************************/
/*! exports provided: enableSetObservation, disableSetObservation, SetObserver, getSetObserver */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "enableSetObservation", function() { return enableSetObservation; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "disableSetObservation", function() { return disableSetObservation; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SetObserver", function() { return SetObserver; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getSetObserver", function() { return getSetObserver; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _lifecycle__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../lifecycle */ "./node_modules/@aurelia/runtime/dist/esnext/lifecycle.js");
/* harmony import */ var _observation__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../observation */ "./node_modules/@aurelia/runtime/dist/esnext/observation.js");
/* harmony import */ var _collection_size_observer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./collection-size-observer */ "./node_modules/@aurelia/runtime/dist/esnext/observation/collection-size-observer.js");
/* harmony import */ var _subscriber_collection__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./subscriber-collection */ "./node_modules/@aurelia/runtime/dist/esnext/observation/subscriber-collection.js");





const observerLookup = new WeakMap();
const proto = Set.prototype;
const $add = proto.add;
const $clear = proto.clear;
const $delete = proto.delete;
const native = { add: $add, clear: $clear, delete: $delete };
const methods = ['add', 'clear', 'delete'];
// note: we can't really do much with Set due to the internal data structure not being accessible so we're just using the native calls
// fortunately, add/delete/clear are easy to reconstruct for the indexMap
const observe = {
    // https://tc39.github.io/ecma262/#sec-set.prototype.add
    add: function (value) {
        let $this = this;
        if ($this.$raw !== undefined) {
            $this = $this.$raw;
        }
        const o = observerLookup.get($this);
        if (o === undefined) {
            $add.call($this, value);
            return this;
        }
        const oldSize = $this.size;
        $add.call($this, value);
        const newSize = $this.size;
        if (newSize === oldSize) {
            return this;
        }
        o.indexMap[oldSize] = -2;
        o.notify();
        return this;
    },
    // https://tc39.github.io/ecma262/#sec-set.prototype.clear
    clear: function () {
        let $this = this;
        if ($this.$raw !== undefined) {
            $this = $this.$raw;
        }
        const o = observerLookup.get($this);
        if (o === undefined) {
            return $clear.call($this);
        }
        const size = $this.size;
        if (size > 0) {
            const indexMap = o.indexMap;
            let i = 0;
            for (const entry of $this.keys()) {
                if (indexMap[i] > -1) {
                    indexMap.deletedItems.push(indexMap[i]);
                }
                i++;
            }
            $clear.call($this);
            indexMap.length = 0;
            o.notify();
        }
        return undefined;
    },
    // https://tc39.github.io/ecma262/#sec-set.prototype.delete
    delete: function (value) {
        let $this = this;
        if ($this.$raw !== undefined) {
            $this = $this.$raw;
        }
        const o = observerLookup.get($this);
        if (o === undefined) {
            return $delete.call($this, value);
        }
        const size = $this.size;
        if (size === 0) {
            return false;
        }
        let i = 0;
        const indexMap = o.indexMap;
        for (const entry of $this.keys()) {
            if (entry === value) {
                if (indexMap[i] > -1) {
                    indexMap.deletedItems.push(indexMap[i]);
                }
                indexMap.splice(i, 1);
                const deleteResult = $delete.call($this, value);
                if (deleteResult === true) {
                    o.notify();
                }
                return deleteResult;
            }
            i++;
        }
        return false;
    }
};
const descriptorProps = {
    writable: true,
    enumerable: false,
    configurable: true
};
const def = Reflect.defineProperty;
for (const method of methods) {
    def(observe[method], 'observing', { value: true, writable: false, configurable: false, enumerable: false });
}
let enableSetObservationCalled = false;
function enableSetObservation() {
    for (const method of methods) {
        if (proto[method].observing !== true) {
            def(proto, method, { ...descriptorProps, value: observe[method] });
        }
    }
}
function disableSetObservation() {
    for (const method of methods) {
        if (proto[method].observing === true) {
            def(proto, method, { ...descriptorProps, value: native[method] });
        }
    }
}
const slice = Array.prototype.slice;
let SetObserver = class SetObserver {
    constructor(flags, lifecycle, observedSet) {
        if (!enableSetObservationCalled) {
            enableSetObservationCalled = true;
            enableSetObservation();
        }
        this.inBatch = false;
        this.collection = observedSet;
        this.persistentFlags = flags & 2080374799 /* persistentBindingFlags */;
        this.indexMap = Object(_observation__WEBPACK_IMPORTED_MODULE_2__["createIndexMap"])(observedSet.size);
        this.lifecycle = lifecycle;
        this.lengthObserver = (void 0);
        observerLookup.set(observedSet, this);
    }
    notify() {
        if (this.lifecycle.batch.depth > 0) {
            if (!this.inBatch) {
                this.inBatch = true;
                this.lifecycle.batch.add(this);
            }
        }
        else {
            this.flushBatch(0 /* none */);
        }
    }
    getLengthObserver() {
        if (this.lengthObserver === void 0) {
            this.lengthObserver = new _collection_size_observer__WEBPACK_IMPORTED_MODULE_3__["CollectionSizeObserver"](this.collection);
        }
        return this.lengthObserver;
    }
    getIndexObserver(index) {
        throw new Error('Set index observation not supported');
    }
    flushBatch(flags) {
        this.inBatch = false;
        const { indexMap, collection } = this;
        const { size } = collection;
        this.indexMap = Object(_observation__WEBPACK_IMPORTED_MODULE_2__["createIndexMap"])(size);
        this.callCollectionSubscribers(indexMap, 16 /* updateTargetInstance */ | this.persistentFlags);
        if (this.lengthObserver !== void 0) {
            this.lengthObserver.setValue(size, 16 /* updateTargetInstance */);
        }
    }
};
SetObserver = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_subscriber_collection__WEBPACK_IMPORTED_MODULE_4__["collectionSubscriberCollection"])(),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Number, Object, Object])
], SetObserver);

function getSetObserver(flags, lifecycle, observedSet) {
    const observer = observerLookup.get(observedSet);
    if (observer === void 0) {
        return new SetObserver(flags, lifecycle, observedSet);
    }
    return observer;
}
//# sourceMappingURL=set-observer.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esnext/observation/setter-observer.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esnext/observation/setter-observer.js ***!
  \**********************************************************************************/
/*! exports provided: SetterObserver */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SetterObserver", function() { return SetterObserver; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _lifecycle__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lifecycle */ "./node_modules/@aurelia/runtime/dist/esnext/lifecycle.js");
/* harmony import */ var _subscriber_collection__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./subscriber-collection */ "./node_modules/@aurelia/runtime/dist/esnext/observation/subscriber-collection.js");




/**
 * Observer for the mutation of object property value employing getter-setter strategy.
 * This is used for observing object properties that has no decorator.
 */
let SetterObserver = class SetterObserver {
    constructor(lifecycle, flags, obj, propertyKey) {
        this.lifecycle = lifecycle;
        this.obj = obj;
        this.propertyKey = propertyKey;
        this.currentValue = void 0;
        this.oldValue = void 0;
        this.inBatch = false;
        this.observing = false;
        this.persistentFlags = flags & 2080374799 /* persistentBindingFlags */;
    }
    getValue() {
        return this.currentValue;
    }
    setValue(newValue, flags) {
        if (this.observing) {
            const currentValue = this.currentValue;
            this.currentValue = newValue;
            if (this.lifecycle.batch.depth === 0) {
                this.callSubscribers(newValue, currentValue, this.persistentFlags | flags);
            }
            else if (!this.inBatch) {
                this.inBatch = true;
                this.oldValue = currentValue;
                this.lifecycle.batch.add(this);
            }
        }
        else {
            // If subscribe() has been called, the target property descriptor is replaced by these getter/setter methods,
            // so calling obj[propertyKey] will actually return this.currentValue.
            // However, if subscribe() was not yet called (indicated by !this.observing), the target descriptor
            // is unmodified and we need to explicitly set the property value.
            // This will happen in one-time, to-view and two-way bindings during $bind, meaning that the $bind will not actually update the target value.
            // This wasn't visible in vCurrent due to connect-queue always doing a delayed update, so in many cases it didn't matter whether $bind updated the target or not.
            this.obj[this.propertyKey] = newValue;
        }
    }
    flushBatch(flags) {
        this.inBatch = false;
        const currentValue = this.currentValue;
        const oldValue = this.oldValue;
        this.oldValue = currentValue;
        this.callSubscribers(currentValue, oldValue, this.persistentFlags | flags);
    }
    subscribe(subscriber) {
        if (this.observing === false) {
            this.observing = true;
            this.currentValue = this.obj[this.propertyKey];
            if (!Reflect.defineProperty(this.obj, this.propertyKey, {
                enumerable: true,
                configurable: true,
                get: () => {
                    return this.getValue();
                },
                set: value => {
                    this.setValue(value, 0 /* none */);
                },
            })) {
                _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Reporter"].write(1, this.propertyKey, this.obj);
            }
        }
        this.addSubscriber(subscriber);
    }
};
SetterObserver = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_subscriber_collection__WEBPACK_IMPORTED_MODULE_3__["subscriberCollection"])(),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object, Number, Object, String])
], SetterObserver);

//# sourceMappingURL=setter-observer.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esnext/observation/signaler.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esnext/observation/signaler.js ***!
  \***************************************************************************/
/*! exports provided: ISignaler, Signaler */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ISignaler", function() { return ISignaler; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Signaler", function() { return Signaler; });
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");

const ISignaler = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["DI"].createInterface('ISignaler').withDefault(x => x.singleton(Signaler));
/** @internal */
class Signaler {
    constructor() {
        this.signals = Object.create(null);
    }
    dispatchSignal(name, flags) {
        const listeners = this.signals[name];
        if (listeners === undefined) {
            return;
        }
        for (const listener of listeners.keys()) {
            listener.handleChange(undefined, undefined, flags | 16 /* updateTargetInstance */);
        }
    }
    addSignalListener(name, listener) {
        const signals = this.signals;
        const listeners = signals[name];
        if (listeners === undefined) {
            signals[name] = new Set([listener]);
        }
        else {
            listeners.add(listener);
        }
    }
    removeSignalListener(name, listener) {
        const listeners = this.signals[name];
        if (listeners) {
            listeners.delete(listener);
        }
    }
}
//# sourceMappingURL=signaler.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esnext/observation/subscriber-collection.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esnext/observation/subscriber-collection.js ***!
  \****************************************************************************************/
/*! exports provided: subscriberCollection, proxySubscriberCollection, collectionSubscriberCollection */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "subscriberCollection", function() { return subscriberCollection; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "proxySubscriberCollection", function() { return proxySubscriberCollection; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "collectionSubscriberCollection", function() { return collectionSubscriberCollection; });
// TODO: see if we can de-duplicate these 3 decorators and their functions without killing performance or readability
function subscriberCollection() {
    // eslint-disable-next-line @typescript-eslint/ban-types
    return function (target) {
        const proto = target.prototype;
        proto._subscriberFlags = 0 /* None */;
        proto.addSubscriber = addSubscriber;
        proto.removeSubscriber = removeSubscriber;
        proto.hasSubscriber = hasSubscriber;
        proto.hasSubscribers = hasSubscribers;
        proto.callSubscribers = callSubscribers;
        if (proto.subscribe === void 0)
            proto.subscribe = addSubscriber;
        if (proto.unsubscribe === void 0)
            proto.unsubscribe = removeSubscriber;
    };
}
function proxySubscriberCollection() {
    // eslint-disable-next-line @typescript-eslint/ban-types
    return function (target) {
        const proto = target.prototype;
        proto._proxySubscriberFlags = 0 /* None */;
        proto.addProxySubscriber = addProxySubscriber;
        proto.removeProxySubscriber = removeProxySubscriber;
        proto.hasProxySubscriber = hasProxySubscriber;
        proto.hasProxySubscribers = hasProxySubscribers;
        proto.callProxySubscribers = callProxySubscribers;
        if (proto.subscribeToProxy === void 0)
            proto.subscribeToProxy = addProxySubscriber;
        if (proto.unsubscribeFromProxy === void 0)
            proto.unsubscribeFromProxy = removeProxySubscriber;
    };
}
function collectionSubscriberCollection() {
    // eslint-disable-next-line @typescript-eslint/ban-types
    return function (target) {
        const proto = target.prototype;
        proto._collectionSubscriberFlags = 0 /* None */;
        proto.addCollectionSubscriber = addCollectionSubscriber;
        proto.removeCollectionSubscriber = removeCollectionSubscriber;
        proto.hasCollectionSubscriber = hasCollectionSubscriber;
        proto.hasCollectionSubscribers = hasCollectionSubscribers;
        proto.callCollectionSubscribers = callCollectionSubscribers;
        if (proto.subscribeToCollection === void 0)
            proto.subscribeToCollection = addCollectionSubscriber;
        if (proto.unsubscribeFromCollection === void 0)
            proto.unsubscribeFromCollection = removeCollectionSubscriber;
    };
}
function addSubscriber(subscriber) {
    if (this.hasSubscriber(subscriber)) {
        return false;
    }
    const subscriberFlags = this._subscriberFlags;
    if ((subscriberFlags & 1 /* Subscriber0 */) === 0) {
        this._subscriber0 = subscriber;
        this._subscriberFlags |= 1 /* Subscriber0 */;
    }
    else if ((subscriberFlags & 2 /* Subscriber1 */) === 0) {
        this._subscriber1 = subscriber;
        this._subscriberFlags |= 2 /* Subscriber1 */;
    }
    else if ((subscriberFlags & 4 /* Subscriber2 */) === 0) {
        this._subscriber2 = subscriber;
        this._subscriberFlags |= 4 /* Subscriber2 */;
    }
    else if ((subscriberFlags & 8 /* SubscribersRest */) === 0) {
        this._subscribersRest = [subscriber];
        this._subscriberFlags |= 8 /* SubscribersRest */;
    }
    else {
        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
        this._subscribersRest.push(subscriber); // Non-null is implied by else branch of (subscriberFlags & SF.SubscribersRest) === 0
    }
    return true;
}
function addProxySubscriber(subscriber) {
    if (this.hasProxySubscriber(subscriber)) {
        return false;
    }
    const subscriberFlags = this._proxySubscriberFlags;
    if ((subscriberFlags & 1 /* Subscriber0 */) === 0) {
        this._proxySubscriber0 = subscriber;
        this._proxySubscriberFlags |= 1 /* Subscriber0 */;
    }
    else if ((subscriberFlags & 2 /* Subscriber1 */) === 0) {
        this._proxySubscriber1 = subscriber;
        this._proxySubscriberFlags |= 2 /* Subscriber1 */;
    }
    else if ((subscriberFlags & 4 /* Subscriber2 */) === 0) {
        this._proxySubscriber2 = subscriber;
        this._proxySubscriberFlags |= 4 /* Subscriber2 */;
    }
    else if ((subscriberFlags & 8 /* SubscribersRest */) === 0) {
        this._proxySubscribersRest = [subscriber];
        this._proxySubscriberFlags |= 8 /* SubscribersRest */;
    }
    else {
        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
        this._proxySubscribersRest.push(subscriber); // Non-null is implied by else branch of (subscriberFlags & SF.SubscribersRest) === 0
    }
    return true;
}
function addCollectionSubscriber(subscriber) {
    if (this.hasCollectionSubscriber(subscriber)) {
        return false;
    }
    const subscriberFlags = this._collectionSubscriberFlags;
    if ((subscriberFlags & 1 /* Subscriber0 */) === 0) {
        this._collectionSubscriber0 = subscriber;
        this._collectionSubscriberFlags |= 1 /* Subscriber0 */;
    }
    else if ((subscriberFlags & 2 /* Subscriber1 */) === 0) {
        this._collectionSubscriber1 = subscriber;
        this._collectionSubscriberFlags |= 2 /* Subscriber1 */;
    }
    else if ((subscriberFlags & 4 /* Subscriber2 */) === 0) {
        this._collectionSubscriber2 = subscriber;
        this._collectionSubscriberFlags |= 4 /* Subscriber2 */;
    }
    else if ((subscriberFlags & 8 /* SubscribersRest */) === 0) {
        this._collectionSubscribersRest = [subscriber];
        this._collectionSubscriberFlags |= 8 /* SubscribersRest */;
    }
    else {
        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
        this._collectionSubscribersRest.push(subscriber); // Non-null is implied by else branch of (subscriberFlags & SF.SubscribersRest) === 0
    }
    return true;
}
function removeSubscriber(subscriber) {
    const subscriberFlags = this._subscriberFlags;
    if ((subscriberFlags & 1 /* Subscriber0 */) > 0 && this._subscriber0 === subscriber) {
        this._subscriber0 = void 0;
        this._subscriberFlags = (this._subscriberFlags | 1 /* Subscriber0 */) ^ 1 /* Subscriber0 */;
        return true;
    }
    else if ((subscriberFlags & 2 /* Subscriber1 */) > 0 && this._subscriber1 === subscriber) {
        this._subscriber1 = void 0;
        this._subscriberFlags = (this._subscriberFlags | 2 /* Subscriber1 */) ^ 2 /* Subscriber1 */;
        return true;
    }
    else if ((subscriberFlags & 4 /* Subscriber2 */) > 0 && this._subscriber2 === subscriber) {
        this._subscriber2 = void 0;
        this._subscriberFlags = (this._subscriberFlags | 4 /* Subscriber2 */) ^ 4 /* Subscriber2 */;
        return true;
    }
    else if ((subscriberFlags & 8 /* SubscribersRest */) > 0) {
        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
        const subscribers = this._subscribersRest; // Non-null is implied by (subscriberFlags & SF.SubscribersRest) > 0
        for (let i = 0, ii = subscribers.length; i < ii; ++i) {
            if (subscribers[i] === subscriber) {
                subscribers.splice(i, 1);
                if (ii === 1) {
                    this._subscriberFlags = (this._subscriberFlags | 8 /* SubscribersRest */) ^ 8 /* SubscribersRest */;
                }
                return true;
            }
        }
    }
    return false;
}
function removeProxySubscriber(subscriber) {
    const subscriberFlags = this._proxySubscriberFlags;
    if ((subscriberFlags & 1 /* Subscriber0 */) > 0 && this._proxySubscriber0 === subscriber) {
        this._proxySubscriber0 = void 0;
        this._proxySubscriberFlags = (this._proxySubscriberFlags | 1 /* Subscriber0 */) ^ 1 /* Subscriber0 */;
        return true;
    }
    else if ((subscriberFlags & 2 /* Subscriber1 */) > 0 && this._proxySubscriber1 === subscriber) {
        this._proxySubscriber1 = void 0;
        this._proxySubscriberFlags = (this._proxySubscriberFlags | 2 /* Subscriber1 */) ^ 2 /* Subscriber1 */;
        return true;
    }
    else if ((subscriberFlags & 4 /* Subscriber2 */) > 0 && this._proxySubscriber2 === subscriber) {
        this._proxySubscriber2 = void 0;
        this._proxySubscriberFlags = (this._proxySubscriberFlags | 4 /* Subscriber2 */) ^ 4 /* Subscriber2 */;
        return true;
    }
    else if ((subscriberFlags & 8 /* SubscribersRest */) > 0) {
        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
        const subscribers = this._proxySubscribersRest; // Non-null is implied by (subscriberFlags & SF.SubscribersRest) > 0
        for (let i = 0, ii = subscribers.length; i < ii; ++i) {
            if (subscribers[i] === subscriber) {
                subscribers.splice(i, 1);
                if (ii === 1) {
                    this._proxySubscriberFlags = (this._proxySubscriberFlags | 8 /* SubscribersRest */) ^ 8 /* SubscribersRest */;
                }
                return true;
            }
        }
    }
    return false;
}
function removeCollectionSubscriber(subscriber) {
    const subscriberFlags = this._collectionSubscriberFlags;
    if ((subscriberFlags & 1 /* Subscriber0 */) > 0 && this._collectionSubscriber0 === subscriber) {
        this._collectionSubscriber0 = void 0;
        this._collectionSubscriberFlags = (this._collectionSubscriberFlags | 1 /* Subscriber0 */) ^ 1 /* Subscriber0 */;
        return true;
    }
    else if ((subscriberFlags & 2 /* Subscriber1 */) > 0 && this._collectionSubscriber1 === subscriber) {
        this._collectionSubscriber1 = void 0;
        this._collectionSubscriberFlags = (this._collectionSubscriberFlags | 2 /* Subscriber1 */) ^ 2 /* Subscriber1 */;
        return true;
    }
    else if ((subscriberFlags & 4 /* Subscriber2 */) > 0 && this._collectionSubscriber2 === subscriber) {
        this._collectionSubscriber2 = void 0;
        this._collectionSubscriberFlags = (this._collectionSubscriberFlags | 4 /* Subscriber2 */) ^ 4 /* Subscriber2 */;
        return true;
    }
    else if ((subscriberFlags & 8 /* SubscribersRest */) > 0) {
        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
        const subscribers = this._collectionSubscribersRest; // Non-null is implied by (subscriberFlags & SF.SubscribersRest) > 0
        for (let i = 0, ii = subscribers.length; i < ii; ++i) {
            if (subscribers[i] === subscriber) {
                subscribers.splice(i, 1);
                if (ii === 1) {
                    this._collectionSubscriberFlags = (this._collectionSubscriberFlags | 8 /* SubscribersRest */) ^ 8 /* SubscribersRest */;
                }
                return true;
            }
        }
    }
    return false;
}
function hasSubscribers() {
    return this._subscriberFlags !== 0 /* None */;
}
function hasProxySubscribers() {
    return this._proxySubscriberFlags !== 0 /* None */;
}
function hasCollectionSubscribers() {
    return this._collectionSubscriberFlags !== 0 /* None */;
}
function hasSubscriber(subscriber) {
    // Flags here is just a perf tweak
    // Compared to not using flags, it's a moderate speed-up when this collection does not have the subscriber;
    // and minor slow-down when it does, and the former is more common than the latter.
    const subscriberFlags = this._subscriberFlags;
    if ((subscriberFlags & 1 /* Subscriber0 */) > 0 && this._subscriber0 === subscriber) {
        return true;
    }
    if ((subscriberFlags & 2 /* Subscriber1 */) > 0 && this._subscriber1 === subscriber) {
        return true;
    }
    if ((subscriberFlags & 4 /* Subscriber2 */) > 0 && this._subscriber2 === subscriber) {
        return true;
    }
    if ((subscriberFlags & 8 /* SubscribersRest */) > 0) {
        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
        const subscribers = this._subscribersRest; // Non-null is implied by (subscriberFlags & SF.SubscribersRest) > 0
        for (let i = 0, ii = subscribers.length; i < ii; ++i) {
            if (subscribers[i] === subscriber) {
                return true;
            }
        }
    }
    return false;
}
function hasProxySubscriber(subscriber) {
    const subscriberFlags = this._proxySubscriberFlags;
    if ((subscriberFlags & 1 /* Subscriber0 */) > 0 && this._proxySubscriber0 === subscriber) {
        return true;
    }
    if ((subscriberFlags & 2 /* Subscriber1 */) > 0 && this._proxySubscriber1 === subscriber) {
        return true;
    }
    if ((subscriberFlags & 4 /* Subscriber2 */) > 0 && this._proxySubscriber2 === subscriber) {
        return true;
    }
    if ((subscriberFlags & 8 /* SubscribersRest */) > 0) {
        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
        const subscribers = this._proxySubscribersRest; // Non-null is implied by (subscriberFlags & SF.SubscribersRest) > 0
        for (let i = 0, ii = subscribers.length; i < ii; ++i) {
            if (subscribers[i] === subscriber) {
                return true;
            }
        }
    }
    return false;
}
function hasCollectionSubscriber(subscriber) {
    const subscriberFlags = this._collectionSubscriberFlags;
    if ((subscriberFlags & 1 /* Subscriber0 */) > 0 && this._collectionSubscriber0 === subscriber) {
        return true;
    }
    if ((subscriberFlags & 2 /* Subscriber1 */) > 0 && this._collectionSubscriber1 === subscriber) {
        return true;
    }
    if ((subscriberFlags & 4 /* Subscriber2 */) > 0 && this._collectionSubscriber2 === subscriber) {
        return true;
    }
    if ((subscriberFlags & 8 /* SubscribersRest */) > 0) {
        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
        const subscribers = this._collectionSubscribersRest; // Non-null is implied by (subscriberFlags & SF.SubscribersRest) > 0
        for (let i = 0, ii = subscribers.length; i < ii; ++i) {
            if (subscribers[i] === subscriber) {
                return true;
            }
        }
    }
    return false;
}
function callSubscribers(newValue, previousValue, flags) {
    /**
     * Note: change handlers may have the side-effect of adding/removing subscribers to this collection during this
     * callSubscribers invocation, so we're caching them all before invoking any.
     * Subscribers added during this invocation are not invoked (and they shouldn't be).
     * Subscribers removed during this invocation will still be invoked (and they also shouldn't be,
     * however this is accounted for via $isBound and similar flags on the subscriber objects)
     */
    const subscriber0 = this._subscriber0;
    const subscriber1 = this._subscriber1;
    const subscriber2 = this._subscriber2;
    let subscribers = this._subscribersRest;
    if (subscribers !== void 0) {
        subscribers = subscribers.slice();
    }
    if (subscriber0 !== void 0) {
        callSubscriber(subscriber0, newValue, previousValue, flags, subscriber0.id === void 0 ? 0 : this[subscriber0.id]);
    }
    if (subscriber1 !== void 0) {
        callSubscriber(subscriber1, newValue, previousValue, flags, subscriber1.id === void 0 ? 0 : this[subscriber1.id]);
    }
    if (subscriber2 !== void 0) {
        callSubscriber(subscriber2, newValue, previousValue, flags, subscriber2.id === void 0 ? 0 : this[subscriber2.id]);
    }
    if (subscribers !== void 0) {
        const { length } = subscribers;
        let subscriber;
        for (let i = 0; i < length; ++i) {
            subscriber = subscribers[i];
            if (subscriber !== void 0) {
                callSubscriber(subscriber, newValue, previousValue, flags, subscriber.id === void 0 ? 0 : this[subscriber.id]);
            }
        }
    }
}
function callSubscriber(subscriber, newValue, previousValue, flags, ownFlags) {
    subscriber.handleChange(newValue, previousValue, ((flags | 48 /* update */) ^ 48 /* update */) | ownFlags);
}
function callProxySubscribers(key, newValue, previousValue, flags) {
    const subscriber0 = this._proxySubscriber0;
    const subscriber1 = this._proxySubscriber1;
    const subscriber2 = this._proxySubscriber2;
    let subscribers = this._proxySubscribersRest;
    if (subscribers !== void 0) {
        subscribers = subscribers.slice();
    }
    if (subscriber0 !== void 0) {
        subscriber0.handleProxyChange(key, newValue, previousValue, flags);
    }
    if (subscriber1 !== void 0) {
        subscriber1.handleProxyChange(key, newValue, previousValue, flags);
    }
    if (subscriber2 !== void 0) {
        subscriber2.handleProxyChange(key, newValue, previousValue, flags);
    }
    if (subscribers !== void 0) {
        const { length } = subscribers;
        let subscriber;
        for (let i = 0; i < length; ++i) {
            subscriber = subscribers[i];
            if (subscriber !== void 0) {
                subscriber.handleProxyChange(key, newValue, previousValue, flags);
            }
        }
    }
}
function callCollectionSubscribers(indexMap, flags) {
    const subscriber0 = this._collectionSubscriber0;
    const subscriber1 = this._collectionSubscriber1;
    const subscriber2 = this._collectionSubscriber2;
    let subscribers = this._collectionSubscribersRest;
    if (subscribers !== void 0) {
        subscribers = subscribers.slice();
    }
    if (subscriber0 !== void 0) {
        subscriber0.handleCollectionChange(indexMap, flags);
    }
    if (subscriber1 !== void 0) {
        subscriber1.handleCollectionChange(indexMap, flags);
    }
    if (subscriber2 !== void 0) {
        subscriber2.handleCollectionChange(indexMap, flags);
    }
    if (subscribers !== void 0) {
        const { length } = subscribers;
        let subscriber;
        for (let i = 0; i < length; ++i) {
            subscriber = subscribers[i];
            if (subscriber !== void 0) {
                subscriber.handleCollectionChange(indexMap, flags);
            }
        }
    }
}
//# sourceMappingURL=subscriber-collection.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esnext/renderer.js":
/*!***************************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esnext/renderer.js ***!
  \***************************************************************/
/*! exports provided: ITemplateCompiler, IInstructionRenderer, IRenderer, instructionRenderer, Renderer, ensureExpression, getTarget, getRefTarget, SetPropertyRenderer, CustomElementRenderer, CustomAttributeRenderer, TemplateControllerRenderer, LetElementRenderer, CallBindingRenderer, RefBindingRenderer, InterpolationBindingRenderer, PropertyBindingRenderer, IteratorBindingRenderer, applyBindingBehavior */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ITemplateCompiler", function() { return ITemplateCompiler; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IInstructionRenderer", function() { return IInstructionRenderer; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IRenderer", function() { return IRenderer; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "instructionRenderer", function() { return instructionRenderer; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Renderer", function() { return Renderer; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ensureExpression", function() { return ensureExpression; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getTarget", function() { return getTarget; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getRefTarget", function() { return getRefTarget; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SetPropertyRenderer", function() { return SetPropertyRenderer; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CustomElementRenderer", function() { return CustomElementRenderer; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CustomAttributeRenderer", function() { return CustomAttributeRenderer; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TemplateControllerRenderer", function() { return TemplateControllerRenderer; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LetElementRenderer", function() { return LetElementRenderer; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CallBindingRenderer", function() { return CallBindingRenderer; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RefBindingRenderer", function() { return RefBindingRenderer; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "InterpolationBindingRenderer", function() { return InterpolationBindingRenderer; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PropertyBindingRenderer", function() { return PropertyBindingRenderer; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IteratorBindingRenderer", function() { return IteratorBindingRenderer; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "applyBindingBehavior", function() { return applyBindingBehavior; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _binding_call_binding__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./binding/call-binding */ "./node_modules/@aurelia/runtime/dist/esnext/binding/call-binding.js");
/* harmony import */ var _binding_expression_parser__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./binding/expression-parser */ "./node_modules/@aurelia/runtime/dist/esnext/binding/expression-parser.js");
/* harmony import */ var _binding_interpolation_binding__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./binding/interpolation-binding */ "./node_modules/@aurelia/runtime/dist/esnext/binding/interpolation-binding.js");
/* harmony import */ var _binding_let_binding__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./binding/let-binding */ "./node_modules/@aurelia/runtime/dist/esnext/binding/let-binding.js");
/* harmony import */ var _binding_property_binding__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./binding/property-binding */ "./node_modules/@aurelia/runtime/dist/esnext/binding/property-binding.js");
/* harmony import */ var _binding_ref_binding__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./binding/ref-binding */ "./node_modules/@aurelia/runtime/dist/esnext/binding/ref-binding.js");
/* harmony import */ var _definitions__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./definitions */ "./node_modules/@aurelia/runtime/dist/esnext/definitions.js");
/* harmony import */ var _flags__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./flags */ "./node_modules/@aurelia/runtime/dist/esnext/flags.js");
/* harmony import */ var _lifecycle__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./lifecycle */ "./node_modules/@aurelia/runtime/dist/esnext/lifecycle.js");
/* harmony import */ var _observation_observer_locator__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./observation/observer-locator */ "./node_modules/@aurelia/runtime/dist/esnext/observation/observer-locator.js");
/* harmony import */ var _resources_custom_attribute__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./resources/custom-attribute */ "./node_modules/@aurelia/runtime/dist/esnext/resources/custom-attribute.js");
/* harmony import */ var _resources_custom_element__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./resources/custom-element */ "./node_modules/@aurelia/runtime/dist/esnext/resources/custom-element.js");
/* harmony import */ var _templating_controller__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./templating/controller */ "./node_modules/@aurelia/runtime/dist/esnext/templating/controller.js");
/* harmony import */ var _templating_render_context__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./templating/render-context */ "./node_modules/@aurelia/runtime/dist/esnext/templating/render-context.js");
/* harmony import */ var _binding_ast__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./binding/ast */ "./node_modules/@aurelia/runtime/dist/esnext/binding/ast.js");
/* harmony import */ var _resources_binding_behavior__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./resources/binding-behavior */ "./node_modules/@aurelia/runtime/dist/esnext/resources/binding-behavior.js");


















const ITemplateCompiler = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["DI"].createInterface('ITemplateCompiler').noDefault();
const IInstructionRenderer = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["DI"].createInterface('IInstructionRenderer').noDefault();
const IRenderer = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["DI"].createInterface('IRenderer').noDefault();
function instructionRenderer(instructionType) {
    return function decorator(target) {
        // wrap the constructor to set the instructionType to the instance (for better performance than when set on the prototype)
        const decoratedTarget = function (...args) {
            const instance = new target(...args);
            instance.instructionType = instructionType;
            return instance;
        };
        // make sure we register the decorated constructor with DI
        decoratedTarget.register = function register(container) {
            _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Registration"].singleton(IInstructionRenderer, decoratedTarget).register(container);
        };
        // copy over any metadata such as annotations (set by preceding decorators) as well as static properties set by the user
        // also copy the name, to be less confusing to users (so they can still use constructor.name for whatever reason)
        // the length (number of ctor arguments) is copied for the same reason
        const metadataKeys = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Metadata"].getOwnKeys(target);
        for (const key of metadataKeys) {
            _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Metadata"].define(key, _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Metadata"].getOwn(key, target), decoratedTarget);
        }
        const ownProperties = Object.getOwnPropertyDescriptors(target);
        Object.keys(ownProperties).filter(prop => prop !== 'prototype').forEach(prop => {
            Reflect.defineProperty(decoratedTarget, prop, ownProperties[prop]);
        });
        return decoratedTarget;
    };
}
/* @internal */
let Renderer = class Renderer {
    constructor(instructionRenderers) {
        const record = this.instructionRenderers = {};
        instructionRenderers.forEach(item => {
            // Binding the functions to the renderer instances and calling the functions directly,
            // prevents the `render` call sites from going megamorphic.
            // Consumes slightly more memory but significantly less CPU.
            record[item.instructionType] = item.render.bind(item);
        });
    }
    static register(container) {
        return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Registration"].singleton(IRenderer, this).register(container);
    }
    render(flags, context, controller, targets, definition, host, parts) {
        const targetInstructions = definition.instructions;
        if (targets.length !== targetInstructions.length) {
            throw new Error(`The compiled template is not aligned with the render instructions. There are ${targets.length} targets and ${targetInstructions.length} instructions.`);
        }
        for (let i = 0, ii = targets.length; i < ii; ++i) {
            this.renderInstructions(
            /* flags        */ flags, 
            /* context      */ context, 
            /* instructions */ targetInstructions[i], 
            /* controller   */ controller, 
            /* target       */ targets[i], 
            /* parts        */ parts);
        }
        if (host !== void 0 && host !== null) {
            this.renderInstructions(
            /* flags        */ flags, 
            /* context      */ context, 
            /* instructions */ definition.surrogates, 
            /* controller   */ controller, 
            /* target       */ host, 
            /* parts        */ parts);
        }
    }
    renderInstructions(flags, context, instructions, controller, target, parts) {
        const instructionRenderers = this.instructionRenderers;
        let current;
        for (let i = 0, ii = instructions.length; i < ii; ++i) {
            current = instructions[i];
            instructionRenderers[current.type](flags, context, controller, target, current, parts);
        }
    }
};
Renderer = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(0, Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["all"])(IInstructionRenderer)),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Array])
], Renderer);

function ensureExpression(parser, srcOrExpr, bindingType) {
    if (typeof srcOrExpr === 'string') {
        return parser.parse(srcOrExpr, bindingType);
    }
    return srcOrExpr;
}
function getTarget(potentialTarget) {
    if (potentialTarget.bindingContext !== void 0) {
        return potentialTarget.bindingContext;
    }
    return potentialTarget;
}
function getRefTarget(refHost, refTargetName) {
    if (refTargetName === 'element') {
        return refHost;
    }
    switch (refTargetName) {
        case 'controller':
            // this means it supports returning undefined
            return _resources_custom_element__WEBPACK_IMPORTED_MODULE_13__["CustomElement"].for(refHost);
        case 'view':
            // todo: returns node sequences for fun?
            throw new Error('Not supported API');
        case 'view-model':
            // this means it supports returning undefined
            return _resources_custom_element__WEBPACK_IMPORTED_MODULE_13__["CustomElement"].for(refHost).viewModel;
        default: {
            const caController = _resources_custom_attribute__WEBPACK_IMPORTED_MODULE_12__["CustomAttribute"].for(refHost, refTargetName);
            if (caController !== void 0) {
                return caController.viewModel;
            }
            const ceController = _resources_custom_element__WEBPACK_IMPORTED_MODULE_13__["CustomElement"].for(refHost, refTargetName);
            if (ceController === void 0) {
                throw new Error(`Attempted to reference "${refTargetName}", but it was not found amongst the target's API.`);
            }
            return ceController.viewModel;
        }
    }
}
let SetPropertyRenderer = 
/** @internal */
class SetPropertyRenderer {
    render(flags, context, controller, target, instruction) {
        const obj = getTarget(target);
        if (obj.$observers !== void 0 && obj.$observers[instruction.to] !== void 0) {
            obj.$observers[instruction.to].setValue(instruction.value, 4096 /* fromBind */);
        }
        else {
            obj[instruction.to] = instruction.value;
        }
    }
};
SetPropertyRenderer = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    instructionRenderer("re" /* setProperty */)
    /** @internal */
], SetPropertyRenderer);

let CustomElementRenderer = 
/** @internal */
class CustomElementRenderer {
    render(flags, context, controller, target, instruction, parts) {
        parts = Object(_definitions__WEBPACK_IMPORTED_MODULE_8__["mergeParts"])(parts, instruction.parts);
        const factory = context.getComponentFactory(
        /* parentController */ controller, 
        /* host             */ target, 
        /* instruction      */ instruction, 
        /* viewFactory      */ void 0, 
        /* location         */ target);
        const key = _resources_custom_element__WEBPACK_IMPORTED_MODULE_13__["CustomElement"].keyFrom(instruction.res);
        const component = factory.createComponent(key);
        const lifecycle = context.get(_lifecycle__WEBPACK_IMPORTED_MODULE_10__["ILifecycle"]);
        const childController = _templating_controller__WEBPACK_IMPORTED_MODULE_14__["Controller"].forCustomElement(
        /* viewModel       */ component, 
        /* lifecycle       */ lifecycle, 
        /* host            */ target, 
        /* parentContainer */ context, 
        /* parts           */ parts, 
        /* flags           */ flags);
        flags = childController.flags;
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Metadata"].define(key, childController, target);
        context.renderInstructions(
        /* flags        */ flags, 
        /* instructions */ instruction.instructions, 
        /* controller   */ controller, 
        /* target       */ childController, 
        /* parts        */ parts);
        controller.addController(childController);
        factory.dispose();
    }
};
CustomElementRenderer = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    instructionRenderer("ra" /* hydrateElement */)
    /** @internal */
], CustomElementRenderer);

let CustomAttributeRenderer = 
/** @internal */
class CustomAttributeRenderer {
    render(flags, context, controller, target, instruction, parts) {
        const factory = context.getComponentFactory(
        /* parentController */ controller, 
        /* host             */ target, 
        /* instruction      */ instruction, 
        /* viewFactory      */ void 0, 
        /* location         */ void 0);
        const key = _resources_custom_attribute__WEBPACK_IMPORTED_MODULE_12__["CustomAttribute"].keyFrom(instruction.res);
        const component = factory.createComponent(key);
        const lifecycle = context.get(_lifecycle__WEBPACK_IMPORTED_MODULE_10__["ILifecycle"]);
        const childController = _templating_controller__WEBPACK_IMPORTED_MODULE_14__["Controller"].forCustomAttribute(
        /* viewModel */ component, 
        /* lifecycle */ lifecycle, 
        /* host      */ target, 
        /* flags     */ flags);
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Metadata"].define(key, childController, target);
        context.renderInstructions(
        /* flags        */ flags, 
        /* instructions */ instruction.instructions, 
        /* controller   */ controller, 
        /* target       */ childController, 
        /* parts        */ parts);
        controller.addController(childController);
        factory.dispose();
    }
};
CustomAttributeRenderer = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    instructionRenderer("rb" /* hydrateAttribute */)
    /** @internal */
], CustomAttributeRenderer);

let TemplateControllerRenderer = 
/** @internal */
class TemplateControllerRenderer {
    render(flags, parentContext, controller, target, instruction, parts) {
        parts = Object(_definitions__WEBPACK_IMPORTED_MODULE_8__["mergeParts"])(parts, instruction.parts);
        const viewFactory = Object(_templating_render_context__WEBPACK_IMPORTED_MODULE_15__["getRenderContext"])(instruction.def, parentContext, parts).getViewFactory();
        const renderLocation = parentContext.dom.convertToRenderLocation(target);
        const componentFactory = parentContext.getComponentFactory(
        /* parentController */ controller, 
        /* host             */ target, 
        /* instruction      */ instruction, 
        /* viewFactory      */ viewFactory, 
        /* location         */ renderLocation);
        const key = _resources_custom_attribute__WEBPACK_IMPORTED_MODULE_12__["CustomAttribute"].keyFrom(instruction.res);
        const component = componentFactory.createComponent(key);
        const lifecycle = parentContext.get(_lifecycle__WEBPACK_IMPORTED_MODULE_10__["ILifecycle"]);
        const childController = _templating_controller__WEBPACK_IMPORTED_MODULE_14__["Controller"].forCustomAttribute(
        /* viewModel */ component, 
        /* lifecycle */ lifecycle, 
        /* host      */ target, 
        /* flags     */ flags);
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Metadata"].define(key, childController, renderLocation);
        if (instruction.link) {
            const controllers = controller.controllers;
            component.link(controllers[controllers.length - 1]);
        }
        parentContext.renderInstructions(
        /* flags        */ flags, 
        /* instructions */ instruction.instructions, 
        /* controller   */ controller, 
        /* target       */ childController, 
        /* parts        */ parts);
        controller.addController(childController);
        componentFactory.dispose();
    }
};
TemplateControllerRenderer = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    instructionRenderer("rc" /* hydrateTemplateController */)
    /** @internal */
], TemplateControllerRenderer);

let LetElementRenderer = 
/** @internal */
class LetElementRenderer {
    constructor(parser, observerLocator) {
        this.parser = parser;
        this.observerLocator = observerLocator;
    }
    render(flags, context, controller, target, instruction) {
        context.dom.remove(target);
        const childInstructions = instruction.instructions;
        const toBindingContext = instruction.toBindingContext;
        let childInstruction;
        let expr;
        let binding;
        for (let i = 0, ii = childInstructions.length; i < ii; ++i) {
            childInstruction = childInstructions[i];
            expr = ensureExpression(this.parser, childInstruction.from, 48 /* IsPropertyCommand */);
            binding = applyBindingBehavior(new _binding_let_binding__WEBPACK_IMPORTED_MODULE_5__["LetBinding"](expr, childInstruction.to, this.observerLocator, context, toBindingContext), expr, context);
            controller.addBinding(binding);
        }
    }
};
LetElementRenderer = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    instructionRenderer("rd" /* hydrateLetElement */)
    /** @internal */
    ,
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(0, _binding_expression_parser__WEBPACK_IMPORTED_MODULE_3__["IExpressionParser"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(1, _observation_observer_locator__WEBPACK_IMPORTED_MODULE_11__["IObserverLocator"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object, Object])
], LetElementRenderer);

let CallBindingRenderer = 
/** @internal */
class CallBindingRenderer {
    constructor(parser, observerLocator) {
        this.parser = parser;
        this.observerLocator = observerLocator;
    }
    render(flags, context, controller, target, instruction) {
        const expr = ensureExpression(this.parser, instruction.from, 153 /* CallCommand */);
        const binding = applyBindingBehavior(new _binding_call_binding__WEBPACK_IMPORTED_MODULE_2__["CallBinding"](expr, getTarget(target), instruction.to, this.observerLocator, context), expr, context);
        controller.addBinding(binding);
    }
};
CallBindingRenderer = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    instructionRenderer("rh" /* callBinding */)
    /** @internal */
    ,
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(0, _binding_expression_parser__WEBPACK_IMPORTED_MODULE_3__["IExpressionParser"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(1, _observation_observer_locator__WEBPACK_IMPORTED_MODULE_11__["IObserverLocator"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object, Object])
], CallBindingRenderer);

let RefBindingRenderer = 
/** @internal */
class RefBindingRenderer {
    constructor(parser) {
        this.parser = parser;
    }
    render(flags, context, controller, target, instruction) {
        const expr = ensureExpression(this.parser, instruction.from, 5376 /* IsRef */);
        const binding = applyBindingBehavior(new _binding_ref_binding__WEBPACK_IMPORTED_MODULE_7__["RefBinding"](expr, getRefTarget(target, instruction.to), context), expr, context);
        controller.addBinding(binding);
    }
};
RefBindingRenderer = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    instructionRenderer("rj" /* refBinding */)
    /** @internal */
    ,
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(0, _binding_expression_parser__WEBPACK_IMPORTED_MODULE_3__["IExpressionParser"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object])
], RefBindingRenderer);

let InterpolationBindingRenderer = 
/** @internal */
class InterpolationBindingRenderer {
    constructor(parser, observerLocator) {
        this.parser = parser;
        this.observerLocator = observerLocator;
    }
    render(flags, context, controller, target, instruction) {
        let binding;
        const expr = ensureExpression(this.parser, instruction.from, 2048 /* Interpolation */);
        if (expr.isMulti) {
            binding = applyBindingBehavior(new _binding_interpolation_binding__WEBPACK_IMPORTED_MODULE_4__["MultiInterpolationBinding"](this.observerLocator, expr, getTarget(target), instruction.to, _flags__WEBPACK_IMPORTED_MODULE_9__["BindingMode"].toView, context), expr, context);
        }
        else {
            binding = applyBindingBehavior(new _binding_interpolation_binding__WEBPACK_IMPORTED_MODULE_4__["InterpolationBinding"](expr.firstExpression, expr, getTarget(target), instruction.to, _flags__WEBPACK_IMPORTED_MODULE_9__["BindingMode"].toView, this.observerLocator, context, true), expr, context);
        }
        controller.addBinding(binding);
    }
};
InterpolationBindingRenderer = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    instructionRenderer("rf" /* interpolation */)
    /** @internal */
    ,
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(0, _binding_expression_parser__WEBPACK_IMPORTED_MODULE_3__["IExpressionParser"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(1, _observation_observer_locator__WEBPACK_IMPORTED_MODULE_11__["IObserverLocator"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object, Object])
], InterpolationBindingRenderer);

let PropertyBindingRenderer = 
/** @internal */
class PropertyBindingRenderer {
    constructor(parser, observerLocator) {
        this.parser = parser;
        this.observerLocator = observerLocator;
    }
    render(flags, context, controller, target, instruction) {
        const expr = ensureExpression(this.parser, instruction.from, 48 /* IsPropertyCommand */ | instruction.mode);
        const binding = applyBindingBehavior(new _binding_property_binding__WEBPACK_IMPORTED_MODULE_6__["PropertyBinding"](expr, getTarget(target), instruction.to, instruction.mode, this.observerLocator, context), expr, context);
        controller.addBinding(binding);
    }
};
PropertyBindingRenderer = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    instructionRenderer("rg" /* propertyBinding */)
    /** @internal */
    ,
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(0, _binding_expression_parser__WEBPACK_IMPORTED_MODULE_3__["IExpressionParser"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(1, _observation_observer_locator__WEBPACK_IMPORTED_MODULE_11__["IObserverLocator"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object, Object])
], PropertyBindingRenderer);

let IteratorBindingRenderer = 
/** @internal */
class IteratorBindingRenderer {
    constructor(parser, observerLocator) {
        this.parser = parser;
        this.observerLocator = observerLocator;
    }
    render(flags, context, controller, target, instruction) {
        const expr = ensureExpression(this.parser, instruction.from, 539 /* ForCommand */);
        const binding = applyBindingBehavior(new _binding_property_binding__WEBPACK_IMPORTED_MODULE_6__["PropertyBinding"](expr, getTarget(target), instruction.to, _flags__WEBPACK_IMPORTED_MODULE_9__["BindingMode"].toView, this.observerLocator, context), expr, context);
        controller.addBinding(binding);
    }
};
IteratorBindingRenderer = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    instructionRenderer("rk" /* iteratorBinding */)
    /** @internal */
    ,
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(0, _binding_expression_parser__WEBPACK_IMPORTED_MODULE_3__["IExpressionParser"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(1, _observation_observer_locator__WEBPACK_IMPORTED_MODULE_11__["IObserverLocator"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object, Object])
], IteratorBindingRenderer);

let behaviorExpressionIndex = 0;
const behaviorExpressions = [];
function applyBindingBehavior(binding, expression, locator) {
    while (expression instanceof _binding_ast__WEBPACK_IMPORTED_MODULE_16__["BindingBehaviorExpression"]) {
        behaviorExpressions[behaviorExpressionIndex++] = expression;
        expression = expression.expression;
    }
    while (behaviorExpressionIndex > 0) {
        const behaviorExpression = behaviorExpressions[--behaviorExpressionIndex];
        const behaviorOrFactory = locator.get(behaviorExpression.behaviorKey);
        if (behaviorOrFactory instanceof _resources_binding_behavior__WEBPACK_IMPORTED_MODULE_17__["BindingBehaviorFactory"]) {
            binding = behaviorOrFactory.construct(binding, behaviorExpression);
        }
    }
    behaviorExpressions.length = 0;
    return binding;
}
//# sourceMappingURL=renderer.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esnext/resources/binding-behavior.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esnext/resources/binding-behavior.js ***!
  \*********************************************************************************/
/*! exports provided: BindingBehaviorStrategy, bindingBehavior, BindingBehaviorDefinition, BindingBehaviorFactory, BindingInterceptor, BindingBehavior */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BindingBehaviorStrategy", function() { return BindingBehaviorStrategy; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "bindingBehavior", function() { return bindingBehavior; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BindingBehaviorDefinition", function() { return BindingBehaviorDefinition; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BindingBehaviorFactory", function() { return BindingBehaviorFactory; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BindingInterceptor", function() { return BindingInterceptor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BindingBehavior", function() { return BindingBehavior; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _definitions__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../definitions */ "./node_modules/@aurelia/runtime/dist/esnext/definitions.js");
/* harmony import */ var _binding_connectable__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../binding/connectable */ "./node_modules/@aurelia/runtime/dist/esnext/binding/connectable.js");




var BindingBehaviorStrategy;
(function (BindingBehaviorStrategy) {
    BindingBehaviorStrategy[BindingBehaviorStrategy["singleton"] = 1] = "singleton";
    BindingBehaviorStrategy[BindingBehaviorStrategy["interceptor"] = 2] = "interceptor";
})(BindingBehaviorStrategy || (BindingBehaviorStrategy = {}));
function bindingBehavior(nameOrDef) {
    return function (target) {
        return BindingBehavior.define(nameOrDef, target);
    };
}
class BindingBehaviorDefinition {
    constructor(Type, name, aliases, key, strategy) {
        this.Type = Type;
        this.name = name;
        this.aliases = aliases;
        this.key = key;
        this.strategy = strategy;
    }
    static create(nameOrDef, Type) {
        let name;
        let def;
        if (typeof nameOrDef === 'string') {
            name = nameOrDef;
            def = { name };
        }
        else {
            name = nameOrDef.name;
            def = nameOrDef;
        }
        const inheritsFromInterceptor = Object.getPrototypeOf(Type) === BindingInterceptor;
        return new BindingBehaviorDefinition(Type, Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["firstDefined"])(BindingBehavior.getAnnotation(Type, 'name'), name), Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["mergeArrays"])(BindingBehavior.getAnnotation(Type, 'aliases'), def.aliases, Type.aliases), BindingBehavior.keyFrom(name), Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["fromAnnotationOrDefinitionOrTypeOrDefault"])('strategy', def, Type, () => inheritsFromInterceptor ? 2 /* interceptor */ : 1 /* singleton */));
    }
    register(container) {
        const { Type, key, aliases, strategy } = this;
        switch (strategy) {
            case 1 /* singleton */:
                _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Registration"].singleton(key, Type).register(container);
                break;
            case 2 /* interceptor */:
                _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Registration"].instance(key, new BindingBehaviorFactory(container, Type)).register(container);
                break;
        }
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Registration"].aliasTo(key, Type).register(container);
        Object(_definitions__WEBPACK_IMPORTED_MODULE_2__["registerAliases"])(aliases, BindingBehavior, key, container);
    }
}
class BindingBehaviorFactory {
    constructor(container, Type) {
        this.container = container;
        this.Type = Type;
        this.deps = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["DI"].getDependencies(Type);
    }
    construct(binding, expr) {
        const container = this.container;
        const deps = this.deps;
        switch (deps.length) {
            case 0:
            case 1:
            case 2:
                return new this.Type(binding, expr);
            case 3:
                return new this.Type(container.get(deps[0]), binding, expr);
            case 4:
                return new this.Type(container.get(deps[0]), container.get(deps[1]), binding, expr);
            default:
                return new this.Type(...deps.map(d => container.get(d)), binding, expr);
        }
    }
}
let BindingInterceptor = class BindingInterceptor {
    constructor(binding, expr) {
        this.binding = binding;
        this.expr = expr;
        this.interceptor = this;
        let interceptor;
        while (binding.interceptor !== this) {
            interceptor = binding.interceptor;
            binding.interceptor = this;
            binding = interceptor;
        }
    }
    get id() {
        return this.binding.id;
    }
    get observerLocator() {
        return this.binding.observerLocator;
    }
    get locator() {
        return this.binding.locator;
    }
    get $scope() {
        return this.binding.$scope;
    }
    get part() {
        return this.binding.part;
    }
    get $state() {
        return this.binding.$state;
    }
    updateTarget(value, flags) {
        this.binding.updateTarget(value, flags);
    }
    updateSource(value, flags) {
        this.binding.updateSource(value, flags);
    }
    callSource(args) {
        return this.binding.callSource(args);
    }
    handleChange(newValue, previousValue, flags) {
        this.binding.handleChange(newValue, previousValue, flags);
    }
    $bind(flags, scope, part) {
        this.binding.$bind(flags, scope, part);
    }
    $unbind(flags) {
        this.binding.$unbind(flags);
    }
};
BindingInterceptor = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    _binding_connectable__WEBPACK_IMPORTED_MODULE_3__["connectable"],
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object, Object])
], BindingInterceptor);

const BindingBehavior = {
    name: _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Protocol"].resource.keyFor('binding-behavior'),
    keyFrom(name) {
        return `${BindingBehavior.name}:${name}`;
    },
    isType(value) {
        return typeof value === 'function' && _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Metadata"].hasOwn(BindingBehavior.name, value);
    },
    define(nameOrDef, Type) {
        const definition = BindingBehaviorDefinition.create(nameOrDef, Type);
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Metadata"].define(BindingBehavior.name, definition, definition.Type);
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Metadata"].define(BindingBehavior.name, definition, definition);
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Protocol"].resource.appendTo(Type, BindingBehavior.name);
        return definition.Type;
    },
    getDefinition(Type) {
        const def = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Metadata"].getOwn(BindingBehavior.name, Type);
        if (def === void 0) {
            throw new Error(`No definition found for type ${Type.name}`);
        }
        return def;
    },
    annotate(Type, prop, value) {
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Metadata"].define(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Protocol"].annotation.keyFor(prop), value, Type);
    },
    getAnnotation(Type, prop) {
        return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Metadata"].getOwn(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Protocol"].annotation.keyFor(prop), Type);
    },
};
//# sourceMappingURL=binding-behavior.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esnext/resources/binding-behaviors/binding-mode.js":
/*!***********************************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esnext/resources/binding-behaviors/binding-mode.js ***!
  \***********************************************************************************************/
/*! exports provided: BindingModeBehavior, OneTimeBindingBehavior, ToViewBindingBehavior, FromViewBindingBehavior, TwoWayBindingBehavior */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BindingModeBehavior", function() { return BindingModeBehavior; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OneTimeBindingBehavior", function() { return OneTimeBindingBehavior; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ToViewBindingBehavior", function() { return ToViewBindingBehavior; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FromViewBindingBehavior", function() { return FromViewBindingBehavior; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TwoWayBindingBehavior", function() { return TwoWayBindingBehavior; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _flags__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../flags */ "./node_modules/@aurelia/runtime/dist/esnext/flags.js");
/* harmony import */ var _binding_behavior__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../binding-behavior */ "./node_modules/@aurelia/runtime/dist/esnext/resources/binding-behavior.js");



class BindingModeBehavior {
    constructor(mode) {
        this.mode = mode;
        this.originalModes = new WeakMap();
    }
    bind(flags, scope, binding) {
        this.originalModes.set(binding, binding.mode);
        binding.mode = this.mode;
    }
    unbind(flags, scope, binding) {
        binding.mode = this.originalModes.get(binding);
    }
}
let OneTimeBindingBehavior = class OneTimeBindingBehavior extends BindingModeBehavior {
    constructor() {
        super(_flags__WEBPACK_IMPORTED_MODULE_1__["BindingMode"].oneTime);
    }
};
OneTimeBindingBehavior = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_binding_behavior__WEBPACK_IMPORTED_MODULE_2__["bindingBehavior"])('oneTime'),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [])
], OneTimeBindingBehavior);

let ToViewBindingBehavior = class ToViewBindingBehavior extends BindingModeBehavior {
    constructor() {
        super(_flags__WEBPACK_IMPORTED_MODULE_1__["BindingMode"].toView);
    }
};
ToViewBindingBehavior = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_binding_behavior__WEBPACK_IMPORTED_MODULE_2__["bindingBehavior"])('toView'),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [])
], ToViewBindingBehavior);

let FromViewBindingBehavior = class FromViewBindingBehavior extends BindingModeBehavior {
    constructor() {
        super(_flags__WEBPACK_IMPORTED_MODULE_1__["BindingMode"].fromView);
    }
};
FromViewBindingBehavior = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_binding_behavior__WEBPACK_IMPORTED_MODULE_2__["bindingBehavior"])('fromView'),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [])
], FromViewBindingBehavior);

let TwoWayBindingBehavior = class TwoWayBindingBehavior extends BindingModeBehavior {
    constructor() {
        super(_flags__WEBPACK_IMPORTED_MODULE_1__["BindingMode"].twoWay);
    }
};
TwoWayBindingBehavior = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_binding_behavior__WEBPACK_IMPORTED_MODULE_2__["bindingBehavior"])('twoWay'),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [])
], TwoWayBindingBehavior);

//# sourceMappingURL=binding-mode.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esnext/resources/binding-behaviors/debounce.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esnext/resources/binding-behaviors/debounce.js ***!
  \*******************************************************************************************/
/*! exports provided: DebounceBindingBehavior */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DebounceBindingBehavior", function() { return DebounceBindingBehavior; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _binding_behavior__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../binding-behavior */ "./node_modules/@aurelia/runtime/dist/esnext/resources/binding-behavior.js");
/* harmony import */ var _aurelia_scheduler__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aurelia/scheduler */ "./node_modules/@aurelia/scheduler/dist/esnext/index.js");
/* harmony import */ var _binding_ast__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../binding/ast */ "./node_modules/@aurelia/runtime/dist/esnext/binding/ast.js");




let DebounceBindingBehavior = class DebounceBindingBehavior extends _binding_behavior__WEBPACK_IMPORTED_MODULE_1__["BindingInterceptor"] {
    constructor(binding, expr) {
        super(binding, expr);
        this.opts = { delay: 0 };
        this.firstArg = null;
        this.task = null;
        this.taskQueue = binding.locator.get(_aurelia_scheduler__WEBPACK_IMPORTED_MODULE_2__["IScheduler"]).getPostRenderTaskQueue();
        if (expr.args.length > 0) {
            this.firstArg = expr.args[0];
        }
    }
    callSource(args) {
        this.queueTask(() => this.binding.callSource(args));
        return void 0;
    }
    handleChange(newValue, previousValue, flags) {
        this.queueTask(() => this.binding.handleChange(newValue, previousValue, flags));
    }
    queueTask(callback) {
        if (this.task !== null) {
            this.task.cancel();
        }
        this.task = this.taskQueue.queueTask(callback, this.opts);
    }
    $bind(flags, scope, part) {
        if (this.firstArg !== null) {
            const delay = Number(this.firstArg.evaluate(flags, scope, this.locator, part));
            if (!isNaN(delay)) {
                this.opts.delay = delay;
            }
        }
        this.binding.$bind(flags, scope, part);
    }
};
DebounceBindingBehavior = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_binding_behavior__WEBPACK_IMPORTED_MODULE_1__["bindingBehavior"])('debounce'),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object, _binding_ast__WEBPACK_IMPORTED_MODULE_3__["BindingBehaviorExpression"]])
], DebounceBindingBehavior);

//# sourceMappingURL=debounce.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esnext/resources/binding-behaviors/signals.js":
/*!******************************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esnext/resources/binding-behaviors/signals.js ***!
  \******************************************************************************************/
/*! exports provided: SignalBindingBehavior */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SignalBindingBehavior", function() { return SignalBindingBehavior; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _observation_signaler__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../observation/signaler */ "./node_modules/@aurelia/runtime/dist/esnext/observation/signaler.js");
/* harmony import */ var _binding_behavior__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../binding-behavior */ "./node_modules/@aurelia/runtime/dist/esnext/resources/binding-behavior.js");




let SignalBindingBehavior = class SignalBindingBehavior {
    constructor(signaler) {
        this.signaler = signaler;
    }
    bind(flags, scope, binding, ...args) {
        if (!binding.updateTarget) {
            throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Reporter"].error(11);
        }
        if (arguments.length === 4) {
            const name = args[0];
            this.signaler.addSignalListener(name, binding);
            binding.signal = name;
        }
        else if (arguments.length > 4) {
            const names = Array.prototype.slice.call(args.length + 3, 3);
            let i = names.length;
            while (i--) {
                const name = names[i];
                this.signaler.addSignalListener(name, binding);
            }
            binding.signal = names;
        }
        else {
            throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Reporter"].error(12);
        }
    }
    unbind(flags, scope, binding) {
        const name = binding.signal;
        binding.signal = null;
        if (Array.isArray(name)) {
            const names = name;
            let i = names.length;
            while (i--) {
                this.signaler.removeSignalListener(names[i], binding);
            }
        }
        else {
            this.signaler.removeSignalListener(name, binding);
        }
    }
};
SignalBindingBehavior = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_binding_behavior__WEBPACK_IMPORTED_MODULE_3__["bindingBehavior"])('signal'),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(0, _observation_signaler__WEBPACK_IMPORTED_MODULE_2__["ISignaler"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object])
], SignalBindingBehavior);

//# sourceMappingURL=signals.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esnext/resources/binding-behaviors/throttle.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esnext/resources/binding-behaviors/throttle.js ***!
  \*******************************************************************************************/
/*! exports provided: ThrottleBindingBehavior */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ThrottleBindingBehavior", function() { return ThrottleBindingBehavior; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _binding_behavior__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../binding-behavior */ "./node_modules/@aurelia/runtime/dist/esnext/resources/binding-behavior.js");
/* harmony import */ var _aurelia_scheduler__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aurelia/scheduler */ "./node_modules/@aurelia/scheduler/dist/esnext/index.js");
/* harmony import */ var _binding_ast__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../binding/ast */ "./node_modules/@aurelia/runtime/dist/esnext/binding/ast.js");




let ThrottleBindingBehavior = class ThrottleBindingBehavior extends _binding_behavior__WEBPACK_IMPORTED_MODULE_1__["BindingInterceptor"] {
    constructor(binding, expr) {
        super(binding, expr);
        this.opts = { delay: 0 };
        this.firstArg = null;
        this.task = null;
        this.lastCall = 0;
        this.taskQueue = binding.locator.get(_aurelia_scheduler__WEBPACK_IMPORTED_MODULE_2__["IScheduler"]).getPostRenderTaskQueue();
        this.now = binding.locator.get(_aurelia_scheduler__WEBPACK_IMPORTED_MODULE_2__["Now"]);
        if (expr.args.length > 0) {
            this.firstArg = expr.args[0];
        }
    }
    callSource(args) {
        this.queueTask(() => this.binding.callSource(args));
        return void 0;
    }
    handleChange(newValue, previousValue, flags) {
        this.queueTask(() => this.binding.handleChange(newValue, previousValue, flags));
    }
    queueTask(callback) {
        const opts = this.opts;
        const now = this.now;
        const nextDelay = this.lastCall + opts.delay - now();
        if (nextDelay > 0) {
            if (this.task !== null) {
                this.task.cancel();
            }
            opts.delay = nextDelay;
            this.task = this.taskQueue.queueTask(() => {
                this.lastCall = now();
                callback();
            }, opts);
        }
        else {
            this.lastCall = now();
            callback();
        }
    }
    $bind(flags, scope, part) {
        if (this.firstArg !== null) {
            const delay = Number(this.firstArg.evaluate(flags, scope, this.locator, part));
            if (!isNaN(delay)) {
                this.opts.delay = delay;
            }
        }
        this.binding.$bind(flags, scope, part);
    }
};
ThrottleBindingBehavior = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_binding_behavior__WEBPACK_IMPORTED_MODULE_1__["bindingBehavior"])('throttle'),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object, _binding_ast__WEBPACK_IMPORTED_MODULE_3__["BindingBehaviorExpression"]])
], ThrottleBindingBehavior);

//# sourceMappingURL=throttle.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esnext/resources/custom-attribute.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esnext/resources/custom-attribute.js ***!
  \*********************************************************************************/
/*! exports provided: customAttribute, templateController, CustomAttributeDefinition, CustomAttribute */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "customAttribute", function() { return customAttribute; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "templateController", function() { return templateController; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CustomAttributeDefinition", function() { return CustomAttributeDefinition; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CustomAttribute", function() { return CustomAttribute; });
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _definitions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions */ "./node_modules/@aurelia/runtime/dist/esnext/definitions.js");
/* harmony import */ var _flags__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../flags */ "./node_modules/@aurelia/runtime/dist/esnext/flags.js");
/* harmony import */ var _templating_bindable__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../templating/bindable */ "./node_modules/@aurelia/runtime/dist/esnext/templating/bindable.js");




function customAttribute(nameOrDef) {
    return function (target) {
        return CustomAttribute.define(nameOrDef, target);
    };
}
function templateController(nameOrDef) {
    return function (target) {
        return CustomAttribute.define(typeof nameOrDef === 'string'
            ? { isTemplateController: true, name: nameOrDef }
            : { isTemplateController: true, ...nameOrDef }, target);
    };
}
class CustomAttributeDefinition {
    constructor(Type, name, aliases, key, defaultBindingMode, isTemplateController, bindables, strategy, hooks, noMultiBindings) {
        this.Type = Type;
        this.name = name;
        this.aliases = aliases;
        this.key = key;
        this.defaultBindingMode = defaultBindingMode;
        this.isTemplateController = isTemplateController;
        this.bindables = bindables;
        this.strategy = strategy;
        this.hooks = hooks;
        this.noMultiBindings = noMultiBindings;
    }
    static create(nameOrDef, Type) {
        let name;
        let def;
        if (typeof nameOrDef === 'string') {
            name = nameOrDef;
            def = { name };
        }
        else {
            name = nameOrDef.name;
            def = nameOrDef;
        }
        return new CustomAttributeDefinition(Type, Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["firstDefined"])(CustomAttribute.getAnnotation(Type, 'name'), name), Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["mergeArrays"])(CustomAttribute.getAnnotation(Type, 'aliases'), def.aliases, Type.aliases), CustomAttribute.keyFrom(name), Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["firstDefined"])(CustomAttribute.getAnnotation(Type, 'defaultBindingMode'), def.defaultBindingMode, Type.defaultBindingMode, _flags__WEBPACK_IMPORTED_MODULE_2__["BindingMode"].toView), Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["firstDefined"])(CustomAttribute.getAnnotation(Type, 'isTemplateController'), def.isTemplateController, Type.isTemplateController, false), _templating_bindable__WEBPACK_IMPORTED_MODULE_3__["Bindable"].from(..._templating_bindable__WEBPACK_IMPORTED_MODULE_3__["Bindable"].getAll(Type), CustomAttribute.getAnnotation(Type, 'bindables'), Type.bindables, def.bindables), Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["firstDefined"])(CustomAttribute.getAnnotation(Type, 'strategy'), def.strategy, Type.strategy, 1 /* getterSetter */), Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["firstDefined"])(CustomAttribute.getAnnotation(Type, 'hooks'), def.hooks, Type.hooks, new _definitions__WEBPACK_IMPORTED_MODULE_1__["HooksDefinition"](Type.prototype)), Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["firstDefined"])(CustomAttribute.getAnnotation(Type, 'noMultiBindings'), def.noMultiBindings, Type.noMultiBindings, false));
    }
    register(container) {
        const { Type, key, aliases } = this;
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Registration"].transient(key, Type).register(container);
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Registration"].aliasTo(key, Type).register(container);
        Object(_definitions__WEBPACK_IMPORTED_MODULE_1__["registerAliases"])(aliases, CustomAttribute, key, container);
    }
}
const CustomAttribute = {
    name: _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Protocol"].resource.keyFor('custom-attribute'),
    keyFrom(name) {
        return `${CustomAttribute.name}:${name}`;
    },
    isType(value) {
        return typeof value === 'function' && _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Metadata"].hasOwn(CustomAttribute.name, value);
    },
    for(node, name) {
        return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Metadata"].getOwn(CustomAttribute.keyFrom(name), node);
    },
    define(nameOrDef, Type) {
        const definition = CustomAttributeDefinition.create(nameOrDef, Type);
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Metadata"].define(CustomAttribute.name, definition, definition.Type);
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Metadata"].define(CustomAttribute.name, definition, definition);
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Protocol"].resource.appendTo(Type, CustomAttribute.name);
        return definition.Type;
    },
    getDefinition(Type) {
        const def = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Metadata"].getOwn(CustomAttribute.name, Type);
        if (def === void 0) {
            throw new Error(`No definition found for type ${Type.name}`);
        }
        return def;
    },
    annotate(Type, prop, value) {
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Metadata"].define(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Protocol"].annotation.keyFor(prop), value, Type);
    },
    getAnnotation(Type, prop) {
        return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Metadata"].getOwn(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Protocol"].annotation.keyFor(prop), Type);
    },
};
//# sourceMappingURL=custom-attribute.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esnext/resources/custom-attributes/flags.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esnext/resources/custom-attributes/flags.js ***!
  \****************************************************************************************/
/*! exports provided: InfrequentMutations, FrequentMutations, ObserveShallow */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "InfrequentMutations", function() { return InfrequentMutations; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FrequentMutations", function() { return FrequentMutations; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ObserveShallow", function() { return ObserveShallow; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _dom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../dom */ "./node_modules/@aurelia/runtime/dist/esnext/dom.js");
/* harmony import */ var _lifecycle__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../lifecycle */ "./node_modules/@aurelia/runtime/dist/esnext/lifecycle.js");
/* harmony import */ var _custom_attribute__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../custom-attribute */ "./node_modules/@aurelia/runtime/dist/esnext/resources/custom-attribute.js");





class FlagsTemplateController {
    constructor(factory, location, flags) {
        this.factory = factory;
        this.flags = flags;
        this.id = Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["nextId"])('au$component');
        this.view = this.factory.create();
        this.view.hold(location, 1 /* insertBefore */);
    }
    beforeBind(flags) {
        this.view.parent = this.$controller;
        return this.view.bind(flags | this.flags, this.$controller.scope);
    }
    beforeAttach(flags) {
        this.view.attach(flags);
    }
    beforeDetach(flags) {
        this.view.detach(flags);
    }
    beforeUnbind(flags) {
        const task = this.view.unbind(flags);
        this.view.parent = void 0;
        return task;
    }
}
let InfrequentMutations = class InfrequentMutations extends FlagsTemplateController {
    constructor(factory, location) {
        super(factory, location, 268435456 /* noTargetObserverQueue */);
    }
};
InfrequentMutations = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_custom_attribute__WEBPACK_IMPORTED_MODULE_4__["templateController"])('infrequent-mutations'),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(0, _lifecycle__WEBPACK_IMPORTED_MODULE_3__["IViewFactory"]), Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(1, _dom__WEBPACK_IMPORTED_MODULE_2__["IRenderLocation"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object, Object])
], InfrequentMutations);

let FrequentMutations = class FrequentMutations extends FlagsTemplateController {
    constructor(factory, location) {
        super(factory, location, 536870912 /* persistentTargetObserverQueue */);
    }
};
FrequentMutations = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_custom_attribute__WEBPACK_IMPORTED_MODULE_4__["templateController"])('frequent-mutations'),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(0, _lifecycle__WEBPACK_IMPORTED_MODULE_3__["IViewFactory"]), Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(1, _dom__WEBPACK_IMPORTED_MODULE_2__["IRenderLocation"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object, Object])
], FrequentMutations);

let ObserveShallow = class ObserveShallow extends FlagsTemplateController {
    constructor(factory, location) {
        super(factory, location, 134217728 /* observeLeafPropertiesOnly */);
    }
};
ObserveShallow = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_custom_attribute__WEBPACK_IMPORTED_MODULE_4__["templateController"])('observe-shallow'),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(0, _lifecycle__WEBPACK_IMPORTED_MODULE_3__["IViewFactory"]), Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(1, _dom__WEBPACK_IMPORTED_MODULE_2__["IRenderLocation"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object, Object])
], ObserveShallow);

//# sourceMappingURL=flags.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esnext/resources/custom-attributes/if.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esnext/resources/custom-attributes/if.js ***!
  \*************************************************************************************/
/*! exports provided: If, Else */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "If", function() { return If; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Else", function() { return Else; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _dom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../dom */ "./node_modules/@aurelia/runtime/dist/esnext/dom.js");
/* harmony import */ var _lifecycle__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../lifecycle */ "./node_modules/@aurelia/runtime/dist/esnext/lifecycle.js");
/* harmony import */ var _lifecycle_task__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../lifecycle-task */ "./node_modules/@aurelia/runtime/dist/esnext/lifecycle-task.js");
/* harmony import */ var _templating_bindable__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../templating/bindable */ "./node_modules/@aurelia/runtime/dist/esnext/templating/bindable.js");
/* harmony import */ var _custom_attribute__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../custom-attribute */ "./node_modules/@aurelia/runtime/dist/esnext/resources/custom-attribute.js");







let If = class If {
    constructor(ifFactory, location) {
        this.ifFactory = ifFactory;
        this.location = location;
        this.id = Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["nextId"])('au$component');
        this.elseFactory = void 0;
        this.elseView = void 0;
        this.ifView = void 0;
        this.view = void 0;
        this.task = _lifecycle_task__WEBPACK_IMPORTED_MODULE_4__["LifecycleTask"].done;
        this.value = false;
    }
    ;
    beforeBind(flags) {
        if (this.task.done) {
            this.task = this.swap(this.value, flags);
        }
        else {
            this.task = new _lifecycle_task__WEBPACK_IMPORTED_MODULE_4__["ContinuationTask"](this.task, this.swap, this, this.value, flags);
        }
        return this.task;
    }
    beforeAttach(flags) {
        if (this.task.done) {
            this.attachView(flags);
        }
        else {
            this.task = new _lifecycle_task__WEBPACK_IMPORTED_MODULE_4__["ContinuationTask"](this.task, this.attachView, this, flags);
        }
    }
    beforeDetach(flags) {
        if (this.view !== void 0) {
            if (this.task.done) {
                this.view.detach(flags);
            }
            else {
                this.task = new _lifecycle_task__WEBPACK_IMPORTED_MODULE_4__["ContinuationTask"](this.task, this.view.detach, this.view, flags);
            }
        }
        return this.task;
    }
    beforeUnbind(flags) {
        if (this.view !== void 0) {
            if (this.task.done) {
                this.task = this.view.unbind(flags);
            }
            else {
                this.task = new _lifecycle_task__WEBPACK_IMPORTED_MODULE_4__["ContinuationTask"](this.task, this.view.unbind, this.view, flags);
            }
        }
        return this.task;
    }
    caching(flags) {
        if (this.ifView !== void 0 && this.ifView.release(flags)) {
            this.ifView = void 0;
        }
        if (this.elseView !== void 0 && this.elseView.release(flags)) {
            this.elseView = void 0;
        }
        this.view = void 0;
    }
    valueChanged(newValue, oldValue, flags) {
        if ((this.$controller.state & 4 /* isBound */) === 0) {
            return;
        }
        if (this.task.done) {
            this.task = this.swap(this.value, flags);
        }
        else {
            this.task = new _lifecycle_task__WEBPACK_IMPORTED_MODULE_4__["ContinuationTask"](this.task, this.swap, this, this.value, flags);
        }
    }
    /** @internal */
    updateView(value, flags) {
        let view;
        if (value) {
            view = this.ifView = this.ensureView(this.ifView, this.ifFactory, flags);
        }
        else if (this.elseFactory != void 0) {
            view = this.elseView = this.ensureView(this.elseView, this.elseFactory, flags);
        }
        else {
            view = void 0;
        }
        return view;
    }
    /** @internal */
    ensureView(view, factory, flags) {
        if (view === void 0) {
            view = factory.create(flags);
        }
        view.hold(this.location, 1 /* insertBefore */);
        return view;
    }
    swap(value, flags) {
        let task = _lifecycle_task__WEBPACK_IMPORTED_MODULE_4__["LifecycleTask"].done;
        if ((value === true && this.elseView !== void 0)
            || (value !== true && this.ifView !== void 0)) {
            task = this.deactivate(flags);
        }
        if (task.done) {
            const view = this.updateView(value, flags);
            task = this.activate(view, flags);
        }
        else {
            task = new _lifecycle_task__WEBPACK_IMPORTED_MODULE_4__["PromiseTask"](task.wait().then(() => this.updateView(value, flags)), this.activate, this, flags);
        }
        return task;
    }
    deactivate(flags) {
        const view = this.view;
        if (view === void 0) {
            return _lifecycle_task__WEBPACK_IMPORTED_MODULE_4__["LifecycleTask"].done;
        }
        view.detach(flags); // TODO: link this up with unbind
        const task = view.unbind(flags);
        view.parent = void 0;
        return task;
    }
    activate(view, flags) {
        this.view = view;
        if (view === void 0) {
            return _lifecycle_task__WEBPACK_IMPORTED_MODULE_4__["LifecycleTask"].done;
        }
        let task = this.bindView(flags);
        if ((this.$controller.state & 32 /* isAttached */) === 0) {
            return task;
        }
        if (task.done) {
            this.attachView(flags);
        }
        else {
            task = new _lifecycle_task__WEBPACK_IMPORTED_MODULE_4__["ContinuationTask"](task, this.attachView, this, flags);
        }
        return task;
    }
    bindView(flags) {
        if (this.view !== void 0 && (this.$controller.state & 5 /* isBoundOrBinding */) > 0) {
            this.view.parent = this.$controller;
            return this.view.bind(flags, this.$controller.scope, this.$controller.part);
        }
        return _lifecycle_task__WEBPACK_IMPORTED_MODULE_4__["LifecycleTask"].done;
    }
    attachView(flags) {
        if (this.view !== void 0 && (this.$controller.state & 40 /* isAttachedOrAttaching */) > 0) {
            this.view.attach(flags);
        }
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    _templating_bindable__WEBPACK_IMPORTED_MODULE_5__["bindable"],
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:type", Boolean)
], If.prototype, "value", void 0);
If = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_custom_attribute__WEBPACK_IMPORTED_MODULE_6__["templateController"])('if'),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(0, _lifecycle__WEBPACK_IMPORTED_MODULE_3__["IViewFactory"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(1, _dom__WEBPACK_IMPORTED_MODULE_2__["IRenderLocation"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object, Object])
], If);

let Else = class Else {
    constructor(factory) {
        this.factory = factory;
        this.id = Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["nextId"])('au$component');
    }
    link(ifBehavior) {
        if (ifBehavior instanceof If) {
            ifBehavior.elseFactory = this.factory;
        }
        else if (ifBehavior.viewModel instanceof If) {
            ifBehavior.viewModel.elseFactory = this.factory;
        }
        else {
            throw new Error(`Unsupported IfBehavior`); // TODO: create error code
        }
    }
};
Else = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_custom_attribute__WEBPACK_IMPORTED_MODULE_6__["templateController"])('else'),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(0, _lifecycle__WEBPACK_IMPORTED_MODULE_3__["IViewFactory"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object])
], Else);

//# sourceMappingURL=if.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esnext/resources/custom-attributes/repeat.js":
/*!*****************************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esnext/resources/custom-attributes/repeat.js ***!
  \*****************************************************************************************/
/*! exports provided: Repeat, longestIncreasingSubsequence */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Repeat", function() { return Repeat; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "longestIncreasingSubsequence", function() { return longestIncreasingSubsequence; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _dom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../dom */ "./node_modules/@aurelia/runtime/dist/esnext/dom.js");
/* harmony import */ var _lifecycle__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../lifecycle */ "./node_modules/@aurelia/runtime/dist/esnext/lifecycle.js");
/* harmony import */ var _lifecycle_task__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../lifecycle-task */ "./node_modules/@aurelia/runtime/dist/esnext/lifecycle-task.js");
/* harmony import */ var _observation_array_observer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../observation/array-observer */ "./node_modules/@aurelia/runtime/dist/esnext/observation/array-observer.js");
/* harmony import */ var _observation_binding_context__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../observation/binding-context */ "./node_modules/@aurelia/runtime/dist/esnext/observation/binding-context.js");
/* harmony import */ var _observation_observer_locator__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../observation/observer-locator */ "./node_modules/@aurelia/runtime/dist/esnext/observation/observer-locator.js");
/* harmony import */ var _templating_bindable__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../templating/bindable */ "./node_modules/@aurelia/runtime/dist/esnext/templating/bindable.js");
/* harmony import */ var _custom_attribute__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../custom-attribute */ "./node_modules/@aurelia/runtime/dist/esnext/resources/custom-attribute.js");










let Repeat = class Repeat {
    constructor(location, renderable, factory) {
        this.location = location;
        this.renderable = renderable;
        this.factory = factory;
        this.id = Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["nextId"])('au$component');
        this.hasPendingInstanceMutation = false;
        this.observer = void 0;
        this.views = [];
        this.key = void 0;
        this.task = _lifecycle_task__WEBPACK_IMPORTED_MODULE_4__["LifecycleTask"].done;
        this.normalizedItems = void 0;
    }
    beforeBind(flags) {
        this.checkCollectionObserver(flags);
        const bindings = this.renderable.bindings;
        const { length } = bindings;
        let binding;
        for (let i = 0; i < length; ++i) {
            binding = bindings[i];
            if (binding.target === this && binding.targetProperty === 'items') {
                this.forOf = binding.sourceExpression;
                break;
            }
        }
        this.local = this.forOf.declaration.evaluate(flags, this.$controller.scope, null);
        this.normalizeToArray(flags);
        this.processViewsKeyed(void 0, flags);
        return this.task;
    }
    beforeAttach(flags) {
        if (this.task.done) {
            this.attachViews(void 0, flags);
        }
        else {
            this.task = new _lifecycle_task__WEBPACK_IMPORTED_MODULE_4__["ContinuationTask"](this.task, this.attachViews, this, void 0, flags);
        }
    }
    beforeDetach(flags) {
        if (this.task.done) {
            this.detachViewsByRange(0, this.views.length, flags);
        }
        else {
            this.task = new _lifecycle_task__WEBPACK_IMPORTED_MODULE_4__["ContinuationTask"](this.task, this.detachViewsByRange, this, 0, this.views.length, flags);
        }
    }
    beforeUnbind(flags) {
        this.checkCollectionObserver(flags);
        if (this.task.done) {
            this.task = this.unbindAndRemoveViewsByRange(0, this.views.length, flags, false);
        }
        else {
            this.task = new _lifecycle_task__WEBPACK_IMPORTED_MODULE_4__["ContinuationTask"](this.task, this.unbindAndRemoveViewsByRange, this, 0, this.views.length, flags, false);
        }
        return this.task;
    }
    // called by SetterObserver
    itemsChanged(flags) {
        flags |= this.$controller.flags;
        this.checkCollectionObserver(flags);
        flags |= 16 /* updateTargetInstance */;
        this.normalizeToArray(flags);
        this.processViewsKeyed(void 0, flags);
    }
    // called by a CollectionObserver
    handleCollectionChange(indexMap, flags) {
        flags |= this.$controller.flags;
        flags |= (960 /* fromFlush */ | 16 /* updateTargetInstance */);
        this.normalizeToArray(flags);
        this.processViewsKeyed(indexMap, flags);
    }
    processViewsKeyed(indexMap, flags) {
        const oldLength = this.views.length;
        if (indexMap === void 0) {
            if ((this.$controller.state & 5 /* isBoundOrBinding */) > 0) {
                this.detachViewsByRange(0, oldLength, flags);
                if (this.task.done) {
                    this.task = this.unbindAndRemoveViewsByRange(0, oldLength, flags, false);
                }
                else {
                    this.task = new _lifecycle_task__WEBPACK_IMPORTED_MODULE_4__["ContinuationTask"](this.task, this.unbindAndRemoveViewsByRange, this, 0, oldLength, flags, false);
                }
                if (this.task.done) {
                    this.task = this.createAndBindAllViews(flags);
                }
                else {
                    this.task = new _lifecycle_task__WEBPACK_IMPORTED_MODULE_4__["ContinuationTask"](this.task, this.createAndBindAllViews, this, flags);
                }
            }
            if ((this.$controller.state & 40 /* isAttachedOrAttaching */) > 0) {
                if (this.task.done) {
                    this.attachViewsKeyed(flags);
                }
                else {
                    this.task = new _lifecycle_task__WEBPACK_IMPORTED_MODULE_4__["ContinuationTask"](this.task, this.attachViewsKeyed, this, flags);
                }
            }
        }
        else {
            Object(_observation_array_observer__WEBPACK_IMPORTED_MODULE_5__["applyMutationsToIndices"])(indexMap);
            if ((this.$controller.state & 5 /* isBoundOrBinding */) > 0) {
                // first detach+unbind+(remove from array) the deleted view indices
                if (indexMap.deletedItems.length > 0) {
                    indexMap.deletedItems.sort(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["compareNumber"]);
                    if (this.task.done) {
                        this.detachViewsByKey(indexMap, flags);
                    }
                    else {
                        this.task = new _lifecycle_task__WEBPACK_IMPORTED_MODULE_4__["ContinuationTask"](this.task, this.detachViewsByKey, this, indexMap, flags);
                    }
                    if (this.task.done) {
                        this.task = this.unbindAndRemoveViewsByKey(indexMap, flags);
                    }
                    else {
                        this.task = new _lifecycle_task__WEBPACK_IMPORTED_MODULE_4__["ContinuationTask"](this.task, this.unbindAndRemoveViewsByKey, this, indexMap, flags);
                    }
                }
                // then insert new views at the "added" indices to bring the views array in aligment with indexMap size
                if (this.task.done) {
                    this.task = this.createAndBindNewViewsByKey(indexMap, flags);
                }
                else {
                    this.task = new _lifecycle_task__WEBPACK_IMPORTED_MODULE_4__["ContinuationTask"](this.task, this.createAndBindNewViewsByKey, this, indexMap, flags);
                }
            }
            if ((this.$controller.state & 40 /* isAttachedOrAttaching */) > 0) {
                if (this.task.done) {
                    this.sortViewsByKey(oldLength, indexMap, flags);
                }
                else {
                    this.task = new _lifecycle_task__WEBPACK_IMPORTED_MODULE_4__["ContinuationTask"](this.task, this.sortViewsByKey, this, oldLength, indexMap, flags);
                }
            }
        }
    }
    // todo: subscribe to collection from inner expression
    checkCollectionObserver(flags) {
        const oldObserver = this.observer;
        if ((flags & 8192 /* fromUnbind */)) {
            if (oldObserver !== void 0) {
                oldObserver.unsubscribeFromCollection(this);
            }
        }
        else if ((this.$controller.state & 5 /* isBoundOrBinding */) > 0) {
            const newObserver = this.observer = Object(_observation_observer_locator__WEBPACK_IMPORTED_MODULE_7__["getCollectionObserver"])(flags, this.$controller.lifecycle, this.items);
            if (oldObserver !== newObserver && oldObserver) {
                oldObserver.unsubscribeFromCollection(this);
            }
            if (newObserver) {
                newObserver.subscribeToCollection(this);
            }
        }
    }
    normalizeToArray(flags) {
        const items = this.items;
        if (items instanceof Array) {
            this.normalizedItems = items;
            return;
        }
        const forOf = this.forOf;
        if (forOf === void 0) {
            return;
        }
        const normalizedItems = [];
        this.forOf.iterate(flags, items, (arr, index, item) => {
            normalizedItems[index] = item;
        });
        this.normalizedItems = normalizedItems;
    }
    detachViewsByRange(iStart, iEnd, flags) {
        const views = this.views;
        this.$controller.lifecycle.afterDetach.begin();
        let view;
        for (let i = iStart; i < iEnd; ++i) {
            view = views[i];
            view.release(flags);
            view.detach(flags);
        }
        this.$controller.lifecycle.afterDetach.end(flags);
    }
    unbindAndRemoveViewsByRange(iStart, iEnd, flags, adjustLength) {
        const views = this.views;
        let tasks = void 0;
        let task;
        this.$controller.lifecycle.afterUnbind.begin();
        let view;
        for (let i = iStart; i < iEnd; ++i) {
            view = views[i];
            task = view.unbind(flags);
            view.parent = void 0;
            if (!task.done) {
                if (tasks === undefined) {
                    tasks = [];
                }
                tasks.push(task);
            }
        }
        if (adjustLength) {
            this.views.length = iStart;
        }
        if (tasks === undefined) {
            this.$controller.lifecycle.afterUnbind.end(flags);
            return _lifecycle_task__WEBPACK_IMPORTED_MODULE_4__["LifecycleTask"].done;
        }
        return new _lifecycle_task__WEBPACK_IMPORTED_MODULE_4__["AggregateContinuationTask"](tasks, this.$controller.lifecycle.afterUnbind.end, this.$controller.lifecycle.afterUnbind, flags);
    }
    detachViewsByKey(indexMap, flags) {
        const views = this.views;
        this.$controller.lifecycle.afterDetach.begin();
        const deleted = indexMap.deletedItems;
        const deletedLen = deleted.length;
        let view;
        for (let i = 0; i < deletedLen; ++i) {
            view = views[deleted[i]];
            view.release(flags);
            view.detach(flags);
        }
        this.$controller.lifecycle.afterDetach.end(flags);
    }
    unbindAndRemoveViewsByKey(indexMap, flags) {
        const views = this.views;
        let tasks = void 0;
        let task;
        this.$controller.lifecycle.afterUnbind.begin();
        const deleted = indexMap.deletedItems;
        const deletedLen = deleted.length;
        let view;
        let i = 0;
        for (; i < deletedLen; ++i) {
            view = views[deleted[i]];
            task = view.unbind(flags);
            view.parent = void 0;
            if (!task.done) {
                if (tasks === undefined) {
                    tasks = [];
                }
                tasks.push(task);
            }
        }
        i = 0;
        let j = 0;
        for (; i < deletedLen; ++i) {
            j = deleted[i] - i;
            this.views.splice(j, 1);
        }
        if (tasks === undefined) {
            this.$controller.lifecycle.afterUnbind.end(flags);
            return _lifecycle_task__WEBPACK_IMPORTED_MODULE_4__["LifecycleTask"].done;
        }
        return new _lifecycle_task__WEBPACK_IMPORTED_MODULE_4__["AggregateContinuationTask"](tasks, this.$controller.lifecycle.afterUnbind.end, this.$controller.lifecycle.afterUnbind, flags);
    }
    createAndBindAllViews(flags) {
        let tasks = void 0;
        let task;
        let view;
        let viewScope;
        const $controller = this.$controller;
        const lifecycle = $controller.lifecycle;
        const parentScope = $controller.scope;
        lifecycle.afterBind.begin();
        const part = $controller.part;
        const factory = this.factory;
        const local = this.local;
        const items = this.items;
        const newLen = this.forOf.count(flags, items);
        const views = this.views = Array(newLen);
        this.forOf.iterate(flags, items, (arr, i, item) => {
            view = views[i] = factory.create(flags);
            view.parent = $controller;
            viewScope = _observation_binding_context__WEBPACK_IMPORTED_MODULE_6__["Scope"].fromParent(flags, parentScope, _observation_binding_context__WEBPACK_IMPORTED_MODULE_6__["BindingContext"].create(flags, local, item));
            setContextualProperties(viewScope.overrideContext, i, newLen);
            task = view.bind(flags, viewScope, part);
            if (!task.done) {
                if (tasks === undefined) {
                    tasks = [];
                }
                tasks.push(task);
            }
        });
        if (tasks === undefined) {
            lifecycle.afterBind.end(flags);
            return _lifecycle_task__WEBPACK_IMPORTED_MODULE_4__["LifecycleTask"].done;
        }
        return new _lifecycle_task__WEBPACK_IMPORTED_MODULE_4__["AggregateContinuationTask"](tasks, lifecycle.afterBind.end, lifecycle.afterBind, flags);
    }
    createAndBindNewViewsByKey(indexMap, flags) {
        let tasks = void 0;
        let task;
        let view;
        let viewScope;
        const factory = this.factory;
        const views = this.views;
        const local = this.local;
        const normalizedItems = this.normalizedItems;
        const $controller = this.$controller;
        const lifecycle = $controller.lifecycle;
        const parentScope = $controller.scope;
        lifecycle.afterBind.begin();
        const part = $controller.part;
        const mapLen = indexMap.length;
        for (let i = 0; i < mapLen; ++i) {
            if (indexMap[i] === -2) {
                view = factory.create(flags);
                // TODO: test with map/set/undefined/null, make sure we can use strong typing here as well, etc
                view.parent = $controller;
                viewScope = _observation_binding_context__WEBPACK_IMPORTED_MODULE_6__["Scope"].fromParent(flags, parentScope, _observation_binding_context__WEBPACK_IMPORTED_MODULE_6__["BindingContext"].create(flags, local, normalizedItems[i]));
                setContextualProperties(viewScope.overrideContext, i, mapLen);
                // update all the rest oc
                task = view.bind(flags, viewScope, part);
                views.splice(i, 0, view);
                if (!task.done) {
                    if (tasks === undefined) {
                        tasks = [];
                    }
                    tasks.push(task);
                }
            }
        }
        if (views.length !== mapLen) {
            // TODO: create error code and use reporter with more informative message
            throw new Error(`viewsLen=${views.length}, mapLen=${mapLen}`);
        }
        if (tasks === undefined) {
            lifecycle.afterBind.end(flags);
            return _lifecycle_task__WEBPACK_IMPORTED_MODULE_4__["LifecycleTask"].done;
        }
        return new _lifecycle_task__WEBPACK_IMPORTED_MODULE_4__["AggregateContinuationTask"](tasks, lifecycle.afterBind.end, lifecycle.afterBind, flags);
    }
    attachViews(indexMap, flags) {
        let view;
        const views = this.views;
        const location = this.location;
        const lifecycle = this.$controller.lifecycle;
        lifecycle.afterAttach.begin();
        if (indexMap === void 0) {
            for (let i = 0, ii = views.length; i < ii; ++i) {
                view = views[i];
                view.hold(location, 1 /* insertBefore */);
                view.nodes.unlink();
                view.attach(flags);
            }
        }
        else {
            for (let i = 0, ii = views.length; i < ii; ++i) {
                if (indexMap[i] !== i) {
                    view = views[i];
                    view.hold(location, 1 /* insertBefore */);
                    view.nodes.unlink();
                    view.attach(flags);
                }
            }
        }
        lifecycle.afterAttach.end(flags);
    }
    attachViewsKeyed(flags) {
        let view;
        const { views, location } = this;
        this.$controller.lifecycle.afterAttach.begin();
        for (let i = 0, ii = views.length; i < ii; ++i) {
            view = views[i];
            view.hold(location, 1 /* insertBefore */);
            view.nodes.unlink();
            view.attach(flags);
        }
        this.$controller.lifecycle.afterAttach.end(flags);
    }
    sortViewsByKey(oldLength, indexMap, flags) {
        // TODO: integrate with tasks
        const location = this.location;
        const views = this.views;
        const newLen = indexMap.length;
        Object(_observation_array_observer__WEBPACK_IMPORTED_MODULE_5__["synchronizeIndices"])(views, indexMap);
        // this algorithm retrieves the indices of the longest increasing subsequence of items in the repeater
        // the items on those indices are not moved; this minimizes the number of DOM operations that need to be performed
        const seq = longestIncreasingSubsequence(indexMap);
        const seqLen = seq.length;
        this.$controller.lifecycle.afterAttach.begin();
        flags |= 33554432 /* reorderNodes */;
        let next;
        let j = seqLen - 1;
        let i = newLen - 1;
        let view;
        for (; i >= 0; --i) {
            view = views[i];
            if (indexMap[i] === -2) {
                setContextualProperties(view.scope.overrideContext, i, newLen);
                view.hold(location, 1 /* insertBefore */);
                view.attach(flags);
            }
            else if (j < 0 || seqLen === 1 || i !== seq[j]) {
                setContextualProperties(view.scope.overrideContext, i, newLen);
                view.attach(flags);
            }
            else {
                if (oldLength !== newLen) {
                    setContextualProperties(view.scope.overrideContext, i, newLen);
                }
                --j;
            }
            next = views[i + 1];
            if (next !== void 0) {
                view.nodes.link(next.nodes);
            }
            else {
                view.nodes.link(location);
            }
        }
        this.$controller.lifecycle.afterAttach.end(flags);
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    _templating_bindable__WEBPACK_IMPORTED_MODULE_8__["bindable"],
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:type", Object)
], Repeat.prototype, "items", void 0);
Repeat = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_custom_attribute__WEBPACK_IMPORTED_MODULE_9__["templateController"])('repeat'),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(0, _dom__WEBPACK_IMPORTED_MODULE_2__["IRenderLocation"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(1, _lifecycle__WEBPACK_IMPORTED_MODULE_3__["IController"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(2, _lifecycle__WEBPACK_IMPORTED_MODULE_3__["IViewFactory"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object, Object, Object])
], Repeat);

let maxLen = 16;
let prevIndices = new Int32Array(maxLen);
let tailIndices = new Int32Array(maxLen);
// Based on inferno's lis_algorithm @ https://github.com/infernojs/inferno/blob/master/packages/inferno/src/DOM/patching.ts#L732
// with some tweaks to make it just a bit faster + account for IndexMap (and some names changes for readability)
/** @internal */
function longestIncreasingSubsequence(indexMap) {
    const len = indexMap.length;
    if (len > maxLen) {
        maxLen = len;
        prevIndices = new Int32Array(len);
        tailIndices = new Int32Array(len);
    }
    let cursor = 0;
    let cur = 0;
    let prev = 0;
    let i = 0;
    let j = 0;
    let low = 0;
    let high = 0;
    let mid = 0;
    for (; i < len; i++) {
        cur = indexMap[i];
        if (cur !== -2) {
            j = prevIndices[cursor];
            prev = indexMap[j];
            if (prev !== -2 && prev < cur) {
                tailIndices[i] = j;
                prevIndices[++cursor] = i;
                continue;
            }
            low = 0;
            high = cursor;
            while (low < high) {
                mid = (low + high) >> 1;
                prev = indexMap[prevIndices[mid]];
                if (prev !== -2 && prev < cur) {
                    low = mid + 1;
                }
                else {
                    high = mid;
                }
            }
            prev = indexMap[prevIndices[low]];
            if (cur < prev || prev === -2) {
                if (low > 0) {
                    tailIndices[i] = prevIndices[low - 1];
                }
                prevIndices[low] = i;
            }
        }
    }
    i = ++cursor;
    const result = new Int32Array(i);
    cur = prevIndices[cursor - 1];
    while (cursor-- > 0) {
        result[cursor] = cur;
        cur = tailIndices[cur];
    }
    while (i-- > 0)
        prevIndices[i] = 0;
    return result;
}
function setContextualProperties(oc, index, length) {
    const isFirst = index === 0;
    const isLast = index === length - 1;
    const isEven = index % 2 === 0;
    oc.$index = index;
    oc.$first = isFirst;
    oc.$last = isLast;
    oc.$middle = !isFirst && !isLast;
    oc.$even = isEven;
    oc.$odd = !isEven;
    oc.$length = length;
}
//# sourceMappingURL=repeat.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esnext/resources/custom-attributes/replaceable.js":
/*!**********************************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esnext/resources/custom-attributes/replaceable.js ***!
  \**********************************************************************************************/
/*! exports provided: Replaceable */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Replaceable", function() { return Replaceable; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _dom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../dom */ "./node_modules/@aurelia/runtime/dist/esnext/dom.js");
/* harmony import */ var _lifecycle__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../lifecycle */ "./node_modules/@aurelia/runtime/dist/esnext/lifecycle.js");
/* harmony import */ var _custom_attribute__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../custom-attribute */ "./node_modules/@aurelia/runtime/dist/esnext/resources/custom-attribute.js");





let Replaceable = class Replaceable {
    constructor(factory, location) {
        this.factory = factory;
        this.location = location;
        this.id = Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["nextId"])('au$component');
        this.view = this.factory.create();
        this.view.hold(location, 1 /* insertBefore */);
    }
    beforeBind(flags) {
        this.view.parent = this.$controller;
        return this.view.bind(flags | 67108864 /* allowParentScopeTraversal */, this.$controller.scope, this.factory.name);
    }
    beforeAttach(flags) {
        this.view.attach(flags);
    }
    beforeDetach(flags) {
        this.view.detach(flags);
    }
    beforeUnbind(flags) {
        const task = this.view.unbind(flags);
        this.view.parent = void 0;
        return task;
    }
};
Replaceable = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_custom_attribute__WEBPACK_IMPORTED_MODULE_4__["templateController"])('replaceable'),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(0, _lifecycle__WEBPACK_IMPORTED_MODULE_3__["IViewFactory"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(1, _dom__WEBPACK_IMPORTED_MODULE_2__["IRenderLocation"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object, Object])
], Replaceable);

//# sourceMappingURL=replaceable.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esnext/resources/custom-attributes/with.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esnext/resources/custom-attributes/with.js ***!
  \***************************************************************************************/
/*! exports provided: With */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "With", function() { return With; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _dom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../dom */ "./node_modules/@aurelia/runtime/dist/esnext/dom.js");
/* harmony import */ var _lifecycle__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../lifecycle */ "./node_modules/@aurelia/runtime/dist/esnext/lifecycle.js");
/* harmony import */ var _custom_attribute__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../custom-attribute */ "./node_modules/@aurelia/runtime/dist/esnext/resources/custom-attribute.js");
/* harmony import */ var _templating_bindable__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../templating/bindable */ "./node_modules/@aurelia/runtime/dist/esnext/templating/bindable.js");
/* harmony import */ var _observation_binding_context__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../observation/binding-context */ "./node_modules/@aurelia/runtime/dist/esnext/observation/binding-context.js");







let With = class With {
    constructor(factory, location) {
        this.factory = factory;
        this.location = location;
        this.id = Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["nextId"])('au$component');
        this.id = Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["nextId"])('au$component');
        this.view = this.factory.create();
        this.view.hold(location, 1 /* insertBefore */);
    }
    valueChanged(newValue, oldValue, flags) {
        if ((this.$controller.state & 5 /* isBoundOrBinding */) > 0) {
            this.bindChild(4096 /* fromBind */);
        }
    }
    beforeBind(flags) {
        this.view.parent = this.$controller;
        this.bindChild(flags);
    }
    beforeAttach(flags) {
        this.view.attach(flags);
    }
    beforeDetach(flags) {
        this.view.detach(flags);
    }
    beforeUnbind(flags) {
        this.view.unbind(flags);
        this.view.parent = void 0;
    }
    bindChild(flags) {
        const scope = _observation_binding_context__WEBPACK_IMPORTED_MODULE_6__["Scope"].fromParent(flags, this.$controller.scope, this.value === void 0 ? {} : this.value);
        this.view.bind(flags, scope, this.$controller.part);
    }
};
Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    _templating_bindable__WEBPACK_IMPORTED_MODULE_5__["bindable"],
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:type", Object)
], With.prototype, "value", void 0);
With = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_custom_attribute__WEBPACK_IMPORTED_MODULE_4__["templateController"])('with'),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(0, _lifecycle__WEBPACK_IMPORTED_MODULE_3__["IViewFactory"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(1, _dom__WEBPACK_IMPORTED_MODULE_2__["IRenderLocation"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object, Object])
], With);

//# sourceMappingURL=with.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esnext/resources/custom-element.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esnext/resources/custom-element.js ***!
  \*******************************************************************************/
/*! exports provided: customElement, useShadowDOM, containerless, strict, CustomElementDefinition, CustomElement, IProjectorLocator */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "customElement", function() { return customElement; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "useShadowDOM", function() { return useShadowDOM; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "containerless", function() { return containerless; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "strict", function() { return strict; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CustomElementDefinition", function() { return CustomElementDefinition; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CustomElement", function() { return CustomElement; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IProjectorLocator", function() { return IProjectorLocator; });
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _definitions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions */ "./node_modules/@aurelia/runtime/dist/esnext/definitions.js");
/* harmony import */ var _dom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../dom */ "./node_modules/@aurelia/runtime/dist/esnext/dom.js");
/* harmony import */ var _templating_bindable__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../templating/bindable */ "./node_modules/@aurelia/runtime/dist/esnext/templating/bindable.js");
/* harmony import */ var _templating_children__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../templating/children */ "./node_modules/@aurelia/runtime/dist/esnext/templating/children.js");





function customElement(nameOrDef) {
    return function (target) {
        return CustomElement.define(nameOrDef, target);
    };
}
function useShadowDOM(targetOrOptions) {
    if (targetOrOptions === void 0) {
        return function ($target) {
            CustomElement.annotate($target, 'shadowOptions', { mode: 'open' });
        };
    }
    if (typeof targetOrOptions !== 'function') {
        return function ($target) {
            CustomElement.annotate($target, 'shadowOptions', targetOrOptions);
        };
    }
    CustomElement.annotate(targetOrOptions, 'shadowOptions', { mode: 'open' });
}
function containerless(target) {
    if (target === void 0) {
        return function ($target) {
            CustomElement.annotate($target, 'containerless', true);
        };
    }
    CustomElement.annotate(target, 'containerless', true);
}
function strict(target) {
    if (target === void 0) {
        return function ($target) {
            CustomElement.annotate($target, 'isStrictBinding', true);
        };
    }
    CustomElement.annotate(target, 'isStrictBinding', true);
}
const definitionLookup = new WeakMap();
class CustomElementDefinition {
    constructor(Type, name, aliases, key, cache, template, instructions, dependencies, injectable, needsCompile, surrogates, bindables, childrenObservers, containerless, isStrictBinding, shadowOptions, hasSlots, strategy, hooks, scopeParts) {
        this.Type = Type;
        this.name = name;
        this.aliases = aliases;
        this.key = key;
        this.cache = cache;
        this.template = template;
        this.instructions = instructions;
        this.dependencies = dependencies;
        this.injectable = injectable;
        this.needsCompile = needsCompile;
        this.surrogates = surrogates;
        this.bindables = bindables;
        this.childrenObservers = childrenObservers;
        this.containerless = containerless;
        this.isStrictBinding = isStrictBinding;
        this.shadowOptions = shadowOptions;
        this.hasSlots = hasSlots;
        this.strategy = strategy;
        this.hooks = hooks;
        this.scopeParts = scopeParts;
    }
    static create(nameOrDef, Type = null) {
        if (Type === null) {
            const def = nameOrDef;
            if (typeof def === 'string') {
                throw new Error(`Cannot create a custom element definition with only a name and no type: ${nameOrDef}`);
            }
            // eslint-disable-next-line @typescript-eslint/unbound-method
            const name = Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["fromDefinitionOrDefault"])('name', def, CustomElement.generateName);
            if (typeof def.Type === 'function') {
                // This needs to be a clone (it will usually be the compiler calling this signature)
                // TODO: we need to make sure it's documented that passing in the type via the definition (while passing in null
                // as the "Type" parameter) effectively skips type analysis, so it should only be used this way for cloning purposes.
                Type = def.Type;
            }
            else {
                Type = CustomElement.generateType(Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["pascalCase"])(name));
            }
            return new CustomElementDefinition(Type, name, Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["mergeArrays"])(def.aliases), Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["fromDefinitionOrDefault"])('key', def, () => CustomElement.keyFrom(name)), Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["fromDefinitionOrDefault"])('cache', def, () => 0), Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["fromDefinitionOrDefault"])('template', def, () => null), Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["mergeArrays"])(def.instructions), Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["mergeArrays"])(def.dependencies), Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["fromDefinitionOrDefault"])('injectable', def, () => null), Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["fromDefinitionOrDefault"])('needsCompile', def, () => true), Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["mergeArrays"])(def.surrogates), _templating_bindable__WEBPACK_IMPORTED_MODULE_3__["Bindable"].from(def.bindables), _templating_children__WEBPACK_IMPORTED_MODULE_4__["Children"].from(def.childrenObservers), Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["fromDefinitionOrDefault"])('containerless', def, () => false), Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["fromDefinitionOrDefault"])('isStrictBinding', def, () => false), Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["fromDefinitionOrDefault"])('shadowOptions', def, () => null), Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["fromDefinitionOrDefault"])('hasSlots', def, () => false), Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["fromDefinitionOrDefault"])('strategy', def, () => 1 /* getterSetter */), Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["fromDefinitionOrDefault"])('hooks', def, () => _definitions__WEBPACK_IMPORTED_MODULE_1__["HooksDefinition"].none), Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["mergeArrays"])(def.scopeParts));
        }
        // If a type is passed in, we ignore the Type property on the definition if it exists.
        // TODO: document this behavior
        if (typeof nameOrDef === 'string') {
            return new CustomElementDefinition(Type, nameOrDef, Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["mergeArrays"])(CustomElement.getAnnotation(Type, 'aliases'), Type.aliases), CustomElement.keyFrom(nameOrDef), Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["fromAnnotationOrTypeOrDefault"])('cache', Type, () => 0), Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["fromAnnotationOrTypeOrDefault"])('template', Type, () => null), Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["mergeArrays"])(CustomElement.getAnnotation(Type, 'instructions'), Type.instructions), Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["mergeArrays"])(CustomElement.getAnnotation(Type, 'dependencies'), Type.dependencies), Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["fromAnnotationOrTypeOrDefault"])('injectable', Type, () => null), Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["fromAnnotationOrTypeOrDefault"])('needsCompile', Type, () => true), Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["mergeArrays"])(CustomElement.getAnnotation(Type, 'surrogates'), Type.surrogates), _templating_bindable__WEBPACK_IMPORTED_MODULE_3__["Bindable"].from(..._templating_bindable__WEBPACK_IMPORTED_MODULE_3__["Bindable"].getAll(Type), CustomElement.getAnnotation(Type, 'bindables'), Type.bindables), _templating_children__WEBPACK_IMPORTED_MODULE_4__["Children"].from(..._templating_children__WEBPACK_IMPORTED_MODULE_4__["Children"].getAll(Type), CustomElement.getAnnotation(Type, 'childrenObservers'), Type.childrenObservers), Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["fromAnnotationOrTypeOrDefault"])('containerless', Type, () => false), Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["fromAnnotationOrTypeOrDefault"])('isStrictBinding', Type, () => false), Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["fromAnnotationOrTypeOrDefault"])('shadowOptions', Type, () => null), Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["fromAnnotationOrTypeOrDefault"])('hasSlots', Type, () => false), Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["fromAnnotationOrTypeOrDefault"])('strategy', Type, () => 1 /* getterSetter */), 
            // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion
            Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["fromAnnotationOrTypeOrDefault"])('hooks', Type, () => new _definitions__WEBPACK_IMPORTED_MODULE_1__["HooksDefinition"](Type.prototype)), Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["mergeArrays"])(CustomElement.getAnnotation(Type, 'scopeParts'), Type.scopeParts));
        }
        // This is the typical default behavior, e.g. from regular CustomElement.define invocations or from @customElement deco
        // The ViewValueConverter also uses this signature and passes in a definition where everything except for the 'hooks'
        // property needs to be copied. So we have that exception for 'hooks', but we may need to revisit that default behavior
        // if this turns out to be too opinionated.
        // eslint-disable-next-line @typescript-eslint/unbound-method
        const name = Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["fromDefinitionOrDefault"])('name', nameOrDef, CustomElement.generateName);
        return new CustomElementDefinition(Type, name, Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["mergeArrays"])(CustomElement.getAnnotation(Type, 'aliases'), nameOrDef.aliases, Type.aliases), CustomElement.keyFrom(name), Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["fromAnnotationOrDefinitionOrTypeOrDefault"])('cache', nameOrDef, Type, () => 0), Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["fromAnnotationOrDefinitionOrTypeOrDefault"])('template', nameOrDef, Type, () => null), Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["mergeArrays"])(CustomElement.getAnnotation(Type, 'instructions'), nameOrDef.instructions, Type.instructions), Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["mergeArrays"])(CustomElement.getAnnotation(Type, 'dependencies'), nameOrDef.dependencies, Type.dependencies), Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["fromAnnotationOrDefinitionOrTypeOrDefault"])('injectable', nameOrDef, Type, () => null), Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["fromAnnotationOrDefinitionOrTypeOrDefault"])('needsCompile', nameOrDef, Type, () => true), Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["mergeArrays"])(CustomElement.getAnnotation(Type, 'surrogates'), nameOrDef.surrogates, Type.surrogates), _templating_bindable__WEBPACK_IMPORTED_MODULE_3__["Bindable"].from(..._templating_bindable__WEBPACK_IMPORTED_MODULE_3__["Bindable"].getAll(Type), CustomElement.getAnnotation(Type, 'bindables'), Type.bindables, nameOrDef.bindables), _templating_children__WEBPACK_IMPORTED_MODULE_4__["Children"].from(..._templating_children__WEBPACK_IMPORTED_MODULE_4__["Children"].getAll(Type), CustomElement.getAnnotation(Type, 'childrenObservers'), Type.childrenObservers, nameOrDef.childrenObservers), Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["fromAnnotationOrDefinitionOrTypeOrDefault"])('containerless', nameOrDef, Type, () => false), Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["fromAnnotationOrDefinitionOrTypeOrDefault"])('isStrictBinding', nameOrDef, Type, () => false), Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["fromAnnotationOrDefinitionOrTypeOrDefault"])('shadowOptions', nameOrDef, Type, () => null), Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["fromAnnotationOrDefinitionOrTypeOrDefault"])('hasSlots', nameOrDef, Type, () => false), Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["fromAnnotationOrDefinitionOrTypeOrDefault"])('strategy', nameOrDef, Type, () => 1 /* getterSetter */), 
        // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion
        Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["fromAnnotationOrTypeOrDefault"])('hooks', Type, () => new _definitions__WEBPACK_IMPORTED_MODULE_1__["HooksDefinition"](Type.prototype)), Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["mergeArrays"])(CustomElement.getAnnotation(Type, 'scopeParts'), nameOrDef.scopeParts, Type.scopeParts));
    }
    static getOrCreate(partialDefinition) {
        if (partialDefinition instanceof CustomElementDefinition) {
            return partialDefinition;
        }
        if (definitionLookup.has(partialDefinition)) {
            return definitionLookup.get(partialDefinition);
        }
        const definition = CustomElementDefinition.create(partialDefinition);
        definitionLookup.set(partialDefinition, definition);
        // Make sure the full definition can be retrieved from dynamically created classes as well
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Metadata"].define(CustomElement.name, definition, definition.Type);
        return definition;
    }
    register(container) {
        const { Type, key, aliases } = this;
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Registration"].transient(key, Type).register(container);
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Registration"].aliasTo(key, Type).register(container);
        Object(_definitions__WEBPACK_IMPORTED_MODULE_1__["registerAliases"])(aliases, CustomElement, key, container);
    }
}
const CustomElement = {
    name: _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Protocol"].resource.keyFor('custom-element'),
    keyFrom(name) {
        return `${CustomElement.name}:${name}`;
    },
    isType(value) {
        return typeof value === 'function' && _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Metadata"].hasOwn(CustomElement.name, value);
    },
    for(node, nameOrSearchParents, searchParents) {
        if (nameOrSearchParents === void 0) {
            return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Metadata"].getOwn(CustomElement.name, node);
        }
        if (typeof nameOrSearchParents === 'string') {
            if (searchParents !== true) {
                const controller = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Metadata"].getOwn(CustomElement.name, node);
                if (controller === void 0) {
                    return (void 0);
                }
                if (controller.is(nameOrSearchParents)) {
                    return controller;
                }
                return (void 0);
            }
            let cur = node;
            while (cur !== null) {
                const controller = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Metadata"].getOwn(CustomElement.name, cur);
                if (controller !== void 0 && controller.is(nameOrSearchParents)) {
                    return controller;
                }
                cur = _dom__WEBPACK_IMPORTED_MODULE_2__["DOM"].getEffectiveParentNode(cur);
            }
            return (void 0);
        }
        let cur = node;
        while (cur !== null) {
            const controller = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Metadata"].getOwn(CustomElement.name, cur);
            if (controller !== void 0) {
                return controller;
            }
            cur = _dom__WEBPACK_IMPORTED_MODULE_2__["DOM"].getEffectiveParentNode(cur);
        }
        return (void 0);
    },
    define(nameOrDef, Type) {
        const definition = CustomElementDefinition.create(nameOrDef, Type);
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Metadata"].define(CustomElement.name, definition, definition.Type);
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Metadata"].define(CustomElement.name, definition, definition);
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Protocol"].resource.appendTo(definition.Type, CustomElement.name);
        return definition.Type;
    },
    getDefinition(Type) {
        const def = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Metadata"].getOwn(CustomElement.name, Type);
        if (def === void 0) {
            throw new Error(`No definition found for type ${Type.name}`);
        }
        return def;
    },
    annotate(Type, prop, value) {
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Metadata"].define(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Protocol"].annotation.keyFor(prop), value, Type);
    },
    getAnnotation(Type, prop) {
        return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Metadata"].getOwn(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Protocol"].annotation.keyFor(prop), Type);
    },
    generateName: (function () {
        let id = 0;
        return function () {
            return `unnamed-${++id}`;
        };
    })(),
    createInjectable() {
        const $injectable = function (target, property, index) {
            const annotationParamtypes = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["DI"].getOrCreateAnnotationParamTypes(target);
            annotationParamtypes[index] = $injectable;
            return target;
        };
        $injectable.register = function (container) {
            // eslint-disable-next-line @typescript-eslint/consistent-type-assertions
            return {
                resolve(container, requestor) {
                    if (requestor.has($injectable, true)) {
                        return requestor.get($injectable);
                    }
                    else {
                        return null;
                    }
                },
            };
        };
        return $injectable;
    },
    generateType: (function () {
        const nameDescriptor = {
            value: '',
            writable: false,
            enumerable: false,
            configurable: true,
        };
        // eslint-disable-next-line @typescript-eslint/no-explicit-any
        const defaultProto = {};
        return function (name, proto = defaultProto) {
            // Anonymous class ensures that minification cannot cause unintended side-effects, and keeps the class
            // looking similarly from the outside (when inspected via debugger, etc).
            const Type = class {
            };
            // Define the name property so that Type.name can be used by end users / plugin authors if they really need to,
            // even when minified.
            nameDescriptor.value = name;
            Reflect.defineProperty(Type, 'name', nameDescriptor);
            // Assign anything from the prototype that was passed in
            if (proto !== defaultProto) {
                Object.assign(Type.prototype, proto);
            }
            return Type;
        };
    })(),
};
const IProjectorLocator = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["DI"].createInterface('IProjectorLocator').noDefault();
//# sourceMappingURL=custom-element.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esnext/resources/value-converter.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esnext/resources/value-converter.js ***!
  \********************************************************************************/
/*! exports provided: valueConverter, ValueConverterDefinition, ValueConverter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "valueConverter", function() { return valueConverter; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ValueConverterDefinition", function() { return ValueConverterDefinition; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ValueConverter", function() { return ValueConverter; });
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _definitions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions */ "./node_modules/@aurelia/runtime/dist/esnext/definitions.js");


function valueConverter(nameOrDef) {
    return function (target) {
        return ValueConverter.define(nameOrDef, target);
    };
}
class ValueConverterDefinition {
    constructor(Type, name, aliases, key) {
        this.Type = Type;
        this.name = name;
        this.aliases = aliases;
        this.key = key;
    }
    static create(nameOrDef, Type) {
        let name;
        let def;
        if (typeof nameOrDef === 'string') {
            name = nameOrDef;
            def = { name };
        }
        else {
            name = nameOrDef.name;
            def = nameOrDef;
        }
        return new ValueConverterDefinition(Type, Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["firstDefined"])(ValueConverter.getAnnotation(Type, 'name'), name), Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["mergeArrays"])(ValueConverter.getAnnotation(Type, 'aliases'), def.aliases, Type.aliases), ValueConverter.keyFrom(name));
    }
    register(container) {
        const { Type, key, aliases } = this;
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Registration"].singleton(key, Type).register(container);
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Registration"].aliasTo(key, Type).register(container);
        Object(_definitions__WEBPACK_IMPORTED_MODULE_1__["registerAliases"])(aliases, ValueConverter, key, container);
    }
}
const ValueConverter = {
    name: _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Protocol"].resource.keyFor('value-converter'),
    keyFrom(name) {
        return `${ValueConverter.name}:${name}`;
    },
    isType(value) {
        return typeof value === 'function' && _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Metadata"].hasOwn(ValueConverter.name, value);
    },
    define(nameOrDef, Type) {
        const definition = ValueConverterDefinition.create(nameOrDef, Type);
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Metadata"].define(ValueConverter.name, definition, definition.Type);
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Metadata"].define(ValueConverter.name, definition, definition);
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Protocol"].resource.appendTo(Type, ValueConverter.name);
        return definition.Type;
    },
    getDefinition(Type) {
        const def = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Metadata"].getOwn(ValueConverter.name, Type);
        if (def === void 0) {
            throw new Error(`No definition found for type ${Type.name}`);
        }
        return def;
    },
    annotate(Type, prop, value) {
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Metadata"].define(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Protocol"].annotation.keyFor(prop), value, Type);
    },
    getAnnotation(Type, prop) {
        return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Metadata"].getOwn(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Protocol"].annotation.keyFor(prop), Type);
    },
};
//# sourceMappingURL=value-converter.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esnext/resources/value-converters/sanitize.js":
/*!******************************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esnext/resources/value-converters/sanitize.js ***!
  \******************************************************************************************/
/*! exports provided: ISanitizer, SanitizeValueConverter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ISanitizer", function() { return ISanitizer; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SanitizeValueConverter", function() { return SanitizeValueConverter; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _value_converter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../value-converter */ "./node_modules/@aurelia/runtime/dist/esnext/resources/value-converter.js");



const SCRIPT_REGEX = /<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi;
const ISanitizer = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["DI"].createInterface('ISanitizer').withDefault(x => x.singleton(class {
    sanitize(input) {
        return input.replace(SCRIPT_REGEX, '');
    }
}));
/**
 * Simple html sanitization converter to preserve whitelisted elements and attributes on a bound property containing html.
 */
let SanitizeValueConverter = class SanitizeValueConverter {
    constructor(sanitizer) {
        this.sanitizer = sanitizer;
    }
    /**
     * Process the provided markup that flows to the view.
     *
     * @param untrustedMarkup - The untrusted markup to be sanitized.
     */
    toView(untrustedMarkup) {
        if (untrustedMarkup == null) {
            return null;
        }
        return this.sanitizer.sanitize(untrustedMarkup);
    }
};
SanitizeValueConverter = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_value_converter__WEBPACK_IMPORTED_MODULE_2__["valueConverter"])('sanitize'),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(0, ISanitizer),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object])
], SanitizeValueConverter);

//# sourceMappingURL=sanitize.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esnext/resources/value-converters/view.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esnext/resources/value-converters/view.js ***!
  \**************************************************************************************/
/*! exports provided: ViewValueConverter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ViewValueConverter", function() { return ViewValueConverter; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _templating_view__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../templating/view */ "./node_modules/@aurelia/runtime/dist/esnext/templating/view.js");
/* harmony import */ var _value_converter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../value-converter */ "./node_modules/@aurelia/runtime/dist/esnext/resources/value-converter.js");



let ViewValueConverter = class ViewValueConverter {
    constructor(viewLocator) {
        this.viewLocator = viewLocator;
    }
    toView(object, viewNameOrSelector) {
        return this.viewLocator.getViewComponentForObject(object, viewNameOrSelector);
    }
};
ViewValueConverter = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_value_converter__WEBPACK_IMPORTED_MODULE_2__["valueConverter"])('view'),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__param"])(0, _templating_view__WEBPACK_IMPORTED_MODULE_1__["IViewLocator"]),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object])
], ViewValueConverter);

//# sourceMappingURL=view.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esnext/templating/bindable.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esnext/templating/bindable.js ***!
  \**************************************************************************/
/*! exports provided: bindable, Bindable, BindableDefinition */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "bindable", function() { return bindable; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Bindable", function() { return Bindable; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BindableDefinition", function() { return BindableDefinition; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _flags__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../flags */ "./node_modules/@aurelia/runtime/dist/esnext/flags.js");



function bindable(configOrTarget, prop) {
    let config;
    function decorator($target, $prop) {
        if (arguments.length > 1) {
            // Non invocation:
            // - @bindable
            // Invocation with or w/o opts:
            // - @bindable()
            // - @bindable({...opts})
            config.property = $prop;
        }
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Metadata"].define(Bindable.name, BindableDefinition.create($prop, config), $target.constructor, $prop);
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Protocol"].annotation.appendTo($target.constructor, Bindable.keyFrom($prop));
    }
    if (arguments.length > 1) {
        // Non invocation:
        // - @bindable
        config = {};
        decorator(configOrTarget, prop);
        return;
    }
    else if (typeof configOrTarget === 'string') {
        // ClassDecorator
        // - @bindable('bar')
        // Direct call:
        // - @bindable('bar')(Foo)
        config = {};
        return decorator;
    }
    // Invocation with or w/o opts:
    // - @bindable()
    // - @bindable({...opts})
    config = configOrTarget === void 0 ? {} : configOrTarget;
    return decorator;
}
function isBindableAnnotation(key) {
    return key.startsWith(Bindable.name);
}
const Bindable = {
    name: _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Protocol"].annotation.keyFor('bindable'),
    keyFrom(name) {
        return `${Bindable.name}:${name}`;
    },
    from(...bindableLists) {
        const bindables = {};
        // eslint-disable-next-line @typescript-eslint/unbound-method
        const isArray = Array.isArray;
        function addName(name) {
            bindables[name] = BindableDefinition.create(name);
        }
        function addDescription(name, def) {
            bindables[name] = def instanceof BindableDefinition ? def : BindableDefinition.create(name, def);
        }
        function addList(maybeList) {
            if (isArray(maybeList)) {
                maybeList.forEach(addName);
            }
            else if (maybeList instanceof BindableDefinition) {
                bindables[maybeList.property] = maybeList;
            }
            else if (maybeList !== void 0) {
                Object.keys(maybeList).forEach(name => addDescription(name, maybeList[name]));
            }
        }
        bindableLists.forEach(addList);
        return bindables;
    },
    for(Type) {
        let def;
        const builder = {
            add(configOrProp) {
                let prop;
                let config;
                if (typeof configOrProp === 'string') {
                    prop = configOrProp;
                    config = { property: prop };
                }
                else {
                    prop = configOrProp.property;
                    config = configOrProp;
                }
                def = BindableDefinition.create(prop, config);
                if (!_aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Metadata"].hasOwn(Bindable.name, Type, prop)) {
                    _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Protocol"].annotation.appendTo(Type, Bindable.keyFrom(prop));
                }
                _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Metadata"].define(Bindable.name, def, Type, prop);
                return builder;
            },
            mode(mode) {
                def.mode = mode;
                return builder;
            },
            callback(callback) {
                def.callback = callback;
                return builder;
            },
            attribute(attribute) {
                def.attribute = attribute;
                return builder;
            },
            primary() {
                def.primary = true;
                return builder;
            },
            set(setInterpreter) {
                def.set = setInterpreter;
                return builder;
            }
        };
        return builder;
    },
    getAll(Type) {
        const propStart = Bindable.name.length + 1;
        const defs = [];
        const prototypeChain = Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["getPrototypeChain"])(Type);
        let iProto = prototypeChain.length;
        let iDefs = 0;
        let keys;
        let keysLen;
        let Class;
        while (--iProto >= 0) {
            Class = prototypeChain[iProto];
            keys = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Protocol"].annotation.getKeys(Class).filter(isBindableAnnotation);
            keysLen = keys.length;
            for (let i = 0; i < keysLen; ++i) {
                defs[iDefs++] = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Metadata"].getOwn(Bindable.name, Class, keys[i].slice(propStart));
            }
        }
        return defs;
    },
};
class BindableDefinition {
    constructor(attribute, callback, mode, primary, property, set) {
        this.attribute = attribute;
        this.callback = callback;
        this.mode = mode;
        this.primary = primary;
        this.property = property;
        this.set = set;
    }
    static create(prop, def = {}) {
        return new BindableDefinition(Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["firstDefined"])(def.attribute, Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["kebabCase"])(prop)), Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["firstDefined"])(def.callback, `${prop}Changed`), Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["firstDefined"])(def.mode, _flags__WEBPACK_IMPORTED_MODULE_2__["BindingMode"].toView), Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["firstDefined"])(def.primary, false), Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["firstDefined"])(def.property, prop), Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["firstDefined"])(def.set, _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["PLATFORM"].noop));
    }
}
/* eslint-disable @typescript-eslint/no-unused-vars,spaced-comment */
/**
 * This function serves two purposes:
 * - A playground for contributors to try their changes to the APIs.
 * - Cause the API surface to be properly type-checked and protected against accidental type regressions.
 *
 * It will be automatically removed by dead code elimination.
 */
function apiTypeCheck() {
    let Foo = 
    // > expected error - class decorator only accepts a string
    //@bindable({})
    class Foo {
    };
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        bindable,
        bindable(),
        bindable({})
        // > expected error - 'property' does not exist on decorator input object
        //@bindable({ property: 'prop' })
        ,
        bindable({ mode: _flags__WEBPACK_IMPORTED_MODULE_2__["BindingMode"].twoWay }),
        bindable({ callback: 'propChanged' }),
        bindable({ attribute: 'prop' }),
        bindable({ primary: true }),
        bindable({ set: value => String(value) }),
        bindable({ set: value => Number(value) }),
        bindable({
            mode: _flags__WEBPACK_IMPORTED_MODULE_2__["BindingMode"].twoWay,
            callback: 'propChanged',
            attribute: 'prop',
            primary: true,
            set: value => String(value)
        }),
        Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:type", Object)
    ], Foo.prototype, "prop", void 0);
    Foo = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
        bindable('prop')
        // > expected error - class decorator only accepts a string
        //@bindable({})
    ], Foo);
    Bindable.for(Foo)
        // > expected error - there is no add() function with only optional params on the fluent api
        //.add()
        // > expected error - 'property' is a required property on the fluent api
        //.add({})
        .add({ property: 'prop' })
        .add({ property: 'prop', mode: _flags__WEBPACK_IMPORTED_MODULE_2__["BindingMode"].twoWay })
        .add({ property: 'prop', callback: 'propChanged' })
        .add({ property: 'prop', attribute: 'prop' })
        .add({ property: 'prop', primary: true })
        .add({ property: 'prop', mode: _flags__WEBPACK_IMPORTED_MODULE_2__["BindingMode"].twoWay, callback: 'propChanged', attribute: 'prop', primary: true })
        .add('prop')
        // > expected error - the add() method that accepts an object literal does not return a fluent api
        //.add({ property: 'prop' }).mode(BindingMode.twoWay)
        //.add({ property: 'prop' }).callback('propChanged')
        //.add({ property: 'prop' }).attribute('prop')
        //.add({ property: 'prop' }).primary()
        // > expected error - fluent api methods can only be invoked once per bindable
        //.add('prop').mode(BindingMode.twoWay).mode(BindingMode.twoWay)
        //.add('prop').mode(BindingMode.twoWay).callback('propChanged').mode(BindingMode.twoWay)
        //.add('prop').mode(BindingMode.twoWay).callback('propChanged').callback('propChanged') // etc
        // > expected error - wrong invocation order
        //.add('prop').callback('propChanged').mode(BindingMode.twoWay)
        //.add('prop').primary().mode(BindingMode.twoWay)  // etc
        .add('prop').mode(_flags__WEBPACK_IMPORTED_MODULE_2__["BindingMode"].twoWay)
        .add('prop').mode(_flags__WEBPACK_IMPORTED_MODULE_2__["BindingMode"].twoWay).callback('propChanged')
        .add('prop').mode(_flags__WEBPACK_IMPORTED_MODULE_2__["BindingMode"].twoWay).callback('propChanged').attribute('prop')
        .add('prop').mode(_flags__WEBPACK_IMPORTED_MODULE_2__["BindingMode"].twoWay).callback('propChanged').attribute('prop').primary()
        .add('prop').mode(_flags__WEBPACK_IMPORTED_MODULE_2__["BindingMode"].twoWay).set((value) => Number(value))
        .add('prop').mode(_flags__WEBPACK_IMPORTED_MODULE_2__["BindingMode"].twoWay).callback('propChanged').set(value => Number(value))
        .add('prop').callback('propChanged')
        .add('prop').callback('propChanged').attribute('prop')
        .add('prop').callback('propChanged').attribute('prop').primary()
        .add('prop').attribute('prop')
        .add('prop').attribute('prop').primary()
        .add('prop').primary();
}
/* eslint-enable @typescript-eslint/no-unused-vars,spaced-comment */
//# sourceMappingURL=bindable.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esnext/templating/children.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esnext/templating/children.js ***!
  \**************************************************************************/
/*! exports provided: children, Children, ChildrenDefinition, ChildrenObserver, filterChildren */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "children", function() { return children; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Children", function() { return Children; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ChildrenDefinition", function() { return ChildrenDefinition; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ChildrenObserver", function() { return ChildrenObserver; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "filterChildren", function() { return filterChildren; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _resources_custom_element__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../resources/custom-element */ "./node_modules/@aurelia/runtime/dist/esnext/resources/custom-element.js");
/* harmony import */ var _observation_subscriber_collection__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../observation/subscriber-collection */ "./node_modules/@aurelia/runtime/dist/esnext/observation/subscriber-collection.js");
var ChildrenObserver_1;

/* eslint-disable @typescript-eslint/no-use-before-define */



function children(configOrTarget, prop) {
    let config;
    function decorator($target, $prop) {
        if (arguments.length > 1) {
            // Non invocation:
            // - @children
            // Invocation with or w/o opts:
            // - @children()
            // - @children({...opts})
            config.property = $prop;
        }
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Metadata"].define(Children.name, ChildrenDefinition.create($prop, config), $target.constructor, $prop);
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Protocol"].annotation.appendTo($target.constructor, Children.keyFrom($prop));
    }
    if (arguments.length > 1) {
        // Non invocation:
        // - @children
        config = {};
        decorator(configOrTarget, prop);
        return;
    }
    else if (typeof configOrTarget === 'string') {
        // ClassDecorator
        // - @children('bar')
        // Direct call:
        // - @children('bar')(Foo)
        config = {};
        return decorator;
    }
    // Invocation with or w/o opts:
    // - @children()
    // - @children({...opts})
    config = configOrTarget === void 0 ? {} : configOrTarget;
    return decorator;
}
function isChildrenObserverAnnotation(key) {
    return key.startsWith(Children.name);
}
const Children = {
    name: _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Protocol"].annotation.keyFor('children-observer'),
    keyFrom(name) {
        return `${Children.name}:${name}`;
    },
    from(...childrenObserverLists) {
        const childrenObservers = {};
        // eslint-disable-next-line @typescript-eslint/unbound-method
        const isArray = Array.isArray;
        function addName(name) {
            childrenObservers[name] = ChildrenDefinition.create(name);
        }
        function addDescription(name, def) {
            childrenObservers[name] = ChildrenDefinition.create(name, def);
        }
        function addList(maybeList) {
            if (isArray(maybeList)) {
                maybeList.forEach(addName);
            }
            else if (maybeList instanceof ChildrenDefinition) {
                childrenObservers[maybeList.property] = maybeList;
            }
            else if (maybeList !== void 0) {
                Object.keys(maybeList).forEach(name => addDescription(name, maybeList));
            }
        }
        childrenObserverLists.forEach(addList);
        return childrenObservers;
    },
    getAll(Type) {
        const propStart = Children.name.length + 1;
        const defs = [];
        const prototypeChain = Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["getPrototypeChain"])(Type);
        let iProto = prototypeChain.length;
        let iDefs = 0;
        let keys;
        let keysLen;
        let Class;
        while (--iProto >= 0) {
            Class = prototypeChain[iProto];
            keys = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Protocol"].annotation.getKeys(Class).filter(isChildrenObserverAnnotation);
            keysLen = keys.length;
            for (let i = 0; i < keysLen; ++i) {
                defs[iDefs++] = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Metadata"].getOwn(Children.name, Class, keys[i].slice(propStart));
            }
        }
        return defs;
    },
};
class ChildrenDefinition {
    constructor(callback, property, options, query, filter, map) {
        this.callback = callback;
        this.property = property;
        this.options = options;
        this.query = query;
        this.filter = filter;
        this.map = map;
    }
    static create(prop, def = {}) {
        return new ChildrenDefinition(Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["firstDefined"])(def.callback, `${prop}Changed`), Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["firstDefined"])(def.property, prop), def.options, def.query, def.filter, def.map);
    }
}
/** @internal */
let ChildrenObserver = ChildrenObserver_1 = class ChildrenObserver {
    constructor(controller, obj, flags, propertyKey, cbName, query = defaultChildQuery, filter = defaultChildFilter, map = defaultChildMap, options) {
        this.controller = controller;
        this.obj = obj;
        this.propertyKey = propertyKey;
        this.query = query;
        this.filter = filter;
        this.map = map;
        this.options = options;
        this.observing = false;
        this.children = (void 0);
        this.callback = obj[cbName];
        this.persistentFlags = flags & 2080374799 /* persistentBindingFlags */;
        this.createGetterSetter();
    }
    getValue() {
        this.tryStartObserving();
        return this.children;
    }
    setValue(newValue) { }
    subscribe(subscriber) {
        this.tryStartObserving();
        this.addSubscriber(subscriber);
    }
    tryStartObserving() {
        if (!this.observing) {
            this.observing = true;
            const projector = this.controller.projector;
            this.children = filterChildren(projector, this.query, this.filter, this.map);
            projector.subscribeToChildrenChange(() => { this.onChildrenChanged(); }, this.options);
        }
    }
    onChildrenChanged() {
        this.children = filterChildren(this.controller.projector, this.query, this.filter, this.map);
        if (this.callback !== void 0) {
            this.callback.call(this.obj);
        }
        this.callSubscribers(this.children, undefined, this.persistentFlags | 16 /* updateTargetInstance */);
    }
    createGetterSetter() {
        if (!Reflect.defineProperty(this.obj, this.propertyKey, {
            enumerable: true,
            configurable: true,
            get: () => this.getValue(),
            set: () => { return; },
        })) {
            _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Reporter"].write(1, this.propertyKey, this.obj);
        }
    }
};
ChildrenObserver = ChildrenObserver_1 = Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__decorate"])([
    Object(_observation_subscriber_collection__WEBPACK_IMPORTED_MODULE_3__["subscriberCollection"])(),
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__metadata"])("design:paramtypes", [Object, Object, Number, String, String, Object, Object, Object, Object])
], ChildrenObserver);

function defaultChildQuery(projector) {
    return projector.children;
}
function defaultChildFilter(node, controller, viewModel) {
    return !!viewModel;
}
function defaultChildMap(node, controller, viewModel) {
    return viewModel;
}
/** @internal */
function filterChildren(projector, query, filter, map) {
    const nodes = query(projector);
    const children = [];
    for (let i = 0, ii = nodes.length; i < ii; ++i) {
        const node = nodes[i];
        const controller = _resources_custom_element__WEBPACK_IMPORTED_MODULE_2__["CustomElement"].for(node);
        const viewModel = controller ? controller.viewModel : null;
        if (filter(node, controller, viewModel)) {
            children.push(map(node, controller, viewModel));
        }
    }
    return children;
}
//# sourceMappingURL=children.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esnext/templating/controller.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esnext/templating/controller.js ***!
  \****************************************************************************/
/*! exports provided: Controller */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Controller", function() { return Controller; });
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _definitions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions */ "./node_modules/@aurelia/runtime/dist/esnext/definitions.js");
/* harmony import */ var _lifecycle_task__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lifecycle-task */ "./node_modules/@aurelia/runtime/dist/esnext/lifecycle-task.js");
/* harmony import */ var _observation_binding_context__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../observation/binding-context */ "./node_modules/@aurelia/runtime/dist/esnext/observation/binding-context.js");
/* harmony import */ var _observation_proxy_observer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../observation/proxy-observer */ "./node_modules/@aurelia/runtime/dist/esnext/observation/proxy-observer.js");
/* harmony import */ var _observation_bindable_observer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../observation/bindable-observer */ "./node_modules/@aurelia/runtime/dist/esnext/observation/bindable-observer.js");
/* harmony import */ var _resources_custom_element__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../resources/custom-element */ "./node_modules/@aurelia/runtime/dist/esnext/resources/custom-element.js");
/* harmony import */ var _resources_custom_attribute__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../resources/custom-attribute */ "./node_modules/@aurelia/runtime/dist/esnext/resources/custom-attribute.js");
/* harmony import */ var _render_context__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./render-context */ "./node_modules/@aurelia/runtime/dist/esnext/templating/render-context.js");
/* harmony import */ var _children__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./children */ "./node_modules/@aurelia/runtime/dist/esnext/templating/children.js");










const controllerLookup = new WeakMap();
class Controller {
    constructor(vmKind, flags, lifecycle, hooks, 
    /**
     * The viewFactory. Only present for synthetic views.
     */
    viewFactory, 
    /**
     * The backing viewModel. This is never a proxy. Only present for custom attributes and elements.
     */
    viewModel, 
    /**
     * The binding context. This may be a proxy. If it is not, then it is the same instance as the viewModel. Only present for custom attributes and elements.
     */
    bindingContext, 
    /**
     * The physical host dom node. Only present for custom elements.
     */
    host) {
        this.vmKind = vmKind;
        this.flags = flags;
        this.lifecycle = lifecycle;
        this.hooks = hooks;
        this.viewFactory = viewFactory;
        this.viewModel = viewModel;
        this.bindingContext = bindingContext;
        this.host = host;
        this.id = Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["nextId"])('au$component');
        this.nextBound = void 0;
        this.nextUnbound = void 0;
        this.prevBound = void 0;
        this.prevUnbound = void 0;
        this.nextAttached = void 0;
        this.nextDetached = void 0;
        this.prevAttached = void 0;
        this.prevDetached = void 0;
        this.nextMount = void 0;
        this.nextUnmount = void 0;
        this.prevMount = void 0;
        this.prevUnmount = void 0;
        this.parent = void 0;
        this.bindings = void 0;
        this.controllers = void 0;
        this.state = 0 /* none */;
        this.scopeParts = void 0;
        this.isStrictBinding = false;
        this.scope = void 0;
        this.part = void 0;
        this.projector = void 0;
        this.nodes = void 0;
        this.context = void 0;
        this.location = void 0;
        this.mountStrategy = 1 /* insertBefore */;
    }
    static getCached(viewModel) {
        return controllerLookup.get(viewModel);
    }
    static getCachedOrThrow(viewModel) {
        const controller = Controller.getCached(viewModel);
        if (controller === void 0) {
            throw new Error(`There is no cached controller for the provided ViewModel: ${String(viewModel)}`);
        }
        return controller;
    }
    static forCustomElement(viewModel, lifecycle, host, parentContainer, parts, flags = 0 /* none */) {
        if (controllerLookup.has(viewModel)) {
            return controllerLookup.get(viewModel);
        }
        const definition = _resources_custom_element__WEBPACK_IMPORTED_MODULE_6__["CustomElement"].getDefinition(viewModel.constructor);
        flags |= definition.strategy;
        const controller = new Controller(0 /* customElement */, 
        /* flags          */ flags, 
        /* lifecycle      */ lifecycle, 
        /* hooks          */ definition.hooks, 
        /* viewFactory    */ void 0, 
        /* viewModel      */ viewModel, 
        /* bindingContext */ getBindingContext(flags, viewModel), 
        /* host           */ host);
        controllerLookup.set(viewModel, controller);
        controller.hydrateCustomElement(definition, parentContainer, parts);
        return controller;
    }
    static forCustomAttribute(viewModel, lifecycle, host, flags = 0 /* none */) {
        if (controllerLookup.has(viewModel)) {
            return controllerLookup.get(viewModel);
        }
        const definition = _resources_custom_attribute__WEBPACK_IMPORTED_MODULE_7__["CustomAttribute"].getDefinition(viewModel.constructor);
        flags |= definition.strategy;
        const controller = new Controller(1 /* customAttribute */, 
        /* flags          */ flags, 
        /* lifecycle      */ lifecycle, 
        /* hooks          */ definition.hooks, 
        /* viewFactory    */ void 0, 
        /* viewModel      */ viewModel, 
        /* bindingContext */ getBindingContext(flags, viewModel), 
        /* host           */ host);
        controllerLookup.set(viewModel, controller);
        controller.hydrateCustomAttribute(definition);
        return controller;
    }
    static forSyntheticView(viewFactory, lifecycle, context, flags = 0 /* none */) {
        const controller = new Controller(2 /* synthetic */, 
        /* flags          */ flags, 
        /* lifecycle      */ lifecycle, 
        /* hooks          */ _definitions__WEBPACK_IMPORTED_MODULE_1__["HooksDefinition"].none, 
        /* viewFactory    */ viewFactory, 
        /* viewModel      */ void 0, 
        /* bindingContext */ void 0, 
        /* host           */ void 0);
        controller.hydrateSynthetic(context, viewFactory.parts);
        return controller;
    }
    hydrateCustomElement(definition, parentContainer, parts) {
        const flags = this.flags |= definition.strategy;
        const instance = this.viewModel;
        createObservers(this.lifecycle, definition, flags, instance);
        createChildrenObservers(this, definition, flags, instance);
        this.scope = _observation_binding_context__WEBPACK_IMPORTED_MODULE_3__["Scope"].create(flags, this.bindingContext, null);
        const hooks = this.hooks;
        if (hooks.hasCreate) {
            const result = instance.create(
            /* controller      */ this, 
            /* parentContainer */ parentContainer, 
            /* definition      */ definition, 
            /* parts           */ parts);
            if (result !== void 0 && result !== definition) {
                definition = _resources_custom_element__WEBPACK_IMPORTED_MODULE_6__["CustomElementDefinition"].getOrCreate(result);
            }
        }
        const context = this.context = Object(_render_context__WEBPACK_IMPORTED_MODULE_8__["getRenderContext"])(definition, parentContainer, parts);
        // Support Recursive Components by adding self to own context
        definition.register(context);
        if (definition.injectable !== null) {
            // If the element is registered as injectable, support injecting the instance into children
            context.beginChildComponentOperation(instance);
        }
        if (hooks.hasBeforeCompile) {
            instance.beforeCompile(this);
        }
        const compiledContext = context.compile();
        const compiledDefinition = compiledContext.compiledDefinition;
        this.scopeParts = compiledDefinition.scopeParts;
        this.isStrictBinding = compiledDefinition.isStrictBinding;
        const projectorLocator = parentContainer.get(_resources_custom_element__WEBPACK_IMPORTED_MODULE_6__["IProjectorLocator"]);
        this.projector = projectorLocator.getElementProjector(context.dom, this, this.host, compiledDefinition);
        instance.$controller = this;
        const nodes = this.nodes = compiledContext.createNodes();
        if (hooks.hasAfterCompile) {
            instance.afterCompile(this);
        }
        const targets = nodes.findTargets();
        compiledContext.render(
        /* flags      */ this.flags, 
        /* controller */ this, 
        /* targets    */ targets, 
        /* definition */ compiledDefinition, 
        /* host       */ this.host, 
        /* parts      */ parts);
        if (hooks.hasAfterCompileChildren) {
            instance.afterCompileChildren(this);
        }
    }
    hydrateCustomAttribute(definition) {
        const flags = this.flags | definition.strategy;
        const instance = this.viewModel;
        createObservers(this.lifecycle, definition, flags, instance);
        instance.$controller = this;
    }
    hydrateSynthetic(context, parts) {
        this.context = context;
        const compiledContext = context.compile();
        const compiledDefinition = compiledContext.compiledDefinition;
        this.scopeParts = compiledDefinition.scopeParts;
        this.isStrictBinding = compiledDefinition.isStrictBinding;
        const nodes = this.nodes = compiledContext.createNodes();
        const targets = nodes.findTargets();
        compiledContext.render(
        /* flags      */ this.flags, 
        /* controller */ this, 
        /* targets    */ targets, 
        /* definition */ compiledDefinition, 
        /* host       */ void 0, 
        /* parts      */ parts);
    }
    addBinding(binding) {
        if (this.bindings === void 0) {
            this.bindings = [binding];
        }
        else {
            this.bindings[this.bindings.length] = binding;
        }
    }
    addController(controller) {
        if (this.controllers === void 0) {
            this.controllers = [controller];
        }
        else {
            this.controllers[this.controllers.length] = controller;
        }
    }
    is(name) {
        switch (this.vmKind) {
            case 1 /* customAttribute */: {
                const def = _resources_custom_attribute__WEBPACK_IMPORTED_MODULE_7__["CustomAttribute"].getDefinition(this.viewModel.constructor);
                return def.name === name;
            }
            case 0 /* customElement */: {
                const def = _resources_custom_element__WEBPACK_IMPORTED_MODULE_6__["CustomElement"].getDefinition(this.viewModel.constructor);
                return def.name === name;
            }
            case 2 /* synthetic */:
                return this.viewFactory.name === name;
        }
    }
    lockScope(scope) {
        this.scope = scope;
        this.state |= 256 /* hasLockedScope */;
    }
    hold(location, mountStrategy) {
        this.state = (this.state | 512 /* canBeCached */) ^ 512 /* canBeCached */;
        this.location = location;
        this.mountStrategy = mountStrategy;
    }
    release(flags) {
        this.state |= 512 /* canBeCached */;
        if ((this.state & 32 /* isAttached */) > 0) {
            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
            return this.viewFactory.canReturnToCache(this); // non-null is implied by the hook
        }
        return this.unmountSynthetic(flags);
    }
    bind(flags, scope, part) {
        this.part = part;
        // TODO: benchmark which of these techniques is fastest:
        // - the current one (enum with switch)
        // - set the name of the method in the constructor, e.g. this.bindMethod = 'bindCustomElement'
        //    and then doing this[this.bindMethod](flags, scope) instead of switch (eliminates branching
        //    but computed property access might be harmful to browser optimizations)
        // - make bind() a property and set it to one of the 3 methods in the constructor,
        //    e.g. this.bind = this.bindCustomElement (eliminates branching + reduces call stack depth by 1,
        //    but might make the call site megamorphic)
        flags |= 4096 /* fromBind */;
        switch (this.vmKind) {
            case 0 /* customElement */:
                return this.bindCustomElement(flags, scope);
            case 1 /* customAttribute */:
                return this.bindCustomAttribute(flags, scope);
            case 2 /* synthetic */:
                return this.bindSynthetic(flags, scope);
        }
    }
    unbind(flags) {
        flags |= 8192 /* fromUnbind */;
        switch (this.vmKind) {
            case 0 /* customElement */:
                return this.unbindCustomElement(flags);
            case 1 /* customAttribute */:
                return this.unbindCustomAttribute(flags);
            case 2 /* synthetic */:
                return this.unbindSynthetic(flags);
        }
    }
    afterBind(flags) {
        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
        this.bindingContext.afterBind(flags); // non-null is implied by the hook
    }
    afterUnbind(flags) {
        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
        this.bindingContext.afterUnbind(flags); // non-null is implied by the hook
    }
    attach(flags) {
        if ((this.state & 40 /* isAttachedOrAttaching */) > 0 && (flags & 33554432 /* reorderNodes */) === 0) {
            return;
        }
        flags |= 16384 /* fromAttach */;
        switch (this.vmKind) {
            case 0 /* customElement */:
                this.attachCustomElement(flags);
                break;
            case 1 /* customAttribute */:
                this.attachCustomAttribute(flags);
                break;
            case 2 /* synthetic */:
                this.attachSynthetic(flags);
        }
    }
    detach(flags) {
        if ((this.state & 40 /* isAttachedOrAttaching */) === 0) {
            return;
        }
        flags |= 32768 /* fromDetach */;
        switch (this.vmKind) {
            case 0 /* customElement */:
                this.detachCustomElement(flags);
                break;
            case 1 /* customAttribute */:
                this.detachCustomAttribute(flags);
                break;
            case 2 /* synthetic */:
                this.detachSynthetic(flags);
        }
    }
    afterAttach(flags) {
        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
        this.bindingContext.afterAttach(flags); // non-null is implied by the hook
    }
    afterDetach(flags) {
        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
        this.bindingContext.afterDetach(flags); // non-null is implied by the hook
    }
    mount(flags) {
        switch (this.vmKind) {
            case 0 /* customElement */:
                this.mountCustomElement(flags);
                break;
            case 2 /* synthetic */:
                this.mountSynthetic(flags);
        }
    }
    unmount(flags) {
        switch (this.vmKind) {
            case 0 /* customElement */:
                this.unmountCustomElement(flags);
                break;
            case 2 /* synthetic */:
                this.unmountSynthetic(flags);
        }
    }
    cache(flags) {
        switch (this.vmKind) {
            case 0 /* customElement */:
                this.cacheCustomElement(flags);
                break;
            case 1 /* customAttribute */:
                this.cacheCustomAttribute(flags);
                break;
            case 2 /* synthetic */:
                this.cacheSynthetic(flags);
        }
    }
    getTargetAccessor(propertyName) {
        const { bindings } = this;
        if (bindings !== void 0) {
            const binding = bindings.find(b => b.targetProperty === propertyName);
            if (binding !== void 0) {
                return binding.targetObserver;
            }
        }
        return void 0;
    }
    // #region bind/unbind
    bindCustomElement(flags, scope) {
        const $scope = this.scope;
        $scope.parentScope = scope === void 0 ? null : scope;
        $scope.scopeParts = this.scopeParts;
        if ((this.state & 4 /* isBound */) > 0) {
            return _lifecycle_task__WEBPACK_IMPORTED_MODULE_2__["LifecycleTask"].done;
        }
        flags |= 4096 /* fromBind */;
        this.state |= 1 /* isBinding */;
        this.lifecycle.afterBind.begin();
        if (this.hooks.hasBeforeBind) {
            const ret = this.bindingContext.beforeBind(flags);
            if (Object(_lifecycle_task__WEBPACK_IMPORTED_MODULE_2__["hasAsyncWork"])(ret)) {
                // this.scope could be reassigned during beforeBind so reference that instead of $scope.
                return new _lifecycle_task__WEBPACK_IMPORTED_MODULE_2__["ContinuationTask"](ret, this.bindBindings, this, flags, this.scope);
            }
        }
        return this.bindBindings(flags, this.scope);
    }
    bindCustomAttribute(flags, scope) {
        if ((this.state & 4 /* isBound */) > 0) {
            if (this.scope === scope) {
                return _lifecycle_task__WEBPACK_IMPORTED_MODULE_2__["LifecycleTask"].done;
            }
            flags |= 4096 /* fromBind */;
            const task = this.unbind(flags);
            if (!task.done) {
                return new _lifecycle_task__WEBPACK_IMPORTED_MODULE_2__["ContinuationTask"](task, this.bind, this, flags, scope);
            }
        }
        else {
            flags |= 4096 /* fromBind */;
        }
        this.state |= 1 /* isBinding */;
        this.scope = scope;
        this.lifecycle.afterBind.begin();
        if (this.hooks.hasBeforeBind) {
            const ret = this.bindingContext.beforeBind(flags);
            if (Object(_lifecycle_task__WEBPACK_IMPORTED_MODULE_2__["hasAsyncWork"])(ret)) {
                return new _lifecycle_task__WEBPACK_IMPORTED_MODULE_2__["ContinuationTask"](ret, this.endBind, this, flags);
            }
        }
        this.endBind(flags);
        return _lifecycle_task__WEBPACK_IMPORTED_MODULE_2__["LifecycleTask"].done;
    }
    bindSynthetic(flags, scope) {
        if (scope == void 0) {
            throw new Error(`Scope is null or undefined`); // TODO: create error code
        }
        scope.scopeParts = Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["mergeDistinct"])(scope.scopeParts, this.scopeParts, false);
        if ((this.state & 4 /* isBound */) > 0) {
            if (this.scope === scope || (this.state & 256 /* hasLockedScope */) > 0) {
                return _lifecycle_task__WEBPACK_IMPORTED_MODULE_2__["LifecycleTask"].done;
            }
            flags |= 4096 /* fromBind */;
            const task = this.unbind(flags);
            if (!task.done) {
                return new _lifecycle_task__WEBPACK_IMPORTED_MODULE_2__["ContinuationTask"](task, this.bind, this, flags, scope);
            }
        }
        else {
            flags |= 4096 /* fromBind */;
        }
        if ((this.state & 256 /* hasLockedScope */) === 0) {
            this.scope = scope;
        }
        this.state |= 1 /* isBinding */;
        this.lifecycle.afterBind.begin();
        return this.bindBindings(flags, this.scope);
    }
    bindBindings(flags, scope) {
        const { bindings } = this;
        if (bindings !== void 0) {
            const { length } = bindings;
            if (this.isStrictBinding) {
                flags |= 4 /* isStrictBindingStrategy */;
            }
            for (let i = 0; i < length; ++i) {
                bindings[i].$bind(flags, scope, this.part);
            }
        }
        return this.bindControllers(flags, this.scope);
    }
    bindControllers(flags, scope) {
        let tasks = void 0;
        let task;
        const { controllers } = this;
        if (controllers !== void 0) {
            const { length } = controllers;
            for (let i = 0; i < length; ++i) {
                controllers[i].parent = this;
                task = controllers[i].bind(flags, scope, this.part);
                if (!task.done) {
                    if (tasks === void 0) {
                        tasks = [];
                    }
                    tasks.push(task);
                }
            }
        }
        if (tasks === void 0) {
            this.endBind(flags);
            return _lifecycle_task__WEBPACK_IMPORTED_MODULE_2__["LifecycleTask"].done;
        }
        return new _lifecycle_task__WEBPACK_IMPORTED_MODULE_2__["AggregateContinuationTask"](tasks, this.endBind, this, flags);
    }
    endBind(flags) {
        if (this.hooks.hasAfterBind) {
            this.lifecycle.afterBind.add(this);
        }
        this.state = this.state ^ 1 /* isBinding */ | 4 /* isBound */;
        this.lifecycle.afterBind.end(flags);
    }
    unbindCustomElement(flags) {
        if ((this.state & 4 /* isBound */) === 0) {
            return _lifecycle_task__WEBPACK_IMPORTED_MODULE_2__["LifecycleTask"].done;
        }
        this.scope.parentScope = null;
        this.state |= 2 /* isUnbinding */;
        flags |= 8192 /* fromUnbind */;
        this.lifecycle.afterUnbind.begin();
        if (this.hooks.hasBeforeUnbind) {
            const ret = this.bindingContext.beforeUnbind(flags);
            if (Object(_lifecycle_task__WEBPACK_IMPORTED_MODULE_2__["hasAsyncWork"])(ret)) {
                return new _lifecycle_task__WEBPACK_IMPORTED_MODULE_2__["ContinuationTask"](ret, this.unbindControllers, this, flags);
            }
        }
        return this.unbindControllers(flags);
    }
    unbindCustomAttribute(flags) {
        if ((this.state & 4 /* isBound */) === 0) {
            return _lifecycle_task__WEBPACK_IMPORTED_MODULE_2__["LifecycleTask"].done;
        }
        this.state |= 2 /* isUnbinding */;
        flags |= 8192 /* fromUnbind */;
        this.lifecycle.afterUnbind.begin();
        if (this.hooks.hasBeforeUnbind) {
            const ret = this.bindingContext.beforeUnbind(flags);
            if (Object(_lifecycle_task__WEBPACK_IMPORTED_MODULE_2__["hasAsyncWork"])(ret)) {
                return new _lifecycle_task__WEBPACK_IMPORTED_MODULE_2__["ContinuationTask"](ret, this.endUnbind, this, flags);
            }
        }
        this.endUnbind(flags);
        return _lifecycle_task__WEBPACK_IMPORTED_MODULE_2__["LifecycleTask"].done;
    }
    unbindSynthetic(flags) {
        if ((this.state & 4 /* isBound */) === 0) {
            return _lifecycle_task__WEBPACK_IMPORTED_MODULE_2__["LifecycleTask"].done;
        }
        this.state |= 2 /* isUnbinding */;
        flags |= 8192 /* fromUnbind */;
        this.lifecycle.afterUnbind.begin();
        return this.unbindControllers(flags);
    }
    unbindBindings(flags) {
        const { bindings } = this;
        if (bindings !== void 0) {
            for (let i = bindings.length - 1; i >= 0; --i) {
                bindings[i].$unbind(flags);
            }
        }
        this.endUnbind(flags);
    }
    unbindControllers(flags) {
        let tasks = void 0;
        let task;
        const { controllers } = this;
        if (controllers !== void 0) {
            for (let i = controllers.length - 1; i >= 0; --i) {
                task = controllers[i].unbind(flags);
                controllers[i].parent = void 0;
                if (!task.done) {
                    if (tasks === void 0) {
                        tasks = [];
                    }
                    tasks.push(task);
                }
            }
        }
        if (tasks === void 0) {
            this.unbindBindings(flags);
            return _lifecycle_task__WEBPACK_IMPORTED_MODULE_2__["LifecycleTask"].done;
        }
        return new _lifecycle_task__WEBPACK_IMPORTED_MODULE_2__["AggregateContinuationTask"](tasks, this.unbindBindings, this, flags);
    }
    endUnbind(flags) {
        switch (this.vmKind) {
            case 1 /* customAttribute */:
                this.scope = void 0;
                break;
            case 2 /* synthetic */:
                if ((this.state & 256 /* hasLockedScope */) === 0) {
                    this.scope = void 0;
                }
        }
        if (this.hooks.hasAfterUnbind) {
            this.lifecycle.afterUnbind.add(this);
        }
        this.state = (this.state | 6 /* isBoundOrUnbinding */) ^ 6 /* isBoundOrUnbinding */;
        this.lifecycle.afterUnbind.end(flags);
    }
    // #endregion
    // #region attach/detach
    attachCustomElement(flags) {
        flags |= 16384 /* fromAttach */;
        this.state |= 8 /* isAttaching */;
        this.lifecycle.mount.add(this);
        this.lifecycle.afterAttach.begin();
        if (this.hooks.hasBeforeAttach) {
            this.bindingContext.beforeAttach(flags);
        }
        this.attachControllers(flags);
        if (this.hooks.hasAfterAttach) {
            this.lifecycle.afterAttach.add(this);
        }
        this.state = this.state ^ 8 /* isAttaching */ | 32 /* isAttached */;
        this.lifecycle.afterAttach.end(flags);
    }
    attachCustomAttribute(flags) {
        flags |= 16384 /* fromAttach */;
        this.state |= 8 /* isAttaching */;
        this.lifecycle.afterAttach.begin();
        if (this.hooks.hasBeforeAttach) {
            this.bindingContext.beforeAttach(flags);
        }
        if (this.hooks.hasAfterAttach) {
            this.lifecycle.afterAttach.add(this);
        }
        this.state = this.state ^ 8 /* isAttaching */ | 32 /* isAttached */;
        this.lifecycle.afterAttach.end(flags);
    }
    attachSynthetic(flags) {
        if (((this.state & 32 /* isAttached */) > 0 && flags & 33554432 /* reorderNodes */) > 0) {
            this.lifecycle.mount.add(this);
        }
        else {
            flags |= 16384 /* fromAttach */;
            this.state |= 8 /* isAttaching */;
            this.lifecycle.mount.add(this);
            this.lifecycle.afterAttach.begin();
            this.attachControllers(flags);
            this.state = this.state ^ 8 /* isAttaching */ | 32 /* isAttached */;
            this.lifecycle.afterAttach.end(flags);
        }
    }
    detachCustomElement(flags) {
        flags |= 32768 /* fromDetach */;
        this.state |= 16 /* isDetaching */;
        this.lifecycle.afterDetach.begin();
        this.lifecycle.unmount.add(this);
        if (this.hooks.hasBeforeDetach) {
            this.bindingContext.beforeDetach(flags);
        }
        this.detachControllers(flags);
        if (this.hooks.hasAfterDetach) {
            this.lifecycle.afterDetach.add(this);
        }
        this.state = (this.state | 48 /* isAttachedOrDetaching */) ^ 48 /* isAttachedOrDetaching */;
        this.lifecycle.afterDetach.end(flags);
    }
    detachCustomAttribute(flags) {
        flags |= 32768 /* fromDetach */;
        this.state |= 16 /* isDetaching */;
        this.lifecycle.afterDetach.begin();
        if (this.hooks.hasBeforeDetach) {
            this.bindingContext.beforeDetach(flags);
        }
        if (this.hooks.hasAfterDetach) {
            this.lifecycle.afterDetach.add(this);
        }
        this.state = (this.state | 48 /* isAttachedOrDetaching */) ^ 48 /* isAttachedOrDetaching */;
        this.lifecycle.afterDetach.end(flags);
    }
    detachSynthetic(flags) {
        flags |= 32768 /* fromDetach */;
        this.state |= 16 /* isDetaching */;
        this.lifecycle.afterDetach.begin();
        this.lifecycle.unmount.add(this);
        this.detachControllers(flags);
        this.state = (this.state | 48 /* isAttachedOrDetaching */) ^ 48 /* isAttachedOrDetaching */;
        this.lifecycle.afterDetach.end(flags);
    }
    attachControllers(flags) {
        const { controllers } = this;
        if (controllers !== void 0) {
            const { length } = controllers;
            for (let i = 0; i < length; ++i) {
                controllers[i].attach(flags);
            }
        }
    }
    detachControllers(flags) {
        const { controllers } = this;
        if (controllers !== void 0) {
            for (let i = controllers.length - 1; i >= 0; --i) {
                controllers[i].detach(flags);
            }
        }
    }
    // #endregion
    // #region mount/unmount/cache
    mountCustomElement(flags) {
        if ((this.state & 64 /* isMounted */) > 0) {
            return;
        }
        this.state |= 64 /* isMounted */;
        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
        this.projector.project(this.nodes); // non-null is implied by the hook
    }
    mountSynthetic(flags) {
        const nodes = this.nodes; // non null is implied by the hook
        const location = this.location; // non null is implied by the hook
        this.state |= 64 /* isMounted */;
        switch (this.mountStrategy) {
            case 2 /* append */:
                nodes.appendTo(location);
                break;
            default:
                nodes.insertBefore(location);
        }
    }
    unmountCustomElement(flags) {
        if ((this.state & 64 /* isMounted */) === 0) {
            return;
        }
        this.state = (this.state | 64 /* isMounted */) ^ 64 /* isMounted */;
        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
        this.projector.take(this.nodes); // non-null is implied by the hook
    }
    unmountSynthetic(flags) {
        if ((this.state & 64 /* isMounted */) === 0) {
            return false;
        }
        this.state = (this.state | 64 /* isMounted */) ^ 64 /* isMounted */;
        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
        this.nodes.remove(); // non-null is implied by the hook
        this.nodes.unlink();
        if ((this.state & 512 /* canBeCached */) > 0) {
            this.state = (this.state | 512 /* canBeCached */) ^ 512 /* canBeCached */;
            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
            if (this.viewFactory.tryReturnToCache(this)) { // non-null is implied by the hook
                return true;
            }
        }
        return false;
    }
    cacheCustomElement(flags) {
        flags |= 65536 /* fromCache */;
        if (this.hooks.hasCaching) {
            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
            this.bindingContext.caching(flags); // non-null is implied by the hook
        }
    }
    cacheCustomAttribute(flags) {
        flags |= 65536 /* fromCache */;
        if (this.hooks.hasCaching) {
            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
            this.bindingContext.caching(flags); // non-null is implied by the hook
        }
        const { controllers } = this;
        if (controllers !== void 0) {
            const { length } = controllers;
            for (let i = length - 1; i >= 0; --i) {
                controllers[i].cache(flags);
            }
        }
    }
    cacheSynthetic(flags) {
        const { controllers } = this;
        if (controllers !== void 0) {
            const { length } = controllers;
            for (let i = length - 1; i >= 0; --i) {
                controllers[i].cache(flags);
            }
        }
    }
}
function getBindingContext(flags, instance) {
    if (instance.noProxy === true || (flags & 2 /* proxyStrategy */) === 0) {
        return instance;
    }
    return _observation_proxy_observer__WEBPACK_IMPORTED_MODULE_4__["ProxyObserver"].getOrCreate(instance).proxy;
}
function getLookup(instance) {
    let lookup = instance.$observers;
    if (lookup === void 0) {
        Reflect.defineProperty(instance, '$observers', {
            enumerable: false,
            value: lookup = {},
        });
    }
    return lookup;
}
function createObservers(lifecycle, definition, flags, instance) {
    const bindables = definition.bindables;
    const observableNames = Object.getOwnPropertyNames(bindables);
    const length = observableNames.length;
    if (length > 0) {
        let name;
        let bindable;
        if ((flags & 2 /* proxyStrategy */) > 0) {
            for (let i = 0; i < length; ++i) {
                name = observableNames[i];
                bindable = bindables[name];
                new _observation_bindable_observer__WEBPACK_IMPORTED_MODULE_5__["BindableObserver"](lifecycle, flags, _observation_proxy_observer__WEBPACK_IMPORTED_MODULE_4__["ProxyObserver"].getOrCreate(instance).proxy, name, bindable.callback, bindable.set);
            }
        }
        else {
            const observers = getLookup(instance);
            for (let i = 0; i < length; ++i) {
                name = observableNames[i];
                if (observers[name] === void 0) {
                    bindable = bindables[name];
                    observers[name] = new _observation_bindable_observer__WEBPACK_IMPORTED_MODULE_5__["BindableObserver"](lifecycle, flags, instance, name, bindable.callback, bindable.set);
                }
            }
        }
    }
}
function createChildrenObservers(controller, definition, flags, instance) {
    const childrenObservers = definition.childrenObservers;
    const childObserverNames = Object.getOwnPropertyNames(childrenObservers);
    const length = childObserverNames.length;
    if (length > 0) {
        const observers = getLookup(instance);
        let name;
        for (let i = 0; i < length; ++i) {
            name = childObserverNames[i];
            if (observers[name] == void 0) {
                const childrenDescription = childrenObservers[name];
                observers[name] = new _children__WEBPACK_IMPORTED_MODULE_9__["ChildrenObserver"](controller, instance, flags, name, childrenDescription.callback, childrenDescription.query, childrenDescription.filter, childrenDescription.map, childrenDescription.options);
            }
        }
    }
}
//# sourceMappingURL=controller.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esnext/templating/render-context.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esnext/templating/render-context.js ***!
  \********************************************************************************/
/*! exports provided: isRenderContext, getRenderContext, RenderContext, ViewFactoryProvider */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isRenderContext", function() { return isRenderContext; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getRenderContext", function() { return getRenderContext; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RenderContext", function() { return RenderContext; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ViewFactoryProvider", function() { return ViewFactoryProvider; });
/* harmony import */ var _resources_custom_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../resources/custom-element */ "./node_modules/@aurelia/runtime/dist/esnext/resources/custom-element.js");
/* harmony import */ var _definitions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../definitions */ "./node_modules/@aurelia/runtime/dist/esnext/definitions.js");
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _lifecycle__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../lifecycle */ "./node_modules/@aurelia/runtime/dist/esnext/lifecycle.js");
/* harmony import */ var _dom__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../dom */ "./node_modules/@aurelia/runtime/dist/esnext/dom.js");
/* harmony import */ var _renderer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../renderer */ "./node_modules/@aurelia/runtime/dist/esnext/renderer.js");
/* harmony import */ var _view__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./view */ "./node_modules/@aurelia/runtime/dist/esnext/templating/view.js");







const definitionContainerLookup = new WeakMap();
const definitionContainerPartsLookup = new WeakMap();
const fragmentCache = new WeakMap();
function isRenderContext(value) {
    return value instanceof RenderContext;
}
function getRenderContext(partialDefinition, parentContainer, parts) {
    const definition = _resources_custom_element__WEBPACK_IMPORTED_MODULE_0__["CustomElementDefinition"].getOrCreate(partialDefinition);
    if (isRenderContext(parentContainer)) {
        parts = Object(_definitions__WEBPACK_IMPORTED_MODULE_1__["mergeParts"])(parentContainer.parts, parts);
    }
    // injectable completely prevents caching, ensuring that each instance gets a new render context
    if (definition.injectable !== null) {
        return new RenderContext(definition, parentContainer, parts);
    }
    if (parts === void 0) {
        let containerLookup = definitionContainerLookup.get(definition);
        if (containerLookup === void 0) {
            definitionContainerLookup.set(definition, containerLookup = new WeakMap());
        }
        let context = containerLookup.get(parentContainer);
        if (context === void 0) {
            containerLookup.set(parentContainer, context = new RenderContext(definition, parentContainer, parts));
        }
        return context;
    }
    let containerPartsLookup = definitionContainerPartsLookup.get(definition);
    if (containerPartsLookup === void 0) {
        definitionContainerPartsLookup.set(definition, containerPartsLookup = new WeakMap());
    }
    let partsLookup = containerPartsLookup.get(parentContainer);
    if (partsLookup === void 0) {
        containerPartsLookup.set(parentContainer, partsLookup = new WeakMap());
    }
    let context = partsLookup.get(parts);
    if (context === void 0) {
        partsLookup.set(parts, context = new RenderContext(definition, parentContainer, parts));
    }
    return context;
}
class RenderContext {
    constructor(definition, parentContainer, parts) {
        this.definition = definition;
        this.parentContainer = parentContainer;
        this.parts = parts;
        this.viewModelProvider = void 0;
        this.fragment = null;
        this.factory = void 0;
        this.isCompiled = false;
        this.compiledDefinition = (void 0);
        const container = this.container = parentContainer.createChild();
        this.renderer = container.get(_renderer__WEBPACK_IMPORTED_MODULE_5__["IRenderer"]);
        container.registerResolver(_lifecycle__WEBPACK_IMPORTED_MODULE_3__["IViewFactory"], this.factoryProvider = new ViewFactoryProvider(), true);
        container.registerResolver(_lifecycle__WEBPACK_IMPORTED_MODULE_3__["IController"], this.parentControllerProvider = new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__["InstanceProvider"](), true);
        container.registerResolver(_definitions__WEBPACK_IMPORTED_MODULE_1__["ITargetedInstruction"], this.instructionProvider = new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__["InstanceProvider"](), true);
        container.registerResolver(_dom__WEBPACK_IMPORTED_MODULE_4__["IRenderLocation"], this.renderLocationProvider = new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__["InstanceProvider"](), true);
        (this.dom = container.get(_dom__WEBPACK_IMPORTED_MODULE_4__["IDOM"])).registerElementResolver(container, this.elementProvider = new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__["InstanceProvider"]());
        container.register(...definition.dependencies);
    }
    // #region IServiceLocator api
    has(key, searchAncestors) {
        return this.container.has(key, searchAncestors);
    }
    get(key) {
        return this.container.get(key);
    }
    getAll(key) {
        return this.container.getAll(key);
    }
    // #endregion
    // #region IContainer api
    register(...params) {
        return this.container.register(...params);
    }
    registerResolver(key, resolver) {
        return this.container.registerResolver(key, resolver);
    }
    registerTransformer(key, transformer) {
        return this.container.registerTransformer(key, transformer);
    }
    getResolver(key, autoRegister) {
        return this.container.getResolver(key, autoRegister);
    }
    getFactory(key) {
        return this.container.getFactory(key);
    }
    createChild() {
        return this.container.createChild();
    }
    disposeResolvers() {
        this.container.disposeResolvers();
    }
    // #endregion
    // #region IRenderContext api
    compile() {
        let compiledDefinition;
        if (this.isCompiled) {
            return this;
        }
        this.isCompiled = true;
        const definition = this.definition;
        if (definition.needsCompile) {
            const container = this.container;
            const compiler = container.get(_renderer__WEBPACK_IMPORTED_MODULE_5__["ITemplateCompiler"]);
            compiledDefinition = this.compiledDefinition = compiler.compile(definition, container);
        }
        else {
            compiledDefinition = this.compiledDefinition = definition;
        }
        // Support Recursive Components by adding self to own context
        compiledDefinition.register(this);
        if (fragmentCache.has(compiledDefinition)) {
            this.fragment = fragmentCache.get(compiledDefinition);
        }
        else {
            const template = compiledDefinition.template;
            if (template === null) {
                fragmentCache.set(compiledDefinition, null);
            }
            else {
                fragmentCache.set(compiledDefinition, this.fragment = this.dom.createDocumentFragment(template));
            }
        }
        return this;
    }
    getViewFactory(name) {
        let factory = this.factory;
        if (factory === void 0) {
            if (name === void 0) {
                name = this.definition.name;
            }
            const lifecycle = this.parentContainer.get(_lifecycle__WEBPACK_IMPORTED_MODULE_3__["ILifecycle"]);
            factory = this.factory = new _view__WEBPACK_IMPORTED_MODULE_6__["ViewFactory"](name, this, lifecycle, this.parts);
        }
        return factory;
    }
    beginChildComponentOperation(instance) {
        const definition = this.definition;
        if (definition.injectable !== null) {
            if (this.viewModelProvider === void 0) {
                this.container.registerResolver(definition.injectable, this.viewModelProvider = new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__["InstanceProvider"]());
            }
            this.viewModelProvider.prepare(instance);
        }
        return this;
    }
    // #endregion
    // #region ICompiledRenderContext api
    createNodes() {
        return this.dom.createNodeSequence(this.fragment);
    }
    // TODO: split up into 2 methods? getComponentFactory + getSyntheticFactory or something
    getComponentFactory(parentController, host, instruction, viewFactory, location) {
        if (parentController !== void 0) {
            this.parentControllerProvider.prepare(parentController);
        }
        if (host !== void 0) {
            // TODO: fix provider input type, Key is probably not a good constraint
            this.elementProvider.prepare(host);
        }
        if (instruction !== void 0) {
            this.instructionProvider.prepare(instruction);
        }
        if (location !== void 0) {
            this.renderLocationProvider.prepare(location);
        }
        if (viewFactory !== void 0) {
            this.factoryProvider.prepare(viewFactory);
        }
        return this;
    }
    // #endregion
    // #region IComponentFactory api
    createComponent(resourceKey) {
        return this.container.get(resourceKey);
    }
    render(flags, controller, targets, templateDefinition, host, parts) {
        this.renderer.render(flags, this, controller, targets, templateDefinition, host, parts);
    }
    renderInstructions(flags, instructions, controller, target, parts) {
        this.renderer.renderInstructions(flags, this, instructions, controller, target, parts);
    }
    dispose() {
        this.elementProvider.dispose();
        this.container.disposeResolvers();
    }
}
/** @internal */
class ViewFactoryProvider {
    constructor() {
        this.factory = null;
    }
    prepare(factory) {
        this.factory = factory;
    }
    resolve(handler, requestor) {
        const factory = this.factory;
        if (factory === null) { // unmet precondition: call prepare
            throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__["Reporter"].error(50); // TODO: organize error codes
        }
        if (typeof factory.name !== 'string' || factory.name.length === 0) { // unmet invariant: factory must have a name
            throw _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__["Reporter"].error(51); // TODO: organize error codes
        }
        return factory.resolve(requestor);
    }
    dispose() {
        this.factory = null;
    }
}
//# sourceMappingURL=render-context.js.map

/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esnext/templating/view.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esnext/templating/view.js ***!
  \**********************************************************************/
/*! exports provided: ViewFactory, Views, view, IViewLocator, ViewLocator */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ViewFactory", function() { return ViewFactory; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Views", function() { return Views; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "view", function() { return view; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IViewLocator", function() { return IViewLocator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ViewLocator", function() { return ViewLocator; });
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _observation_binding_context__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../observation/binding-context */ "./node_modules/@aurelia/runtime/dist/esnext/observation/binding-context.js");
/* harmony import */ var _resources_custom_element__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../resources/custom-element */ "./node_modules/@aurelia/runtime/dist/esnext/resources/custom-element.js");
/* harmony import */ var _controller__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./controller */ "./node_modules/@aurelia/runtime/dist/esnext/templating/controller.js");
/* harmony import */ var _definitions__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../definitions */ "./node_modules/@aurelia/runtime/dist/esnext/definitions.js");
/* harmony import */ var _render_context__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./render-context */ "./node_modules/@aurelia/runtime/dist/esnext/templating/render-context.js");






class ViewFactory {
    constructor(name, context, lifecycle, parts) {
        this.name = name;
        this.context = context;
        this.lifecycle = lifecycle;
        this.parts = parts;
        this.isCaching = false;
        this.cache = null;
        this.cacheSize = -1;
    }
    setCacheSize(size, doNotOverrideIfAlreadySet) {
        if (size) {
            if (size === '*') {
                size = ViewFactory.maxCacheSize;
            }
            else if (typeof size === 'string') {
                size = parseInt(size, 10);
            }
            if (this.cacheSize === -1 || !doNotOverrideIfAlreadySet) {
                this.cacheSize = size;
            }
        }
        if (this.cacheSize > 0) {
            this.cache = [];
        }
        else {
            this.cache = null;
        }
        this.isCaching = this.cacheSize > 0;
    }
    canReturnToCache(controller) {
        return this.cache != null && this.cache.length < this.cacheSize;
    }
    tryReturnToCache(controller) {
        if (this.canReturnToCache(controller)) {
            controller.cache(0 /* none */);
            this.cache.push(controller);
            return true;
        }
        return false;
    }
    create(flags) {
        const cache = this.cache;
        let controller;
        if (cache != null && cache.length > 0) {
            controller = cache.pop();
            return controller;
        }
        controller = _controller__WEBPACK_IMPORTED_MODULE_3__["Controller"].forSyntheticView(this, this.lifecycle, this.context, flags);
        return controller;
    }
    resolve(requestor, parts) {
        parts = Object(_definitions__WEBPACK_IMPORTED_MODULE_4__["mergeParts"])(this.parts, parts);
        if (parts === void 0) {
            return this;
        }
        const part = parts[this.name];
        if (part === void 0) {
            return this;
        }
        return Object(_render_context__WEBPACK_IMPORTED_MODULE_5__["getRenderContext"])(part, requestor, parts).getViewFactory(this.name);
    }
}
ViewFactory.maxCacheSize = 0xFFFF;
const seenViews = new WeakSet();
function notYetSeen($view) {
    return !seenViews.has($view);
}
function toCustomElementDefinition($view) {
    seenViews.add($view);
    return _resources_custom_element__WEBPACK_IMPORTED_MODULE_2__["CustomElementDefinition"].create($view);
}
const Views = {
    name: _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Protocol"].resource.keyFor('views'),
    has(value) {
        return typeof value === 'function' && (_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Metadata"].hasOwn(Views.name, value) || '$views' in value);
    },
    get(value) {
        if (typeof value === 'function' && '$views' in value) {
            // TODO: a `get` operation with side effects is not a good thing. Should refactor this to a proper resource kind.
            const $views = value.$views;
            const definitions = $views.filter(notYetSeen).map(toCustomElementDefinition);
            for (const def of definitions) {
                Views.add(value, def);
            }
        }
        let views = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Metadata"].getOwn(Views.name, value);
        if (views === void 0) {
            _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Metadata"].define(Views.name, views = [], value);
        }
        return views;
    },
    add(Type, partialDefinition) {
        const definition = _resources_custom_element__WEBPACK_IMPORTED_MODULE_2__["CustomElementDefinition"].create(partialDefinition);
        let views = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Metadata"].getOwn(Views.name, Type);
        if (views === void 0) {
            _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Metadata"].define(Views.name, views = [definition], Type);
        }
        else {
            views.push(definition);
        }
        return views;
    },
};
function view(v) {
    return function (target) {
        Views.add(target, v);
    };
}
const IViewLocator = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["DI"].createInterface('IViewLocator')
    .noDefault();
class ViewLocator {
    constructor() {
        this.modelInstanceToBoundComponent = new WeakMap();
        this.modelTypeToUnboundComponent = new Map();
    }
    static register(container) {
        return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["Registration"].singleton(IViewLocator, this).register(container);
    }
    getViewComponentForObject(object, viewNameOrSelector) {
        if (object) {
            const availableViews = Views.has(object.constructor) ? Views.get(object.constructor) : [];
            const resolvedViewName = typeof viewNameOrSelector === 'function'
                ? viewNameOrSelector(object, availableViews)
                : this.getViewName(availableViews, viewNameOrSelector);
            return this.getOrCreateBoundComponent(object, availableViews, resolvedViewName);
        }
        return null;
    }
    getOrCreateBoundComponent(object, availableViews, resolvedViewName) {
        let lookup = this.modelInstanceToBoundComponent.get(object);
        let BoundComponent;
        if (lookup === void 0) {
            lookup = {};
            this.modelInstanceToBoundComponent.set(object, lookup);
        }
        else {
            BoundComponent = lookup[resolvedViewName];
        }
        if (BoundComponent === void 0) {
            const UnboundComponent = this.getOrCreateUnboundComponent(object, availableViews, resolvedViewName);
            BoundComponent = _resources_custom_element__WEBPACK_IMPORTED_MODULE_2__["CustomElement"].define(_resources_custom_element__WEBPACK_IMPORTED_MODULE_2__["CustomElement"].getDefinition(UnboundComponent), class extends UnboundComponent {
                constructor() {
                    super(object);
                }
            });
            lookup[resolvedViewName] = BoundComponent;
        }
        return BoundComponent;
    }
    getOrCreateUnboundComponent(object, availableViews, resolvedViewName) {
        let lookup = this.modelTypeToUnboundComponent.get(object.constructor);
        let UnboundComponent;
        if (lookup === void 0) {
            lookup = {};
            this.modelTypeToUnboundComponent.set(object.constructor, lookup);
        }
        else {
            UnboundComponent = lookup[resolvedViewName];
        }
        if (UnboundComponent === void 0) {
            UnboundComponent = _resources_custom_element__WEBPACK_IMPORTED_MODULE_2__["CustomElement"].define(this.getView(availableViews, resolvedViewName), class {
                constructor(viewModel) {
                    this.viewModel = viewModel;
                }
                create(controller, parentContainer, definition, parts) {
                    const vm = this.viewModel;
                    controller.scope = _observation_binding_context__WEBPACK_IMPORTED_MODULE_1__["Scope"].fromParent(controller.flags, controller.scope, vm);
                    if (vm.create !== void 0) {
                        return vm.create(controller, parentContainer, definition, parts);
                    }
                }
            });
            const proto = UnboundComponent.prototype;
            if ('beforeCompile' in object) {
                proto.beforeCompile = function beforeCompile(controller) {
                    this.viewModel.beforeCompile(controller);
                };
            }
            if ('afterCompile' in object) {
                proto.afterCompile = function afterCompile(controller) {
                    this.viewModel.afterCompile(controller);
                };
            }
            if ('afterCompileChildren' in object) {
                proto.afterCompileChildren = function afterCompileChildren(controller) {
                    this.viewModel.afterCompileChildren(controller);
                };
            }
            if ('beforeBind' in object) {
                proto.beforeBind = function beforeBind(flags) {
                    return this.viewModel.beforeBind(flags);
                };
            }
            if ('afterBind' in object) {
                proto.afterBind = function afterBind(flags) {
                    this.viewModel.afterBind(flags);
                };
            }
            if ('beforeUnbind' in object) {
                proto.beforeUnbind = function beforeUnbind(flags) {
                    return this.viewModel.beforeUnbind(flags);
                };
            }
            if ('afterUnbind' in object) {
                proto.afterUnbind = function afterUnbind(flags) {
                    this.viewModel.afterUnbind(flags);
                };
            }
            if ('beforeAttach' in object) {
                proto.beforeAttach = function beforeAttach(flags) {
                    this.viewModel.beforeAttach(flags);
                };
            }
            if ('afterAttach' in object) {
                proto.afterAttach = function afterAttach(flags) {
                    this.viewModel.afterAttach(flags);
                };
            }
            if ('beforeDetach' in object) {
                proto.beforeDetach = function beforeDetach(flags) {
                    this.viewModel.beforeDetach(flags);
                };
            }
            if ('afterDetach' in object) {
                proto.afterDetach = function afterDetach(flags) {
                    this.viewModel.afterDetach(flags);
                };
            }
            if ('caching' in object) {
                proto.caching = function caching(flags) {
                    this.viewModel.caching(flags);
                };
            }
            lookup[resolvedViewName] = UnboundComponent;
        }
        return UnboundComponent;
    }
    getViewName(views, requestedName) {
        if (requestedName) {
            return requestedName;
        }
        if (views.length === 1) {
            return views[0].name;
        }
        return 'default-view';
    }
    getView(views, name) {
        const v = views.find(x => x.name === name);
        if (v === void 0) {
            // TODO: Use Reporter
            throw new Error(`Could not find view: ${name}`);
        }
        return v;
    }
}
//# sourceMappingURL=view.js.map

/***/ }),

/***/ "./node_modules/@aurelia/scheduler-dom/dist/esnext/index.js":
/*!******************************************************************!*\
  !*** ./node_modules/@aurelia/scheduler-dom/dist/esnext/index.js ***!
  \******************************************************************/
/*! exports provided: createDOMScheduler */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createDOMScheduler", function() { return createDOMScheduler; });
/* harmony import */ var _aurelia_scheduler__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/scheduler */ "./node_modules/@aurelia/scheduler/dist/esnext/index.js");
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");


function createMicroTaskFlushRequestorFactory() {
    return {
        create(taskQueue) {
            let requested = false;
            let canceled = false;
            const p = Promise.resolve();
            function flush() {
                if (canceled) {
                    canceled = false;
                }
                else {
                    requested = false;
                    taskQueue.flush();
                }
            }
            return {
                request() {
                    if (!requested) {
                        canceled = false;
                        requested = true;
                        // eslint-disable-next-line @typescript-eslint/no-floating-promises
                        p.then(flush);
                    }
                },
                cancel() {
                    canceled = true;
                    requested = false;
                },
            };
        },
    };
}
function createSetTimeoutFlushRequestorFactory(w) {
    return {
        create(taskQueue) {
            let handle = -1;
            function flush() {
                if (handle > -1) {
                    handle = -1;
                    taskQueue.flush();
                }
            }
            return {
                cancel() {
                    if (handle > -1) {
                        w.clearTimeout(handle);
                        handle = -1;
                    }
                },
                request() {
                    if (handle === -1) {
                        handle = w.setTimeout(flush, 0);
                    }
                },
            };
        },
    };
}
function createRequestAnimationFrameFlushRequestor(w) {
    return {
        create(taskQueue) {
            let handle = -1;
            function flush() {
                if (handle > -1) {
                    handle = -1;
                    taskQueue.flush();
                }
            }
            return {
                cancel() {
                    if (handle > -1) {
                        w.cancelAnimationFrame(handle);
                        handle = -1;
                    }
                },
                request() {
                    if (handle === -1) {
                        handle = w.requestAnimationFrame(flush);
                    }
                },
            };
        },
    };
}
function createPostRequestAnimationFrameFlushRequestor(w) {
    return {
        create(taskQueue) {
            let rafHandle = -1;
            let timeoutHandle = -1;
            function flush() {
                if (timeoutHandle > -1) {
                    timeoutHandle = -1;
                    taskQueue.flush();
                }
            }
            function queueFlush() {
                if (rafHandle > -1) {
                    rafHandle = -1;
                    if (timeoutHandle === -1) {
                        timeoutHandle = w.setTimeout(flush, 0);
                    }
                }
            }
            return {
                cancel() {
                    if (rafHandle > -1) {
                        w.cancelAnimationFrame(rafHandle);
                        rafHandle = -1;
                    }
                    if (timeoutHandle > -1) {
                        w.clearTimeout(timeoutHandle);
                        timeoutHandle = -1;
                    }
                },
                request() {
                    if (rafHandle === -1) {
                        rafHandle = w.requestAnimationFrame(queueFlush);
                    }
                },
            };
        },
    };
}
function createRequestIdleCallbackFlushRequestor(w) {
    return {
        create(taskQueue) {
            let handle = -1;
            function flush() {
                if (handle > -1) {
                    handle = -1;
                    taskQueue.flush();
                }
            }
            if (typeof w.requestIdleCallback === 'function' &&
                Object(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["isNativeFunction"])(w.requestIdleCallback)) {
                return {
                    cancel() {
                        if (handle > -1) {
                            // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion
                            w.cancelIdleCallback(handle);
                            handle = -1;
                        }
                    },
                    request() {
                        if (handle === -1) {
                            // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion
                            handle = w.requestIdleCallback(flush);
                        }
                    },
                };
            }
            else {
                return {
                    cancel() {
                        if (handle > -1) {
                            w.clearTimeout(handle);
                            handle = -1;
                        }
                    },
                    request() {
                        if (handle === -1) {
                            // Instead of trying anything fancy with event handler debouncers (we could do that if there was a request for it),
                            // we just wait 45ms which is approximately the interval in a native idleCallback loop in chrome, to at least make it look
                            // the same from a timing perspective
                            handle = w.setTimeout(flush, 45);
                        }
                    },
                };
            }
        },
    };
}
function createDOMScheduler(container, w) {
    let scheduler = _aurelia_scheduler__WEBPACK_IMPORTED_MODULE_0__["Scheduler"].get(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["PLATFORM"].global);
    if (scheduler === void 0) {
        _aurelia_scheduler__WEBPACK_IMPORTED_MODULE_0__["Scheduler"].set(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["PLATFORM"].global, scheduler = new _aurelia_scheduler__WEBPACK_IMPORTED_MODULE_0__["Scheduler"](container.get(_aurelia_scheduler__WEBPACK_IMPORTED_MODULE_0__["Now"]), createMicroTaskFlushRequestorFactory(), createRequestAnimationFrameFlushRequestor(w), createSetTimeoutFlushRequestorFactory(w), createPostRequestAnimationFrameFlushRequestor(w), createRequestIdleCallbackFlushRequestor(w)));
    }
    return scheduler;
}
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./node_modules/@aurelia/scheduler/dist/esnext/index.js":
/*!**************************************************************!*\
  !*** ./node_modules/@aurelia/scheduler/dist/esnext/index.js ***!
  \**************************************************************/
/*! exports provided: Now, IScheduler, Scheduler, TaskQueue, Task, TaskAbortError, createExposedPromise, TaskQueuePriority */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _now__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./now */ "./node_modules/@aurelia/scheduler/dist/esnext/now.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Now", function() { return _now__WEBPACK_IMPORTED_MODULE_0__["Now"]; });

/* harmony import */ var _scheduler__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./scheduler */ "./node_modules/@aurelia/scheduler/dist/esnext/scheduler.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IScheduler", function() { return _scheduler__WEBPACK_IMPORTED_MODULE_1__["IScheduler"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Scheduler", function() { return _scheduler__WEBPACK_IMPORTED_MODULE_1__["Scheduler"]; });

/* harmony import */ var _task_queue__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./task-queue */ "./node_modules/@aurelia/scheduler/dist/esnext/task-queue.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TaskQueue", function() { return _task_queue__WEBPACK_IMPORTED_MODULE_2__["TaskQueue"]; });

/* harmony import */ var _task__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./task */ "./node_modules/@aurelia/scheduler/dist/esnext/task.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Task", function() { return _task__WEBPACK_IMPORTED_MODULE_3__["Task"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TaskAbortError", function() { return _task__WEBPACK_IMPORTED_MODULE_3__["TaskAbortError"]; });

/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./types */ "./node_modules/@aurelia/scheduler/dist/esnext/types.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createExposedPromise", function() { return _types__WEBPACK_IMPORTED_MODULE_4__["createExposedPromise"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TaskQueuePriority", function() { return _types__WEBPACK_IMPORTED_MODULE_4__["TaskQueuePriority"]; });






//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./node_modules/@aurelia/scheduler/dist/esnext/now.js":
/*!************************************************************!*\
  !*** ./node_modules/@aurelia/scheduler/dist/esnext/now.js ***!
  \************************************************************/
/*! exports provided: Now */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Now", function() { return Now; });
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");

const defaultNow = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["PLATFORM"].now.bind(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["PLATFORM"]);
const Now = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["DI"].createInterface('Now').withDefault(x => x.instance(defaultNow));
//# sourceMappingURL=now.js.map

/***/ }),

/***/ "./node_modules/@aurelia/scheduler/dist/esnext/scheduler.js":
/*!******************************************************************!*\
  !*** ./node_modules/@aurelia/scheduler/dist/esnext/scheduler.js ***!
  \******************************************************************/
/*! exports provided: IScheduler, Scheduler */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IScheduler", function() { return IScheduler; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Scheduler", function() { return Scheduler; });
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./types */ "./node_modules/@aurelia/scheduler/dist/esnext/types.js");
/* harmony import */ var _task_queue__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./task-queue */ "./node_modules/@aurelia/scheduler/dist/esnext/task-queue.js");



const store = new WeakMap();
const IScheduler = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__["DI"].createInterface('IScheduler').noDefault();
class Scheduler {
    constructor(now, microtaskFactory, renderFactory, macroTaskFactory, postRenderFactory, idleFactory) {
        this.taskQueues = [
            this.microtask = (new _task_queue__WEBPACK_IMPORTED_MODULE_2__["TaskQueue"](now, 0 /* microTask */, this, microtaskFactory)),
            this.render = (new _task_queue__WEBPACK_IMPORTED_MODULE_2__["TaskQueue"](now, 1 /* render */, this, renderFactory)),
            this.macroTask = (new _task_queue__WEBPACK_IMPORTED_MODULE_2__["TaskQueue"](now, 2 /* macroTask */, this, macroTaskFactory)),
            this.postRender = (new _task_queue__WEBPACK_IMPORTED_MODULE_2__["TaskQueue"](now, 3 /* postRender */, this, postRenderFactory)),
            this.idle = (new _task_queue__WEBPACK_IMPORTED_MODULE_2__["TaskQueue"](now, 4 /* idle */, this, idleFactory)),
        ];
        this.yieldMicroTask = this.yieldMicroTask.bind(this);
        this.yieldRenderTask = this.yieldRenderTask.bind(this);
        this.yieldMacroTask = this.yieldMacroTask.bind(this);
        this.yieldPostRenderTask = this.yieldPostRenderTask.bind(this);
        this.yieldIdleTask = this.yieldIdleTask.bind(this);
        this.yieldAll = this.yieldAll.bind(this);
    }
    static get(key) {
        return store.get(key);
    }
    static set(key, instance) {
        store.set(key, instance);
    }
    getTaskQueue(priority) {
        return this.taskQueues[priority];
    }
    yield(priority) {
        return this.taskQueues[priority].yield();
    }
    queueTask(callback, opts) {
        const { delay, preempt, priority, persistent, reusable } = { ..._types__WEBPACK_IMPORTED_MODULE_1__["defaultQueueTaskOptions"], ...opts };
        return this.taskQueues[priority].queueTask(callback, { delay, preempt, persistent, reusable });
    }
    getMicroTaskQueue() {
        return this.microtask;
    }
    getRenderTaskQueue() {
        return this.render;
    }
    getMacroTaskQueue() {
        return this.macroTask;
    }
    getPostRenderTaskQueue() {
        return this.postRender;
    }
    getIdleTaskQueue() {
        return this.idle;
    }
    yieldMicroTask() {
        return this.microtask.yield();
    }
    yieldRenderTask() {
        return this.render.yield();
    }
    yieldMacroTask() {
        return this.macroTask.yield();
    }
    yieldPostRenderTask() {
        return this.postRender.yield();
    }
    yieldIdleTask() {
        return this.idle.yield();
    }
    async yieldAll(repeat = 1) {
        while (repeat-- > 0) {
            await this.yieldIdleTask();
            await this.yieldPostRenderTask();
            await this.yieldMacroTask();
            await this.yieldRenderTask();
            await this.yieldMicroTask();
        }
    }
    queueMicroTask(callback, opts) {
        return this.microtask.queueTask(callback, opts);
    }
    queueRenderTask(callback, opts) {
        return this.render.queueTask(callback, opts);
    }
    queueMacroTask(callback, opts) {
        return this.macroTask.queueTask(callback, opts);
    }
    queuePostRenderTask(callback, opts) {
        return this.postRender.queueTask(callback, opts);
    }
    queueIdleTask(callback, opts) {
        return this.idle.queueTask(callback, opts);
    }
}
//# sourceMappingURL=scheduler.js.map

/***/ }),

/***/ "./node_modules/@aurelia/scheduler/dist/esnext/task-queue.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@aurelia/scheduler/dist/esnext/task-queue.js ***!
  \*******************************************************************/
/*! exports provided: TaskQueue */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaskQueue", function() { return TaskQueue; });
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./types */ "./node_modules/@aurelia/scheduler/dist/esnext/types.js");
/* harmony import */ var _task__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./task */ "./node_modules/@aurelia/scheduler/dist/esnext/task.js");


class TaskQueue {
    constructor(now, priority, scheduler, flushRequestorFactory) {
        this.now = now;
        this.priority = priority;
        this.scheduler = scheduler;
        this.processingSize = 0;
        this.processingHead = void 0;
        this.processingTail = void 0;
        this.pendingSize = 0;
        this.pendingHead = void 0;
        this.pendingTail = void 0;
        this.delayedSize = 0;
        this.delayedHead = void 0;
        this.delayedTail = void 0;
        this.flushRequested = false;
        this.yieldPromise = void 0;
        this.taskPool = [];
        this.taskPoolSize = 0;
        this.lastRequest = 0;
        this.microTaskRequestFlushTask = null;
        this.flushRequestor = flushRequestorFactory.create(this);
        this.requestFlush = this.requestFlush.bind(this);
    }
    get isEmpty() {
        return this.processingSize === 0 && this.pendingSize === 0 && this.delayedSize === 0;
    }
    flush() {
        if (this.microTaskRequestFlushTask !== null) {
            this.microTaskRequestFlushTask.cancel();
            this.microTaskRequestFlushTask = null;
        }
        this.flushRequested = false;
        if (this.pendingSize > 0) {
            this.movePendingToProcessing();
        }
        if (this.delayedSize > 0) {
            this.moveDelayedToProcessing();
        }
        while (this.processingSize > 0) {
            this.processingHead.run();
        }
        if (this.pendingSize > 0) {
            this.movePendingToProcessing();
        }
        if (this.delayedSize > 0) {
            this.moveDelayedToProcessing();
        }
        if (this.processingSize > 0) {
            this.requestFlush();
        }
        else if (this.delayedSize > 0) {
            if (this.priority <= 0 /* microTask */) {
                // MicroTasks are not clamped so we have to clamp them with setTimeout or they'll block forever
                this.microTaskRequestFlushTask = this.scheduler.getTaskQueue(2 /* macroTask */).queueTask(this.requestFlush);
            }
            else {
                // Otherwise just let this queue handle itself
                this.requestFlush();
            }
        }
        if (this.yieldPromise !== void 0) {
            let noMoreFiniteWork = true;
            let cur = this.processingHead;
            while (cur !== void 0) {
                if (!cur.persistent) {
                    noMoreFiniteWork = false;
                    break;
                }
                cur = cur.next;
            }
            if (noMoreFiniteWork) {
                cur = this.pendingHead;
                while (cur !== void 0) {
                    if (!cur.persistent) {
                        noMoreFiniteWork = false;
                        break;
                    }
                    cur = cur.next;
                }
            }
            if (noMoreFiniteWork) {
                cur = this.delayedHead;
                while (cur !== void 0) {
                    if (!cur.persistent) {
                        noMoreFiniteWork = false;
                        break;
                    }
                    cur = cur.next;
                }
            }
            if (noMoreFiniteWork) {
                const p = this.yieldPromise;
                this.yieldPromise = void 0;
                p.resolve();
            }
        }
    }
    cancel() {
        if (this.microTaskRequestFlushTask !== null) {
            this.microTaskRequestFlushTask.cancel();
            this.microTaskRequestFlushTask = null;
        }
        this.flushRequestor.cancel();
        this.flushRequested = false;
    }
    async yield() {
        if (this.processingSize > 0 || this.pendingSize > 0 || this.delayedSize > 0) {
            if (this.yieldPromise === void 0) {
                this.yieldPromise = Object(_types__WEBPACK_IMPORTED_MODULE_0__["createExposedPromise"])();
            }
            await this.yieldPromise;
        }
    }
    queueTask(callback, opts) {
        const { delay, preempt, persistent, reusable } = { ..._types__WEBPACK_IMPORTED_MODULE_0__["defaultQueueTaskOptions"], ...opts };
        if (preempt) {
            if (delay > 0) {
                throw new Error(`Invalid arguments: preempt cannot be combined with a greater-than-zero delay`);
            }
            if (persistent) {
                throw new Error(`Invalid arguments: preempt cannot be combined with persistent`);
            }
        }
        if (persistent && this.priority === 0 /* microTask */) {
            throw new Error(`Invalid arguments: cannot queue persistent tasks on the micro task queue`);
        }
        if (this.processingSize === 0) {
            this.requestFlush();
        }
        const time = this.now();
        let task;
        if (reusable) {
            const taskPool = this.taskPool;
            const index = this.taskPoolSize - 1;
            if (index >= 0) {
                task = taskPool[index];
                taskPool[index] = (void 0);
                this.taskPoolSize = index;
                task.reuse(time, delay, preempt, persistent, callback);
            }
            else {
                task = new _task__WEBPACK_IMPORTED_MODULE_1__["Task"](this, time, time + delay, preempt, persistent, reusable, callback);
            }
        }
        else {
            task = new _task__WEBPACK_IMPORTED_MODULE_1__["Task"](this, time, time + delay, preempt, persistent, reusable, callback);
        }
        if (preempt) {
            if (this.processingSize++ === 0) {
                this.processingHead = this.processingTail = task;
            }
            else {
                this.processingTail = (task.prev = this.processingTail).next = task;
            }
        }
        else if (delay === 0) {
            if (this.pendingSize++ === 0) {
                this.pendingHead = this.pendingTail = task;
            }
            else {
                this.pendingTail = (task.prev = this.pendingTail).next = task;
            }
        }
        else {
            if (this.delayedSize++ === 0) {
                this.delayedHead = this.delayedTail = task;
            }
            else {
                this.delayedTail = (task.prev = this.delayedTail).next = task;
            }
        }
        return task;
    }
    take(task) {
        if (task.status !== 'pending') {
            throw new Error('Can only take pending tasks.');
        }
        if (this.processingSize === 0) {
            this.requestFlush();
        }
        task.taskQueue.remove(task);
        if (task.preempt) {
            this.addToProcessing(task);
        }
        else if (task.queueTime <= this.now()) {
            this.addToPending(task);
        }
        else {
            this.addToDelayed(task);
        }
    }
    remove(task) {
        if (task.preempt) {
            // Fast path - preempt task can only ever end up in the processing queue
            this.removeFromProcessing(task);
            return;
        }
        if (task.queueTime > this.now()) {
            // Fast path - task with queueTime in the future can only ever be in the delayed queue
            this.removeFromDelayed(task);
            return;
        }
        // Scan everything (we can make this faster by using the queueTime property, but this is good enough for now)
        let cur = this.processingHead;
        while (cur !== void 0) {
            if (cur === task) {
                this.removeFromProcessing(task);
                return;
            }
            cur = cur.next;
        }
        cur = this.pendingHead;
        while (cur !== void 0) {
            if (cur === task) {
                this.removeFromPending(task);
                return;
            }
            cur = cur.next;
        }
        cur = this.delayedHead;
        while (cur !== void 0) {
            if (cur === task) {
                this.removeFromDelayed(task);
                return;
            }
            cur = cur.next;
        }
        throw new Error(`Task #${task.id} could not be found`);
    }
    returnToPool(task) {
        this.taskPool[this.taskPoolSize++] = task;
    }
    resetPersistentTask(task) {
        task.reset(this.now());
        if (task.createdTime === task.queueTime) {
            if (this.pendingSize++ === 0) {
                this.pendingHead = this.pendingTail = task;
                task.prev = task.next = void 0;
            }
            else {
                this.pendingTail = (task.prev = this.pendingTail).next = task;
                task.next = void 0;
            }
        }
        else {
            if (this.delayedSize++ === 0) {
                this.delayedHead = this.delayedTail = task;
                task.prev = task.next = void 0;
            }
            else {
                this.delayedTail = (task.prev = this.delayedTail).next = task;
                task.next = void 0;
            }
        }
    }
    finish(task) {
        if (task.next !== void 0) {
            task.next.prev = task.prev;
        }
        if (task.prev !== void 0) {
            task.prev.next = task.next;
        }
    }
    removeFromProcessing(task) {
        if (this.processingHead === task) {
            this.processingHead = task.next;
        }
        if (this.processingTail === task) {
            this.processingTail = task.prev;
        }
        --this.processingSize;
        this.finish(task);
    }
    removeFromPending(task) {
        if (this.pendingHead === task) {
            this.pendingHead = task.next;
        }
        if (this.pendingTail === task) {
            this.pendingTail = task.prev;
        }
        --this.pendingSize;
        this.finish(task);
    }
    removeFromDelayed(task) {
        if (this.delayedHead === task) {
            this.delayedHead = task.next;
        }
        if (this.delayedTail === task) {
            this.delayedTail = task.prev;
        }
        --this.delayedSize;
        this.finish(task);
    }
    addToProcessing(task) {
        if (this.processingSize++ === 0) {
            this.processingHead = this.processingTail = task;
        }
        else {
            this.processingTail = (task.prev = this.processingTail).next = task;
        }
    }
    addToPending(task) {
        if (this.pendingSize++ === 0) {
            this.pendingHead = this.pendingTail = task;
        }
        else {
            this.pendingTail = (task.prev = this.pendingTail).next = task;
        }
    }
    addToDelayed(task) {
        if (this.delayedSize++ === 0) {
            this.delayedHead = this.delayedTail = task;
        }
        else {
            this.delayedTail = (task.prev = this.delayedTail).next = task;
        }
    }
    movePendingToProcessing() {
        // Add the previously pending tasks to the currently processing tasks
        if (this.processingSize === 0) {
            this.processingHead = this.pendingHead;
            this.processingTail = this.pendingTail;
            this.processingSize = this.pendingSize;
        }
        else {
            this.processingTail.next = this.pendingHead;
            this.processingTail = this.pendingTail;
            this.processingSize += this.pendingSize;
        }
        this.pendingHead = void 0;
        this.pendingTail = void 0;
        this.pendingSize = 0;
    }
    moveDelayedToProcessing() {
        const time = this.now();
        // Add any delayed tasks whose delay have expired to the currently processing tasks
        const delayedHead = this.delayedHead;
        if (delayedHead.queueTime <= time) {
            let delayedTail = delayedHead;
            let next = delayedTail.next;
            let count = 1;
            while (next !== void 0 && next.queueTime <= time) {
                delayedTail = next;
                next = delayedTail.next;
                ++count;
            }
            if (this.processingSize === 0) {
                this.processingHead = delayedHead;
                this.processingTail = delayedTail;
                this.processingSize = count;
            }
            else {
                this.processingTail.next = delayedHead;
                this.processingTail = delayedTail;
                this.processingSize += count;
            }
            this.delayedHead = next;
            this.delayedSize -= count;
            if (this.delayedSize === 0) {
                this.delayedTail = void 0;
            }
        }
    }
    requestFlush() {
        if (this.microTaskRequestFlushTask !== null) {
            this.microTaskRequestFlushTask.cancel();
            this.microTaskRequestFlushTask = null;
        }
        if (!this.flushRequested) {
            this.flushRequested = true;
            this.lastRequest = this.now();
            this.flushRequestor.request();
        }
    }
}
//# sourceMappingURL=task-queue.js.map

/***/ }),

/***/ "./node_modules/@aurelia/scheduler/dist/esnext/task.js":
/*!*************************************************************!*\
  !*** ./node_modules/@aurelia/scheduler/dist/esnext/task.js ***!
  \*************************************************************/
/*! exports provided: TaskAbortError, Task */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaskAbortError", function() { return TaskAbortError; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Task", function() { return Task; });
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./types */ "./node_modules/@aurelia/scheduler/dist/esnext/types.js");

class TaskAbortError extends Error {
    constructor(task) {
        super('Task was canceled.');
        this.task = task;
    }
}
let id = 0;
class Task {
    constructor(taskQueue, createdTime, queueTime, preempt, persistent, reusable, callback) {
        this.taskQueue = taskQueue;
        this.createdTime = createdTime;
        this.queueTime = queueTime;
        this.preempt = preempt;
        this.persistent = persistent;
        this.reusable = reusable;
        this.callback = callback;
        this.id = ++id;
        this.next = void 0;
        this.prev = void 0;
        this.resolve = void 0;
        this.reject = void 0;
        this._result = void 0;
        this._status = 'pending';
        this.priority = taskQueue.priority;
    }
    get result() {
        const result = this._result;
        if (result === void 0) {
            switch (this._status) {
                case 'pending': {
                    const promise = this._result = Object(_types__WEBPACK_IMPORTED_MODULE_0__["createExposedPromise"])();
                    this.resolve = promise.resolve;
                    this.reject = promise.reject;
                    return promise;
                }
                case 'running':
                    throw new Error('Trying to await task from within task will cause a deadlock.');
                case 'completed':
                    return this._result = Promise.resolve();
                case 'canceled':
                    return this._result = Promise.reject(new TaskAbortError(this));
            }
        }
        return result;
    }
    get status() {
        return this._status;
    }
    run() {
        if (this._status !== 'pending') {
            throw new Error(`Cannot run task in ${this._status} state`);
        }
        // this.persistent could be changed while the task is running (this can only be done by the task itself if canceled, and is a valid way of stopping a loop)
        // so we deliberately reference this.persistent instead of the local variable, but we keep it around to know whether the task *was* persistent before running it,
        // so we can set the correct cancelation state.
        const persistent = this.persistent;
        const reusable = this.reusable;
        const taskQueue = this.taskQueue;
        const callback = this.callback;
        const resolve = this.resolve;
        const reject = this.reject;
        const createdTime = this.createdTime;
        taskQueue.remove(this);
        this._status = 'running';
        try {
            const ret = callback(taskQueue.now() - createdTime);
            if (this.persistent) {
                taskQueue.resetPersistentTask(this);
            }
            else if (persistent) {
                // Persistent tasks never reach completed status. They're either pending, running, or canceled.
                this._status = 'canceled';
            }
            else {
                this._status = 'completed';
            }
            if (resolve !== void 0) {
                resolve(ret);
            }
        }
        catch (err) {
            if (reject !== void 0) {
                reject(err);
            }
            else {
                throw err;
            }
        }
        finally {
            if (!this.persistent) {
                this.dispose();
                if (reusable) {
                    taskQueue.returnToPool(this);
                }
            }
        }
    }
    cancel() {
        if (this._status === 'pending') {
            const taskQueue = this.taskQueue;
            const reusable = this.reusable;
            const reject = this.reject;
            taskQueue.remove(this);
            if (taskQueue.isEmpty) {
                taskQueue.cancel();
            }
            this._status = 'canceled';
            if (reject !== void 0) {
                reject(new TaskAbortError(this));
            }
            this.dispose();
            if (reusable) {
                taskQueue.returnToPool(this);
            }
            return true;
        }
        else if (this._status === 'running' && this.persistent) {
            this.persistent = false;
            return true;
        }
        return false;
    }
    reset(time) {
        const delay = this.queueTime - this.createdTime;
        this.createdTime = time;
        this.queueTime = time + delay;
        this._status = 'pending';
        this.resolve = void 0;
        this.reject = void 0;
        this._result = void 0;
    }
    reuse(time, delay, preempt, persistent, callback) {
        this.createdTime = time;
        this.queueTime = time + delay;
        this.preempt = preempt;
        this.persistent = persistent;
        this.callback = callback;
        this._status = 'pending';
    }
    dispose() {
        this.prev = void 0;
        this.next = void 0;
        this.callback = (void 0);
        this.resolve = void 0;
        this.reject = void 0;
        this._result = void 0;
    }
}
//# sourceMappingURL=task.js.map

/***/ }),

/***/ "./node_modules/@aurelia/scheduler/dist/esnext/types.js":
/*!**************************************************************!*\
  !*** ./node_modules/@aurelia/scheduler/dist/esnext/types.js ***!
  \**************************************************************/
/*! exports provided: TaskQueuePriority, defaultQueueTaskOptions, createExposedPromise */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaskQueuePriority", function() { return TaskQueuePriority; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "defaultQueueTaskOptions", function() { return defaultQueueTaskOptions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createExposedPromise", function() { return createExposedPromise; });
var TaskQueuePriority;
(function (TaskQueuePriority) {
    TaskQueuePriority[TaskQueuePriority["microTask"] = 0] = "microTask";
    TaskQueuePriority[TaskQueuePriority["render"] = 1] = "render";
    TaskQueuePriority[TaskQueuePriority["macroTask"] = 2] = "macroTask";
    TaskQueuePriority[TaskQueuePriority["postRender"] = 3] = "postRender";
    TaskQueuePriority[TaskQueuePriority["idle"] = 4] = "idle";
})(TaskQueuePriority || (TaskQueuePriority = {}));
const defaultQueueTaskOptions = {
    delay: 0,
    preempt: false,
    priority: 1 /* render */,
    persistent: false,
    reusable: true,
};
let $resolve;
let $reject;
function executor(resolve, reject) {
    $resolve = resolve;
    $reject = reject;
}
function createExposedPromise() {
    const p = new Promise(executor);
    p.resolve = $resolve;
    p.reject = $reject;
    return p;
}
//# sourceMappingURL=types.js.map

/***/ }),

/***/ "./node_modules/aurelia/dist/esnext/index.js":
/*!***************************************************!*\
  !*** ./node_modules/aurelia/dist/esnext/index.js ***!
  \***************************************************/
/*! exports provided: Aurelia, default, DebugConfiguration, TraceConfiguration, json, HttpClientConfiguration, HttpClient, attributePattern, IAttributePattern, bindingCommand, getTarget, ShortHandBindingSyntax, JitHtmlBrowserConfiguration, all, DI, IContainer, inject, IServiceLocator, lazy, optional, Registration, singleton, transient, InstanceProvider, Metadata, ColorOptions, ILogger, LoggerConfiguration, PLATFORM, Reporter, Tracer, LogLevel, Profiler, EventAggregator, IEventAggregator, isArrayIndex, camelCase, kebabCase, pascalCase, toArray, bound, NavRoute, IRouter, Router, ViewportInstruction, RouterConfiguration, RouterRegistration, computed, IObserverLocator, ISignaler, subscriberCollection, collectionSubscriberCollection, proxySubscriberCollection, bindingBehavior, BindingBehavior, customAttribute, CustomAttribute, templateController, containerless, customElement, CustomElement, useShadowDOM, ValueConverter, valueConverter, IScheduler, TaskQueuePriority, bindable, Bindable, children, Controller, ViewFactory, CompositionRoot, alias, registerAliases, INode, IRenderLocation, IDOM, BindingMode, BindingStrategy, LifecycleFlags, ILifecycle, AggregateContinuationTask, TerminalTask, AggregateTerminalTask, ContinuationTask, LifecycleTask, PromiseTask, TaskSlot, StartTask, IStartTask, IStartTaskManager, ProviderTask, instructionRenderer, ensureExpression, createElement, HTMLDOM, DOM, StyleConfiguration, cssModules, shadowCSS */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _quick_start__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./quick-start */ "./node_modules/aurelia/dist/esnext/quick-start.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Aurelia", function() { return _quick_start__WEBPACK_IMPORTED_MODULE_0__["Aurelia"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _quick_start__WEBPACK_IMPORTED_MODULE_0__["Aurelia"]; });

/* harmony import */ var _aurelia_debug__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/debug */ "./node_modules/@aurelia/debug/dist/esnext/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DebugConfiguration", function() { return _aurelia_debug__WEBPACK_IMPORTED_MODULE_1__["DebugConfiguration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TraceConfiguration", function() { return _aurelia_debug__WEBPACK_IMPORTED_MODULE_1__["TraceConfiguration"]; });

/* harmony import */ var _aurelia_fetch_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aurelia/fetch-client */ "./node_modules/@aurelia/fetch-client/dist/esnext/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "json", function() { return _aurelia_fetch_client__WEBPACK_IMPORTED_MODULE_2__["json"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "HttpClientConfiguration", function() { return _aurelia_fetch_client__WEBPACK_IMPORTED_MODULE_2__["HttpClientConfiguration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "HttpClient", function() { return _aurelia_fetch_client__WEBPACK_IMPORTED_MODULE_2__["HttpClient"]; });

/* harmony import */ var _aurelia_jit__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @aurelia/jit */ "./node_modules/@aurelia/jit/dist/esnext/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "attributePattern", function() { return _aurelia_jit__WEBPACK_IMPORTED_MODULE_3__["attributePattern"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IAttributePattern", function() { return _aurelia_jit__WEBPACK_IMPORTED_MODULE_3__["IAttributePattern"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "bindingCommand", function() { return _aurelia_jit__WEBPACK_IMPORTED_MODULE_3__["bindingCommand"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getTarget", function() { return _aurelia_jit__WEBPACK_IMPORTED_MODULE_3__["getTarget"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ShortHandBindingSyntax", function() { return _aurelia_jit__WEBPACK_IMPORTED_MODULE_3__["ShortHandBindingSyntax"]; });

/* harmony import */ var _aurelia_jit_html_browser__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @aurelia/jit-html-browser */ "./node_modules/@aurelia/jit-html-browser/dist/esnext/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "JitHtmlBrowserConfiguration", function() { return _aurelia_jit_html_browser__WEBPACK_IMPORTED_MODULE_4__["JitHtmlBrowserConfiguration"]; });

/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "all", function() { return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_5__["all"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DI", function() { return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_5__["DI"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IContainer", function() { return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_5__["IContainer"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "inject", function() { return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_5__["inject"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IServiceLocator", function() { return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_5__["IServiceLocator"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "lazy", function() { return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_5__["lazy"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "optional", function() { return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_5__["optional"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Registration", function() { return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_5__["Registration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "singleton", function() { return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_5__["singleton"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "transient", function() { return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_5__["transient"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "InstanceProvider", function() { return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_5__["InstanceProvider"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Metadata", function() { return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_5__["Metadata"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ColorOptions", function() { return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_5__["ColorOptions"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ILogger", function() { return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_5__["ILogger"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LoggerConfiguration", function() { return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_5__["LoggerConfiguration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PLATFORM", function() { return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_5__["PLATFORM"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Reporter", function() { return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_5__["Reporter"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Tracer", function() { return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_5__["Tracer"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LogLevel", function() { return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_5__["LogLevel"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Profiler", function() { return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_5__["Profiler"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "EventAggregator", function() { return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_5__["EventAggregator"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IEventAggregator", function() { return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_5__["IEventAggregator"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "isArrayIndex", function() { return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_5__["isArrayIndex"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "camelCase", function() { return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_5__["camelCase"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "kebabCase", function() { return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_5__["kebabCase"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "pascalCase", function() { return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_5__["pascalCase"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "toArray", function() { return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_5__["toArray"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "bound", function() { return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_5__["bound"]; });

/* harmony import */ var _aurelia_router__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @aurelia/router */ "./node_modules/@aurelia/router/dist/esnext/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "NavRoute", function() { return _aurelia_router__WEBPACK_IMPORTED_MODULE_6__["NavRoute"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IRouter", function() { return _aurelia_router__WEBPACK_IMPORTED_MODULE_6__["IRouter"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Router", function() { return _aurelia_router__WEBPACK_IMPORTED_MODULE_6__["Router"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ViewportInstruction", function() { return _aurelia_router__WEBPACK_IMPORTED_MODULE_6__["ViewportInstruction"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RouterConfiguration", function() { return _aurelia_router__WEBPACK_IMPORTED_MODULE_6__["RouterConfiguration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RouterRegistration", function() { return _aurelia_router__WEBPACK_IMPORTED_MODULE_6__["RouterRegistration"]; });

/* harmony import */ var _aurelia_runtime__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @aurelia/runtime */ "./node_modules/@aurelia/runtime/dist/esnext/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "computed", function() { return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_7__["computed"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IObserverLocator", function() { return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_7__["IObserverLocator"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ISignaler", function() { return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_7__["ISignaler"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "subscriberCollection", function() { return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_7__["subscriberCollection"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "collectionSubscriberCollection", function() { return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_7__["collectionSubscriberCollection"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "proxySubscriberCollection", function() { return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_7__["proxySubscriberCollection"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "bindingBehavior", function() { return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_7__["bindingBehavior"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BindingBehavior", function() { return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_7__["BindingBehavior"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "customAttribute", function() { return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_7__["customAttribute"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CustomAttribute", function() { return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_7__["CustomAttribute"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "templateController", function() { return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_7__["templateController"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "containerless", function() { return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_7__["containerless"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "customElement", function() { return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_7__["customElement"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CustomElement", function() { return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_7__["CustomElement"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "useShadowDOM", function() { return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_7__["useShadowDOM"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ValueConverter", function() { return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_7__["ValueConverter"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "valueConverter", function() { return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_7__["valueConverter"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IScheduler", function() { return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_7__["IScheduler"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TaskQueuePriority", function() { return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_7__["TaskQueuePriority"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "bindable", function() { return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_7__["bindable"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Bindable", function() { return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_7__["Bindable"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "children", function() { return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_7__["children"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Controller", function() { return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_7__["Controller"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ViewFactory", function() { return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_7__["ViewFactory"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CompositionRoot", function() { return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_7__["CompositionRoot"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "alias", function() { return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_7__["alias"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "registerAliases", function() { return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_7__["registerAliases"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "INode", function() { return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_7__["INode"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IRenderLocation", function() { return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_7__["IRenderLocation"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IDOM", function() { return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_7__["IDOM"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BindingMode", function() { return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_7__["BindingMode"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BindingStrategy", function() { return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_7__["BindingStrategy"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LifecycleFlags", function() { return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_7__["LifecycleFlags"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ILifecycle", function() { return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_7__["ILifecycle"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AggregateContinuationTask", function() { return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_7__["AggregateContinuationTask"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TerminalTask", function() { return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_7__["TerminalTask"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AggregateTerminalTask", function() { return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_7__["AggregateTerminalTask"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ContinuationTask", function() { return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_7__["ContinuationTask"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LifecycleTask", function() { return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_7__["LifecycleTask"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PromiseTask", function() { return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_7__["PromiseTask"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TaskSlot", function() { return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_7__["TaskSlot"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "StartTask", function() { return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_7__["StartTask"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IStartTask", function() { return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_7__["IStartTask"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "IStartTaskManager", function() { return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_7__["IStartTaskManager"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ProviderTask", function() { return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_7__["ProviderTask"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "instructionRenderer", function() { return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_7__["instructionRenderer"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ensureExpression", function() { return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_7__["ensureExpression"]; });

/* harmony import */ var _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @aurelia/runtime-html */ "./node_modules/@aurelia/runtime-html/dist/esnext/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createElement", function() { return _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_8__["createElement"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "HTMLDOM", function() { return _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_8__["HTMLDOM"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DOM", function() { return _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_8__["DOM"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "StyleConfiguration", function() { return _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_8__["StyleConfiguration"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "cssModules", function() { return _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_8__["cssModules"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "shadowCSS", function() { return _aurelia_runtime_html__WEBPACK_IMPORTED_MODULE_8__["shadowCSS"]; });










//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./node_modules/aurelia/dist/esnext/quick-start.js":
/*!*********************************************************!*\
  !*** ./node_modules/aurelia/dist/esnext/quick-start.js ***!
  \*********************************************************/
/*! exports provided: Aurelia */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function(process) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Aurelia", function() { return Aurelia; });
/* harmony import */ var _aurelia_debug__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/debug */ "./node_modules/@aurelia/debug/dist/esnext/index.js");
/* harmony import */ var _aurelia_jit_html_browser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/jit-html-browser */ "./node_modules/@aurelia/jit-html-browser/dist/esnext/index.js");
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @aurelia/runtime */ "./node_modules/@aurelia/runtime/dist/esnext/index.js");




// TODO: SSR?? abstract HTMLElement and document.
function createAurelia() {
    const au = new Aurelia();
    au.register(_aurelia_jit_html_browser__WEBPACK_IMPORTED_MODULE_1__["JitHtmlBrowserConfiguration"]);
    // eslint-disable-next-line sonarjs/no-collapsible-if
    if (typeof process !== 'undefined' && typeof process.env === 'object') {
        // Just use NODE_ENV to control build process.
        // Bundlers (at least webpack/dumber/parcel) have feature to remove this branch in production.
        // Then tree-shaking/minifier will remove unused DebugConfiguration import.
        if (true) {
            au.register(_aurelia_debug__WEBPACK_IMPORTED_MODULE_0__["DebugConfiguration"]);
        }
    }
    return au;
}
class Aurelia extends _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__["Aurelia"] {
    constructor(container = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__["DI"].createContainer()) {
        super(container);
    }
    static start(root) {
        return createAurelia().start(root);
    }
    static app(config) {
        return createAurelia().app(config);
    }
    static register(...params) {
        return createAurelia().register(...params);
    }
    app(config) {
        if (_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__["CustomElement"].isType(config)) {
            // Default to custom element element name
            const definition = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__["CustomElement"].getDefinition(config);
            let host = document.querySelector(definition.name);
            if (host === null) {
                // When no target is found, default to body.
                // For example, when user forgot to write <my-app></my-app> in html.
                host = document.body;
            }
            return super.app({
                host: host,
                component: config
            });
        }
        return super.app(config);
    }
}
//# sourceMappingURL=quick-start.js.map
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../process/browser.js */ "./node_modules/process/browser.js")))

/***/ }),

/***/ "./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js?!./node_modules/sass-loader/dist/cjs.js?!./src/my-app.scss":
/*!************************************************************************************************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src??ref--9-2!./node_modules/sass-loader/dist/cjs.js??ref--9-3!./src/my-app.scss ***!
  \************************************************************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// Imports
var ___CSS_LOADER_API_IMPORT___ = __webpack_require__(/*! ../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");
exports = ___CSS_LOADER_API_IMPORT___(false);
// Module
exports.push([module.i, ".message {\n  background-color: lightblue;\n}", ""]);
// Exports
module.exports = exports;


/***/ }),

/***/ "./node_modules/css-loader/dist/runtime/api.js":
/*!*****************************************************!*\
  !*** ./node_modules/css-loader/dist/runtime/api.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*
  MIT License http://www.opensource.org/licenses/mit-license.php
  Author Tobias Koppers @sokra
*/
// css base code, injected by the css-loader
// eslint-disable-next-line func-names
module.exports = function (useSourceMap) {
  var list = []; // return the list of modules as css string

  list.toString = function toString() {
    return this.map(function (item) {
      var content = cssWithMappingToString(item, useSourceMap);

      if (item[2]) {
        return "@media ".concat(item[2], " {").concat(content, "}");
      }

      return content;
    }).join('');
  }; // import a list of modules into the list
  // eslint-disable-next-line func-names


  list.i = function (modules, mediaQuery, dedupe) {
    if (typeof modules === 'string') {
      // eslint-disable-next-line no-param-reassign
      modules = [[null, modules, '']];
    }

    var alreadyImportedModules = {};

    if (dedupe) {
      for (var i = 0; i < this.length; i++) {
        // eslint-disable-next-line prefer-destructuring
        var id = this[i][0];

        if (id != null) {
          alreadyImportedModules[id] = true;
        }
      }
    }

    for (var _i = 0; _i < modules.length; _i++) {
      var item = [].concat(modules[_i]);

      if (dedupe && alreadyImportedModules[item[0]]) {
        // eslint-disable-next-line no-continue
        continue;
      }

      if (mediaQuery) {
        if (!item[2]) {
          item[2] = mediaQuery;
        } else {
          item[2] = "".concat(mediaQuery, " and ").concat(item[2]);
        }
      }

      list.push(item);
    }
  };

  return list;
};

function cssWithMappingToString(item, useSourceMap) {
  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring

  var cssMapping = item[3];

  if (!cssMapping) {
    return content;
  }

  if (useSourceMap && typeof btoa === 'function') {
    var sourceMapping = toComment(cssMapping);
    var sourceURLs = cssMapping.sources.map(function (source) {
      return "/*# sourceURL=".concat(cssMapping.sourceRoot || '').concat(source, " */");
    });
    return [content].concat(sourceURLs).concat([sourceMapping]).join('\n');
  }

  return [content].join('\n');
} // Adapted from convert-source-map (MIT)


function toComment(sourceMap) {
  // eslint-disable-next-line no-undef
  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));
  var data = "sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64);
  return "/*# ".concat(data, " */");
}

/***/ }),

/***/ "./node_modules/process/browser.js":
/*!*****************************************!*\
  !*** ./node_modules/process/browser.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// shim for using process in browser
var process = module.exports = {};

// cached from whatever global is present so that test runners that stub it
// don't break things.  But we need to wrap it in a try catch in case it is
// wrapped in strict mode code which doesn't define any globals.  It's inside a
// function because try/catches deoptimize in certain engines.

var cachedSetTimeout;
var cachedClearTimeout;

function defaultSetTimout() {
    throw new Error('setTimeout has not been defined');
}
function defaultClearTimeout () {
    throw new Error('clearTimeout has not been defined');
}
(function () {
    try {
        if (typeof setTimeout === 'function') {
            cachedSetTimeout = setTimeout;
        } else {
            cachedSetTimeout = defaultSetTimout;
        }
    } catch (e) {
        cachedSetTimeout = defaultSetTimout;
    }
    try {
        if (typeof clearTimeout === 'function') {
            cachedClearTimeout = clearTimeout;
        } else {
            cachedClearTimeout = defaultClearTimeout;
        }
    } catch (e) {
        cachedClearTimeout = defaultClearTimeout;
    }
} ())
function runTimeout(fun) {
    if (cachedSetTimeout === setTimeout) {
        //normal enviroments in sane situations
        return setTimeout(fun, 0);
    }
    // if setTimeout wasn't available but was latter defined
    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {
        cachedSetTimeout = setTimeout;
        return setTimeout(fun, 0);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedSetTimeout(fun, 0);
    } catch(e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally
            return cachedSetTimeout.call(null, fun, 0);
        } catch(e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error
            return cachedSetTimeout.call(this, fun, 0);
        }
    }


}
function runClearTimeout(marker) {
    if (cachedClearTimeout === clearTimeout) {
        //normal enviroments in sane situations
        return clearTimeout(marker);
    }
    // if clearTimeout wasn't available but was latter defined
    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {
        cachedClearTimeout = clearTimeout;
        return clearTimeout(marker);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedClearTimeout(marker);
    } catch (e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally
            return cachedClearTimeout.call(null, marker);
        } catch (e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.
            // Some versions of I.E. have different rules for clearTimeout vs setTimeout
            return cachedClearTimeout.call(this, marker);
        }
    }



}
var queue = [];
var draining = false;
var currentQueue;
var queueIndex = -1;

function cleanUpNextTick() {
    if (!draining || !currentQueue) {
        return;
    }
    draining = false;
    if (currentQueue.length) {
        queue = currentQueue.concat(queue);
    } else {
        queueIndex = -1;
    }
    if (queue.length) {
        drainQueue();
    }
}

function drainQueue() {
    if (draining) {
        return;
    }
    var timeout = runTimeout(cleanUpNextTick);
    draining = true;

    var len = queue.length;
    while(len) {
        currentQueue = queue;
        queue = [];
        while (++queueIndex < len) {
            if (currentQueue) {
                currentQueue[queueIndex].run();
            }
        }
        queueIndex = -1;
        len = queue.length;
    }
    currentQueue = null;
    draining = false;
    runClearTimeout(timeout);
}

process.nextTick = function (fun) {
    var args = new Array(arguments.length - 1);
    if (arguments.length > 1) {
        for (var i = 1; i < arguments.length; i++) {
            args[i - 1] = arguments[i];
        }
    }
    queue.push(new Item(fun, args));
    if (queue.length === 1 && !draining) {
        runTimeout(drainQueue);
    }
};

// v8 likes predictible objects
function Item(fun, array) {
    this.fun = fun;
    this.array = array;
}
Item.prototype.run = function () {
    this.fun.apply(null, this.array);
};
process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];
process.version = ''; // empty string to avoid regexp issues
process.versions = {};

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;
process.prependListener = noop;
process.prependOnceListener = noop;

process.listeners = function (name) { return [] }

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};
process.umask = function() { return 0; };


/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":
/*!****************************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js ***!
  \****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var isOldIE = function isOldIE() {
  var memo;
  return function memorize() {
    if (typeof memo === 'undefined') {
      // Test for IE <= 9 as proposed by Browserhacks
      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805
      // Tests for existence of standard globals is to allow style-loader
      // to operate correctly into non-standard environments
      // @see https://github.com/webpack-contrib/style-loader/issues/177
      memo = Boolean(window && document && document.all && !window.atob);
    }

    return memo;
  };
}();

var getTarget = function getTarget() {
  var memo = {};
  return function memorize(target) {
    if (typeof memo[target] === 'undefined') {
      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself

      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {
        try {
          // This will throw an exception if access to iframe is blocked
          // due to cross-origin restrictions
          styleTarget = styleTarget.contentDocument.head;
        } catch (e) {
          // istanbul ignore next
          styleTarget = null;
        }
      }

      memo[target] = styleTarget;
    }

    return memo[target];
  };
}();

var stylesInDom = [];

function getIndexByIdentifier(identifier) {
  var result = -1;

  for (var i = 0; i < stylesInDom.length; i++) {
    if (stylesInDom[i].identifier === identifier) {
      result = i;
      break;
    }
  }

  return result;
}

function modulesToDom(list, options) {
  var idCountMap = {};
  var identifiers = [];

  for (var i = 0; i < list.length; i++) {
    var item = list[i];
    var id = options.base ? item[0] + options.base : item[0];
    var count = idCountMap[id] || 0;
    var identifier = "".concat(id, " ").concat(count);
    idCountMap[id] = count + 1;
    var index = getIndexByIdentifier(identifier);
    var obj = {
      css: item[1],
      media: item[2],
      sourceMap: item[3]
    };

    if (index !== -1) {
      stylesInDom[index].references++;
      stylesInDom[index].updater(obj);
    } else {
      stylesInDom.push({
        identifier: identifier,
        updater: addStyle(obj, options),
        references: 1
      });
    }

    identifiers.push(identifier);
  }

  return identifiers;
}

function insertStyleElement(options) {
  var style = document.createElement('style');
  var attributes = options.attributes || {};

  if (typeof attributes.nonce === 'undefined') {
    var nonce =  true ? __webpack_require__.nc : undefined;

    if (nonce) {
      attributes.nonce = nonce;
    }
  }

  Object.keys(attributes).forEach(function (key) {
    style.setAttribute(key, attributes[key]);
  });

  if (typeof options.insert === 'function') {
    options.insert(style);
  } else {
    var target = getTarget(options.insert || 'head');

    if (!target) {
      throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");
    }

    target.appendChild(style);
  }

  return style;
}

function removeStyleElement(style) {
  // istanbul ignore if
  if (style.parentNode === null) {
    return false;
  }

  style.parentNode.removeChild(style);
}
/* istanbul ignore next  */


var replaceText = function replaceText() {
  var textStore = [];
  return function replace(index, replacement) {
    textStore[index] = replacement;
    return textStore.filter(Boolean).join('\n');
  };
}();

function applyToSingletonTag(style, index, remove, obj) {
  var css = remove ? '' : obj.media ? "@media ".concat(obj.media, " {").concat(obj.css, "}") : obj.css; // For old IE

  /* istanbul ignore if  */

  if (style.styleSheet) {
    style.styleSheet.cssText = replaceText(index, css);
  } else {
    var cssNode = document.createTextNode(css);
    var childNodes = style.childNodes;

    if (childNodes[index]) {
      style.removeChild(childNodes[index]);
    }

    if (childNodes.length) {
      style.insertBefore(cssNode, childNodes[index]);
    } else {
      style.appendChild(cssNode);
    }
  }
}

function applyToTag(style, options, obj) {
  var css = obj.css;
  var media = obj.media;
  var sourceMap = obj.sourceMap;

  if (media) {
    style.setAttribute('media', media);
  } else {
    style.removeAttribute('media');
  }

  if (sourceMap && btoa) {
    css += "\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), " */");
  } // For old IE

  /* istanbul ignore if  */


  if (style.styleSheet) {
    style.styleSheet.cssText = css;
  } else {
    while (style.firstChild) {
      style.removeChild(style.firstChild);
    }

    style.appendChild(document.createTextNode(css));
  }
}

var singleton = null;
var singletonCounter = 0;

function addStyle(obj, options) {
  var style;
  var update;
  var remove;

  if (options.singleton) {
    var styleIndex = singletonCounter++;
    style = singleton || (singleton = insertStyleElement(options));
    update = applyToSingletonTag.bind(null, style, styleIndex, false);
    remove = applyToSingletonTag.bind(null, style, styleIndex, true);
  } else {
    style = insertStyleElement(options);
    update = applyToTag.bind(null, style, options);

    remove = function remove() {
      removeStyleElement(style);
    };
  }

  update(obj);
  return function updateStyle(newObj) {
    if (newObj) {
      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {
        return;
      }

      update(obj = newObj);
    } else {
      remove();
    }
  };
}

module.exports = function (list, options) {
  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>
  // tags it will allow on a page

  if (!options.singleton && typeof options.singleton !== 'boolean') {
    options.singleton = isOldIE();
  }

  list = list || [];
  var lastIdentifiers = modulesToDom(list, options);
  return function update(newList) {
    newList = newList || [];

    if (Object.prototype.toString.call(newList) !== '[object Array]') {
      return;
    }

    for (var i = 0; i < lastIdentifiers.length; i++) {
      var identifier = lastIdentifiers[i];
      var index = getIndexByIdentifier(identifier);
      stylesInDom[index].references--;
    }

    var newLastIdentifiers = modulesToDom(newList, options);

    for (var _i = 0; _i < lastIdentifiers.length; _i++) {
      var _identifier = lastIdentifiers[_i];

      var _index = getIndexByIdentifier(_identifier);

      if (stylesInDom[_index].references === 0) {
        stylesInDom[_index].updater();

        stylesInDom.splice(_index, 1);
      }
    }

    lastIdentifiers = newLastIdentifiers;
  };
};

/***/ }),

/***/ "./node_modules/tslib/tslib.es6.js":
/*!*****************************************!*\
  !*** ./node_modules/tslib/tslib.es6.js ***!
  \*****************************************/
/*! exports provided: __extends, __assign, __rest, __decorate, __param, __metadata, __awaiter, __generator, __exportStar, __values, __read, __spread, __spreadArrays, __await, __asyncGenerator, __asyncDelegator, __asyncValues, __makeTemplateObject, __importStar, __importDefault, __classPrivateFieldGet, __classPrivateFieldSet */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__extends", function() { return __extends; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__assign", function() { return __assign; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__rest", function() { return __rest; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__decorate", function() { return __decorate; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__param", function() { return __param; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__metadata", function() { return __metadata; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__awaiter", function() { return __awaiter; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__generator", function() { return __generator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__exportStar", function() { return __exportStar; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__values", function() { return __values; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__read", function() { return __read; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__spread", function() { return __spread; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__spreadArrays", function() { return __spreadArrays; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__await", function() { return __await; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__asyncGenerator", function() { return __asyncGenerator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__asyncDelegator", function() { return __asyncDelegator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__asyncValues", function() { return __asyncValues; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__makeTemplateObject", function() { return __makeTemplateObject; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__importStar", function() { return __importStar; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__importDefault", function() { return __importDefault; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__classPrivateFieldGet", function() { return __classPrivateFieldGet; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__classPrivateFieldSet", function() { return __classPrivateFieldSet; });
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
/* global Reflect, Promise */

var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return extendStatics(d, b);
};

function __extends(d, b) {
    extendStatics(d, b);
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
}

var __assign = function() {
    __assign = Object.assign || function __assign(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }
        return t;
    }
    return __assign.apply(this, arguments);
}

function __rest(s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
}

function __decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}

function __param(paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
}

function __metadata(metadataKey, metadataValue) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(metadataKey, metadataValue);
}

function __awaiter(thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
}

function __generator(thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
}

function __exportStar(m, exports) {
    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
}

function __values(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function () {
            if (o && i >= o.length) o = void 0;
            return { value: o && o[i++], done: !o };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
}

function __read(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
    }
    catch (error) { e = { error: error }; }
    finally {
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        }
        finally { if (e) throw e.error; }
    }
    return ar;
}

function __spread() {
    for (var ar = [], i = 0; i < arguments.length; i++)
        ar = ar.concat(__read(arguments[i]));
    return ar;
}

function __spreadArrays() {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};

function __await(v) {
    return this instanceof __await ? (this.v = v, this) : new __await(v);
}

function __asyncGenerator(thisArg, _arguments, generator) {
    if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");
    var g = generator.apply(thisArg, _arguments || []), i, q = [];
    return i = {}, verb("next"), verb("throw"), verb("return"), i[Symbol.asyncIterator] = function () { return this; }, i;
    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }
    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }
    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }
    function fulfill(value) { resume("next", value); }
    function reject(value) { resume("throw", value); }
    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }
}

function __asyncDelegator(o) {
    var i, p;
    return i = {}, verb("next"), verb("throw", function (e) { throw e; }), verb("return"), i[Symbol.iterator] = function () { return this; }, i;
    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === "return" } : f ? f(v) : v; } : f; }
}

function __asyncValues(o) {
    if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");
    var m = o[Symbol.asyncIterator], i;
    return m ? m.call(o) : (o = typeof __values === "function" ? __values(o) : o[Symbol.iterator](), i = {}, verb("next"), verb("throw"), verb("return"), i[Symbol.asyncIterator] = function () { return this; }, i);
    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }
    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }
}

function __makeTemplateObject(cooked, raw) {
    if (Object.defineProperty) { Object.defineProperty(cooked, "raw", { value: raw }); } else { cooked.raw = raw; }
    return cooked;
};

function __importStar(mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];
    result.default = mod;
    return result;
}

function __importDefault(mod) {
    return (mod && mod.__esModule) ? mod : { default: mod };
}

function __classPrivateFieldGet(receiver, privateMap) {
    if (!privateMap.has(receiver)) {
        throw new TypeError("attempted to get private field on non-instance");
    }
    return privateMap.get(receiver);
}

function __classPrivateFieldSet(receiver, privateMap, value) {
    if (!privateMap.has(receiver)) {
        throw new TypeError("attempted to set private field on non-instance");
    }
    privateMap.set(receiver, value);
    return value;
}


/***/ }),

/***/ "./node_modules/webpack/buildin/global.js":
/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

var g;

// This works in non-strict mode
g = (function() {
	return this;
})();

try {
	// This works if eval is allowed (see CSP)
	g = g || new Function("return this")();
} catch (e) {
	// This works if the window reference is available
	if (typeof window === "object") g = window;
}

// g can still be undefined, but nothing to do about it...
// We return undefined, instead of nothing here, so it's
// easier to handle this case. if(!global) { ...}

module.exports = g;


/***/ }),

/***/ "./src/main.ts":
/*!*********************!*\
  !*** ./src/main.ts ***!
  \*********************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var aurelia__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! aurelia */ "./node_modules/aurelia/dist/esnext/index.js");
/* harmony import */ var _my_app__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./my-app */ "./src/my-app.ts");


aurelia__WEBPACK_IMPORTED_MODULE_0__["default"]
    .app(_my_app__WEBPACK_IMPORTED_MODULE_1__["MyApp"])
    .start();


/***/ }),

/***/ "./src/my-app.html":
/*!*************************!*\
  !*** ./src/my-app.html ***!
  \*************************/
/*! exports provided: name, template, default, dependencies, register */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "name", function() { return name; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "template", function() { return template; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "dependencies", function() { return dependencies; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "register", function() { return register; });
/* harmony import */ var _aurelia_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/runtime */ "./node_modules/@aurelia/runtime/dist/esnext/index.js");
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esnext/index.js");
/* harmony import */ var _my_app_scss__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./my-app.scss */ "./src/my-app.scss");
/* harmony import */ var _my_app_scss__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_my_app_scss__WEBPACK_IMPORTED_MODULE_2__);



const name = "my-app";
const template = "<div class=\"message\">${message}</div>\n\n<button click.delegate=\"test()\">TEST</button>\n";
/* harmony default export */ __webpack_exports__["default"] = (template);
const dependencies = [ _aurelia_kernel__WEBPACK_IMPORTED_MODULE_1__["Registration"].defer('.css', _my_app_scss__WEBPACK_IMPORTED_MODULE_2___default.a) ];
let _e;
function register(container) {
  if (!_e) {
    _e = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_0__["CustomElement"].define({ name, template, dependencies });
  }
  container.register(_e);
}


/***/ }),

/***/ "./src/my-app.scss":
/*!*************************!*\
  !*** ./src/my-app.scss ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var api = __webpack_require__(/*! ../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");
            var content = __webpack_require__(/*! !../node_modules/css-loader/dist/cjs.js!../node_modules/postcss-loader/src??ref--9-2!../node_modules/sass-loader/dist/cjs.js??ref--9-3!./my-app.scss */ "./node_modules/css-loader/dist/cjs.js!./node_modules/postcss-loader/src/index.js?!./node_modules/sass-loader/dist/cjs.js?!./src/my-app.scss");

            content = content.__esModule ? content.default : content;

            if (typeof content === 'string') {
              content = [[module.i, content, '']];
            }

var options = {};

options.insert = "head";
options.singleton = false;

var update = api(content, options);

var exported = content.locals ? content.locals : {};



module.exports = exported;

/***/ }),

/***/ "./src/my-app.ts":
/*!***********************!*\
  !*** ./src/my-app.ts ***!
  \***********************/
/*! exports provided: MyApp */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MyApp", function() { return MyApp; });
/* harmony import */ var _my_app_html__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./my-app.html */ "./src/my-app.html");
/* harmony import */ var _aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/runtime */ "./node_modules/@aurelia/runtime/dist/esnext/index.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};


let MyApp = class MyApp {
    constructor() {
        this.message = 'Hello World!';
    }
    test() {
        alert('test');
    }
};
MyApp = __decorate([
    Object(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_1__["customElement"])(_my_app_html__WEBPACK_IMPORTED_MODULE_0__)
], MyApp);



/***/ })

/******/ });
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL2RlYnVnL2Rpc3QvZXNuZXh0L2JpbmRpbmcvdW5wYXJzZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL2RlYnVnL2Rpc3QvZXNuZXh0L2NvbmZpZ3VyYXRpb24uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL2RlYnVnL2Rpc3QvZXNuZXh0L2luZGV4LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYXVyZWxpYS9kZWJ1Zy9kaXN0L2VzbmV4dC9yZXBvcnRlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvZGVidWcvZGlzdC9lc25leHQvdHJhY2VyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYXVyZWxpYS9mZXRjaC1jbGllbnQvZGlzdC9lc25leHQvaHR0cC1jbGllbnQtY29uZmlndXJhdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvZmV0Y2gtY2xpZW50L2Rpc3QvZXNuZXh0L2h0dHAtY2xpZW50LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYXVyZWxpYS9mZXRjaC1jbGllbnQvZGlzdC9lc25leHQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL2ZldGNoLWNsaWVudC9kaXN0L2VzbmV4dC9yZXRyeS1pbnRlcmNlcHRvci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvZmV0Y2gtY2xpZW50L2Rpc3QvZXNuZXh0L3V0aWwuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL2ppdC1odG1sLWJyb3dzZXIvZGlzdC9lc25leHQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL2ppdC1odG1sL2Rpc3QvZXNuZXh0L2F0dHJpYnV0ZS1zeW50YXgtdHJhbnNmb3JtZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL2ppdC1odG1sL2Rpc3QvZXNuZXh0L2JpbmRpbmctY29tbWFuZHMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL2ppdC1odG1sL2Rpc3QvZXNuZXh0L2NvbmZpZ3VyYXRpb24uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL2ppdC1odG1sL2Rpc3QvZXNuZXh0L2RlYnVnZ2luZy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvaml0LWh0bWwvZGlzdC9lc25leHQvaHRtbC1hdHRyaWJ1dGUtc3ludGF4LXRyYW5zZm9ybWVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYXVyZWxpYS9qaXQtaHRtbC9kaXN0L2VzbmV4dC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvaml0LWh0bWwvZGlzdC9lc25leHQvc2VtYW50aWMtbW9kZWwuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL2ppdC1odG1sL2Rpc3QvZXNuZXh0L3RlbXBsYXRlLWJpbmRlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvaml0LWh0bWwvZGlzdC9lc25leHQvdGVtcGxhdGUtY29tcGlsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL2ppdC1odG1sL2Rpc3QvZXNuZXh0L3RlbXBsYXRlLWVsZW1lbnQtZmFjdG9yeS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvaml0L2Rpc3QvZXNuZXh0L2FzdC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvaml0L2Rpc3QvZXNuZXh0L2F0dHJpYnV0ZS1wYXJzZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL2ppdC9kaXN0L2VzbmV4dC9hdHRyaWJ1dGUtcGF0dGVybi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvaml0L2Rpc3QvZXNuZXh0L2F0dHJpYnV0ZS1wYXR0ZXJucy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvaml0L2Rpc3QvZXNuZXh0L2JpbmRpbmctY29tbWFuZC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvaml0L2Rpc3QvZXNuZXh0L2JpbmRpbmctY29tbWFuZHMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL2ppdC9kaXN0L2VzbmV4dC9jb21tb24uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL2ppdC9kaXN0L2VzbmV4dC9jb25maWd1cmF0aW9uLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYXVyZWxpYS9qaXQvZGlzdC9lc25leHQvZXhwcmVzc2lvbi1wYXJzZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL2ppdC9kaXN0L2VzbmV4dC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvaml0L2Rpc3QvZXNuZXh0L3Jlc291cmNlLW1vZGVsLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYXVyZWxpYS9qaXQvZGlzdC9lc25leHQvc2VtYW50aWMtbW9kZWwuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL2tlcm5lbC9kaXN0L2VzbmV4dC9kaS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEva2VybmVsL2Rpc3QvZXNuZXh0L2V2ZW50YWdncmVnYXRvci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEva2VybmVsL2Rpc3QvZXNuZXh0L2Z1bmN0aW9ucy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEva2VybmVsL2Rpc3QvZXNuZXh0L2luZGV4LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYXVyZWxpYS9rZXJuZWwvZGlzdC9lc25leHQvbG9nZ2VyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYXVyZWxpYS9rZXJuZWwvZGlzdC9lc25leHQvcGF0aC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEva2VybmVsL2Rpc3QvZXNuZXh0L3BsYXRmb3JtLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYXVyZWxpYS9rZXJuZWwvZGlzdC9lc25leHQvcHJvZmlsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL2tlcm5lbC9kaXN0L2VzbmV4dC9yZXBvcnRlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEva2VybmVsL2Rpc3QvZXNuZXh0L3Jlc291cmNlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYXVyZWxpYS9tZXRhZGF0YS9kaXN0L2VzbmV4dC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvcm91dGUtcmVjb2duaXplci9kaXN0L2VzbmV4dC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvcm91dGVyL2Rpc3QvZXNuZXh0L2Jyb3dzZXItbmF2aWdhdG9yLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYXVyZWxpYS9yb3V0ZXIvZGlzdC9lc25leHQvYnJvd3Nlci12aWV3ZXItc3RvcmUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL3JvdXRlci9kaXN0L2VzbmV4dC9jb2xsZWN0aW9uLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYXVyZWxpYS9yb3V0ZXIvZGlzdC9lc25leHQvY29uZmlndXJhdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvcm91dGVyL2Rpc3QvZXNuZXh0L2ZvdW5kLXJvdXRlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYXVyZWxpYS9yb3V0ZXIvZGlzdC9lc25leHQvaG9vay1tYW5hZ2VyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYXVyZWxpYS9yb3V0ZXIvZGlzdC9lc25leHQvaG9vay5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvcm91dGVyL2Rpc3QvZXNuZXh0L2luZGV4LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYXVyZWxpYS9yb3V0ZXIvZGlzdC9lc25leHQvaW5zdHJ1Y3Rpb24tcmVzb2x2ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL3JvdXRlci9kaXN0L2VzbmV4dC9pbnRlcmZhY2VzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYXVyZWxpYS9yb3V0ZXIvZGlzdC9lc25leHQvbGlmZWN5Y2xlLWxvZ2dlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvcm91dGVyL2Rpc3QvZXNuZXh0L2xpbmstaGFuZGxlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvcm91dGVyL2Rpc3QvZXNuZXh0L25hdi1yb3V0ZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvcm91dGVyL2Rpc3QvZXNuZXh0L25hdi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvcm91dGVyL2Rpc3QvZXNuZXh0L25hdmlnYXRvci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvcm91dGVyL2Rpc3QvZXNuZXh0L3BhcnNlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvcm91dGVyL2Rpc3QvZXNuZXh0L3F1ZXVlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYXVyZWxpYS9yb3V0ZXIvZGlzdC9lc25leHQvcmVzb3VyY2VzL2dvdG8uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL3JvdXRlci9kaXN0L2VzbmV4dC9yZXNvdXJjZXMvaHJlZi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvcm91dGVyL2Rpc3QvZXNuZXh0L3Jlc291cmNlcy9uYXYuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL3JvdXRlci9kaXN0L2VzbmV4dC9yZXNvdXJjZXMvdmlld3BvcnQtc2NvcGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL3JvdXRlci9kaXN0L2VzbmV4dC9yZXNvdXJjZXMvdmlld3BvcnQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL3JvdXRlci9kaXN0L2VzbmV4dC9yb3V0ZS1yZWNvZ25pemVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYXVyZWxpYS9yb3V0ZXIvZGlzdC9lc25leHQvcm91dGVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYXVyZWxpYS9yb3V0ZXIvZGlzdC9lc25leHQvc2NvcGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL3JvdXRlci9kaXN0L2VzbmV4dC90YXNrLXF1ZXVlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYXVyZWxpYS9yb3V0ZXIvZGlzdC9lc25leHQvdHlwZS1yZXNvbHZlcnMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL3JvdXRlci9kaXN0L2VzbmV4dC91dGlscy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvcm91dGVyL2Rpc3QvZXNuZXh0L3ZpZXdwb3J0LWNvbnRlbnQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL3JvdXRlci9kaXN0L2VzbmV4dC92aWV3cG9ydC1pbnN0cnVjdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvcm91dGVyL2Rpc3QvZXNuZXh0L3ZpZXdwb3J0LXNjb3BlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYXVyZWxpYS9yb3V0ZXIvZGlzdC9lc25leHQvdmlld3BvcnQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL3J1bnRpbWUtaHRtbC1icm93c2VyL2Rpc3QvZXNuZXh0L2luZGV4LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYXVyZWxpYS9ydW50aW1lLWh0bWwvZGlzdC9lc25leHQvYmluZGluZy9hdHRyaWJ1dGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL3J1bnRpbWUtaHRtbC9kaXN0L2VzbmV4dC9iaW5kaW5nL2xpc3RlbmVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYXVyZWxpYS9ydW50aW1lLWh0bWwvZGlzdC9lc25leHQvY29uZmlndXJhdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvcnVudGltZS1odG1sL2Rpc3QvZXNuZXh0L2NyZWF0ZS1lbGVtZW50LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYXVyZWxpYS9ydW50aW1lLWh0bWwvZGlzdC9lc25leHQvZGVmaW5pdGlvbnMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL3J1bnRpbWUtaHRtbC9kaXN0L2VzbmV4dC9kb20uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL3J1bnRpbWUtaHRtbC9kaXN0L2VzbmV4dC9odG1sLXJlbmRlcmVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYXVyZWxpYS9ydW50aW1lLWh0bWwvZGlzdC9lc25leHQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL3J1bnRpbWUtaHRtbC9kaXN0L2VzbmV4dC9pbnN0cnVjdGlvbnMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL3J1bnRpbWUtaHRtbC9kaXN0L2VzbmV4dC9vYnNlcnZhdGlvbi9hdHRyaWJ1dGUtbnMtYWNjZXNzb3IuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL3J1bnRpbWUtaHRtbC9kaXN0L2VzbmV4dC9vYnNlcnZhdGlvbi9jaGVja2VkLW9ic2VydmVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYXVyZWxpYS9ydW50aW1lLWh0bWwvZGlzdC9lc25leHQvb2JzZXJ2YXRpb24vY2xhc3MtYXR0cmlidXRlLWFjY2Vzc29yLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYXVyZWxpYS9ydW50aW1lLWh0bWwvZGlzdC9lc25leHQvb2JzZXJ2YXRpb24vZGF0YS1hdHRyaWJ1dGUtYWNjZXNzb3IuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL3J1bnRpbWUtaHRtbC9kaXN0L2VzbmV4dC9vYnNlcnZhdGlvbi9lbGVtZW50LWF0dHJpYnV0ZS1vYnNlcnZlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvcnVudGltZS1odG1sL2Rpc3QvZXNuZXh0L29ic2VydmF0aW9uL2VsZW1lbnQtcHJvcGVydHktYWNjZXNzb3IuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL3J1bnRpbWUtaHRtbC9kaXN0L2VzbmV4dC9vYnNlcnZhdGlvbi9ldmVudC1tYW5hZ2VyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYXVyZWxpYS9ydW50aW1lLWh0bWwvZGlzdC9lc25leHQvb2JzZXJ2YXRpb24vb2JzZXJ2ZXItbG9jYXRvci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvcnVudGltZS1odG1sL2Rpc3QvZXNuZXh0L29ic2VydmF0aW9uL3NlbGVjdC12YWx1ZS1vYnNlcnZlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvcnVudGltZS1odG1sL2Rpc3QvZXNuZXh0L29ic2VydmF0aW9uL3N0eWxlLWF0dHJpYnV0ZS1hY2Nlc3Nvci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvcnVudGltZS1odG1sL2Rpc3QvZXNuZXh0L29ic2VydmF0aW9uL3N2Zy1hbmFseXplci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvcnVudGltZS1odG1sL2Rpc3QvZXNuZXh0L29ic2VydmF0aW9uL3ZhbHVlLWF0dHJpYnV0ZS1vYnNlcnZlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvcnVudGltZS1odG1sL2Rpc3QvZXNuZXh0L3Byb2plY3RvcnMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL3J1bnRpbWUtaHRtbC9kaXN0L2VzbmV4dC9yZXNvdXJjZXMvYmluZGluZy1iZWhhdmlvcnMvYXR0ci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvcnVudGltZS1odG1sL2Rpc3QvZXNuZXh0L3Jlc291cmNlcy9iaW5kaW5nLWJlaGF2aW9ycy9zZWxmLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYXVyZWxpYS9ydW50aW1lLWh0bWwvZGlzdC9lc25leHQvcmVzb3VyY2VzL2JpbmRpbmctYmVoYXZpb3JzL3VwZGF0ZS10cmlnZ2VyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYXVyZWxpYS9ydW50aW1lLWh0bWwvZGlzdC9lc25leHQvcmVzb3VyY2VzL2N1c3RvbS1hdHRyaWJ1dGVzL2JsdXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL3J1bnRpbWUtaHRtbC9kaXN0L2VzbmV4dC9yZXNvdXJjZXMvY3VzdG9tLWF0dHJpYnV0ZXMvZm9jdXMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL3J1bnRpbWUtaHRtbC9kaXN0L2VzbmV4dC9yZXNvdXJjZXMvY3VzdG9tLWF0dHJpYnV0ZXMvcG9ydGFsLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYXVyZWxpYS9ydW50aW1lLWh0bWwvZGlzdC9lc25leHQvcmVzb3VyY2VzL2N1c3RvbS1lbGVtZW50cy9jb21wb3NlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYXVyZWxpYS9ydW50aW1lLWh0bWwvZGlzdC9lc25leHQvc3R5bGVzL2Nzcy1tb2R1bGVzLXJlZ2lzdHJ5LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYXVyZWxpYS9ydW50aW1lLWh0bWwvZGlzdC9lc25leHQvc3R5bGVzL3NoYWRvdy1kb20tcmVnaXN0cnkuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL3J1bnRpbWUtaHRtbC9kaXN0L2VzbmV4dC9zdHlsZXMvc2hhZG93LWRvbS1zdHlsZXMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL3J1bnRpbWUtaHRtbC9kaXN0L2VzbmV4dC9zdHlsZXMvc3R5bGUtY29uZmlndXJhdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvcnVudGltZS9kaXN0L2VzbmV4dC9hY3RpdmF0b3IuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL3J1bnRpbWUvZGlzdC9lc25leHQvYXVyZWxpYS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvcnVudGltZS9kaXN0L2VzbmV4dC9iaW5kaW5nL2FzdC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvcnVudGltZS9kaXN0L2VzbmV4dC9iaW5kaW5nL2NhbGwtYmluZGluZy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvcnVudGltZS9kaXN0L2VzbmV4dC9iaW5kaW5nL2Nvbm5lY3RhYmxlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYXVyZWxpYS9ydW50aW1lL2Rpc3QvZXNuZXh0L2JpbmRpbmcvZXhwcmVzc2lvbi1wYXJzZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL3J1bnRpbWUvZGlzdC9lc25leHQvYmluZGluZy9pbnRlcnBvbGF0aW9uLWJpbmRpbmcuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL3J1bnRpbWUvZGlzdC9lc25leHQvYmluZGluZy9sZXQtYmluZGluZy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvcnVudGltZS9kaXN0L2VzbmV4dC9iaW5kaW5nL3Byb3BlcnR5LWJpbmRpbmcuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL3J1bnRpbWUvZGlzdC9lc25leHQvYmluZGluZy9yZWYtYmluZGluZy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvcnVudGltZS9kaXN0L2VzbmV4dC9jb25maWd1cmF0aW9uLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYXVyZWxpYS9ydW50aW1lL2Rpc3QvZXNuZXh0L2RlZmluaXRpb25zLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYXVyZWxpYS9ydW50aW1lL2Rpc3QvZXNuZXh0L2RvbS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvcnVudGltZS9kaXN0L2VzbmV4dC9mbGFncy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvcnVudGltZS9kaXN0L2VzbmV4dC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvcnVudGltZS9kaXN0L2VzbmV4dC9pbnN0cnVjdGlvbnMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL3J1bnRpbWUvZGlzdC9lc25leHQvbGlmZWN5Y2xlLXRhc2suanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL3J1bnRpbWUvZGlzdC9lc25leHQvbGlmZWN5Y2xlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYXVyZWxpYS9ydW50aW1lL2Rpc3QvZXNuZXh0L29ic2VydmF0aW9uLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYXVyZWxpYS9ydW50aW1lL2Rpc3QvZXNuZXh0L29ic2VydmF0aW9uL2FycmF5LW9ic2VydmVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYXVyZWxpYS9ydW50aW1lL2Rpc3QvZXNuZXh0L29ic2VydmF0aW9uL2JpbmRhYmxlLW9ic2VydmVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYXVyZWxpYS9ydW50aW1lL2Rpc3QvZXNuZXh0L29ic2VydmF0aW9uL2JpbmRpbmctY29udGV4dC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvcnVudGltZS9kaXN0L2VzbmV4dC9vYnNlcnZhdGlvbi9jb2xsZWN0aW9uLWxlbmd0aC1vYnNlcnZlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvcnVudGltZS9kaXN0L2VzbmV4dC9vYnNlcnZhdGlvbi9jb2xsZWN0aW9uLXNpemUtb2JzZXJ2ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL3J1bnRpbWUvZGlzdC9lc25leHQvb2JzZXJ2YXRpb24vY29tcHV0ZWQtb2JzZXJ2ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL3J1bnRpbWUvZGlzdC9lc25leHQvb2JzZXJ2YXRpb24vZGlydHktY2hlY2tlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvcnVudGltZS9kaXN0L2VzbmV4dC9vYnNlcnZhdGlvbi9tYXAtb2JzZXJ2ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL3J1bnRpbWUvZGlzdC9lc25leHQvb2JzZXJ2YXRpb24vb2JzZXJ2ZXItbG9jYXRvci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvcnVudGltZS9kaXN0L2VzbmV4dC9vYnNlcnZhdGlvbi9wcmltaXRpdmUtb2JzZXJ2ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL3J1bnRpbWUvZGlzdC9lc25leHQvb2JzZXJ2YXRpb24vcHJvcGVydHktYWNjZXNzb3IuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL3J1bnRpbWUvZGlzdC9lc25leHQvb2JzZXJ2YXRpb24vcHJveHktb2JzZXJ2ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL3J1bnRpbWUvZGlzdC9lc25leHQvb2JzZXJ2YXRpb24vc2V0LW9ic2VydmVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYXVyZWxpYS9ydW50aW1lL2Rpc3QvZXNuZXh0L29ic2VydmF0aW9uL3NldHRlci1vYnNlcnZlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvcnVudGltZS9kaXN0L2VzbmV4dC9vYnNlcnZhdGlvbi9zaWduYWxlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvcnVudGltZS9kaXN0L2VzbmV4dC9vYnNlcnZhdGlvbi9zdWJzY3JpYmVyLWNvbGxlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL3J1bnRpbWUvZGlzdC9lc25leHQvcmVuZGVyZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL3J1bnRpbWUvZGlzdC9lc25leHQvcmVzb3VyY2VzL2JpbmRpbmctYmVoYXZpb3IuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL3J1bnRpbWUvZGlzdC9lc25leHQvcmVzb3VyY2VzL2JpbmRpbmctYmVoYXZpb3JzL2JpbmRpbmctbW9kZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvcnVudGltZS9kaXN0L2VzbmV4dC9yZXNvdXJjZXMvYmluZGluZy1iZWhhdmlvcnMvZGVib3VuY2UuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL3J1bnRpbWUvZGlzdC9lc25leHQvcmVzb3VyY2VzL2JpbmRpbmctYmVoYXZpb3JzL3NpZ25hbHMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL3J1bnRpbWUvZGlzdC9lc25leHQvcmVzb3VyY2VzL2JpbmRpbmctYmVoYXZpb3JzL3Rocm90dGxlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYXVyZWxpYS9ydW50aW1lL2Rpc3QvZXNuZXh0L3Jlc291cmNlcy9jdXN0b20tYXR0cmlidXRlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYXVyZWxpYS9ydW50aW1lL2Rpc3QvZXNuZXh0L3Jlc291cmNlcy9jdXN0b20tYXR0cmlidXRlcy9mbGFncy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvcnVudGltZS9kaXN0L2VzbmV4dC9yZXNvdXJjZXMvY3VzdG9tLWF0dHJpYnV0ZXMvaWYuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL3J1bnRpbWUvZGlzdC9lc25leHQvcmVzb3VyY2VzL2N1c3RvbS1hdHRyaWJ1dGVzL3JlcGVhdC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvcnVudGltZS9kaXN0L2VzbmV4dC9yZXNvdXJjZXMvY3VzdG9tLWF0dHJpYnV0ZXMvcmVwbGFjZWFibGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL3J1bnRpbWUvZGlzdC9lc25leHQvcmVzb3VyY2VzL2N1c3RvbS1hdHRyaWJ1dGVzL3dpdGguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL3J1bnRpbWUvZGlzdC9lc25leHQvcmVzb3VyY2VzL2N1c3RvbS1lbGVtZW50LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYXVyZWxpYS9ydW50aW1lL2Rpc3QvZXNuZXh0L3Jlc291cmNlcy92YWx1ZS1jb252ZXJ0ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL3J1bnRpbWUvZGlzdC9lc25leHQvcmVzb3VyY2VzL3ZhbHVlLWNvbnZlcnRlcnMvc2FuaXRpemUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL3J1bnRpbWUvZGlzdC9lc25leHQvcmVzb3VyY2VzL3ZhbHVlLWNvbnZlcnRlcnMvdmlldy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvcnVudGltZS9kaXN0L2VzbmV4dC90ZW1wbGF0aW5nL2JpbmRhYmxlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYXVyZWxpYS9ydW50aW1lL2Rpc3QvZXNuZXh0L3RlbXBsYXRpbmcvY2hpbGRyZW4uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL3J1bnRpbWUvZGlzdC9lc25leHQvdGVtcGxhdGluZy9jb250cm9sbGVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYXVyZWxpYS9ydW50aW1lL2Rpc3QvZXNuZXh0L3RlbXBsYXRpbmcvcmVuZGVyLWNvbnRleHQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL3J1bnRpbWUvZGlzdC9lc25leHQvdGVtcGxhdGluZy92aWV3LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYXVyZWxpYS9zY2hlZHVsZXItZG9tL2Rpc3QvZXNuZXh0L2luZGV4LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYXVyZWxpYS9zY2hlZHVsZXIvZGlzdC9lc25leHQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL3NjaGVkdWxlci9kaXN0L2VzbmV4dC9ub3cuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL3NjaGVkdWxlci9kaXN0L2VzbmV4dC9zY2hlZHVsZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL3NjaGVkdWxlci9kaXN0L2VzbmV4dC90YXNrLXF1ZXVlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYXVyZWxpYS9zY2hlZHVsZXIvZGlzdC9lc25leHQvdGFzay5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvc2NoZWR1bGVyL2Rpc3QvZXNuZXh0L3R5cGVzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9hdXJlbGlhL2Rpc3QvZXNuZXh0L2luZGV4LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9hdXJlbGlhL2Rpc3QvZXNuZXh0L3F1aWNrLXN0YXJ0LmpzIiwid2VicGFjazovLy8uL3NyYy9teS1hcHAuc2NzcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9wcm9jZXNzL2Jyb3dzZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy90c2xpYi90c2xpYi5lczYuanMiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9idWlsZGluL2dsb2JhbC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbWFpbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbXktYXBwLmh0bWwiLCJ3ZWJwYWNrOi8vLy4vc3JjL215LWFwcC5zY3NzPzc1ZTciLCJ3ZWJwYWNrOi8vLy4vc3JjL215LWFwcC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1FBQUE7UUFDQTs7UUFFQTtRQUNBOztRQUVBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBOztRQUVBO1FBQ0E7O1FBRUE7UUFDQTs7UUFFQTtRQUNBO1FBQ0E7OztRQUdBO1FBQ0E7O1FBRUE7UUFDQTs7UUFFQTtRQUNBO1FBQ0E7UUFDQSwwQ0FBMEMsZ0NBQWdDO1FBQzFFO1FBQ0E7O1FBRUE7UUFDQTtRQUNBO1FBQ0Esd0RBQXdELGtCQUFrQjtRQUMxRTtRQUNBLGlEQUFpRCxjQUFjO1FBQy9EOztRQUVBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQSx5Q0FBeUMsaUNBQWlDO1FBQzFFLGdIQUFnSCxtQkFBbUIsRUFBRTtRQUNySTtRQUNBOztRQUVBO1FBQ0E7UUFDQTtRQUNBLDJCQUEyQiwwQkFBMEIsRUFBRTtRQUN2RCxpQ0FBaUMsZUFBZTtRQUNoRDtRQUNBO1FBQ0E7O1FBRUE7UUFDQSxzREFBc0QsK0RBQStEOztRQUVySDtRQUNBOzs7UUFHQTtRQUNBOzs7Ozs7Ozs7Ozs7O0FDbEZBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBd0M7QUFDeEM7QUFDQSxLQUFLLE9BQU8sc0VBQXlCLGlDQUFpQztBQUN0RSxLQUFLLE9BQU8sdUVBQTBCLGtDQUFrQztBQUN4RSxLQUFLLE9BQU8sc0VBQXlCLGlDQUFpQztBQUN0RSxLQUFLLE9BQU8scUVBQXdCLGdDQUFnQztBQUNwRSxLQUFLLE9BQU8sb0VBQXVCLCtCQUErQjtBQUNsRSxLQUFLLE9BQU8sdUVBQTBCLGtDQUFrQztBQUN4RSxLQUFLLE9BQU8saUVBQW9CLDRCQUE0QjtBQUM1RCxLQUFLLE9BQU8saUVBQW9CLDRCQUE0QjtBQUM1RCxLQUFLLE9BQU8sMEVBQTZCLHFDQUFxQztBQUM5RSxLQUFL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MERBQTBELEtBQUs7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DOzs7Ozs7Ozs7Ozs7QUMzUEE7QUFBQTtBQUFBO0FBQUE7QUFBNkQ7QUFDN0Q7QUFDQTtBQUNBO0FBQ0EsWUFBWSx3REFBUTtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsT0FBTyxzREFBTTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHdEQUFRLGlCQUFpQix1QkFBdUIsRUFBRSxhQUFhLEdBQUcsZ0JBQWdCLEdBQUcsT0FBTztBQUN4RztBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDOzs7Ozs7Ozs7Ozs7QUN2akJBO0FBQUE7QUFBQTtBQUF1RDtBQUN2RDtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxn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Z0M7QUFDakM7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsc0JBQXNCO0FBQ2hCO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLG9CQUFvQjtBQUNyQixrQzs7Ozs7Ozs7Ozs7O0FDNU1BO0FBQUE7QUFBQTtBQUFBO0FBQUE7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QVUsd0RBQVEsdUNBQXVDLFdBQVc7QUFDcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Qzs7Ozs7Ozs7Ozs7O0FDcjhCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FB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Q3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEM7Ozs7Ozs7Ozs7OztBQzlRQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxrQ0FBa0M7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEM7Ozs7Ozs7Ozs7OztBQzFQQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUM2QztBQUNQO0FBQ0E7QUFDQTtBQUNpQztBQUNoRTtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLGlCQUFp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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQztBQUMxQyxrQkFBa0Isa0RBQVEsV0FBVztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBLGNBQWMsa0RBQVE7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCOzs7Ozs7Ozs7Ozs7QUMxNkJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBMEI7QUFDWTtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxrREFBUSxhQUFhO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxrREFBUSxhQUFhO0FBQzdCO0FBQ0E7QUFDTyx5QkFBeUIsc0NBQUU7QUFDbEM7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixrREFBUSxVQUFVO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGtEQUFRLFVBQVU7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLDJDOzs7Ozs7Ozs7Ozs7QUM3R0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBc0M7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsWUFBWTtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyw0QkFBNEI7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLFNBQVM7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0EseUJBQXlCLG1CQUFtQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0EsV0FBVyxTQUFTO0FBQ3BCO0FBQ0EsbUJBQW1CLFlBQVk7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQSxtQkFBbUIsa0RBQVE7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsZUFBZTtBQUNsQztBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsY0FBYztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLGdCQUFnQjtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQSxtQkFBbUIsU0FBUztBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNNO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBaUQsZ0JBQWdCO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELHFDOzs7Ozs7Ozs7Ozs7QUMvZUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQThLO0FBQ3RIO0FBQzRJO0FBQ3JKO0FBQ1Q7QUFDbUI7QUFDbkI7QUFDb0c7QUFDbkU7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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixVQUFVLEdBQUcsMkJBQTJCLGdCQUFnQixVQUFVLGtCQUFrQixhQUFhLGFBQWEsNENBQTRDLElBQUksb0JBQW9CO0FBQzlNO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsWUFBWTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLFlBQVk7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUVBQWlFLFlBQVk7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsZ0JBQWdCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixtQkFBbUI7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLFFBQVE7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLFFBQVE7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDOEI7QUFDOUIsaUM7Ozs7Ozs7Ozs7OztBQzdlQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLHVDQUF1QztBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLDRCQUE0QjtBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSwwQkFBMEI7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxRQUFRO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrRUFBK0UsU0FBUztBQUN4RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHVCQUF1QjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsS0FBSztBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLFFBQVE7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFdBQVc7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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Q0E7QUFDQTtBQUNBLHlDQUF5QztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsc0JBQXNCLEdBQUcsNkVBQTZCO0FBQ2hFO0FBQ0EsMkJBQTJCLDZFQUE2QjtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0Msd0NBQUc7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHVEQUFVO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IseUVBQW1CO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksMERBQVc7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEM7Ozs7Ozs7Ozs7OztBQ2pNQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQTJDO0FBQ007QUFDWDtBQUNlO0FBQ1E7QUFDN0I7QUFDekI7QUFDUCxrRkFBa0Y7QUFDbEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsc0RBQUs7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLG9EQUFHO0FBQ087QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7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QW1CLGVBQWU7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsb0JBQW9CO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3RkFBd0YsbUJBQW1CO0FBQzNHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RBQVU7QUFDVixJQUFJLHFEQUFLO0FBQ1QsSUFBSSx3REFBVTtBQUNkLElBQUksd0RBQVU7QUFDZCxJQUFJLHdEQUFVO0FBQ2Q7QUFDQSxzQkFBc0Isd0RBQVU7QUFDaEMsSUFBSSw2RUFBb0I7QUFDeEIsSUFBSSx3REFBVTtBQUNkO0FBQytCO0FBQy9CLGlEOzs7Ozs7Ozs7Ozs7QUMxUUE7QUFBQTtBQUFBO0FBQXNEO0FBQy9DO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscU1BQXFNLFlBQVk7QUFDak47QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixpRUFBUztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixTQUFTO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSx3REFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSx3REFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixlQUFlO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixTQUFTO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdGQUF3RixtQkFBbUI7QUFDM0c7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvRDs7Ozs7Ozs7Ozs7O0FDNUlBO0FBQUE7QUFBQTtBQUFxQztBQUM5QixxQkFBcUIsa0RBQUU7QUFDOUI7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELHdDOzs7Ozs7Ozs7Ozs7QUNOQTtBQUFBO0FBQUE7QUFBQTtBQUErQztBQUNzQjtBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIseUJBQXlCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3RkFBd0YsbUJBQW1CO0FBQzNHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qix3REFBVTtBQUNuQyxJQUFJLDZFQUFvQjtBQUN4QixJQUFJLHdEQUFVO0FBQ2Q7QUFDa0M7QUFDbEMsb0Q7Ozs7Ozs7Ozs7OztBQzNGQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQXNGO0FBQ2pCO0FBQ2lCO0FBQ3RGO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQSxlQUFlLDREQUFZLFdBQVcsa0VBQWlCO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLHdEQUFRO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QjtBQUM5QjtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSx3REFBUSxRQUFRLDhEQUFhO0FBQ3JDLFFBQVEsd0RBQVEsUUFBUSw4REFBYTtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQywwRUFBZ0I7QUFDbkQsMEJBQTBCLDBFQUFnQjtBQUMxQywwQkFBMEIsZ0ZBQXNCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBLDhCQUE4QiwrREFBTztBQUNyQztBQUNBO0FBQ0EsOEJBQThCLHdEQUFRO0FBQ3RDO0FBQ0E7QUFDQSxRQUFRLHdEQUFRLFFBQVEsOERBQWE7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBLFFBQVEsd0RBQVEsUUFBUSw4REFBYTtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQzs7Ozs7Ozs7Ozs7O0FDeEhBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBbUM7QUFDNEI7QUFDbUI7QUFDbEY7QUFDQTtBQUNBLHFDQUFxQywwRkFBcUIscUJBQXFCLDJEQUFVO0FBQ3pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0Isd0RBQVU7QUFDaEMsSUFBSSx3RUFBZTtBQUNuQjtBQUMrQjtBQUMvQixnQzs7Ozs7Ozs7Ozs7O0FDZkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBbUM7QUFDUTtBQUNRO0FBQ3VCO0FBQzFFO0FBQ087QUFDUCxtQkFBbUIsMEZBQXVCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isd0RBQVE7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLHdEQUFVO0FBQ2hDLElBQUksd0VBQWU7QUFDbkI7QUFDK0I7QUFDL0IsZ0M7Ozs7Ozs7Ozs7OztBQzdCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBd0Q7QUFDYjtBQUM2QztBQUN0QjtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isd0RBQVE7QUFDMUI7QUFDQSw2QkFBNkIsNERBQVcsNEJBQTRCLDREQUFXO0FBQy9FLGtCQUFrQix3REFBUTtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHdEQUFRO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsMEVBQWUscUJBQXFCLHFEQUFJO0FBQzdFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0Isd0RBQVU7QUFDekMsSUFBSSx3RUFBZTtBQUNuQixJQUFJLHFEQUFPLElBQUksaUVBQWdCO0FBQy9CLElBQUksd0RBQVU7QUFDZDtBQUN3QztBQUN4QywwQzs7Ozs7Ozs7Ozs7O0FDeENBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQXdEO0FBQ2I7QUFDMkM7QUFDbEQ7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsUUFBUTtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBbUQsd0RBQVE7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixRQUFRO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsUUFBUTtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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QUNBO0FBQ0EsZ0JBQWdCLHNFQUFjLFVBQVUsc0VBQWM7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLHdEQUFRO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLFFBQVE7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLFFBQVE7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsWUFBWTtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsUUFBUTtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJEQUEyRCx3REFBUTtBQUM1RDtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsd0NBQXdDO0FBQ2xDO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJFQUEyRTtBQUMzRSxDQUFDLHdDQUF3QztBQUN6QyxpQzs7Ozs7Ozs7Ozs7O0FDakpBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QyxlQUFlO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsdUVBQXVFO0FBQzlHO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQSxnQ0FBZ0MsNkNBQTZDO0FBQzdFO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBLGdDQUFnQyw0Q0FBNEM7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRCxLQUFLO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0M7Ozs7Ozs7Ozs7OztBQ3RRQTtBQUFBO0FBQUE7QUFBQTtBQUFxRDtBQUNTO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0Isd0VBQWdCO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNPO0FBQ1Asb0JBQW9CLDREQUFTLEtBQUssd0RBQVE7QUFDMUM7QUFDQSxRQUFRLDREQUFTLEtBQUssd0RBQVEseUJBQXlCLDREQUFTLGVBQWUsc0RBQUc7QUFDbEY7QUFDQTtBQUNBO0FBQ0EsaUM7Ozs7Ozs7Ozs7OztBQ3JMQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUE2QjtBQUN3QjtBQUNYO0FBQ0s7QUFDb0I7QUFDbkUsaUM7Ozs7Ozs7Ozs7OztBQ0xBO0FBQUE7QUFBQTtBQUErQztBQUMvQyxtQkFBbUIsd0RBQVEsVUFBVSx3REFBUTtBQUN0QyxZQUFZLGtEQUFFO0FBQ3JCLCtCOzs7Ozs7Ozs7Ozs7QUNIQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBcUM7QUFDYztBQUNUO0FBQzFDO0FBQ08sbUJBQW1CLGtEQUFFO0FBQ3JCO0FBQ1A7QUFDQTtBQUNBLGtDQUFrQyxxREFBUztBQUMzQywrQkFBK0IscURBQVM7QUFDeEMsa0NBQWtDLHFEQUFTO0FBQzNDLG1DQUFtQyxxREFBUztBQUM1Qyw2QkFBNkIscURBQVM7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxpREFBaUQsSUFBSSxJQUFJLDhEQUF1QjtBQUMvRiw4REFBOEQsdUNBQXVDO0FBQ3JHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQzs7Ozs7Ozs7Ozs7O0FDNUZBO0FBQUE7QUFBQTtBQUFBO0FBQXlFO0FBQzFDO0FBQ3hCO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxtRUFBb0I7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsdUNBQXVDLElBQUksSUFBSSw4REFBdUI7QUFDckY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQiwwQ0FBSTtBQUMvQjtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsMENBQUk7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLFFBQVE7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0M7Ozs7Ozs7Ozs7OztBQ3pYQTtBQUFBO0FBQUE7QUFBQTtBQUFnRDtBQUN6QztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBbUQsbUVBQW9CO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELGFBQWE7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQzs7Ozs7Ozs7Ozs7O0FDckpBO0FBQUE7QUFBQTtBQUFBO0FBQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLDhDQUE4QztBQUN4QztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDOzs7Ozs7Ozs7Ozs7QUMzQkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQTREO0FBQ2E7QUFRTjtBQWlDckI7QUFDMEI7QUErRXhDO0FBUXVEO0FBb1V0QjtBQWlHdkI7QUFDMUMsaUM7Ozs7Ozs7Ozs7OztBQ3hpQkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQW9EO0FBQ29CO0FBQ25DO0FBQ2lDO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixxRkFBMkI7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksSUFBcUM7QUFDakQsd0JBQXdCLGlFQUFrQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNPLHNCQUFzQix3REFBUTtBQUNyQyw0QkFBNEIsa0RBQUU7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSw4REFBYTtBQUN6QjtBQUNBLCtCQUErQiw4REFBYTtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Qzs7Ozs7Ozs7Ozs7O0FDbERBO0FBQ0Esa0NBQWtDLG1CQUFPLENBQUMscUdBQWdEO0FBQzFGO0FBQ0E7QUFDQSxjQUFjLFFBQVMsYUFBYSxnQ0FBZ0MsR0FBRztBQUN2RTtBQUNBOzs7Ozs7Ozs7Ozs7O0FDTmE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7O0FBRWhCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDRDQUE0QyxxQkFBcUI7QUFDakU7O0FBRUE7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EscUJBQXFCLGlCQUFpQjtBQUN0QztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsb0JBQW9CLHFCQUFxQjtBQUN6Qzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsOEJBQThCOztBQUU5Qjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBLENBQUM7OztBQUdEO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRCxjQUFjO0FBQ25FO0FBQ0EsQzs7Ozs7Ozs7Ozs7QUM3RkE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixzQkFBc0I7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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O0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVPO0FBQ1AsNENBQTRDO0FBQzVDOztBQUVPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDcE5BOztBQUVBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsNENBQTRDOztBQUU1Qzs7Ozs7Ozs7Ozs7OztBQ25CQTtBQUFBO0FBQUE7QUFBOEI7QUFDRztBQUNqQywrQ0FBTztBQUNQLFNBQVMsNkNBQUs7QUFDZDs7Ozs7Ozs7Ozs7OztBQ0pBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7Ozs7Ozs7Ozs7OztBQ0FBLFVBQVUsbUJBQU8sQ0FBQyxtSkFBd0U7QUFDMUYsMEJBQTBCLG1CQUFPLENBQUMseVNBQWdLOztBQUVsTTs7QUFFQTtBQUNBLDBCQUEwQixRQUFTO0FBQ25DOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7Ozs7QUFJQSwwQjs7Ozs7Ozs7Ozs7O0FDcEJBO0FBQUE7QUFBQTtBQUFBO0FBQUEsa0JBQWtCLFNBQUksSUFBSSxTQUFJO0FBQzlCO0FBQ0E7QUFDQSw0Q0FBNEMsUUFBUTtBQUNwRDtBQUNBO0FBQzhDO0FBQ0c7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxzRUFBYSxDQUFDLHlDQUFZO0FBQzlCO0FBQ2lCIiwiZmlsZSI6ImVudHJ5LWJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSBcIi4vc3JjL21haW4udHNcIik7XG4iLCJpbXBvcnQgKiBhcyBBU1QgZnJvbSAnQGF1cmVsaWEvcnVudGltZSc7XG5jb25zdCBhc3RUeXBlTWFwID0gW1xuICAgIHsgdHlwZTogQVNULkFjY2Vzc0tleWVkRXhwcmVzc2lvbiwgbmFtZTogJ0FjY2Vzc0tleWVkRXhwcmVzc2lvbicgfSxcbiAgICB7IHR5cGU6IEFTVC5BY2Nlc3NNZW1iZXJFeHByZXNzaW9uLCBuYW1lOiAnQWNjZXNzTWVtYmVyRXhwcmVzc2lvbicgfSxcbiAgICB7IHR5cGU6IEFTVC5BY2Nlc3NTY29wZUV4cHJlc3Npb24sIG5hbWU6ICdBY2Nlc3NTY29wZUV4cHJlc3Npb24nIH0sXG4gICAgeyB0eXBlOiBBU1QuQWNjZXNzVGhpc0V4cHJlc3Npb24sIG5hbWU6ICdBY2Nlc3NUaGlzRXhwcmVzc2lvbicgfSxcbiAgICB7IHR5cGU6IEFTVC5BcnJheUJpbmRpbmdQYXR0ZXJuLCBuYW1lOiAnQXJyYXlCaW5kaW5nUGF0dGVybicgfSxcbiAgICB7IHR5cGU6IEFTVC5BcnJheUxpdGVyYWxFeHByZXNzaW9uLCBuYW1lOiAnQXJyYXlMaXRlcmFsRXhwcmVzc2lvbicgfSxcbiAgICB7IHR5cGU6IEFTVC5Bc3NpZ25FeHByZXNzaW9uLCBuYW1lOiAnQXNzaWduRXhwcmVzc2lvbicgfSxcbiAgICB7IHR5cGU6IEFTVC5CaW5hcnlFeHByZXNzaW9uLCBuYW1lOiAnQmluYXJ5RXhwcmVzc2lvbicgfSxcbiAgICB7IHR5cGU6IEFTVC5CaW5kaW5nQmVoYXZpb3JFeHByZXNzaW9uLCBuYW1lOiAnQmluZGluZ0JlaGF2aW9yRXhwcmVzc2lvbicgfSxcbiAgICB7IHR5cGU6IEFTVC5CaW5kaW5nSWRlbnRpZmllciwgbmFtZTogJ0JpbmRpbmdJZGVudGlmaWVyJyB9LFxuICAgIHsgdHlwZTogQVNULkNhbGxGdW5jdGlvbkV4cHJlc3Npb24sIG5hbWU6ICdDYWxsRnVuY3Rpb25FeHByZXNzaW9uJyB9LFxuICAgIHsgdHlwZTogQVNULkNhbGxNZW1iZXJFeHByZXNzaW9uLCBuYW1lOiAnQ2FsbE1lbWJlckV4cHJlc3Npb24nIH0sXG4gICAgeyB0eXBlOiBBU1QuQ2FsbFNjb3BlRXhwcmVzc2lvbiwgbmFtZTogJ0NhbGxTY29wZUV4cHJlc3Npb24nIH0sXG4gICAgeyB0eXBlOiBBU1QuQ29uZGl0aW9uYWxFeHByZXNzaW9uLCBuYW1lOiAnQ29uZGl0aW9uYWxFeHByZXNzaW9uJyB9LFxuICAgIHsgdHlwZTogQVNULkZvck9mU3RhdGVtZW50LCBuYW1lOiAnRm9yT2ZTdGF0ZW1lbnQnIH0sXG4gICAgeyB0eXBlOiBBU1QuSHRtbExpdGVyYWxFeHByZXNzaW9uLCBuYW1lOiAnSHRtbExpdGVyYWxFeHByZXNzaW9uJyB9LFxuICAgIHsgdHlwZTogQVNULkludGVycG9sYXRpb24sIG5hbWU6ICdJbnRlcnBvbGF0aW9uJyB9LFxuICAgIHsgdHlwZTogQVNULk9iamVjdEJpbmRpbmdQYXR0ZXJuLCBuYW1lOiAnT2JqZWN0QmluZGluZ1BhdHRlcm4nIH0sXG4gICAgeyB0eXBlOiBBU1QuT2JqZWN0TGl0ZXJhbEV4cHJlc3Npb24sIG5hbWU6ICdPYmplY3RMaXRlcmFsRXhwcmVzc2lvbicgfSxcbiAgICB7IHR5cGU6IEFTVC5QcmltaXRpdmVMaXRlcmFsRXhwcmVzc2lvbiwgbmFtZTogJ1ByaW1pdGl2ZUxpdGVyYWxFeHByZXNzaW9uJyB9LFxuICAgIHsgdHlwZTogQVNULlRhZ2dlZFRlbXBsYXRlRXhwcmVzc2lvbiwgbmFtZTogJ1RhZ2dlZFRlbXBsYXRlRXhwcmVzc2lvbicgfSxcbiAgICB7IHR5cGU6IEFTVC5UZW1wbGF0ZUV4cHJlc3Npb24sIG5hbWU6ICdUZW1wbGF0ZUV4cHJlc3Npb24nIH0sXG4gICAgeyB0eXBlOiBBU1QuVW5hcnlFeHByZXNzaW9uLCBuYW1lOiAnVW5hcnlFeHByZXNzaW9uJyB9LFxuICAgIHsgdHlwZTogQVNULlZhbHVlQ29udmVydGVyRXhwcmVzc2lvbiwgbmFtZTogJ1ZhbHVlQ29udmVydGVyRXhwcmVzc2lvbicgfVxuXTtcbmV4cG9ydCBmdW5jdGlvbiBlbmFibGVJbXByb3ZlZEV4cHJlc3Npb25EZWJ1Z2dpbmcoKSB7XG4gICAgYXN0VHlwZU1hcC5mb3JFYWNoKHggPT4geyBhZG9wdERlYnVnTWV0aG9kcyh4LnR5cGUsIHgubmFtZSk7IH0pO1xufVxuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkb3B0RGVidWdNZXRob2RzKCR0eXBlLCBuYW1lKSB7XG4gICAgJHR5cGUucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gVW5wYXJzZXIudW5wYXJzZSh0aGlzKTsgfTtcbn1cbmV4cG9ydCBjbGFzcyBVbnBhcnNlciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMudGV4dCA9ICcnO1xuICAgIH1cbiAgICBzdGF0aWMgdW5wYXJzZShleHByKSB7XG4gICAgICAgIGNvbnN0IHZpc2l0b3IgPSBuZXcgVW5wYXJzZXIoKTtcbiAgICAgICAgZXhwci5hY2NlcHQodmlzaXRvcik7XG4gICAgICAgIHJldHVybiB2aXNpdG9yLnRleHQ7XG4gICAgfVxuICAgIHZpc2l0QWNjZXNzTWVtYmVyKGV4cHIpIHtcbiAgICAgICAgZXhwci5vYmplY3QuYWNjZXB0KHRoaXMpO1xuICAgICAgICB0aGlzLnRleHQgKz0gYC4ke2V4cHIubmFtZX1gO1xuICAgIH1cbiAgICB2aXNpdEFjY2Vzc0tleWVkKGV4cHIpIHtcbiAgICAgICAgZXhwci5vYmplY3QuYWNjZXB0KHRoaXMpO1xuICAgICAgICB0aGlzLnRleHQgKz0gJ1snO1xuICAgICAgICBleHByLmtleS5hY2NlcHQodGhpcyk7XG4gICAgICAgIHRoaXMudGV4dCArPSAnXSc7XG4gICAgfVxuICAgIHZpc2l0QWNjZXNzVGhpcyhleHByKSB7XG4gICAgICAgIGlmIChleHByLmFuY2VzdG9yID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLnRleHQgKz0gJyR0aGlzJztcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRleHQgKz0gJyRwYXJlbnQnO1xuICAgICAgICBsZXQgaSA9IGV4cHIuYW5jZXN0b3IgLSAxO1xuICAgICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgICAgICB0aGlzLnRleHQgKz0gJy4kcGFyZW50JztcbiAgICAgICAgfVxuICAgIH1cbiAgICB2aXNpdEFjY2Vzc1Njb3BlKGV4cHIpIHtcbiAgICAgICAgbGV0IGkgPSBleHByLmFuY2VzdG9yO1xuICAgICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgICAgICB0aGlzLnRleHQgKz0gJyRwYXJlbnQuJztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRleHQgKz0gZXhwci5uYW1lO1xuICAgIH1cbiAgICB2aXNpdEFycmF5TGl0ZXJhbChleHByKSB7XG4gICAgICAgIGNvbnN0IGVsZW1lbnRzID0gZXhwci5lbGVtZW50cztcbiAgICAgICAgdGhpcy50ZXh0ICs9ICdbJztcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbmd0aCA9IGVsZW1lbnRzLmxlbmd0aDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBpZiAoaSAhPT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMudGV4dCArPSAnLCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbGVtZW50c1tpXS5hY2NlcHQodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50ZXh0ICs9ICddJztcbiAgICB9XG4gICAgdmlzaXRPYmplY3RMaXRlcmFsKGV4cHIpIHtcbiAgICAgICAgY29uc3Qga2V5cyA9IGV4cHIua2V5cztcbiAgICAgICAgY29uc3QgdmFsdWVzID0gZXhwci52YWx1ZXM7XG4gICAgICAgIHRoaXMudGV4dCArPSAneyc7XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW5ndGggPSBrZXlzLmxlbmd0aDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBpZiAoaSAhPT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMudGV4dCArPSAnLCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnRleHQgKz0gYCcke2tleXNbaV19JzpgO1xuICAgICAgICAgICAgdmFsdWVzW2ldLmFjY2VwdCh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRleHQgKz0gJ30nO1xuICAgIH1cbiAgICB2aXNpdFByaW1pdGl2ZUxpdGVyYWwoZXhwcikge1xuICAgICAgICB0aGlzLnRleHQgKz0gJygnO1xuICAgICAgICBpZiAodHlwZW9mIGV4cHIudmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBjb25zdCBlc2NhcGVkID0gZXhwci52YWx1ZS5yZXBsYWNlKC8nL2csICdcXFxcXFwnJyk7XG4gICAgICAgICAgICB0aGlzLnRleHQgKz0gYCcke2VzY2FwZWR9J2A7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnRleHQgKz0gYCR7ZXhwci52YWx1ZX1gO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudGV4dCArPSAnKSc7XG4gICAgfVxuICAgIHZpc2l0Q2FsbEZ1bmN0aW9uKGV4cHIpIHtcbiAgICAgICAgdGhpcy50ZXh0ICs9ICcoJztcbiAgICAgICAgZXhwci5mdW5jLmFjY2VwdCh0aGlzKTtcbiAgICAgICAgdGhpcy53cml0ZUFyZ3MoZXhwci5hcmdzKTtcbiAgICAgICAgdGhpcy50ZXh0ICs9ICcpJztcbiAgICB9XG4gICAgdmlzaXRDYWxsTWVtYmVyKGV4cHIpIHtcbiAgICAgICAgdGhpcy50ZXh0ICs9ICcoJztcbiAgICAgICAgZXhwci5vYmplY3QuYWNjZXB0KHRoaXMpO1xuICAgICAgICB0aGlzLnRleHQgKz0gYC4ke2V4cHIubmFtZX1gO1xuICAgICAgICB0aGlzLndyaXRlQXJncyhleHByLmFyZ3MpO1xuICAgICAgICB0aGlzLnRleHQgKz0gJyknO1xuICAgIH1cbiAgICB2aXNpdENhbGxTY29wZShleHByKSB7XG4gICAgICAgIHRoaXMudGV4dCArPSAnKCc7XG4gICAgICAgIGxldCBpID0gZXhwci5hbmNlc3RvcjtcbiAgICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICAgICAgdGhpcy50ZXh0ICs9ICckcGFyZW50Lic7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50ZXh0ICs9IGV4cHIubmFtZTtcbiAgICAgICAgdGhpcy53cml0ZUFyZ3MoZXhwci5hcmdzKTtcbiAgICAgICAgdGhpcy50ZXh0ICs9ICcpJztcbiAgICB9XG4gICAgdmlzaXRUZW1wbGF0ZShleHByKSB7XG4gICAgICAgIGNvbnN0IHsgY29va2VkLCBleHByZXNzaW9ucyB9ID0gZXhwcjtcbiAgICAgICAgY29uc3QgbGVuZ3RoID0gZXhwcmVzc2lvbnMubGVuZ3RoO1xuICAgICAgICB0aGlzLnRleHQgKz0gJ2AnO1xuICAgICAgICB0aGlzLnRleHQgKz0gY29va2VkWzBdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBleHByZXNzaW9uc1tpXS5hY2NlcHQodGhpcyk7XG4gICAgICAgICAgICB0aGlzLnRleHQgKz0gY29va2VkW2kgKyAxXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRleHQgKz0gJ2AnO1xuICAgIH1cbiAgICB2aXNpdFRhZ2dlZFRlbXBsYXRlKGV4cHIpIHtcbiAgICAgICAgY29uc3QgeyBjb29rZWQsIGV4cHJlc3Npb25zIH0gPSBleHByO1xuICAgICAgICBjb25zdCBsZW5ndGggPSBleHByZXNzaW9ucy5sZW5ndGg7XG4gICAgICAgIGV4cHIuZnVuYy5hY2NlcHQodGhpcyk7XG4gICAgICAgIHRoaXMudGV4dCArPSAnYCc7XG4gICAgICAgIHRoaXMudGV4dCArPSBjb29rZWRbMF07XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGV4cHJlc3Npb25zW2ldLmFjY2VwdCh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMudGV4dCArPSBjb29rZWRbaSArIDFdO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudGV4dCArPSAnYCc7XG4gICAgfVxuICAgIHZpc2l0VW5hcnkoZXhwcikge1xuICAgICAgICB0aGlzLnRleHQgKz0gYCgke2V4cHIub3BlcmF0aW9ufWA7XG4gICAgICAgIGlmIChleHByLm9wZXJhdGlvbi5jaGFyQ29kZUF0KDApID49IC8qIGEgKi8gOTcpIHtcbiAgICAgICAgICAgIHRoaXMudGV4dCArPSAnICc7XG4gICAgICAgIH1cbiAgICAgICAgZXhwci5leHByZXNzaW9uLmFjY2VwdCh0aGlzKTtcbiAgICAgICAgdGhpcy50ZXh0ICs9ICcpJztcbiAgICB9XG4gICAgdmlzaXRCaW5hcnkoZXhwcikge1xuICAgICAgICB0aGlzLnRleHQgKz0gJygnO1xuICAgICAgICBleHByLmxlZnQuYWNjZXB0KHRoaXMpO1xuICAgICAgICBpZiAoZXhwci5vcGVyYXRpb24uY2hhckNvZGVBdCgwKSA9PT0gLyogaSAqLyAxMDUpIHtcbiAgICAgICAgICAgIHRoaXMudGV4dCArPSBgICR7ZXhwci5vcGVyYXRpb259IGA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnRleHQgKz0gZXhwci5vcGVyYXRpb247XG4gICAgICAgIH1cbiAgICAgICAgZXhwci5yaWdodC5hY2NlcHQodGhpcyk7XG4gICAgICAgIHRoaXMudGV4dCArPSAnKSc7XG4gICAgfVxuICAgIHZpc2l0Q29uZGl0aW9uYWwoZXhwcikge1xuICAgICAgICB0aGlzLnRleHQgKz0gJygnO1xuICAgICAgICBleHByLmNvbmRpdGlvbi5hY2NlcHQodGhpcyk7XG4gICAgICAgIHRoaXMudGV4dCArPSAnPyc7XG4gICAgICAgIGV4cHIueWVzLmFjY2VwdCh0aGlzKTtcbiAgICAgICAgdGhpcy50ZXh0ICs9ICc6JztcbiAgICAgICAgZXhwci5uby5hY2NlcHQodGhpcyk7XG4gICAgICAgIHRoaXMudGV4dCArPSAnKSc7XG4gICAgfVxuICAgIHZpc2l0QXNzaWduKGV4cHIpIHtcbiAgICAgICAgdGhpcy50ZXh0ICs9ICcoJztcbiAgICAgICAgZXhwci50YXJnZXQuYWNjZXB0KHRoaXMpO1xuICAgICAgICB0aGlzLnRleHQgKz0gJz0nO1xuICAgICAgICBleHByLnZhbHVlLmFjY2VwdCh0aGlzKTtcbiAgICAgICAgdGhpcy50ZXh0ICs9ICcpJztcbiAgICB9XG4gICAgdmlzaXRWYWx1ZUNvbnZlcnRlcihleHByKSB7XG4gICAgICAgIGNvbnN0IGFyZ3MgPSBleHByLmFyZ3M7XG4gICAgICAgIGV4cHIuZXhwcmVzc2lvbi5hY2NlcHQodGhpcyk7XG4gICAgICAgIHRoaXMudGV4dCArPSBgfCR7ZXhwci5uYW1lfWA7XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW5ndGggPSBhcmdzLmxlbmd0aDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICB0aGlzLnRleHQgKz0gJzonO1xuICAgICAgICAgICAgYXJnc1tpXS5hY2NlcHQodGhpcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdmlzaXRCaW5kaW5nQmVoYXZpb3IoZXhwcikge1xuICAgICAgICBjb25zdCBhcmdzID0gZXhwci5hcmdzO1xuICAgICAgICBleHByLmV4cHJlc3Npb24uYWNjZXB0KHRoaXMpO1xuICAgICAgICB0aGlzLnRleHQgKz0gYCYke2V4cHIubmFtZX1gO1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgbGVuZ3RoID0gYXJncy5sZW5ndGg7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgdGhpcy50ZXh0ICs9ICc6JztcbiAgICAgICAgICAgIGFyZ3NbaV0uYWNjZXB0KHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHZpc2l0QXJyYXlCaW5kaW5nUGF0dGVybihleHByKSB7XG4gICAgICAgIGNvbnN0IGVsZW1lbnRzID0gZXhwci5lbGVtZW50cztcbiAgICAgICAgdGhpcy50ZXh0ICs9ICdbJztcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbmd0aCA9IGVsZW1lbnRzLmxlbmd0aDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBpZiAoaSAhPT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMudGV4dCArPSAnLCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbGVtZW50c1tpXS5hY2NlcHQodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50ZXh0ICs9ICddJztcbiAgICB9XG4gICAgdmlzaXRPYmplY3RCaW5kaW5nUGF0dGVybihleHByKSB7XG4gICAgICAgIGNvbnN0IGtleXMgPSBleHByLmtleXM7XG4gICAgICAgIGNvbnN0IHZhbHVlcyA9IGV4cHIudmFsdWVzO1xuICAgICAgICB0aGlzLnRleHQgKz0gJ3snO1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgbGVuZ3RoID0ga2V5cy5sZW5ndGg7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgaWYgKGkgIT09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRleHQgKz0gJywnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy50ZXh0ICs9IGAnJHtrZXlzW2ldfSc6YDtcbiAgICAgICAgICAgIHZhbHVlc1tpXS5hY2NlcHQodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50ZXh0ICs9ICd9JztcbiAgICB9XG4gICAgdmlzaXRCaW5kaW5nSWRlbnRpZmllcihleHByKSB7XG4gICAgICAgIHRoaXMudGV4dCArPSBleHByLm5hbWU7XG4gICAgfVxuICAgIHZpc2l0SHRtbExpdGVyYWwoZXhwcikgeyB0aHJvdyBuZXcgRXJyb3IoJ3Zpc2l0SHRtbExpdGVyYWwnKTsgfVxuICAgIHZpc2l0Rm9yT2ZTdGF0ZW1lbnQoZXhwcikge1xuICAgICAgICBleHByLmRlY2xhcmF0aW9uLmFjY2VwdCh0aGlzKTtcbiAgICAgICAgdGhpcy50ZXh0ICs9ICcgb2YgJztcbiAgICAgICAgZXhwci5pdGVyYWJsZS5hY2NlcHQodGhpcyk7XG4gICAgfVxuICAgIHZpc2l0SW50ZXJwb2xhdGlvbihleHByKSB7XG4gICAgICAgIGNvbnN0IHsgcGFydHMsIGV4cHJlc3Npb25zIH0gPSBleHByO1xuICAgICAgICBjb25zdCBsZW5ndGggPSBleHByZXNzaW9ucy5sZW5ndGg7XG4gICAgICAgIHRoaXMudGV4dCArPSAnJHsnO1xuICAgICAgICB0aGlzLnRleHQgKz0gcGFydHNbMF07XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGV4cHJlc3Npb25zW2ldLmFjY2VwdCh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMudGV4dCArPSBwYXJ0c1tpICsgMV07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50ZXh0ICs9ICd9JztcbiAgICB9XG4gICAgd3JpdGVBcmdzKGFyZ3MpIHtcbiAgICAgICAgdGhpcy50ZXh0ICs9ICcoJztcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbmd0aCA9IGFyZ3MubGVuZ3RoOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGlmIChpICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50ZXh0ICs9ICcsJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFyZ3NbaV0uYWNjZXB0KHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudGV4dCArPSAnKSc7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dW5wYXJzZXIuanMubWFwIiwiaW1wb3J0IHsgUmVwb3J0ZXIgYXMgUnVudGltZVJlcG9ydGVyLCBUcmFjZXIgfSBmcm9tICdAYXVyZWxpYS9rZXJuZWwnO1xuaW1wb3J0IHsgZW5hYmxlSW1wcm92ZWRFeHByZXNzaW9uRGVidWdnaW5nIH0gZnJvbSAnLi9iaW5kaW5nL3VucGFyc2VyJztcbmltcG9ydCB7IFJlcG9ydGVyIH0gZnJvbSAnLi9yZXBvcnRlcic7XG5pbXBvcnQgeyBEZWJ1Z1RyYWNlciB9IGZyb20gJy4vdHJhY2VyJztcbmV4cG9ydCBjb25zdCBEZWJ1Z0NvbmZpZ3VyYXRpb24gPSB7XG4gICAgcmVnaXN0ZXIoY29udGFpbmVyKSB7XG4gICAgICAgIFJlcG9ydGVyLndyaXRlKDIpO1xuICAgICAgICBPYmplY3QuYXNzaWduKFJ1bnRpbWVSZXBvcnRlciwgUmVwb3J0ZXIpO1xuICAgICAgICBlbmFibGVJbXByb3ZlZEV4cHJlc3Npb25EZWJ1Z2dpbmcoKTtcbiAgICB9XG59O1xuZXhwb3J0IGNvbnN0IFRyYWNlQ29uZmlndXJhdGlvbiA9IHtcbiAgICByZWdpc3Rlcihjb250YWluZXIpIHtcbiAgICAgICAgT2JqZWN0LmFzc2lnbihUcmFjZXIsIERlYnVnVHJhY2VyKTtcbiAgICB9XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29uZmlndXJhdGlvbi5qcy5tYXAiLCJleHBvcnQgeyBEZWJ1Z0NvbmZpZ3VyYXRpb24sIFRyYWNlQ29uZmlndXJhdGlvbiB9IGZyb20gJy4vY29uZmlndXJhdGlvbic7XG5leHBvcnQgeyBEZWJ1Z1RyYWNlciwgc3RyaW5naWZ5TGlmZWN5Y2xlRmxhZ3MsIH0gZnJvbSAnLi90cmFjZXInO1xuZXhwb3J0IHsgVW5wYXJzZXIsIH0gZnJvbSAnLi9iaW5kaW5nL3VucGFyc2VyJztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCIsImltcG9ydCB7IFJlcG9ydGVyIGFzIFJ1bnRpbWVSZXBvcnRlciB9IGZyb20gJ0BhdXJlbGlhL2tlcm5lbCc7XG5mdW5jdGlvbiBhcHBseUZvcm1hdChtZXNzYWdlLCAuLi5wYXJhbXMpIHtcbiAgICB3aGlsZSAobWVzc2FnZS5pbmNsdWRlcygnJXMnKSkge1xuICAgICAgICBtZXNzYWdlID0gbWVzc2FnZS5yZXBsYWNlKCclcycsIFN0cmluZyhwYXJhbXMuc2hpZnQoKSkpO1xuICAgIH1cbiAgICByZXR1cm4gbWVzc2FnZTtcbn1cbmV4cG9ydCBjb25zdCBSZXBvcnRlciA9IHtcbiAgICAuLi5SdW50aW1lUmVwb3J0ZXIsXG4gICAgZ2V0IGxldmVsKCkge1xuICAgICAgICByZXR1cm4gUnVudGltZVJlcG9ydGVyLmxldmVsO1xuICAgIH0sXG4gICAgd3JpdGUoY29kZSwgLi4ucGFyYW1zKSB7XG4gICAgICAgIGNvbnN0IGluZm8gPSBnZXRNZXNzYWdlSW5mb0ZvckNvZGUoY29kZSk7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBgQ29kZSAke2NvZGV9OiAke2luZm8ubWVzc2FnZX1gO1xuICAgICAgICBzd2l0Y2ggKGluZm8ubGV2ZWwpIHtcbiAgICAgICAgICAgIGNhc2UgMSAvKiBkZWJ1ZyAqLzpcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5sZXZlbCA8PSAxIC8qIGRlYnVnICovKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcobWVzc2FnZSwgLi4ucGFyYW1zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDIgLyogaW5mbyAqLzpcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5sZXZlbCA8PSAyIC8qIGluZm8gKi8pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5pbmZvKG1lc3NhZ2UsIC4uLnBhcmFtcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAzIC8qIHdhcm4gKi86XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubGV2ZWwgPD0gMyAvKiB3YXJuICovKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihtZXNzYWdlLCAuLi5wYXJhbXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgNCAvKiBlcnJvciAqLzoge1xuICAgICAgICAgICAgICAgIHRocm93IHRoaXMuZXJyb3IoY29kZSwgLi4ucGFyYW1zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG4gICAgZXJyb3IoY29kZSwgLi4ucGFyYW1zKSB7XG4gICAgICAgIGNvbnN0IGluZm8gPSBnZXRNZXNzYWdlSW5mb0ZvckNvZGUoY29kZSk7XG4gICAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKGBDb2RlICR7Y29kZX06ICR7YXBwbHlGb3JtYXQoaW5mby5tZXNzYWdlLCAuLi5wYXJhbXMpfWApO1xuICAgICAgICBlcnJvci5kYXRhID0gcGFyYW1zO1xuICAgICAgICByZXR1cm4gZXJyb3I7XG4gICAgfVxufTtcbmZ1bmN0aW9uIGdldE1lc3NhZ2VJbmZvRm9yQ29kZShjb2RlKSB7XG4gICAgY29uc3QgaW5mbyA9IGNvZGVMb29rdXBbY29kZV07XG4gICAgcmV0dXJuIGluZm8gIT09IHVuZGVmaW5lZCA/IGluZm8gOiBjcmVhdGVJbnZhbGlkQ29kZU1lc3NhZ2VJbmZvKGNvZGUpO1xufVxuZnVuY3Rpb24gY3JlYXRlSW52YWxpZENvZGVNZXNzYWdlSW5mbyhjb2RlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbGV2ZWw6IDQgLyogZXJyb3IgKi8sXG4gICAgICAgIG1lc3NhZ2U6IGBBdHRlbXB0ZWQgdG8gcmVwb3J0IHdpdGggdW5rbm93biBjb2RlICR7Y29kZX0uYFxuICAgIH07XG59XG5jb25zdCBjb2RlTG9va3VwID0ge1xuICAgIDA6IHtcbiAgICAgICAgbGV2ZWw6IDMgLyogd2FybiAqLyxcbiAgICAgICAgbWVzc2FnZTogJ0Nhbm5vdCBhZGQgb2JzZXJ2ZXJzIHRvIG9iamVjdC4nXG4gICAgfSxcbiAgICAxOiB7XG4gICAgICAgIGxldmVsOiAzIC8qIHdhcm4gKi8sXG4gICAgICAgIG1lc3NhZ2U6ICdDYW5ub3Qgb2JzZXJ2ZSBwcm9wZXJ0eSBvZiBvYmplY3QuJ1xuICAgIH0sXG4gICAgMjoge1xuICAgICAgICBsZXZlbDogMiAvKiBpbmZvICovLFxuICAgICAgICBtZXNzYWdlOiAnU3RhcnRpbmcgYXBwbGljYXRpb24gaW4gZGVidWcgbW9kZS4nXG4gICAgfSxcbiAgICAzOiB7XG4gICAgICAgIGxldmVsOiA0IC8qIGVycm9yICovLFxuICAgICAgICBtZXNzYWdlOiAnUnVudGltZSBleHByZXNzaW9uIGNvbXBpbGF0aW9uIGlzIG9ubHkgYXZhaWxhYmxlIHdoZW4gaW5jbHVkaW5nIEpJVCBzdXBwb3J0LidcbiAgICB9LFxuICAgIDQ6IHtcbiAgICAgICAgbGV2ZWw6IDQgLyogZXJyb3IgKi8sXG4gICAgICAgIG1lc3NhZ2U6ICdJbnZhbGlkIGFuaW1hdGlvbiBkaXJlY3Rpb24uJ1xuICAgIH0sXG4gICAgNToge1xuICAgICAgICBsZXZlbDogNCAvKiBlcnJvciAqLyxcbiAgICAgICAgbWVzc2FnZTogJ2tleS92YWx1ZSBjYW5ub3QgYmUgbnVsbCBvciB1bmRlZmluZWQuIEFyZSB5b3UgdHJ5aW5nIHRvIGluamVjdC9yZWdpc3RlciBzb21ldGhpbmcgdGhhdCBkb2VzblxcJ3QgZXhpc3Qgd2l0aCBEST8nXG4gICAgfSxcbiAgICA2OiB7XG4gICAgICAgIGxldmVsOiA0IC8qIGVycm9yICovLFxuICAgICAgICBtZXNzYWdlOiAnSW52YWxpZCByZXNvbHZlciBzdHJhdGVneSBzcGVjaWZpZWQuJ1xuICAgIH0sXG4gICAgNzoge1xuICAgICAgICBsZXZlbDogNCAvKiBlcnJvciAqLyxcbiAgICAgICAgbWVzc2FnZTogJ0NvbnN0cnVjdG9yIFBhcmFtZXRlciB3aXRoIGluZGV4IGNhbm5vdCBiZSBudWxsIG9yIHVuZGVmaW5lZC4gQXJlIHlvdSB0cnlpbmcgdG8gaW5qZWN0L3JlZ2lzdGVyIHNvbWV0aGluZyB0aGF0IGRvZXNuXFwndCBleGlzdCB3aXRoIERJPydcbiAgICB9LFxuICAgIDg6IHtcbiAgICAgICAgbGV2ZWw6IDQgLyogZXJyb3IgKi8sXG4gICAgICAgIG1lc3NhZ2U6ICdTZWxmIGJpbmRpbmcgYmVoYXZpb3Igb25seSBzdXBwb3J0cyBldmVudHMuJ1xuICAgIH0sXG4gICAgOToge1xuICAgICAgICBsZXZlbDogNCAvKiBlcnJvciAqLyxcbiAgICAgICAgbWVzc2FnZTogJ1RoZSB1cGRhdGVUcmlnZ2VyIGJpbmRpbmcgYmVoYXZpb3IgcmVxdWlyZXMgYXQgbGVhc3Qgb25lIGV2ZW50IG5hbWUgYXJndW1lbnQ6IGVnIDxpbnB1dCB2YWx1ZS5iaW5kPVwiZmlyc3ROYW1lICYgdXBkYXRlVHJpZ2dlcjpcXCdibHVyXFwnXCI+J1xuICAgIH0sXG4gICAgMTA6IHtcbiAgICAgICAgbGV2ZWw6IDQgLyogZXJyb3IgKi8sXG4gICAgICAgIG1lc3NhZ2U6ICdUaGUgdXBkYXRlVHJpZ2dlciBiaW5kaW5nIGJlaGF2aW9yIGNhbiBvbmx5IGJlIGFwcGxpZWQgdG8gdHdvLXdheS8gZnJvbS12aWV3IGJpbmRpbmdzIG9uIGlucHV0L3NlbGVjdCBlbGVtZW50cy4nXG4gICAgfSxcbiAgICAxMToge1xuICAgICAgICBsZXZlbDogNCAvKiBlcnJvciAqLyxcbiAgICAgICAgbWVzc2FnZTogJ09ubHkgcHJvcGVydHkgYmluZGluZ3MgYW5kIHN0cmluZyBpbnRlcnBvbGF0aW9uIGJpbmRpbmdzIGNhbiBiZSBzaWduYWxlZC4gVHJpZ2dlciwgZGVsZWdhdGUgYW5kIGNhbGwgYmluZGluZ3MgY2Fubm90IGJlIHNpZ25hbGVkLidcbiAgICB9LFxuICAgIDEyOiB7XG4gICAgICAgIGxldmVsOiA0IC8qIGVycm9yICovLFxuICAgICAgICBtZXNzYWdlOiAnU2lnbmFsIG5hbWUgaXMgcmVxdWlyZWQuJ1xuICAgIH0sXG4gICAgMTQ6IHtcbiAgICAgICAgbGV2ZWw6IDQgLyogZXJyb3IgKi8sXG4gICAgICAgIG1lc3NhZ2U6ICdQcm9wZXJ0eSBjYW5ub3QgYmUgYXNzaWduZWQuJ1xuICAgIH0sXG4gICAgMTU6IHtcbiAgICAgICAgbGV2ZWw6IDQgLyogZXJyb3IgKi8sXG4gICAgICAgIG1lc3NhZ2U6ICdVbmV4cGVjdGVkIGNhbGwgY29udGV4dC4nXG4gICAgfSxcbiAgICAxNjoge1xuICAgICAgICBsZXZlbDogNCAvKiBlcnJvciAqLyxcbiAgICAgICAgbWVzc2FnZTogJ0EgZGVwZW5kZW5jeSByZWdpc3RyYXRpb24gaXMgbWlzc2luZyBmb3IgdGhlIGludGVyZmFjZSAlcy4nXG4gICAgfSxcbiAgICAxNzoge1xuICAgICAgICBsZXZlbDogNCAvKiBlcnJvciAqLyxcbiAgICAgICAgbWVzc2FnZTogJ1lvdSBjYW4gb25seSBkZWZpbmUgb25lIGRlZmF1bHQgaW1wbGVtZW50YXRpb24gZm9yIGFuIGludGVyZmFjZS4nXG4gICAgfSxcbiAgICAxODoge1xuICAgICAgICBsZXZlbDogNCAvKiBlcnJvciAqLyxcbiAgICAgICAgbWVzc2FnZTogJ1lvdSBjYW5ub3Qgb2JzZXJ2ZSBhIHNldHRlciBvbmx5IHByb3BlcnR5LidcbiAgICB9LFxuICAgIDE5OiB7XG4gICAgICAgIGxldmVsOiA0IC8qIGVycm9yICovLFxuICAgICAgICBtZXNzYWdlOiAnVmFsdWUgZm9yIGV4cHJlc3Npb24gaXMgbm9uLXJlcGVhdGFibGUuJ1xuICAgIH0sXG4gICAgMjA6IHtcbiAgICAgICAgbGV2ZWw6IDQgLyogZXJyb3IgKi8sXG4gICAgICAgIG1lc3NhZ2U6ICdObyB0ZW1wbGF0ZSBjb21waWxlciBmb3VuZCB3aXRoIHRoZSBzcGVjaWZpZWQgbmFtZS4gSklUIHN1cHBvcnQgb3IgYSBjdXN0b20gY29tcGlsZXIgaXMgcmVxdWlyZWQuJ1xuICAgIH0sXG4gICAgMjE6IHtcbiAgICAgICAgbGV2ZWw6IDQgLyogZXJyb3IgKi8sXG4gICAgICAgIG1lc3NhZ2U6ICdZb3UgY2Fubm90IGNvbWJpbmUgdGhlIGNvbnRhaW5lcmxlc3MgY3VzdG9tIGVsZW1lbnQgb3B0aW9uIHdpdGggU2hhZG93IERPTS4nXG4gICAgfSxcbiAgICAyMjoge1xuICAgICAgICBsZXZlbDogNCAvKiBlcnJvciAqLyxcbiAgICAgICAgbWVzc2FnZTogJ0EgY29udGFpbmVybGVzcyBjdXN0b20gZWxlbWVudCBjYW5ub3QgYmUgdGhlIHJvb3QgY29tcG9uZW50IG9mIGFuIGFwcGxpY2F0aW9uLidcbiAgICB9LFxuICAgIDMwOiB7XG4gICAgICAgIGxldmVsOiA0IC8qIGVycm9yICovLFxuICAgICAgICBtZXNzYWdlOiAnVGhlcmUgYXJlIG1vcmUgdGFyZ2V0cyB0aGFuIHRoZXJlIGFyZSB0YXJnZXQgaW5zdHJ1Y3Rpb25zLidcbiAgICB9LFxuICAgIDMxOiB7XG4gICAgICAgIGxldmVsOiA0IC8qIGVycm9yICovLFxuICAgICAgICBtZXNzYWdlOiAnVGhlcmUgYXJlIG1vcmUgdGFyZ2V0IGluc3RydWN0aW9ucyB0aGFuIHRoZXJlIGFyZSB0YXJnZXRzLidcbiAgICB9LFxuICAgIDEwMDoge1xuICAgICAgICBsZXZlbDogNCAvKiBlcnJvciAqLyxcbiAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgc3RhcnQgb2YgZXhwcmVzc2lvbi4nXG4gICAgfSxcbiAgICAxMDE6IHtcbiAgICAgICAgbGV2ZWw6IDQgLyogZXJyb3IgKi8sXG4gICAgICAgIG1lc3NhZ2U6ICdVbmNvbnN1bWVkIHRva2VuLidcbiAgICB9LFxuICAgIDEwMjoge1xuICAgICAgICBsZXZlbDogNCAvKiBlcnJvciAqLyxcbiAgICAgICAgbWVzc2FnZTogJ0RvdWJsZSBkb3QgYW5kIHNwcmVhZCBvcGVyYXRvcnMgYXJlIG5vdCBzdXBwb3J0ZWQuJ1xuICAgIH0sXG4gICAgMTAzOiB7XG4gICAgICAgIGxldmVsOiA0IC8qIGVycm9yICovLFxuICAgICAgICBtZXNzYWdlOiAnSW52YWxpZCBtZW1iZXIgZXhwcmVzc2lvbi4nXG4gICAgfSxcbiAgICAxMDQ6IHtcbiAgICAgICAgbGV2ZWw6IDQgLyogZXJyb3IgKi8sXG4gICAgICAgIG1lc3NhZ2U6ICdVbmV4cGVjdGVkIGVuZCBvZiBleHByZXNzaW9uLidcbiAgICB9LFxuICAgIDEwNToge1xuICAgICAgICBsZXZlbDogNCAvKiBlcnJvciAqLyxcbiAgICAgICAgbWVzc2FnZTogJ0V4cGVjdGVkIGlkZW50aWZpZXIuJ1xuICAgIH0sXG4gICAgMTA2OiB7XG4gICAgICAgIGxldmVsOiA0IC8qIGVycm9yICovLFxuICAgICAgICBtZXNzYWdlOiAnSW52YWxpZCBCaW5kaW5nSWRlbnRpZmllciBhdCBsZWZ0IGhhbmQgc2lkZSBvZiBcIm9mXCIuJ1xuICAgIH0sXG4gICAgMTA3OiB7XG4gICAgICAgIGxldmVsOiA0IC8qIGVycm9yICovLFxuICAgICAgICBtZXNzYWdlOiAnSW52YWxpZCBvciB1bnN1cHBvcnRlZCBwcm9wZXJ0eSBkZWZpbml0aW9uIGluIG9iamVjdCBsaXRlcmFsLidcbiAgICB9LFxuICAgIDEwODoge1xuICAgICAgICBsZXZlbDogNCAvKiBlcnJvciAqLyxcbiAgICAgICAgbWVzc2FnZTogJ1VudGVybWluYXRlZCBxdW90ZSBpbiBzdHJpbmcgbGl0ZXJhbC4nXG4gICAgfSxcbiAgICAxMDk6IHtcbiAgICAgICAgbGV2ZWw6IDQgLyogZXJyb3IgKi8sXG4gICAgICAgIG1lc3NhZ2U6ICdVbnRlcm1pbmF0ZWQgdGVtcGxhdGUgc3RyaW5nLidcbiAgICB9LFxuICAgIDExMDoge1xuICAgICAgICBsZXZlbDogNCAvKiBlcnJvciAqLyxcbiAgICAgICAgbWVzc2FnZTogJ01pc3NpbmcgZXhwZWN0ZWQgdG9rZW4uJ1xuICAgIH0sXG4gICAgMTExOiB7XG4gICAgICAgIGxldmVsOiA0IC8qIGVycm9yICovLFxuICAgICAgICBtZXNzYWdlOiAnVW5leHBlY3RlZCBjaGFyYWN0ZXIuJ1xuICAgIH0sXG4gICAgMTUwOiB7XG4gICAgICAgIGxldmVsOiA0IC8qIGVycm9yICovLFxuICAgICAgICBtZXNzYWdlOiAnTGVmdCBoYW5kIHNpZGUgb2YgZXhwcmVzc2lvbiBpcyBub3QgYXNzaWduYWJsZS4nXG4gICAgfSxcbiAgICAxNTE6IHtcbiAgICAgICAgbGV2ZWw6IDQgLyogZXJyb3IgKi8sXG4gICAgICAgIG1lc3NhZ2U6ICdVbmV4cGVjdGVkIGtleXdvcmQgXCJvZlwiJ1xuICAgIH0sXG4gICAgNDAxOiB7XG4gICAgICAgIGxldmVsOiAzIC8qIHdhcm4gKi8sXG4gICAgICAgIG1lc3NhZ2U6IGBBdHRyaWJ1dGVQYXR0ZXJuIGlzIG1pc3NpbmcgYSBoYW5kbGVyIGZvciAnJXMnLmBcbiAgICB9LFxuICAgIDQwMjoge1xuICAgICAgICBsZXZlbDogMyAvKiB3YXJuICovLFxuICAgICAgICBtZXNzYWdlOiBgQXR0cmlidXRlUGF0dGVybiBoYW5kbGVyIGZvciAnJXMnIGlzIG5vdCBhIGZ1bmN0aW9uLmBcbiAgICB9LFxuICAgIDgwMDoge1xuICAgICAgICBsZXZlbDogNCAvKiBlcnJvciAqLyxcbiAgICAgICAgbWVzc2FnZTogYFByb3BlcnR5ICclcycgaXMgYmVpbmcgZGlydHktY2hlY2tlZC5gXG4gICAgfSxcbiAgICA4MDE6IHtcbiAgICAgICAgbGV2ZWw6IDMgLyogd2FybiAqLyxcbiAgICAgICAgbWVzc2FnZTogYFByb3BlcnR5ICclcycgaXMgYmVpbmcgZGlydHktY2hlY2tlZC5gXG4gICAgfSxcbiAgICAyMDAwOiB7XG4gICAgICAgIGxldmVsOiA0IC8qIGVycm9yICovLFxuICAgICAgICBtZXNzYWdlOiAnUm91dGVyIGhhcyBub3QgYmVlbiBhY3RpdmF0ZWQuJ1xuICAgIH0sXG4gICAgMjAwMToge1xuICAgICAgICBsZXZlbDogNCAvKiBlcnJvciAqLyxcbiAgICAgICAgbWVzc2FnZTogJ1JvdXRlciBoYXMgYWxyZWFkeSBiZWVuIGFjdGl2YXRlZC4nXG4gICAgfSxcbiAgICAyMDAyOiB7XG4gICAgICAgIGxldmVsOiA0IC8qIGVycm9yICovLFxuICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIHJlc29sdmUgYWxsIHZpZXdwb3J0cy4nXG4gICAgfSxcbiAgICAyMDAzOiB7XG4gICAgICAgIGxldmVsOiA0IC8qIGVycm9yICovLFxuICAgICAgICBtZXNzYWdlOiAnQnJvd3NlciBuYXZpZ2F0aW9uIGhhcyBhbHJlYWR5IGJlZW4gYWN0aXZhdGVkLidcbiAgICB9LFxuICAgIDIwMDQ6IHtcbiAgICAgICAgbGV2ZWw6IDQgLyogZXJyb3IgKi8sXG4gICAgICAgIG1lc3NhZ2U6ICdMaW5rSGFuZGxlciBoYXMgYWxyZWFkeSBiZWVuIGFjdGl2YXRlZC4nXG4gICAgfSxcbiAgICAxMDAxOiB7XG4gICAgICAgIGxldmVsOiAyIC8qIGluZm8gKi8sXG4gICAgICAgIG1lc3NhZ2U6ICdET00gYWxyZWFkeSBpbml0aWFsaXplZC4gRGVzdHJveWluZyBhbmQgcmUtaW5pdGlhbGl6aW5nLi4nXG4gICAgfSxcbiAgICAxMDAwMDoge1xuICAgICAgICBsZXZlbDogMSAvKiBkZWJ1ZyAqLyxcbiAgICAgICAgbWVzc2FnZTogJyVzJ1xuICAgIH1cbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZXBvcnRlci5qcy5tYXAiLCJpbXBvcnQgeyBQTEFURk9STSwgUmVwb3J0ZXIsIFRyYWNlciB9IGZyb20gJ0BhdXJlbGlhL2tlcm5lbCc7XG5jb25zdCBtYXJrZXIgPSB7XG4gICAgb2JqTmFtZTogJ21hcmtlcicsXG4gICAgbWV0aG9kTmFtZTogJ25vb3AnLFxuICAgIHBhcmFtczogUExBVEZPUk0uZW1wdHlBcnJheSxcbiAgICBkZXB0aDogLTEsXG4gICAgcHJldjogbnVsbCxcbiAgICBuZXh0OiBudWxsXG59O1xuY2xhc3MgVHJhY2VJbmZvIHtcbiAgICBjb25zdHJ1Y3RvcihvYmpOYW1lLCBtZXRob2ROYW1lLCBwYXJhbXMpIHtcbiAgICAgICAgdGhpcy5vYmpOYW1lID0gb2JqTmFtZTtcbiAgICAgICAgdGhpcy5tZXRob2ROYW1lID0gbWV0aG9kTmFtZTtcbiAgICAgICAgdGhpcy5wYXJhbXMgPSBwYXJhbXM7XG4gICAgICAgIHRoaXMub2JqTmFtZSA9IG9iak5hbWU7XG4gICAgICAgIHRoaXMubWV0aG9kTmFtZSA9IG1ldGhvZE5hbWU7XG4gICAgICAgIHRoaXMuZGVwdGggPSBUcmFjZUluZm8uc3RhY2subGVuZ3RoO1xuICAgICAgICB0aGlzLnBhcmFtcyA9IHBhcmFtcztcbiAgICAgICAgdGhpcy5uZXh0ID0gbWFya2VyO1xuICAgICAgICB0aGlzLnByZXYgPSBUcmFjZUluZm8udGFpbDtcbiAgICAgICAgVHJhY2VJbmZvLnRhaWwubmV4dCA9IHRoaXM7XG4gICAgICAgIFRyYWNlSW5mby50YWlsID0gdGhpcztcbiAgICAgICAgVHJhY2VJbmZvLnN0YWNrLnB1c2godGhpcyk7XG4gICAgfVxuICAgIHN0YXRpYyByZXNldCgpIHtcbiAgICAgICAgbGV0IGN1cnJlbnQgPSBUcmFjZUluZm8uaGVhZDtcbiAgICAgICAgbGV0IG5leHQgPSBudWxsO1xuICAgICAgICB3aGlsZSAoY3VycmVudCAhPSBudWxsKSB7XG4gICAgICAgICAgICBuZXh0ID0gY3VycmVudC5uZXh0O1xuICAgICAgICAgICAgY3VycmVudC5uZXh0ID0gbnVsbDtcbiAgICAgICAgICAgIGN1cnJlbnQucHJldiA9IG51bGw7XG4gICAgICAgICAgICBjdXJyZW50LnBhcmFtcyA9IG51bGw7XG4gICAgICAgICAgICBjdXJyZW50ID0gbmV4dDtcbiAgICAgICAgfVxuICAgICAgICBUcmFjZUluZm8uaGVhZCA9IG1hcmtlcjtcbiAgICAgICAgVHJhY2VJbmZvLnRhaWwgPSBtYXJrZXI7XG4gICAgICAgIFRyYWNlSW5mby5zdGFjayA9IFtdO1xuICAgIH1cbiAgICBzdGF0aWMgZW50ZXIob2JqTmFtZSwgbWV0aG9kTmFtZSwgcGFyYW1zKSB7XG4gICAgICAgIHJldHVybiBuZXcgVHJhY2VJbmZvKG9iak5hbWUsIG1ldGhvZE5hbWUsIHBhcmFtcyk7XG4gICAgfVxuICAgIHN0YXRpYyBsZWF2ZSgpIHtcbiAgICAgICAgcmV0dXJuIFRyYWNlSW5mby5zdGFjay5wb3AoKTtcbiAgICB9XG59XG5UcmFjZUluZm8uaGVhZCA9IG1hcmtlcjtcblRyYWNlSW5mby50YWlsID0gbWFya2VyO1xuVHJhY2VJbmZvLnN0YWNrID0gW107XG5leHBvcnQgY29uc3QgRGVidWdUcmFjZXIgPSB7XG4gICAgLi4uVHJhY2VyLFxuICAgIC8qKlxuICAgICAqIEEgY29udmVuaWVuY2UgcHJvcGVydHkgZm9yIHRoZSB1c2VyIHRvIGNvbmRpdGlvbmFsbHkgY2FsbCB0aGUgdHJhY2VyLlxuICAgICAqIFRoaXMgc2F2ZXMgdW5uZWNlc3NhcnkgYG5vb3BgIGFuZCBgc2xpY2VgIGNhbGxzIGluIG5vbi1BT1Qgc2NlbmFyaW9zIGV2ZW4gaWYgZGVidWdnaW5nIGlzIGRpc2FibGVkLlxuICAgICAqIEluIEFPVCB0aGVzZSBjYWxscyB3aWxsIHNpbXBseSBiZSByZW1vdmVkIGVudGlyZWx5LlxuICAgICAqXG4gICAgICogVGhpcyBwcm9wZXJ0eSAqKm9ubHkqKiB0dXJucyBvbiB0cmFjaW5nIGlmIGBAYXVyZWxpYS9kZWJ1Z2AgaXMgaW5jbHVkZWQgYW5kIGNvbmZpZ3VyZWQgYXMgd2VsbC5cbiAgICAgKi9cbiAgICBlbmFibGVkOiBmYWxzZSxcbiAgICBsaXZlTG9nZ2luZ0VuYWJsZWQ6IGZhbHNlLFxuICAgIGxpdmVXcml0ZXI6IG51bGwsXG4gICAgLyoqXG4gICAgICogQ2FsbCB0aGlzIGF0IHRoZSBzdGFydCBvZiBhIG1ldGhvZC9mdW5jdGlvbi5cbiAgICAgKiBFYWNoIGNhbGwgdG8gYGVudGVyYCAqKm11c3QqKiBoYXZlIGFuIGFjY29tcGFueWluZyBjYWxsIHRvIGBsZWF2ZWAgZm9yIHRoZSB0cmFjZXIgdG8gd29yayBwcm9wZXJseS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvYmpOYW1lIC0gQW55IGh1bWFuLWZyaWVuZGx5IG5hbWUgdG8gaWRlbnRpZnkgdGhlIHRyYWNlZCBvYmplY3Qgd2l0aC5cbiAgICAgKiBAcGFyYW0gbWV0aG9kTmFtZSAtIEFueSBodW1hbi1mcmllbmRseSBuYW1lIHRvIGlkZW50aWZ5IHRoZSB0cmFjZWQgbWV0aG9kIHdpdGguXG4gICAgICogQHBhcmFtIGFyZ3MgLSBQYXNzIGluIGBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpYCB0byBhbHNvIHRyYWNlIHRoZSBwYXJhbWV0ZXJzLCBvciBgbnVsbGAgaWYgdGhpcyBpcyBub3QgbmVlZGVkICh0byBzYXZlIG1lbW9yeS9jcHUpXG4gICAgICovXG4gICAgZW50ZXIob2JqTmFtZSwgbWV0aG9kTmFtZSwgYXJncykge1xuICAgICAgICBpZiAodGhpcy5lbmFibGVkKSB7XG4gICAgICAgICAgICBjb25zdCBpbmZvID0gVHJhY2VJbmZvLmVudGVyKG9iak5hbWUsIG1ldGhvZE5hbWUsIGFyZ3MpO1xuICAgICAgICAgICAgaWYgKHRoaXMubGl2ZUxvZ2dpbmdFbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5saXZlV3JpdGVyLndyaXRlKGluZm8pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBDYWxsIHRoaXMgYXQgdGhlIGVuZCBvZiBhIG1ldGhvZC9mdW5jdGlvbi4gUG9wcyBvbmUgdHJhY2UgaXRlbSBvZmYgdGhlIHN0YWNrLlxuICAgICAqL1xuICAgIGxlYXZlKCkge1xuICAgICAgICBpZiAodGhpcy5lbmFibGVkKSB7XG4gICAgICAgICAgICBUcmFjZUluZm8ubGVhdmUoKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgLyoqXG4gICAgICogV3JpdGVzIG9ubHkgdGhlIHRyYWNlIGluZm8gbGVhZGluZyB1cCB0byB0aGUgY3VycmVudCBtZXRob2QgY2FsbC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB3cml0ZXIgLSBBbiBvYmplY3QgdG8gd3JpdGUgdGhlIG91dHB1dCB0by5cbiAgICAgKi9cbiAgICB3cml0ZVN0YWNrKHdyaXRlcikge1xuICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgIGNvbnN0IHN0YWNrID0gVHJhY2VJbmZvLnN0YWNrO1xuICAgICAgICBjb25zdCBsZW4gPSBzdGFjay5sZW5ndGg7XG4gICAgICAgIHdoaWxlIChpIDwgbGVuKSB7XG4gICAgICAgICAgICB3cml0ZXIud3JpdGUoc3RhY2tbaV0pO1xuICAgICAgICAgICAgKytpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBXcml0ZXMgYWxsIHRyYWNlIGluZm8gY2FwdHVyZWQgc2luY2UgdGhlIHByZXZpb3VzIGZsdXNoQWxsIG9wZXJhdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB3cml0ZXIgLSBBbiBvYmplY3QgdG8gd3JpdGUgdGhlIG91dHB1dCB0by4gQ2FuIGJlIG51bGwgdG8gc2ltcGx5IHJlc2V0IHRoZSB0cmFjZXIgc3RhdGUuXG4gICAgICovXG4gICAgZmx1c2hBbGwod3JpdGVyKSB7XG4gICAgICAgIGlmICh3cml0ZXIgIT0gbnVsbCkge1xuICAgICAgICAgICAgbGV0IGN1cnJlbnQgPSBUcmFjZUluZm8uaGVhZC5uZXh0OyAvLyBza2lwIHRoZSBtYXJrZXJcbiAgICAgICAgICAgIHdoaWxlIChjdXJyZW50ICE9IG51bGwgJiYgY3VycmVudCAhPT0gbWFya2VyKSB7XG4gICAgICAgICAgICAgICAgd3JpdGVyLndyaXRlKGN1cnJlbnQpO1xuICAgICAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50Lm5leHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgVHJhY2VJbmZvLnJlc2V0KCk7XG4gICAgfSxcbiAgICBlbmFibGVMaXZlTG9nZ2luZyxcbiAgICAvKipcbiAgICAgKiBTdG9wcyB3cml0aW5nIG91dCBlYWNoIHRyYWNlIGluZm8gaXRlbSBhcyB0aGV5IGFyZSB0cmFjZWQuXG4gICAgICovXG4gICAgZGlzYWJsZUxpdmVMb2dnaW5nKCkge1xuICAgICAgICB0aGlzLmxpdmVMb2dnaW5nRW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmxpdmVXcml0ZXIgPSBudWxsO1xuICAgIH1cbn07XG5jb25zdCBkZWZhdWx0T3B0aW9ucyA9IHtcbiAgICByZW5kZXJpbmc6IHRydWUsXG4gICAgYmluZGluZzogdHJ1ZSxcbiAgICBvYnNlcnZhdGlvbjogdHJ1ZSxcbiAgICBiZWZvcmVBdHRhY2g6IHRydWUsXG4gICAgbW91bnRpbmc6IHRydWUsXG4gICAgZGk6IHRydWUsXG4gICAgbGlmZWN5Y2xlOiB0cnVlLFxuICAgIGppdDogdHJ1ZVxufTtcbmZ1bmN0aW9uIGVuYWJsZUxpdmVMb2dnaW5nKG9wdGlvbnNPcldyaXRlcikge1xuICAgIHRoaXMubGl2ZUxvZ2dpbmdFbmFibGVkID0gdHJ1ZTtcbiAgICBpZiAob3B0aW9uc09yV3JpdGVyICYmICd3cml0ZScgaW4gb3B0aW9uc09yV3JpdGVyKSB7XG4gICAgICAgIHRoaXMubGl2ZVdyaXRlciA9IG9wdGlvbnNPcldyaXRlcjtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSBvcHRpb25zT3JXcml0ZXIgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnNPcldyaXRlciA6IGRlZmF1bHRPcHRpb25zO1xuICAgICAgICB0aGlzLmxpdmVXcml0ZXIgPSBjcmVhdGVMaXZlVHJhY2VXcml0ZXIob3B0aW9ucyk7XG4gICAgfVxufVxuY29uc3QgdG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuZnVuY3Rpb24gZmxhZ3NUZXh0KGluZm8sIGkgPSAwKSB7XG4gICAgaWYgKGluZm8ucGFyYW1zICE9IG51bGwgJiYgaW5mby5wYXJhbXMubGVuZ3RoID4gaSkge1xuICAgICAgICByZXR1cm4gc3RyaW5naWZ5TGlmZWN5Y2xlRmxhZ3MoaW5mby5wYXJhbXNbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gJ25vbmUnO1xufVxuZnVuY3Rpb24gX2N0b3JOYW1lKG9iaikge1xuICAgIGxldCBuYW1lO1xuICAgIGlmIChvYmogPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBuYW1lID0gJ3VuZGVmaW5lZCc7XG4gICAgfVxuICAgIGVsc2UgaWYgKG9iaiA9PT0gbnVsbCkge1xuICAgICAgICBuYW1lID0gJ251bGwnO1xuICAgIH1cbiAgICBlbHNlIGlmIChvYmouY29uc3RydWN0b3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAob2JqLmNvbnN0cnVjdG9yLmRlc2NyaXB0aW9uKSB7XG4gICAgICAgICAgICBuYW1lID0gYFJlc291cmNleycke29iai5jb25zdHJ1Y3Rvci5kZXNjcmlwdGlvbi5uYW1lfSd9YDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG5hbWUgPSBvYmouY29uc3RydWN0b3IubmFtZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2Ygb2JqID09PSAnc3RyaW5nJykge1xuICAgICAgICBuYW1lID0gYCcke29ian0nYDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIG5hbWUgPSB0b1N0cmluZy5jYWxsKG9iaik7XG4gICAgfVxuICAgIHJldHVybiBuYW1lO1xufVxuZnVuY3Rpb24gY3Rvck5hbWUoaW5mbywgaSA9IDApIHtcbiAgICBpZiAoaW5mby5wYXJhbXMgIT0gbnVsbCAmJiBpbmZvLnBhcmFtcy5sZW5ndGggPiBpKSB7XG4gICAgICAgIHJldHVybiBfY3Rvck5hbWUoaW5mby5wYXJhbXNbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gJ3VuZGVmaW5lZCc7XG59XG5mdW5jdGlvbiBzY29wZVRleHQoaW5mbywgaSA9IDApIHtcbiAgICBsZXQgJGN0b3JOYW1lO1xuICAgIGlmIChpbmZvLnBhcmFtcyAhPSBudWxsICYmIGluZm8ucGFyYW1zLmxlbmd0aCA+IGkpIHtcbiAgICAgICAgY29uc3QgJHNjb3BlID0gaW5mby5wYXJhbXNbaV07XG4gICAgICAgIGlmICgkc2NvcGUgIT0gbnVsbCAmJiAkc2NvcGUuYmluZGluZ0NvbnRleHQgIT0gbnVsbCkge1xuICAgICAgICAgICAgJGN0b3JOYW1lID0gX2N0b3JOYW1lKCRzY29wZS5iaW5kaW5nQ29udGV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAkY3Rvck5hbWUgPSAndW5kZWZpbmVkJztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYFNjb3BleyR7JGN0b3JOYW1lfX1gO1xuICAgIH1cbiAgICByZXR1cm4gJ3VuZGVmaW5lZCc7XG59XG5mdW5jdGlvbiBrZXlUZXh0KGluZm8sIGkgPSAwKSB7XG4gICAgaWYgKGluZm8ucGFyYW1zICE9IG51bGwgJiYgaW5mby5wYXJhbXMubGVuZ3RoID4gaSkge1xuICAgICAgICBjb25zdCAka2V5ID0gaW5mby5wYXJhbXNbaV07XG4gICAgICAgIGlmICh0eXBlb2YgJGtleSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHJldHVybiBgJyR7JGtleX0nYDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoJGtleSAhPT0gdW5kZWZpbmVkICYmIFJlZmxlY3QuaGFzKCRrZXksICdmcmllbmRseU5hbWUnKSkge1xuICAgICAgICAgICAgcmV0dXJuICRrZXlbJ2ZyaWVuZGx5TmFtZSddO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfY3Rvck5hbWUoJGtleSk7XG4gICAgfVxuICAgIHJldHVybiAndW5kZWZpbmVkJztcbn1cbmZ1bmN0aW9uIHByaW1pdGl2ZShpbmZvLCBpID0gMCkge1xuICAgIGlmIChpbmZvLnBhcmFtcyAhPSBudWxsICYmIGluZm8ucGFyYW1zLmxlbmd0aCA+IGkpIHtcbiAgICAgICAgY29uc3QgJGtleSA9IGluZm8ucGFyYW1zW2ldO1xuICAgICAgICBpZiAodHlwZW9mICRrZXkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICByZXR1cm4gYCckeyRrZXl9J2A7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICRrZXkudG9TdHJpbmcoKTtcbiAgICB9XG4gICAgcmV0dXJuICd1bmRlZmluZWQnO1xufVxuY29uc3QgUmVuZGVyaW5nQXJnc1Byb2Nlc3NvciA9IHtcbiAgICAkaHlkcmF0ZShpbmZvKSB7XG4gICAgICAgIHJldHVybiBmbGFnc1RleHQoaW5mbyk7XG4gICAgfSxcbiAgICByZW5kZXIoaW5mbykge1xuICAgICAgICByZXR1cm4gYCR7ZmxhZ3NUZXh0KGluZm8pfSxJRE9NLElDb250YWluZXIsJHtjdG9yTmFtZShpbmZvLCAzKX1gO1xuICAgIH0sXG4gICAgYWRkQmluZGluZyhpbmZvKSB7XG4gICAgICAgIHJldHVybiBgJHtjdG9yTmFtZShpbmZvKX0sJHtjdG9yTmFtZShpbmZvLCAxKX1gO1xuICAgIH0sXG4gICAgYWRkQ29tcG9uZW50KGluZm8pIHtcbiAgICAgICAgcmV0dXJuIGAke2N0b3JOYW1lKGluZm8pfSwke2N0b3JOYW1lKGluZm8sIDEpfWA7XG4gICAgfVxufTtcbmNvbnN0IEJpbmRpbmdBcmdzUHJvY2Vzc29yID0ge1xuICAgICRiaW5kKGluZm8pIHtcbiAgICAgICAgcmV0dXJuIGZsYWdzVGV4dChpbmZvKTtcbiAgICB9LFxuICAgICR1bmJpbmQoaW5mbykge1xuICAgICAgICByZXR1cm4gZmxhZ3NUZXh0KGluZm8pO1xuICAgIH0sXG4gICAgY29ubmVjdChpbmZvKSB7XG4gICAgICAgIHJldHVybiBmbGFnc1RleHQoaW5mbyk7XG4gICAgfSxcbiAgICAvLyBjdXJyZW50bHkgb25seSBvYnNlcnZlcnMgdHJhY2UgY29uc3RydWN0b3IgY2FsbHMgYnV0IGtlZXAgYW4gZXllIG9uIHRoaXMgaWYgb3RoZXJzIGFyZSBhZGRlZCwgdGhlbiB3ZSdkIG5lZWQgYWRkaXRpb25hbCBmaWx0ZXJpbmdcbiAgICBjb25zdHJ1Y3RvcihpbmZvKSB7XG4gICAgICAgIHN3aXRjaCAoaW5mby5vYmpOYW1lKSB7XG4gICAgICAgICAgICBjYXNlICdBcnJheU9ic2VydmVyJzpcbiAgICAgICAgICAgIGNhc2UgJ01hcE9ic2VydmVyJzpcbiAgICAgICAgICAgIGNhc2UgJ1NldE9ic2VydmVyJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gZmxhZ3NUZXh0KGluZm8pO1xuICAgICAgICAgICAgY2FzZSAnU2V0dGVyT2JzZXJ2ZXInOlxuICAgICAgICAgICAgY2FzZSAnQmluZGFibGVPYnNlcnZlcic6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGAke2ZsYWdzVGV4dChpbmZvKX0sJHtjdG9yTmFtZShpbmZvLCAxKX0sJHtwcmltaXRpdmUoaW5mbywgMil9YDtcbiAgICAgICAgICAgIGNhc2UgJ1Byb3h5T2JzZXJ2ZXInOlxuICAgICAgICAgICAgICAgIHJldHVybiBjdG9yTmFtZShpbmZvKTtcbiAgICAgICAgICAgIGNhc2UgJ1Byb3h5U3Vic2NyaWJlckNvbGxlY3Rpb24nOlxuICAgICAgICAgICAgY2FzZSAnRGlydHlDaGVja1Byb3BlcnR5JzpcbiAgICAgICAgICAgICAgICByZXR1cm4gYCR7Y3Rvck5hbWUoaW5mbywgMSl9LCR7cHJpbWl0aXZlKGluZm8sIDIpfWA7XG4gICAgICAgICAgICBjYXNlICdQcmltaXRpdmVPYnNlcnZlcic6XG4gICAgICAgICAgICBjYXNlICdQcm9wZXJ0eUFjY2Vzc29yJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gYCR7Y3Rvck5hbWUoaW5mbyl9LCR7cHJpbWl0aXZlKGluZm8sIDEpfWA7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuICAgIH0sXG4gICAgbG9ja2VkQmluZChpbmZvKSB7XG4gICAgICAgIHJldHVybiBmbGFnc1RleHQoaW5mbyk7XG4gICAgfSxcbiAgICBsb2NrZWRVbmJpbmQoaW5mbykge1xuICAgICAgICByZXR1cm4gZmxhZ3NUZXh0KGluZm8pO1xuICAgIH0sXG4gICAgSW50ZXJuYWxPYnNlcnZlcnNMb29rdXAoaW5mbykge1xuICAgICAgICByZXR1cm4gYCR7ZmxhZ3NUZXh0KGluZm8pfSwke2N0b3JOYW1lKGluZm8sIDEpfSwke3ByaW1pdGl2ZShpbmZvLCAyKX1gO1xuICAgIH0sXG4gICAgQmluZGluZ0NvbnRleHQoaW5mbykge1xuICAgICAgICBzd2l0Y2ggKGluZm8ubWV0aG9kTmFtZSkge1xuICAgICAgICAgICAgY2FzZSAnZ2V0JzpcbiAgICAgICAgICAgICAgICByZXR1cm4gYCR7c2NvcGVUZXh0KGluZm8pfSwke3ByaW1pdGl2ZShpbmZvLCAxKX0sJHtwcmltaXRpdmUoaW5mbywgMil9LCR7ZmxhZ3NUZXh0KGluZm8sIDMpfWA7XG4gICAgICAgICAgICBjYXNlICdnZXRPYnNlcnZlcnMnOlxuICAgICAgICAgICAgICAgIHJldHVybiBmbGFnc1RleHQoaW5mbyk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiAndW5rbm93bic7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIFNjb3BlKGluZm8pIHtcbiAgICAgICAgc3dpdGNoIChpbmZvLm1ldGhvZE5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgJ2NyZWF0ZSc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGAke2ZsYWdzVGV4dChpbmZvKX0sJHtjdG9yTmFtZShpbmZvLCAxKX0sJHtjdG9yTmFtZShpbmZvLCAyKX1gO1xuICAgICAgICAgICAgY2FzZSAnZnJvbU92ZXJyaWRlJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gYCR7ZmxhZ3NUZXh0KGluZm8pfSwke2N0b3JOYW1lKGluZm8sIDEpfWA7XG4gICAgICAgICAgICBjYXNlICdmcm9tUGFyZW50JzpcbiAgICAgICAgICAgICAgICByZXR1cm4gYCR7ZmxhZ3NUZXh0KGluZm8pfSwke3Njb3BlVGV4dChpbmZvLCAxKX0sJHtjdG9yTmFtZShpbmZvLCAyKX1gO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gJ3Vua25vd24nO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBPdmVycmlkZUNvbnRleHQoaW5mbykge1xuICAgICAgICBzd2l0Y2ggKGluZm8ubWV0aG9kTmFtZSkge1xuICAgICAgICAgICAgY2FzZSAnY3JlYXRlJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gYCR7ZmxhZ3NUZXh0KGluZm8pfSwke2N0b3JOYW1lKGluZm8sIDEpfSwke2N0b3JOYW1lKGluZm8sIDIpfWA7XG4gICAgICAgICAgICBjYXNlICdnZXRPYnNlcnZlcnMnOlxuICAgICAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuICd1bmtub3duJztcbiAgICAgICAgfVxuICAgIH1cbn07XG5jb25zdCBPYnNlcnZhdGlvbkFyZ3NQcm9jZXNzb3IgPSB7XG4gICAgY2FsbFNvdXJjZShpbmZvKSB7XG4gICAgICAgIGNvbnN0IG5hbWVzID0gW107XG4gICAgICAgIHN3aXRjaCAoaW5mby5vYmpOYW1lKSB7XG4gICAgICAgICAgICBjYXNlICdMaXN0ZW5lcic6XG4gICAgICAgICAgICAgICAgcmV0dXJuIChpbmZvLnBhcmFtc1swXSkudHlwZTtcbiAgICAgICAgICAgIGNhc2UgJ0NhbGxCaW5kaW5nJzpcbiAgICAgICAgICAgICAgICBpZiAoaW5mby5wYXJhbXMgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBpbmZvLnBhcmFtcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lcy5wdXNoKGN0b3JOYW1lKGluZm8sIGkpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbmFtZXMuam9pbignLCcpO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gJ3Vua25vd24nO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBzZXRWYWx1ZShpbmZvKSB7XG4gICAgICAgIGxldCB2YWx1ZVRleHQ7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gaW5mby5wYXJhbXNbMF07XG4gICAgICAgIHN3aXRjaCAodHlwZW9mIHZhbHVlKSB7XG4gICAgICAgICAgICBjYXNlICd1bmRlZmluZWQnOlxuICAgICAgICAgICAgICAgIHZhbHVlVGV4dCA9ICd1bmRlZmluZWQnO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnb2JqZWN0JzpcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVUZXh0ID0gJ251bGwnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVUZXh0ID0gX2N0b3JOYW1lKHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdzdHJpbmcnOlxuICAgICAgICAgICAgICAgIHZhbHVlVGV4dCA9IGAnJHt2YWx1ZX0nYDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ251bWJlcic6XG4gICAgICAgICAgICAgICAgdmFsdWVUZXh0ID0gdmFsdWUudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdmFsdWVUZXh0ID0gX2N0b3JOYW1lKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYCR7dmFsdWVUZXh0fSwke2ZsYWdzVGV4dChpbmZvLCAxKX1gO1xuICAgIH0sXG4gICAgZmx1c2goaW5mbykge1xuICAgICAgICByZXR1cm4gZmxhZ3NUZXh0KGluZm8pO1xuICAgIH0sXG4gICAgaGFuZGxlQ2hhbmdlKGluZm8pIHtcbiAgICAgICAgcmV0dXJuIGAke3ByaW1pdGl2ZShpbmZvKX0sJHtwcmltaXRpdmUoaW5mbywgMSl9LCR7ZmxhZ3NUZXh0KGluZm8sIDIpfWA7XG4gICAgfSxcbiAgICBsb2NrU2NvcGUoaW5mbykge1xuICAgICAgICByZXR1cm4gc2NvcGVUZXh0KGluZm8pO1xuICAgIH1cbn07XG5jb25zdCBBdHRhY2hpbmdBcmdzUHJvY2Vzc29yID0ge1xuICAgICRhdHRhY2goaW5mbykge1xuICAgICAgICByZXR1cm4gZmxhZ3NUZXh0KGluZm8pO1xuICAgIH0sXG4gICAgJGRldGFjaChpbmZvKSB7XG4gICAgICAgIHJldHVybiBmbGFnc1RleHQoaW5mbyk7XG4gICAgfSxcbiAgICAkY2FjaGUoaW5mbykge1xuICAgICAgICByZXR1cm4gZmxhZ3NUZXh0KGluZm8pO1xuICAgIH0sXG4gICAgaG9sZChpbmZvKSB7XG4gICAgICAgIHJldHVybiBgTm9kZXsnJHsoaW5mby5wYXJhbXNbMF0pLnRleHRDb250ZW50fSd9YDtcbiAgICB9LFxuICAgIHJlbGVhc2UoaW5mbykge1xuICAgICAgICByZXR1cm4gZmxhZ3NUZXh0KGluZm8pO1xuICAgIH1cbn07XG5jb25zdCBNb3VudGluZ0FyZ3NQcm9jZXNzb3IgPSB7XG4gICAgJG1vdW50KGluZm8pIHtcbiAgICAgICAgcmV0dXJuIGZsYWdzVGV4dChpbmZvKTtcbiAgICB9LFxuICAgICR1bm1vdW50KGluZm8pIHtcbiAgICAgICAgcmV0dXJuIGZsYWdzVGV4dChpbmZvKTtcbiAgICB9LFxuICAgIHByb2plY3QoaW5mbykge1xuICAgICAgICByZXR1cm4gY3Rvck5hbWUoaW5mbyk7XG4gICAgfSxcbiAgICB0YWtlKGluZm8pIHtcbiAgICAgICAgcmV0dXJuIGN0b3JOYW1lKGluZm8pO1xuICAgIH1cbn07XG5jb25zdCBESUFyZ3NQcm9jZXNzb3IgPSB7XG4gICAgY29uc3RydWN0KGluZm8pIHtcbiAgICAgICAgcmV0dXJuIGN0b3JOYW1lKGluZm8pO1xuICAgIH0sXG4gICAgQ29udGFpbmVyKGluZm8pIHtcbiAgICAgICAgY29uc3QgbmFtZXMgPSBbXTtcbiAgICAgICAgc3dpdGNoIChpbmZvLm1ldGhvZE5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgJ2dldCc6XG4gICAgICAgICAgICBjYXNlICdnZXRBbGwnOlxuICAgICAgICAgICAgICAgIHJldHVybiBrZXlUZXh0KGluZm8pO1xuICAgICAgICAgICAgY2FzZSAncmVnaXN0ZXInOlxuICAgICAgICAgICAgICAgIGlmIChpbmZvLnBhcmFtcyAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IGluZm8ucGFyYW1zLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVzLnB1c2goa2V5VGV4dChpbmZvLCBpKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5hbWVzLmpvaW4oJywnKTtcbiAgICAgICAgICAgIGNhc2UgJ2NyZWF0ZUNoaWxkJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiAndW5rbm93bic7XG4gICAgICAgIH1cbiAgICB9XG59O1xuY29uc3QgTGlmZWN5Y2xlQXJnc1Byb2Nlc3NvciA9IHtcbiAgICBMaWZlY3ljbGUoaW5mbykge1xuICAgICAgICBzd2l0Y2ggKGluZm8ubWV0aG9kTmFtZS5zbGljZSgwLCAzKSkge1xuICAgICAgICAgICAgY2FzZSAnYmVnJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgICAgICBjYXNlICdlbnEnOlxuICAgICAgICAgICAgICAgIHJldHVybiBjdG9yTmFtZShpbmZvKTtcbiAgICAgICAgICAgIGNhc2UgJ2VuZCc6XG4gICAgICAgICAgICBjYXNlICdwcm8nOlxuICAgICAgICAgICAgICAgIHJldHVybiBmbGFnc1RleHQoaW5mbyk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiAndW5rbm93bic7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIENvbXBvc2l0aW9uQ29vcmRpbmF0b3IoaW5mbykge1xuICAgICAgICBzd2l0Y2ggKGluZm8ubWV0aG9kTmFtZSkge1xuICAgICAgICAgICAgY2FzZSAnZW5xdWV1ZSc6XG4gICAgICAgICAgICAgICAgcmV0dXJuICdJQ29udHJvbGxlcic7XG4gICAgICAgICAgICBjYXNlICdzd2FwJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gYElDb250cm9sbGVyLCR7ZmxhZ3NUZXh0KGluZm8sIDEpfWA7XG4gICAgICAgICAgICBjYXNlICdwcm9jZXNzTmV4dCc6XG4gICAgICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gJ3Vua25vd24nO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBBZ2dyZWdhdGVMaWZlY3ljbGVUYXNrKGluZm8pIHtcbiAgICAgICAgc3dpdGNoIChpbmZvLm1ldGhvZE5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgJ2FkZFRhc2snOlxuICAgICAgICAgICAgY2FzZSAncmVtb3ZlVGFzayc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN0b3JOYW1lKGluZm8pO1xuICAgICAgICAgICAgY2FzZSAnY29tcGxldGUnOlxuICAgICAgICAgICAgICAgIHJldHVybiBgJHtwcmltaXRpdmUoaW5mbywgMil9YDtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuICd1bmtub3duJztcbiAgICAgICAgfVxuICAgIH1cbn07XG5jb25zdCBKaXRBcmdzUHJvY2Vzc29yID0ge1xuICAgIFRlbXBsYXRlQmluZGVyKGluZm8pIHtcbiAgICAgICAgcmV0dXJuICcnOyAvLyBUT0RPXG4gICAgfVxufTtcbmZ1bmN0aW9uIGNyZWF0ZUxpdmVUcmFjZVdyaXRlcihvcHRpb25zKSB7XG4gICAgY29uc3QgUHJvY2Vzc29ycyA9IHt9O1xuICAgIGlmIChvcHRpb25zLnJlbmRlcmluZykge1xuICAgICAgICBPYmplY3QuYXNzaWduKFByb2Nlc3NvcnMsIFJlbmRlcmluZ0FyZ3NQcm9jZXNzb3IpO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5iaW5kaW5nKSB7XG4gICAgICAgIE9iamVjdC5hc3NpZ24oUHJvY2Vzc29ycywgQmluZGluZ0FyZ3NQcm9jZXNzb3IpO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5vYnNlcnZhdGlvbikge1xuICAgICAgICBPYmplY3QuYXNzaWduKFByb2Nlc3NvcnMsIE9ic2VydmF0aW9uQXJnc1Byb2Nlc3Nvcik7XG4gICAgfVxuICAgIGlmIChvcHRpb25zLmJlZm9yZUF0dGFjaCkge1xuICAgICAgICBPYmplY3QuYXNzaWduKFByb2Nlc3NvcnMsIEF0dGFjaGluZ0FyZ3NQcm9jZXNzb3IpO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5tb3VudGluZykge1xuICAgICAgICBPYmplY3QuYXNzaWduKFByb2Nlc3NvcnMsIE1vdW50aW5nQXJnc1Byb2Nlc3Nvcik7XG4gICAgfVxuICAgIGlmIChvcHRpb25zLmRpKSB7XG4gICAgICAgIE9iamVjdC5hc3NpZ24oUHJvY2Vzc29ycywgRElBcmdzUHJvY2Vzc29yKTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMubGlmZWN5Y2xlKSB7XG4gICAgICAgIE9iamVjdC5hc3NpZ24oUHJvY2Vzc29ycywgTGlmZWN5Y2xlQXJnc1Byb2Nlc3Nvcik7XG4gICAgfVxuICAgIGlmIChvcHRpb25zLmppdCkge1xuICAgICAgICBPYmplY3QuYXNzaWduKFByb2Nlc3NvcnMsIEppdEFyZ3NQcm9jZXNzb3IpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICB3cml0ZShpbmZvKSB7XG4gICAgICAgICAgICBsZXQgb3V0cHV0O1xuICAgICAgICAgICAgaWYgKFByb2Nlc3NvcnNbaW5mby5tZXRob2ROYW1lXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgb3V0cHV0ID0gUHJvY2Vzc29yc1tpbmZvLm1ldGhvZE5hbWVdKGluZm8pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoUHJvY2Vzc29yc1tpbmZvLm9iak5hbWVdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBvdXRwdXQgPSBQcm9jZXNzb3JzW2luZm8ub2JqTmFtZV0oaW5mbyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBSZXBvcnRlci53cml0ZSgxMDAwMCwgYCR7Jy0nLnJlcGVhdChpbmZvLmRlcHRoKX0ke2luZm8ub2JqTmFtZX0uJHtpbmZvLm1ldGhvZE5hbWV9KCR7b3V0cHV0fSlgKTtcbiAgICAgICAgfVxuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gc3RyaW5naWZ5TGlmZWN5Y2xlRmxhZ3MoZmxhZ3MpIHtcbiAgICBjb25zdCBmbGFnTmFtZXMgPSBbXTtcbiAgICBpZiAoZmxhZ3MgJiAyMDk3MTUyIC8qIG11c3RFdmFsdWF0ZSAqLykge1xuICAgICAgICBmbGFnTmFtZXMucHVzaCgnbXVzdEV2YWx1YXRlJyk7XG4gICAgfVxuICAgIGlmIChmbGFncyAmIDE2Nzc3MjE2IC8qIGlzQ29sbGVjdGlvbk11dGF0aW9uICovKSB7XG4gICAgICAgIGZsYWdOYW1lcy5wdXNoKCdpc0NvbGxlY3Rpb25NdXRhdGlvbicpO1xuICAgIH1cbiAgICBpZiAoZmxhZ3MgJiAxNiAvKiB1cGRhdGVUYXJnZXRJbnN0YW5jZSAqLykge1xuICAgICAgICBmbGFnTmFtZXMucHVzaCgndXBkYXRlVGFyZ2V0SW5zdGFuY2UnKTtcbiAgICB9XG4gICAgaWYgKGZsYWdzICYgMzIgLyogdXBkYXRlU291cmNlRXhwcmVzc2lvbiAqLykge1xuICAgICAgICBmbGFnTmFtZXMucHVzaCgndXBkYXRlU291cmNlRXhwcmVzc2lvbicpO1xuICAgIH1cbiAgICBpZiAoZmxhZ3MgJiA2NCAvKiBmcm9tQXN5bmNGbHVzaCAqLykge1xuICAgICAgICBmbGFnTmFtZXMucHVzaCgnZnJvbUFzeW5jRmx1c2gnKTtcbiAgICB9XG4gICAgaWYgKGZsYWdzICYgMTI4IC8qIGZyb21TeW5jRmx1c2ggKi8pIHtcbiAgICAgICAgZmxhZ05hbWVzLnB1c2goJ2Zyb21TeW5jRmx1c2gnKTtcbiAgICB9XG4gICAgaWYgKGZsYWdzICYgMjU2IC8qIGZyb21UaWNrICovKSB7XG4gICAgICAgIGZsYWdOYW1lcy5wdXNoKCdmcm9tVGljaycpO1xuICAgIH1cbiAgICBpZiAoZmxhZ3MgJiAxMDI0IC8qIGZyb21TdGFydFRhc2sgKi8pIHtcbiAgICAgICAgZmxhZ05hbWVzLnB1c2goJ2Zyb21TdGFydFRhc2snKTtcbiAgICB9XG4gICAgaWYgKGZsYWdzICYgMjA0OCAvKiBmcm9tU3RvcFRhc2sgKi8pIHtcbiAgICAgICAgZmxhZ05hbWVzLnB1c2goJ2Zyb21TdG9wVGFzaycpO1xuICAgIH1cbiAgICBpZiAoZmxhZ3MgJiA0MDk2IC8qIGZyb21CaW5kICovKSB7XG4gICAgICAgIGZsYWdOYW1lcy5wdXNoKCdmcm9tQmluZCcpO1xuICAgIH1cbiAgICBpZiAoZmxhZ3MgJiA4MTkyIC8qIGZyb21VbmJpbmQgKi8pIHtcbiAgICAgICAgZmxhZ05hbWVzLnB1c2goJ2Zyb21VbmJpbmQnKTtcbiAgICB9XG4gICAgaWYgKGZsYWdzICYgMTYzODQgLyogZnJvbUF0dGFjaCAqLykge1xuICAgICAgICBmbGFnTmFtZXMucHVzaCgnZnJvbUF0dGFjaCcpO1xuICAgIH1cbiAgICBpZiAoZmxhZ3MgJiAzMjc2OCAvKiBmcm9tRGV0YWNoICovKSB7XG4gICAgICAgIGZsYWdOYW1lcy5wdXNoKCdmcm9tRGV0YWNoJyk7XG4gICAgfVxuICAgIGlmIChmbGFncyAmIDY1NTM2IC8qIGZyb21DYWNoZSAqLykge1xuICAgICAgICBmbGFnTmFtZXMucHVzaCgnZnJvbUNhY2hlJyk7XG4gICAgfVxuICAgIGlmIChmbGFncyAmIDEzMTA3MiAvKiBmcm9tRE9NRXZlbnQgKi8pIHtcbiAgICAgICAgZmxhZ05hbWVzLnB1c2goJ2Zyb21ET01FdmVudCcpO1xuICAgIH1cbiAgICBpZiAoZmxhZ3MgJiAyNjIxNDQgLyogZnJvbUxpZmVjeWNsZVRhc2sgKi8pIHtcbiAgICAgICAgZmxhZ05hbWVzLnB1c2goJ2Zyb21MaWZlY3ljbGVUYXNrJyk7XG4gICAgfVxuICAgIGlmIChmbGFncyAmIDQxOTQzMDQgLyogaXNUcmF2ZXJzaW5nUGFyZW50U2NvcGUgKi8pIHtcbiAgICAgICAgZmxhZ05hbWVzLnB1c2goJ2lzVHJhdmVyc2luZ1BhcmVudFNjb3BlJyk7XG4gICAgfVxuICAgIGlmIChmbGFncyAmIDY3MTA4ODY0IC8qIGFsbG93UGFyZW50U2NvcGVUcmF2ZXJzYWwgKi8pIHtcbiAgICAgICAgZmxhZ05hbWVzLnB1c2goJ2FsbG93UGFyZW50U2NvcGVUcmF2ZXJzYWwnKTtcbiAgICB9XG4gICAgaWYgKGZsYWdzICYgMSAvKiBnZXR0ZXJTZXR0ZXJTdHJhdGVneSAqLykge1xuICAgICAgICBmbGFnTmFtZXMucHVzaCgnZ2V0dGVyU2V0dGVyU3RyYXRlZ3knKTtcbiAgICB9XG4gICAgaWYgKGZsYWdzICYgMiAvKiBwcm94eVN0cmF0ZWd5ICovKSB7XG4gICAgICAgIGZsYWdOYW1lcy5wdXNoKCdwcm94eVN0cmF0ZWd5Jyk7XG4gICAgfVxuICAgIGlmIChmbGFncyAmIDEwNzM3NDE4MjQgLyogc2Vjb25kYXJ5RXhwcmVzc2lvbiAqLykge1xuICAgICAgICBmbGFnTmFtZXMucHVzaCgnc2Vjb25kYXJ5RXhwcmVzc2lvbicpO1xuICAgIH1cbiAgICBpZiAoZmxhZ05hbWVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gJ25vbmUnO1xuICAgIH1cbiAgICByZXR1cm4gZmxhZ05hbWVzLmpvaW4oJ3wnKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRyYWNlci5qcy5tYXAiLCJpbXBvcnQgeyBSZXRyeUludGVyY2VwdG9yIH0gZnJvbSAnLi9yZXRyeS1pbnRlcmNlcHRvcic7XG4vKipcbiAqIEEgY2xhc3MgZm9yIGNvbmZpZ3VyaW5nIEh0dHBDbGllbnRzLlxuICovXG5leHBvcnQgY2xhc3MgSHR0cENsaWVudENvbmZpZ3VyYXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGJhc2UgVVJMIHRvIGJlIHByZXBlbmRlZCB0byBlYWNoIFJlcXVlc3QncyB1cmwgYmVmb3JlIHNlbmRpbmcuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmJhc2VVcmwgPSAnJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlZmF1bHQgdmFsdWVzIHRvIGFwcGx5IHRvIGluaXQgb2JqZWN0cyB3aGVuIGNyZWF0aW5nIFJlcXVlc3RzLiBOb3RlIHRoYXRcbiAgICAgICAgICogZGVmYXVsdHMgY2Fubm90IGJlIGFwcGxpZWQgd2hlbiBSZXF1ZXN0IG9iamVjdHMgYXJlIG1hbnVhbGx5IGNyZWF0ZWQgYmVjYXVzZVxuICAgICAgICAgKiBSZXF1ZXN0IHByb3ZpZGVzIGl0cyBvd24gZGVmYXVsdHMgYW5kIGRpc2NhcmRzIHRoZSBvcmlnaW5hbCBpbml0IG9iamVjdC5cbiAgICAgICAgICogU2VlIGFsc28gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1JlcXVlc3QvUmVxdWVzdFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5kZWZhdWx0cyA9IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogSW50ZXJjZXB0b3JzIHRvIGJlIGFkZGVkIHRvIHRoZSBIdHRwQ2xpZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pbnRlcmNlcHRvcnMgPSBbXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgYmFzZVVybC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBiYXNlVXJsIC0gVGhlIGJhc2UgVVJMLlxuICAgICAqIEByZXR1cm5zIFRoZSBjaGFpbmFibGUgaW5zdGFuY2Ugb2YgdGhpcyBjb25maWd1cmF0aW9uIG9iamVjdC5cbiAgICAgKiBAY2hhaW5hYmxlXG4gICAgICovXG4gICAgd2l0aEJhc2VVcmwoYmFzZVVybCkge1xuICAgICAgICB0aGlzLmJhc2VVcmwgPSBiYXNlVXJsO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgZGVmYXVsdHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZGVmYXVsdHMgLSBUaGUgZGVmYXVsdHMuXG4gICAgICogQHJldHVybnMgVGhlIGNoYWluYWJsZSBpbnN0YW5jZSBvZiB0aGlzIGNvbmZpZ3VyYXRpb24gb2JqZWN0LlxuICAgICAqIEBjaGFpbmFibGVcbiAgICAgKi9cbiAgICB3aXRoRGVmYXVsdHMoZGVmYXVsdHMpIHtcbiAgICAgICAgdGhpcy5kZWZhdWx0cyA9IGRlZmF1bHRzO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyBhbiBpbnRlcmNlcHRvciB0byBiZSBydW4gb24gYWxsIHJlcXVlc3RzIG9yIHJlc3BvbnNlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBpbnRlcmNlcHRvciAtIEFuIG9iamVjdCB3aXRoIHJlcXVlc3QsIHJlcXVlc3RFcnJvcixcbiAgICAgKiByZXNwb25zZSwgb3IgcmVzcG9uc2VFcnJvciBtZXRob2RzLiByZXF1ZXN0IGFuZCByZXF1ZXN0RXJyb3IgYWN0IGFzXG4gICAgICogcmVzb2x2ZSBhbmQgcmVqZWN0IGhhbmRsZXJzIGZvciB0aGUgUmVxdWVzdCBiZWZvcmUgaXQgaXMgc2VudC5cbiAgICAgKiByZXNwb25zZSBhbmQgcmVzcG9uc2VFcnJvciBhY3QgYXMgcmVzb2x2ZSBhbmQgcmVqZWN0IGhhbmRsZXJzIGZvclxuICAgICAqIHRoZSBSZXNwb25zZSBhZnRlciBpdCBoYXMgYmVlbiByZWNlaXZlZC5cbiAgICAgKiBAcmV0dXJucyBUaGUgY2hhaW5hYmxlIGluc3RhbmNlIG9mIHRoaXMgY29uZmlndXJhdGlvbiBvYmplY3QuXG4gICAgICogQGNoYWluYWJsZVxuICAgICAqL1xuICAgIHdpdGhJbnRlcmNlcHRvcihpbnRlcmNlcHRvcikge1xuICAgICAgICB0aGlzLmludGVyY2VwdG9ycy5wdXNoKGludGVyY2VwdG9yKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgYSBjb25maWd1cmF0aW9uIHRoYXQgYWRkcmVzc2VzIGNvbW1vbiBhcHBsaWNhdGlvbiBuZWVkcywgaW5jbHVkaW5nXG4gICAgICogY29uZmlndXJpbmcgc2FtZS1vcmlnaW4gY3JlZGVudGlhbHMsIGFuZCB1c2luZyByZWplY3RFcnJvclJlc3BvbnNlcy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBjaGFpbmFibGUgaW5zdGFuY2Ugb2YgdGhpcyBjb25maWd1cmF0aW9uIG9iamVjdC5cbiAgICAgKiBAY2hhaW5hYmxlXG4gICAgICovXG4gICAgdXNlU3RhbmRhcmRDb25maWd1cmF0aW9uKCkge1xuICAgICAgICBjb25zdCBzdGFuZGFyZENvbmZpZyA9IHsgY3JlZGVudGlhbHM6ICdzYW1lLW9yaWdpbicgfTtcbiAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLmRlZmF1bHRzLCBzdGFuZGFyZENvbmZpZywgdGhpcy5kZWZhdWx0cyk7XG4gICAgICAgIHJldHVybiB0aGlzLnJlamVjdEVycm9yUmVzcG9uc2VzKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhdXNlcyBSZXNwb25zZXMgd2hvc2Ugc3RhdHVzIGNvZGVzIGZhbGwgb3V0c2lkZSB0aGUgcmFuZ2UgMjAwLTI5OSB0byByZWplY3QuXG4gICAgICogVGhlIGZldGNoIEFQSSBvbmx5IHJlamVjdHMgb24gbmV0d29yayBlcnJvcnMgb3Igb3RoZXIgY29uZGl0aW9ucyB0aGF0IHByZXZlbnRcbiAgICAgKiB0aGUgcmVxdWVzdCBmcm9tIGNvbXBsZXRpbmcsIG1lYW5pbmcgY29uc3VtZXJzIG11c3QgaW5zcGVjdCBSZXNwb25zZS5vayBpbiB0aGVcbiAgICAgKiBQcm9taXNlIGNvbnRpbnVhdGlvbiB0byBkZXRlcm1pbmUgaWYgdGhlIHNlcnZlciByZXNwb25kZWQgd2l0aCBhIHN1Y2Nlc3MgY29kZS5cbiAgICAgKiBUaGlzIG1ldGhvZCBhZGRzIGEgcmVzcG9uc2UgaW50ZXJjZXB0b3IgdGhhdCBjYXVzZXMgUmVzcG9uc2VzIHdpdGggZXJyb3IgY29kZXNcbiAgICAgKiB0byBiZSByZWplY3RlZCwgd2hpY2ggaXMgY29tbW9uIGJlaGF2aW9yIGluIEhUVFAgY2xpZW50IGxpYnJhcmllcy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBjaGFpbmFibGUgaW5zdGFuY2Ugb2YgdGhpcyBjb25maWd1cmF0aW9uIG9iamVjdC5cbiAgICAgKiBAY2hhaW5hYmxlXG4gICAgICovXG4gICAgcmVqZWN0RXJyb3JSZXNwb25zZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLndpdGhJbnRlcmNlcHRvcih7IHJlc3BvbnNlOiByZWplY3RPbkVycm9yIH0pO1xuICAgIH1cbiAgICB3aXRoUmV0cnkoY29uZmlnKSB7XG4gICAgICAgIGNvbnN0IGludGVyY2VwdG9yID0gbmV3IFJldHJ5SW50ZXJjZXB0b3IoY29uZmlnKTtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aEludGVyY2VwdG9yKGludGVyY2VwdG9yKTtcbiAgICB9XG59XG5mdW5jdGlvbiByZWplY3RPbkVycm9yKHJlc3BvbnNlKSB7XG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICB0aHJvdyByZXNwb25zZTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3BvbnNlO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aHR0cC1jbGllbnQtY29uZmlndXJhdGlvbi5qcy5tYXAiLCJpbXBvcnQgeyBfX2RlY29yYXRlLCBfX21ldGFkYXRhLCBfX3BhcmFtIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBJRE9NIH0gZnJvbSAnQGF1cmVsaWEvcnVudGltZSc7XG5pbXBvcnQgeyBET00sIEhUTUxET00gfSBmcm9tICdAYXVyZWxpYS9ydW50aW1lLWh0bWwnO1xuaW1wb3J0IHsgSHR0cENsaWVudENvbmZpZ3VyYXRpb24gfSBmcm9tICcuL2h0dHAtY2xpZW50LWNvbmZpZ3VyYXRpb24nO1xuaW1wb3J0IHsgUmV0cnlJbnRlcmNlcHRvciB9IGZyb20gJy4vcmV0cnktaW50ZXJjZXB0b3InO1xuY29uc3QgYWJzb2x1dGVVcmxSZWdleHAgPSAvXihbYS16XVthLXowLTkrXFwtLl0qOik/XFwvXFwvL2k7XG4vKipcbiAqIEFuIEhUVFAgY2xpZW50IGJhc2VkIG9uIHRoZSBGZXRjaCBBUEkuXG4gKi9cbmxldCBIdHRwQ2xpZW50ID0gY2xhc3MgSHR0cENsaWVudCB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBIdHRwQ2xpZW50LlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGRvbSkge1xuICAgICAgICB0aGlzLmRvbSA9IGRvbTtcbiAgICAgICAgaWYgKGRvbS53aW5kb3cuZmV0Y2ggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdIdHRwQ2xpZW50IHJlcXVpcmVzIGEgRmV0Y2ggQVBJIGltcGxlbWVudGF0aW9uLCBidXQgdGhlIGN1cnJlbnQgZW52aXJvbm1lbnQgZG9lc25cXCd0IHN1cHBvcnQgaXQuIFlvdSBtYXkgbmVlZCB0byBsb2FkIGEgcG9seWZpbGwgc3VjaCBhcyBodHRwczovL2dpdGh1Yi5jb20vZ2l0aHViL2ZldGNoJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kb20gPSBkb207XG4gICAgICAgIHRoaXMuYWN0aXZlUmVxdWVzdENvdW50ID0gMDtcbiAgICAgICAgdGhpcy5pc1JlcXVlc3RpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5pc0NvbmZpZ3VyZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5iYXNlVXJsID0gJyc7XG4gICAgICAgIHRoaXMuZGVmYXVsdHMgPSBudWxsO1xuICAgICAgICB0aGlzLmludGVyY2VwdG9ycyA9IFtdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb25maWd1cmUgdGhpcyBjbGllbnQgd2l0aCBkZWZhdWx0IHNldHRpbmdzIHRvIGJlIHVzZWQgYnkgYWxsIHJlcXVlc3RzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNvbmZpZyAtIEEgY29uZmlndXJhdGlvbiBvYmplY3QsIG9yIGEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhIGNvbmZpZ1xuICAgICAqIG9iamVjdCBhbmQgY29uZmlndXJlcyBpdC5cbiAgICAgKiBAcmV0dXJucyBUaGUgY2hhaW5hYmxlIGluc3RhbmNlIG9mIHRoaXMgSHR0cENsaWVudC5cbiAgICAgKiBAY2hhaW5hYmxlXG4gICAgICovXG4gICAgY29uZmlndXJlKGNvbmZpZykge1xuICAgICAgICBsZXQgbm9ybWFsaXplZENvbmZpZztcbiAgICAgICAgaWYgKHR5cGVvZiBjb25maWcgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0SW5pdENvbmZpZ3VyYXRpb24gPSB7IGRlZmF1bHRzOiBjb25maWcgfTtcbiAgICAgICAgICAgIG5vcm1hbGl6ZWRDb25maWcgPSByZXF1ZXN0SW5pdENvbmZpZ3VyYXRpb247XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIGNvbmZpZyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgbm9ybWFsaXplZENvbmZpZyA9IG5ldyBIdHRwQ2xpZW50Q29uZmlndXJhdGlvbigpO1xuICAgICAgICAgICAgbm9ybWFsaXplZENvbmZpZy5iYXNlVXJsID0gdGhpcy5iYXNlVXJsO1xuICAgICAgICAgICAgbm9ybWFsaXplZENvbmZpZy5kZWZhdWx0cyA9IHsgLi4udGhpcy5kZWZhdWx0cyB9O1xuICAgICAgICAgICAgbm9ybWFsaXplZENvbmZpZy5pbnRlcmNlcHRvcnMgPSB0aGlzLmludGVyY2VwdG9ycztcbiAgICAgICAgICAgIGNvbnN0IGMgPSBjb25maWcobm9ybWFsaXplZENvbmZpZyk7XG4gICAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mLmNhbGwoSHR0cENsaWVudENvbmZpZ3VyYXRpb24ucHJvdG90eXBlLCBjKSkge1xuICAgICAgICAgICAgICAgIG5vcm1hbGl6ZWRDb25maWcgPSBjO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIGNvbmZpZycpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRlZmF1bHRzID0gbm9ybWFsaXplZENvbmZpZy5kZWZhdWx0cztcbiAgICAgICAgaWYgKGRlZmF1bHRzICE9PSB1bmRlZmluZWQgJiYgT2JqZWN0LnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mLmNhbGwoSGVhZGVycy5wcm90b3R5cGUsIGRlZmF1bHRzLmhlYWRlcnMpKSB7XG4gICAgICAgICAgICAvLyBIZWFkZXJzIGluc3RhbmNlcyBhcmUgbm90IGl0ZXJhYmxlIGluIGFsbCBicm93c2Vycy4gUmVxdWlyZSBhIHBsYWluXG4gICAgICAgICAgICAvLyBvYmplY3QgaGVyZSB0byBhbGxvdyBkZWZhdWx0IGhlYWRlcnMgdG8gYmUgbWVyZ2VkIGludG8gcmVxdWVzdCBoZWFkZXJzLlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdEZWZhdWx0IGhlYWRlcnMgbXVzdCBiZSBhIHBsYWluIG9iamVjdC4nKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpbnRlcmNlcHRvcnMgPSBub3JtYWxpemVkQ29uZmlnLmludGVyY2VwdG9ycztcbiAgICAgICAgaWYgKGludGVyY2VwdG9ycyAhPT0gdW5kZWZpbmVkICYmIGludGVyY2VwdG9ycy5sZW5ndGgpIHtcbiAgICAgICAgICAgIC8vIGZpbmQgaWYgdGhlcmUgaXMgYSBSZXRyeUludGVyY2VwdG9yXG4gICAgICAgICAgICBpZiAoaW50ZXJjZXB0b3JzLmZpbHRlcih4ID0+IE9iamVjdC5wcm90b3R5cGUuaXNQcm90b3R5cGVPZi5jYWxsKFJldHJ5SW50ZXJjZXB0b3IucHJvdG90eXBlLCB4KSkubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignT25seSBvbmUgUmV0cnlJbnRlcmNlcHRvciBpcyBhbGxvd2VkLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmV0cnlJbnRlcmNlcHRvckluZGV4ID0gaW50ZXJjZXB0b3JzLmZpbmRJbmRleCh4ID0+IE9iamVjdC5wcm90b3R5cGUuaXNQcm90b3R5cGVPZi5jYWxsKFJldHJ5SW50ZXJjZXB0b3IucHJvdG90eXBlLCB4KSk7XG4gICAgICAgICAgICBpZiAocmV0cnlJbnRlcmNlcHRvckluZGV4ID49IDAgJiYgcmV0cnlJbnRlcmNlcHRvckluZGV4ICE9PSBpbnRlcmNlcHRvcnMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIHJldHJ5IGludGVyY2VwdG9yIG11c3QgYmUgdGhlIGxhc3QgaW50ZXJjZXB0b3IgZGVmaW5lZC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmJhc2VVcmwgPSBub3JtYWxpemVkQ29uZmlnLmJhc2VVcmw7XG4gICAgICAgIHRoaXMuZGVmYXVsdHMgPSBkZWZhdWx0cztcbiAgICAgICAgdGhpcy5pbnRlcmNlcHRvcnMgPSBub3JtYWxpemVkQ29uZmlnLmludGVyY2VwdG9ycyAhPT0gdW5kZWZpbmVkID8gbm9ybWFsaXplZENvbmZpZy5pbnRlcmNlcHRvcnMgOiBbXTtcbiAgICAgICAgdGhpcy5pc0NvbmZpZ3VyZWQgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RhcnRzIHRoZSBwcm9jZXNzIG9mIGZldGNoaW5nIGEgcmVzb3VyY2UuIERlZmF1bHQgY29uZmlndXJhdGlvbiBwYXJhbWV0ZXJzXG4gICAgICogd2lsbCBiZSBhcHBsaWVkIHRvIHRoZSBSZXF1ZXN0LiBUaGUgY29uc3RydWN0ZWQgUmVxdWVzdCB3aWxsIGJlIHBhc3NlZCB0b1xuICAgICAqIHJlZ2lzdGVyZWQgcmVxdWVzdCBpbnRlcmNlcHRvcnMgYmVmb3JlIGJlaW5nIHNlbnQuIFRoZSBSZXNwb25zZSB3aWxsIGJlIHBhc3NlZFxuICAgICAqIHRvIHJlZ2lzdGVyZWQgUmVzcG9uc2UgaW50ZXJjZXB0b3JzIGJlZm9yZSBpdCBpcyByZXR1cm5lZC5cbiAgICAgKlxuICAgICAqIFNlZSBhbHNvIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9GZXRjaF9BUElcbiAgICAgKlxuICAgICAqIEBwYXJhbSBpbnB1dCAtIFRoZSByZXNvdXJjZSB0aGF0IHlvdSB3aXNoIHRvIGZldGNoLiBFaXRoZXIgYVxuICAgICAqIFJlcXVlc3Qgb2JqZWN0LCBvciBhIHN0cmluZyBjb250YWluaW5nIHRoZSBVUkwgb2YgdGhlIHJlc291cmNlLlxuICAgICAqIEBwYXJhbSBpbml0IC0gQW4gb3B0aW9ucyBvYmplY3QgY29udGFpbmluZyBzZXR0aW5ncyB0byBiZSBhcHBsaWVkIHRvXG4gICAgICogdGhlIFJlcXVlc3QuXG4gICAgICogQHJldHVybnMgQSBQcm9taXNlIGZvciB0aGUgUmVzcG9uc2UgZnJvbSB0aGUgZmV0Y2ggcmVxdWVzdC5cbiAgICAgKi9cbiAgICBmZXRjaChpbnB1dCwgaW5pdCkge1xuICAgICAgICB0aGlzLnRyYWNrUmVxdWVzdFN0YXJ0KCk7XG4gICAgICAgIGxldCByZXF1ZXN0ID0gdGhpcy5idWlsZFJlcXVlc3QoaW5wdXQsIGluaXQpO1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9jZXNzUmVxdWVzdChyZXF1ZXN0LCB0aGlzLmludGVyY2VwdG9ycykudGhlbihyZXN1bHQgPT4ge1xuICAgICAgICAgICAgbGV0IHJlc3BvbnNlO1xuICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaXNQcm90b3R5cGVPZi5jYWxsKFJlc3BvbnNlLnByb3RvdHlwZSwgcmVzdWx0KSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChPYmplY3QucHJvdG90eXBlLmlzUHJvdG90eXBlT2YuY2FsbChSZXF1ZXN0LnByb3RvdHlwZSwgcmVzdWx0KSkge1xuICAgICAgICAgICAgICAgIHJlcXVlc3QgPSByZXN1bHQ7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBmZXRjaChyZXF1ZXN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQW4gaW52YWxpZCByZXN1bHQgd2FzIHJldHVybmVkIGJ5IHRoZSBpbnRlcmNlcHRvciBjaGFpbi4gRXhwZWN0ZWQgYSBSZXF1ZXN0IG9yIFJlc3BvbnNlIGluc3RhbmNlLCBidXQgZ290IFske3Jlc3VsdH1dYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9jZXNzUmVzcG9uc2UocmVzcG9uc2UsIHRoaXMuaW50ZXJjZXB0b3JzLCByZXF1ZXN0KTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKHJlc3VsdCA9PiB7XG4gICAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mLmNhbGwoUmVxdWVzdC5wcm90b3R5cGUsIHJlc3VsdCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5mZXRjaChyZXN1bHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKHJlc3VsdCA9PiB7XG4gICAgICAgICAgICB0aGlzLnRyYWNrUmVxdWVzdEVuZCgpO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfSwgZXJyb3IgPT4ge1xuICAgICAgICAgICAgdGhpcy50cmFja1JlcXVlc3RFbmQoKTtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYnVpbGRSZXF1ZXN0KGlucHV0LCBpbml0KSB7XG4gICAgICAgIGNvbnN0IGRlZmF1bHRzID0gdGhpcy5kZWZhdWx0cyAhPT0gbnVsbCA/IHRoaXMuZGVmYXVsdHMgOiB7fTtcbiAgICAgICAgbGV0IHJlcXVlc3Q7XG4gICAgICAgIGxldCBib2R5O1xuICAgICAgICBsZXQgcmVxdWVzdENvbnRlbnRUeXBlO1xuICAgICAgICBjb25zdCBwYXJzZWREZWZhdWx0SGVhZGVycyA9IHBhcnNlSGVhZGVyVmFsdWVzKGRlZmF1bHRzLmhlYWRlcnMpO1xuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mLmNhbGwoUmVxdWVzdC5wcm90b3R5cGUsIGlucHV0KSkge1xuICAgICAgICAgICAgcmVxdWVzdCA9IGlucHV0O1xuICAgICAgICAgICAgcmVxdWVzdENvbnRlbnRUeXBlID0gbmV3IEhlYWRlcnMocmVxdWVzdC5oZWFkZXJzKS5nZXQoJ0NvbnRlbnQtVHlwZScpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKCFpbml0KSB7XG4gICAgICAgICAgICAgICAgaW5pdCA9IHt9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYm9keSA9IGluaXQuYm9keTtcbiAgICAgICAgICAgIGNvbnN0IGJvZHlPYmogPSBib2R5ICE9PSB1bmRlZmluZWQgPyB7IGJvZHk6IGJvZHkgfSA6IG51bGw7XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0SW5pdCA9IHsgLi4uZGVmYXVsdHMsIGhlYWRlcnM6IHt9LCAuLi5pbml0LCAuLi5ib2R5T2JqIH07XG4gICAgICAgICAgICByZXF1ZXN0Q29udGVudFR5cGUgPSBuZXcgSGVhZGVycyhyZXF1ZXN0SW5pdC5oZWFkZXJzKS5nZXQoJ0NvbnRlbnQtVHlwZScpO1xuICAgICAgICAgICAgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KGdldFJlcXVlc3RVcmwodGhpcy5iYXNlVXJsLCBpbnB1dCksIHJlcXVlc3RJbml0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXJlcXVlc3RDb250ZW50VHlwZSkge1xuICAgICAgICAgICAgaWYgKG5ldyBIZWFkZXJzKHBhcnNlZERlZmF1bHRIZWFkZXJzKS5oYXMoJ2NvbnRlbnQtdHlwZScpKSB7XG4gICAgICAgICAgICAgICAgcmVxdWVzdC5oZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgbmV3IEhlYWRlcnMocGFyc2VkRGVmYXVsdEhlYWRlcnMpLmdldCgnY29udGVudC10eXBlJykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoYm9keSAhPT0gdW5kZWZpbmVkICYmIGlzSlNPTihib2R5KSkge1xuICAgICAgICAgICAgICAgIHJlcXVlc3QuaGVhZGVycy5zZXQoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi9qc29uJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc2V0RGVmYXVsdEhlYWRlcnMocmVxdWVzdC5oZWFkZXJzLCBwYXJzZWREZWZhdWx0SGVhZGVycyk7XG4gICAgICAgIGlmIChib2R5ICE9PSB1bmRlZmluZWQgJiYgT2JqZWN0LnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mLmNhbGwoQmxvYi5wcm90b3R5cGUsIGJvZHkpICYmIGJvZHkudHlwZSkge1xuICAgICAgICAgICAgLy8gd29yayBhcm91bmQgYnVnIGluIElFICYgRWRnZSB3aGVyZSB0aGUgQmxvYiB0eXBlIGlzIGlnbm9yZWQgaW4gdGhlIHJlcXVlc3RcbiAgICAgICAgICAgIC8vIGh0dHBzOi8vY29ubmVjdC5taWNyb3NvZnQuY29tL0lFL2ZlZWRiYWNrL2RldGFpbHMvMjEzNjE2M1xuICAgICAgICAgICAgcmVxdWVzdC5oZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgYm9keS50eXBlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVxdWVzdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbHMgZmV0Y2ggYXMgYSBHRVQgcmVxdWVzdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBpbnB1dCAtIFRoZSByZXNvdXJjZSB0aGF0IHlvdSB3aXNoIHRvIGZldGNoLiBFaXRoZXIgYVxuICAgICAqIFJlcXVlc3Qgb2JqZWN0LCBvciBhIHN0cmluZyBjb250YWluaW5nIHRoZSBVUkwgb2YgdGhlIHJlc291cmNlLlxuICAgICAqIEBwYXJhbSBpbml0IC0gQW4gb3B0aW9ucyBvYmplY3QgY29udGFpbmluZyBzZXR0aW5ncyB0byBiZSBhcHBsaWVkIHRvXG4gICAgICogdGhlIFJlcXVlc3QuXG4gICAgICogQHJldHVybnMgQSBQcm9taXNlIGZvciB0aGUgUmVzcG9uc2UgZnJvbSB0aGUgZmV0Y2ggcmVxdWVzdC5cbiAgICAgKi9cbiAgICBnZXQoaW5wdXQsIGluaXQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmV0Y2goaW5wdXQsIGluaXQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxscyBmZXRjaCB3aXRoIHJlcXVlc3QgbWV0aG9kIHNldCB0byBQT1NULlxuICAgICAqXG4gICAgICogQHBhcmFtIGlucHV0IC0gVGhlIHJlc291cmNlIHRoYXQgeW91IHdpc2ggdG8gZmV0Y2guIEVpdGhlciBhXG4gICAgICogUmVxdWVzdCBvYmplY3QsIG9yIGEgc3RyaW5nIGNvbnRhaW5pbmcgdGhlIFVSTCBvZiB0aGUgcmVzb3VyY2UuXG4gICAgICogQHBhcmFtIGJvZHkgLSBUaGUgYm9keSBvZiB0aGUgcmVxdWVzdC5cbiAgICAgKiBAcGFyYW0gaW5pdCAtIEFuIG9wdGlvbnMgb2JqZWN0IGNvbnRhaW5pbmcgc2V0dGluZ3MgdG8gYmUgYXBwbGllZCB0b1xuICAgICAqIHRoZSBSZXF1ZXN0LlxuICAgICAqIEByZXR1cm5zIEEgUHJvbWlzZSBmb3IgdGhlIFJlc3BvbnNlIGZyb20gdGhlIGZldGNoIHJlcXVlc3QuXG4gICAgICovXG4gICAgcG9zdChpbnB1dCwgYm9keSwgaW5pdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jYWxsRmV0Y2goaW5wdXQsIGJvZHksIGluaXQsICdQT1NUJyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGxzIGZldGNoIHdpdGggcmVxdWVzdCBtZXRob2Qgc2V0IHRvIFBVVC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBpbnB1dCAtIFRoZSByZXNvdXJjZSB0aGF0IHlvdSB3aXNoIHRvIGZldGNoLiBFaXRoZXIgYVxuICAgICAqIFJlcXVlc3Qgb2JqZWN0LCBvciBhIHN0cmluZyBjb250YWluaW5nIHRoZSBVUkwgb2YgdGhlIHJlc291cmNlLlxuICAgICAqIEBwYXJhbSBib2R5IC0gVGhlIGJvZHkgb2YgdGhlIHJlcXVlc3QuXG4gICAgICogQHBhcmFtIGluaXQgLSBBbiBvcHRpb25zIG9iamVjdCBjb250YWluaW5nIHNldHRpbmdzIHRvIGJlIGFwcGxpZWQgdG9cbiAgICAgKiB0aGUgUmVxdWVzdC5cbiAgICAgKiBAcmV0dXJucyBBIFByb21pc2UgZm9yIHRoZSBSZXNwb25zZSBmcm9tIHRoZSBmZXRjaCByZXF1ZXN0LlxuICAgICAqL1xuICAgIHB1dChpbnB1dCwgYm9keSwgaW5pdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jYWxsRmV0Y2goaW5wdXQsIGJvZHksIGluaXQsICdQVVQnKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbHMgZmV0Y2ggd2l0aCByZXF1ZXN0IG1ldGhvZCBzZXQgdG8gUEFUQ0guXG4gICAgICpcbiAgICAgKiBAcGFyYW0gaW5wdXQgLSBUaGUgcmVzb3VyY2UgdGhhdCB5b3Ugd2lzaCB0byBmZXRjaC4gRWl0aGVyIGFcbiAgICAgKiBSZXF1ZXN0IG9iamVjdCwgb3IgYSBzdHJpbmcgY29udGFpbmluZyB0aGUgVVJMIG9mIHRoZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gYm9keSAtIFRoZSBib2R5IG9mIHRoZSByZXF1ZXN0LlxuICAgICAqIEBwYXJhbSBpbml0IC0gQW4gb3B0aW9ucyBvYmplY3QgY29udGFpbmluZyBzZXR0aW5ncyB0byBiZSBhcHBsaWVkIHRvXG4gICAgICogdGhlIFJlcXVlc3QuXG4gICAgICogQHJldHVybnMgQSBQcm9taXNlIGZvciB0aGUgUmVzcG9uc2UgZnJvbSB0aGUgZmV0Y2ggcmVxdWVzdC5cbiAgICAgKi9cbiAgICBwYXRjaChpbnB1dCwgYm9keSwgaW5pdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jYWxsRmV0Y2goaW5wdXQsIGJvZHksIGluaXQsICdQQVRDSCcpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxscyBmZXRjaCB3aXRoIHJlcXVlc3QgbWV0aG9kIHNldCB0byBERUxFVEUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gaW5wdXQgLSBUaGUgcmVzb3VyY2UgdGhhdCB5b3Ugd2lzaCB0byBmZXRjaC4gRWl0aGVyIGFcbiAgICAgKiBSZXF1ZXN0IG9iamVjdCwgb3IgYSBzdHJpbmcgY29udGFpbmluZyB0aGUgVVJMIG9mIHRoZSByZXNvdXJjZS5cbiAgICAgKiBAcGFyYW0gYm9keSAtIFRoZSBib2R5IG9mIHRoZSByZXF1ZXN0LlxuICAgICAqIEBwYXJhbSBpbml0IC0gQW4gb3B0aW9ucyBvYmplY3QgY29udGFpbmluZyBzZXR0aW5ncyB0byBiZSBhcHBsaWVkIHRvXG4gICAgICogdGhlIFJlcXVlc3QuXG4gICAgICogQHJldHVybnMgQSBQcm9taXNlIGZvciB0aGUgUmVzcG9uc2UgZnJvbSB0aGUgZmV0Y2ggcmVxdWVzdC5cbiAgICAgKi9cbiAgICBkZWxldGUoaW5wdXQsIGJvZHksIGluaXQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FsbEZldGNoKGlucHV0LCBib2R5LCBpbml0LCAnREVMRVRFJyk7XG4gICAgfVxuICAgIHRyYWNrUmVxdWVzdFN0YXJ0KCkge1xuICAgICAgICB0aGlzLmlzUmVxdWVzdGluZyA9ICEhKCsrdGhpcy5hY3RpdmVSZXF1ZXN0Q291bnQpO1xuICAgICAgICBpZiAodGhpcy5pc1JlcXVlc3RpbmcpIHtcbiAgICAgICAgICAgIGNvbnN0IGV2dCA9IERPTS5jcmVhdGVDdXN0b21FdmVudCgnYXVyZWxpYS1mZXRjaC1jbGllbnQtcmVxdWVzdC1zdGFydGVkJywgeyBidWJibGVzOiB0cnVlLCBjYW5jZWxhYmxlOiB0cnVlIH0pO1xuICAgICAgICAgICAgRE9NLndpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHsgRE9NLmRpc3BhdGNoRXZlbnQoZXZ0KTsgfSwgMSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdHJhY2tSZXF1ZXN0RW5kKCkge1xuICAgICAgICB0aGlzLmlzUmVxdWVzdGluZyA9ICEhKC0tdGhpcy5hY3RpdmVSZXF1ZXN0Q291bnQpO1xuICAgICAgICBpZiAoIXRoaXMuaXNSZXF1ZXN0aW5nKSB7XG4gICAgICAgICAgICBjb25zdCBldnQgPSBET00uY3JlYXRlQ3VzdG9tRXZlbnQoJ2F1cmVsaWEtZmV0Y2gtY2xpZW50LXJlcXVlc3RzLWRyYWluZWQnLCB7IGJ1YmJsZXM6IHRydWUsIGNhbmNlbGFibGU6IHRydWUgfSk7XG4gICAgICAgICAgICBET00ud2luZG93LnNldFRpbWVvdXQoKCkgPT4geyBET00uZGlzcGF0Y2hFdmVudChldnQpOyB9LCAxKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBwcm9jZXNzUmVxdWVzdChyZXF1ZXN0LCBpbnRlcmNlcHRvcnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwbHlJbnRlcmNlcHRvcnMocmVxdWVzdCwgaW50ZXJjZXB0b3JzLCAncmVxdWVzdCcsICdyZXF1ZXN0RXJyb3InLCB0aGlzKTtcbiAgICB9XG4gICAgcHJvY2Vzc1Jlc3BvbnNlKHJlc3BvbnNlLCBpbnRlcmNlcHRvcnMsIHJlcXVlc3QpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwbHlJbnRlcmNlcHRvcnMocmVzcG9uc2UsIGludGVyY2VwdG9ycywgJ3Jlc3BvbnNlJywgJ3Jlc3BvbnNlRXJyb3InLCByZXF1ZXN0LCB0aGlzKTtcbiAgICB9XG4gICAgYXBwbHlJbnRlcmNlcHRvcnMoaW5wdXQsIGludGVyY2VwdG9ycywgc3VjY2Vzc05hbWUsIGVycm9yTmFtZSwgLi4uaW50ZXJjZXB0b3JBcmdzKSB7XG4gICAgICAgIHJldHVybiAoaW50ZXJjZXB0b3JzICE9PSB1bmRlZmluZWQgPyBpbnRlcmNlcHRvcnMgOiBbXSlcbiAgICAgICAgICAgIC5yZWR1Y2UoKGNoYWluLCBpbnRlcmNlcHRvcikgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc3VjY2Vzc0hhbmRsZXIgPSBpbnRlcmNlcHRvcltzdWNjZXNzTmFtZV07XG4gICAgICAgICAgICBjb25zdCBlcnJvckhhbmRsZXIgPSBpbnRlcmNlcHRvcltlcnJvck5hbWVdO1xuICAgICAgICAgICAgLy8gVE9ETzogRml4IHRoaXMsIGFzIGl0IHZpb2xhdGVzIGBzdHJpY3RCaW5kQ2FsbEFwcGx5YC5cbiAgICAgICAgICAgIHJldHVybiBjaGFpbi50aGVuKHN1Y2Nlc3NIYW5kbGVyID8gKHZhbHVlID0+IHN1Y2Nlc3NIYW5kbGVyLmNhbGwoaW50ZXJjZXB0b3IsIHZhbHVlLCAuLi5pbnRlcmNlcHRvckFyZ3MpKSA6IGlkZW50aXR5LCBlcnJvckhhbmRsZXIgPyAocmVhc29uID0+IGVycm9ySGFuZGxlci5jYWxsKGludGVyY2VwdG9yLCByZWFzb24sIC4uLmludGVyY2VwdG9yQXJncykpIDogdGhyb3dlcik7XG4gICAgICAgIH0sIFByb21pc2UucmVzb2x2ZShpbnB1dCkpO1xuICAgIH1cbiAgICBjYWxsRmV0Y2goaW5wdXQsIGJvZHksIGluaXQsIG1ldGhvZCkge1xuICAgICAgICBpZiAoIWluaXQpIHtcbiAgICAgICAgICAgIGluaXQgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBpbml0Lm1ldGhvZCA9IG1ldGhvZDtcbiAgICAgICAgaWYgKGJvZHkpIHtcbiAgICAgICAgICAgIGluaXQuYm9keSA9IGJvZHk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuZmV0Y2goaW5wdXQsIGluaXQpO1xuICAgIH1cbn07XG5IdHRwQ2xpZW50ID0gX19kZWNvcmF0ZShbXG4gICAgX19wYXJhbSgwLCBJRE9NKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW0hUTUxET01dKVxuXSwgSHR0cENsaWVudCk7XG5leHBvcnQgeyBIdHRwQ2xpZW50IH07XG5mdW5jdGlvbiBwYXJzZUhlYWRlclZhbHVlcyhoZWFkZXJzKSB7XG4gICAgY29uc3QgcGFyc2VkSGVhZGVycyA9IHt9O1xuICAgIGNvbnN0ICRoZWFkZXJzID0gaGVhZGVycyAhPT0gdW5kZWZpbmVkID8gaGVhZGVycyA6IHt9O1xuICAgIGZvciAoY29uc3QgbmFtZSBpbiAkaGVhZGVycykge1xuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKCRoZWFkZXJzLCBuYW1lKSkge1xuICAgICAgICAgICAgcGFyc2VkSGVhZGVyc1tuYW1lXSA9ICh0eXBlb2YgJGhlYWRlcnNbbmFtZV0gPT09ICdmdW5jdGlvbicpXG4gICAgICAgICAgICAgICAgPyAkaGVhZGVyc1tuYW1lXSgpXG4gICAgICAgICAgICAgICAgOiAkaGVhZGVyc1tuYW1lXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcGFyc2VkSGVhZGVycztcbn1cbmZ1bmN0aW9uIGdldFJlcXVlc3RVcmwoYmFzZVVybCwgdXJsKSB7XG4gICAgaWYgKGFic29sdXRlVXJsUmVnZXhwLnRlc3QodXJsKSkge1xuICAgICAgICByZXR1cm4gdXJsO1xuICAgIH1cbiAgICByZXR1cm4gKGJhc2VVcmwgIT09IHVuZGVmaW5lZCA/IGJhc2VVcmwgOiAnJykgKyB1cmw7XG59XG5mdW5jdGlvbiBzZXREZWZhdWx0SGVhZGVycyhoZWFkZXJzLCBkZWZhdWx0SGVhZGVycykge1xuICAgIGNvbnN0ICRkZWZhdWx0SGVhZGVycyA9IGRlZmF1bHRIZWFkZXJzICE9PSB1bmRlZmluZWQgPyBkZWZhdWx0SGVhZGVycyA6IHt9O1xuICAgIGZvciAoY29uc3QgbmFtZSBpbiAkZGVmYXVsdEhlYWRlcnMpIHtcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCgkZGVmYXVsdEhlYWRlcnMsIG5hbWUpICYmICFoZWFkZXJzLmhhcyhuYW1lKSkge1xuICAgICAgICAgICAgaGVhZGVycy5zZXQobmFtZSwgJGRlZmF1bHRIZWFkZXJzW25hbWVdKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGlzSlNPTihzdHIpIHtcbiAgICB0cnkge1xuICAgICAgICBKU09OLnBhcnNlKHN0cik7XG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbmZ1bmN0aW9uIGlkZW50aXR5KHgpIHtcbiAgICByZXR1cm4geDtcbn1cbmZ1bmN0aW9uIHRocm93ZXIoeCkge1xuICAgIHRocm93IHg7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1odHRwLWNsaWVudC5qcy5tYXAiLCJleHBvcnQgeyBqc29uIH0gZnJvbSAnLi91dGlsJztcbmV4cG9ydCB7IHJldHJ5U3RyYXRlZ3ksIFJldHJ5SW50ZXJjZXB0b3IgfSBmcm9tICcuL3JldHJ5LWludGVyY2VwdG9yJztcbmV4cG9ydCB7IEh0dHBDbGllbnRDb25maWd1cmF0aW9uIH0gZnJvbSAnLi9odHRwLWNsaWVudC1jb25maWd1cmF0aW9uJztcbmV4cG9ydCB7IEh0dHBDbGllbnQgfSBmcm9tICcuL2h0dHAtY2xpZW50Jztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCIsImltcG9ydCB7IERPTSB9IGZyb20gJ0BhdXJlbGlhL3J1bnRpbWUtaHRtbCc7XG5leHBvcnQgY29uc3QgcmV0cnlTdHJhdGVneSA9IHtcbiAgICBmaXhlZDogMCxcbiAgICBpbmNyZW1lbnRhbDogMSxcbiAgICBleHBvbmVudGlhbDogMixcbiAgICByYW5kb206IDNcbn07XG5jb25zdCBkZWZhdWx0UmV0cnlDb25maWcgPSB7XG4gICAgbWF4UmV0cmllczogMyxcbiAgICBpbnRlcnZhbDogMTAwMCxcbiAgICBzdHJhdGVneTogcmV0cnlTdHJhdGVneS5maXhlZFxufTtcbi8qKlxuICogSW50ZXJjZXB0b3IgdGhhdCByZXRyaWVzIHJlcXVlc3RzIG9uIGVycm9yLCBiYXNlZCBvbiBhIGdpdmVuIFJldHJ5Q29uZmlndXJhdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIFJldHJ5SW50ZXJjZXB0b3Ige1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgUmV0cnlJbnRlcmNlcHRvci5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihyZXRyeUNvbmZpZykge1xuICAgICAgICB0aGlzLnJldHJ5Q29uZmlnID0geyAuLi5kZWZhdWx0UmV0cnlDb25maWcsIC4uLihyZXRyeUNvbmZpZyAhPT0gdW5kZWZpbmVkID8gcmV0cnlDb25maWcgOiB7fSkgfTtcbiAgICAgICAgaWYgKHRoaXMucmV0cnlDb25maWcuc3RyYXRlZ3kgPT09IHJldHJ5U3RyYXRlZ3kuZXhwb25lbnRpYWwgJiZcbiAgICAgICAgICAgIHRoaXMucmV0cnlDb25maWcuaW50ZXJ2YWwgPD0gMTAwMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBbiBpbnRlcnZhbCBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gMSBzZWNvbmQgaXMgbm90IGFsbG93ZWQgd2hlbiB1c2luZyB0aGUgZXhwb25lbnRpYWwgcmV0cnkgc3RyYXRlZ3knKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgd2l0aCB0aGUgcmVxdWVzdCBiZWZvcmUgaXQgaXMgc2VudC4gSXQgcmVtZW1iZXJzIHRoZSByZXF1ZXN0IHNvIGl0IGNhbiBiZSByZXRyaWVkIG9uIGVycm9yLlxuICAgICAqXG4gICAgICogQHBhcmFtIHJlcXVlc3QgLSBUaGUgcmVxdWVzdCB0byBiZSBzZW50LlxuICAgICAqIEByZXR1cm5zIFRoZSBleGlzdGluZyByZXF1ZXN0LCBhIG5ldyByZXF1ZXN0IG9yIGEgcmVzcG9uc2U7IG9yIGEgUHJvbWlzZSBmb3IgYW55IG9mIHRoZXNlLlxuICAgICAqL1xuICAgIHJlcXVlc3QocmVxdWVzdCkge1xuICAgICAgICBpZiAoIXJlcXVlc3QucmV0cnlDb25maWcpIHtcbiAgICAgICAgICAgIHJlcXVlc3QucmV0cnlDb25maWcgPSB7IC4uLnRoaXMucmV0cnlDb25maWcgfTtcbiAgICAgICAgICAgIHJlcXVlc3QucmV0cnlDb25maWcuY291bnRlciA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZG8gdGhpcyBvbiBldmVyeSByZXF1ZXN0XG4gICAgICAgIHJlcXVlc3QucmV0cnlDb25maWcucmVxdWVzdENsb25lID0gcmVxdWVzdC5jbG9uZSgpO1xuICAgICAgICByZXR1cm4gcmVxdWVzdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbGVkIHdpdGggdGhlIHJlc3BvbnNlIGFmdGVyIGl0IGlzIHJlY2VpdmVkLiBDbGVhcnMgdGhlIHJlbWVtYmVyZWQgcmVxdWVzdCwgYXMgaXQgd2FzIHN1Y2Nlc2Z1bGwuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcmVzcG9uc2UgLSBUaGUgcmVzcG9uc2UuXG4gICAgICogQHJldHVybnMgVGhlIHJlc3BvbnNlOyBvciBhIFByb21pc2UgZm9yIG9uZS5cbiAgICAgKi9cbiAgICByZXNwb25zZShyZXNwb25zZSwgcmVxdWVzdCkge1xuICAgICAgICAvLyByZXRyeSB3YXMgc3VjY2Vzc2Z1bCwgc28gY2xlYW4gdXAgYWZ0ZXIgb3Vyc2VsdmVzXG4gICAgICAgIFJlZmxlY3QuZGVsZXRlUHJvcGVydHkocmVxdWVzdCwgJ3JldHJ5Q29uZmlnJyk7XG4gICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlcyBmZXRjaCBlcnJvcnMgYW5kIGVycm9ycyBnZW5lcmF0ZWQgYnkgcHJldmlvdXMgaW50ZXJjZXB0b3JzLiBUaGlzXG4gICAgICogZnVuY3Rpb24gYWN0cyBhcyBhIFByb21pc2UgcmVqZWN0aW9uIGhhbmRsZXIuIEl0IHdpbCByZXRyeSB0aGUgcmVtZW1iZXJlZCByZXF1ZXN0IGJhc2VkIG9uIHRoZVxuICAgICAqIGNvbmZpZ3VyZWQgUmV0cnlDb25maWd1cmF0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIGVycm9yIC0gVGhlIHJlamVjdGlvbiB2YWx1ZSBmcm9tIHRoZSBmZXRjaCByZXF1ZXN0IG9yIGZyb20gYVxuICAgICAqIHByZXZpb3VzIGludGVyY2VwdG9yLlxuICAgICAqIEByZXR1cm5zIFRoZSByZXNwb25zZSBvZiB0aGUgcmV0cnk7IG9yIGEgUHJvbWlzZSBmb3Igb25lLlxuICAgICAqL1xuICAgIHJlc3BvbnNlRXJyb3IoZXJyb3IsIHJlcXVlc3QsIGh0dHBDbGllbnQpIHtcbiAgICAgICAgY29uc3QgeyByZXRyeUNvbmZpZyB9ID0gcmVxdWVzdDtcbiAgICAgICAgY29uc3QgeyByZXF1ZXN0Q2xvbmUgfSA9IHJldHJ5Q29uZmlnO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICBpZiAocmV0cnlDb25maWcuY291bnRlciA8IHJldHJ5Q29uZmlnLm1heFJldHJpZXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSByZXRyeUNvbmZpZy5kb1JldHJ5ICE9PSB1bmRlZmluZWQgPyByZXRyeUNvbmZpZy5kb1JldHJ5KGVycm9yLCByZXF1ZXN0KSA6IHRydWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHQpLnRoZW4oZG9SZXRyeSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkb1JldHJ5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXRyeUNvbmZpZy5jb3VudGVyKys7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkZWxheSA9IGNhbGN1bGF0ZURlbGF5KHJldHJ5Q29uZmlnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gRE9NLndpbmRvdy5zZXRUaW1lb3V0KHJlc29sdmUsICFpc05hTihkZWxheSkgPyBkZWxheSA6IDApKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdSZXF1ZXN0ID0gcmVxdWVzdENsb25lLmNsb25lKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiAocmV0cnlDb25maWcuYmVmb3JlUmV0cnkpID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXRyeUNvbmZpZy5iZWZvcmVSZXRyeShuZXdSZXF1ZXN0LCBodHRwQ2xpZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ld1JlcXVlc3Q7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKG5ld1JlcXVlc3QgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJldHJ5YWJsZVJlcXVlc3QgPSB7IC4uLm5ld1JlcXVlc3QsIHJldHJ5Q29uZmlnIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGh0dHBDbGllbnQuZmV0Y2gocmV0cnlhYmxlUmVxdWVzdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBubyBtb3JlIHJldHJpZXMsIHNvIGNsZWFuIHVwXG4gICAgICAgICAgICAgICAgICAgIFJlZmxlY3QuZGVsZXRlUHJvcGVydHkocmVxdWVzdCwgJ3JldHJ5Q29uZmlnJyk7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gbm8gbW9yZSByZXRyaWVzLCBzbyBjbGVhbiB1cFxuICAgICAgICAgICAgUmVmbGVjdC5kZWxldGVQcm9wZXJ0eShyZXF1ZXN0LCAncmV0cnlDb25maWcnKTtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5mdW5jdGlvbiBjYWxjdWxhdGVEZWxheShyZXRyeUNvbmZpZykge1xuICAgIGNvbnN0IHsgaW50ZXJ2YWwsIHN0cmF0ZWd5LCBtaW5SYW5kb21JbnRlcnZhbCwgbWF4UmFuZG9tSW50ZXJ2YWwsIGNvdW50ZXIgfSA9IHJldHJ5Q29uZmlnO1xuICAgIGlmICh0eXBlb2YgKHN0cmF0ZWd5KSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gcmV0cnlDb25maWcuc3RyYXRlZ3koY291bnRlcik7XG4gICAgfVxuICAgIHN3aXRjaCAoc3RyYXRlZ3kpIHtcbiAgICAgICAgY2FzZSAocmV0cnlTdHJhdGVneS5maXhlZCk6XG4gICAgICAgICAgICByZXR1cm4gcmV0cnlTdHJhdGVnaWVzW3JldHJ5U3RyYXRlZ3kuZml4ZWRdKGludGVydmFsKTtcbiAgICAgICAgY2FzZSAocmV0cnlTdHJhdGVneS5pbmNyZW1lbnRhbCk6XG4gICAgICAgICAgICByZXR1cm4gcmV0cnlTdHJhdGVnaWVzW3JldHJ5U3RyYXRlZ3kuaW5jcmVtZW50YWxdKGNvdW50ZXIsIGludGVydmFsKTtcbiAgICAgICAgY2FzZSAocmV0cnlTdHJhdGVneS5leHBvbmVudGlhbCk6XG4gICAgICAgICAgICByZXR1cm4gcmV0cnlTdHJhdGVnaWVzW3JldHJ5U3RyYXRlZ3kuZXhwb25lbnRpYWxdKGNvdW50ZXIsIGludGVydmFsKTtcbiAgICAgICAgY2FzZSAocmV0cnlTdHJhdGVneS5yYW5kb20pOlxuICAgICAgICAgICAgcmV0dXJuIHJldHJ5U3RyYXRlZ2llc1tyZXRyeVN0cmF0ZWd5LnJhbmRvbV0oY291bnRlciwgaW50ZXJ2YWwsIG1pblJhbmRvbUludGVydmFsLCBtYXhSYW5kb21JbnRlcnZhbCk7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VucmVjb2duaXplZCByZXRyeSBzdHJhdGVneScpO1xuICAgIH1cbn1cbmNvbnN0IHJldHJ5U3RyYXRlZ2llcyA9IFtcbiAgICAvLyBmaXhlZFxuICAgIGludGVydmFsID0+IGludGVydmFsLFxuICAgIC8vIGluY3JlbWVudGFsXG4gICAgKHJldHJ5Q291bnQsIGludGVydmFsKSA9PiBpbnRlcnZhbCAqIHJldHJ5Q291bnQsXG4gICAgLy8gZXhwb25lbnRpYWxcbiAgICAocmV0cnlDb3VudCwgaW50ZXJ2YWwpID0+IHJldHJ5Q291bnQgPT09IDEgPyBpbnRlcnZhbCA6IGludGVydmFsICoqIHJldHJ5Q291bnQgLyAxMDAwLFxuICAgIC8vIHJhbmRvbVxuICAgIChyZXRyeUNvdW50LCBpbnRlcnZhbCwgbWluUmFuZG9tSW50ZXJ2YWwgPSAwLCBtYXhSYW5kb21JbnRlcnZhbCA9IDYwMDAwKSA9PiB7XG4gICAgICAgIHJldHVybiBNYXRoLnJhbmRvbSgpICogKG1heFJhbmRvbUludGVydmFsIC0gbWluUmFuZG9tSW50ZXJ2YWwpICsgbWluUmFuZG9tSW50ZXJ2YWw7XG4gICAgfVxuXTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJldHJ5LWludGVyY2VwdG9yLmpzLm1hcCIsIi8qKlxuICogU2VyaWFsaXplIGFuIG9iamVjdCB0byBKU09OLiBVc2VmdWwgZm9yIGVhc2lseSBjcmVhdGluZyBKU09OIGZldGNoIHJlcXVlc3QgYm9kaWVzLlxuICpcbiAqIEBwYXJhbSBib2R5IC0gVGhlIG9iamVjdCB0byBiZSBzZXJpYWxpemVkIHRvIEpTT04uXG4gKiBAcGFyYW0gcmVwbGFjZXIgLSBUaGUgSlNPTi5zdHJpbmdpZnkgcmVwbGFjZXIgdXNlZCB3aGVuIHNlcmlhbGl6aW5nLlxuICogQHJldHVybnMgQSBKU09OIHN0cmluZy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGpzb24oYm9keSwgcmVwbGFjZXIpIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoKGJvZHkgIT09IHVuZGVmaW5lZCA/IGJvZHkgOiB7fSksIHJlcGxhY2VyKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXV0aWwuanMubWFwIiwiaW1wb3J0IHsgRGVmYXVsdEJpbmRpbmdMYW5ndWFnZSBhcyBKaXREZWZhdWx0QmluZGluZ0xhbmd1YWdlLCBEZWZhdWx0QmluZGluZ1N5bnRheCBhcyBKaXREZWZhdWx0QmluZGluZ1N5bnRheCwgRGVmYXVsdENvbXBvbmVudHMgYXMgSml0RGVmYXVsdENvbXBvbmVudHMgfSBmcm9tICdAYXVyZWxpYS9qaXQnO1xuaW1wb3J0IHsgRGVmYXVsdEJpbmRpbmdMYW5ndWFnZSBhcyBKaXRIdG1sRGVmYXVsdEJpbmRpbmdMYW5ndWFnZSwgRGVmYXVsdENvbXBvbmVudHMgYXMgSml0SHRtbERlZmF1bHRDb21wb25lbnRzIH0gZnJvbSAnQGF1cmVsaWEvaml0LWh0bWwnO1xuaW1wb3J0IHsgREksIFByb2ZpbGVyIH0gZnJvbSAnQGF1cmVsaWEva2VybmVsJztcbmltcG9ydCB7IFJ1bnRpbWVIdG1sQnJvd3NlckNvbmZpZ3VyYXRpb24gfSBmcm9tICdAYXVyZWxpYS9ydW50aW1lLWh0bWwtYnJvd3Nlcic7XG5jb25zdCB7IGVudGVyLCBsZWF2ZSB9ID0gUHJvZmlsZXIuY3JlYXRlVGltZXIoJ0ppdEh0bWxCcm93c2VyQ29uZmlndXJhdGlvbicpO1xuLyoqXG4gKiBBIERJIGNvbmZpZ3VyYXRpb24gb2JqZWN0IGNvbnRhaW5pbmcgaHRtbC1zcGVjaWZpYywgYnJvd3Nlci1zcGVjaWZpYyByZWdpc3RyYXRpb25zOlxuICogLSBgUnVudGltZUh0bWxCcm93c2VyQ29uZmlndXJhdGlvbmAgZnJvbSBgQGF1cmVsaWEvcnVudGltZS1odG1sLWJyb3dzZXJgXG4gKiAtIGBEZWZhdWx0Q29tcG9uZW50c2AgZnJvbSBgQGF1cmVsaWEvaml0YFxuICogLSBgRGVmYXVsdEJpbmRpbmdTeW50YXhgIGZyb20gYEBhdXJlbGlhL2ppdGBcbiAqIC0gYERlZmF1bHRCaW5kaW5nTGFuZ3VhZ2VgIGZyb20gYEBhdXJlbGlhL2ppdGBcbiAqIC0gYERlZmF1bHRDb21wb25lbnRzYCBmcm9tIGBAYXVyZWxpYS9qaXQtaHRtbGBcbiAqIC0gYERlZmF1bHRCaW5kaW5nTGFuZ3VhZ2VgIGZyb20gYEBhdXJlbGlhL2ppdC1odG1sYFxuICovXG5leHBvcnQgY29uc3QgSml0SHRtbEJyb3dzZXJDb25maWd1cmF0aW9uID0ge1xuICAgIC8qKlxuICAgICAqIEFwcGx5IHRoaXMgY29uZmlndXJhdGlvbiB0byB0aGUgcHJvdmlkZWQgY29udGFpbmVyLlxuICAgICAqL1xuICAgIHJlZ2lzdGVyKGNvbnRhaW5lcikge1xuICAgICAgICBSdW50aW1lSHRtbEJyb3dzZXJDb25maWd1cmF0aW9uXG4gICAgICAgICAgICAucmVnaXN0ZXIoY29udGFpbmVyKVxuICAgICAgICAgICAgLnJlZ2lzdGVyKC4uLkppdERlZmF1bHRCaW5kaW5nTGFuZ3VhZ2UsIC4uLkppdERlZmF1bHRCaW5kaW5nU3ludGF4LCAuLi5KaXREZWZhdWx0Q29tcG9uZW50cywgLi4uSml0SHRtbERlZmF1bHRCaW5kaW5nTGFuZ3VhZ2UsIC4uLkppdEh0bWxEZWZhdWx0Q29tcG9uZW50cyk7XG4gICAgICAgIHJldHVybiBjb250YWluZXI7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgY29udGFpbmVyIHdpdGggdGhpcyBjb25maWd1cmF0aW9uIGFwcGxpZWQgdG8gaXQuXG4gICAgICovXG4gICAgY3JlYXRlQ29udGFpbmVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWdpc3RlcihESS5jcmVhdGVDb250YWluZXIoKSk7XG4gICAgfVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCIsImltcG9ydCB7IERJIH0gZnJvbSAnQGF1cmVsaWEva2VybmVsJztcbmV4cG9ydCBjb25zdCBJQXR0clN5bnRheFRyYW5zZm9ybWVyID0gRElcbiAgICAuY3JlYXRlSW50ZXJmYWNlKCdJQXR0clN5bnRheFRyYW5zZm9ybWVyJylcbiAgICAubm9EZWZhdWx0KCk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hdHRyaWJ1dGUtc3ludGF4LXRyYW5zZm9ybWVyLmpzLm1hcCIsImltcG9ydCB7IF9fZGVjb3JhdGUgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IGJpbmRpbmdDb21tYW5kLCBnZXRUYXJnZXQsIH0gZnJvbSAnQGF1cmVsaWEvaml0JztcbmltcG9ydCB7IFJlZkJpbmRpbmdJbnN0cnVjdGlvbiB9IGZyb20gJ0BhdXJlbGlhL3J1bnRpbWUnO1xuaW1wb3J0IHsgQXR0cmlidXRlQmluZGluZ0luc3RydWN0aW9uLCBDYXB0dXJlQmluZGluZ0luc3RydWN0aW9uLCBEZWxlZ2F0ZUJpbmRpbmdJbnN0cnVjdGlvbiwgVHJpZ2dlckJpbmRpbmdJbnN0cnVjdGlvbiB9IGZyb20gJ0BhdXJlbGlhL3J1bnRpbWUtaHRtbCc7XG4vKipcbiAqIFRyaWdnZXIgYmluZGluZyBjb21tYW5kLiBDb21waWxlIGF0dHIgd2l0aCBiaW5kaW5nIHN5bWJvbCB3aXRoIGNvbW1hbmQgYHRyaWdnZXJgIHRvIGBUcmlnZ2VyQmluZGluZ0luc3RydWN0aW9uYFxuICovXG5sZXQgVHJpZ2dlckJpbmRpbmdDb21tYW5kID0gY2xhc3MgVHJpZ2dlckJpbmRpbmdDb21tYW5kIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5iaW5kaW5nVHlwZSA9IDQxODIgLyogVHJpZ2dlckNvbW1hbmQgKi87XG4gICAgfVxuICAgIGNvbXBpbGUoYmluZGluZykge1xuICAgICAgICByZXR1cm4gbmV3IFRyaWdnZXJCaW5kaW5nSW5zdHJ1Y3Rpb24oYmluZGluZy5leHByZXNzaW9uLCBnZXRUYXJnZXQoYmluZGluZywgZmFsc2UpKTtcbiAgICB9XG59O1xuVHJpZ2dlckJpbmRpbmdDb21tYW5kID0gX19kZWNvcmF0ZShbXG4gICAgYmluZGluZ0NvbW1hbmQoJ3RyaWdnZXInKVxuXSwgVHJpZ2dlckJpbmRpbmdDb21tYW5kKTtcbmV4cG9ydCB7IFRyaWdnZXJCaW5kaW5nQ29tbWFuZCB9O1xuLyoqXG4gKiBEZWxlZ2F0ZSBiaW5kaW5nIGNvbW1hbmQuIENvbXBpbGUgYXR0ciB3aXRoIGJpbmRpbmcgc3ltYm9sIHdpdGggY29tbWFuZCBgZGVsZWdhdGVgIHRvIGBEZWxlZ2F0ZUJpbmRpbmdJbnN0cnVjdGlvbmBcbiAqL1xubGV0IERlbGVnYXRlQmluZGluZ0NvbW1hbmQgPSBjbGFzcyBEZWxlZ2F0ZUJpbmRpbmdDb21tYW5kIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5iaW5kaW5nVHlwZSA9IDQxODQgLyogRGVsZWdhdGVDb21tYW5kICovO1xuICAgIH1cbiAgICBjb21waWxlKGJpbmRpbmcpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEZWxlZ2F0ZUJpbmRpbmdJbnN0cnVjdGlvbihiaW5kaW5nLmV4cHJlc3Npb24sIGdldFRhcmdldChiaW5kaW5nLCBmYWxzZSkpO1xuICAgIH1cbn07XG5EZWxlZ2F0ZUJpbmRpbmdDb21tYW5kID0gX19kZWNvcmF0ZShbXG4gICAgYmluZGluZ0NvbW1hbmQoJ2RlbGVnYXRlJylcbl0sIERlbGVnYXRlQmluZGluZ0NvbW1hbmQpO1xuZXhwb3J0IHsgRGVsZWdhdGVCaW5kaW5nQ29tbWFuZCB9O1xuLyoqXG4gKiBDYXB0dXJlIGJpbmRpbmcgY29tbWFuZC4gQ29tcGlsZSBhdHRyIHdpdGggYmluZGluZyBzeW1ib2wgd2l0aCBjb21tYW5kIGBjYXB0dXJlYCB0byBgQ2FwdHVyZUJpbmRpbmdJbnN0cnVjdGlvbmBcbiAqL1xubGV0IENhcHR1cmVCaW5kaW5nQ29tbWFuZCA9IGNsYXNzIENhcHR1cmVCaW5kaW5nQ29tbWFuZCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuYmluZGluZ1R5cGUgPSA0MTgzIC8qIENhcHR1cmVDb21tYW5kICovO1xuICAgIH1cbiAgICBjb21waWxlKGJpbmRpbmcpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDYXB0dXJlQmluZGluZ0luc3RydWN0aW9uKGJpbmRpbmcuZXhwcmVzc2lvbiwgZ2V0VGFyZ2V0KGJpbmRpbmcsIGZhbHNlKSk7XG4gICAgfVxufTtcbkNhcHR1cmVCaW5kaW5nQ29tbWFuZCA9IF9fZGVjb3JhdGUoW1xuICAgIGJpbmRpbmdDb21tYW5kKCdjYXB0dXJlJylcbl0sIENhcHR1cmVCaW5kaW5nQ29tbWFuZCk7XG5leHBvcnQgeyBDYXB0dXJlQmluZGluZ0NvbW1hbmQgfTtcbi8qKlxuICogQXR0ciBiaW5kaW5nIGNvbW1hbmQuIENvbXBpbGUgYXR0ciB3aXRoIGJpbmRpbmcgc3ltYm9sIHdpdGggY29tbWFuZCBgYXR0cmAgdG8gYEF0dHJpYnV0ZUJpbmRpbmdJbnN0cnVjdGlvbmBcbiAqL1xubGV0IEF0dHJCaW5kaW5nQ29tbWFuZCA9IGNsYXNzIEF0dHJCaW5kaW5nQ29tbWFuZCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuYmluZGluZ1R5cGUgPSAzMiAvKiBJc1Byb3BlcnR5ICovO1xuICAgIH1cbiAgICBjb21waWxlKGJpbmRpbmcpIHtcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gZ2V0VGFyZ2V0KGJpbmRpbmcsIGZhbHNlKTtcbiAgICAgICAgcmV0dXJuIG5ldyBBdHRyaWJ1dGVCaW5kaW5nSW5zdHJ1Y3Rpb24odGFyZ2V0LCBiaW5kaW5nLmV4cHJlc3Npb24sIHRhcmdldCk7XG4gICAgfVxufTtcbkF0dHJCaW5kaW5nQ29tbWFuZCA9IF9fZGVjb3JhdGUoW1xuICAgIGJpbmRpbmdDb21tYW5kKCdhdHRyJylcbl0sIEF0dHJCaW5kaW5nQ29tbWFuZCk7XG5leHBvcnQgeyBBdHRyQmluZGluZ0NvbW1hbmQgfTtcbi8qKlxuICogU3R5bGUgYmluZGluZyBjb21tYW5kLiBDb21waWxlIGF0dHIgd2l0aCBiaW5kaW5nIHN5bWJvbCB3aXRoIGNvbW1hbmQgYHN0eWxlYCB0byBgQXR0cmlidXRlQmluZGluZ0luc3RydWN0aW9uYFxuICovXG5sZXQgU3R5bGVCaW5kaW5nQ29tbWFuZCA9IGNsYXNzIFN0eWxlQmluZGluZ0NvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmJpbmRpbmdUeXBlID0gMzIgLyogSXNQcm9wZXJ0eSAqLztcbiAgICB9XG4gICAgY29tcGlsZShiaW5kaW5nKSB7XG4gICAgICAgIHJldHVybiBuZXcgQXR0cmlidXRlQmluZGluZ0luc3RydWN0aW9uKCdzdHlsZScsIGJpbmRpbmcuZXhwcmVzc2lvbiwgZ2V0VGFyZ2V0KGJpbmRpbmcsIGZhbHNlKSk7XG4gICAgfVxufTtcblN0eWxlQmluZGluZ0NvbW1hbmQgPSBfX2RlY29yYXRlKFtcbiAgICBiaW5kaW5nQ29tbWFuZCgnc3R5bGUnKVxuXSwgU3R5bGVCaW5kaW5nQ29tbWFuZCk7XG5leHBvcnQgeyBTdHlsZUJpbmRpbmdDb21tYW5kIH07XG4vKipcbiAqIENsYXNzIGJpbmRpbmcgY29tbWFuZC4gQ29tcGlsZSBhdHRyIHdpdGggYmluZGluZyBzeW1ib2wgd2l0aCBjb21tYW5kIGBjbGFzc2AgdG8gYEF0dHJpYnV0ZUJpbmRpbmdJbnN0cnVjdGlvbmBcbiAqL1xubGV0IENsYXNzQmluZGluZ0NvbW1hbmQgPSBjbGFzcyBDbGFzc0JpbmRpbmdDb21tYW5kIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5iaW5kaW5nVHlwZSA9IDMyIC8qIElzUHJvcGVydHkgKi87XG4gICAgfVxuICAgIGNvbXBpbGUoYmluZGluZykge1xuICAgICAgICByZXR1cm4gbmV3IEF0dHJpYnV0ZUJpbmRpbmdJbnN0cnVjdGlvbignY2xhc3MnLCBiaW5kaW5nLmV4cHJlc3Npb24sIGdldFRhcmdldChiaW5kaW5nLCBmYWxzZSkpO1xuICAgIH1cbn07XG5DbGFzc0JpbmRpbmdDb21tYW5kID0gX19kZWNvcmF0ZShbXG4gICAgYmluZGluZ0NvbW1hbmQoJ2NsYXNzJylcbl0sIENsYXNzQmluZGluZ0NvbW1hbmQpO1xuZXhwb3J0IHsgQ2xhc3NCaW5kaW5nQ29tbWFuZCB9O1xuLyoqXG4gKiBCaW5kaW5nIGNvbW1hbmQgdG8gcmVmZXIgZGlmZmVyZW50IHRhcmdldHMgKGVsZW1lbnQsIGN1c3RvbSBlbGVtZW50L2F0dHJpYnV0ZSB2aWV3IG1vZGVscywgY29udHJvbGxlcikgYWZ0ZXJBdHRhY2ggdG8gYW4gZWxlbWVudFxuICovXG5sZXQgUmVmQmluZGluZ0NvbW1hbmQgPSBjbGFzcyBSZWZCaW5kaW5nQ29tbWFuZCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuYmluZGluZ1R5cGUgPSAzMiAvKiBJc1Byb3BlcnR5ICovIHwgNDA5NiAvKiBJZ25vcmVDdXN0b21BdHRyICovO1xuICAgIH1cbiAgICBjb21waWxlKGJpbmRpbmcpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZWZCaW5kaW5nSW5zdHJ1Y3Rpb24oYmluZGluZy5leHByZXNzaW9uLCBnZXRUYXJnZXQoYmluZGluZywgZmFsc2UpKTtcbiAgICB9XG59O1xuUmVmQmluZGluZ0NvbW1hbmQgPSBfX2RlY29yYXRlKFtcbiAgICBiaW5kaW5nQ29tbWFuZCgncmVmJylcbl0sIFJlZkJpbmRpbmdDb21tYW5kKTtcbmV4cG9ydCB7IFJlZkJpbmRpbmdDb21tYW5kIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1iaW5kaW5nLWNvbW1hbmRzLmpzLm1hcCIsImltcG9ydCB7IERlZmF1bHRCaW5kaW5nTGFuZ3VhZ2UgYXMgSml0RGVmYXVsdEJpbmRpbmdMYW5ndWFnZSwgRGVmYXVsdEJpbmRpbmdTeW50YXggYXMgSml0RGVmYXVsdEJpbmRpbmdTeW50YXgsIERlZmF1bHRDb21wb25lbnRzIGFzIEppdERlZmF1bHRDb21wb25lbnRzIH0gZnJvbSAnQGF1cmVsaWEvaml0JztcbmltcG9ydCB7IERJIH0gZnJvbSAnQGF1cmVsaWEva2VybmVsJztcbmltcG9ydCB7IFJ1bnRpbWVIdG1sQ29uZmlndXJhdGlvbiB9IGZyb20gJ0BhdXJlbGlhL3J1bnRpbWUtaHRtbCc7XG5pbXBvcnQgeyBBdHRyQmluZGluZ0NvbW1hbmQsIENhcHR1cmVCaW5kaW5nQ29tbWFuZCwgQ2xhc3NCaW5kaW5nQ29tbWFuZCwgRGVsZWdhdGVCaW5kaW5nQ29tbWFuZCwgUmVmQmluZGluZ0NvbW1hbmQsIFN0eWxlQmluZGluZ0NvbW1hbmQsIFRyaWdnZXJCaW5kaW5nQ29tbWFuZCB9IGZyb20gJy4vYmluZGluZy1jb21tYW5kcyc7XG5pbXBvcnQgeyBIdG1sQXR0clN5bnRheFRyYW5zZm9ybWVyIH0gZnJvbSAnLi9odG1sLWF0dHJpYnV0ZS1zeW50YXgtdHJhbnNmb3JtZXInO1xuaW1wb3J0IHsgVGVtcGxhdGVDb21waWxlciB9IGZyb20gJy4vdGVtcGxhdGUtY29tcGlsZXInO1xuaW1wb3J0IHsgSFRNTFRlbXBsYXRlRWxlbWVudEZhY3RvcnkgfSBmcm9tICcuL3RlbXBsYXRlLWVsZW1lbnQtZmFjdG9yeSc7XG5leHBvcnQgY29uc3QgSVRlbXBsYXRlQ29tcGlsZXJSZWdpc3RyYXRpb24gPSBUZW1wbGF0ZUNvbXBpbGVyO1xuZXhwb3J0IGNvbnN0IElUZW1wbGF0ZUVsZW1lbnRGYWN0b3J5UmVnaXN0cmF0aW9uID0gSFRNTFRlbXBsYXRlRWxlbWVudEZhY3Rvcnk7XG5leHBvcnQgY29uc3QgSUF0dHJTeW50YXhUcmFuc2Zvcm1lclJlZ2lzdGF0aW9uID0gSHRtbEF0dHJTeW50YXhUcmFuc2Zvcm1lcjtcbi8qKlxuICogRGVmYXVsdCBIVE1MLXNwZWNpZmljIChidXQgZW52aXJvbm1lbnQtYWdub3N0aWMpIGltcGxlbWVudGF0aW9ucyBmb3IgdGhlIGZvbGxvd2luZyBpbnRlcmZhY2VzOlxuICogLSBgSVRlbXBsYXRlQ29tcGlsZXJgXG4gKiAtIGBJVGVtcGxhdGVFbGVtZW50RmFjdG9yeWBcbiAqL1xuZXhwb3J0IGNvbnN0IERlZmF1bHRDb21wb25lbnRzID0gW1xuICAgIElUZW1wbGF0ZUNvbXBpbGVyUmVnaXN0cmF0aW9uLFxuICAgIElUZW1wbGF0ZUVsZW1lbnRGYWN0b3J5UmVnaXN0cmF0aW9uLFxuICAgIElBdHRyU3ludGF4VHJhbnNmb3JtZXJSZWdpc3RhdGlvblxuXTtcbmV4cG9ydCBjb25zdCBSZWZCaW5kaW5nQ29tbWFuZFJlZ2lzdHJhdGlvbiA9IFJlZkJpbmRpbmdDb21tYW5kO1xuZXhwb3J0IGNvbnN0IFRyaWdnZXJCaW5kaW5nQ29tbWFuZFJlZ2lzdHJhdGlvbiA9IFRyaWdnZXJCaW5kaW5nQ29tbWFuZDtcbmV4cG9ydCBjb25zdCBEZWxlZ2F0ZUJpbmRpbmdDb21tYW5kUmVnaXN0cmF0aW9uID0gRGVsZWdhdGVCaW5kaW5nQ29tbWFuZDtcbmV4cG9ydCBjb25zdCBDYXB0dXJlQmluZGluZ0NvbW1hbmRSZWdpc3RyYXRpb24gPSBDYXB0dXJlQmluZGluZ0NvbW1hbmQ7XG5leHBvcnQgY29uc3QgQXR0ckJpbmRpbmdDb21tYW5kUmVnaXN0cmF0aW9uID0gQXR0ckJpbmRpbmdDb21tYW5kO1xuZXhwb3J0IGNvbnN0IENsYXNzQmluZGluZ0NvbW1hbmRSZWdpc3RyYXRpb24gPSBDbGFzc0JpbmRpbmdDb21tYW5kO1xuZXhwb3J0IGNvbnN0IFN0eWxlQmluZGluZ0NvbW1hbmRSZWdpc3RyYXRpb24gPSBTdHlsZUJpbmRpbmdDb21tYW5kO1xuLyoqXG4gKiBEZWZhdWx0IEhUTUwtc3BlY2lmaWMgKGJ1dCBlbnZpcm9ubWVudC1hZ25vc3RpYykgYmluZGluZyBjb21tYW5kczpcbiAqIC0gRXZlbnQgbGlzdGVuZXJzOiBgLnRyaWdnZXJgLCBgLmRlbGVnYXRlYCwgYC5jYXB0dXJlYFxuICovXG5leHBvcnQgY29uc3QgRGVmYXVsdEJpbmRpbmdMYW5ndWFnZSA9IFtcbiAgICBSZWZCaW5kaW5nQ29tbWFuZFJlZ2lzdHJhdGlvbixcbiAgICBUcmlnZ2VyQmluZGluZ0NvbW1hbmRSZWdpc3RyYXRpb24sXG4gICAgRGVsZWdhdGVCaW5kaW5nQ29tbWFuZFJlZ2lzdHJhdGlvbixcbiAgICBDYXB0dXJlQmluZGluZ0NvbW1hbmRSZWdpc3RyYXRpb24sXG4gICAgQ2xhc3NCaW5kaW5nQ29tbWFuZFJlZ2lzdHJhdGlvbixcbiAgICBTdHlsZUJpbmRpbmdDb21tYW5kUmVnaXN0cmF0aW9uLFxuICAgIEF0dHJCaW5kaW5nQ29tbWFuZFJlZ2lzdHJhdGlvblxuXTtcbi8qKlxuICogQSBESSBjb25maWd1cmF0aW9uIG9iamVjdCBjb250YWluaW5nIGh0bWwtc3BlY2lmaWMgKGJ1dCBlbnZpcm9ubWVudC1hZ25vc3RpYykgcmVnaXN0cmF0aW9uczpcbiAqIC0gYFJ1bnRpbWVIdG1sQ29uZmlndXJhdGlvbmAgZnJvbSBgQGF1cmVsaWEvcnVudGltZS1odG1sYFxuICogLSBgRGVmYXVsdENvbXBvbmVudHNgIGZyb20gYEBhdXJlbGlhL2ppdGBcbiAqIC0gYERlZmF1bHRCaW5kaW5nU3ludGF4YCBmcm9tIGBAYXVyZWxpYS9qaXRgXG4gKiAtIGBEZWZhdWx0QmluZGluZ0xhbmd1YWdlYCBmcm9tIGBAYXVyZWxpYS9qaXRgXG4gKiAtIGBEZWZhdWx0Q29tcG9uZW50c2BcbiAqIC0gYERlZmF1bHRCaW5kaW5nTGFuZ3VhZ2VgXG4gKi9cbmV4cG9ydCBjb25zdCBKaXRIdG1sQ29uZmlndXJhdGlvbiA9IHtcbiAgICAvKipcbiAgICAgKiBBcHBseSB0aGlzIGNvbmZpZ3VyYXRpb24gdG8gdGhlIHByb3ZpZGVkIGNvbnRhaW5lci5cbiAgICAgKi9cbiAgICByZWdpc3Rlcihjb250YWluZXIpIHtcbiAgICAgICAgcmV0dXJuIFJ1bnRpbWVIdG1sQ29uZmlndXJhdGlvblxuICAgICAgICAgICAgLnJlZ2lzdGVyKGNvbnRhaW5lcilcbiAgICAgICAgICAgIC5yZWdpc3RlciguLi5KaXREZWZhdWx0Q29tcG9uZW50cywgLi4uSml0RGVmYXVsdEJpbmRpbmdTeW50YXgsIC4uLkppdERlZmF1bHRCaW5kaW5nTGFuZ3VhZ2UsIC4uLkRlZmF1bHRDb21wb25lbnRzLCAuLi5EZWZhdWx0QmluZGluZ0xhbmd1YWdlKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyBjb250YWluZXIgd2l0aCB0aGlzIGNvbmZpZ3VyYXRpb24gYXBwbGllZCB0byBpdC5cbiAgICAgKi9cbiAgICBjcmVhdGVDb250YWluZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlZ2lzdGVyKERJLmNyZWF0ZUNvbnRhaW5lcigpKTtcbiAgICB9XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29uZmlndXJhdGlvbi5qcy5tYXAiLCJleHBvcnQgZnVuY3Rpb24gc3RyaW5naWZ5RE9NKG5vZGUsIGRlcHRoKSB7XG4gICAgY29uc3QgaW5kZW50ID0gJyAnLnJlcGVhdChkZXB0aCk7XG4gICAgbGV0IG91dHB1dCA9IGluZGVudDtcbiAgICBvdXRwdXQgKz0gYE5vZGU6ICR7bm9kZS5ub2RlTmFtZX1gO1xuICAgIGlmIChub2RlLm5vZGVUeXBlID09PSAzIC8qIFRleHQgKi8pIHtcbiAgICAgICAgb3V0cHV0ICs9IGAgXCIke25vZGUudGV4dENvbnRlbnR9XCJgO1xuICAgIH1cbiAgICBpZiAobm9kZS5ub2RlVHlwZSA9PT0gMSAvKiBFbGVtZW50ICovKSB7XG4gICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgbGV0IGF0dHI7XG4gICAgICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSBub2RlLmF0dHJpYnV0ZXM7XG4gICAgICAgIGNvbnN0IGxlbiA9IGF0dHJpYnV0ZXMubGVuZ3RoO1xuICAgICAgICBmb3IgKDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgICAgICBhdHRyID0gYXR0cmlidXRlc1tpXTtcbiAgICAgICAgICAgIG91dHB1dCArPSBgICR7YXR0ci5uYW1lfT0ke2F0dHIudmFsdWV9YDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBvdXRwdXQgKz0gJ1xcbic7XG4gICAgaWYgKG5vZGUubm9kZVR5cGUgPT09IDEgLyogRWxlbWVudCAqLykge1xuICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgIGxldCBjaGlsZE5vZGVzID0gbm9kZS5jaGlsZE5vZGVzO1xuICAgICAgICBsZXQgbGVuID0gY2hpbGROb2Rlcy5sZW5ndGg7XG4gICAgICAgIGZvciAoOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAgICAgIG91dHB1dCArPSBzdHJpbmdpZnlET00oY2hpbGROb2Rlc1tpXSwgZGVwdGggKyAxKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobm9kZS5ub2RlTmFtZSA9PT0gJ1RFTVBMQVRFJykge1xuICAgICAgICAgICAgaSA9IDA7XG4gICAgICAgICAgICBjaGlsZE5vZGVzID0gbm9kZS5jb250ZW50LmNoaWxkTm9kZXM7XG4gICAgICAgICAgICBsZW4gPSBjaGlsZE5vZGVzLmxlbmd0aDtcbiAgICAgICAgICAgIGZvciAoOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAgICAgICAgICBvdXRwdXQgKz0gc3RyaW5naWZ5RE9NKGNoaWxkTm9kZXNbaV0sIGRlcHRoICsgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzdHJpbmdpZnlJbnN0cnVjdGlvbnMoaW5zdHJ1Y3Rpb24sIGRlcHRoKSB7XG4gICAgY29uc3QgaW5kZW50ID0gJyAnLnJlcGVhdChkZXB0aCk7XG4gICAgbGV0IG91dHB1dCA9IGluZGVudDtcbiAgICBzd2l0Y2ggKGluc3RydWN0aW9uLnR5cGUpIHtcbiAgICAgICAgY2FzZSBcImhhXCIgLyogdGV4dEJpbmRpbmcgKi86XG4gICAgICAgICAgICBvdXRwdXQgKz0gJ3RleHRCaW5kaW5nXFxuJztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwicmhcIiAvKiBjYWxsQmluZGluZyAqLzpcbiAgICAgICAgICAgIG91dHB1dCArPSAnY2FsbEJpbmRpbmdcXG4nO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJya1wiIC8qIGl0ZXJhdG9yQmluZGluZyAqLzpcbiAgICAgICAgICAgIG91dHB1dCArPSAnaXRlcmF0b3JCaW5kaW5nXFxuJztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiaGJcIiAvKiBsaXN0ZW5lckJpbmRpbmcgKi86XG4gICAgICAgICAgICBvdXRwdXQgKz0gJ2xpc3RlbmVyQmluZGluZ1xcbic7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcInJnXCIgLyogcHJvcGVydHlCaW5kaW5nICovOlxuICAgICAgICAgICAgb3V0cHV0ICs9ICdwcm9wZXJ0eUJpbmRpbmdcXG4nO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJyalwiIC8qIHJlZkJpbmRpbmcgKi86XG4gICAgICAgICAgICBvdXRwdXQgKz0gJ3JlZkJpbmRpbmdcXG4nO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJoZFwiIC8qIHN0eWxlUHJvcGVydHlCaW5kaW5nICovOlxuICAgICAgICAgICAgb3V0cHV0ICs9ICdzdHlsZVByb3BlcnR5QmluZGluZ1xcbic7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcInJlXCIgLyogc2V0UHJvcGVydHkgKi86XG4gICAgICAgICAgICBvdXRwdXQgKz0gJ3NldFByb3BlcnR5XFxuJztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiaGVcIiAvKiBzZXRBdHRyaWJ1dGUgKi86XG4gICAgICAgICAgICBvdXRwdXQgKz0gJ3NldEF0dHJpYnV0ZVxcbic7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcInJmXCIgLyogaW50ZXJwb2xhdGlvbiAqLzpcbiAgICAgICAgICAgIG91dHB1dCArPSAnaW50ZXJwb2xhdGlvblxcbic7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcInJkXCIgLyogaHlkcmF0ZUxldEVsZW1lbnQgKi86XG4gICAgICAgICAgICBvdXRwdXQgKz0gJ2h5ZHJhdGVMZXRFbGVtZW50XFxuJztcbiAgICAgICAgICAgIGluc3RydWN0aW9uLmluc3RydWN0aW9ucy5mb3JFYWNoKGkgPT4ge1xuICAgICAgICAgICAgICAgIG91dHB1dCArPSBzdHJpbmdpZnlJbnN0cnVjdGlvbnMoaSwgZGVwdGggKyAxKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJyYlwiIC8qIGh5ZHJhdGVBdHRyaWJ1dGUgKi86XG4gICAgICAgICAgICBvdXRwdXQgKz0gYGh5ZHJhdGVBdHRyaWJ1dGU6ICR7aW5zdHJ1Y3Rpb24ucmVzfVxcbmA7XG4gICAgICAgICAgICBpbnN0cnVjdGlvbi5pbnN0cnVjdGlvbnMuZm9yRWFjaChpID0+IHtcbiAgICAgICAgICAgICAgICBvdXRwdXQgKz0gc3RyaW5naWZ5SW5zdHJ1Y3Rpb25zKGksIGRlcHRoICsgMSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwicmFcIiAvKiBoeWRyYXRlRWxlbWVudCAqLzpcbiAgICAgICAgICAgIG91dHB1dCArPSBgaHlkcmF0ZUVsZW1lbnQ6ICR7aW5zdHJ1Y3Rpb24ucmVzfVxcbmA7XG4gICAgICAgICAgICBpbnN0cnVjdGlvbi5pbnN0cnVjdGlvbnMuZm9yRWFjaChpID0+IHtcbiAgICAgICAgICAgICAgICBvdXRwdXQgKz0gc3RyaW5naWZ5SW5zdHJ1Y3Rpb25zKGksIGRlcHRoICsgMSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwicmNcIiAvKiBoeWRyYXRlVGVtcGxhdGVDb250cm9sbGVyICovOlxuICAgICAgICAgICAgb3V0cHV0ICs9IGBoeWRyYXRlVGVtcGxhdGVDb250cm9sbGVyOiAke2luc3RydWN0aW9uLnJlc31cXG5gO1xuICAgICAgICAgICAgb3V0cHV0ICs9IHN0cmluZ2lmeVRlbXBsYXRlRGVmaW5pdGlvbihpbnN0cnVjdGlvbi5kZWYsIGRlcHRoICsgMSk7XG4gICAgICAgICAgICBpbnN0cnVjdGlvbi5pbnN0cnVjdGlvbnMuZm9yRWFjaChpID0+IHtcbiAgICAgICAgICAgICAgICBvdXRwdXQgKz0gc3RyaW5naWZ5SW5zdHJ1Y3Rpb25zKGksIGRlcHRoICsgMSk7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzdHJpbmdpZnlUZW1wbGF0ZURlZmluaXRpb24oZGVmLCBkZXB0aCkge1xuICAgIGNvbnN0IGluZGVudCA9ICcgJy5yZXBlYXQoZGVwdGgpO1xuICAgIGxldCBvdXRwdXQgPSBpbmRlbnQ7XG4gICAgb3V0cHV0ICs9IGBDdXN0b21FbGVtZW50RGVmaW5pdGlvbjogJHtkZWYubmFtZX1cXG5gO1xuICAgIG91dHB1dCArPSBzdHJpbmdpZnlET00oZGVmLnRlbXBsYXRlLCBkZXB0aCArIDEpO1xuICAgIG91dHB1dCArPSBgJHtpbmRlbnR9IEluc3RydWN0aW9uczpcXG5gO1xuICAgIGRlZi5pbnN0cnVjdGlvbnMuZm9yRWFjaChyb3cgPT4ge1xuICAgICAgICBvdXRwdXQgKz0gYCR7aW5kZW50fSAgUm93OlxcbmA7XG4gICAgICAgIHJvdy5mb3JFYWNoKGkgPT4ge1xuICAgICAgICAgICAgb3V0cHV0ICs9IHN0cmluZ2lmeUluc3RydWN0aW9ucyhpLCBkZXB0aCArIDMpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICByZXR1cm4gb3V0cHV0O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGVidWdnaW5nLmpzLm1hcCIsImltcG9ydCB7IFJlZ2lzdHJhdGlvbiB9IGZyb20gJ0BhdXJlbGlhL2tlcm5lbCc7XG5pbXBvcnQgeyBJQXR0clN5bnRheFRyYW5zZm9ybWVyIH0gZnJvbSAnLi9hdHRyaWJ1dGUtc3ludGF4LXRyYW5zZm9ybWVyJztcbmV4cG9ydCBjbGFzcyBIdG1sQXR0clN5bnRheFRyYW5zZm9ybWVyIHtcbiAgICBzdGF0aWMgcmVnaXN0ZXIoY29udGFpbmVyKSB7XG4gICAgICAgIHJldHVybiBSZWdpc3RyYXRpb24uc2luZ2xldG9uKElBdHRyU3ludGF4VHJhbnNmb3JtZXIsIHRoaXMpLnJlZ2lzdGVyKGNvbnRhaW5lcik7XG4gICAgfVxuICAgIHRyYW5zZm9ybShub2RlLCBhdHRyU3ludGF4KSB7XG4gICAgICAgIGlmIChhdHRyU3ludGF4LmNvbW1hbmQgPT09ICdiaW5kJyAmJiBzaG91bGREZWZhdWx0VG9Ud29XYXkobm9kZSwgYXR0clN5bnRheCkpIHtcbiAgICAgICAgICAgIGF0dHJTeW50YXguY29tbWFuZCA9ICd0d28td2F5JztcbiAgICAgICAgfVxuICAgICAgICBhdHRyU3ludGF4LnRhcmdldCA9IHRoaXMubWFwKG5vZGUudGFnTmFtZSwgYXR0clN5bnRheC50YXJnZXQpO1xuICAgIH1cbiAgICBtYXAodGFnTmFtZSwgYXR0cikge1xuICAgICAgICBzd2l0Y2ggKHRhZ05hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgJ0xBQkVMJzpcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGF0dHIpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZm9yJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnaHRtbEZvcic7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXR0cjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlICdJTUcnOlxuICAgICAgICAgICAgICAgIHN3aXRjaCAoYXR0cikge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICd1c2VtYXAnOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICd1c2VNYXAnO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF0dHI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSAnSU5QVVQnOlxuICAgICAgICAgICAgICAgIHN3aXRjaCAoYXR0cikge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdtYXhsZW5ndGgnOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdtYXhMZW5ndGgnO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdtaW5sZW5ndGgnOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdtaW5MZW5ndGgnO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdmb3JtYWN0aW9uJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnZm9ybUFjdGlvbic7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2Zvcm1lbmN0eXBlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnZm9ybUVuY1R5cGUnO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdmb3JtbWV0aG9kJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnZm9ybU1ldGhvZCc7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2Zvcm1ub3ZhbGlkYXRlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnZm9ybU5vVmFsaWRhdGUnO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdmb3JtdGFyZ2V0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnZm9ybVRhcmdldCc7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2lucHV0bW9kZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2lucHV0TW9kZSc7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXR0cjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlICdURVhUQVJFQSc6XG4gICAgICAgICAgICAgICAgc3dpdGNoIChhdHRyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ21heGxlbmd0aCc6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ21heExlbmd0aCc7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXR0cjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlICdURCc6XG4gICAgICAgICAgICBjYXNlICdUSCc6XG4gICAgICAgICAgICAgICAgc3dpdGNoIChhdHRyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3Jvd3NwYW4nOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdyb3dTcGFuJztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnY29sc3Bhbic6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2NvbFNwYW4nO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF0dHI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGF0dHIpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYWNjZXNza2V5JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnYWNjZXNzS2V5JztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnY29udGVudGVkaXRhYmxlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnY29udGVudEVkaXRhYmxlJztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAndGFiaW5kZXgnOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICd0YWJJbmRleCc7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3RleHRjb250ZW50JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAndGV4dENvbnRlbnQnO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdpbm5lcmh0bWwnOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdpbm5lckhUTUwnO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdzY3JvbGx0b3AnOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdzY3JvbGxUb3AnO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdzY3JvbGxsZWZ0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnc2Nyb2xsTGVmdCc7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3JlYWRvbmx5JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAncmVhZE9ubHknO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF0dHI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gc2hvdWxkRGVmYXVsdFRvVHdvV2F5KGVsZW1lbnQsIGF0dHIpIHtcbiAgICBzd2l0Y2ggKGVsZW1lbnQudGFnTmFtZSkge1xuICAgICAgICBjYXNlICdJTlBVVCc6XG4gICAgICAgICAgICBzd2l0Y2ggKGVsZW1lbnQudHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2NoZWNrYm94JzpcbiAgICAgICAgICAgICAgICBjYXNlICdyYWRpbyc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhdHRyLnRhcmdldCA9PT0gJ2NoZWNrZWQnO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhdHRyLnRhcmdldCA9PT0gJ3ZhbHVlJyB8fCBhdHRyLnRhcmdldCA9PT0gJ2ZpbGVzJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgY2FzZSAnVEVYVEFSRUEnOlxuICAgICAgICBjYXNlICdTRUxFQ1QnOlxuICAgICAgICAgICAgcmV0dXJuIGF0dHIudGFyZ2V0ID09PSAndmFsdWUnO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgc3dpdGNoIChhdHRyLnRhcmdldCkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ3RleHRjb250ZW50JzpcbiAgICAgICAgICAgICAgICBjYXNlICdpbm5lcmh0bWwnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudC5oYXNBdHRyaWJ1dGUoJ2NvbnRlbnRlZGl0YWJsZScpO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3Njcm9sbHRvcCc6XG4gICAgICAgICAgICAgICAgY2FzZSAnc2Nyb2xsbGVmdCc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1odG1sLWF0dHJpYnV0ZS1zeW50YXgtdHJhbnNmb3JtZXIuanMubWFwIiwiZXhwb3J0IHsgSUF0dHJTeW50YXhUcmFuc2Zvcm1lciB9IGZyb20gJy4vYXR0cmlidXRlLXN5bnRheC10cmFuc2Zvcm1lcic7XG5leHBvcnQgeyBUcmlnZ2VyQmluZGluZ0NvbW1hbmQsIERlbGVnYXRlQmluZGluZ0NvbW1hbmQsIENhcHR1cmVCaW5kaW5nQ29tbWFuZCwgQXR0ckJpbmRpbmdDb21tYW5kLCBDbGFzc0JpbmRpbmdDb21tYW5kLCBTdHlsZUJpbmRpbmdDb21tYW5kIH0gZnJvbSAnLi9iaW5kaW5nLWNvbW1hbmRzJztcbmV4cG9ydCB7IElUZW1wbGF0ZUNvbXBpbGVyUmVnaXN0cmF0aW9uLCBJVGVtcGxhdGVFbGVtZW50RmFjdG9yeVJlZ2lzdHJhdGlvbiwgSUF0dHJTeW50YXhUcmFuc2Zvcm1lclJlZ2lzdGF0aW9uLCBEZWZhdWx0Q29tcG9uZW50cywgVHJpZ2dlckJpbmRpbmdDb21tYW5kUmVnaXN0cmF0aW9uLCBEZWxlZ2F0ZUJpbmRpbmdDb21tYW5kUmVnaXN0cmF0aW9uLCBDYXB0dXJlQmluZGluZ0NvbW1hbmRSZWdpc3RyYXRpb24sIEF0dHJCaW5kaW5nQ29tbWFuZFJlZ2lzdHJhdGlvbiwgQ2xhc3NCaW5kaW5nQ29tbWFuZFJlZ2lzdHJhdGlvbiwgU3R5bGVCaW5kaW5nQ29tbWFuZFJlZ2lzdHJhdGlvbiwgRGVmYXVsdEJpbmRpbmdMYW5ndWFnZSwgSml0SHRtbENvbmZpZ3VyYXRpb24gfSBmcm9tICcuL2NvbmZpZ3VyYXRpb24nO1xuZXhwb3J0IHsgc3RyaW5naWZ5RE9NLCBzdHJpbmdpZnlJbnN0cnVjdGlvbnMsIHN0cmluZ2lmeVRlbXBsYXRlRGVmaW5pdGlvbiB9IGZyb20gJy4vZGVidWdnaW5nJztcbmV4cG9ydCB7IFRlbXBsYXRlQmluZGVyLCB9IGZyb20gJy4vdGVtcGxhdGUtYmluZGVyJztcbmV4cG9ydCB7IElUZW1wbGF0ZUVsZW1lbnRGYWN0b3J5IH0gZnJvbSAnLi90ZW1wbGF0ZS1lbGVtZW50LWZhY3RvcnknO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIiwiaW1wb3J0IHsgQmluZGluZ1N5bWJvbCwgQ3VzdG9tQXR0cmlidXRlU3ltYm9sLCBDdXN0b21FbGVtZW50U3ltYm9sIGFzICRDdXN0b21FbGVtZW50U3ltYm9sLCBMZXRFbGVtZW50U3ltYm9sIGFzICRMZXRFbGVtZW50U3ltYm9sLCBQbGFpbkF0dHJpYnV0ZVN5bWJvbCwgUGxhaW5FbGVtZW50U3ltYm9sIGFzICRQbGFpbkVsZW1lbnRTeW1ib2wsIFJlcGxhY2VQYXJ0U3ltYm9sIGFzICRSZXBsYWNlUGFydFN5bWJvbCwgVGVtcGxhdGVDb250cm9sbGVyU3ltYm9sIGFzICRUZW1wbGF0ZUNvbnRyb2xsZXJTeW1ib2wsIFRleHRTeW1ib2wgYXMgJFRleHRTeW1ib2wsIH0gZnJvbSAnQGF1cmVsaWEvaml0JztcbmV4cG9ydCBjb25zdCBDdXN0b21FbGVtZW50U3ltYm9sID0gJEN1c3RvbUVsZW1lbnRTeW1ib2w7XG5leHBvcnQgY29uc3QgTGV0RWxlbWVudFN5bWJvbCA9ICRMZXRFbGVtZW50U3ltYm9sO1xuZXhwb3J0IGNvbnN0IFBsYWluRWxlbWVudFN5bWJvbCA9ICRQbGFpbkVsZW1lbnRTeW1ib2w7XG5leHBvcnQgY29uc3QgUmVwbGFjZVBhcnRTeW1ib2wgPSAkUmVwbGFjZVBhcnRTeW1ib2w7XG5leHBvcnQgY29uc3QgVGVtcGxhdGVDb250cm9sbGVyU3ltYm9sID0gJFRlbXBsYXRlQ29udHJvbGxlclN5bWJvbDtcbmV4cG9ydCBjb25zdCBUZXh0U3ltYm9sID0gJFRleHRTeW1ib2w7XG5leHBvcnQgeyBCaW5kaW5nU3ltYm9sLCBDdXN0b21BdHRyaWJ1dGVTeW1ib2wsIFBsYWluQXR0cmlidXRlU3ltYm9sLCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2VtYW50aWMtbW9kZWwuanMubWFwIiwiLyogZXNsaW50LWRpc2FibGUgY29tcGF0L2NvbXBhdCAqL1xuaW1wb3J0IHsgQmluZGFibGVJbmZvLCB9IGZyb20gJ0BhdXJlbGlhL2ppdCc7XG5pbXBvcnQgeyBjYW1lbENhc2UsIH0gZnJvbSAnQGF1cmVsaWEva2VybmVsJztcbmltcG9ydCB7IEJpbmRpbmdNb2RlIH0gZnJvbSAnQGF1cmVsaWEvcnVudGltZSc7XG5pbXBvcnQgeyBCaW5kaW5nU3ltYm9sLCBDdXN0b21BdHRyaWJ1dGVTeW1ib2wsIEN1c3RvbUVsZW1lbnRTeW1ib2wsIExldEVsZW1lbnRTeW1ib2wsIFBsYWluQXR0cmlidXRlU3ltYm9sLCBQbGFpbkVsZW1lbnRTeW1ib2wsIFJlcGxhY2VQYXJ0U3ltYm9sLCBUZW1wbGF0ZUNvbnRyb2xsZXJTeW1ib2wsIFRleHRTeW1ib2wsIH0gZnJvbSAnLi9zZW1hbnRpYy1tb2RlbCc7XG5jb25zdCBpbnZhbGlkU3Vycm9nYXRlQXR0cmlidXRlID0gT2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKG51bGwpLCB7XG4gICAgJ2lkJzogdHJ1ZSxcbiAgICAncmVwbGFjZSc6IHRydWVcbn0pO1xuY29uc3QgYXR0cmlidXRlc1RvSWdub3JlID0gT2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKG51bGwpLCB7XG4gICAgJ2FzLWVsZW1lbnQnOiB0cnVlLFxuICAgICdyZXBsYWNlJzogdHJ1ZVxufSk7XG5mdW5jdGlvbiBoYXNJbmxpbmVCaW5kaW5ncyhyYXdWYWx1ZSkge1xuICAgIGNvbnN0IGxlbiA9IHJhd1ZhbHVlLmxlbmd0aDtcbiAgICBsZXQgY2ggPSAwO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAgY2ggPSByYXdWYWx1ZS5jaGFyQ29kZUF0KGkpO1xuICAgICAgICBpZiAoY2ggPT09IDkyIC8qIEJhY2tzbGFzaCAqLykge1xuICAgICAgICAgICAgKytpO1xuICAgICAgICAgICAgLy8gSWdub3JlIHdoYXRldmVyIGNvbWVzIG5leHQgYmVjYXVzZSBpdCdzIGVzY2FwZWRcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjaCA9PT0gNTggLyogQ29sb24gKi8pIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGNoID09PSAzNiAvKiBEb2xsYXIgKi8gJiYgcmF3VmFsdWUuY2hhckNvZGVBdChpICsgMSkgPT09IDEyMyAvKiBPcGVuQnJhY2UgKi8pIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBwcm9jZXNzSW50ZXJwb2xhdGlvblRleHQoc3ltYm9sKSB7XG4gICAgY29uc3Qgbm9kZSA9IHN5bWJvbC5waHlzaWNhbE5vZGU7XG4gICAgY29uc3QgcGFyZW50Tm9kZSA9IG5vZGUucGFyZW50Tm9kZTtcbiAgICB3aGlsZSAobm9kZS5uZXh0U2libGluZyAhPT0gbnVsbCAmJiBub2RlLm5leHRTaWJsaW5nLm5vZGVUeXBlID09PSAzIC8qIFRleHQgKi8pIHtcbiAgICAgICAgcGFyZW50Tm9kZS5yZW1vdmVDaGlsZChub2RlLm5leHRTaWJsaW5nKTtcbiAgICB9XG4gICAgbm9kZS50ZXh0Q29udGVudCA9ICcnO1xuICAgIHBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHN5bWJvbC5tYXJrZXIsIG5vZGUpO1xufVxuZnVuY3Rpb24gaXNUZW1wbGF0ZUNvbnRyb2xsZXJPZihwcm94eSwgbWFuaWZlc3QpIHtcbiAgICByZXR1cm4gcHJveHkgIT09IG1hbmlmZXN0O1xufVxuLyoqXG4gKiBBICh0ZW1wb3JhcnkpIHN0YW5kYWxvbmUgZnVuY3Rpb24gdGhhdCBwdXJlbHkgZG9lcyB0aGUgRE9NIHByb2Nlc3NpbmcgKGxpZnRpbmcpIHJlbGF0ZWQgdG8gdGVtcGxhdGUgY29udHJvbGxlcnMuXG4gKiBJdCdzIGEgZmlyc3QgcmVmYWN0b3Jpbmcgc3RlcCB0b3dhcmRzIHNlcGFyYXRpbmcgRE9NIHBhcnNpbmcvYmluZGluZyBmcm9tIG11dGF0aW9ucy5cbiAqL1xuZnVuY3Rpb24gcHJvY2Vzc1RlbXBsYXRlQ29udHJvbGxlcnMoZG9tLCBtYW5pZmVzdFByb3h5LCBtYW5pZmVzdCkge1xuICAgIGNvbnN0IG1hbmlmZXN0Tm9kZSA9IG1hbmlmZXN0LnBoeXNpY2FsTm9kZTtcbiAgICBsZXQgY3VycmVudCA9IG1hbmlmZXN0UHJveHk7XG4gICAgbGV0IGN1cnJlbnRUZW1wbGF0ZTtcbiAgICB3aGlsZSAoaXNUZW1wbGF0ZUNvbnRyb2xsZXJPZihjdXJyZW50LCBtYW5pZmVzdCkpIHtcbiAgICAgICAgaWYgKGN1cnJlbnQudGVtcGxhdGUgPT09IG1hbmlmZXN0KSB7XG4gICAgICAgICAgICAvLyB0aGUgRE9NIGxpbmthZ2UgaXMgc3RpbGwgaW4gaXRzIG9yaWdpbmFsIHN0YXRlIGhlcmUgc28gd2UgY2FuIHNhZmVseSBhc3N1bWUgdGhlIHBhcmVudE5vZGUgaXMgbm9uLW51bGxcbiAgICAgICAgICAgIG1hbmlmZXN0Tm9kZS5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChjdXJyZW50Lm1hcmtlciwgbWFuaWZlc3ROb2RlKTtcbiAgICAgICAgICAgIC8vIGlmIHRoZSBtYW5pZmVzdCBpcyBhIHRlbXBsYXRlIGVsZW1lbnQgKGUuZy4gPHRlbXBsYXRlIHJlcGVhdC5mb3I9XCIuLi5cIj4pIHRoZW4gd2UgY2FuIHNraXAgb25lIGxpZnQgb3BlcmF0aW9uXG4gICAgICAgICAgICAvLyBhbmQgc2ltcGx5IHVzZSB0aGUgdGVtcGxhdGUgZGlyZWN0bHksIHNhdmluZyBhIGJpdCBvZiB3b3JrXG4gICAgICAgICAgICBpZiAobWFuaWZlc3ROb2RlLm5vZGVOYW1lID09PSAnVEVNUExBVEUnKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudC5waHlzaWNhbE5vZGUgPSBtYW5pZmVzdE5vZGU7XG4gICAgICAgICAgICAgICAgLy8gdGhlIHRlbXBsYXRlIGNvdWxkIHNhZmVseSBzdGF5IHdpdGhvdXQgYWZmZWN0aW5nIGFueXRoaW5nIHZpc2libGUsIGJ1dCBsZXQncyBrZWVwIHRoZSBET00gdGlkeVxuICAgICAgICAgICAgICAgIG1hbmlmZXN0Tm9kZS5yZW1vdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIHRoZSBtYW5pZmVzdCBpcyBub3QgYSB0ZW1wbGF0ZSBlbGVtZW50IHNvIHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBvbmVcbiAgICAgICAgICAgICAgICBjdXJyZW50VGVtcGxhdGUgPSBjdXJyZW50LnBoeXNpY2FsTm9kZSA9IGRvbS5jcmVhdGVUZW1wbGF0ZSgpO1xuICAgICAgICAgICAgICAgIGN1cnJlbnRUZW1wbGF0ZS5jb250ZW50LmFwcGVuZENoaWxkKG1hbmlmZXN0Tm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjdXJyZW50VGVtcGxhdGUgPSBjdXJyZW50LnBoeXNpY2FsTm9kZSA9IGRvbS5jcmVhdGVUZW1wbGF0ZSgpO1xuICAgICAgICAgICAgY3VycmVudFRlbXBsYXRlLmNvbnRlbnQuYXBwZW5kQ2hpbGQoY3VycmVudC5tYXJrZXIpO1xuICAgICAgICB9XG4gICAgICAgIG1hbmlmZXN0Tm9kZS5yZW1vdmVBdHRyaWJ1dGUoY3VycmVudC5zeW50YXgucmF3TmFtZSk7XG4gICAgICAgIGN1cnJlbnQgPSBjdXJyZW50LnRlbXBsYXRlO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHByb2Nlc3NSZXBsYWNlUGFydChkb20sIHJlcGxhY2VQYXJ0LCBtYW5pZmVzdFByb3h5KSB7XG4gICAgbGV0IHByb3h5Tm9kZTtcbiAgICBsZXQgY3VycmVudFRlbXBsYXRlO1xuICAgIGlmICgobWFuaWZlc3RQcm94eS5mbGFncyAmIDUxMiAvKiBoYXNNYXJrZXIgKi8pID4gMCkge1xuICAgICAgICBwcm94eU5vZGUgPSBtYW5pZmVzdFByb3h5Lm1hcmtlcjtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHByb3h5Tm9kZSA9IG1hbmlmZXN0UHJveHkucGh5c2ljYWxOb2RlO1xuICAgIH1cbiAgICBpZiAocHJveHlOb2RlLm5vZGVOYW1lID09PSAnVEVNUExBVEUnKSB7XG4gICAgICAgIC8vIGlmIGl0J3MgYSB0ZW1wbGF0ZSBlbGVtZW50LCBubyBuZWVkIHRvIGRvIGFueXRoaW5nIHNwZWNpYWwsIGp1c3QgYXNzaWduIGl0IHRvIHRoZSByZXBsYWNlUGFydFxuICAgICAgICByZXBsYWNlUGFydC5waHlzaWNhbE5vZGUgPSBwcm94eU5vZGU7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBvdGhlcndpc2Ugd3JhcCB0aGUgcmVwbGFjZSBpbiBhIHRlbXBsYXRlXG4gICAgICAgIGN1cnJlbnRUZW1wbGF0ZSA9IHJlcGxhY2VQYXJ0LnBoeXNpY2FsTm9kZSA9IGRvbS5jcmVhdGVUZW1wbGF0ZSgpO1xuICAgICAgICBjdXJyZW50VGVtcGxhdGUuY29udGVudC5hcHBlbmRDaGlsZChwcm94eU5vZGUpO1xuICAgIH1cbn1cbi8qKlxuICogVGVtcGxhdGVCaW5kZXIuIFRvZG86IGRlc2NyaWJlIGdvYWwgb2YgdGhpcyBjbGFzc1xuICovXG5leHBvcnQgY2xhc3MgVGVtcGxhdGVCaW5kZXIge1xuICAgIGNvbnN0cnVjdG9yKGRvbSwgcmVzb3VyY2VzLCBhdHRyUGFyc2VyLCBleHByUGFyc2VyLCBhdHRyU3ludGF4VHJhbnNmb3JtZXIpIHtcbiAgICAgICAgdGhpcy5kb20gPSBkb207XG4gICAgICAgIHRoaXMucmVzb3VyY2VzID0gcmVzb3VyY2VzO1xuICAgICAgICB0aGlzLmF0dHJQYXJzZXIgPSBhdHRyUGFyc2VyO1xuICAgICAgICB0aGlzLmV4cHJQYXJzZXIgPSBleHByUGFyc2VyO1xuICAgICAgICB0aGlzLmF0dHJTeW50YXhUcmFuc2Zvcm1lciA9IGF0dHJTeW50YXhUcmFuc2Zvcm1lcjtcbiAgICB9XG4gICAgYmluZChub2RlKSB7XG4gICAgICAgIGNvbnN0IHN1cnJvZ2F0ZSA9IG5ldyBQbGFpbkVsZW1lbnRTeW1ib2wodGhpcy5kb20sIG5vZGUpO1xuICAgICAgICBjb25zdCByZXNvdXJjZXMgPSB0aGlzLnJlc291cmNlcztcbiAgICAgICAgY29uc3QgYXR0clN5bnRheFRyYW5zZm9ybWVyID0gdGhpcy5hdHRyU3ludGF4VHJhbnNmb3JtZXI7XG4gICAgICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSBub2RlLmF0dHJpYnV0ZXM7XG4gICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgd2hpbGUgKGkgPCBhdHRyaWJ1dGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgY29uc3QgYXR0ciA9IGF0dHJpYnV0ZXNbaV07XG4gICAgICAgICAgICBjb25zdCBhdHRyU3ludGF4ID0gdGhpcy5hdHRyUGFyc2VyLnBhcnNlKGF0dHIubmFtZSwgYXR0ci52YWx1ZSk7XG4gICAgICAgICAgICBpZiAoaW52YWxpZFN1cnJvZ2F0ZUF0dHJpYnV0ZVthdHRyU3ludGF4LnRhcmdldF0gPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgc3Vycm9nYXRlIGF0dHJpYnV0ZTogJHthdHRyU3ludGF4LnRhcmdldH1gKTtcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiB1c2UgcmVwb3J0ZXJcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGJpbmRpbmdDb21tYW5kID0gcmVzb3VyY2VzLmdldEJpbmRpbmdDb21tYW5kKGF0dHJTeW50YXgsIHRydWUpO1xuICAgICAgICAgICAgaWYgKGJpbmRpbmdDb21tYW5kID09PSBudWxsIHx8IChiaW5kaW5nQ29tbWFuZC5iaW5kaW5nVHlwZSAmIDQwOTYgLyogSWdub3JlQ3VzdG9tQXR0ciAqLykgPT09IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhdHRySW5mbyA9IHJlc291cmNlcy5nZXRBdHRyaWJ1dGVJbmZvKGF0dHJTeW50YXgpO1xuICAgICAgICAgICAgICAgIGlmIChhdHRySW5mbyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBtYXAgc3BlY2lhbCBodG1sIGF0dHJpYnV0ZXMgdG8gdGhlaXIgY29ycmVzcG9uZGluZyBwcm9wZXJ0aWVzXG4gICAgICAgICAgICAgICAgICAgIGF0dHJTeW50YXhUcmFuc2Zvcm1lci50cmFuc2Zvcm0obm9kZSwgYXR0clN5bnRheCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGl0J3Mgbm90IGEgY3VzdG9tIGF0dHJpYnV0ZSBidXQgbWlnaHQgYmUgYSByZWd1bGFyIGJvdW5kIGF0dHJpYnV0ZSBvciBpbnRlcnBvbGF0aW9uIChpdCBtaWdodCBhbHNvIGJlIG5vdGhpbmcpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYmluZFBsYWluQXR0cmlidXRlKFxuICAgICAgICAgICAgICAgICAgICAvKiBhdHRyU3ludGF4ICovIGF0dHJTeW50YXgsIFxuICAgICAgICAgICAgICAgICAgICAvKiBhdHRyICAgICAgICovIGF0dHIsIFxuICAgICAgICAgICAgICAgICAgICAvKiBzdXJyb2dhdGUgICovIHN1cnJvZ2F0ZSwgXG4gICAgICAgICAgICAgICAgICAgIC8qIG1hbmlmZXN0ICAgKi8gc3Vycm9nYXRlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoYXR0ckluZm8uaXNUZW1wbGF0ZUNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgaGF2ZSB0ZW1wbGF0ZSBjb250cm9sbGVyIG9uIHN1cnJvZ2F0ZSBlbGVtZW50LicpO1xuICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiB1c2UgcmVwb3J0ZXJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYmluZEN1c3RvbUF0dHJpYnV0ZShcbiAgICAgICAgICAgICAgICAgICAgLyogYXR0clN5bnRheCAqLyBhdHRyU3ludGF4LCBcbiAgICAgICAgICAgICAgICAgICAgLyogYXR0ckluZm8gICAqLyBhdHRySW5mbywgXG4gICAgICAgICAgICAgICAgICAgIC8qIGNvbW1hbmQgICAgKi8gYmluZGluZ0NvbW1hbmQsIFxuICAgICAgICAgICAgICAgICAgICAvKiBtYW5pZmVzdCAgICovIHN1cnJvZ2F0ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gbWFwIHNwZWNpYWwgaHRtbCBhdHRyaWJ1dGVzIHRvIHRoZWlyIGNvcnJlc3BvbmRpbmcgcHJvcGVydGllc1xuICAgICAgICAgICAgICAgIGF0dHJTeW50YXhUcmFuc2Zvcm1lci50cmFuc2Zvcm0obm9kZSwgYXR0clN5bnRheCk7XG4gICAgICAgICAgICAgICAgLy8gaXQncyBub3QgYSBjdXN0b20gYXR0cmlidXRlIGJ1dCBtaWdodCBiZSBhIHJlZ3VsYXIgYm91bmQgYXR0cmlidXRlIG9yIGludGVycG9sYXRpb24gKGl0IG1pZ2h0IGFsc28gYmUgbm90aGluZylcbiAgICAgICAgICAgICAgICB0aGlzLmJpbmRQbGFpbkF0dHJpYnV0ZShcbiAgICAgICAgICAgICAgICAvKiBhdHRyU3ludGF4ICovIGF0dHJTeW50YXgsIFxuICAgICAgICAgICAgICAgIC8qIGF0dHIgICAgICAgKi8gYXR0ciwgXG4gICAgICAgICAgICAgICAgLyogc3Vycm9nYXRlICAqLyBzdXJyb2dhdGUsIFxuICAgICAgICAgICAgICAgIC8qIG1hbmlmZXN0ICAgKi8gc3Vycm9nYXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICsraTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmJpbmRDaGlsZE5vZGVzKFxuICAgICAgICAvKiBub2RlICAgICAgICAgICAgICAgKi8gbm9kZSwgXG4gICAgICAgIC8qIHN1cnJvZ2F0ZSAgICAgICAgICAqLyBzdXJyb2dhdGUsIFxuICAgICAgICAvKiBtYW5pZmVzdCAgICAgICAgICAgKi8gc3Vycm9nYXRlLCBcbiAgICAgICAgLyogbWFuaWZlc3RSb290ICAgICAgICovIG51bGwsIFxuICAgICAgICAvKiBwYXJlbnRNYW5pZmVzdFJvb3QgKi8gbnVsbCwgXG4gICAgICAgIC8qIHBhcnROYW1lICAgICAgICAgICAqLyBudWxsKTtcbiAgICAgICAgcmV0dXJuIHN1cnJvZ2F0ZTtcbiAgICB9XG4gICAgYmluZE1hbmlmZXN0KHBhcmVudE1hbmlmZXN0LCBub2RlLCBzdXJyb2dhdGUsIG1hbmlmZXN0LCBtYW5pZmVzdFJvb3QsIHBhcmVudE1hbmlmZXN0Um9vdCwgcGFydE5hbWUpIHtcbiAgICAgICAgc3dpdGNoIChub2RlLm5vZGVOYW1lKSB7XG4gICAgICAgICAgICBjYXNlICdMRVQnOlxuICAgICAgICAgICAgICAgIC8vIGxldCBjYW5ub3QgaGF2ZSBjaGlsZHJlbiBhbmQgaGFzIHNvbWUgZGlmZmVyZW50IHByb2Nlc3NpbmcgcnVsZXMsIHNvIHJldHVybiBlYXJseVxuICAgICAgICAgICAgICAgIHRoaXMuYmluZExldEVsZW1lbnQoXG4gICAgICAgICAgICAgICAgLyogcGFyZW50TWFuaWZlc3QgKi8gcGFyZW50TWFuaWZlc3QsIFxuICAgICAgICAgICAgICAgIC8qIG5vZGUgICAgICAgICAgICovIG5vZGUpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGNhc2UgJ1NMT1QnOlxuICAgICAgICAgICAgICAgIHN1cnJvZ2F0ZS5oYXNTbG90cyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZ2V0IHRoZSBwYXJ0IG5hbWUgdG8gb3ZlcnJpZGUgdGhlIG5hbWUgb2YgdGhlIGNvbXBpbGVkIGRlZmluaXRpb25cbiAgICAgICAgcGFydE5hbWUgPSBub2RlLmdldEF0dHJpYnV0ZSgncmVwbGFjZWFibGUnKTtcbiAgICAgICAgaWYgKHBhcnROYW1lID09PSAnJykge1xuICAgICAgICAgICAgcGFydE5hbWUgPSAnZGVmYXVsdCc7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG5hbWUgPSBub2RlLmdldEF0dHJpYnV0ZSgnYXMtZWxlbWVudCcpO1xuICAgICAgICBpZiAobmFtZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgbmFtZSA9IG5vZGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBlbGVtZW50SW5mbyA9IHRoaXMucmVzb3VyY2VzLmdldEVsZW1lbnRJbmZvKG5hbWUpO1xuICAgICAgICBpZiAoZWxlbWVudEluZm8gPT09IG51bGwpIHtcbiAgICAgICAgICAgIC8vIHRoZXJlIGlzIG5vIHJlZ2lzdGVyZWQgY3VzdG9tIGVsZW1lbnQgd2l0aCB0aGlzIG5hbWVcbiAgICAgICAgICAgIG1hbmlmZXN0ID0gbmV3IFBsYWluRWxlbWVudFN5bWJvbCh0aGlzLmRvbSwgbm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBpdCdzIGEgY3VzdG9tIGVsZW1lbnQgc28gd2Ugc2V0IHRoZSBtYW5pZmVzdFJvb3QgYXMgd2VsbCAoZm9yIHN0b3JpbmcgcmVwbGFjZXMpXG4gICAgICAgICAgICBwYXJlbnRNYW5pZmVzdFJvb3QgPSBtYW5pZmVzdFJvb3Q7XG4gICAgICAgICAgICBtYW5pZmVzdFJvb3QgPSBtYW5pZmVzdCA9IG5ldyBDdXN0b21FbGVtZW50U3ltYm9sKHRoaXMuZG9tLCBub2RlLCBlbGVtZW50SW5mbyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gbGlmdGluZyBvcGVyYXRpb25zIGRvbmUgYnkgdGVtcGxhdGUgY29udHJvbGxlcnMgYW5kIHJlcGxhY2VzIGVmZmVjdGl2ZWx5IHVubGluayB0aGUgbm9kZXMsIHNvIHN0YXJ0IGF0IHRoZSBib3R0b21cbiAgICAgICAgdGhpcy5iaW5kQ2hpbGROb2RlcyhcbiAgICAgICAgLyogbm9kZSAgICAgICAgICAgICAgICovIG5vZGUsIFxuICAgICAgICAvKiBzdXJyb2dhdGUgICAgICAgICAgKi8gc3Vycm9nYXRlLCBcbiAgICAgICAgLyogbWFuaWZlc3QgICAgICAgICAgICovIG1hbmlmZXN0LCBcbiAgICAgICAgLyogbWFuaWZlc3RSb290ICAgICAgICovIG1hbmlmZXN0Um9vdCwgXG4gICAgICAgIC8qIHBhcmVudE1hbmlmZXN0Um9vdCAqLyBwYXJlbnRNYW5pZmVzdFJvb3QsIFxuICAgICAgICAvKiBwYXJ0TmFtZSAgICAgICAgICAgKi8gcGFydE5hbWUpO1xuICAgICAgICAvLyB0aGUgcGFyZW50TWFuaWZlc3Qgd2lsbCByZWNlaXZlIGVpdGhlciB0aGUgZGlyZWN0IGNoaWxkIG5vZGVzLCBvciB0aGUgdGVtcGxhdGUgY29udHJvbGxlcnMgLyByZXBsYWNlc1xuICAgICAgICAvLyB3cmFwcGluZyB0aGVtXG4gICAgICAgIHRoaXMuYmluZEF0dHJpYnV0ZXMoXG4gICAgICAgIC8qIG5vZGUgICAgICAgICAgICAgICAqLyBub2RlLCBcbiAgICAgICAgLyogcGFyZW50TWFuaWZlc3QgICAgICovIHBhcmVudE1hbmlmZXN0LCBcbiAgICAgICAgLyogc3Vycm9nYXRlICAgICAgICAgICovIHN1cnJvZ2F0ZSwgXG4gICAgICAgIC8qIG1hbmlmZXN0ICAgICAgICAgICAqLyBtYW5pZmVzdCwgXG4gICAgICAgIC8qIG1hbmlmZXN0Um9vdCAgICAgICAqLyBtYW5pZmVzdFJvb3QsIFxuICAgICAgICAvKiBwYXJlbnRNYW5pZmVzdFJvb3QgKi8gcGFyZW50TWFuaWZlc3RSb290LCBcbiAgICAgICAgLyogcGFydE5hbWUgICAgICAgICAgICovIHBhcnROYW1lKTtcbiAgICAgICAgaWYgKG1hbmlmZXN0Um9vdCA9PT0gbWFuaWZlc3QgJiYgbWFuaWZlc3QuaXNDb250YWluZXJsZXNzKSB7XG4gICAgICAgICAgICBub2RlLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKG1hbmlmZXN0Lm1hcmtlciwgbm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobWFuaWZlc3QuaXNUYXJnZXQpIHtcbiAgICAgICAgICAgIG5vZGUuY2xhc3NMaXN0LmFkZCgnYXUnKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBiaW5kTGV0RWxlbWVudChwYXJlbnRNYW5pZmVzdCwgbm9kZSkge1xuICAgICAgICBjb25zdCBzeW1ib2wgPSBuZXcgTGV0RWxlbWVudFN5bWJvbCh0aGlzLmRvbSwgbm9kZSk7XG4gICAgICAgIHBhcmVudE1hbmlmZXN0LmNoaWxkTm9kZXMucHVzaChzeW1ib2wpO1xuICAgICAgICBjb25zdCBhdHRyaWJ1dGVzID0gbm9kZS5hdHRyaWJ1dGVzO1xuICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgIHdoaWxlIChpIDwgYXR0cmlidXRlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnN0IGF0dHIgPSBhdHRyaWJ1dGVzW2ldO1xuICAgICAgICAgICAgaWYgKGF0dHIubmFtZSA9PT0gJ3RvLWJpbmRpbmctY29udGV4dCcpIHtcbiAgICAgICAgICAgICAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZSgndG8tYmluZGluZy1jb250ZXh0Jyk7XG4gICAgICAgICAgICAgICAgc3ltYm9sLnRvQmluZGluZ0NvbnRleHQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgYXR0clN5bnRheCA9IHRoaXMuYXR0clBhcnNlci5wYXJzZShhdHRyLm5hbWUsIGF0dHIudmFsdWUpO1xuICAgICAgICAgICAgY29uc3QgY29tbWFuZCA9IHRoaXMucmVzb3VyY2VzLmdldEJpbmRpbmdDb21tYW5kKGF0dHJTeW50YXgsIGZhbHNlKTtcbiAgICAgICAgICAgIGNvbnN0IGJpbmRpbmdUeXBlID0gY29tbWFuZCA9PT0gbnVsbCA/IDIwNDggLyogSW50ZXJwb2xhdGlvbiAqLyA6IGNvbW1hbmQuYmluZGluZ1R5cGU7XG4gICAgICAgICAgICBjb25zdCBleHByID0gdGhpcy5leHByUGFyc2VyLnBhcnNlKGF0dHJTeW50YXgucmF3VmFsdWUsIGJpbmRpbmdUeXBlKTtcbiAgICAgICAgICAgIGNvbnN0IHRvID0gY2FtZWxDYXNlKGF0dHJTeW50YXgudGFyZ2V0KTtcbiAgICAgICAgICAgIGNvbnN0IGluZm8gPSBuZXcgQmluZGFibGVJbmZvKHRvLCBCaW5kaW5nTW9kZS50b1ZpZXcpO1xuICAgICAgICAgICAgc3ltYm9sLmJpbmRpbmdzLnB1c2gobmV3IEJpbmRpbmdTeW1ib2woY29tbWFuZCwgaW5mbywgZXhwciwgYXR0clN5bnRheC5yYXdWYWx1ZSwgdG8pKTtcbiAgICAgICAgICAgICsraTtcbiAgICAgICAgfVxuICAgICAgICBub2RlLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKHN5bWJvbC5tYXJrZXIsIG5vZGUpO1xuICAgIH1cbiAgICBiaW5kQXR0cmlidXRlcyhub2RlLCBwYXJlbnRNYW5pZmVzdCwgc3Vycm9nYXRlLCBtYW5pZmVzdCwgbWFuaWZlc3RSb290LCBwYXJlbnRNYW5pZmVzdFJvb3QsIHBhcnROYW1lKSB7XG4gICAgICAgIC8vIFRoaXMgaXMgdGhlIHRvcC1sZXZlbCBzeW1ib2wgZm9yIHRoZSBjdXJyZW50IGRlcHRoLlxuICAgICAgICAvLyBJZiB0aGVyZSBhcmUgbm8gdGVtcGxhdGUgY29udHJvbGxlcnMgb3IgcmVwbGFjZXMsIGl0IGlzIGFsd2F5cyB0aGUgbWFuaWZlc3QgaXRzZWxmLlxuICAgICAgICAvLyBJZiB0aGVyZSBhcmUgdGVtcGxhdGUgY29udHJvbGxlcnMsIHRoZW4gdGhpcyB3aWxsIGJlIHRoZSBvdXRlci1tb3N0IFRlbXBsYXRlQ29udHJvbGxlclN5bWJvbC5cbiAgICAgICAgbGV0IG1hbmlmZXN0UHJveHkgPSBtYW5pZmVzdDtcbiAgICAgICAgbGV0IHByZXZpb3VzQ29udHJvbGxlciA9ICh2b2lkIDApO1xuICAgICAgICBsZXQgY3VycmVudENvbnRyb2xsZXIgPSAodm9pZCAwKTtcbiAgICAgICAgY29uc3QgYXR0cmlidXRlcyA9IG5vZGUuYXR0cmlidXRlcztcbiAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICB3aGlsZSAoaSA8IGF0dHJpYnV0ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBjb25zdCBhdHRyID0gYXR0cmlidXRlc1tpXTtcbiAgICAgICAgICAgICsraTtcbiAgICAgICAgICAgIGlmIChhdHRyaWJ1dGVzVG9JZ25vcmVbYXR0ci5uYW1lXSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgYXR0clN5bnRheCA9IHRoaXMuYXR0clBhcnNlci5wYXJzZShhdHRyLm5hbWUsIGF0dHIudmFsdWUpO1xuICAgICAgICAgICAgY29uc3QgYmluZGluZ0NvbW1hbmQgPSB0aGlzLnJlc291cmNlcy5nZXRCaW5kaW5nQ29tbWFuZChhdHRyU3ludGF4LCB0cnVlKTtcbiAgICAgICAgICAgIGlmIChiaW5kaW5nQ29tbWFuZCA9PT0gbnVsbCB8fCAoYmluZGluZ0NvbW1hbmQuYmluZGluZ1R5cGUgJiA0MDk2IC8qIElnbm9yZUN1c3RvbUF0dHIgKi8pID09PSAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYXR0ckluZm8gPSB0aGlzLnJlc291cmNlcy5nZXRBdHRyaWJ1dGVJbmZvKGF0dHJTeW50YXgpO1xuICAgICAgICAgICAgICAgIGlmIChhdHRySW5mbyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBtYXAgc3BlY2lhbCBodG1sIGF0dHJpYnV0ZXMgdG8gdGhlaXIgY29ycmVzcG9uZGluZyBwcm9wZXJ0aWVzXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXR0clN5bnRheFRyYW5zZm9ybWVyLnRyYW5zZm9ybShub2RlLCBhdHRyU3ludGF4KTtcbiAgICAgICAgICAgICAgICAgICAgLy8gaXQncyBub3QgYSBjdXN0b20gYXR0cmlidXRlIGJ1dCBtaWdodCBiZSBhIHJlZ3VsYXIgYm91bmQgYXR0cmlidXRlIG9yIGludGVycG9sYXRpb24gKGl0IG1pZ2h0IGFsc28gYmUgbm90aGluZylcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5iaW5kUGxhaW5BdHRyaWJ1dGUoXG4gICAgICAgICAgICAgICAgICAgIC8qIGF0dHJTeW50YXggKi8gYXR0clN5bnRheCwgXG4gICAgICAgICAgICAgICAgICAgIC8qIGF0dHIgICAgICAgKi8gYXR0ciwgXG4gICAgICAgICAgICAgICAgICAgIC8qIHN1cnJvZ2F0ZSAgKi8gc3Vycm9nYXRlLCBcbiAgICAgICAgICAgICAgICAgICAgLyogbWFuaWZlc3QgICAqLyBtYW5pZmVzdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGF0dHJJbmZvLmlzVGVtcGxhdGVDb250cm9sbGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSBtYW5pZmVzdCBpcyB3cmFwcGVkIGJ5IHRoZSBpbm5lci1tb3N0IHRlbXBsYXRlIGNvbnRyb2xsZXIgKGlmIHRoZXJlIGFyZSBtdWx0aXBsZSBvbiB0aGUgc2FtZSBlbGVtZW50KVxuICAgICAgICAgICAgICAgICAgICAvLyBzbyBrZWVwIHNldHRpbmcgbWFuaWZlc3QudGVtcGxhdGVDb250cm9sbGVyIHRvIHRoZSBsYXRlc3QgdGVtcGxhdGUgY29udHJvbGxlciB3ZSBmaW5kXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRDb250cm9sbGVyID0gbWFuaWZlc3QudGVtcGxhdGVDb250cm9sbGVyID0gdGhpcy5kZWNsYXJlVGVtcGxhdGVDb250cm9sbGVyKFxuICAgICAgICAgICAgICAgICAgICAvKiBhdHRyU3ludGF4ICovIGF0dHJTeW50YXgsIFxuICAgICAgICAgICAgICAgICAgICAvKiBhdHRySW5mbyAgICovIGF0dHJJbmZvLCBcbiAgICAgICAgICAgICAgICAgICAgLyogcGFydE5hbWUgICAqLyBwYXJ0TmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSBwcm94eSBhbmQgdGhlIG1hbmlmZXN0IGFyZSBvbmx5IGlkZW50aWNhbCB3aGVuIHdlJ3JlIGF0IHRoZSBmaXJzdCB0ZW1wbGF0ZSBjb250cm9sbGVyIChzaW5jZSB0aGUgY29udHJvbGxlclxuICAgICAgICAgICAgICAgICAgICAvLyBpcyBhc3NpZ25lZCB0byB0aGUgcHJveHkpLCBzbyB0aGlzIGV2YWx1YXRlcyB0byB0cnVlIGF0IG1vc3Qgb25jZSBwZXIgbm9kZVxuICAgICAgICAgICAgICAgICAgICBpZiAobWFuaWZlc3RQcm94eSA9PT0gbWFuaWZlc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRDb250cm9sbGVyLnRlbXBsYXRlID0gbWFuaWZlc3Q7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYW5pZmVzdFByb3h5ID0gY3VycmVudENvbnRyb2xsZXI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Q29udHJvbGxlci50ZW1wbGF0ZUNvbnRyb2xsZXIgPSBwcmV2aW91c0NvbnRyb2xsZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Q29udHJvbGxlci50ZW1wbGF0ZSA9IHByZXZpb3VzQ29udHJvbGxlci50ZW1wbGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzQ29udHJvbGxlci50ZW1wbGF0ZSA9IGN1cnJlbnRDb250cm9sbGVyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHByZXZpb3VzQ29udHJvbGxlciA9IGN1cnJlbnRDb250cm9sbGVyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gYSByZWd1bGFyIGN1c3RvbSBhdHRyaWJ1dGVcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5iaW5kQ3VzdG9tQXR0cmlidXRlKFxuICAgICAgICAgICAgICAgICAgICAvKiBhdHRyU3ludGF4ICovIGF0dHJTeW50YXgsIFxuICAgICAgICAgICAgICAgICAgICAvKiBhdHRySW5mbyAgICovIGF0dHJJbmZvLCBcbiAgICAgICAgICAgICAgICAgICAgLyogY29tbWFuZCAgICAqLyBiaW5kaW5nQ29tbWFuZCwgXG4gICAgICAgICAgICAgICAgICAgIC8qIG1hbmlmZXN0ICAgKi8gbWFuaWZlc3QpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIG1hcCBzcGVjaWFsIGh0bWwgYXR0cmlidXRlcyB0byB0aGVpciBjb3JyZXNwb25kaW5nIHByb3BlcnRpZXNcbiAgICAgICAgICAgICAgICB0aGlzLmF0dHJTeW50YXhUcmFuc2Zvcm1lci50cmFuc2Zvcm0obm9kZSwgYXR0clN5bnRheCk7XG4gICAgICAgICAgICAgICAgLy8gaXQncyBub3QgYSBjdXN0b20gYXR0cmlidXRlIGJ1dCBtaWdodCBiZSBhIHJlZ3VsYXIgYm91bmQgYXR0cmlidXRlIG9yIGludGVycG9sYXRpb24gKGl0IG1pZ2h0IGFsc28gYmUgbm90aGluZylcbiAgICAgICAgICAgICAgICB0aGlzLmJpbmRQbGFpbkF0dHJpYnV0ZShcbiAgICAgICAgICAgICAgICAvKiBhdHRyU3ludGF4ICovIGF0dHJTeW50YXgsIFxuICAgICAgICAgICAgICAgIC8qIGF0dHIgICAgICAgKi8gYXR0ciwgXG4gICAgICAgICAgICAgICAgLyogc3Vycm9nYXRlICAqLyBzdXJyb2dhdGUsIFxuICAgICAgICAgICAgICAgIC8qIG1hbmlmZXN0ICAgKi8gbWFuaWZlc3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChub2RlLnRhZ05hbWUgPT09ICdJTlBVVCcpIHtcbiAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBub2RlLnR5cGU7XG4gICAgICAgICAgICBpZiAodHlwZSA9PT0gJ2NoZWNrYm94JyB8fCB0eXBlID09PSAncmFkaW8nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbnN1cmVBdHRyaWJ1dGVPcmRlcihtYW5pZmVzdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcHJvY2Vzc1RlbXBsYXRlQ29udHJvbGxlcnModGhpcy5kb20sIG1hbmlmZXN0UHJveHksIG1hbmlmZXN0KTtcbiAgICAgICAgbGV0IHJlcGxhY2UgPSBub2RlLmdldEF0dHJpYnV0ZSgncmVwbGFjZScpO1xuICAgICAgICBpZiAocmVwbGFjZSA9PT0gJycgfHwgKHJlcGxhY2UgPT09IG51bGwgJiYgbWFuaWZlc3RSb290ICE9PSBudWxsICYmIG1hbmlmZXN0Um9vdC5pc0NvbnRhaW5lcmxlc3MgJiYgKChwYXJlbnRNYW5pZmVzdC5mbGFncyAmIDE2IC8qIGlzQ3VzdG9tRWxlbWVudCAqLykgPiAwKSkpIHtcbiAgICAgICAgICAgIHJlcGxhY2UgPSAnZGVmYXVsdCc7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFydE93bmVyID0gbWFuaWZlc3QgPT09IG1hbmlmZXN0Um9vdCA/IHBhcmVudE1hbmlmZXN0Um9vdCA6IG1hbmlmZXN0Um9vdDtcbiAgICAgICAgaWYgKHJlcGxhY2UgPT09IG51bGwgfHwgcGFydE93bmVyID09PSBudWxsKSB7XG4gICAgICAgICAgICAvLyB0aGUgcHJveHkgaXMgZWl0aGVyIHRoZSBtYW5pZmVzdCBpdHNlbGYgb3IgdGhlIG91dGVyLW1vc3QgY29udHJvbGxlcjsgYWRkIGl0IGRpcmVjdGx5IHRvIHRoZSBwYXJlbnRcbiAgICAgICAgICAgIHBhcmVudE1hbmlmZXN0LmNoaWxkTm9kZXMucHVzaChtYW5pZmVzdFByb3h5KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIHRoZXJlIGlzIGEgcmVwbGFjZSBhdHRyaWJ1dGUgb24gdGhpcyBub2RlLCBzbyBhZGQgaXQgdG8gdGhlIHBhcnRzIGNvbGxlY3Rpb24gb2YgdGhlIG1hbmlmZXN0Um9vdFxuICAgICAgICAgICAgLy8gaW5zdGVhZCBvZiB0byB0aGUgY2hpbGROb2Rlc1xuICAgICAgICAgICAgY29uc3QgcmVwbGFjZVBhcnQgPSBuZXcgUmVwbGFjZVBhcnRTeW1ib2wocmVwbGFjZSk7XG4gICAgICAgICAgICByZXBsYWNlUGFydC5wYXJlbnQgPSBwYXJlbnRNYW5pZmVzdDtcbiAgICAgICAgICAgIHJlcGxhY2VQYXJ0LnRlbXBsYXRlID0gbWFuaWZlc3RQcm94eTtcbiAgICAgICAgICAgIHBhcnRPd25lci5wYXJ0cy5wdXNoKHJlcGxhY2VQYXJ0KTtcbiAgICAgICAgICAgIGlmIChwYXJlbnRNYW5pZmVzdC50ZW1wbGF0ZUNvbnRyb2xsZXIgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHBhcmVudE1hbmlmZXN0LnRlbXBsYXRlQ29udHJvbGxlci5wYXJ0cy5wdXNoKHJlcGxhY2VQYXJ0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHByb2Nlc3NSZXBsYWNlUGFydCh0aGlzLmRvbSwgcmVwbGFjZVBhcnQsIG1hbmlmZXN0UHJveHkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIFRPRE86IHJlZmFjdG9yIHRvIHVzZSByZW5kZXIgcHJpb3JpdHkgc2xvdHMgKHRoaXMgbG9naWMgc2hvdWxkbid0IGJlIGluIHRoZSB0ZW1wbGF0ZSBiaW5kZXIpXG4gICAgZW5zdXJlQXR0cmlidXRlT3JkZXIobWFuaWZlc3QpIHtcbiAgICAgICAgLy8gc3dhcCB0aGUgb3JkZXIgb2YgY2hlY2tlZCBhbmQgbW9kZWwvdmFsdWUgYXR0cmlidXRlLCBzbyB0aGF0IHRoZSByZXF1aXJlZCBvYnNlcnZlcnMgYXJlIHByZXBhcmVkIGZvciBjaGVja2VkLW9ic2VydmVyXG4gICAgICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSBtYW5pZmVzdC5wbGFpbkF0dHJpYnV0ZXM7XG4gICAgICAgIGxldCBtb2RlbE9yVmFsdWVJbmRleCA9IHZvaWQgMDtcbiAgICAgICAgbGV0IGNoZWNrZWRJbmRleCA9IHZvaWQgMDtcbiAgICAgICAgbGV0IGZvdW5kID0gMDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhdHRyaWJ1dGVzLmxlbmd0aCAmJiBmb3VuZCA8IDM7IGkrKykge1xuICAgICAgICAgICAgc3dpdGNoIChhdHRyaWJ1dGVzW2ldLnN5bnRheC50YXJnZXQpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdtb2RlbCc6XG4gICAgICAgICAgICAgICAgY2FzZSAndmFsdWUnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ21hdGNoZXInOlxuICAgICAgICAgICAgICAgICAgICBtb2RlbE9yVmFsdWVJbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgICAgIGZvdW5kKys7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2NoZWNrZWQnOlxuICAgICAgICAgICAgICAgICAgICBjaGVja2VkSW5kZXggPSBpO1xuICAgICAgICAgICAgICAgICAgICBmb3VuZCsrO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoY2hlY2tlZEluZGV4ICE9PSB2b2lkIDAgJiYgbW9kZWxPclZhbHVlSW5kZXggIT09IHZvaWQgMCAmJiBjaGVja2VkSW5kZXggPCBtb2RlbE9yVmFsdWVJbmRleCkge1xuICAgICAgICAgICAgW2F0dHJpYnV0ZXNbbW9kZWxPclZhbHVlSW5kZXhdLCBhdHRyaWJ1dGVzW2NoZWNrZWRJbmRleF1dID0gW2F0dHJpYnV0ZXNbY2hlY2tlZEluZGV4XSwgYXR0cmlidXRlc1ttb2RlbE9yVmFsdWVJbmRleF1dO1xuICAgICAgICB9XG4gICAgfVxuICAgIGJpbmRDaGlsZE5vZGVzKG5vZGUsIHN1cnJvZ2F0ZSwgbWFuaWZlc3QsIG1hbmlmZXN0Um9vdCwgcGFyZW50TWFuaWZlc3RSb290LCBwYXJ0TmFtZSkge1xuICAgICAgICBsZXQgY2hpbGROb2RlO1xuICAgICAgICBpZiAobm9kZS5ub2RlTmFtZSA9PT0gJ1RFTVBMQVRFJykge1xuICAgICAgICAgICAgY2hpbGROb2RlID0gbm9kZS5jb250ZW50LmZpcnN0Q2hpbGQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjaGlsZE5vZGUgPSBub2RlLmZpcnN0Q2hpbGQ7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG5leHRDaGlsZDtcbiAgICAgICAgd2hpbGUgKGNoaWxkTm9kZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgc3dpdGNoIChjaGlsZE5vZGUubm9kZVR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDEgLyogRWxlbWVudCAqLzpcbiAgICAgICAgICAgICAgICAgICAgbmV4dENoaWxkID0gY2hpbGROb2RlLm5leHRTaWJsaW5nO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmJpbmRNYW5pZmVzdChcbiAgICAgICAgICAgICAgICAgICAgLyogcGFyZW50TWFuaWZlc3QgICAgICovIG1hbmlmZXN0LCBcbiAgICAgICAgICAgICAgICAgICAgLyogbm9kZSAgICAgICAgICAgICAgICovIGNoaWxkTm9kZSwgXG4gICAgICAgICAgICAgICAgICAgIC8qIHN1cnJvZ2F0ZSAgICAgICAgICAqLyBzdXJyb2dhdGUsIFxuICAgICAgICAgICAgICAgICAgICAvKiBtYW5pZmVzdCAgICAgICAgICAgKi8gbWFuaWZlc3QsIFxuICAgICAgICAgICAgICAgICAgICAvKiBtYW5pZmVzdFJvb3QgICAgICAgKi8gbWFuaWZlc3RSb290LCBcbiAgICAgICAgICAgICAgICAgICAgLyogcGFyZW50TWFuaWZlc3RSb290ICovIHBhcmVudE1hbmlmZXN0Um9vdCwgXG4gICAgICAgICAgICAgICAgICAgIC8qIHBhcnROYW1lICAgICAgICAgICAqLyBwYXJ0TmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIGNoaWxkTm9kZSA9IG5leHRDaGlsZDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzIC8qIFRleHQgKi86XG4gICAgICAgICAgICAgICAgICAgIGNoaWxkTm9kZSA9IHRoaXMuYmluZFRleHQoXG4gICAgICAgICAgICAgICAgICAgIC8qIHRleHROb2RlICovIGNoaWxkTm9kZSwgXG4gICAgICAgICAgICAgICAgICAgIC8qIG1hbmlmZXN0ICovIG1hbmlmZXN0KS5uZXh0U2libGluZztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0IC8qIENEQVRBU2VjdGlvbiAqLzpcbiAgICAgICAgICAgICAgICBjYXNlIDcgLyogUHJvY2Vzc2luZ0luc3RydWN0aW9uICovOlxuICAgICAgICAgICAgICAgIGNhc2UgOCAvKiBDb21tZW50ICovOlxuICAgICAgICAgICAgICAgIGNhc2UgMTAgLyogRG9jdW1lbnRUeXBlICovOlxuICAgICAgICAgICAgICAgICAgICBjaGlsZE5vZGUgPSBjaGlsZE5vZGUubmV4dFNpYmxpbmc7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgOSAvKiBEb2N1bWVudCAqLzpcbiAgICAgICAgICAgICAgICBjYXNlIDExIC8qIERvY3VtZW50RnJhZ21lbnQgKi86XG4gICAgICAgICAgICAgICAgICAgIGNoaWxkTm9kZSA9IGNoaWxkTm9kZS5maXJzdENoaWxkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGJpbmRUZXh0KHRleHROb2RlLCBtYW5pZmVzdCkge1xuICAgICAgICBjb25zdCBpbnRlcnBvbGF0aW9uID0gdGhpcy5leHByUGFyc2VyLnBhcnNlKHRleHROb2RlLndob2xlVGV4dCwgMjA0OCAvKiBJbnRlcnBvbGF0aW9uICovKTtcbiAgICAgICAgaWYgKGludGVycG9sYXRpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGNvbnN0IHN5bWJvbCA9IG5ldyBUZXh0U3ltYm9sKHRoaXMuZG9tLCB0ZXh0Tm9kZSwgaW50ZXJwb2xhdGlvbik7XG4gICAgICAgICAgICBtYW5pZmVzdC5jaGlsZE5vZGVzLnB1c2goc3ltYm9sKTtcbiAgICAgICAgICAgIHByb2Nlc3NJbnRlcnBvbGF0aW9uVGV4dChzeW1ib2wpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBuZXh0ID0gdGV4dE5vZGU7XG4gICAgICAgIHdoaWxlIChuZXh0Lm5leHRTaWJsaW5nICE9PSBudWxsICYmIG5leHQubmV4dFNpYmxpbmcubm9kZVR5cGUgPT09IDMgLyogVGV4dCAqLykge1xuICAgICAgICAgICAgbmV4dCA9IG5leHQubmV4dFNpYmxpbmc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5leHQ7XG4gICAgfVxuICAgIGRlY2xhcmVUZW1wbGF0ZUNvbnRyb2xsZXIoYXR0clN5bnRheCwgYXR0ckluZm8sIHBhcnROYW1lKSB7XG4gICAgICAgIGxldCBzeW1ib2w7XG4gICAgICAgIGNvbnN0IGF0dHJSYXdWYWx1ZSA9IGF0dHJTeW50YXgucmF3VmFsdWU7XG4gICAgICAgIGNvbnN0IGNvbW1hbmQgPSB0aGlzLnJlc291cmNlcy5nZXRCaW5kaW5nQ29tbWFuZChhdHRyU3ludGF4LCBmYWxzZSk7XG4gICAgICAgIC8vIG11bHRpLWJpbmRpbmdzIGxvZ2ljIGhlcmUgaXMgc2ltaWxhciB0byAoYW5kIGV4cGxhaW5lZCBpbikgYmluZEN1c3RvbUF0dHJpYnV0ZVxuICAgICAgICBjb25zdCBpc011bHRpQmluZGluZ3MgPSBhdHRySW5mby5ub011bHRpQmluZGluZ3MgPT09IGZhbHNlICYmIGNvbW1hbmQgPT09IG51bGwgJiYgaGFzSW5saW5lQmluZGluZ3MoYXR0clJhd1ZhbHVlKTtcbiAgICAgICAgaWYgKGlzTXVsdGlCaW5kaW5ncykge1xuICAgICAgICAgICAgc3ltYm9sID0gbmV3IFRlbXBsYXRlQ29udHJvbGxlclN5bWJvbCh0aGlzLmRvbSwgYXR0clN5bnRheCwgYXR0ckluZm8sIHBhcnROYW1lKTtcbiAgICAgICAgICAgIHRoaXMuYmluZE11bHRpQXR0cmlidXRlKHN5bWJvbCwgYXR0ckluZm8sIGF0dHJSYXdWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzeW1ib2wgPSBuZXcgVGVtcGxhdGVDb250cm9sbGVyU3ltYm9sKHRoaXMuZG9tLCBhdHRyU3ludGF4LCBhdHRySW5mbywgcGFydE5hbWUpO1xuICAgICAgICAgICAgY29uc3QgYmluZGluZ1R5cGUgPSBjb21tYW5kID09PSBudWxsID8gMjA0OCAvKiBJbnRlcnBvbGF0aW9uICovIDogY29tbWFuZC5iaW5kaW5nVHlwZTtcbiAgICAgICAgICAgIGNvbnN0IGV4cHIgPSB0aGlzLmV4cHJQYXJzZXIucGFyc2UoYXR0clJhd1ZhbHVlLCBiaW5kaW5nVHlwZSk7XG4gICAgICAgICAgICBzeW1ib2wuYmluZGluZ3MucHVzaChuZXcgQmluZGluZ1N5bWJvbChjb21tYW5kLCBhdHRySW5mby5iaW5kYWJsZSwgZXhwciwgYXR0clJhd1ZhbHVlLCBhdHRyU3ludGF4LnRhcmdldCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzeW1ib2w7XG4gICAgfVxuICAgIGJpbmRDdXN0b21BdHRyaWJ1dGUoYXR0clN5bnRheCwgYXR0ckluZm8sIGNvbW1hbmQsIG1hbmlmZXN0KSB7XG4gICAgICAgIGxldCBzeW1ib2w7XG4gICAgICAgIGNvbnN0IGF0dHJSYXdWYWx1ZSA9IGF0dHJTeW50YXgucmF3VmFsdWU7XG4gICAgICAgIC8vIEN1c3RvbSBhdHRyaWJ1dGVzIGFyZSBhbHdheXMgaW4gbXVsdGlwbGUgYmluZGluZyBtb2RlLFxuICAgICAgICAvLyBleGNlcHQgd2hlbiB0aGV5IGNhbid0IGJlXG4gICAgICAgIC8vIFdoZW4gdGhleSBjYW5ub3QgYmU6XG4gICAgICAgIC8vICAgICAgICAqIGhhcyBleHBsaWNpdCBjb25maWd1cmF0aW9uIG5vTXVsdGlCaW5kaW5nczogZmFsc2VcbiAgICAgICAgLy8gICAgICAgICogaGFzIGJpbmRpbmcgY29tbWFuZCwgaWU6IDxkaXYgbXktYXR0ci5iaW5kPVwiLi4uXCI+LlxuICAgICAgICAvLyAgICAgICAgICBJbiB0aGlzIHNjZW5hcmlvLCB0aGUgdmFsdWUgb2YgdGhlIGN1c3RvbSBhdHRyaWJ1dGVzIGlzIHJlcXVpcmVkIHRvIGJlIGEgdmFsaWQgZXhwcmVzc2lvblxuICAgICAgICAvLyAgICAgICAgKiBoYXMgbm8gY29sb246IGllOiA8ZGl2IG15LWF0dHI9XCJhYmNkXCI+XG4gICAgICAgIC8vICAgICAgICAgIEluIHRoaXMgc2NlbmFyaW8sIGl0J3Mgc2ltcGx5IGludmFsaWQgc3ludGF4LiBDb25zaWRlciBzdHlsZSBhdHRyaWJ1dGUgcnVsZS12YWx1ZSBwYWlyOiA8ZGl2IHN0eWxlPVwicnVsZTogcnVsZVZhbHVlXCI+XG4gICAgICAgIGNvbnN0IGlzTXVsdGlCaW5kaW5ncyA9IGF0dHJJbmZvLm5vTXVsdGlCaW5kaW5ncyA9PT0gZmFsc2UgJiYgY29tbWFuZCA9PT0gbnVsbCAmJiBoYXNJbmxpbmVCaW5kaW5ncyhhdHRyUmF3VmFsdWUpO1xuICAgICAgICBpZiAoaXNNdWx0aUJpbmRpbmdzKSB7XG4gICAgICAgICAgICAvLyBhIG11bHRpcGxlLWJpbmRpbmdzIGF0dHJpYnV0ZSB1c2FnZSAoc2VtaWNvbG9uIHNlcGFyYXRlZCBiaW5kaW5nKSBpcyBvbmx5IHZhbGlkIHdpdGhvdXQgYSBiaW5kaW5nIGNvbW1hbmQ7XG4gICAgICAgICAgICAvLyB0aGUgYmluZGluZyBjb21tYW5kcyBtdXN0IGJlIGRlY2xhcmVkIGluIGVhY2ggb2YgdGhlIHByb3BlcnR5IGJpbmRpbmdzXG4gICAgICAgICAgICBzeW1ib2wgPSBuZXcgQ3VzdG9tQXR0cmlidXRlU3ltYm9sKGF0dHJTeW50YXgsIGF0dHJJbmZvKTtcbiAgICAgICAgICAgIHRoaXMuYmluZE11bHRpQXR0cmlidXRlKHN5bWJvbCwgYXR0ckluZm8sIGF0dHJSYXdWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzeW1ib2wgPSBuZXcgQ3VzdG9tQXR0cmlidXRlU3ltYm9sKGF0dHJTeW50YXgsIGF0dHJJbmZvKTtcbiAgICAgICAgICAgIGNvbnN0IGJpbmRpbmdUeXBlID0gY29tbWFuZCA9PT0gbnVsbCA/IDIwNDggLyogSW50ZXJwb2xhdGlvbiAqLyA6IGNvbW1hbmQuYmluZGluZ1R5cGU7XG4gICAgICAgICAgICBjb25zdCBleHByID0gdGhpcy5leHByUGFyc2VyLnBhcnNlKGF0dHJSYXdWYWx1ZSwgYmluZGluZ1R5cGUpO1xuICAgICAgICAgICAgc3ltYm9sLmJpbmRpbmdzLnB1c2gobmV3IEJpbmRpbmdTeW1ib2woY29tbWFuZCwgYXR0ckluZm8uYmluZGFibGUsIGV4cHIsIGF0dHJSYXdWYWx1ZSwgYXR0clN5bnRheC50YXJnZXQpKTtcbiAgICAgICAgfVxuICAgICAgICBtYW5pZmVzdC5jdXN0b21BdHRyaWJ1dGVzLnB1c2goc3ltYm9sKTtcbiAgICAgICAgbWFuaWZlc3QuaXNUYXJnZXQgPSB0cnVlO1xuICAgIH1cbiAgICBiaW5kTXVsdGlBdHRyaWJ1dGUoc3ltYm9sLCBhdHRySW5mbywgdmFsdWUpIHtcbiAgICAgICAgY29uc3QgYmluZGFibGVzID0gYXR0ckluZm8uYmluZGFibGVzO1xuICAgICAgICBjb25zdCB2YWx1ZUxlbmd0aCA9IHZhbHVlLmxlbmd0aDtcbiAgICAgICAgbGV0IGF0dHJOYW1lID0gdm9pZCAwO1xuICAgICAgICBsZXQgYXR0clZhbHVlID0gdm9pZCAwO1xuICAgICAgICBsZXQgc3RhcnQgPSAwO1xuICAgICAgICBsZXQgY2ggPSAwO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZhbHVlTGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGNoID0gdmFsdWUuY2hhckNvZGVBdChpKTtcbiAgICAgICAgICAgIGlmIChjaCA9PT0gOTIgLyogQmFja3NsYXNoICovKSB7XG4gICAgICAgICAgICAgICAgKytpO1xuICAgICAgICAgICAgICAgIC8vIElnbm9yZSB3aGF0ZXZlciBjb21lcyBuZXh0IGJlY2F1c2UgaXQncyBlc2NhcGVkXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaCA9PT0gNTggLyogQ29sb24gKi8pIHtcbiAgICAgICAgICAgICAgICBhdHRyTmFtZSA9IHZhbHVlLnNsaWNlKHN0YXJ0LCBpKTtcbiAgICAgICAgICAgICAgICAvLyBTa2lwIHdoaXRlc3BhY2UgYWZ0ZXIgY29sb25cbiAgICAgICAgICAgICAgICB3aGlsZSAodmFsdWUuY2hhckNvZGVBdCgrK2kpIDw9IDMyIC8qIFNwYWNlICovKVxuICAgICAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgc3RhcnQgPSBpO1xuICAgICAgICAgICAgICAgIGZvciAoOyBpIDwgdmFsdWVMZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICBjaCA9IHZhbHVlLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaCA9PT0gOTIgLyogQmFja3NsYXNoICovKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICArK2k7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZ25vcmUgd2hhdGV2ZXIgY29tZXMgbmV4dCBiZWNhdXNlIGl0J3MgZXNjYXBlZFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNoID09PSA1OSAvKiBTZW1pY29sb24gKi8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJWYWx1ZSA9IHZhbHVlLnNsaWNlKHN0YXJ0LCBpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChhdHRyVmFsdWUgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBObyBzZW1pY29sb24gZm91bmQsIHNvIGp1c3QgZ3JhYiB0aGUgcmVzdCBvZiB0aGUgdmFsdWVcbiAgICAgICAgICAgICAgICAgICAgYXR0clZhbHVlID0gdmFsdWUuc2xpY2Uoc3RhcnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBhdHRyU3ludGF4ID0gdGhpcy5hdHRyUGFyc2VyLnBhcnNlKGF0dHJOYW1lLCBhdHRyVmFsdWUpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGF0dHJUYXJnZXQgPSBjYW1lbENhc2UoYXR0clN5bnRheC50YXJnZXQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbW1hbmQgPSB0aGlzLnJlc291cmNlcy5nZXRCaW5kaW5nQ29tbWFuZChhdHRyU3ludGF4LCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgY29uc3QgYmluZGluZ1R5cGUgPSBjb21tYW5kID09PSBudWxsID8gMjA0OCAvKiBJbnRlcnBvbGF0aW9uICovIDogY29tbWFuZC5iaW5kaW5nVHlwZTtcbiAgICAgICAgICAgICAgICBjb25zdCBleHByID0gdGhpcy5leHByUGFyc2VyLnBhcnNlKGF0dHJWYWx1ZSwgYmluZGluZ1R5cGUpO1xuICAgICAgICAgICAgICAgIGxldCBiaW5kYWJsZSA9IGJpbmRhYmxlc1thdHRyVGFyZ2V0XTtcbiAgICAgICAgICAgICAgICBpZiAoYmluZGFibGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBldmVyeXRoaW5nIGluIGEgbXVsdGktYmluZGluZ3MgZXhwcmVzc2lvbiBtdXN0IGJlIHVzZWQsXG4gICAgICAgICAgICAgICAgICAgIC8vIHNvIGlmIGl0J3Mgbm90IGEgYmluZGFibGUgdGhlbiB3ZSBjcmVhdGUgb25lIG9uIHRoZSBzcG90XG4gICAgICAgICAgICAgICAgICAgIGJpbmRhYmxlID0gYmluZGFibGVzW2F0dHJUYXJnZXRdID0gbmV3IEJpbmRhYmxlSW5mbyhhdHRyVGFyZ2V0LCBCaW5kaW5nTW9kZS50b1ZpZXcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzeW1ib2wuYmluZGluZ3MucHVzaChuZXcgQmluZGluZ1N5bWJvbChjb21tYW5kLCBiaW5kYWJsZSwgZXhwciwgYXR0clZhbHVlLCBhdHRyVGFyZ2V0KSk7XG4gICAgICAgICAgICAgICAgLy8gU2tpcCB3aGl0ZXNwYWNlIGFmdGVyIHNlbWljb2xvblxuICAgICAgICAgICAgICAgIHdoaWxlIChpIDwgdmFsdWVMZW5ndGggJiYgdmFsdWUuY2hhckNvZGVBdCgrK2kpIDw9IDMyIC8qIFNwYWNlICovKVxuICAgICAgICAgICAgICAgICAgICA7XG4gICAgICAgICAgICAgICAgc3RhcnQgPSBpO1xuICAgICAgICAgICAgICAgIGF0dHJOYW1lID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIGF0dHJWYWx1ZSA9IHZvaWQgMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBiaW5kUGxhaW5BdHRyaWJ1dGUoYXR0clN5bnRheCwgYXR0ciwgc3Vycm9nYXRlLCBtYW5pZmVzdCkge1xuICAgICAgICBjb25zdCBjb21tYW5kID0gdGhpcy5yZXNvdXJjZXMuZ2V0QmluZGluZ0NvbW1hbmQoYXR0clN5bnRheCwgZmFsc2UpO1xuICAgICAgICBjb25zdCBiaW5kaW5nVHlwZSA9IGNvbW1hbmQgPT09IG51bGwgPyAyMDQ4IC8qIEludGVycG9sYXRpb24gKi8gOiBjb21tYW5kLmJpbmRpbmdUeXBlO1xuICAgICAgICBjb25zdCBhdHRyVGFyZ2V0ID0gYXR0clN5bnRheC50YXJnZXQ7XG4gICAgICAgIGNvbnN0IGF0dHJSYXdWYWx1ZSA9IGF0dHJTeW50YXgucmF3VmFsdWU7XG4gICAgICAgIGxldCBleHByO1xuICAgICAgICBpZiAoYXR0clJhd1ZhbHVlLmxlbmd0aCA9PT0gMFxuICAgICAgICAgICAgJiYgKGJpbmRpbmdUeXBlICYgNTMgLyogQmluZENvbW1hbmQgKi8gfCA0OSAvKiBPbmVUaW1lQ29tbWFuZCAqLyB8IDUwIC8qIFRvVmlld0NvbW1hbmQgKi8gfCA1MiAvKiBUd29XYXlDb21tYW5kICovKSA+IDApIHtcbiAgICAgICAgICAgIGlmICgoYmluZGluZ1R5cGUgJiA1MyAvKiBCaW5kQ29tbWFuZCAqLyB8IDQ5IC8qIE9uZVRpbWVDb21tYW5kICovIHwgNTAgLyogVG9WaWV3Q29tbWFuZCAqLyB8IDUyIC8qIFR3b1dheUNvbW1hbmQgKi8pID4gMCkge1xuICAgICAgICAgICAgICAgIC8vIERlZmF1bHQgdG8gdGhlIG5hbWUgb2YgdGhlIGF0dHIgZm9yIGVtcHR5IGJpbmRpbmcgY29tbWFuZHNcbiAgICAgICAgICAgICAgICBleHByID0gdGhpcy5leHByUGFyc2VyLnBhcnNlKGNhbWVsQ2FzZShhdHRyVGFyZ2V0KSwgYmluZGluZ1R5cGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZXhwciA9IHRoaXMuZXhwclBhcnNlci5wYXJzZShhdHRyUmF3VmFsdWUsIGJpbmRpbmdUeXBlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKG1hbmlmZXN0LmZsYWdzICYgMTYgLyogaXNDdXN0b21FbGVtZW50ICovKSA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGJpbmRhYmxlID0gbWFuaWZlc3QuYmluZGFibGVzW2F0dHJUYXJnZXRdO1xuICAgICAgICAgICAgaWYgKGJpbmRhYmxlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAvLyBpZiB0aGUgYXR0cmlidXRlIG5hbWUgbWF0Y2hlcyBhIGJpbmRhYmxlIHByb3BlcnR5IG5hbWUsIGFkZCBpdCByZWdhcmRsZXNzIG9mIHdoZXRoZXIgaXQncyBhIGNvbW1hbmQsIGludGVycG9sYXRpb24sIG9yIGp1c3QgYSBwbGFpbiBzdHJpbmc7XG4gICAgICAgICAgICAgICAgLy8gdGhlIHRlbXBsYXRlIGNvbXBpbGVyIHdpbGwgdHJhbnNsYXRlIGl0IHRvIHRoZSBjb3JyZWN0IGluc3RydWN0aW9uXG4gICAgICAgICAgICAgICAgbWFuaWZlc3QuYmluZGluZ3MucHVzaChuZXcgQmluZGluZ1N5bWJvbChjb21tYW5kLCBiaW5kYWJsZSwgZXhwciwgYXR0clJhd1ZhbHVlLCBhdHRyVGFyZ2V0KSk7XG4gICAgICAgICAgICAgICAgbWFuaWZlc3QuaXNUYXJnZXQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZXhwciAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgLy8gaWYgaXQgZG9lcyBub3QgbWFwIHRvIGEgYmluZGFibGUsIG9ubHkgYWRkIGl0IGlmIHdlIHdlcmUgYWJsZSB0byBwYXJzZSBhbiBleHByZXNzaW9uIChlaXRoZXIgYSBjb21tYW5kIG9yIGludGVycG9sYXRpb24pXG4gICAgICAgICAgICAgICAgbWFuaWZlc3QucGxhaW5BdHRyaWJ1dGVzLnB1c2gobmV3IFBsYWluQXR0cmlidXRlU3ltYm9sKGF0dHJTeW50YXgsIGNvbW1hbmQsIGV4cHIpKTtcbiAgICAgICAgICAgICAgICBtYW5pZmVzdC5pc1RhcmdldCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZXhwciAhPSBudWxsKSB7XG4gICAgICAgICAgICAvLyBlaXRoZXIgYSBiaW5kaW5nIGNvbW1hbmQsIGFuIGludGVycG9sYXRpb24sIG9yIGEgcmVmXG4gICAgICAgICAgICBtYW5pZmVzdC5wbGFpbkF0dHJpYnV0ZXMucHVzaChuZXcgUGxhaW5BdHRyaWJ1dGVTeW1ib2woYXR0clN5bnRheCwgY29tbWFuZCwgZXhwcikpO1xuICAgICAgICAgICAgbWFuaWZlc3QuaXNUYXJnZXQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG1hbmlmZXN0ID09PSBzdXJyb2dhdGUpIHtcbiAgICAgICAgICAgIC8vIGFueSBhdHRyaWJ1dGVzLCBldmVuIGlmIHRoZXkgYXJlIHBsYWluIChubyBjb21tYW5kL2ludGVycG9sYXRpb24gZXRjKSwgc2hvdWxkIGJlIGFkZGVkIGlmIHRoZXlcbiAgICAgICAgICAgIC8vIGFyZSBvbiB0aGUgc3Vycm9nYXRlIGVsZW1lbnRcbiAgICAgICAgICAgIG1hbmlmZXN0LnBsYWluQXR0cmlidXRlcy5wdXNoKG5ldyBQbGFpbkF0dHJpYnV0ZVN5bWJvbChhdHRyU3ludGF4LCBjb21tYW5kLCBleHByKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbW1hbmQgPT0gbnVsbCAmJiBleHByICE9IG51bGwpIHtcbiAgICAgICAgICAgIC8vIGlmIGl0J3MgYW4gaW50ZXJwb2xhdGlvbiwgY2xlYXIgdGhlIGF0dHJpYnV0ZSB2YWx1ZVxuICAgICAgICAgICAgYXR0ci52YWx1ZSA9ICcnO1xuICAgICAgICB9XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGVtcGxhdGUtYmluZGVyLmpzLm1hcCIsImltcG9ydCB7IF9fZGVjb3JhdGUsIF9fbWV0YWRhdGEsIF9fcGFyYW0gfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IElBdHRyaWJ1dGVQYXJzZXIsIFJlc291cmNlTW9kZWwsIH0gZnJvbSAnQGF1cmVsaWEvaml0JztcbmltcG9ydCB7IG1lcmdlRGlzdGluY3QsIFBMQVRGT1JNLCBSZWdpc3RyYXRpb24sIG1lcmdlQXJyYXlzLCB9IGZyb20gJ0BhdXJlbGlhL2tlcm5lbCc7XG5pbXBvcnQgeyBIeWRyYXRlQXR0cmlidXRlSW5zdHJ1Y3Rpb24sIEh5ZHJhdGVFbGVtZW50SW5zdHJ1Y3Rpb24sIEh5ZHJhdGVUZW1wbGF0ZUNvbnRyb2xsZXIsIElFeHByZXNzaW9uUGFyc2VyLCBJbnRlcnBvbGF0aW9uSW5zdHJ1Y3Rpb24sIElUZW1wbGF0ZUNvbXBpbGVyLCBMZXRCaW5kaW5nSW5zdHJ1Y3Rpb24sIExldEVsZW1lbnRJbnN0cnVjdGlvbiwgU2V0UHJvcGVydHlJbnN0cnVjdGlvbiwgQ3VzdG9tRWxlbWVudERlZmluaXRpb24sIElET00gfSBmcm9tICdAYXVyZWxpYS9ydW50aW1lJztcbmltcG9ydCB7IFNldEF0dHJpYnV0ZUluc3RydWN0aW9uLCBUZXh0QmluZGluZ0luc3RydWN0aW9uLCBTZXRDbGFzc0F0dHJpYnV0ZUluc3RydWN0aW9uLCBTZXRTdHlsZUF0dHJpYnV0ZUluc3RydWN0aW9uLCB9IGZyb20gJ0BhdXJlbGlhL3J1bnRpbWUtaHRtbCc7XG5pbXBvcnQgeyBJQXR0clN5bnRheFRyYW5zZm9ybWVyIH0gZnJvbSAnLi9hdHRyaWJ1dGUtc3ludGF4LXRyYW5zZm9ybWVyJztcbmltcG9ydCB7IFRlbXBsYXRlQmluZGVyIH0gZnJvbSAnLi90ZW1wbGF0ZS1iaW5kZXInO1xuaW1wb3J0IHsgSVRlbXBsYXRlRWxlbWVudEZhY3RvcnkgfSBmcm9tICcuL3RlbXBsYXRlLWVsZW1lbnQtZmFjdG9yeSc7XG5jbGFzcyBDdXN0b21FbGVtZW50Q29tcGlsYXRpb25Vbml0IHtcbiAgICBjb25zdHJ1Y3RvcihwYXJ0aWFsRGVmaW5pdGlvbiwgc3Vycm9nYXRlLCB0ZW1wbGF0ZSkge1xuICAgICAgICB0aGlzLnBhcnRpYWxEZWZpbml0aW9uID0gcGFydGlhbERlZmluaXRpb247XG4gICAgICAgIHRoaXMuc3Vycm9nYXRlID0gc3Vycm9nYXRlO1xuICAgICAgICB0aGlzLnRlbXBsYXRlID0gdGVtcGxhdGU7XG4gICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25zID0gW107XG4gICAgICAgIHRoaXMuc3Vycm9nYXRlcyA9IFtdO1xuICAgICAgICB0aGlzLnNjb3BlUGFydHMgPSBbXTtcbiAgICAgICAgdGhpcy5wYXJ0cyA9IHt9O1xuICAgIH1cbiAgICB0b0RlZmluaXRpb24oKSB7XG4gICAgICAgIGNvbnN0IGRlZiA9IHRoaXMucGFydGlhbERlZmluaXRpb247XG4gICAgICAgIHJldHVybiBDdXN0b21FbGVtZW50RGVmaW5pdGlvbi5jcmVhdGUoe1xuICAgICAgICAgICAgLi4uZGVmLFxuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiBtZXJnZUFycmF5cyhkZWYuaW5zdHJ1Y3Rpb25zLCB0aGlzLmluc3RydWN0aW9ucyksXG4gICAgICAgICAgICBzdXJyb2dhdGVzOiBtZXJnZUFycmF5cyhkZWYuc3Vycm9nYXRlcywgdGhpcy5zdXJyb2dhdGVzKSxcbiAgICAgICAgICAgIHNjb3BlUGFydHM6IG1lcmdlQXJyYXlzKGRlZi5zY29wZVBhcnRzLCB0aGlzLnNjb3BlUGFydHMpLFxuICAgICAgICAgICAgdGVtcGxhdGU6IHRoaXMudGVtcGxhdGUsXG4gICAgICAgICAgICBuZWVkc0NvbXBpbGU6IGZhbHNlLFxuICAgICAgICAgICAgaGFzU2xvdHM6IHRoaXMuc3Vycm9nYXRlLmhhc1Nsb3RzLFxuICAgICAgICB9KTtcbiAgICB9XG59XG4vKipcbiAqIERlZmF1bHQgKHJ1bnRpbWUtYWdub3N0aWMpIGltcGxlbWVudGF0aW9uIGZvciBgSVRlbXBsYXRlQ29tcGlsZXJgLlxuICpcbiAqIEBpbnRlcm5hbFxuICovXG5sZXQgVGVtcGxhdGVDb21waWxlciA9IGNsYXNzIFRlbXBsYXRlQ29tcGlsZXIge1xuICAgIGNvbnN0cnVjdG9yKGZhY3RvcnksIGF0dHJQYXJzZXIsIGV4cHJQYXJzZXIsIGF0dHJTeW50YXhNb2RpZmllcikge1xuICAgICAgICB0aGlzLmZhY3RvcnkgPSBmYWN0b3J5O1xuICAgICAgICB0aGlzLmF0dHJQYXJzZXIgPSBhdHRyUGFyc2VyO1xuICAgICAgICB0aGlzLmV4cHJQYXJzZXIgPSBleHByUGFyc2VyO1xuICAgICAgICB0aGlzLmF0dHJTeW50YXhNb2RpZmllciA9IGF0dHJTeW50YXhNb2RpZmllcjtcbiAgICB9XG4gICAgZ2V0IG5hbWUoKSB7XG4gICAgICAgIHJldHVybiAnZGVmYXVsdCc7XG4gICAgfVxuICAgIHN0YXRpYyByZWdpc3Rlcihjb250YWluZXIpIHtcbiAgICAgICAgcmV0dXJuIFJlZ2lzdHJhdGlvbi5zaW5nbGV0b24oSVRlbXBsYXRlQ29tcGlsZXIsIHRoaXMpLnJlZ2lzdGVyKGNvbnRhaW5lcik7XG4gICAgfVxuICAgIGNvbXBpbGUocGFydGlhbERlZmluaXRpb24sIGNvbnRleHQpIHtcbiAgICAgICAgY29uc3QgZGVmaW5pdGlvbiA9IEN1c3RvbUVsZW1lbnREZWZpbml0aW9uLmdldE9yQ3JlYXRlKHBhcnRpYWxEZWZpbml0aW9uKTtcbiAgICAgICAgaWYgKGRlZmluaXRpb24udGVtcGxhdGUgPT09IG51bGwgfHwgZGVmaW5pdGlvbi50ZW1wbGF0ZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZGVmaW5pdGlvbjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXNvdXJjZXMgPSBSZXNvdXJjZU1vZGVsLmdldE9yQ3JlYXRlKGNvbnRleHQpO1xuICAgICAgICBjb25zdCB7IGF0dHJQYXJzZXIsIGV4cHJQYXJzZXIsIGF0dHJTeW50YXhNb2RpZmllciwgZmFjdG9yeSB9ID0gdGhpcztcbiAgICAgICAgY29uc3QgYmluZGVyID0gbmV3IFRlbXBsYXRlQmluZGVyKGNvbnRleHQuZ2V0KElET00pLCByZXNvdXJjZXMsIGF0dHJQYXJzZXIsIGV4cHJQYXJzZXIsIGF0dHJTeW50YXhNb2RpZmllcik7XG4gICAgICAgIGNvbnN0IHRlbXBsYXRlID0gZmFjdG9yeS5jcmVhdGVUZW1wbGF0ZShkZWZpbml0aW9uLnRlbXBsYXRlKTtcbiAgICAgICAgY29uc3Qgc3Vycm9nYXRlID0gYmluZGVyLmJpbmQodGVtcGxhdGUpO1xuICAgICAgICBjb25zdCBjb21waWxhdGlvbiA9IHRoaXMuY29tcGlsYXRpb24gPSBuZXcgQ3VzdG9tRWxlbWVudENvbXBpbGF0aW9uVW5pdChkZWZpbml0aW9uLCBzdXJyb2dhdGUsIHRlbXBsYXRlKTtcbiAgICAgICAgY29uc3QgY3VzdG9tQXR0cmlidXRlcyA9IHN1cnJvZ2F0ZS5jdXN0b21BdHRyaWJ1dGVzO1xuICAgICAgICBjb25zdCBwbGFpbkF0dHJpYnV0ZXMgPSBzdXJyb2dhdGUucGxhaW5BdHRyaWJ1dGVzO1xuICAgICAgICBjb25zdCBjdXN0b21BdHRyaWJ1dGVMZW5ndGggPSBjdXN0b21BdHRyaWJ1dGVzLmxlbmd0aDtcbiAgICAgICAgY29uc3QgcGxhaW5BdHRyaWJ1dGVMZW5ndGggPSBwbGFpbkF0dHJpYnV0ZXMubGVuZ3RoO1xuICAgICAgICBpZiAoY3VzdG9tQXR0cmlidXRlTGVuZ3RoICsgcGxhaW5BdHRyaWJ1dGVMZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBsZXQgb2Zmc2V0ID0gMDtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBjdXN0b21BdHRyaWJ1dGVMZW5ndGggPiBpOyArK2kpIHtcbiAgICAgICAgICAgICAgICBjb21waWxhdGlvbi5zdXJyb2dhdGVzW29mZnNldF0gPSB0aGlzLmNvbXBpbGVDdXN0b21BdHRyaWJ1dGUoY3VzdG9tQXR0cmlidXRlc1tpXSk7XG4gICAgICAgICAgICAgICAgb2Zmc2V0Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBsYWluQXR0cmlidXRlTGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICBjb21waWxhdGlvbi5zdXJyb2dhdGVzW29mZnNldF0gPSB0aGlzLmNvbXBpbGVQbGFpbkF0dHJpYnV0ZShwbGFpbkF0dHJpYnV0ZXNbaV0sIHRydWUpO1xuICAgICAgICAgICAgICAgIG9mZnNldCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuY29tcGlsZUNoaWxkTm9kZXMoc3Vycm9nYXRlLCBjb21waWxhdGlvbi5pbnN0cnVjdGlvbnMsIGNvbXBpbGF0aW9uLnNjb3BlUGFydHMpO1xuICAgICAgICBjb25zdCBjb21waWxlZERlZmluaXRpb24gPSBjb21waWxhdGlvbi50b0RlZmluaXRpb24oKTtcbiAgICAgICAgdGhpcy5jb21waWxhdGlvbiA9IG51bGw7XG4gICAgICAgIHJldHVybiBjb21waWxlZERlZmluaXRpb247XG4gICAgfVxuICAgIGNvbXBpbGVDaGlsZE5vZGVzKHBhcmVudCwgaW5zdHJ1Y3Rpb25Sb3dzLCBzY29wZVBhcnRzKSB7XG4gICAgICAgIGlmICgocGFyZW50LmZsYWdzICYgODE5MiAvKiBoYXNDaGlsZE5vZGVzICovKSA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkTm9kZXMgPSBwYXJlbnQuY2hpbGROb2RlcztcbiAgICAgICAgICAgIGNvbnN0IGlpID0gY2hpbGROb2Rlcy5sZW5ndGg7XG4gICAgICAgICAgICBsZXQgY2hpbGROb2RlO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICAgICAgY2hpbGROb2RlID0gY2hpbGROb2Rlc1tpXTtcbiAgICAgICAgICAgICAgICBpZiAoKGNoaWxkTm9kZS5mbGFncyAmIDEyOCAvKiBpc1RleHQgKi8pID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBpbnN0cnVjdGlvblJvd3MucHVzaChbbmV3IFRleHRCaW5kaW5nSW5zdHJ1Y3Rpb24oY2hpbGROb2RlLmludGVycG9sYXRpb24pXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKChjaGlsZE5vZGUuZmxhZ3MgJiAzMiAvKiBpc0xldEVsZW1lbnQgKi8pID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBiaW5kaW5ncyA9IGNoaWxkTm9kZS5iaW5kaW5ncztcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5zdHJ1Y3Rpb25zID0gW107XG4gICAgICAgICAgICAgICAgICAgIGxldCBiaW5kaW5nO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBqaiA9IGJpbmRpbmdzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBqajsgKytqKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBiaW5kaW5nID0gYmluZGluZ3Nbal07XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbnNbal0gPSBuZXcgTGV0QmluZGluZ0luc3RydWN0aW9uKGJpbmRpbmcuZXhwcmVzc2lvbiwgYmluZGluZy50YXJnZXQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGluc3RydWN0aW9uUm93cy5wdXNoKFtuZXcgTGV0RWxlbWVudEluc3RydWN0aW9uKGluc3RydWN0aW9ucywgY2hpbGROb2RlLnRvQmluZGluZ0NvbnRleHQpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXBpbGVQYXJlbnROb2RlKGNoaWxkTm9kZSwgaW5zdHJ1Y3Rpb25Sb3dzLCBzY29wZVBhcnRzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29tcGlsZUN1c3RvbUVsZW1lbnQoc3ltYm9sLCBpbnN0cnVjdGlvblJvd3MsIHNjb3BlUGFydHMpIHtcbiAgICAgICAgLy8gb2Zmc2V0IDEgdG8gbGVhdmUgYSBzcG90IGZvciB0aGUgaHlkcmF0ZSBpbnN0cnVjdGlvbiBzbyB3ZSBkb24ndCBuZWVkIHRvIGNyZWF0ZSAyIGFycmF5cyB3aXRoIGEgc3ByZWFkIGV0Y1xuICAgICAgICBjb25zdCBpbnN0cnVjdGlvblJvdyA9IHRoaXMuY29tcGlsZUF0dHJpYnV0ZXMoc3ltYm9sLCAxKTtcbiAgICAgICAgaW5zdHJ1Y3Rpb25Sb3dbMF0gPSBuZXcgSHlkcmF0ZUVsZW1lbnRJbnN0cnVjdGlvbihzeW1ib2wucmVzLCB0aGlzLmNvbXBpbGVCaW5kaW5ncyhzeW1ib2wpLCB0aGlzLmNvbXBpbGVQYXJ0cyhzeW1ib2wsIHNjb3BlUGFydHMpKTtcbiAgICAgICAgaW5zdHJ1Y3Rpb25Sb3dzLnB1c2goaW5zdHJ1Y3Rpb25Sb3cpO1xuICAgICAgICB0aGlzLmNvbXBpbGVDaGlsZE5vZGVzKHN5bWJvbCwgaW5zdHJ1Y3Rpb25Sb3dzLCBzY29wZVBhcnRzKTtcbiAgICB9XG4gICAgY29tcGlsZVBsYWluRWxlbWVudChzeW1ib2wsIGluc3RydWN0aW9uUm93cywgc2NvcGVQYXJ0cykge1xuICAgICAgICBjb25zdCBhdHRyaWJ1dGVzID0gdGhpcy5jb21waWxlQXR0cmlidXRlcyhzeW1ib2wsIDApO1xuICAgICAgICBpZiAoYXR0cmlidXRlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBpbnN0cnVjdGlvblJvd3MucHVzaChhdHRyaWJ1dGVzKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvbXBpbGVDaGlsZE5vZGVzKHN5bWJvbCwgaW5zdHJ1Y3Rpb25Sb3dzLCBzY29wZVBhcnRzKTtcbiAgICB9XG4gICAgY29tcGlsZVBhcmVudE5vZGUoc3ltYm9sLCBpbnN0cnVjdGlvblJvd3MsIHNjb3BlUGFydHMpIHtcbiAgICAgICAgc3dpdGNoIChzeW1ib2wuZmxhZ3MgJiA1MTEgLyogdHlwZSAqLykge1xuICAgICAgICAgICAgY2FzZSAxNiAvKiBpc0N1c3RvbUVsZW1lbnQgKi86XG4gICAgICAgICAgICAgICAgdGhpcy5jb21waWxlQ3VzdG9tRWxlbWVudChzeW1ib2wsIGluc3RydWN0aW9uUm93cywgc2NvcGVQYXJ0cyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDY0IC8qIGlzUGxhaW5FbGVtZW50ICovOlxuICAgICAgICAgICAgICAgIHRoaXMuY29tcGlsZVBsYWluRWxlbWVudChzeW1ib2wsIGluc3RydWN0aW9uUm93cywgc2NvcGVQYXJ0cyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDEgLyogaXNUZW1wbGF0ZUNvbnRyb2xsZXIgKi86XG4gICAgICAgICAgICAgICAgdGhpcy5jb21waWxlVGVtcGxhdGVDb250cm9sbGVyKHN5bWJvbCwgaW5zdHJ1Y3Rpb25Sb3dzLCBzY29wZVBhcnRzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb21waWxlVGVtcGxhdGVDb250cm9sbGVyKHN5bWJvbCwgaW5zdHJ1Y3Rpb25Sb3dzLCBzY29wZVBhcnRzKSB7XG4gICAgICAgIGNvbnN0IGJpbmRpbmdzID0gdGhpcy5jb21waWxlQmluZGluZ3Moc3ltYm9sKTtcbiAgICAgICAgY29uc3QgY29udHJvbGxlckluc3RydWN0aW9uUm93cyA9IFtdO1xuICAgICAgICBjb25zdCBjb250cm9sbGVyU2NvcGVQYXJ0cyA9IFtdO1xuICAgICAgICB0aGlzLmNvbXBpbGVQYXJlbnROb2RlKHN5bWJvbC50ZW1wbGF0ZSwgY29udHJvbGxlckluc3RydWN0aW9uUm93cywgY29udHJvbGxlclNjb3BlUGFydHMpO1xuICAgICAgICBtZXJnZURpc3RpbmN0KHNjb3BlUGFydHMsIGNvbnRyb2xsZXJTY29wZVBhcnRzLCBmYWxzZSk7XG4gICAgICAgIGNvbnN0IGRlZiA9IEN1c3RvbUVsZW1lbnREZWZpbml0aW9uLmNyZWF0ZSh7XG4gICAgICAgICAgICBuYW1lOiBzeW1ib2wucGFydE5hbWUgPT09IG51bGwgPyBzeW1ib2wucmVzIDogc3ltYm9sLnBhcnROYW1lLFxuICAgICAgICAgICAgc2NvcGVQYXJ0czogY29udHJvbGxlclNjb3BlUGFydHMsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogc3ltYm9sLnBoeXNpY2FsTm9kZSxcbiAgICAgICAgICAgIGluc3RydWN0aW9uczogY29udHJvbGxlckluc3RydWN0aW9uUm93cyxcbiAgICAgICAgICAgIG5lZWRzQ29tcGlsZTogZmFsc2UsXG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgcGFydHMgPSB2b2lkIDA7XG4gICAgICAgIGlmICgoc3ltYm9sLmZsYWdzICYgMTYzODQgLyogaGFzUGFydHMgKi8pID4gMCkge1xuICAgICAgICAgICAgcGFydHMgPSB7fTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcGFydCBvZiBzeW1ib2wucGFydHMpIHtcbiAgICAgICAgICAgICAgICBwYXJ0c1twYXJ0Lm5hbWVdID0gdGhpcy5jb21waWxhdGlvbi5wYXJ0c1twYXJ0Lm5hbWVdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGluc3RydWN0aW9uUm93cy5wdXNoKFtuZXcgSHlkcmF0ZVRlbXBsYXRlQ29udHJvbGxlcihkZWYsIHN5bWJvbC5yZXMsIGJpbmRpbmdzLCBzeW1ib2wucmVzID09PSAnZWxzZScsIHBhcnRzKV0pO1xuICAgIH1cbiAgICBjb21waWxlQmluZGluZ3Moc3ltYm9sKSB7XG4gICAgICAgIGxldCBiaW5kaW5nSW5zdHJ1Y3Rpb25zO1xuICAgICAgICBpZiAoKHN5bWJvbC5mbGFncyAmIDQwOTYgLyogaGFzQmluZGluZ3MgKi8pID4gMCkge1xuICAgICAgICAgICAgLy8gZWl0aGVyIGEgY3VzdG9tIGVsZW1lbnQgd2l0aCBiaW5kaW5ncywgYSBjdXN0b20gYXR0cmlidXRlIC8gdGVtcGxhdGUgY29udHJvbGxlciB3aXRoIGR5bmFtaWMgb3B0aW9ucyxcbiAgICAgICAgICAgIC8vIG9yIGEgc2luZ2xlIHZhbHVlIGN1c3RvbSBhdHRyaWJ1dGUgYmluZGluZ1xuICAgICAgICAgICAgY29uc3QgeyBiaW5kaW5ncyB9ID0gc3ltYm9sO1xuICAgICAgICAgICAgY29uc3QgbGVuID0gYmluZGluZ3MubGVuZ3RoO1xuICAgICAgICAgICAgYmluZGluZ0luc3RydWN0aW9ucyA9IEFycmF5KGxlbik7XG4gICAgICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgICAgICBmb3IgKDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgICAgICAgICAgYmluZGluZ0luc3RydWN0aW9uc1tpXSA9IHRoaXMuY29tcGlsZUJpbmRpbmcoYmluZGluZ3NbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYmluZGluZ0luc3RydWN0aW9ucyA9IFBMQVRGT1JNLmVtcHR5QXJyYXk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGJpbmRpbmdJbnN0cnVjdGlvbnM7XG4gICAgfVxuICAgIGNvbXBpbGVCaW5kaW5nKHN5bWJvbCkge1xuICAgICAgICBpZiAoc3ltYm9sLmNvbW1hbmQgPT09IG51bGwpIHtcbiAgICAgICAgICAgIC8vIGVpdGhlciBhbiBpbnRlcnBvbGF0aW9uIG9yIGEgbm9ybWFsIHN0cmluZyB2YWx1ZSBhc3NpZ25lZCB0byBhbiBlbGVtZW50IG9yIGF0dHJpYnV0ZSBiaW5kaW5nXG4gICAgICAgICAgICBpZiAoc3ltYm9sLmV4cHJlc3Npb24gPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAvLyB0aGUgdGVtcGxhdGUgYmluZGVyIGFscmVhZHkgZmlsdGVyZWQgb3V0IG5vbi1iaW5kYWJsZXMsIHNvIHdlIGtub3cgd2UgbmVlZCBhIHNldFByb3BlcnR5IGhlcmVcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFNldFByb3BlcnR5SW5zdHJ1Y3Rpb24oc3ltYm9sLnJhd1ZhbHVlLCBzeW1ib2wuYmluZGFibGUucHJvcE5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gZWl0aGVyIGFuIGVsZW1lbnQgYmluZGluZyBpbnRlcnBvbGF0aW9uIG9yIGEgZHluYW1pYyBvcHRpb25zIGF0dHJpYnV0ZSBiaW5kaW5nIGludGVycG9sYXRpb25cbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEludGVycG9sYXRpb25JbnN0cnVjdGlvbihzeW1ib2wuZXhwcmVzc2lvbiwgc3ltYm9sLmJpbmRhYmxlLnByb3BOYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIGVpdGhlciBhbiBlbGVtZW50IGJpbmRpbmcgY29tbWFuZCwgZHluYW1pYyBvcHRpb25zIGF0dHJpYnV0ZSBiaW5kaW5nIGNvbW1hbmQsXG4gICAgICAgICAgICAvLyBvciBjdXN0b20gYXR0cmlidXRlIC8gdGVtcGxhdGUgY29udHJvbGxlciAoc2luZ2xlIHZhbHVlKSBiaW5kaW5nIGNvbW1hbmRcbiAgICAgICAgICAgIHJldHVybiBzeW1ib2wuY29tbWFuZC5jb21waWxlKHN5bWJvbCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29tcGlsZUF0dHJpYnV0ZXMoc3ltYm9sLCBvZmZzZXQpIHtcbiAgICAgICAgbGV0IGF0dHJpYnV0ZUluc3RydWN0aW9ucztcbiAgICAgICAgaWYgKChzeW1ib2wuZmxhZ3MgJiAyMDQ4IC8qIGhhc0F0dHJpYnV0ZXMgKi8pID4gMCkge1xuICAgICAgICAgICAgLy8gYW55IGF0dHJpYnV0ZXMgb24gYSBjdXN0b20gZWxlbWVudCAod2hpY2ggYXJlIG5vdCBiaW5kYWJsZXMpIG9yIGEgcGxhaW4gZWxlbWVudFxuICAgICAgICAgICAgY29uc3QgY3VzdG9tQXR0cmlidXRlcyA9IHN5bWJvbC5jdXN0b21BdHRyaWJ1dGVzO1xuICAgICAgICAgICAgY29uc3QgcGxhaW5BdHRyaWJ1dGVzID0gc3ltYm9sLnBsYWluQXR0cmlidXRlcztcbiAgICAgICAgICAgIGNvbnN0IGN1c3RvbUF0dHJpYnV0ZUxlbmd0aCA9IGN1c3RvbUF0dHJpYnV0ZXMubGVuZ3RoO1xuICAgICAgICAgICAgY29uc3QgcGxhaW5BdHRyaWJ1dGVzTGVuZ3RoID0gcGxhaW5BdHRyaWJ1dGVzLmxlbmd0aDtcbiAgICAgICAgICAgIGF0dHJpYnV0ZUluc3RydWN0aW9ucyA9IEFycmF5KG9mZnNldCArIGN1c3RvbUF0dHJpYnV0ZUxlbmd0aCArIHBsYWluQXR0cmlidXRlc0xlbmd0aCk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgY3VzdG9tQXR0cmlidXRlTGVuZ3RoID4gaTsgKytpKSB7XG4gICAgICAgICAgICAgICAgYXR0cmlidXRlSW5zdHJ1Y3Rpb25zW29mZnNldF0gPSB0aGlzLmNvbXBpbGVDdXN0b21BdHRyaWJ1dGUoY3VzdG9tQXR0cmlidXRlc1tpXSk7XG4gICAgICAgICAgICAgICAgb2Zmc2V0Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgcGxhaW5BdHRyaWJ1dGVzTGVuZ3RoID4gaTsgKytpKSB7XG4gICAgICAgICAgICAgICAgYXR0cmlidXRlSW5zdHJ1Y3Rpb25zW29mZnNldF0gPSB0aGlzLmNvbXBpbGVQbGFpbkF0dHJpYnV0ZShwbGFpbkF0dHJpYnV0ZXNbaV0sIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBvZmZzZXQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvZmZzZXQgPiAwKSB7XG4gICAgICAgICAgICBhdHRyaWJ1dGVJbnN0cnVjdGlvbnMgPSBBcnJheShvZmZzZXQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYXR0cmlidXRlSW5zdHJ1Y3Rpb25zID0gUExBVEZPUk0uZW1wdHlBcnJheTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXR0cmlidXRlSW5zdHJ1Y3Rpb25zO1xuICAgIH1cbiAgICBjb21waWxlQ3VzdG9tQXR0cmlidXRlKHN5bWJvbCkge1xuICAgICAgICAvLyBhIG5vcm1hbCBjdXN0b20gYXR0cmlidXRlIChub3QgdGVtcGxhdGUgY29udHJvbGxlcilcbiAgICAgICAgY29uc3QgYmluZGluZ3MgPSB0aGlzLmNvbXBpbGVCaW5kaW5ncyhzeW1ib2wpO1xuICAgICAgICByZXR1cm4gbmV3IEh5ZHJhdGVBdHRyaWJ1dGVJbnN0cnVjdGlvbihzeW1ib2wucmVzLCBiaW5kaW5ncyk7XG4gICAgfVxuICAgIGNvbXBpbGVQbGFpbkF0dHJpYnV0ZShzeW1ib2wsIGlzT25TdXJyb2dhdGUpIHtcbiAgICAgICAgaWYgKHN5bWJvbC5jb21tYW5kID09PSBudWxsKSB7XG4gICAgICAgICAgICBjb25zdCBzeW50YXggPSBzeW1ib2wuc3ludGF4O1xuICAgICAgICAgICAgaWYgKHN5bWJvbC5leHByZXNzaW9uID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYXR0clJhd1ZhbHVlID0gc3ludGF4LnJhd1ZhbHVlO1xuICAgICAgICAgICAgICAgIGlmIChpc09uU3Vycm9nYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoc3ludGF4LnRhcmdldCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnY2xhc3MnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgU2V0Q2xhc3NBdHRyaWJ1dGVJbnN0cnVjdGlvbihhdHRyUmF3VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnc3R5bGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgU2V0U3R5bGVBdHRyaWJ1dGVJbnN0cnVjdGlvbihhdHRyUmF3VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdG9kbzogIGRlZmluZSBob3cgdG8gbWVyZ2Ugb3RoZXIgYXR0cmlidXRlIHBlYWNlZnVsbHlcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICB0aGlzIGlzIGFuIGV4aXN0aW5nIGZlYXR1cmUgcmVxdWVzdFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGEgcGxhaW4gYXR0cmlidXRlIG9uIGEgc3Vycm9nYXRlXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBTZXRBdHRyaWJ1dGVJbnN0cnVjdGlvbihhdHRyUmF3VmFsdWUsIHN5bnRheC50YXJnZXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gYSBwbGFpbiBhdHRyaWJ1dGUgd2l0aCBhbiBpbnRlcnBvbGF0aW9uXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBJbnRlcnBvbGF0aW9uSW5zdHJ1Y3Rpb24oc3ltYm9sLmV4cHJlc3Npb24sIHN5bnRheC50YXJnZXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gYSBwbGFpbiBhdHRyaWJ1dGUgd2l0aCBhIGJpbmRpbmcgY29tbWFuZFxuICAgICAgICAgICAgcmV0dXJuIHN5bWJvbC5jb21tYW5kLmNvbXBpbGUoc3ltYm9sKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBwcml2YXRlIGNvbXBpbGVBdHRyaWJ1dGUoc3ltYm9sOiBJQXR0cmlidXRlU3ltYm9sKTogSFRNTEF0dHJpYnV0ZUluc3RydWN0aW9uIHtcbiAgICAvLyAgIC8vIGFueSBhdHRyaWJ1dGUgb24gYSBjdXN0b20gZWxlbWVudCAod2hpY2ggaXMgbm90IGEgYmluZGFibGUpIG9yIGEgcGxhaW4gZWxlbWVudFxuICAgIC8vICAgaWYgKHN5bWJvbC5mbGFncyAmIFN5bWJvbEZsYWdzLmlzQ3VzdG9tQXR0cmlidXRlKSB7XG4gICAgLy8gICAgIHJldHVybiB0aGlzLmNvbXBpbGVDdXN0b21BdHRyaWJ1dGUoc3ltYm9sIGFzIEN1c3RvbUF0dHJpYnV0ZVN5bWJvbCk7XG4gICAgLy8gICB9IGVsc2Uge1xuICAgIC8vICAgICByZXR1cm4gdGhpcy5jb21waWxlUGxhaW5BdHRyaWJ1dGUoc3ltYm9sIGFzIFBsYWluQXR0cmlidXRlU3ltYm9sKTtcbiAgICAvLyAgIH1cbiAgICAvLyB9XG4gICAgY29tcGlsZVBhcnRzKHN5bWJvbCwgc2NvcGVQYXJ0cykge1xuICAgICAgICBjb25zdCBwYXJ0cyA9IHt9O1xuICAgICAgICBpZiAoKHN5bWJvbC5mbGFncyAmIDE2Mzg0IC8qIGhhc1BhcnRzICovKSA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHJlcGxhY2VQYXJ0cyA9IHN5bWJvbC5wYXJ0cztcbiAgICAgICAgICAgIGNvbnN0IGxlbiA9IHJlcGxhY2VQYXJ0cy5sZW5ndGg7XG4gICAgICAgICAgICBsZXQgcyA9IHNjb3BlUGFydHMubGVuZ3RoO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlcGxhY2VQYXJ0ID0gcmVwbGFjZVBhcnRzW2ldO1xuICAgICAgICAgICAgICAgIGlmICghc2NvcGVQYXJ0cy5pbmNsdWRlcyhyZXBsYWNlUGFydC5uYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICBzY29wZVBhcnRzW3MrK10gPSByZXBsYWNlUGFydC5uYW1lO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBwYXJ0U2NvcGVQYXJ0cyA9IFtdO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnRJbnN0cnVjdGlvblJvd3MgPSBbXTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbXBpbGVQYXJlbnROb2RlKHJlcGxhY2VQYXJ0LnRlbXBsYXRlLCBwYXJ0SW5zdHJ1Y3Rpb25Sb3dzLCBwYXJ0U2NvcGVQYXJ0cyk7XG4gICAgICAgICAgICAgICAgLy8gVE9ETzogdGhlIGFzc2lnbm1lbnQgdG8gYHRoaXMuY29tcGlsYXRpb24ucGFydHNbcmVwbGFjZVBhcnQubmFtZV1gIG1pZ2h0IGJlIHRoZSBjYXVzZSBvZiByZXBsYWNlYWJsZSBidWcgcmVwb3J0ZWQgYnkgcmx1YmFcbiAgICAgICAgICAgICAgICAvLyBuZWVkIHRvIHZlcmlmeSB0aGlzXG4gICAgICAgICAgICAgICAgdGhpcy5jb21waWxhdGlvbi5wYXJ0c1tyZXBsYWNlUGFydC5uYW1lXSA9IHBhcnRzW3JlcGxhY2VQYXJ0Lm5hbWVdID0gQ3VzdG9tRWxlbWVudERlZmluaXRpb24uY3JlYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogcmVwbGFjZVBhcnQubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgc2NvcGVQYXJ0czogcGFydFNjb3BlUGFydHMsXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiByZXBsYWNlUGFydC5waHlzaWNhbE5vZGUsXG4gICAgICAgICAgICAgICAgICAgIGluc3RydWN0aW9uczogcGFydEluc3RydWN0aW9uUm93cyxcbiAgICAgICAgICAgICAgICAgICAgbmVlZHNDb21waWxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFydHM7XG4gICAgfVxufTtcblRlbXBsYXRlQ29tcGlsZXIgPSBfX2RlY29yYXRlKFtcbiAgICBfX3BhcmFtKDAsIElUZW1wbGF0ZUVsZW1lbnRGYWN0b3J5KSxcbiAgICBfX3BhcmFtKDEsIElBdHRyaWJ1dGVQYXJzZXIpLFxuICAgIF9fcGFyYW0oMiwgSUV4cHJlc3Npb25QYXJzZXIpLFxuICAgIF9fcGFyYW0oMywgSUF0dHJTeW50YXhUcmFuc2Zvcm1lciksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3QsIE9iamVjdCwgT2JqZWN0LCBPYmplY3RdKVxuXSwgVGVtcGxhdGVDb21waWxlcik7XG5leHBvcnQgeyBUZW1wbGF0ZUNvbXBpbGVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD10ZW1wbGF0ZS1jb21waWxlci5qcy5tYXAiLCJpbXBvcnQgeyBfX2RlY29yYXRlLCBfX21ldGFkYXRhLCBfX3BhcmFtIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBESSwgUmVnaXN0cmF0aW9uIH0gZnJvbSAnQGF1cmVsaWEva2VybmVsJztcbmltcG9ydCB7IElET00gfSBmcm9tICdAYXVyZWxpYS9ydW50aW1lJztcbi8vIEZvciBzb21lIHJlYXNvbiByb2xsdXAgY29tcGxhaW5zIGFib3V0IGBESS5jcmVhdGVJbnRlcmZhY2U8SVRlbXBsYXRlRWxlbWVudEZhY3Rvcnk+KCkubm9EZWZhdWx0KClgIHdpdGggdGhpcyBtZXNzYWdlOlxuLy8gXCJzZW1hbnRpYyBlcnJvciBUUzI3NDIgVGhlIGluZmVycmVkIHR5cGUgb2YgJ0lUZW1wbGF0ZUVsZW1lbnRGYWN0b3J5JyBjYW5ub3QgYmUgbmFtZWQgd2l0aG91dCBhIHJlZmVyZW5jZSB0byAnQGF1cmVsaWEvaml0L25vZGVfbW9kdWxlcy9AYXVyZWxpYS9rZXJuZWwnLiBUaGlzIGlzIGxpa2VseSBub3QgcG9ydGFibGUuIEEgdHlwZSBhbm5vdGF0aW9uIGlzIG5lY2Vzc2FyeVwiXG4vLyBTby4uIGludmVzdGlnYXRlIHdoeSB0aGF0IGhhcHBlbnMgKG9yIHJhdGhlciwgd2h5IGl0ICpvbmx5KiBoYXBwZW5zIGhlcmUgYW5kIG5vdCBmb3IgdGhlIG90aGVyIDUwKVxuZXhwb3J0IGNvbnN0IElUZW1wbGF0ZUVsZW1lbnRGYWN0b3J5ID0gREkuY3JlYXRlSW50ZXJmYWNlKCdJVGVtcGxhdGVFbGVtZW50RmFjdG9yeScpLm5vRGVmYXVsdCgpO1xuY29uc3QgbWFya3VwQ2FjaGUgPSB7fTtcbi8qKlxuICogRGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBmb3IgYElUZW1wbGF0ZUZhY3RvcnlgIGZvciB1c2UgaW4gYW4gSFRNTCBiYXNlZCBydW50aW1lLlxuICpcbiAqIEBpbnRlcm5hbFxuICovXG5sZXQgSFRNTFRlbXBsYXRlRWxlbWVudEZhY3RvcnkgPSBjbGFzcyBIVE1MVGVtcGxhdGVFbGVtZW50RmFjdG9yeSB7XG4gICAgY29uc3RydWN0b3IoZG9tKSB7XG4gICAgICAgIHRoaXMuZG9tID0gZG9tO1xuICAgICAgICB0aGlzLnRlbXBsYXRlID0gZG9tLmNyZWF0ZVRlbXBsYXRlKCk7XG4gICAgfVxuICAgIHN0YXRpYyByZWdpc3Rlcihjb250YWluZXIpIHtcbiAgICAgICAgcmV0dXJuIFJlZ2lzdHJhdGlvbi5zaW5nbGV0b24oSVRlbXBsYXRlRWxlbWVudEZhY3RvcnksIHRoaXMpLnJlZ2lzdGVyKGNvbnRhaW5lcik7XG4gICAgfVxuICAgIGNyZWF0ZVRlbXBsYXRlKGlucHV0KSB7XG4gICAgICAgIGlmICh0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0gbWFya3VwQ2FjaGVbaW5wdXRdO1xuICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdGVtcGxhdGUgPSB0aGlzLnRlbXBsYXRlO1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlLmlubmVySFRNTCA9IGlucHV0O1xuICAgICAgICAgICAgICAgIGNvbnN0IG5vZGUgPSB0ZW1wbGF0ZS5jb250ZW50LmZpcnN0RWxlbWVudENoaWxkO1xuICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBpbnB1dCBpcyBlaXRoZXIgbm90IHdyYXBwZWQgaW4gYSB0ZW1wbGF0ZSBvciB0aGVyZSBpcyBtb3JlIHRoYW4gb25lIG5vZGUsXG4gICAgICAgICAgICAgICAgLy8gcmV0dXJuIHRoZSB3aG9sZSB0ZW1wbGF0ZSB0aGF0IHdyYXBzIGl0L3RoZW0gKGFuZCBjcmVhdGUgYSBuZXcgb25lIGZvciB0aGUgbmV4dCBpbnB1dClcbiAgICAgICAgICAgICAgICBpZiAobm9kZSA9PSBudWxsIHx8IG5vZGUubm9kZU5hbWUgIT09ICdURU1QTEFURScgfHwgbm9kZS5uZXh0RWxlbWVudFNpYmxpbmcgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRlbXBsYXRlID0gdGhpcy5kb20uY3JlYXRlVGVtcGxhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gdGVtcGxhdGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyB0aGUgbm9kZSB0byByZXR1cm4gaXMgYm90aCBhIHRlbXBsYXRlIGFuZCB0aGUgb25seSBub2RlLCBzbyByZXR1cm4ganVzdCB0aGUgbm9kZVxuICAgICAgICAgICAgICAgICAgICAvLyBhbmQgY2xlYW4gdXAgdGhlIHRlbXBsYXRlIGZvciB0aGUgbmV4dCBpbnB1dFxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZS5jb250ZW50LnJlbW92ZUNoaWxkKG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBub2RlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBtYXJrdXBDYWNoZVtpbnB1dF0gPSByZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0LmNsb25lTm9kZSh0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5wdXQubm9kZU5hbWUgIT09ICdURU1QTEFURScpIHtcbiAgICAgICAgICAgIC8vIGlmIHdlIGdldCBvbmUgbm9kZSB0aGF0IGlzIG5vdCBhIHRlbXBsYXRlLCB3cmFwIGl0IGluIG9uZVxuICAgICAgICAgICAgY29uc3QgdGVtcGxhdGUgPSB0aGlzLmRvbS5jcmVhdGVUZW1wbGF0ZSgpO1xuICAgICAgICAgICAgdGVtcGxhdGUuY29udGVudC5hcHBlbmRDaGlsZChpbnB1dCk7XG4gICAgICAgICAgICByZXR1cm4gdGVtcGxhdGU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gd2UgZ290IGEgdGVtcGxhdGUgZWxlbWVudCwgcmVtb3ZlIGl0IGZyb20gdGhlIERPTSBpZiBpdCdzIHByZXNlbnQgdGhlcmUgYW5kIGRvbid0XG4gICAgICAgIC8vIGRvIGFueSBvdGhlciBwcm9jZXNzaW5nXG4gICAgICAgIGlmIChpbnB1dC5wYXJlbnROb2RlICE9IG51bGwpIHtcbiAgICAgICAgICAgIGlucHV0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoaW5wdXQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbnB1dDtcbiAgICB9XG59O1xuSFRNTFRlbXBsYXRlRWxlbWVudEZhY3RvcnkgPSBfX2RlY29yYXRlKFtcbiAgICBfX3BhcmFtKDAsIElET00pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0XSlcbl0sIEhUTUxUZW1wbGF0ZUVsZW1lbnRGYWN0b3J5KTtcbmV4cG9ydCB7IEhUTUxUZW1wbGF0ZUVsZW1lbnRGYWN0b3J5IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD10ZW1wbGF0ZS1lbGVtZW50LWZhY3RvcnkuanMubWFwIiwiZXhwb3J0IGNsYXNzIEF0dHJTeW50YXgge1xuICAgIGNvbnN0cnVjdG9yKHJhd05hbWUsIHJhd1ZhbHVlLCB0YXJnZXQsIGNvbW1hbmQpIHtcbiAgICAgICAgdGhpcy5yYXdOYW1lID0gcmF3TmFtZTtcbiAgICAgICAgdGhpcy5yYXdWYWx1ZSA9IHJhd1ZhbHVlO1xuICAgICAgICB0aGlzLnRhcmdldCA9IHRhcmdldDtcbiAgICAgICAgdGhpcy5jb21tYW5kID0gY29tbWFuZDtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hc3QuanMubWFwIiwiaW1wb3J0IHsgX19kZWNvcmF0ZSwgX19tZXRhZGF0YSwgX19wYXJhbSB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgYWxsLCBESSB9IGZyb20gJ0BhdXJlbGlhL2tlcm5lbCc7XG5pbXBvcnQgeyBBdHRyU3ludGF4IH0gZnJvbSAnLi9hc3QnO1xuaW1wb3J0IHsgQXR0cmlidXRlUGF0dGVybiwgSUF0dHJpYnV0ZVBhdHRlcm4sIElTeW50YXhJbnRlcnByZXRlciB9IGZyb20gJy4vYXR0cmlidXRlLXBhdHRlcm4nO1xuZXhwb3J0IGNvbnN0IElBdHRyaWJ1dGVQYXJzZXIgPSBESS5jcmVhdGVJbnRlcmZhY2UoJ0lBdHRyaWJ1dGVQYXJzZXInKS53aXRoRGVmYXVsdCh4ID0+IHguc2luZ2xldG9uKEF0dHJpYnV0ZVBhcnNlcikpO1xuLyoqIEBpbnRlcm5hbCAqL1xubGV0IEF0dHJpYnV0ZVBhcnNlciA9IGNsYXNzIEF0dHJpYnV0ZVBhcnNlciB7XG4gICAgY29uc3RydWN0b3IoaW50ZXJwcmV0ZXIsIGF0dHJQYXR0ZXJucykge1xuICAgICAgICB0aGlzLmludGVycHJldGVyID0gaW50ZXJwcmV0ZXI7XG4gICAgICAgIHRoaXMuY2FjaGUgPSB7fTtcbiAgICAgICAgdGhpcy5pbnRlcnByZXRlciA9IGludGVycHJldGVyO1xuICAgICAgICBjb25zdCBwYXR0ZXJucyA9IHRoaXMucGF0dGVybnMgPSB7fTtcbiAgICAgICAgYXR0clBhdHRlcm5zLmZvckVhY2goYXR0clBhdHRlcm4gPT4ge1xuICAgICAgICAgICAgY29uc3QgZGVmcyA9IEF0dHJpYnV0ZVBhdHRlcm4uZ2V0UGF0dGVybkRlZmluaXRpb25zKGF0dHJQYXR0ZXJuLmNvbnN0cnVjdG9yKTtcbiAgICAgICAgICAgIGludGVycHJldGVyLmFkZChkZWZzKTtcbiAgICAgICAgICAgIGRlZnMuZm9yRWFjaChkZWYgPT4ge1xuICAgICAgICAgICAgICAgIHBhdHRlcm5zW2RlZi5wYXR0ZXJuXSA9IGF0dHJQYXR0ZXJuO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwYXJzZShuYW1lLCB2YWx1ZSkge1xuICAgICAgICBsZXQgaW50ZXJwcmV0YXRpb24gPSB0aGlzLmNhY2hlW25hbWVdO1xuICAgICAgICBpZiAoaW50ZXJwcmV0YXRpb24gPT0gbnVsbCkge1xuICAgICAgICAgICAgaW50ZXJwcmV0YXRpb24gPSB0aGlzLmNhY2hlW25hbWVdID0gdGhpcy5pbnRlcnByZXRlci5pbnRlcnByZXQobmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGF0dGVybiA9IGludGVycHJldGF0aW9uLnBhdHRlcm47XG4gICAgICAgIGlmIChwYXR0ZXJuID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQXR0clN5bnRheChuYW1lLCB2YWx1ZSwgbmFtZSwgbnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXR0ZXJuc1twYXR0ZXJuXVtwYXR0ZXJuXShuYW1lLCB2YWx1ZSwgaW50ZXJwcmV0YXRpb24ucGFydHMpO1xuICAgICAgICB9XG4gICAgfVxufTtcbkF0dHJpYnV0ZVBhcnNlciA9IF9fZGVjb3JhdGUoW1xuICAgIF9fcGFyYW0oMCwgSVN5bnRheEludGVycHJldGVyKSxcbiAgICBfX3BhcmFtKDEsIGFsbChJQXR0cmlidXRlUGF0dGVybikpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0LCBBcnJheV0pXG5dLCBBdHRyaWJ1dGVQYXJzZXIpO1xuZXhwb3J0IHsgQXR0cmlidXRlUGFyc2VyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hdHRyaWJ1dGUtcGFyc2VyLmpzLm1hcCIsImltcG9ydCB7IERJLCBNZXRhZGF0YSwgUExBVEZPUk0sIFByb3RvY29sLCBSZWdpc3RyYXRpb24sIFJlcG9ydGVyIH0gZnJvbSAnQGF1cmVsaWEva2VybmVsJztcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCBjbGFzcyBDaGFyU3BlYyB7XG4gICAgY29uc3RydWN0b3IoY2hhcnMsIHJlcGVhdCwgaXNTeW1ib2wsIGlzSW52ZXJ0ZWQpIHtcbiAgICAgICAgdGhpcy5jaGFycyA9IGNoYXJzO1xuICAgICAgICB0aGlzLnJlcGVhdCA9IHJlcGVhdDtcbiAgICAgICAgdGhpcy5pc1N5bWJvbCA9IGlzU3ltYm9sO1xuICAgICAgICB0aGlzLmlzSW52ZXJ0ZWQgPSBpc0ludmVydGVkO1xuICAgICAgICBpZiAoaXNJbnZlcnRlZCkge1xuICAgICAgICAgICAgc3dpdGNoIChjaGFycy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFzID0gdGhpcy5oYXNPZk5vbmVJbnZlcnNlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFzID0gdGhpcy5oYXNPZlNpbmdsZUludmVyc2U7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFzID0gdGhpcy5oYXNPZk11bHRpcGxlSW52ZXJzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHN3aXRjaCAoY2hhcnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhcyA9IHRoaXMuaGFzT2ZOb25lO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFzID0gdGhpcy5oYXNPZlNpbmdsZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYXMgPSB0aGlzLmhhc09mTXVsdGlwbGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZXF1YWxzKG90aGVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNoYXJzID09PSBvdGhlci5jaGFyc1xuICAgICAgICAgICAgJiYgdGhpcy5yZXBlYXQgPT09IG90aGVyLnJlcGVhdFxuICAgICAgICAgICAgJiYgdGhpcy5pc1N5bWJvbCA9PT0gb3RoZXIuaXNTeW1ib2xcbiAgICAgICAgICAgICYmIHRoaXMuaXNJbnZlcnRlZCA9PT0gb3RoZXIuaXNJbnZlcnRlZDtcbiAgICB9XG4gICAgaGFzT2ZNdWx0aXBsZShjaGFyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNoYXJzLmluY2x1ZGVzKGNoYXIpO1xuICAgIH1cbiAgICBoYXNPZlNpbmdsZShjaGFyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNoYXJzID09PSBjaGFyO1xuICAgIH1cbiAgICBoYXNPZk5vbmUoY2hhcikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGhhc09mTXVsdGlwbGVJbnZlcnNlKGNoYXIpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLmNoYXJzLmluY2x1ZGVzKGNoYXIpO1xuICAgIH1cbiAgICBoYXNPZlNpbmdsZUludmVyc2UoY2hhcikge1xuICAgICAgICByZXR1cm4gdGhpcy5jaGFycyAhPT0gY2hhcjtcbiAgICB9XG4gICAgaGFzT2ZOb25lSW52ZXJzZShjaGFyKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBJbnRlcnByZXRhdGlvbiB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucGFydHMgPSBQTEFURk9STS5lbXB0eUFycmF5O1xuICAgICAgICB0aGlzLl9wYXR0ZXJuID0gJyc7XG4gICAgICAgIHRoaXMuY3VycmVudFJlY29yZCA9IHt9O1xuICAgICAgICB0aGlzLnBhcnRzUmVjb3JkID0ge307XG4gICAgfVxuICAgIGdldCBwYXR0ZXJuKCkge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMuX3BhdHRlcm47XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gJycpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNldCBwYXR0ZXJuKHZhbHVlKSB7XG4gICAgICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLl9wYXR0ZXJuID0gJyc7XG4gICAgICAgICAgICB0aGlzLnBhcnRzID0gUExBVEZPUk0uZW1wdHlBcnJheTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3BhdHRlcm4gPSB2YWx1ZTtcbiAgICAgICAgICAgIHRoaXMucGFydHMgPSB0aGlzLnBhcnRzUmVjb3JkW3ZhbHVlXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhcHBlbmQocGF0dGVybiwgY2gpIHtcbiAgICAgICAgY29uc3QgeyBjdXJyZW50UmVjb3JkIH0gPSB0aGlzO1xuICAgICAgICBpZiAoY3VycmVudFJlY29yZFtwYXR0ZXJuXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjdXJyZW50UmVjb3JkW3BhdHRlcm5dID0gY2g7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjdXJyZW50UmVjb3JkW3BhdHRlcm5dICs9IGNoO1xuICAgICAgICB9XG4gICAgfVxuICAgIG5leHQocGF0dGVybikge1xuICAgICAgICBjb25zdCB7IGN1cnJlbnRSZWNvcmQgfSA9IHRoaXM7XG4gICAgICAgIGlmIChjdXJyZW50UmVjb3JkW3BhdHRlcm5dICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgcGFydHNSZWNvcmQgfSA9IHRoaXM7XG4gICAgICAgICAgICBpZiAocGFydHNSZWNvcmRbcGF0dGVybl0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHBhcnRzUmVjb3JkW3BhdHRlcm5dID0gW2N1cnJlbnRSZWNvcmRbcGF0dGVybl1dO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcGFydHNSZWNvcmRbcGF0dGVybl0ucHVzaChjdXJyZW50UmVjb3JkW3BhdHRlcm5dKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1cnJlbnRSZWNvcmRbcGF0dGVybl0gPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKiogQGludGVybmFsICovXG5leHBvcnQgY2xhc3MgU3RhdGUge1xuICAgIGNvbnN0cnVjdG9yKGNoYXJTcGVjLCAuLi5wYXR0ZXJucykge1xuICAgICAgICB0aGlzLmNoYXJTcGVjID0gY2hhclNwZWM7XG4gICAgICAgIHRoaXMubmV4dFN0YXRlcyA9IFtdO1xuICAgICAgICB0aGlzLnR5cGVzID0gbnVsbDtcbiAgICAgICAgdGhpcy5pc0VuZHBvaW50ID0gZmFsc2U7XG4gICAgICAgIHRoaXMucGF0dGVybnMgPSBwYXR0ZXJucztcbiAgICB9XG4gICAgZ2V0IHBhdHRlcm4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzRW5kcG9pbnQgPyB0aGlzLnBhdHRlcm5zWzBdIDogbnVsbDtcbiAgICB9XG4gICAgZmluZENoaWxkKGNoYXJTcGVjKSB7XG4gICAgICAgIGNvbnN0IG5leHRTdGF0ZXMgPSB0aGlzLm5leHRTdGF0ZXM7XG4gICAgICAgIGNvbnN0IGxlbiA9IG5leHRTdGF0ZXMubGVuZ3RoO1xuICAgICAgICBsZXQgY2hpbGQgPSBudWxsO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgICAgICBjaGlsZCA9IG5leHRTdGF0ZXNbaV07XG4gICAgICAgICAgICBpZiAoY2hhclNwZWMuZXF1YWxzKGNoaWxkLmNoYXJTcGVjKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjaGlsZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgYXBwZW5kKGNoYXJTcGVjLCBwYXR0ZXJuKSB7XG4gICAgICAgIGNvbnN0IHsgcGF0dGVybnMgfSA9IHRoaXM7XG4gICAgICAgIGlmICghcGF0dGVybnMuaW5jbHVkZXMocGF0dGVybikpIHtcbiAgICAgICAgICAgIHBhdHRlcm5zLnB1c2gocGF0dGVybik7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHN0YXRlID0gdGhpcy5maW5kQ2hpbGQoY2hhclNwZWMpO1xuICAgICAgICBpZiAoc3RhdGUgPT0gbnVsbCkge1xuICAgICAgICAgICAgc3RhdGUgPSBuZXcgU3RhdGUoY2hhclNwZWMsIHBhdHRlcm4pO1xuICAgICAgICAgICAgdGhpcy5uZXh0U3RhdGVzLnB1c2goc3RhdGUpO1xuICAgICAgICAgICAgaWYgKGNoYXJTcGVjLnJlcGVhdCkge1xuICAgICAgICAgICAgICAgIHN0YXRlLm5leHRTdGF0ZXMucHVzaChzdGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgIH1cbiAgICBmaW5kTWF0Y2hlcyhjaCwgaW50ZXJwcmV0YXRpb24pIHtcbiAgICAgICAgLy8gVE9ETzogcmV1c2UgcHJlYWxsb2NhdGVkIGFycmF5c1xuICAgICAgICBjb25zdCByZXN1bHRzID0gW107XG4gICAgICAgIGNvbnN0IG5leHRTdGF0ZXMgPSB0aGlzLm5leHRTdGF0ZXM7XG4gICAgICAgIGNvbnN0IGxlbiA9IG5leHRTdGF0ZXMubGVuZ3RoO1xuICAgICAgICBsZXQgY2hpbGRMZW4gPSAwO1xuICAgICAgICBsZXQgY2hpbGQgPSBudWxsO1xuICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgIGxldCBqID0gMDtcbiAgICAgICAgZm9yICg7IGkgPCBsZW47ICsraSkge1xuICAgICAgICAgICAgY2hpbGQgPSBuZXh0U3RhdGVzW2ldO1xuICAgICAgICAgICAgaWYgKGNoaWxkLmNoYXJTcGVjLmhhcyhjaCkpIHtcbiAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2goY2hpbGQpO1xuICAgICAgICAgICAgICAgIGNoaWxkTGVuID0gY2hpbGQucGF0dGVybnMubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGogPSAwO1xuICAgICAgICAgICAgICAgIGlmIChjaGlsZC5jaGFyU3BlYy5pc1N5bWJvbCkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKDsgaiA8IGNoaWxkTGVuOyArK2opIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVycHJldGF0aW9uLm5leHQoY2hpbGQucGF0dGVybnNbal0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKDsgaiA8IGNoaWxkTGVuOyArK2opIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVycHJldGF0aW9uLmFwcGVuZChjaGlsZC5wYXR0ZXJuc1tqXSwgY2gpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIH1cbn1cbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCBjbGFzcyBTdGF0aWNTZWdtZW50IHtcbiAgICBjb25zdHJ1Y3Rvcih0ZXh0KSB7XG4gICAgICAgIHRoaXMudGV4dCA9IHRleHQ7XG4gICAgICAgIHRoaXMudGV4dCA9IHRleHQ7XG4gICAgICAgIGNvbnN0IGxlbiA9IHRoaXMubGVuID0gdGV4dC5sZW5ndGg7XG4gICAgICAgIGNvbnN0IHNwZWNzID0gdGhpcy5zcGVjcyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgICAgICBzcGVjcy5wdXNoKG5ldyBDaGFyU3BlYyh0ZXh0W2ldLCBmYWxzZSwgZmFsc2UsIGZhbHNlKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWFjaENoYXIoY2FsbGJhY2spIHtcbiAgICAgICAgY29uc3QgeyBsZW4sIHNwZWNzIH0gPSB0aGlzO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgICAgICBjYWxsYmFjayhzcGVjc1tpXSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKiogQGludGVybmFsICovXG5leHBvcnQgY2xhc3MgRHluYW1pY1NlZ21lbnQge1xuICAgIGNvbnN0cnVjdG9yKHN5bWJvbHMpIHtcbiAgICAgICAgdGhpcy50ZXh0ID0gJ1BBUlQnO1xuICAgICAgICB0aGlzLnNwZWMgPSBuZXcgQ2hhclNwZWMoc3ltYm9scywgdHJ1ZSwgZmFsc2UsIHRydWUpO1xuICAgIH1cbiAgICBlYWNoQ2hhcihjYWxsYmFjaykge1xuICAgICAgICBjYWxsYmFjayh0aGlzLnNwZWMpO1xuICAgIH1cbn1cbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCBjbGFzcyBTeW1ib2xTZWdtZW50IHtcbiAgICBjb25zdHJ1Y3Rvcih0ZXh0KSB7XG4gICAgICAgIHRoaXMudGV4dCA9IHRleHQ7XG4gICAgICAgIHRoaXMuc3BlYyA9IG5ldyBDaGFyU3BlYyh0ZXh0LCBmYWxzZSwgdHJ1ZSwgZmFsc2UpO1xuICAgIH1cbiAgICBlYWNoQ2hhcihjYWxsYmFjaykge1xuICAgICAgICBjYWxsYmFjayh0aGlzLnNwZWMpO1xuICAgIH1cbn1cbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCBjbGFzcyBTZWdtZW50VHlwZXMge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnN0YXRpY3MgPSAwO1xuICAgICAgICB0aGlzLmR5bmFtaWNzID0gMDtcbiAgICAgICAgdGhpcy5zeW1ib2xzID0gMDtcbiAgICB9XG59XG5leHBvcnQgY29uc3QgSVN5bnRheEludGVycHJldGVyID0gREkuY3JlYXRlSW50ZXJmYWNlKCdJU3ludGF4SW50ZXJwcmV0ZXInKS53aXRoRGVmYXVsdCh4ID0+IHguc2luZ2xldG9uKFN5bnRheEludGVycHJldGVyKSk7XG4vKiogQGludGVybmFsICovXG5leHBvcnQgY2xhc3MgU3ludGF4SW50ZXJwcmV0ZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnJvb3RTdGF0ZSA9IG5ldyBTdGF0ZShudWxsKTtcbiAgICAgICAgdGhpcy5pbml0aWFsU3RhdGVzID0gW3RoaXMucm9vdFN0YXRlXTtcbiAgICB9XG4gICAgYWRkKGRlZk9yRGVmcykge1xuICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGRlZk9yRGVmcykpIHtcbiAgICAgICAgICAgIGNvbnN0IGlpID0gZGVmT3JEZWZzLmxlbmd0aDtcbiAgICAgICAgICAgIGZvciAoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkKGRlZk9yRGVmc1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGN1cnJlbnRTdGF0ZSA9IHRoaXMucm9vdFN0YXRlO1xuICAgICAgICBjb25zdCBkZWYgPSBkZWZPckRlZnM7XG4gICAgICAgIGNvbnN0IHBhdHRlcm4gPSBkZWYucGF0dGVybjtcbiAgICAgICAgY29uc3QgdHlwZXMgPSBuZXcgU2VnbWVudFR5cGVzKCk7XG4gICAgICAgIGNvbnN0IHNlZ21lbnRzID0gdGhpcy5wYXJzZShkZWYsIHR5cGVzKTtcbiAgICAgICAgY29uc3QgbGVuID0gc2VnbWVudHMubGVuZ3RoO1xuICAgICAgICBjb25zdCBjYWxsYmFjayA9IChjaCkgPT4ge1xuICAgICAgICAgICAgY3VycmVudFN0YXRlID0gY3VycmVudFN0YXRlLmFwcGVuZChjaCwgcGF0dGVybik7XG4gICAgICAgIH07XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgICAgICAgICAgc2VnbWVudHNbaV0uZWFjaENoYXIoY2FsbGJhY2spO1xuICAgICAgICB9XG4gICAgICAgIGN1cnJlbnRTdGF0ZS50eXBlcyA9IHR5cGVzO1xuICAgICAgICBjdXJyZW50U3RhdGUuaXNFbmRwb2ludCA9IHRydWU7XG4gICAgfVxuICAgIGludGVycHJldChuYW1lKSB7XG4gICAgICAgIGNvbnN0IGludGVycHJldGF0aW9uID0gbmV3IEludGVycHJldGF0aW9uKCk7XG4gICAgICAgIGxldCBzdGF0ZXMgPSB0aGlzLmluaXRpYWxTdGF0ZXM7XG4gICAgICAgIGNvbnN0IGxlbiA9IG5hbWUubGVuZ3RoO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgICAgICBzdGF0ZXMgPSB0aGlzLmdldE5leHRTdGF0ZXMoc3RhdGVzLCBuYW1lLmNoYXJBdChpKSwgaW50ZXJwcmV0YXRpb24pO1xuICAgICAgICAgICAgaWYgKHN0YXRlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzdGF0ZXMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgICAgaWYgKGEuaXNFbmRwb2ludCkge1xuICAgICAgICAgICAgICAgIGlmICghYi5pc0VuZHBvaW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChiLmlzRW5kcG9pbnQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgYVR5cGVzID0gYS50eXBlcztcbiAgICAgICAgICAgIGNvbnN0IGJUeXBlcyA9IGIudHlwZXM7XG4gICAgICAgICAgICBpZiAoYVR5cGVzLnN0YXRpY3MgIT09IGJUeXBlcy5zdGF0aWNzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGJUeXBlcy5zdGF0aWNzIC0gYVR5cGVzLnN0YXRpY3M7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYVR5cGVzLmR5bmFtaWNzICE9PSBiVHlwZXMuZHluYW1pY3MpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYlR5cGVzLmR5bmFtaWNzIC0gYVR5cGVzLmR5bmFtaWNzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFUeXBlcy5zeW1ib2xzICE9PSBiVHlwZXMuc3ltYm9scykge1xuICAgICAgICAgICAgICAgIHJldHVybiBiVHlwZXMuc3ltYm9scyAtIGFUeXBlcy5zeW1ib2xzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoc3RhdGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXRlID0gc3RhdGVzWzBdO1xuICAgICAgICAgICAgaWYgKCFzdGF0ZS5jaGFyU3BlYy5pc1N5bWJvbCkge1xuICAgICAgICAgICAgICAgIGludGVycHJldGF0aW9uLm5leHQoc3RhdGUucGF0dGVybik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbnRlcnByZXRhdGlvbi5wYXR0ZXJuID0gc3RhdGUucGF0dGVybjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW50ZXJwcmV0YXRpb247XG4gICAgfVxuICAgIGdldE5leHRTdGF0ZXMoc3RhdGVzLCBjaCwgaW50ZXJwcmV0YXRpb24pIHtcbiAgICAgICAgLy8gVE9ETzogcmV1c2UgcHJlYWxsb2NhdGVkIGFycmF5c1xuICAgICAgICBjb25zdCBuZXh0U3RhdGVzID0gW107XG4gICAgICAgIGxldCBzdGF0ZSA9IG51bGw7XG4gICAgICAgIGNvbnN0IGxlbiA9IHN0YXRlcy5sZW5ndGg7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAgICAgIHN0YXRlID0gc3RhdGVzW2ldO1xuICAgICAgICAgICAgbmV4dFN0YXRlcy5wdXNoKC4uLnN0YXRlLmZpbmRNYXRjaGVzKGNoLCBpbnRlcnByZXRhdGlvbikpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXh0U3RhdGVzO1xuICAgIH1cbiAgICBwYXJzZShkZWYsIHR5cGVzKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xuICAgICAgICBjb25zdCBwYXR0ZXJuID0gZGVmLnBhdHRlcm47XG4gICAgICAgIGNvbnN0IGxlbiA9IHBhdHRlcm4ubGVuZ3RoO1xuICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgIGxldCBzdGFydCA9IDA7XG4gICAgICAgIGxldCBjID0gJyc7XG4gICAgICAgIHdoaWxlIChpIDwgbGVuKSB7XG4gICAgICAgICAgICBjID0gcGF0dGVybi5jaGFyQXQoaSk7XG4gICAgICAgICAgICBpZiAoIWRlZi5zeW1ib2xzLmluY2x1ZGVzKGMpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGkgPT09IHN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjID09PSAnUCcgJiYgcGF0dGVybi5zbGljZShpLCBpICsgNCkgPT09ICdQQVJUJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnQgPSBpID0gKGkgKyA0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKG5ldyBEeW5hbWljU2VnbWVudChkZWYuc3ltYm9scykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgKyt0eXBlcy5keW5hbWljcztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICsraTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgKytpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGkgIT09IHN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gobmV3IFN0YXRpY1NlZ21lbnQocGF0dGVybi5zbGljZShzdGFydCwgaSkpKTtcbiAgICAgICAgICAgICAgICArK3R5cGVzLnN0YXRpY3M7XG4gICAgICAgICAgICAgICAgc3RhcnQgPSBpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gobmV3IFN5bWJvbFNlZ21lbnQocGF0dGVybi5zbGljZShzdGFydCwgaSArIDEpKSk7XG4gICAgICAgICAgICAgICAgKyt0eXBlcy5zeW1ib2xzO1xuICAgICAgICAgICAgICAgIHN0YXJ0ID0gKytpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChzdGFydCAhPT0gaSkge1xuICAgICAgICAgICAgcmVzdWx0LnB1c2gobmV3IFN0YXRpY1NlZ21lbnQocGF0dGVybi5zbGljZShzdGFydCwgaSkpKTtcbiAgICAgICAgICAgICsrdHlwZXMuc3RhdGljcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbn1cbmZ1bmN0aW9uIHZhbGlkYXRlUHJvdG90eXBlKGhhbmRsZXIsIHBhdHRlcm5EZWZzKSB7XG4gICAgZm9yIChjb25zdCBkZWYgb2YgcGF0dGVybkRlZnMpIHtcbiAgICAgICAgLy8gbm90ZTogd2UncmUgaW50ZW50aW9uYWxseSBub3QgdGhyb3dpbmcgaGVyZVxuICAgICAgICBpZiAoIShkZWYucGF0dGVybiBpbiBoYW5kbGVyKSkge1xuICAgICAgICAgICAgUmVwb3J0ZXIud3JpdGUoNDAxLCBkZWYucGF0dGVybik7IC8vIFRPRE86IG9yZ2FuaXplIGVycm9yIGNvZGVzXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIGhhbmRsZXJbZGVmLnBhdHRlcm5dICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBSZXBvcnRlci53cml0ZSg0MDIsIGRlZi5wYXR0ZXJuKTsgLy8gVE9ETzogb3JnYW5pemUgZXJyb3IgY29kZXNcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCBjb25zdCBJQXR0cmlidXRlUGF0dGVybiA9IERJLmNyZWF0ZUludGVyZmFjZSgnSUF0dHJpYnV0ZVBhdHRlcm4nKS5ub0RlZmF1bHQoKTtcbmV4cG9ydCBmdW5jdGlvbiBhdHRyaWJ1dGVQYXR0ZXJuKC4uLnBhdHRlcm5EZWZzKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIGRlY29yYXRvcih0YXJnZXQpIHtcbiAgICAgICAgcmV0dXJuIEF0dHJpYnV0ZVBhdHRlcm4uZGVmaW5lKHBhdHRlcm5EZWZzLCB0YXJnZXQpO1xuICAgIH07XG59XG5leHBvcnQgY2xhc3MgQXR0cmlidXRlUGF0dGVyblJlc291cmNlRGVmaW5pdGlvbiB7XG4gICAgY29uc3RydWN0b3IoVHlwZSkge1xuICAgICAgICB0aGlzLlR5cGUgPSBUeXBlO1xuICAgICAgICB0aGlzLm5hbWUgPSAodm9pZCAwKTtcbiAgICB9XG4gICAgcmVnaXN0ZXIoY29udGFpbmVyKSB7XG4gICAgICAgIFJlZ2lzdHJhdGlvbi5zaW5nbGV0b24oSUF0dHJpYnV0ZVBhdHRlcm4sIHRoaXMuVHlwZSkucmVnaXN0ZXIoY29udGFpbmVyKTtcbiAgICB9XG59XG5leHBvcnQgY29uc3QgQXR0cmlidXRlUGF0dGVybiA9IE9iamVjdC5mcmVlemUoe1xuICAgIG5hbWU6IFByb3RvY29sLnJlc291cmNlLmtleUZvcignYXR0cmlidXRlLXBhdHRlcm4nKSxcbiAgICBkZWZpbml0aW9uQW5ub3RhdGlvbktleTogJ2F0dHJpYnV0ZS1wYXR0ZXJuLWRlZmluaXRpb25zJyxcbiAgICBkZWZpbmUocGF0dGVybkRlZnMsIFR5cGUpIHtcbiAgICAgICAgdmFsaWRhdGVQcm90b3R5cGUoVHlwZS5wcm90b3R5cGUsIHBhdHRlcm5EZWZzKTtcbiAgICAgICAgY29uc3QgZGVmaW5pdGlvbiA9IG5ldyBBdHRyaWJ1dGVQYXR0ZXJuUmVzb3VyY2VEZWZpbml0aW9uKFR5cGUpO1xuICAgICAgICBjb25zdCB7IG5hbWUsIGRlZmluaXRpb25Bbm5vdGF0aW9uS2V5IH0gPSBBdHRyaWJ1dGVQYXR0ZXJuO1xuICAgICAgICBNZXRhZGF0YS5kZWZpbmUobmFtZSwgZGVmaW5pdGlvbiwgVHlwZSk7XG4gICAgICAgIFByb3RvY29sLnJlc291cmNlLmFwcGVuZFRvKFR5cGUsIG5hbWUpO1xuICAgICAgICBQcm90b2NvbC5hbm5vdGF0aW9uLnNldChUeXBlLCBkZWZpbml0aW9uQW5ub3RhdGlvbktleSwgcGF0dGVybkRlZnMpO1xuICAgICAgICBQcm90b2NvbC5hbm5vdGF0aW9uLmFwcGVuZFRvKFR5cGUsIGRlZmluaXRpb25Bbm5vdGF0aW9uS2V5KTtcbiAgICAgICAgcmV0dXJuIFR5cGU7XG4gICAgfSxcbiAgICBnZXRQYXR0ZXJuRGVmaW5pdGlvbnMoVHlwZSkge1xuICAgICAgICByZXR1cm4gUHJvdG9jb2wuYW5ub3RhdGlvbi5nZXQoVHlwZSwgQXR0cmlidXRlUGF0dGVybi5kZWZpbml0aW9uQW5ub3RhdGlvbktleSk7XG4gICAgfVxufSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hdHRyaWJ1dGUtcGF0dGVybi5qcy5tYXAiLCJpbXBvcnQgeyBfX2RlY29yYXRlIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBBdHRyU3ludGF4IH0gZnJvbSAnLi9hc3QnO1xuaW1wb3J0IHsgYXR0cmlidXRlUGF0dGVybiB9IGZyb20gJy4vYXR0cmlidXRlLXBhdHRlcm4nO1xubGV0IERvdFNlcGFyYXRlZEF0dHJpYnV0ZVBhdHRlcm4gPSBjbGFzcyBEb3RTZXBhcmF0ZWRBdHRyaWJ1dGVQYXR0ZXJuIHtcbiAgICBbJ1BBUlQuUEFSVCddKHJhd05hbWUsIHJhd1ZhbHVlLCBwYXJ0cykge1xuICAgICAgICByZXR1cm4gbmV3IEF0dHJTeW50YXgocmF3TmFtZSwgcmF3VmFsdWUsIHBhcnRzWzBdLCBwYXJ0c1sxXSk7XG4gICAgfVxuICAgIFsnUEFSVC5QQVJULlBBUlQnXShyYXdOYW1lLCByYXdWYWx1ZSwgcGFydHMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBdHRyU3ludGF4KHJhd05hbWUsIHJhd1ZhbHVlLCBwYXJ0c1swXSwgcGFydHNbMl0pO1xuICAgIH1cbn07XG5Eb3RTZXBhcmF0ZWRBdHRyaWJ1dGVQYXR0ZXJuID0gX19kZWNvcmF0ZShbXG4gICAgYXR0cmlidXRlUGF0dGVybih7IHBhdHRlcm46ICdQQVJULlBBUlQnLCBzeW1ib2xzOiAnLicgfSwgeyBwYXR0ZXJuOiAnUEFSVC5QQVJULlBBUlQnLCBzeW1ib2xzOiAnLicgfSlcbl0sIERvdFNlcGFyYXRlZEF0dHJpYnV0ZVBhdHRlcm4pO1xuZXhwb3J0IHsgRG90U2VwYXJhdGVkQXR0cmlidXRlUGF0dGVybiB9O1xubGV0IFJlZkF0dHJpYnV0ZVBhdHRlcm4gPSBjbGFzcyBSZWZBdHRyaWJ1dGVQYXR0ZXJuIHtcbiAgICBbJ3JlZiddKHJhd05hbWUsIHJhd1ZhbHVlLCBwYXJ0cykge1xuICAgICAgICByZXR1cm4gbmV3IEF0dHJTeW50YXgocmF3TmFtZSwgcmF3VmFsdWUsICdlbGVtZW50JywgJ3JlZicpO1xuICAgIH1cbiAgICBbJ1BBUlQucmVmJ10ocmF3TmFtZSwgcmF3VmFsdWUsIHBhcnRzKSB7XG4gICAgICAgIHJldHVybiBuZXcgQXR0clN5bnRheChyYXdOYW1lLCByYXdWYWx1ZSwgcGFydHNbMF0sICdyZWYnKTtcbiAgICB9XG59O1xuUmVmQXR0cmlidXRlUGF0dGVybiA9IF9fZGVjb3JhdGUoW1xuICAgIGF0dHJpYnV0ZVBhdHRlcm4oeyBwYXR0ZXJuOiAncmVmJywgc3ltYm9sczogJycgfSwgeyBwYXR0ZXJuOiAnUEFSVC5yZWYnLCBzeW1ib2xzOiAnLicgfSlcbl0sIFJlZkF0dHJpYnV0ZVBhdHRlcm4pO1xuZXhwb3J0IHsgUmVmQXR0cmlidXRlUGF0dGVybiB9O1xubGV0IENvbG9uUHJlZml4ZWRCaW5kQXR0cmlidXRlUGF0dGVybiA9IGNsYXNzIENvbG9uUHJlZml4ZWRCaW5kQXR0cmlidXRlUGF0dGVybiB7XG4gICAgWyc6UEFSVCddKHJhd05hbWUsIHJhd1ZhbHVlLCBwYXJ0cykge1xuICAgICAgICByZXR1cm4gbmV3IEF0dHJTeW50YXgocmF3TmFtZSwgcmF3VmFsdWUsIHBhcnRzWzBdLCAnYmluZCcpO1xuICAgIH1cbn07XG5Db2xvblByZWZpeGVkQmluZEF0dHJpYnV0ZVBhdHRlcm4gPSBfX2RlY29yYXRlKFtcbiAgICBhdHRyaWJ1dGVQYXR0ZXJuKHsgcGF0dGVybjogJzpQQVJUJywgc3ltYm9sczogJzonIH0pXG5dLCBDb2xvblByZWZpeGVkQmluZEF0dHJpYnV0ZVBhdHRlcm4pO1xuZXhwb3J0IHsgQ29sb25QcmVmaXhlZEJpbmRBdHRyaWJ1dGVQYXR0ZXJuIH07XG5sZXQgQXRQcmVmaXhlZFRyaWdnZXJBdHRyaWJ1dGVQYXR0ZXJuID0gY2xhc3MgQXRQcmVmaXhlZFRyaWdnZXJBdHRyaWJ1dGVQYXR0ZXJuIHtcbiAgICBbJ0BQQVJUJ10ocmF3TmFtZSwgcmF3VmFsdWUsIHBhcnRzKSB7XG4gICAgICAgIHJldHVybiBuZXcgQXR0clN5bnRheChyYXdOYW1lLCByYXdWYWx1ZSwgcGFydHNbMF0sICd0cmlnZ2VyJyk7XG4gICAgfVxufTtcbkF0UHJlZml4ZWRUcmlnZ2VyQXR0cmlidXRlUGF0dGVybiA9IF9fZGVjb3JhdGUoW1xuICAgIGF0dHJpYnV0ZVBhdHRlcm4oeyBwYXR0ZXJuOiAnQFBBUlQnLCBzeW1ib2xzOiAnQCcgfSlcbl0sIEF0UHJlZml4ZWRUcmlnZ2VyQXR0cmlidXRlUGF0dGVybik7XG5leHBvcnQgeyBBdFByZWZpeGVkVHJpZ2dlckF0dHJpYnV0ZVBhdHRlcm4gfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWF0dHJpYnV0ZS1wYXR0ZXJucy5qcy5tYXAiLCJpbXBvcnQgeyBjYW1lbENhc2UsIFJlZ2lzdHJhdGlvbiwgbWVyZ2VBcnJheXMsIFByb3RvY29sLCBmaXJzdERlZmluZWQsIE1ldGFkYXRhIH0gZnJvbSAnQGF1cmVsaWEva2VybmVsJztcbmltcG9ydCB7IHJlZ2lzdGVyQWxpYXNlcyB9IGZyb20gJ0BhdXJlbGlhL3J1bnRpbWUnO1xuZXhwb3J0IGZ1bmN0aW9uIGJpbmRpbmdDb21tYW5kKG5hbWVPckRlZmluaXRpb24pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICByZXR1cm4gQmluZGluZ0NvbW1hbmQuZGVmaW5lKG5hbWVPckRlZmluaXRpb24sIHRhcmdldCk7XG4gICAgfTtcbn1cbmV4cG9ydCBjbGFzcyBCaW5kaW5nQ29tbWFuZERlZmluaXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKFR5cGUsIG5hbWUsIGFsaWFzZXMsIGtleSwgdHlwZSkge1xuICAgICAgICB0aGlzLlR5cGUgPSBUeXBlO1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLmFsaWFzZXMgPSBhbGlhc2VzO1xuICAgICAgICB0aGlzLmtleSA9IGtleTtcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZShuYW1lT3JEZWYsIFR5cGUpIHtcbiAgICAgICAgbGV0IG5hbWU7XG4gICAgICAgIGxldCBkZWY7XG4gICAgICAgIGlmICh0eXBlb2YgbmFtZU9yRGVmID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgbmFtZSA9IG5hbWVPckRlZjtcbiAgICAgICAgICAgIGRlZiA9IHsgbmFtZSB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbmFtZSA9IG5hbWVPckRlZi5uYW1lO1xuICAgICAgICAgICAgZGVmID0gbmFtZU9yRGVmO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgQmluZGluZ0NvbW1hbmREZWZpbml0aW9uKFR5cGUsIGZpcnN0RGVmaW5lZChCaW5kaW5nQ29tbWFuZC5nZXRBbm5vdGF0aW9uKFR5cGUsICduYW1lJyksIG5hbWUpLCBtZXJnZUFycmF5cyhCaW5kaW5nQ29tbWFuZC5nZXRBbm5vdGF0aW9uKFR5cGUsICdhbGlhc2VzJyksIGRlZi5hbGlhc2VzLCBUeXBlLmFsaWFzZXMpLCBCaW5kaW5nQ29tbWFuZC5rZXlGcm9tKG5hbWUpLCBmaXJzdERlZmluZWQoQmluZGluZ0NvbW1hbmQuZ2V0QW5ub3RhdGlvbihUeXBlLCAndHlwZScpLCBkZWYudHlwZSwgVHlwZS50eXBlLCBudWxsKSk7XG4gICAgfVxuICAgIHJlZ2lzdGVyKGNvbnRhaW5lcikge1xuICAgICAgICBjb25zdCB7IFR5cGUsIGtleSwgYWxpYXNlcyB9ID0gdGhpcztcbiAgICAgICAgUmVnaXN0cmF0aW9uLnNpbmdsZXRvbihrZXksIFR5cGUpLnJlZ2lzdGVyKGNvbnRhaW5lcik7XG4gICAgICAgIFJlZ2lzdHJhdGlvbi5hbGlhc1RvKGtleSwgVHlwZSkucmVnaXN0ZXIoY29udGFpbmVyKTtcbiAgICAgICAgcmVnaXN0ZXJBbGlhc2VzKGFsaWFzZXMsIEJpbmRpbmdDb21tYW5kLCBrZXksIGNvbnRhaW5lcik7XG4gICAgfVxufVxuZXhwb3J0IGNvbnN0IEJpbmRpbmdDb21tYW5kID0ge1xuICAgIG5hbWU6IFByb3RvY29sLnJlc291cmNlLmtleUZvcignYmluZGluZy1jb21tYW5kJyksXG4gICAga2V5RnJvbShuYW1lKSB7XG4gICAgICAgIHJldHVybiBgJHtCaW5kaW5nQ29tbWFuZC5uYW1lfToke25hbWV9YDtcbiAgICB9LFxuICAgIGlzVHlwZSh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nICYmIE1ldGFkYXRhLmhhc093bihCaW5kaW5nQ29tbWFuZC5uYW1lLCB2YWx1ZSk7XG4gICAgfSxcbiAgICBkZWZpbmUobmFtZU9yRGVmLCBUeXBlKSB7XG4gICAgICAgIGNvbnN0IGRlZmluaXRpb24gPSBCaW5kaW5nQ29tbWFuZERlZmluaXRpb24uY3JlYXRlKG5hbWVPckRlZiwgVHlwZSk7XG4gICAgICAgIE1ldGFkYXRhLmRlZmluZShCaW5kaW5nQ29tbWFuZC5uYW1lLCBkZWZpbml0aW9uLCBkZWZpbml0aW9uLlR5cGUpO1xuICAgICAgICBNZXRhZGF0YS5kZWZpbmUoQmluZGluZ0NvbW1hbmQubmFtZSwgZGVmaW5pdGlvbiwgZGVmaW5pdGlvbik7XG4gICAgICAgIFByb3RvY29sLnJlc291cmNlLmFwcGVuZFRvKFR5cGUsIEJpbmRpbmdDb21tYW5kLm5hbWUpO1xuICAgICAgICByZXR1cm4gZGVmaW5pdGlvbi5UeXBlO1xuICAgIH0sXG4gICAgZ2V0RGVmaW5pdGlvbihUeXBlKSB7XG4gICAgICAgIGNvbnN0IGRlZiA9IE1ldGFkYXRhLmdldE93bihCaW5kaW5nQ29tbWFuZC5uYW1lLCBUeXBlKTtcbiAgICAgICAgaWYgKGRlZiA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE5vIGRlZmluaXRpb24gZm91bmQgZm9yIHR5cGUgJHtUeXBlLm5hbWV9YCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRlZjtcbiAgICB9LFxuICAgIGFubm90YXRlKFR5cGUsIHByb3AsIHZhbHVlKSB7XG4gICAgICAgIE1ldGFkYXRhLmRlZmluZShQcm90b2NvbC5hbm5vdGF0aW9uLmtleUZvcihwcm9wKSwgdmFsdWUsIFR5cGUpO1xuICAgIH0sXG4gICAgZ2V0QW5ub3RhdGlvbihUeXBlLCBwcm9wKSB7XG4gICAgICAgIHJldHVybiBNZXRhZGF0YS5nZXRPd24oUHJvdG9jb2wuYW5ub3RhdGlvbi5rZXlGb3IocHJvcCksIFR5cGUpO1xuICAgIH0sXG59O1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRhcmdldChiaW5kaW5nLCBtYWtlQ2FtZWxDYXNlKSB7XG4gICAgaWYgKGJpbmRpbmcuZmxhZ3MgJiAyNTYgLyogaXNCaW5kaW5nICovKSB7XG4gICAgICAgIHJldHVybiBiaW5kaW5nLmJpbmRhYmxlLnByb3BOYW1lO1xuICAgIH1cbiAgICBlbHNlIGlmIChtYWtlQ2FtZWxDYXNlKSB7XG4gICAgICAgIHJldHVybiBjYW1lbENhc2UoYmluZGluZy5zeW50YXgudGFyZ2V0KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBiaW5kaW5nLnN5bnRheC50YXJnZXQ7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YmluZGluZy1jb21tYW5kLmpzLm1hcCIsImltcG9ydCB7IF9fZGVjb3JhdGUgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IEJpbmRpbmdNb2RlLCBDYWxsQmluZGluZ0luc3RydWN0aW9uLCBGcm9tVmlld0JpbmRpbmdJbnN0cnVjdGlvbiwgSXRlcmF0b3JCaW5kaW5nSW5zdHJ1Y3Rpb24sIE9uZVRpbWVCaW5kaW5nSW5zdHJ1Y3Rpb24sIFRvVmlld0JpbmRpbmdJbnN0cnVjdGlvbiwgVHdvV2F5QmluZGluZ0luc3RydWN0aW9uLCB9IGZyb20gJ0BhdXJlbGlhL3J1bnRpbWUnO1xuaW1wb3J0IHsgYmluZGluZ0NvbW1hbmQsIGdldFRhcmdldCwgfSBmcm9tICcuL2JpbmRpbmctY29tbWFuZCc7XG5pbXBvcnQgeyBCaW5kaW5nU3ltYm9sLCB9IGZyb20gJy4vc2VtYW50aWMtbW9kZWwnO1xubGV0IE9uZVRpbWVCaW5kaW5nQ29tbWFuZCA9IGNsYXNzIE9uZVRpbWVCaW5kaW5nQ29tbWFuZCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuYmluZGluZ1R5cGUgPSA0OSAvKiBPbmVUaW1lQ29tbWFuZCAqLztcbiAgICB9XG4gICAgY29tcGlsZShiaW5kaW5nKSB7XG4gICAgICAgIHJldHVybiBuZXcgT25lVGltZUJpbmRpbmdJbnN0cnVjdGlvbihiaW5kaW5nLmV4cHJlc3Npb24sIGdldFRhcmdldChiaW5kaW5nLCBmYWxzZSkpO1xuICAgIH1cbn07XG5PbmVUaW1lQmluZGluZ0NvbW1hbmQgPSBfX2RlY29yYXRlKFtcbiAgICBiaW5kaW5nQ29tbWFuZCgnb25lLXRpbWUnKVxuXSwgT25lVGltZUJpbmRpbmdDb21tYW5kKTtcbmV4cG9ydCB7IE9uZVRpbWVCaW5kaW5nQ29tbWFuZCB9O1xubGV0IFRvVmlld0JpbmRpbmdDb21tYW5kID0gY2xhc3MgVG9WaWV3QmluZGluZ0NvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmJpbmRpbmdUeXBlID0gNTAgLyogVG9WaWV3Q29tbWFuZCAqLztcbiAgICB9XG4gICAgY29tcGlsZShiaW5kaW5nKSB7XG4gICAgICAgIHJldHVybiBuZXcgVG9WaWV3QmluZGluZ0luc3RydWN0aW9uKGJpbmRpbmcuZXhwcmVzc2lvbiwgZ2V0VGFyZ2V0KGJpbmRpbmcsIGZhbHNlKSk7XG4gICAgfVxufTtcblRvVmlld0JpbmRpbmdDb21tYW5kID0gX19kZWNvcmF0ZShbXG4gICAgYmluZGluZ0NvbW1hbmQoJ3RvLXZpZXcnKVxuXSwgVG9WaWV3QmluZGluZ0NvbW1hbmQpO1xuZXhwb3J0IHsgVG9WaWV3QmluZGluZ0NvbW1hbmQgfTtcbmxldCBGcm9tVmlld0JpbmRpbmdDb21tYW5kID0gY2xhc3MgRnJvbVZpZXdCaW5kaW5nQ29tbWFuZCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuYmluZGluZ1R5cGUgPSA1MSAvKiBGcm9tVmlld0NvbW1hbmQgKi87XG4gICAgfVxuICAgIGNvbXBpbGUoYmluZGluZykge1xuICAgICAgICByZXR1cm4gbmV3IEZyb21WaWV3QmluZGluZ0luc3RydWN0aW9uKGJpbmRpbmcuZXhwcmVzc2lvbiwgZ2V0VGFyZ2V0KGJpbmRpbmcsIGZhbHNlKSk7XG4gICAgfVxufTtcbkZyb21WaWV3QmluZGluZ0NvbW1hbmQgPSBfX2RlY29yYXRlKFtcbiAgICBiaW5kaW5nQ29tbWFuZCgnZnJvbS12aWV3Jylcbl0sIEZyb21WaWV3QmluZGluZ0NvbW1hbmQpO1xuZXhwb3J0IHsgRnJvbVZpZXdCaW5kaW5nQ29tbWFuZCB9O1xubGV0IFR3b1dheUJpbmRpbmdDb21tYW5kID0gY2xhc3MgVHdvV2F5QmluZGluZ0NvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmJpbmRpbmdUeXBlID0gNTIgLyogVHdvV2F5Q29tbWFuZCAqLztcbiAgICB9XG4gICAgY29tcGlsZShiaW5kaW5nKSB7XG4gICAgICAgIHJldHVybiBuZXcgVHdvV2F5QmluZGluZ0luc3RydWN0aW9uKGJpbmRpbmcuZXhwcmVzc2lvbiwgZ2V0VGFyZ2V0KGJpbmRpbmcsIGZhbHNlKSk7XG4gICAgfVxufTtcblR3b1dheUJpbmRpbmdDb21tYW5kID0gX19kZWNvcmF0ZShbXG4gICAgYmluZGluZ0NvbW1hbmQoJ3R3by13YXknKVxuXSwgVHdvV2F5QmluZGluZ0NvbW1hbmQpO1xuZXhwb3J0IHsgVHdvV2F5QmluZGluZ0NvbW1hbmQgfTtcbmxldCBEZWZhdWx0QmluZGluZ0NvbW1hbmQgPSBjbGFzcyBEZWZhdWx0QmluZGluZ0NvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmJpbmRpbmdUeXBlID0gNTMgLyogQmluZENvbW1hbmQgKi87XG4gICAgfVxuICAgIGNvbXBpbGUoYmluZGluZykge1xuICAgICAgICBsZXQgbW9kZSA9IEJpbmRpbmdNb2RlLmRlZmF1bHQ7XG4gICAgICAgIGlmIChiaW5kaW5nIGluc3RhbmNlb2YgQmluZGluZ1N5bWJvbCkge1xuICAgICAgICAgICAgbW9kZSA9IGJpbmRpbmcuYmluZGFibGUubW9kZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbW1hbmQgPSBiaW5kaW5nLnN5bnRheC5jb21tYW5kO1xuICAgICAgICAgICAgc3dpdGNoIChjb21tYW5kKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnYmluZCc6XG4gICAgICAgICAgICAgICAgY2FzZSAndG8tdmlldyc6XG4gICAgICAgICAgICAgICAgICAgIG1vZGUgPSBCaW5kaW5nTW9kZS50b1ZpZXc7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ29uZS10aW1lJzpcbiAgICAgICAgICAgICAgICAgICAgbW9kZSA9IEJpbmRpbmdNb2RlLm9uZVRpbWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2Zyb20tdmlldyc6XG4gICAgICAgICAgICAgICAgICAgIG1vZGUgPSBCaW5kaW5nTW9kZS5mcm9tVmlldztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndHdvLXdheSc6XG4gICAgICAgICAgICAgICAgICAgIG1vZGUgPSBCaW5kaW5nTW9kZS50d29XYXk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHN3aXRjaCAobW9kZSkge1xuICAgICAgICAgICAgY2FzZSBCaW5kaW5nTW9kZS5kZWZhdWx0OlxuICAgICAgICAgICAgY2FzZSBCaW5kaW5nTW9kZS50b1ZpZXc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFRvVmlld0JpbmRpbmdDb21tYW5kLnByb3RvdHlwZS5jb21waWxlKGJpbmRpbmcpO1xuICAgICAgICAgICAgY2FzZSBCaW5kaW5nTW9kZS5vbmVUaW1lOlxuICAgICAgICAgICAgICAgIHJldHVybiBPbmVUaW1lQmluZGluZ0NvbW1hbmQucHJvdG90eXBlLmNvbXBpbGUoYmluZGluZyk7XG4gICAgICAgICAgICBjYXNlIEJpbmRpbmdNb2RlLmZyb21WaWV3OlxuICAgICAgICAgICAgICAgIHJldHVybiBGcm9tVmlld0JpbmRpbmdDb21tYW5kLnByb3RvdHlwZS5jb21waWxlKGJpbmRpbmcpO1xuICAgICAgICAgICAgY2FzZSBCaW5kaW5nTW9kZS50d29XYXk6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFR3b1dheUJpbmRpbmdDb21tYW5kLnByb3RvdHlwZS5jb21waWxlKGJpbmRpbmcpO1xuICAgICAgICB9XG4gICAgfVxufTtcbkRlZmF1bHRCaW5kaW5nQ29tbWFuZCA9IF9fZGVjb3JhdGUoW1xuICAgIGJpbmRpbmdDb21tYW5kKCdiaW5kJylcbl0sIERlZmF1bHRCaW5kaW5nQ29tbWFuZCk7XG5leHBvcnQgeyBEZWZhdWx0QmluZGluZ0NvbW1hbmQgfTtcbmxldCBDYWxsQmluZGluZ0NvbW1hbmQgPSBjbGFzcyBDYWxsQmluZGluZ0NvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmJpbmRpbmdUeXBlID0gMTUzIC8qIENhbGxDb21tYW5kICovO1xuICAgIH1cbiAgICBjb21waWxlKGJpbmRpbmcpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDYWxsQmluZGluZ0luc3RydWN0aW9uKGJpbmRpbmcuZXhwcmVzc2lvbiwgZ2V0VGFyZ2V0KGJpbmRpbmcsIHRydWUpKTtcbiAgICB9XG59O1xuQ2FsbEJpbmRpbmdDb21tYW5kID0gX19kZWNvcmF0ZShbXG4gICAgYmluZGluZ0NvbW1hbmQoJ2NhbGwnKVxuXSwgQ2FsbEJpbmRpbmdDb21tYW5kKTtcbmV4cG9ydCB7IENhbGxCaW5kaW5nQ29tbWFuZCB9O1xubGV0IEZvckJpbmRpbmdDb21tYW5kID0gY2xhc3MgRm9yQmluZGluZ0NvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmJpbmRpbmdUeXBlID0gNTM5IC8qIEZvckNvbW1hbmQgKi87XG4gICAgfVxuICAgIGNvbXBpbGUoYmluZGluZykge1xuICAgICAgICByZXR1cm4gbmV3IEl0ZXJhdG9yQmluZGluZ0luc3RydWN0aW9uKGJpbmRpbmcuZXhwcmVzc2lvbiwgZ2V0VGFyZ2V0KGJpbmRpbmcsIGZhbHNlKSk7XG4gICAgfVxufTtcbkZvckJpbmRpbmdDb21tYW5kID0gX19kZWNvcmF0ZShbXG4gICAgYmluZGluZ0NvbW1hbmQoJ2ZvcicpXG5dLCBGb3JCaW5kaW5nQ29tbWFuZCk7XG5leHBvcnQgeyBGb3JCaW5kaW5nQ29tbWFuZCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YmluZGluZy1jb21tYW5kcy5qcy5tYXAiLCJleHBvcnQgZnVuY3Rpb24gdW5lc2NhcGVDb2RlKGNvZGUpIHtcbiAgICBzd2l0Y2ggKGNvZGUpIHtcbiAgICAgICAgY2FzZSA5OCAvKiBMb3dlckIgKi86IHJldHVybiA4IC8qIEJhY2tzcGFjZSAqLztcbiAgICAgICAgY2FzZSAxMTYgLyogTG93ZXJUICovOiByZXR1cm4gOSAvKiBUYWIgKi87XG4gICAgICAgIGNhc2UgMTEwIC8qIExvd2VyTiAqLzogcmV0dXJuIDEwIC8qIExpbmVGZWVkICovO1xuICAgICAgICBjYXNlIDExOCAvKiBMb3dlclYgKi86IHJldHVybiAxMSAvKiBWZXJ0aWNhbFRhYiAqLztcbiAgICAgICAgY2FzZSAxMDIgLyogTG93ZXJGICovOiByZXR1cm4gMTIgLyogRm9ybUZlZWQgKi87XG4gICAgICAgIGNhc2UgMTE0IC8qIExvd2VyUiAqLzogcmV0dXJuIDEzIC8qIENhcnJpYWdlUmV0dXJuICovO1xuICAgICAgICBjYXNlIDM0IC8qIERvdWJsZVF1b3RlICovOiByZXR1cm4gMzQgLyogRG91YmxlUXVvdGUgKi87XG4gICAgICAgIGNhc2UgMzkgLyogU2luZ2xlUXVvdGUgKi86IHJldHVybiAzOSAvKiBTaW5nbGVRdW90ZSAqLztcbiAgICAgICAgY2FzZSA5MiAvKiBCYWNrc2xhc2ggKi86IHJldHVybiA5MiAvKiBCYWNrc2xhc2ggKi87XG4gICAgICAgIGRlZmF1bHQ6IHJldHVybiBjb2RlO1xuICAgIH1cbn1cbmV4cG9ydCB2YXIgQWNjZXNzO1xuKGZ1bmN0aW9uIChBY2Nlc3MpIHtcbiAgICBBY2Nlc3NbQWNjZXNzW1wiUmVzZXRcIl0gPSAwXSA9IFwiUmVzZXRcIjtcbiAgICBBY2Nlc3NbQWNjZXNzW1wiQW5jZXN0b3JcIl0gPSA1MTFdID0gXCJBbmNlc3RvclwiO1xuICAgIEFjY2Vzc1tBY2Nlc3NbXCJUaGlzXCJdID0gNTEyXSA9IFwiVGhpc1wiO1xuICAgIEFjY2Vzc1tBY2Nlc3NbXCJTY29wZVwiXSA9IDEwMjRdID0gXCJTY29wZVwiO1xuICAgIEFjY2Vzc1tBY2Nlc3NbXCJNZW1iZXJcIl0gPSAyMDQ4XSA9IFwiTWVtYmVyXCI7XG4gICAgQWNjZXNzW0FjY2Vzc1tcIktleWVkXCJdID0gNDA5Nl0gPSBcIktleWVkXCI7XG59KShBY2Nlc3MgfHwgKEFjY2VzcyA9IHt9KSk7XG5leHBvcnQgdmFyIFByZWNlZGVuY2U7XG4oZnVuY3Rpb24gKFByZWNlZGVuY2UpIHtcbiAgICBQcmVjZWRlbmNlW1ByZWNlZGVuY2VbXCJWYXJpYWRpY1wiXSA9IDYxXSA9IFwiVmFyaWFkaWNcIjtcbiAgICBQcmVjZWRlbmNlW1ByZWNlZGVuY2VbXCJBc3NpZ25cIl0gPSA2Ml0gPSBcIkFzc2lnblwiO1xuICAgIFByZWNlZGVuY2VbUHJlY2VkZW5jZVtcIkNvbmRpdGlvbmFsXCJdID0gNjNdID0gXCJDb25kaXRpb25hbFwiO1xuICAgIFByZWNlZGVuY2VbUHJlY2VkZW5jZVtcIkxvZ2ljYWxPUlwiXSA9IDY0XSA9IFwiTG9naWNhbE9SXCI7XG4gICAgUHJlY2VkZW5jZVtQcmVjZWRlbmNlW1wiTG9naWNhbEFORFwiXSA9IDEyOF0gPSBcIkxvZ2ljYWxBTkRcIjtcbiAgICBQcmVjZWRlbmNlW1ByZWNlZGVuY2VbXCJFcXVhbGl0eVwiXSA9IDE5Ml0gPSBcIkVxdWFsaXR5XCI7XG4gICAgUHJlY2VkZW5jZVtQcmVjZWRlbmNlW1wiUmVsYXRpb25hbFwiXSA9IDI1Nl0gPSBcIlJlbGF0aW9uYWxcIjtcbiAgICBQcmVjZWRlbmNlW1ByZWNlZGVuY2VbXCJBZGRpdGl2ZVwiXSA9IDMyMF0gPSBcIkFkZGl0aXZlXCI7XG4gICAgUHJlY2VkZW5jZVtQcmVjZWRlbmNlW1wiTXVsdGlwbGljYXRpdmVcIl0gPSAzODRdID0gXCJNdWx0aXBsaWNhdGl2ZVwiO1xuICAgIFByZWNlZGVuY2VbUHJlY2VkZW5jZVtcIkJpbmFyeVwiXSA9IDQ0OF0gPSBcIkJpbmFyeVwiO1xuICAgIFByZWNlZGVuY2VbUHJlY2VkZW5jZVtcIkxlZnRIYW5kU2lkZVwiXSA9IDQ0OV0gPSBcIkxlZnRIYW5kU2lkZVwiO1xuICAgIFByZWNlZGVuY2VbUHJlY2VkZW5jZVtcIlByaW1hcnlcIl0gPSA0NTBdID0gXCJQcmltYXJ5XCI7XG4gICAgUHJlY2VkZW5jZVtQcmVjZWRlbmNlW1wiVW5hcnlcIl0gPSA0NTFdID0gXCJVbmFyeVwiO1xufSkoUHJlY2VkZW5jZSB8fCAoUHJlY2VkZW5jZSA9IHt9KSk7XG4vKiogQGludGVybmFsICovXG5leHBvcnQgdmFyIFRva2VuO1xuKGZ1bmN0aW9uIChUb2tlbikge1xuICAgIFRva2VuW1Rva2VuW1wiRU9GXCJdID0gMTU3Mjg2NF0gPSBcIkVPRlwiO1xuICAgIFRva2VuW1Rva2VuW1wiRXhwcmVzc2lvblRlcm1pbmFsXCJdID0gMTA0ODU3Nl0gPSBcIkV4cHJlc3Npb25UZXJtaW5hbFwiO1xuICAgIFRva2VuW1Rva2VuW1wiQWNjZXNzU2NvcGVUZXJtaW5hbFwiXSA9IDUyNDI4OF0gPSBcIkFjY2Vzc1Njb3BlVGVybWluYWxcIjtcbiAgICBUb2tlbltUb2tlbltcIkNsb3NpbmdUb2tlblwiXSA9IDI2MjE0NF0gPSBcIkNsb3NpbmdUb2tlblwiO1xuICAgIFRva2VuW1Rva2VuW1wiT3BlbmluZ1Rva2VuXCJdID0gMTMxMDcyXSA9IFwiT3BlbmluZ1Rva2VuXCI7XG4gICAgVG9rZW5bVG9rZW5bXCJCaW5hcnlPcFwiXSA9IDY1NTM2XSA9IFwiQmluYXJ5T3BcIjtcbiAgICBUb2tlbltUb2tlbltcIlVuYXJ5T3BcIl0gPSAzMjc2OF0gPSBcIlVuYXJ5T3BcIjtcbiAgICBUb2tlbltUb2tlbltcIkxlZnRIYW5kU2lkZVwiXSA9IDE2Mzg0XSA9IFwiTGVmdEhhbmRTaWRlXCI7XG4gICAgVG9rZW5bVG9rZW5bXCJTdHJpbmdPck51bWVyaWNMaXRlcmFsXCJdID0gMTIyODhdID0gXCJTdHJpbmdPck51bWVyaWNMaXRlcmFsXCI7XG4gICAgVG9rZW5bVG9rZW5bXCJOdW1lcmljTGl0ZXJhbFwiXSA9IDgxOTJdID0gXCJOdW1lcmljTGl0ZXJhbFwiO1xuICAgIFRva2VuW1Rva2VuW1wiU3RyaW5nTGl0ZXJhbFwiXSA9IDQwOTZdID0gXCJTdHJpbmdMaXRlcmFsXCI7XG4gICAgVG9rZW5bVG9rZW5bXCJJZGVudGlmaWVyTmFtZVwiXSA9IDMwNzJdID0gXCJJZGVudGlmaWVyTmFtZVwiO1xuICAgIFRva2VuW1Rva2VuW1wiS2V5d29yZFwiXSA9IDIwNDhdID0gXCJLZXl3b3JkXCI7XG4gICAgVG9rZW5bVG9rZW5bXCJJZGVudGlmaWVyXCJdID0gMTAyNF0gPSBcIklkZW50aWZpZXJcIjtcbiAgICBUb2tlbltUb2tlbltcIkNvbnRleHR1YWxcIl0gPSA1MTJdID0gXCJDb250ZXh0dWFsXCI7XG4gICAgVG9rZW5bVG9rZW5bXCJQcmVjZWRlbmNlXCJdID0gNDQ4XSA9IFwiUHJlY2VkZW5jZVwiO1xuICAgIFRva2VuW1Rva2VuW1wiVHlwZVwiXSA9IDYzXSA9IFwiVHlwZVwiO1xuICAgIFRva2VuW1Rva2VuW1wiRmFsc2VLZXl3b3JkXCJdID0gMjA0OF0gPSBcIkZhbHNlS2V5d29yZFwiO1xuICAgIFRva2VuW1Rva2VuW1wiVHJ1ZUtleXdvcmRcIl0gPSAyMDQ5XSA9IFwiVHJ1ZUtleXdvcmRcIjtcbiAgICBUb2tlbltUb2tlbltcIk51bGxLZXl3b3JkXCJdID0gMjA1MF0gPSBcIk51bGxLZXl3b3JkXCI7XG4gICAgVG9rZW5bVG9rZW5bXCJVbmRlZmluZWRLZXl3b3JkXCJdID0gMjA1MV0gPSBcIlVuZGVmaW5lZEtleXdvcmRcIjtcbiAgICBUb2tlbltUb2tlbltcIlRoaXNTY29wZVwiXSA9IDMwNzZdID0gXCJUaGlzU2NvcGVcIjtcbiAgICBUb2tlbltUb2tlbltcIlBhcmVudFNjb3BlXCJdID0gMzA3N10gPSBcIlBhcmVudFNjb3BlXCI7XG4gICAgVG9rZW5bVG9rZW5bXCJPcGVuUGFyZW5cIl0gPSA2NzE3NTBdID0gXCJPcGVuUGFyZW5cIjtcbiAgICBUb2tlbltUb2tlbltcIk9wZW5CcmFjZVwiXSA9IDEzMTA3OV0gPSBcIk9wZW5CcmFjZVwiO1xuICAgIFRva2VuW1Rva2VuW1wiRG90XCJdID0gMTYzOTJdID0gXCJEb3RcIjtcbiAgICBUb2tlbltUb2tlbltcIkNsb3NlQnJhY2VcIl0gPSAxODM1MDE3XSA9IFwiQ2xvc2VCcmFjZVwiO1xuICAgIFRva2VuW1Rva2VuW1wiQ2xvc2VQYXJlblwiXSA9IDE4MzUwMThdID0gXCJDbG9zZVBhcmVuXCI7XG4gICAgVG9rZW5bVG9rZW5bXCJDb21tYVwiXSA9IDE1NzI4NzVdID0gXCJDb21tYVwiO1xuICAgIFRva2VuW1Rva2VuW1wiT3BlbkJyYWNrZXRcIl0gPSA2NzE3NTZdID0gXCJPcGVuQnJhY2tldFwiO1xuICAgIFRva2VuW1Rva2VuW1wiQ2xvc2VCcmFja2V0XCJdID0gMTgzNTAyMV0gPSBcIkNsb3NlQnJhY2tldFwiO1xuICAgIFRva2VuW1Rva2VuW1wiQ29sb25cIl0gPSAxNTcyODc4XSA9IFwiQ29sb25cIjtcbiAgICBUb2tlbltUb2tlbltcIlF1ZXN0aW9uXCJdID0gMTU3Mjg3OV0gPSBcIlF1ZXN0aW9uXCI7XG4gICAgVG9rZW5bVG9rZW5bXCJBbXBlcnNhbmRcIl0gPSAxNTcyODgwXSA9IFwiQW1wZXJzYW5kXCI7XG4gICAgVG9rZW5bVG9rZW5bXCJCYXJcIl0gPSAxNTcyODgzXSA9IFwiQmFyXCI7XG4gICAgVG9rZW5bVG9rZW5bXCJCYXJCYXJcIl0gPSAxNjM4NTQ4XSA9IFwiQmFyQmFyXCI7XG4gICAgVG9rZW5bVG9rZW5bXCJBbXBlcnNhbmRBbXBlcnNhbmRcIl0gPSAxNjM4NjEzXSA9IFwiQW1wZXJzYW5kQW1wZXJzYW5kXCI7XG4gICAgVG9rZW5bVG9rZW5bXCJFcXVhbHNFcXVhbHNcIl0gPSAxNjM4Njc4XSA9IFwiRXF1YWxzRXF1YWxzXCI7XG4gICAgVG9rZW5bVG9rZW5bXCJFeGNsYW1hdGlvbkVxdWFsc1wiXSA9IDE2Mzg2NzldID0gXCJFeGNsYW1hdGlvbkVxdWFsc1wiO1xuICAgIFRva2VuW1Rva2VuW1wiRXF1YWxzRXF1YWxzRXF1YWxzXCJdID0gMTYzODY4MF0gPSBcIkVxdWFsc0VxdWFsc0VxdWFsc1wiO1xuICAgIFRva2VuW1Rva2VuW1wiRXhjbGFtYXRpb25FcXVhbHNFcXVhbHNcIl0gPSAxNjM4NjgxXSA9IFwiRXhjbGFtYXRpb25FcXVhbHNFcXVhbHNcIjtcbiAgICBUb2tlbltUb2tlbltcIkxlc3NUaGFuXCJdID0gMTYzODc0Nl0gPSBcIkxlc3NUaGFuXCI7XG4gICAgVG9rZW5bVG9rZW5bXCJHcmVhdGVyVGhhblwiXSA9IDE2Mzg3NDddID0gXCJHcmVhdGVyVGhhblwiO1xuICAgIFRva2VuW1Rva2VuW1wiTGVzc1RoYW5FcXVhbHNcIl0gPSAxNjM4NzQ4XSA9IFwiTGVzc1RoYW5FcXVhbHNcIjtcbiAgICBUb2tlbltUb2tlbltcIkdyZWF0ZXJUaGFuRXF1YWxzXCJdID0gMTYzODc0OV0gPSBcIkdyZWF0ZXJUaGFuRXF1YWxzXCI7XG4gICAgVG9rZW5bVG9rZW5bXCJJbktleXdvcmRcIl0gPSAxNjQwNzk4XSA9IFwiSW5LZXl3b3JkXCI7XG4gICAgVG9rZW5bVG9rZW5bXCJJbnN0YW5jZU9mS2V5d29yZFwiXSA9IDE2NDA3OTldID0gXCJJbnN0YW5jZU9mS2V5d29yZFwiO1xuICAgIFRva2VuW1Rva2VuW1wiUGx1c1wiXSA9IDYyMzAwOF0gPSBcIlBsdXNcIjtcbiAgICBUb2tlbltUb2tlbltcIk1pbnVzXCJdID0gNjIzMDA5XSA9IFwiTWludXNcIjtcbiAgICBUb2tlbltUb2tlbltcIlR5cGVvZktleXdvcmRcIl0gPSAzNDg1MF0gPSBcIlR5cGVvZktleXdvcmRcIjtcbiAgICBUb2tlbltUb2tlbltcIlZvaWRLZXl3b3JkXCJdID0gMzQ4NTFdID0gXCJWb2lkS2V5d29yZFwiO1xuICAgIFRva2VuW1Rva2VuW1wiQXN0ZXJpc2tcIl0gPSAxNjM4ODg0XSA9IFwiQXN0ZXJpc2tcIjtcbiAgICBUb2tlbltUb2tlbltcIlBlcmNlbnRcIl0gPSAxNjM4ODg1XSA9IFwiUGVyY2VudFwiO1xuICAgIFRva2VuW1Rva2VuW1wiU2xhc2hcIl0gPSAxNjM4ODg2XSA9IFwiU2xhc2hcIjtcbiAgICBUb2tlbltUb2tlbltcIkVxdWFsc1wiXSA9IDEwNDg2MTVdID0gXCJFcXVhbHNcIjtcbiAgICBUb2tlbltUb2tlbltcIkV4Y2xhbWF0aW9uXCJdID0gMzI4MDhdID0gXCJFeGNsYW1hdGlvblwiO1xuICAgIFRva2VuW1Rva2VuW1wiVGVtcGxhdGVUYWlsXCJdID0gNTQwNzEzXSA9IFwiVGVtcGxhdGVUYWlsXCI7XG4gICAgVG9rZW5bVG9rZW5bXCJUZW1wbGF0ZUNvbnRpbnVhdGlvblwiXSA9IDU0MDcxNF0gPSBcIlRlbXBsYXRlQ29udGludWF0aW9uXCI7XG4gICAgVG9rZW5bVG9rZW5bXCJPZktleXdvcmRcIl0gPSAxMDUxMTc5XSA9IFwiT2ZLZXl3b3JkXCI7XG59KShUb2tlbiB8fCAoVG9rZW4gPSB7fSkpO1xuZXhwb3J0IHZhciBDaGFyO1xuKGZ1bmN0aW9uIChDaGFyKSB7XG4gICAgQ2hhcltDaGFyW1wiTnVsbFwiXSA9IDBdID0gXCJOdWxsXCI7XG4gICAgQ2hhcltDaGFyW1wiQmFja3NwYWNlXCJdID0gOF0gPSBcIkJhY2tzcGFjZVwiO1xuICAgIENoYXJbQ2hhcltcIlRhYlwiXSA9IDldID0gXCJUYWJcIjtcbiAgICBDaGFyW0NoYXJbXCJMaW5lRmVlZFwiXSA9IDEwXSA9IFwiTGluZUZlZWRcIjtcbiAgICBDaGFyW0NoYXJbXCJWZXJ0aWNhbFRhYlwiXSA9IDExXSA9IFwiVmVydGljYWxUYWJcIjtcbiAgICBDaGFyW0NoYXJbXCJGb3JtRmVlZFwiXSA9IDEyXSA9IFwiRm9ybUZlZWRcIjtcbiAgICBDaGFyW0NoYXJbXCJDYXJyaWFnZVJldHVyblwiXSA9IDEzXSA9IFwiQ2FycmlhZ2VSZXR1cm5cIjtcbiAgICBDaGFyW0NoYXJbXCJTcGFjZVwiXSA9IDMyXSA9IFwiU3BhY2VcIjtcbiAgICBDaGFyW0NoYXJbXCJFeGNsYW1hdGlvblwiXSA9IDMzXSA9IFwiRXhjbGFtYXRpb25cIjtcbiAgICBDaGFyW0NoYXJbXCJEb3VibGVRdW90ZVwiXSA9IDM0XSA9IFwiRG91YmxlUXVvdGVcIjtcbiAgICBDaGFyW0NoYXJbXCJEb2xsYXJcIl0gPSAzNl0gPSBcIkRvbGxhclwiO1xuICAgIENoYXJbQ2hhcltcIlBlcmNlbnRcIl0gPSAzN10gPSBcIlBlcmNlbnRcIjtcbiAgICBDaGFyW0NoYXJbXCJBbXBlcnNhbmRcIl0gPSAzOF0gPSBcIkFtcGVyc2FuZFwiO1xuICAgIENoYXJbQ2hhcltcIlNpbmdsZVF1b3RlXCJdID0gMzldID0gXCJTaW5nbGVRdW90ZVwiO1xuICAgIENoYXJbQ2hhcltcIk9wZW5QYXJlblwiXSA9IDQwXSA9IFwiT3BlblBhcmVuXCI7XG4gICAgQ2hhcltDaGFyW1wiQ2xvc2VQYXJlblwiXSA9IDQxXSA9IFwiQ2xvc2VQYXJlblwiO1xuICAgIENoYXJbQ2hhcltcIkFzdGVyaXNrXCJdID0gNDJdID0gXCJBc3Rlcmlza1wiO1xuICAgIENoYXJbQ2hhcltcIlBsdXNcIl0gPSA0M10gPSBcIlBsdXNcIjtcbiAgICBDaGFyW0NoYXJbXCJDb21tYVwiXSA9IDQ0XSA9IFwiQ29tbWFcIjtcbiAgICBDaGFyW0NoYXJbXCJNaW51c1wiXSA9IDQ1XSA9IFwiTWludXNcIjtcbiAgICBDaGFyW0NoYXJbXCJEb3RcIl0gPSA0Nl0gPSBcIkRvdFwiO1xuICAgIENoYXJbQ2hhcltcIlNsYXNoXCJdID0gNDddID0gXCJTbGFzaFwiO1xuICAgIENoYXJbQ2hhcltcIlNlbWljb2xvblwiXSA9IDU5XSA9IFwiU2VtaWNvbG9uXCI7XG4gICAgQ2hhcltDaGFyW1wiQmFja3RpY2tcIl0gPSA5Nl0gPSBcIkJhY2t0aWNrXCI7XG4gICAgQ2hhcltDaGFyW1wiT3BlbkJyYWNrZXRcIl0gPSA5MV0gPSBcIk9wZW5CcmFja2V0XCI7XG4gICAgQ2hhcltDaGFyW1wiQmFja3NsYXNoXCJdID0gOTJdID0gXCJCYWNrc2xhc2hcIjtcbiAgICBDaGFyW0NoYXJbXCJDbG9zZUJyYWNrZXRcIl0gPSA5M10gPSBcIkNsb3NlQnJhY2tldFwiO1xuICAgIENoYXJbQ2hhcltcIkNhcmV0XCJdID0gOTRdID0gXCJDYXJldFwiO1xuICAgIENoYXJbQ2hhcltcIlVuZGVyc2NvcmVcIl0gPSA5NV0gPSBcIlVuZGVyc2NvcmVcIjtcbiAgICBDaGFyW0NoYXJbXCJPcGVuQnJhY2VcIl0gPSAxMjNdID0gXCJPcGVuQnJhY2VcIjtcbiAgICBDaGFyW0NoYXJbXCJCYXJcIl0gPSAxMjRdID0gXCJCYXJcIjtcbiAgICBDaGFyW0NoYXJbXCJDbG9zZUJyYWNlXCJdID0gMTI1XSA9IFwiQ2xvc2VCcmFjZVwiO1xuICAgIENoYXJbQ2hhcltcIkNvbG9uXCJdID0gNThdID0gXCJDb2xvblwiO1xuICAgIENoYXJbQ2hhcltcIkxlc3NUaGFuXCJdID0gNjBdID0gXCJMZXNzVGhhblwiO1xuICAgIENoYXJbQ2hhcltcIkVxdWFsc1wiXSA9IDYxXSA9IFwiRXF1YWxzXCI7XG4gICAgQ2hhcltDaGFyW1wiR3JlYXRlclRoYW5cIl0gPSA2Ml0gPSBcIkdyZWF0ZXJUaGFuXCI7XG4gICAgQ2hhcltDaGFyW1wiUXVlc3Rpb25cIl0gPSA2M10gPSBcIlF1ZXN0aW9uXCI7XG4gICAgQ2hhcltDaGFyW1wiWmVyb1wiXSA9IDQ4XSA9IFwiWmVyb1wiO1xuICAgIENoYXJbQ2hhcltcIk9uZVwiXSA9IDQ5XSA9IFwiT25lXCI7XG4gICAgQ2hhcltDaGFyW1wiVHdvXCJdID0gNTBdID0gXCJUd29cIjtcbiAgICBDaGFyW0NoYXJbXCJUaHJlZVwiXSA9IDUxXSA9IFwiVGhyZWVcIjtcbiAgICBDaGFyW0NoYXJbXCJGb3VyXCJdID0gNTJdID0gXCJGb3VyXCI7XG4gICAgQ2hhcltDaGFyW1wiRml2ZVwiXSA9IDUzXSA9IFwiRml2ZVwiO1xuICAgIENoYXJbQ2hhcltcIlNpeFwiXSA9IDU0XSA9IFwiU2l4XCI7XG4gICAgQ2hhcltDaGFyW1wiU2V2ZW5cIl0gPSA1NV0gPSBcIlNldmVuXCI7XG4gICAgQ2hhcltDaGFyW1wiRWlnaHRcIl0gPSA1Nl0gPSBcIkVpZ2h0XCI7XG4gICAgQ2hhcltDaGFyW1wiTmluZVwiXSA9IDU3XSA9IFwiTmluZVwiO1xuICAgIENoYXJbQ2hhcltcIlVwcGVyQVwiXSA9IDY1XSA9IFwiVXBwZXJBXCI7XG4gICAgQ2hhcltDaGFyW1wiVXBwZXJCXCJdID0gNjZdID0gXCJVcHBlckJcIjtcbiAgICBDaGFyW0NoYXJbXCJVcHBlckNcIl0gPSA2N10gPSBcIlVwcGVyQ1wiO1xuICAgIENoYXJbQ2hhcltcIlVwcGVyRFwiXSA9IDY4XSA9IFwiVXBwZXJEXCI7XG4gICAgQ2hhcltDaGFyW1wiVXBwZXJFXCJdID0gNjldID0gXCJVcHBlckVcIjtcbiAgICBDaGFyW0NoYXJbXCJVcHBlckZcIl0gPSA3MF0gPSBcIlVwcGVyRlwiO1xuICAgIENoYXJbQ2hhcltcIlVwcGVyR1wiXSA9IDcxXSA9IFwiVXBwZXJHXCI7XG4gICAgQ2hhcltDaGFyW1wiVXBwZXJIXCJdID0gNzJdID0gXCJVcHBlckhcIjtcbiAgICBDaGFyW0NoYXJbXCJVcHBlcklcIl0gPSA3M10gPSBcIlVwcGVySVwiO1xuICAgIENoYXJbQ2hhcltcIlVwcGVySlwiXSA9IDc0XSA9IFwiVXBwZXJKXCI7XG4gICAgQ2hhcltDaGFyW1wiVXBwZXJLXCJdID0gNzVdID0gXCJVcHBlcktcIjtcbiAgICBDaGFyW0NoYXJbXCJVcHBlckxcIl0gPSA3Nl0gPSBcIlVwcGVyTFwiO1xuICAgIENoYXJbQ2hhcltcIlVwcGVyTVwiXSA9IDc3XSA9IFwiVXBwZXJNXCI7XG4gICAgQ2hhcltDaGFyW1wiVXBwZXJOXCJdID0gNzhdID0gXCJVcHBlck5cIjtcbiAgICBDaGFyW0NoYXJbXCJVcHBlck9cIl0gPSA3OV0gPSBcIlVwcGVyT1wiO1xuICAgIENoYXJbQ2hhcltcIlVwcGVyUFwiXSA9IDgwXSA9IFwiVXBwZXJQXCI7XG4gICAgQ2hhcltDaGFyW1wiVXBwZXJRXCJdID0gODFdID0gXCJVcHBlclFcIjtcbiAgICBDaGFyW0NoYXJbXCJVcHBlclJcIl0gPSA4Ml0gPSBcIlVwcGVyUlwiO1xuICAgIENoYXJbQ2hhcltcIlVwcGVyU1wiXSA9IDgzXSA9IFwiVXBwZXJTXCI7XG4gICAgQ2hhcltDaGFyW1wiVXBwZXJUXCJdID0gODRdID0gXCJVcHBlclRcIjtcbiAgICBDaGFyW0NoYXJbXCJVcHBlclVcIl0gPSA4NV0gPSBcIlVwcGVyVVwiO1xuICAgIENoYXJbQ2hhcltcIlVwcGVyVlwiXSA9IDg2XSA9IFwiVXBwZXJWXCI7XG4gICAgQ2hhcltDaGFyW1wiVXBwZXJXXCJdID0gODddID0gXCJVcHBlcldcIjtcbiAgICBDaGFyW0NoYXJbXCJVcHBlclhcIl0gPSA4OF0gPSBcIlVwcGVyWFwiO1xuICAgIENoYXJbQ2hhcltcIlVwcGVyWVwiXSA9IDg5XSA9IFwiVXBwZXJZXCI7XG4gICAgQ2hhcltDaGFyW1wiVXBwZXJaXCJdID0gOTBdID0gXCJVcHBlclpcIjtcbiAgICBDaGFyW0NoYXJbXCJMb3dlckFcIl0gPSA5N10gPSBcIkxvd2VyQVwiO1xuICAgIENoYXJbQ2hhcltcIkxvd2VyQlwiXSA9IDk4XSA9IFwiTG93ZXJCXCI7XG4gICAgQ2hhcltDaGFyW1wiTG93ZXJDXCJdID0gOTldID0gXCJMb3dlckNcIjtcbiAgICBDaGFyW0NoYXJbXCJMb3dlckRcIl0gPSAxMDBdID0gXCJMb3dlckRcIjtcbiAgICBDaGFyW0NoYXJbXCJMb3dlckVcIl0gPSAxMDFdID0gXCJMb3dlckVcIjtcbiAgICBDaGFyW0NoYXJbXCJMb3dlckZcIl0gPSAxMDJdID0gXCJMb3dlckZcIjtcbiAgICBDaGFyW0NoYXJbXCJMb3dlckdcIl0gPSAxMDNdID0gXCJMb3dlckdcIjtcbiAgICBDaGFyW0NoYXJbXCJMb3dlckhcIl0gPSAxMDRdID0gXCJMb3dlckhcIjtcbiAgICBDaGFyW0NoYXJbXCJMb3dlcklcIl0gPSAxMDVdID0gXCJMb3dlcklcIjtcbiAgICBDaGFyW0NoYXJbXCJMb3dlckpcIl0gPSAxMDZdID0gXCJMb3dlckpcIjtcbiAgICBDaGFyW0NoYXJbXCJMb3dlcktcIl0gPSAxMDddID0gXCJMb3dlcktcIjtcbiAgICBDaGFyW0NoYXJbXCJMb3dlckxcIl0gPSAxMDhdID0gXCJMb3dlckxcIjtcbiAgICBDaGFyW0NoYXJbXCJMb3dlck1cIl0gPSAxMDldID0gXCJMb3dlck1cIjtcbiAgICBDaGFyW0NoYXJbXCJMb3dlck5cIl0gPSAxMTBdID0gXCJMb3dlck5cIjtcbiAgICBDaGFyW0NoYXJbXCJMb3dlck9cIl0gPSAxMTFdID0gXCJMb3dlck9cIjtcbiAgICBDaGFyW0NoYXJbXCJMb3dlclBcIl0gPSAxMTJdID0gXCJMb3dlclBcIjtcbiAgICBDaGFyW0NoYXJbXCJMb3dlclFcIl0gPSAxMTNdID0gXCJMb3dlclFcIjtcbiAgICBDaGFyW0NoYXJbXCJMb3dlclJcIl0gPSAxMTRdID0gXCJMb3dlclJcIjtcbiAgICBDaGFyW0NoYXJbXCJMb3dlclNcIl0gPSAxMTVdID0gXCJMb3dlclNcIjtcbiAgICBDaGFyW0NoYXJbXCJMb3dlclRcIl0gPSAxMTZdID0gXCJMb3dlclRcIjtcbiAgICBDaGFyW0NoYXJbXCJMb3dlclVcIl0gPSAxMTddID0gXCJMb3dlclVcIjtcbiAgICBDaGFyW0NoYXJbXCJMb3dlclZcIl0gPSAxMThdID0gXCJMb3dlclZcIjtcbiAgICBDaGFyW0NoYXJbXCJMb3dlcldcIl0gPSAxMTldID0gXCJMb3dlcldcIjtcbiAgICBDaGFyW0NoYXJbXCJMb3dlclhcIl0gPSAxMjBdID0gXCJMb3dlclhcIjtcbiAgICBDaGFyW0NoYXJbXCJMb3dlcllcIl0gPSAxMjFdID0gXCJMb3dlcllcIjtcbiAgICBDaGFyW0NoYXJbXCJMb3dlclpcIl0gPSAxMjJdID0gXCJMb3dlclpcIjtcbn0pKENoYXIgfHwgKENoYXIgPSB7fSkpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29tbW9uLmpzLm1hcCIsImltcG9ydCB7IERJIH0gZnJvbSAnQGF1cmVsaWEva2VybmVsJztcbmltcG9ydCB7IElFeHByZXNzaW9uUGFyc2VyLCBSdW50aW1lQ29uZmlndXJhdGlvbiB9IGZyb20gJ0BhdXJlbGlhL3J1bnRpbWUnO1xuaW1wb3J0IHsgQXRQcmVmaXhlZFRyaWdnZXJBdHRyaWJ1dGVQYXR0ZXJuLCBDb2xvblByZWZpeGVkQmluZEF0dHJpYnV0ZVBhdHRlcm4sIERvdFNlcGFyYXRlZEF0dHJpYnV0ZVBhdHRlcm4sIFJlZkF0dHJpYnV0ZVBhdHRlcm4gfSBmcm9tICcuL2F0dHJpYnV0ZS1wYXR0ZXJucyc7XG5pbXBvcnQgeyBDYWxsQmluZGluZ0NvbW1hbmQsIERlZmF1bHRCaW5kaW5nQ29tbWFuZCwgRm9yQmluZGluZ0NvbW1hbmQsIEZyb21WaWV3QmluZGluZ0NvbW1hbmQsIE9uZVRpbWVCaW5kaW5nQ29tbWFuZCwgVG9WaWV3QmluZGluZ0NvbW1hbmQsIFR3b1dheUJpbmRpbmdDb21tYW5kIH0gZnJvbSAnLi9iaW5kaW5nLWNvbW1hbmRzJztcbmltcG9ydCB7IHBhcnNlRXhwcmVzc2lvbiB9IGZyb20gJy4vZXhwcmVzc2lvbi1wYXJzZXInO1xuZXhwb3J0IGNvbnN0IElFeHByZXNzaW9uUGFyc2VyUmVnaXN0cmF0aW9uID0ge1xuICAgIHJlZ2lzdGVyKGNvbnRhaW5lcikge1xuICAgICAgICBjb250YWluZXIucmVnaXN0ZXJUcmFuc2Zvcm1lcihJRXhwcmVzc2lvblBhcnNlciwgcGFyc2VyID0+IHtcbiAgICAgICAgICAgIFJlZmxlY3Quc2V0KHBhcnNlciwgJ3BhcnNlQ29yZScsIHBhcnNlRXhwcmVzc2lvbik7XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VyO1xuICAgICAgICB9KTtcbiAgICB9XG59O1xuLyoqXG4gKiBEZWZhdWx0IHJ1bnRpbWUvZW52aXJvbm1lbnQtYWdub3N0aWMgaW1wbGVtZW50YXRpb25zIGZvciB0aGUgZm9sbG93aW5nIGludGVyZmFjZXM6XG4gKiAtIGBJRXhwcmVzc2lvblBhcnNlcmBcbiAqL1xuZXhwb3J0IGNvbnN0IERlZmF1bHRDb21wb25lbnRzID0gW1xuICAgIElFeHByZXNzaW9uUGFyc2VyUmVnaXN0cmF0aW9uXG5dO1xuZXhwb3J0IGNvbnN0IEF0UHJlZml4ZWRUcmlnZ2VyQXR0cmlidXRlUGF0dGVyblJlZ2lzdHJhdGlvbiA9IEF0UHJlZml4ZWRUcmlnZ2VyQXR0cmlidXRlUGF0dGVybjtcbmV4cG9ydCBjb25zdCBDb2xvblByZWZpeGVkQmluZEF0dHJpYnV0ZVBhdHRlcm5SZWdpc3RyYXRpb24gPSBDb2xvblByZWZpeGVkQmluZEF0dHJpYnV0ZVBhdHRlcm47XG5leHBvcnQgY29uc3QgUmVmQXR0cmlidXRlUGF0dGVyblJlZ2lzdHJhdGlvbiA9IFJlZkF0dHJpYnV0ZVBhdHRlcm47XG5leHBvcnQgY29uc3QgRG90U2VwYXJhdGVkQXR0cmlidXRlUGF0dGVyblJlZ2lzdHJhdGlvbiA9IERvdFNlcGFyYXRlZEF0dHJpYnV0ZVBhdHRlcm47XG4vKipcbiAqIERlZmF1bHQgYmluZGluZyBzeW50YXggZm9yIHRoZSBmb2xsb3dpbmcgYXR0cmlidXRlIG5hbWUgcGF0dGVybnM6XG4gKiAtIGByZWZgXG4gKiAtIGB0YXJnZXQuY29tbWFuZGAgKGRvdC1zZXBhcmF0ZWQpXG4gKi9cbmV4cG9ydCBjb25zdCBEZWZhdWx0QmluZGluZ1N5bnRheCA9IFtcbiAgICBSZWZBdHRyaWJ1dGVQYXR0ZXJuUmVnaXN0cmF0aW9uLFxuICAgIERvdFNlcGFyYXRlZEF0dHJpYnV0ZVBhdHRlcm5SZWdpc3RyYXRpb25cbl07XG4vKipcbiAqIEJpbmRpbmcgc3ludGF4IGZvciBzaG9ydC1oYW5kIGF0dHJpYnV0ZSBuYW1lIHBhdHRlcm5zOlxuICogLSBgQHRhcmdldGAgKHNob3J0LWhhbmQgZm9yIGB0YXJnZXQudHJpZ2dlcmApXG4gKiAtIGA6dGFyZ2V0YCAoc2hvcnQtaGFuZCBmb3IgYHRhcmdldC5iaW5kYClcbiAqL1xuZXhwb3J0IGNvbnN0IFNob3J0SGFuZEJpbmRpbmdTeW50YXggPSBbXG4gICAgQXRQcmVmaXhlZFRyaWdnZXJBdHRyaWJ1dGVQYXR0ZXJuUmVnaXN0cmF0aW9uLFxuICAgIENvbG9uUHJlZml4ZWRCaW5kQXR0cmlidXRlUGF0dGVyblJlZ2lzdHJhdGlvblxuXTtcbmV4cG9ydCBjb25zdCBDYWxsQmluZGluZ0NvbW1hbmRSZWdpc3RyYXRpb24gPSBDYWxsQmluZGluZ0NvbW1hbmQ7XG5leHBvcnQgY29uc3QgRGVmYXVsdEJpbmRpbmdDb21tYW5kUmVnaXN0cmF0aW9uID0gRGVmYXVsdEJpbmRpbmdDb21tYW5kO1xuZXhwb3J0IGNvbnN0IEZvckJpbmRpbmdDb21tYW5kUmVnaXN0cmF0aW9uID0gRm9yQmluZGluZ0NvbW1hbmQ7XG5leHBvcnQgY29uc3QgRnJvbVZpZXdCaW5kaW5nQ29tbWFuZFJlZ2lzdHJhdGlvbiA9IEZyb21WaWV3QmluZGluZ0NvbW1hbmQ7XG5leHBvcnQgY29uc3QgT25lVGltZUJpbmRpbmdDb21tYW5kUmVnaXN0cmF0aW9uID0gT25lVGltZUJpbmRpbmdDb21tYW5kO1xuZXhwb3J0IGNvbnN0IFRvVmlld0JpbmRpbmdDb21tYW5kUmVnaXN0cmF0aW9uID0gVG9WaWV3QmluZGluZ0NvbW1hbmQ7XG5leHBvcnQgY29uc3QgVHdvV2F5QmluZGluZ0NvbW1hbmRSZWdpc3RyYXRpb24gPSBUd29XYXlCaW5kaW5nQ29tbWFuZDtcbi8qKlxuICogRGVmYXVsdCBydW50aW1lL2Vudmlyb25tZW50LWFnbm9zdGljIGJpbmRpbmcgY29tbWFuZHM6XG4gKiAtIFByb3BlcnR5IG9ic2VydmF0aW9uOiBgLmJpbmRgLCBgLm9uZS10aW1lYCwgYC5mcm9tLXZpZXdgLCBgLnRvLXZpZXdgLCBgLnR3by13YXlgXG4gKiAtIEZ1bmN0aW9uIGNhbGw6IGAuY2FsbGBcbiAqIC0gQ29sbGVjdGlvbiBvYnNlcnZhdGlvbjogYC5mb3JgXG4gKi9cbmV4cG9ydCBjb25zdCBEZWZhdWx0QmluZGluZ0xhbmd1YWdlID0gW1xuICAgIERlZmF1bHRCaW5kaW5nQ29tbWFuZFJlZ2lzdHJhdGlvbixcbiAgICBPbmVUaW1lQmluZGluZ0NvbW1hbmRSZWdpc3RyYXRpb24sXG4gICAgRnJvbVZpZXdCaW5kaW5nQ29tbWFuZFJlZ2lzdHJhdGlvbixcbiAgICBUb1ZpZXdCaW5kaW5nQ29tbWFuZFJlZ2lzdHJhdGlvbixcbiAgICBUd29XYXlCaW5kaW5nQ29tbWFuZFJlZ2lzdHJhdGlvbixcbiAgICBDYWxsQmluZGluZ0NvbW1hbmRSZWdpc3RyYXRpb24sXG4gICAgRm9yQmluZGluZ0NvbW1hbmRSZWdpc3RyYXRpb25cbl07XG4vKipcbiAqIEEgREkgY29uZmlndXJhdGlvbiBvYmplY3QgY29udGFpbmluZyBydW50aW1lL2Vudmlyb25tZW50LWFnbm9zdGljIHJlZ2lzdHJhdGlvbnM6XG4gKiAtIGBSdW50aW1lQ29uZmlndXJhdGlvbmAgZnJvbSBgQGF1cmVsaWEvcnVudGltZWBcbiAqIC0gYERlZmF1bHRDb21wb25lbnRzYFxuICogLSBgRGVmYXVsdEJpbmRpbmdTeW50YXhgXG4gKiAtIGBEZWZhdWx0QmluZGluZ0xhbmd1YWdlYFxuICovXG5leHBvcnQgY29uc3QgSml0Q29uZmlndXJhdGlvbiA9IHtcbiAgICAvKipcbiAgICAgKiBBcHBseSB0aGlzIGNvbmZpZ3VyYXRpb24gdG8gdGhlIHByb3ZpZGVkIGNvbnRhaW5lci5cbiAgICAgKi9cbiAgICByZWdpc3Rlcihjb250YWluZXIpIHtcbiAgICAgICAgcmV0dXJuIFJ1bnRpbWVDb25maWd1cmF0aW9uXG4gICAgICAgICAgICAucmVnaXN0ZXIoY29udGFpbmVyKVxuICAgICAgICAgICAgLnJlZ2lzdGVyKC4uLkRlZmF1bHRDb21wb25lbnRzLCAuLi5EZWZhdWx0QmluZGluZ1N5bnRheCwgLi4uRGVmYXVsdEJpbmRpbmdMYW5ndWFnZSk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgY29udGFpbmVyIHdpdGggdGhpcyBjb25maWd1cmF0aW9uIGFwcGxpZWQgdG8gaXQuXG4gICAgICovXG4gICAgY3JlYXRlQ29udGFpbmVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWdpc3RlcihESS5jcmVhdGVDb250YWluZXIoKSk7XG4gICAgfVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbmZpZ3VyYXRpb24uanMubWFwIiwiaW1wb3J0IHsgUmVwb3J0ZXIgfSBmcm9tICdAYXVyZWxpYS9rZXJuZWwnO1xuaW1wb3J0IHsgQWNjZXNzS2V5ZWRFeHByZXNzaW9uLCBBY2Nlc3NNZW1iZXJFeHByZXNzaW9uLCBBY2Nlc3NTY29wZUV4cHJlc3Npb24sIEFjY2Vzc1RoaXNFeHByZXNzaW9uLCBBcnJheUJpbmRpbmdQYXR0ZXJuLCBBcnJheUxpdGVyYWxFeHByZXNzaW9uLCBBc3NpZ25FeHByZXNzaW9uLCBCaW5hcnlFeHByZXNzaW9uLCBCaW5kaW5nQmVoYXZpb3JFeHByZXNzaW9uLCBCaW5kaW5nSWRlbnRpZmllciwgQ2FsbEZ1bmN0aW9uRXhwcmVzc2lvbiwgQ2FsbE1lbWJlckV4cHJlc3Npb24sIENhbGxTY29wZUV4cHJlc3Npb24sIENvbmRpdGlvbmFsRXhwcmVzc2lvbiwgQ3VzdG9tRXhwcmVzc2lvbiwgRm9yT2ZTdGF0ZW1lbnQsIEludGVycG9sYXRpb24sIE9iamVjdEJpbmRpbmdQYXR0ZXJuLCBPYmplY3RMaXRlcmFsRXhwcmVzc2lvbiwgUHJpbWl0aXZlTGl0ZXJhbEV4cHJlc3Npb24sIFRhZ2dlZFRlbXBsYXRlRXhwcmVzc2lvbiwgVGVtcGxhdGVFeHByZXNzaW9uLCBVbmFyeUV4cHJlc3Npb24sIFZhbHVlQ29udmVydGVyRXhwcmVzc2lvbiB9IGZyb20gJ0BhdXJlbGlhL3J1bnRpbWUnO1xuaW1wb3J0IHsgdW5lc2NhcGVDb2RlIH0gZnJvbSAnLi9jb21tb24nO1xuY29uc3QgJGZhbHNlID0gUHJpbWl0aXZlTGl0ZXJhbEV4cHJlc3Npb24uJGZhbHNlO1xuY29uc3QgJHRydWUgPSBQcmltaXRpdmVMaXRlcmFsRXhwcmVzc2lvbi4kdHJ1ZTtcbmNvbnN0ICRudWxsID0gUHJpbWl0aXZlTGl0ZXJhbEV4cHJlc3Npb24uJG51bGw7XG5jb25zdCAkdW5kZWZpbmVkID0gUHJpbWl0aXZlTGl0ZXJhbEV4cHJlc3Npb24uJHVuZGVmaW5lZDtcbmNvbnN0ICR0aGlzID0gQWNjZXNzVGhpc0V4cHJlc3Npb24uJHRoaXM7XG5jb25zdCAkcGFyZW50ID0gQWNjZXNzVGhpc0V4cHJlc3Npb24uJHBhcmVudDtcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCBjbGFzcyBQYXJzZXJTdGF0ZSB7XG4gICAgY29uc3RydWN0b3IoaW5wdXQpIHtcbiAgICAgICAgdGhpcy5pbnB1dCA9IGlucHV0O1xuICAgICAgICB0aGlzLmluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5zdGFydEluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5sYXN0SW5kZXggPSAwO1xuICAgICAgICB0aGlzLmN1cnJlbnRUb2tlbiA9IDE1NzI4NjQgLyogRU9GICovO1xuICAgICAgICB0aGlzLnRva2VuVmFsdWUgPSAnJztcbiAgICAgICAgdGhpcy5hc3NpZ25hYmxlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5sZW5ndGggPSBpbnB1dC5sZW5ndGg7XG4gICAgICAgIHRoaXMuY3VycmVudENoYXIgPSBpbnB1dC5jaGFyQ29kZUF0KDApO1xuICAgIH1cbiAgICBnZXQgdG9rZW5SYXcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlucHV0LnNsaWNlKHRoaXMuc3RhcnRJbmRleCwgdGhpcy5pbmRleCk7XG4gICAgfVxufVxuY29uc3QgJHN0YXRlID0gbmV3IFBhcnNlclN0YXRlKCcnKTtcbnZhciBTeW50YXhFcnJvcjtcbihmdW5jdGlvbiAoU3ludGF4RXJyb3IpIHtcbiAgICBTeW50YXhFcnJvcltTeW50YXhFcnJvcltcIkludmFsaWRFeHByZXNzaW9uU3RhcnRcIl0gPSAxMDBdID0gXCJJbnZhbGlkRXhwcmVzc2lvblN0YXJ0XCI7XG4gICAgU3ludGF4RXJyb3JbU3ludGF4RXJyb3JbXCJVbmNvbnN1bWVkVG9rZW5cIl0gPSAxMDFdID0gXCJVbmNvbnN1bWVkVG9rZW5cIjtcbiAgICBTeW50YXhFcnJvcltTeW50YXhFcnJvcltcIkRvdWJsZURvdFwiXSA9IDEwMl0gPSBcIkRvdWJsZURvdFwiO1xuICAgIFN5bnRheEVycm9yW1N5bnRheEVycm9yW1wiSW52YWxpZE1lbWJlckV4cHJlc3Npb25cIl0gPSAxMDNdID0gXCJJbnZhbGlkTWVtYmVyRXhwcmVzc2lvblwiO1xuICAgIFN5bnRheEVycm9yW1N5bnRheEVycm9yW1wiVW5leHBlY3RlZEVuZE9mRXhwcmVzc2lvblwiXSA9IDEwNF0gPSBcIlVuZXhwZWN0ZWRFbmRPZkV4cHJlc3Npb25cIjtcbiAgICBTeW50YXhFcnJvcltTeW50YXhFcnJvcltcIkV4cGVjdGVkSWRlbnRpZmllclwiXSA9IDEwNV0gPSBcIkV4cGVjdGVkSWRlbnRpZmllclwiO1xuICAgIFN5bnRheEVycm9yW1N5bnRheEVycm9yW1wiSW52YWxpZEZvckRlY2xhcmF0aW9uXCJdID0gMTA2XSA9IFwiSW52YWxpZEZvckRlY2xhcmF0aW9uXCI7XG4gICAgU3ludGF4RXJyb3JbU3ludGF4RXJyb3JbXCJJbnZhbGlkT2JqZWN0TGl0ZXJhbFByb3BlcnR5RGVmaW5pdGlvblwiXSA9IDEwN10gPSBcIkludmFsaWRPYmplY3RMaXRlcmFsUHJvcGVydHlEZWZpbml0aW9uXCI7XG4gICAgU3ludGF4RXJyb3JbU3ludGF4RXJyb3JbXCJVbnRlcm1pbmF0ZWRRdW90ZVwiXSA9IDEwOF0gPSBcIlVudGVybWluYXRlZFF1b3RlXCI7XG4gICAgU3ludGF4RXJyb3JbU3ludGF4RXJyb3JbXCJVbnRlcm1pbmF0ZWRUZW1wbGF0ZVwiXSA9IDEwOV0gPSBcIlVudGVybWluYXRlZFRlbXBsYXRlXCI7XG4gICAgU3ludGF4RXJyb3JbU3ludGF4RXJyb3JbXCJNaXNzaW5nRXhwZWN0ZWRUb2tlblwiXSA9IDExMF0gPSBcIk1pc3NpbmdFeHBlY3RlZFRva2VuXCI7XG4gICAgU3ludGF4RXJyb3JbU3ludGF4RXJyb3JbXCJVbmV4cGVjdGVkQ2hhcmFjdGVyXCJdID0gMTExXSA9IFwiVW5leHBlY3RlZENoYXJhY3RlclwiO1xuICAgIFN5bnRheEVycm9yW1N5bnRheEVycm9yW1wiTWlzc2luZ1ZhbHVlQ29udmVydGVyXCJdID0gMTEyXSA9IFwiTWlzc2luZ1ZhbHVlQ29udmVydGVyXCI7XG4gICAgU3ludGF4RXJyb3JbU3ludGF4RXJyb3JbXCJNaXNzaW5nQmluZGluZ0JlaGF2aW9yXCJdID0gMTEzXSA9IFwiTWlzc2luZ0JpbmRpbmdCZWhhdmlvclwiO1xufSkoU3ludGF4RXJyb3IgfHwgKFN5bnRheEVycm9yID0ge30pKTtcbnZhciBTZW1hbnRpY0Vycm9yO1xuKGZ1bmN0aW9uIChTZW1hbnRpY0Vycm9yKSB7XG4gICAgU2VtYW50aWNFcnJvcltTZW1hbnRpY0Vycm9yW1wiTm90QXNzaWduYWJsZVwiXSA9IDE1MF0gPSBcIk5vdEFzc2lnbmFibGVcIjtcbiAgICBTZW1hbnRpY0Vycm9yW1NlbWFudGljRXJyb3JbXCJVbmV4cGVjdGVkRm9yT2ZcIl0gPSAxNTFdID0gXCJVbmV4cGVjdGVkRm9yT2ZcIjtcbn0pKFNlbWFudGljRXJyb3IgfHwgKFNlbWFudGljRXJyb3IgPSB7fSkpO1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlRXhwcmVzc2lvbihpbnB1dCwgYmluZGluZ1R5cGUpIHtcbiAgICAkc3RhdGUuaW5wdXQgPSBpbnB1dDtcbiAgICAkc3RhdGUubGVuZ3RoID0gaW5wdXQubGVuZ3RoO1xuICAgICRzdGF0ZS5pbmRleCA9IDA7XG4gICAgJHN0YXRlLmN1cnJlbnRDaGFyID0gaW5wdXQuY2hhckNvZGVBdCgwKTtcbiAgICByZXR1cm4gcGFyc2UoJHN0YXRlLCAwIC8qIFJlc2V0ICovLCA2MSAvKiBWYXJpYWRpYyAqLywgYmluZGluZ1R5cGUgPT09IHZvaWQgMCA/IDUzIC8qIEJpbmRDb21tYW5kICovIDogYmluZGluZ1R5cGUpO1xufVxuLyoqIEBpbnRlcm5hbCAqL1xuLy8gSlVTVElGSUNBVElPTjogVGhpcyBpcyBwZXJmb3JtYW5jZS1jcml0aWNhbCBjb2RlIHdoaWNoIGZvbGxvd3MgYSBzdWJzZXQgb2YgdGhlIHdlbGwta25vd24gRVMgc3BlYy5cbi8vIEtub3dpbmcgdGhlIHNwZWMsIG9yIHBhcnNlcnMgaW4gZ2VuZXJhbCwgd2lsbCBoZWxwIHdpdGggdW5kZXJzdGFuZGluZyB0aGlzIGNvZGUgYW5kIGl0IGlzIHRoZXJlZm9yZSBub3QgdGhlXG4vLyBzaW5nbGUgc291cmNlIG9mIGluZm9ybWF0aW9uIGZvciBiZWluZyBhYmxlIHRvIGZpZ3VyZSBpdCBvdXQuXG4vLyBJdCBnZW5lcmFsbHkgZG9lcyBub3QgbmVlZCB0byBjaGFuZ2UgdW5sZXNzIHRoZSBzcGVjIGNoYW5nZXMgb3Igc3BlYyB2aW9sYXRpb25zIGFyZSBmb3VuZCwgb3Igb3B0aW1pemF0aW9uXG4vLyBvcHBvcnR1bml0aWVzIGFyZSBmb3VuZCAod2hpY2ggd291bGQgbGlrZWx5IG5vdCBmaXggdGhlc2Ugd2FybmluZ3MgaW4gYW55IGNhc2UpLlxuLy8gSXQncyB0aGVyZWZvcmUgbm90IGNvbnNpZGVyZWQgdG8gaGF2ZSBhbnkgdGFuZ2libGUgaW1wYWN0IG9uIHRoZSBtYWludGFpbmFiaWxpdHkgb2YgdGhlIGNvZGUgYmFzZS5cbi8vIEZvciByZWZlcmVuY2UsIG1vc3Qgb2YgdGhlIHBhcnNpbmcgbG9naWMgaXMgYmFzZWQgb246IGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLWVjbWFzY3JpcHQtbGFuZ3VhZ2UtZXhwcmVzc2lvbnNcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBtYXgtbGluZXMtcGVyLWZ1bmN0aW9uXG5leHBvcnQgZnVuY3Rpb24gcGFyc2Uoc3RhdGUsIGFjY2VzcywgbWluUHJlY2VkZW5jZSwgYmluZGluZ1R5cGUpIHtcbiAgICBpZiAoYmluZGluZ1R5cGUgPT09IDI4NCAvKiBDdXN0b21Db21tYW5kICovKSB7XG4gICAgICAgIHJldHVybiBuZXcgQ3VzdG9tRXhwcmVzc2lvbihzdGF0ZS5pbnB1dCk7XG4gICAgfVxuICAgIGlmIChzdGF0ZS5pbmRleCA9PT0gMCkge1xuICAgICAgICBpZiAoYmluZGluZ1R5cGUgJiAyMDQ4IC8qIEludGVycG9sYXRpb24gKi8pIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VJbnRlcnBvbGF0aW9uKHN0YXRlKTtcbiAgICAgICAgfVxuICAgICAgICBuZXh0VG9rZW4oc3RhdGUpO1xuICAgICAgICBpZiAoc3RhdGUuY3VycmVudFRva2VuICYgMTA0ODU3NiAvKiBFeHByZXNzaW9uVGVybWluYWwgKi8pIHtcbiAgICAgICAgICAgIHRocm93IFJlcG9ydGVyLmVycm9yKDEwMCAvKiBJbnZhbGlkRXhwcmVzc2lvblN0YXJ0ICovLCB7IHN0YXRlIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRlLmFzc2lnbmFibGUgPSA0NDggLyogQmluYXJ5ICovID4gbWluUHJlY2VkZW5jZTtcbiAgICBsZXQgcmVzdWx0ID0gdm9pZCAwO1xuICAgIGlmIChzdGF0ZS5jdXJyZW50VG9rZW4gJiAzMjc2OCAvKiBVbmFyeU9wICovKSB7XG4gICAgICAgIC8qKiBwYXJzZVVuYXJ5RXhwcmVzc2lvblxuICAgICAgICAgKiBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy11bmFyeS1vcGVyYXRvcnNcbiAgICAgICAgICpcbiAgICAgICAgICogVW5hcnlFeHByZXNzaW9uIDpcbiAgICAgICAgICogMS4gTGVmdEhhbmRTaWRlRXhwcmVzc2lvblxuICAgICAgICAgKiAyLiB2b2lkIFVuYXJ5RXhwcmVzc2lvblxuICAgICAgICAgKiAzLiB0eXBlb2YgVW5hcnlFeHByZXNzaW9uXG4gICAgICAgICAqIDQuICsgVW5hcnlFeHByZXNzaW9uXG4gICAgICAgICAqIDUuIC0gVW5hcnlFeHByZXNzaW9uXG4gICAgICAgICAqIDYuICEgVW5hcnlFeHByZXNzaW9uXG4gICAgICAgICAqXG4gICAgICAgICAqIElzVmFsaWRBc3NpZ25tZW50VGFyZ2V0XG4gICAgICAgICAqIDIsMyw0LDUsNiA9IGZhbHNlXG4gICAgICAgICAqIDEgPSBzZWUgcGFyc2VMZWZ0SGFuZFNpZGVFeHByZXNzaW9uXG4gICAgICAgICAqXG4gICAgICAgICAqIE5vdGU6IHRlY2huaWNhbGx5IHdlIHNob3VsZCB0aHJvdyBvbiArKyAvIC0tIC8gKysrIC8gLS0tLCBidXQgdGhlcmUncyBub3RoaW5nIHRvIGdhaW4gZnJvbSB0aGF0XG4gICAgICAgICAqL1xuICAgICAgICBjb25zdCBvcCA9IFRva2VuVmFsdWVzW3N0YXRlLmN1cnJlbnRUb2tlbiAmIDYzIC8qIFR5cGUgKi9dO1xuICAgICAgICBuZXh0VG9rZW4oc3RhdGUpO1xuICAgICAgICByZXN1bHQgPSBuZXcgVW5hcnlFeHByZXNzaW9uKG9wLCBwYXJzZShzdGF0ZSwgYWNjZXNzLCA0NDkgLyogTGVmdEhhbmRTaWRlICovLCBiaW5kaW5nVHlwZSkpO1xuICAgICAgICBzdGF0ZS5hc3NpZ25hYmxlID0gZmFsc2U7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvKiogcGFyc2VQcmltYXJ5RXhwcmVzc2lvblxuICAgICAgICAgKiBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy1wcmltYXJ5LWV4cHJlc3Npb25cbiAgICAgICAgICpcbiAgICAgICAgICogUHJpbWFyeUV4cHJlc3Npb24gOlxuICAgICAgICAgKiAxLiB0aGlzXG4gICAgICAgICAqIDIuIElkZW50aWZpZXJOYW1lXG4gICAgICAgICAqIDMuIExpdGVyYWxcbiAgICAgICAgICogNC4gQXJyYXlMaXRlcmFsRXhwcmVzc2lvblxuICAgICAgICAgKiA1LiBPYmplY3RMaXRlcmFsRXhwcmVzc2lvblxuICAgICAgICAgKiA2LiBUZW1wbGF0ZUxpdGVyYWxcbiAgICAgICAgICogNy4gUGFyZW50aGVzaXplZEV4cHJlc3Npb25cbiAgICAgICAgICpcbiAgICAgICAgICogTGl0ZXJhbCA6XG4gICAgICAgICAqIE51bGxMaXRlcmFsXG4gICAgICAgICAqIEJvb2xlYW5MaXRlcmFsXG4gICAgICAgICAqIE51bWVyaWNMaXRlcmFsXG4gICAgICAgICAqIFN0cmluZ0xpdGVyYWxcbiAgICAgICAgICpcbiAgICAgICAgICogUGFyZW50aGVzaXplZEV4cHJlc3Npb24gOlxuICAgICAgICAgKiAoIEFzc2lnbm1lbnRFeHByZXNzaW9uIClcbiAgICAgICAgICpcbiAgICAgICAgICogSXNWYWxpZEFzc2lnbm1lbnRUYXJnZXRcbiAgICAgICAgICogMSwzLDQsNSw2LDcgPSBmYWxzZVxuICAgICAgICAgKiAyID0gdHJ1ZVxuICAgICAgICAgKi9cbiAgICAgICAgcHJpbWFyeTogc3dpdGNoIChzdGF0ZS5jdXJyZW50VG9rZW4pIHtcbiAgICAgICAgICAgIGNhc2UgMzA3NyAvKiBQYXJlbnRTY29wZSAqLzogLy8gJHBhcmVudFxuICAgICAgICAgICAgICAgIHN0YXRlLmFzc2lnbmFibGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgICAgIG5leHRUb2tlbihzdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIGFjY2VzcysrOyAvLyBhbmNlc3RvclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29uc3VtZU9wdChzdGF0ZSwgMTYzOTIgLyogRG90ICovKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLmN1cnJlbnRUb2tlbiA9PT0gMTYzOTIgLyogRG90ICovKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgUmVwb3J0ZXIuZXJyb3IoMTAyIC8qIERvdWJsZURvdCAqLywgeyBzdGF0ZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHN0YXRlLmN1cnJlbnRUb2tlbiA9PT0gMTU3Mjg2NCAvKiBFT0YgKi8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBSZXBvcnRlci5lcnJvcigxMDUgLyogRXhwZWN0ZWRJZGVudGlmaWVyICovLCB7IHN0YXRlIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHN0YXRlLmN1cnJlbnRUb2tlbiAmIDUyNDI4OCAvKiBBY2Nlc3NTY29wZVRlcm1pbmFsICovKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhbmNlc3RvciA9IGFjY2VzcyAmIDUxMSAvKiBBbmNlc3RvciAqLztcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGFuY2VzdG9yID09PSAwID8gJHRoaXMgOiBhbmNlc3RvciA9PT0gMSA/ICRwYXJlbnQgOiBuZXcgQWNjZXNzVGhpc0V4cHJlc3Npb24oYW5jZXN0b3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXNzID0gNTEyIC8qIFRoaXMgKi87XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhayBwcmltYXJ5O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgUmVwb3J0ZXIuZXJyb3IoMTAzIC8qIEludmFsaWRNZW1iZXJFeHByZXNzaW9uICovLCB7IHN0YXRlIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSB3aGlsZSAoc3RhdGUuY3VycmVudFRva2VuID09PSAzMDc3IC8qIFBhcmVudFNjb3BlICovKTtcbiAgICAgICAgICAgIC8vIGZhbGxzIHRocm91Z2hcbiAgICAgICAgICAgIGNhc2UgMTAyNCAvKiBJZGVudGlmaWVyICovOiAvLyBpZGVudGlmaWVyXG4gICAgICAgICAgICAgICAgaWYgKGJpbmRpbmdUeXBlICYgNTEyIC8qIElzSXRlcmF0b3IgKi8pIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gbmV3IEJpbmRpbmdJZGVudGlmaWVyKHN0YXRlLnRva2VuVmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gbmV3IEFjY2Vzc1Njb3BlRXhwcmVzc2lvbihzdGF0ZS50b2tlblZhbHVlLCBhY2Nlc3MgJiA1MTEgLyogQW5jZXN0b3IgKi8pO1xuICAgICAgICAgICAgICAgICAgICBhY2Nlc3MgPSAxMDI0IC8qIFNjb3BlICovO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzdGF0ZS5hc3NpZ25hYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBuZXh0VG9rZW4oc3RhdGUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAzMDc2IC8qIFRoaXNTY29wZSAqLzogLy8gJHRoaXNcbiAgICAgICAgICAgICAgICBzdGF0ZS5hc3NpZ25hYmxlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgbmV4dFRva2VuKHN0YXRlKTtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSAkdGhpcztcbiAgICAgICAgICAgICAgICBhY2Nlc3MgPSA1MTIgLyogVGhpcyAqLztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgNjcxNzUwIC8qIE9wZW5QYXJlbiAqLzogLy8gcGFyZW50aGVzaXplZCBleHByZXNzaW9uXG4gICAgICAgICAgICAgICAgbmV4dFRva2VuKHN0YXRlKTtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBwYXJzZShzdGF0ZSwgMCAvKiBSZXNldCAqLywgNjIgLyogQXNzaWduICovLCBiaW5kaW5nVHlwZSk7XG4gICAgICAgICAgICAgICAgY29uc3VtZShzdGF0ZSwgMTgzNTAxOCAvKiBDbG9zZVBhcmVuICovKTtcbiAgICAgICAgICAgICAgICBhY2Nlc3MgPSAwIC8qIFJlc2V0ICovO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSA2NzE3NTYgLyogT3BlbkJyYWNrZXQgKi86XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gcGFyc2VBcnJheUxpdGVyYWxFeHByZXNzaW9uKHN0YXRlLCBhY2Nlc3MsIGJpbmRpbmdUeXBlKTtcbiAgICAgICAgICAgICAgICBhY2Nlc3MgPSAwIC8qIFJlc2V0ICovO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAxMzEwNzkgLyogT3BlbkJyYWNlICovOlxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IHBhcnNlT2JqZWN0TGl0ZXJhbEV4cHJlc3Npb24oc3RhdGUsIGJpbmRpbmdUeXBlKTtcbiAgICAgICAgICAgICAgICBhY2Nlc3MgPSAwIC8qIFJlc2V0ICovO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSA1NDA3MTMgLyogVGVtcGxhdGVUYWlsICovOlxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IG5ldyBUZW1wbGF0ZUV4cHJlc3Npb24oW3N0YXRlLnRva2VuVmFsdWVdKTtcbiAgICAgICAgICAgICAgICBzdGF0ZS5hc3NpZ25hYmxlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgbmV4dFRva2VuKHN0YXRlKTtcbiAgICAgICAgICAgICAgICBhY2Nlc3MgPSAwIC8qIFJlc2V0ICovO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSA1NDA3MTQgLyogVGVtcGxhdGVDb250aW51YXRpb24gKi86XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gcGFyc2VUZW1wbGF0ZShzdGF0ZSwgYWNjZXNzLCBiaW5kaW5nVHlwZSwgcmVzdWx0LCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgYWNjZXNzID0gMCAvKiBSZXNldCAqLztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgNDA5NiAvKiBTdHJpbmdMaXRlcmFsICovOlxuICAgICAgICAgICAgY2FzZSA4MTkyIC8qIE51bWVyaWNMaXRlcmFsICovOlxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IG5ldyBQcmltaXRpdmVMaXRlcmFsRXhwcmVzc2lvbihzdGF0ZS50b2tlblZhbHVlKTtcbiAgICAgICAgICAgICAgICBzdGF0ZS5hc3NpZ25hYmxlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgbmV4dFRva2VuKHN0YXRlKTtcbiAgICAgICAgICAgICAgICBhY2Nlc3MgPSAwIC8qIFJlc2V0ICovO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAyMDUwIC8qIE51bGxLZXl3b3JkICovOlxuICAgICAgICAgICAgY2FzZSAyMDUxIC8qIFVuZGVmaW5lZEtleXdvcmQgKi86XG4gICAgICAgICAgICBjYXNlIDIwNDkgLyogVHJ1ZUtleXdvcmQgKi86XG4gICAgICAgICAgICBjYXNlIDIwNDggLyogRmFsc2VLZXl3b3JkICovOlxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IFRva2VuVmFsdWVzW3N0YXRlLmN1cnJlbnRUb2tlbiAmIDYzIC8qIFR5cGUgKi9dO1xuICAgICAgICAgICAgICAgIHN0YXRlLmFzc2lnbmFibGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBuZXh0VG9rZW4oc3RhdGUpO1xuICAgICAgICAgICAgICAgIGFjY2VzcyA9IDAgLyogUmVzZXQgKi87XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5pbmRleCA+PSBzdGF0ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgUmVwb3J0ZXIuZXJyb3IoMTA0IC8qIFVuZXhwZWN0ZWRFbmRPZkV4cHJlc3Npb24gKi8sIHsgc3RhdGUgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBSZXBvcnRlci5lcnJvcigxMDEgLyogVW5jb25zdW1lZFRva2VuICovLCB7IHN0YXRlIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoYmluZGluZ1R5cGUgJiA1MTIgLyogSXNJdGVyYXRvciAqLykge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUZvck9mU3RhdGVtZW50KHN0YXRlLCByZXN1bHQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICg0NDkgLyogTGVmdEhhbmRTaWRlICovIDwgbWluUHJlY2VkZW5jZSkge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgLyoqIHBhcnNlTWVtYmVyRXhwcmVzc2lvbiAoVG9rZW4uRG90LCBUb2tlbi5PcGVuQnJhY2tldCwgVG9rZW4uVGVtcGxhdGVDb250aW51YXRpb24pXG4gICAgICAgICAqIE1lbWJlckV4cHJlc3Npb24gOlxuICAgICAgICAgKiAxLiBQcmltYXJ5RXhwcmVzc2lvblxuICAgICAgICAgKiAyLiBNZW1iZXJFeHByZXNzaW9uIFsgQXNzaWdubWVudEV4cHJlc3Npb24gXVxuICAgICAgICAgKiAzLiBNZW1iZXJFeHByZXNzaW9uIC4gSWRlbnRpZmllck5hbWVcbiAgICAgICAgICogNC4gTWVtYmVyRXhwcmVzc2lvbiBUZW1wbGF0ZUxpdGVyYWxcbiAgICAgICAgICpcbiAgICAgICAgICogSXNWYWxpZEFzc2lnbm1lbnRUYXJnZXRcbiAgICAgICAgICogMSw0ID0gZmFsc2VcbiAgICAgICAgICogMiwzID0gdHJ1ZVxuICAgICAgICAgKlxuICAgICAgICAgKlxuICAgICAgICAgKiBwYXJzZUNhbGxFeHByZXNzaW9uIChUb2tlbi5PcGVuUGFyZW4pXG4gICAgICAgICAqIENhbGxFeHByZXNzaW9uIDpcbiAgICAgICAgICogMS4gTWVtYmVyRXhwcmVzc2lvbiBBcmd1bWVudHNcbiAgICAgICAgICogMi4gQ2FsbEV4cHJlc3Npb24gQXJndW1lbnRzXG4gICAgICAgICAqIDMuIENhbGxFeHByZXNzaW9uIFsgQXNzaWdubWVudEV4cHJlc3Npb24gXVxuICAgICAgICAgKiA0LiBDYWxsRXhwcmVzc2lvbiAuIElkZW50aWZpZXJOYW1lXG4gICAgICAgICAqIDUuIENhbGxFeHByZXNzaW9uIFRlbXBsYXRlTGl0ZXJhbFxuICAgICAgICAgKlxuICAgICAgICAgKiBJc1ZhbGlkQXNzaWdubWVudFRhcmdldFxuICAgICAgICAgKiAxLDIsNSA9IGZhbHNlXG4gICAgICAgICAqIDMsNCA9IHRydWVcbiAgICAgICAgICovXG4gICAgICAgIGxldCBuYW1lID0gc3RhdGUudG9rZW5WYWx1ZTtcbiAgICAgICAgd2hpbGUgKChzdGF0ZS5jdXJyZW50VG9rZW4gJiAxNjM4NCAvKiBMZWZ0SGFuZFNpZGUgKi8pID4gMCkge1xuICAgICAgICAgICAgY29uc3QgYXJncyA9IFtdO1xuICAgICAgICAgICAgbGV0IHN0cmluZ3M7XG4gICAgICAgICAgICBzd2l0Y2ggKHN0YXRlLmN1cnJlbnRUb2tlbikge1xuICAgICAgICAgICAgICAgIGNhc2UgMTYzOTIgLyogRG90ICovOlxuICAgICAgICAgICAgICAgICAgICBzdGF0ZS5hc3NpZ25hYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgbmV4dFRva2VuKHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKChzdGF0ZS5jdXJyZW50VG9rZW4gJiAzMDcyIC8qIElkZW50aWZpZXJOYW1lICovKSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgUmVwb3J0ZXIuZXJyb3IoMTA1IC8qIEV4cGVjdGVkSWRlbnRpZmllciAqLywgeyBzdGF0ZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBuYW1lID0gc3RhdGUudG9rZW5WYWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgbmV4dFRva2VuKHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2hhbmdlICRUaGlzIHRvICRTY29wZSwgY2hhbmdlICRTY29wZSB0byAkTWVtYmVyLCBrZWVwICRNZW1iZXIgYXMtaXMsIGNoYW5nZSAkS2V5ZWQgdG8gJE1lbWJlciwgZGlzcmVnYXJkIG90aGVyIGZsYWdzXG4gICAgICAgICAgICAgICAgICAgIGFjY2VzcyA9ICgoYWNjZXNzICYgKDUxMiAvKiBUaGlzICovIHwgMTAyNCAvKiBTY29wZSAqLykpIDw8IDEpIHwgKGFjY2VzcyAmIDIwNDggLyogTWVtYmVyICovKSB8ICgoYWNjZXNzICYgNDA5NiAvKiBLZXllZCAqLykgPj4gMSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5jdXJyZW50VG9rZW4gPT09IDY3MTc1MCAvKiBPcGVuUGFyZW4gKi8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhY2Nlc3MgPT09IDAgLyogUmVzZXQgKi8pIHsgLy8gaWYgdGhlIGxlZnQgaGFuZCBzaWRlIGlzIGEgbGl0ZXJhbCwgbWFrZSBzdXJlIHdlIHBhcnNlIGEgQ2FsbE1lbWJlckV4cHJlc3Npb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2Nlc3MgPSAyMDQ4IC8qIE1lbWJlciAqLztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChhY2Nlc3MgJiAxMDI0IC8qIFNjb3BlICovKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBuZXcgQWNjZXNzU2NvcGVFeHByZXNzaW9uKG5hbWUsIHJlc3VsdC5hbmNlc3Rvcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7IC8vIGlmIGl0J3Mgbm90ICRTY29wZSwgaXQncyAkTWVtYmVyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBuZXcgQWNjZXNzTWVtYmVyRXhwcmVzc2lvbihyZXN1bHQsIG5hbWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgNjcxNzU2IC8qIE9wZW5CcmFja2V0ICovOlxuICAgICAgICAgICAgICAgICAgICBzdGF0ZS5hc3NpZ25hYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgbmV4dFRva2VuKHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgYWNjZXNzID0gNDA5NiAvKiBLZXllZCAqLztcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gbmV3IEFjY2Vzc0tleWVkRXhwcmVzc2lvbihyZXN1bHQsIHBhcnNlKHN0YXRlLCAwIC8qIFJlc2V0ICovLCA2MiAvKiBBc3NpZ24gKi8sIGJpbmRpbmdUeXBlKSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN1bWUoc3RhdGUsIDE4MzUwMjEgLyogQ2xvc2VCcmFja2V0ICovKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA2NzE3NTAgLyogT3BlblBhcmVuICovOlxuICAgICAgICAgICAgICAgICAgICBzdGF0ZS5hc3NpZ25hYmxlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIG5leHRUb2tlbihzdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChzdGF0ZS5jdXJyZW50VG9rZW4gIT09IDE4MzUwMTggLyogQ2xvc2VQYXJlbiAqLykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJncy5wdXNoKHBhcnNlKHN0YXRlLCAwIC8qIFJlc2V0ICovLCA2MiAvKiBBc3NpZ24gKi8sIGJpbmRpbmdUeXBlKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbnN1bWVPcHQoc3RhdGUsIDE1NzI4NzUgLyogQ29tbWEgKi8pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3VtZShzdGF0ZSwgMTgzNTAxOCAvKiBDbG9zZVBhcmVuICovKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFjY2VzcyAmIDEwMjQgLyogU2NvcGUgKi8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IG5ldyBDYWxsU2NvcGVFeHByZXNzaW9uKG5hbWUsIGFyZ3MsIHJlc3VsdC5hbmNlc3Rvcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoYWNjZXNzICYgMjA0OCAvKiBNZW1iZXIgKi8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IG5ldyBDYWxsTWVtYmVyRXhwcmVzc2lvbihyZXN1bHQsIG5hbWUsIGFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gbmV3IENhbGxGdW5jdGlvbkV4cHJlc3Npb24ocmVzdWx0LCBhcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBhY2Nlc3MgPSAwO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDU0MDcxMyAvKiBUZW1wbGF0ZVRhaWwgKi86XG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLmFzc2lnbmFibGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgc3RyaW5ncyA9IFtzdGF0ZS50b2tlblZhbHVlXTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gbmV3IFRhZ2dlZFRlbXBsYXRlRXhwcmVzc2lvbihzdHJpbmdzLCBzdHJpbmdzLCByZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICBuZXh0VG9rZW4oc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDU0MDcxNCAvKiBUZW1wbGF0ZUNvbnRpbnVhdGlvbiAqLzpcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gcGFyc2VUZW1wbGF0ZShzdGF0ZSwgYWNjZXNzLCBiaW5kaW5nVHlwZSwgcmVzdWx0LCB0cnVlKTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGlmICg0NDggLyogQmluYXJ5ICovIDwgbWluUHJlY2VkZW5jZSkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICAvKiogcGFyc2VCaW5hcnlFeHByZXNzaW9uXG4gICAgICogaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtbXVsdGlwbGljYXRpdmUtb3BlcmF0b3JzXG4gICAgICpcbiAgICAgKiBNdWx0aXBsaWNhdGl2ZUV4cHJlc3Npb24gOiAobG9jYWwgcHJlY2VkZW5jZSA2KVxuICAgICAqIFVuYXJ5RXhwcmVzc2lvblxuICAgICAqIE11bHRpcGxpY2F0aXZlRXhwcmVzc2lvbiAqIC8gJSBVbmFyeUV4cHJlc3Npb25cbiAgICAgKlxuICAgICAqIEFkZGl0aXZlRXhwcmVzc2lvbiA6IChsb2NhbCBwcmVjZWRlbmNlIDUpXG4gICAgICogTXVsdGlwbGljYXRpdmVFeHByZXNzaW9uXG4gICAgICogQWRkaXRpdmVFeHByZXNzaW9uICsgLSBNdWx0aXBsaWNhdGl2ZUV4cHJlc3Npb25cbiAgICAgKlxuICAgICAqIFJlbGF0aW9uYWxFeHByZXNzaW9uIDogKGxvY2FsIHByZWNlZGVuY2UgNClcbiAgICAgKiBBZGRpdGl2ZUV4cHJlc3Npb25cbiAgICAgKiBSZWxhdGlvbmFsRXhwcmVzc2lvbiA8ID4gPD0gPj0gaW5zdGFuY2VvZiBpbiBBZGRpdGl2ZUV4cHJlc3Npb25cbiAgICAgKlxuICAgICAqIEVxdWFsaXR5RXhwcmVzc2lvbiA6IChsb2NhbCBwcmVjZWRlbmNlIDMpXG4gICAgICogUmVsYXRpb25hbEV4cHJlc3Npb25cbiAgICAgKiBFcXVhbGl0eUV4cHJlc3Npb24gPT0gIT0gPT09ICE9PSBSZWxhdGlvbmFsRXhwcmVzc2lvblxuICAgICAqXG4gICAgICogTG9naWNhbEFOREV4cHJlc3Npb24gOiAobG9jYWwgcHJlY2VkZW5jZSAyKVxuICAgICAqIEVxdWFsaXR5RXhwcmVzc2lvblxuICAgICAqIExvZ2ljYWxBTkRFeHByZXNzaW9uICYmIEVxdWFsaXR5RXhwcmVzc2lvblxuICAgICAqXG4gICAgICogTG9naWNhbE9SRXhwcmVzc2lvbiA6IChsb2NhbCBwcmVjZWRlbmNlIDEpXG4gICAgICogTG9naWNhbEFOREV4cHJlc3Npb25cbiAgICAgKiBMb2dpY2FsT1JFeHByZXNzaW9uIHx8IExvZ2ljYWxBTkRFeHByZXNzaW9uXG4gICAgICovXG4gICAgd2hpbGUgKChzdGF0ZS5jdXJyZW50VG9rZW4gJiA2NTUzNiAvKiBCaW5hcnlPcCAqLykgPiAwKSB7XG4gICAgICAgIGNvbnN0IG9wVG9rZW4gPSBzdGF0ZS5jdXJyZW50VG9rZW47XG4gICAgICAgIGlmICgob3BUb2tlbiAmIDQ0OCAvKiBQcmVjZWRlbmNlICovKSA8PSBtaW5QcmVjZWRlbmNlKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBuZXh0VG9rZW4oc3RhdGUpO1xuICAgICAgICByZXN1bHQgPSBuZXcgQmluYXJ5RXhwcmVzc2lvbihUb2tlblZhbHVlc1tvcFRva2VuICYgNjMgLyogVHlwZSAqL10sIHJlc3VsdCwgcGFyc2Uoc3RhdGUsIGFjY2Vzcywgb3BUb2tlbiAmIDQ0OCAvKiBQcmVjZWRlbmNlICovLCBiaW5kaW5nVHlwZSkpO1xuICAgICAgICBzdGF0ZS5hc3NpZ25hYmxlID0gZmFsc2U7XG4gICAgfVxuICAgIGlmICg2MyAvKiBDb25kaXRpb25hbCAqLyA8IG1pblByZWNlZGVuY2UpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogcGFyc2VDb25kaXRpb25hbEV4cHJlc3Npb25cbiAgICAgKiBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3Byb2QtQ29uZGl0aW9uYWxFeHByZXNzaW9uXG4gICAgICpcbiAgICAgKiBDb25kaXRpb25hbEV4cHJlc3Npb24gOlxuICAgICAqIDEuIEJpbmFyeUV4cHJlc3Npb25cbiAgICAgKiAyLiBCaW5hcnlFeHByZXNzaW9uID8gQXNzaWdubWVudEV4cHJlc3Npb24gOiBBc3NpZ25tZW50RXhwcmVzc2lvblxuICAgICAqXG4gICAgICogSXNWYWxpZEFzc2lnbm1lbnRUYXJnZXRcbiAgICAgKiAxLDIgPSBmYWxzZVxuICAgICAqL1xuICAgIGlmIChjb25zdW1lT3B0KHN0YXRlLCAxNTcyODc5IC8qIFF1ZXN0aW9uICovKSkge1xuICAgICAgICBjb25zdCB5ZXMgPSBwYXJzZShzdGF0ZSwgYWNjZXNzLCA2MiAvKiBBc3NpZ24gKi8sIGJpbmRpbmdUeXBlKTtcbiAgICAgICAgY29uc3VtZShzdGF0ZSwgMTU3Mjg3OCAvKiBDb2xvbiAqLyk7XG4gICAgICAgIHJlc3VsdCA9IG5ldyBDb25kaXRpb25hbEV4cHJlc3Npb24ocmVzdWx0LCB5ZXMsIHBhcnNlKHN0YXRlLCBhY2Nlc3MsIDYyIC8qIEFzc2lnbiAqLywgYmluZGluZ1R5cGUpKTtcbiAgICAgICAgc3RhdGUuYXNzaWduYWJsZSA9IGZhbHNlO1xuICAgIH1cbiAgICBpZiAoNjIgLyogQXNzaWduICovIDwgbWluUHJlY2VkZW5jZSkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICAvKiogcGFyc2VBc3NpZ25tZW50RXhwcmVzc2lvblxuICAgICAqIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jcHJvZC1Bc3NpZ25tZW50RXhwcmVzc2lvblxuICAgICAqIE5vdGU6IEFzc2lnbm1lbnRFeHByZXNzaW9uIGhlcmUgaXMgZXF1aXZhbGVudCB0byBFUyBFeHByZXNzaW9uIGJlY2F1c2Ugd2UgZG9uJ3QgcGFyc2UgdGhlIGNvbW1hIG9wZXJhdG9yXG4gICAgICpcbiAgICAgKiBBc3NpZ25tZW50RXhwcmVzc2lvbiA6XG4gICAgICogMS4gQ29uZGl0aW9uYWxFeHByZXNzaW9uXG4gICAgICogMi4gTGVmdEhhbmRTaWRlRXhwcmVzc2lvbiA9IEFzc2lnbm1lbnRFeHByZXNzaW9uXG4gICAgICpcbiAgICAgKiBJc1ZhbGlkQXNzaWdubWVudFRhcmdldFxuICAgICAqIDEsMiA9IGZhbHNlXG4gICAgICovXG4gICAgaWYgKGNvbnN1bWVPcHQoc3RhdGUsIDEwNDg2MTUgLyogRXF1YWxzICovKSkge1xuICAgICAgICBpZiAoIXN0YXRlLmFzc2lnbmFibGUpIHtcbiAgICAgICAgICAgIHRocm93IFJlcG9ydGVyLmVycm9yKDE1MCAvKiBOb3RBc3NpZ25hYmxlICovLCB7IHN0YXRlIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJlc3VsdCA9IG5ldyBBc3NpZ25FeHByZXNzaW9uKHJlc3VsdCwgcGFyc2Uoc3RhdGUsIGFjY2VzcywgNjIgLyogQXNzaWduICovLCBiaW5kaW5nVHlwZSkpO1xuICAgIH1cbiAgICBpZiAoNjEgLyogVmFyaWFkaWMgKi8gPCBtaW5QcmVjZWRlbmNlKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIC8qKiBwYXJzZVZhbHVlQ29udmVydGVyXG4gICAgICovXG4gICAgd2hpbGUgKGNvbnN1bWVPcHQoc3RhdGUsIDE1NzI4ODMgLyogQmFyICovKSkge1xuICAgICAgICBpZiAoc3RhdGUuY3VycmVudFRva2VuID09PSAxNTcyODY0IC8qIEVPRiAqLykge1xuICAgICAgICAgICAgdGhyb3cgUmVwb3J0ZXIuZXJyb3IoMTEyKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuYW1lID0gc3RhdGUudG9rZW5WYWx1ZTtcbiAgICAgICAgbmV4dFRva2VuKHN0YXRlKTtcbiAgICAgICAgY29uc3QgYXJncyA9IG5ldyBBcnJheSgpO1xuICAgICAgICB3aGlsZSAoY29uc3VtZU9wdChzdGF0ZSwgMTU3Mjg3OCAvKiBDb2xvbiAqLykpIHtcbiAgICAgICAgICAgIGFyZ3MucHVzaChwYXJzZShzdGF0ZSwgYWNjZXNzLCA2MiAvKiBBc3NpZ24gKi8sIGJpbmRpbmdUeXBlKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmVzdWx0ID0gbmV3IFZhbHVlQ29udmVydGVyRXhwcmVzc2lvbihyZXN1bHQsIG5hbWUsIGFyZ3MpO1xuICAgIH1cbiAgICAvKiogcGFyc2VCaW5kaW5nQmVoYXZpb3JcbiAgICAgKi9cbiAgICB3aGlsZSAoY29uc3VtZU9wdChzdGF0ZSwgMTU3Mjg4MCAvKiBBbXBlcnNhbmQgKi8pKSB7XG4gICAgICAgIGlmIChzdGF0ZS5jdXJyZW50VG9rZW4gPT09IDE1NzI4NjQgLyogRU9GICovKSB7XG4gICAgICAgICAgICB0aHJvdyBSZXBvcnRlci5lcnJvcigxMTMpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5hbWUgPSBzdGF0ZS50b2tlblZhbHVlO1xuICAgICAgICBuZXh0VG9rZW4oc3RhdGUpO1xuICAgICAgICBjb25zdCBhcmdzID0gbmV3IEFycmF5KCk7XG4gICAgICAgIHdoaWxlIChjb25zdW1lT3B0KHN0YXRlLCAxNTcyODc4IC8qIENvbG9uICovKSkge1xuICAgICAgICAgICAgYXJncy5wdXNoKHBhcnNlKHN0YXRlLCBhY2Nlc3MsIDYyIC8qIEFzc2lnbiAqLywgYmluZGluZ1R5cGUpKTtcbiAgICAgICAgfVxuICAgICAgICByZXN1bHQgPSBuZXcgQmluZGluZ0JlaGF2aW9yRXhwcmVzc2lvbihyZXN1bHQsIG5hbWUsIGFyZ3MpO1xuICAgIH1cbiAgICBpZiAoc3RhdGUuY3VycmVudFRva2VuICE9PSAxNTcyODY0IC8qIEVPRiAqLykge1xuICAgICAgICBpZiAoYmluZGluZ1R5cGUgJiAyMDQ4IC8qIEludGVycG9sYXRpb24gKi8pIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdGF0ZS50b2tlblJhdyA9PT0gJ29mJykge1xuICAgICAgICAgICAgdGhyb3cgUmVwb3J0ZXIuZXJyb3IoMTUxIC8qIFVuZXhwZWN0ZWRGb3JPZiAqLywgeyBzdGF0ZSB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBSZXBvcnRlci5lcnJvcigxMDEgLyogVW5jb25zdW1lZFRva2VuICovLCB7IHN0YXRlIH0pO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIHJldHVybiByZXN1bHQ7XG59XG4vKipcbiAqIHBhcnNlQXJyYXlMaXRlcmFsRXhwcmVzc2lvblxuICogaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNwcm9kLUFycmF5TGl0ZXJhbEV4cHJlc3Npb25cbiAqXG4gKiBBcnJheUxpdGVyYWxFeHByZXNzaW9uIDpcbiAqIFsgRWxpc2lvbihvcHQpIF1cbiAqIFsgRWxlbWVudExpc3QgXVxuICogWyBFbGVtZW50TGlzdCwgRWxpc2lvbihvcHQpIF1cbiAqXG4gKiBFbGVtZW50TGlzdCA6XG4gKiBFbGlzaW9uKG9wdCkgQXNzaWdubWVudEV4cHJlc3Npb25cbiAqIEVsZW1lbnRMaXN0LCBFbGlzaW9uKG9wdCkgQXNzaWdubWVudEV4cHJlc3Npb25cbiAqXG4gKiBFbGlzaW9uIDpcbiAqICxcbiAqIEVsaXNpb24gLFxuICovXG5mdW5jdGlvbiBwYXJzZUFycmF5TGl0ZXJhbEV4cHJlc3Npb24oc3RhdGUsIGFjY2VzcywgYmluZGluZ1R5cGUpIHtcbiAgICBuZXh0VG9rZW4oc3RhdGUpO1xuICAgIGNvbnN0IGVsZW1lbnRzID0gbmV3IEFycmF5KCk7XG4gICAgd2hpbGUgKHN0YXRlLmN1cnJlbnRUb2tlbiAhPT0gMTgzNTAyMSAvKiBDbG9zZUJyYWNrZXQgKi8pIHtcbiAgICAgICAgaWYgKGNvbnN1bWVPcHQoc3RhdGUsIDE1NzI4NzUgLyogQ29tbWEgKi8pKSB7XG4gICAgICAgICAgICBlbGVtZW50cy5wdXNoKCR1bmRlZmluZWQpO1xuICAgICAgICAgICAgaWYgKHN0YXRlLmN1cnJlbnRUb2tlbiA9PT0gMTgzNTAyMSAvKiBDbG9zZUJyYWNrZXQgKi8pIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGVsZW1lbnRzLnB1c2gocGFyc2Uoc3RhdGUsIGFjY2VzcywgNjIgLyogQXNzaWduICovLCBiaW5kaW5nVHlwZSAmIH41MTIgLyogSXNJdGVyYXRvciAqLykpO1xuICAgICAgICAgICAgaWYgKGNvbnN1bWVPcHQoc3RhdGUsIDE1NzI4NzUgLyogQ29tbWEgKi8pKSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlLmN1cnJlbnRUb2tlbiA9PT0gMTgzNTAyMSAvKiBDbG9zZUJyYWNrZXQgKi8pIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3VtZShzdGF0ZSwgMTgzNTAyMSAvKiBDbG9zZUJyYWNrZXQgKi8pO1xuICAgIGlmIChiaW5kaW5nVHlwZSAmIDUxMiAvKiBJc0l0ZXJhdG9yICovKSB7XG4gICAgICAgIHJldHVybiBuZXcgQXJyYXlCaW5kaW5nUGF0dGVybihlbGVtZW50cyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBzdGF0ZS5hc3NpZ25hYmxlID0gZmFsc2U7XG4gICAgICAgIHJldHVybiBuZXcgQXJyYXlMaXRlcmFsRXhwcmVzc2lvbihlbGVtZW50cyk7XG4gICAgfVxufVxuZnVuY3Rpb24gcGFyc2VGb3JPZlN0YXRlbWVudChzdGF0ZSwgcmVzdWx0KSB7XG4gICAgaWYgKChyZXN1bHQuJGtpbmQgJiA2NTUzNiAvKiBJc0ZvckRlY2xhcmF0aW9uICovKSA9PT0gMCkge1xuICAgICAgICB0aHJvdyBSZXBvcnRlci5lcnJvcigxMDYgLyogSW52YWxpZEZvckRlY2xhcmF0aW9uICovLCB7IHN0YXRlIH0pO1xuICAgIH1cbiAgICBpZiAoc3RhdGUuY3VycmVudFRva2VuICE9PSAxMDUxMTc5IC8qIE9mS2V5d29yZCAqLykge1xuICAgICAgICB0aHJvdyBSZXBvcnRlci5lcnJvcigxMDYgLyogSW52YWxpZEZvckRlY2xhcmF0aW9uICovLCB7IHN0YXRlIH0pO1xuICAgIH1cbiAgICBuZXh0VG9rZW4oc3RhdGUpO1xuICAgIGNvbnN0IGRlY2xhcmF0aW9uID0gcmVzdWx0O1xuICAgIGNvbnN0IHN0YXRlbWVudCA9IHBhcnNlKHN0YXRlLCAwIC8qIFJlc2V0ICovLCA2MSAvKiBWYXJpYWRpYyAqLywgMCAvKiBOb25lICovKTtcbiAgICByZXR1cm4gbmV3IEZvck9mU3RhdGVtZW50KGRlY2xhcmF0aW9uLCBzdGF0ZW1lbnQpO1xufVxuLyoqXG4gKiBwYXJzZU9iamVjdExpdGVyYWxFeHByZXNzaW9uXG4gKiBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3Byb2QtTGl0ZXJhbFxuICpcbiAqIE9iamVjdExpdGVyYWxFeHByZXNzaW9uIDpcbiAqIHsgfVxuICogeyBQcm9wZXJ0eURlZmluaXRpb25MaXN0IH1cbiAqXG4gKiBQcm9wZXJ0eURlZmluaXRpb25MaXN0IDpcbiAqIFByb3BlcnR5RGVmaW5pdGlvblxuICogUHJvcGVydHlEZWZpbml0aW9uTGlzdCwgUHJvcGVydHlEZWZpbml0aW9uXG4gKlxuICogUHJvcGVydHlEZWZpbml0aW9uIDpcbiAqIElkZW50aWZpZXJOYW1lXG4gKiBQcm9wZXJ0eU5hbWUgOiBBc3NpZ25tZW50RXhwcmVzc2lvblxuICpcbiAqIFByb3BlcnR5TmFtZSA6XG4gKiBJZGVudGlmaWVyTmFtZVxuICogU3RyaW5nTGl0ZXJhbFxuICogTnVtZXJpY0xpdGVyYWxcbiAqL1xuZnVuY3Rpb24gcGFyc2VPYmplY3RMaXRlcmFsRXhwcmVzc2lvbihzdGF0ZSwgYmluZGluZ1R5cGUpIHtcbiAgICBjb25zdCBrZXlzID0gbmV3IEFycmF5KCk7XG4gICAgY29uc3QgdmFsdWVzID0gbmV3IEFycmF5KCk7XG4gICAgbmV4dFRva2VuKHN0YXRlKTtcbiAgICB3aGlsZSAoc3RhdGUuY3VycmVudFRva2VuICE9PSAxODM1MDE3IC8qIENsb3NlQnJhY2UgKi8pIHtcbiAgICAgICAga2V5cy5wdXNoKHN0YXRlLnRva2VuVmFsdWUpO1xuICAgICAgICAvLyBMaXRlcmFsID0gbWFuZGF0b3J5IGNvbG9uXG4gICAgICAgIGlmIChzdGF0ZS5jdXJyZW50VG9rZW4gJiAxMjI4OCAvKiBTdHJpbmdPck51bWVyaWNMaXRlcmFsICovKSB7XG4gICAgICAgICAgICBuZXh0VG9rZW4oc3RhdGUpO1xuICAgICAgICAgICAgY29uc3VtZShzdGF0ZSwgMTU3Mjg3OCAvKiBDb2xvbiAqLyk7XG4gICAgICAgICAgICB2YWx1ZXMucHVzaChwYXJzZShzdGF0ZSwgMCAvKiBSZXNldCAqLywgNjIgLyogQXNzaWduICovLCBiaW5kaW5nVHlwZSAmIH41MTIgLyogSXNJdGVyYXRvciAqLykpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHN0YXRlLmN1cnJlbnRUb2tlbiAmIDMwNzIgLyogSWRlbnRpZmllck5hbWUgKi8pIHtcbiAgICAgICAgICAgIC8vIElkZW50aWZpZXJOYW1lID0gb3B0aW9uYWwgY29sb25cbiAgICAgICAgICAgIGNvbnN0IHsgY3VycmVudENoYXIsIGN1cnJlbnRUb2tlbiwgaW5kZXggfSA9IHN0YXRlO1xuICAgICAgICAgICAgbmV4dFRva2VuKHN0YXRlKTtcbiAgICAgICAgICAgIGlmIChjb25zdW1lT3B0KHN0YXRlLCAxNTcyODc4IC8qIENvbG9uICovKSkge1xuICAgICAgICAgICAgICAgIHZhbHVlcy5wdXNoKHBhcnNlKHN0YXRlLCAwIC8qIFJlc2V0ICovLCA2MiAvKiBBc3NpZ24gKi8sIGJpbmRpbmdUeXBlICYgfjUxMiAvKiBJc0l0ZXJhdG9yICovKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBTaG9ydGhhbmRcbiAgICAgICAgICAgICAgICBzdGF0ZS5jdXJyZW50Q2hhciA9IGN1cnJlbnRDaGFyO1xuICAgICAgICAgICAgICAgIHN0YXRlLmN1cnJlbnRUb2tlbiA9IGN1cnJlbnRUb2tlbjtcbiAgICAgICAgICAgICAgICBzdGF0ZS5pbmRleCA9IGluZGV4O1xuICAgICAgICAgICAgICAgIHZhbHVlcy5wdXNoKHBhcnNlKHN0YXRlLCAwIC8qIFJlc2V0ICovLCA0NTAgLyogUHJpbWFyeSAqLywgYmluZGluZ1R5cGUgJiB+NTEyIC8qIElzSXRlcmF0b3IgKi8pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IFJlcG9ydGVyLmVycm9yKDEwNyAvKiBJbnZhbGlkT2JqZWN0TGl0ZXJhbFByb3BlcnR5RGVmaW5pdGlvbiAqLywgeyBzdGF0ZSB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RhdGUuY3VycmVudFRva2VuICE9PSAxODM1MDE3IC8qIENsb3NlQnJhY2UgKi8pIHtcbiAgICAgICAgICAgIGNvbnN1bWUoc3RhdGUsIDE1NzI4NzUgLyogQ29tbWEgKi8pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN1bWUoc3RhdGUsIDE4MzUwMTcgLyogQ2xvc2VCcmFjZSAqLyk7XG4gICAgaWYgKGJpbmRpbmdUeXBlICYgNTEyIC8qIElzSXRlcmF0b3IgKi8pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBPYmplY3RCaW5kaW5nUGF0dGVybihrZXlzLCB2YWx1ZXMpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgc3RhdGUuYXNzaWduYWJsZSA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gbmV3IE9iamVjdExpdGVyYWxFeHByZXNzaW9uKGtleXMsIHZhbHVlcyk7XG4gICAgfVxufVxuZnVuY3Rpb24gcGFyc2VJbnRlcnBvbGF0aW9uKHN0YXRlKSB7XG4gICAgY29uc3QgcGFydHMgPSBbXTtcbiAgICBjb25zdCBleHByZXNzaW9ucyA9IFtdO1xuICAgIGNvbnN0IGxlbmd0aCA9IHN0YXRlLmxlbmd0aDtcbiAgICBsZXQgcmVzdWx0ID0gJyc7XG4gICAgd2hpbGUgKHN0YXRlLmluZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIHN3aXRjaCAoc3RhdGUuY3VycmVudENoYXIpIHtcbiAgICAgICAgICAgIGNhc2UgMzYgLyogRG9sbGFyICovOlxuICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLmluZGV4ICsgMSkgPT09IDEyMyAvKiBPcGVuQnJhY2UgKi8pIHtcbiAgICAgICAgICAgICAgICAgICAgcGFydHMucHVzaChyZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUuaW5kZXggKz0gMjtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUuY3VycmVudENoYXIgPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLmluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgbmV4dFRva2VuKHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhwcmVzc2lvbiA9IHBhcnNlKHN0YXRlLCAwIC8qIFJlc2V0ICovLCA2MSAvKiBWYXJpYWRpYyAqLywgMjA0OCAvKiBJbnRlcnBvbGF0aW9uICovKTtcbiAgICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbnMucHVzaChleHByZXNzaW9uKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJyQnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgOTIgLyogQmFja3NsYXNoICovOlxuICAgICAgICAgICAgICAgIHJlc3VsdCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKHVuZXNjYXBlQ29kZShuZXh0Q2hhcihzdGF0ZSkpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmVzdWx0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoc3RhdGUuY3VycmVudENoYXIpO1xuICAgICAgICB9XG4gICAgICAgIG5leHRDaGFyKHN0YXRlKTtcbiAgICB9XG4gICAgaWYgKGV4cHJlc3Npb25zLmxlbmd0aCkge1xuICAgICAgICBwYXJ0cy5wdXNoKHJlc3VsdCk7XG4gICAgICAgIHJldHVybiBuZXcgSW50ZXJwb2xhdGlvbihwYXJ0cywgZXhwcmVzc2lvbnMpO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbi8qKlxuICogcGFyc2VUZW1wbGF0ZUxpdGVyYWxFeHByZXNzaW9uXG4gKiBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3Byb2QtTGl0ZXJhbFxuICpcbiAqIFRlbXBsYXRlRXhwcmVzc2lvbiA6XG4gKiBOb1N1YnN0aXR1dGlvblRlbXBsYXRlXG4gKiBUZW1wbGF0ZUhlYWRcbiAqXG4gKiBOb1N1YnN0aXR1dGlvblRlbXBsYXRlIDpcbiAqIGAgVGVtcGxhdGVDaGFyYWN0ZXJzKG9wdCkgYFxuICpcbiAqIFRlbXBsYXRlSGVhZCA6XG4gKiBgIFRlbXBsYXRlQ2hhcmFjdGVycyhvcHQpICR7XG4gKlxuICogVGVtcGxhdGVTdWJzdGl0dXRpb25UYWlsIDpcbiAqIFRlbXBsYXRlTWlkZGxlXG4gKiBUZW1wbGF0ZVRhaWxcbiAqXG4gKiBUZW1wbGF0ZU1pZGRsZSA6XG4gKiB9IFRlbXBsYXRlQ2hhcmFjdGVycyhvcHQpICR7XG4gKlxuICogVGVtcGxhdGVUYWlsIDpcbiAqIH0gVGVtcGxhdGVDaGFyYWN0ZXJzKG9wdCkgYFxuICpcbiAqIFRlbXBsYXRlQ2hhcmFjdGVycyA6XG4gKiBUZW1wbGF0ZUNoYXJhY3RlciBUZW1wbGF0ZUNoYXJhY3RlcnMob3B0KVxuICpcbiAqIFRlbXBsYXRlQ2hhcmFjdGVyIDpcbiAqICQgW2xvb2thaGVhZCDiiaAge11cbiAqIFxcIEVzY2FwZVNlcXVlbmNlXG4gKiBTb3VyY2VDaGFyYWN0ZXIgKGJ1dCBub3Qgb25lIG9mIGAgb3IgXFwgb3IgJClcbiAqL1xuZnVuY3Rpb24gcGFyc2VUZW1wbGF0ZShzdGF0ZSwgYWNjZXNzLCBiaW5kaW5nVHlwZSwgcmVzdWx0LCB0YWdnZWQpIHtcbiAgICBjb25zdCBjb29rZWQgPSBbc3RhdGUudG9rZW5WYWx1ZV07XG4gICAgLy8gVE9ETzogcHJvcGVybHkgaW1wbGVtZW50IHJhdyBwYXJ0cyAvIGRlY2lkZSB3aGV0aGVyIHdlIHdhbnQgdGhpc1xuICAgIGNvbnN1bWUoc3RhdGUsIDU0MDcxNCAvKiBUZW1wbGF0ZUNvbnRpbnVhdGlvbiAqLyk7XG4gICAgY29uc3QgZXhwcmVzc2lvbnMgPSBbcGFyc2Uoc3RhdGUsIGFjY2VzcywgNjIgLyogQXNzaWduICovLCBiaW5kaW5nVHlwZSldO1xuICAgIHdoaWxlICgoc3RhdGUuY3VycmVudFRva2VuID0gc2NhblRlbXBsYXRlVGFpbChzdGF0ZSkpICE9PSA1NDA3MTMgLyogVGVtcGxhdGVUYWlsICovKSB7XG4gICAgICAgIGNvb2tlZC5wdXNoKHN0YXRlLnRva2VuVmFsdWUpO1xuICAgICAgICBjb25zdW1lKHN0YXRlLCA1NDA3MTQgLyogVGVtcGxhdGVDb250aW51YXRpb24gKi8pO1xuICAgICAgICBleHByZXNzaW9ucy5wdXNoKHBhcnNlKHN0YXRlLCBhY2Nlc3MsIDYyIC8qIEFzc2lnbiAqLywgYmluZGluZ1R5cGUpKTtcbiAgICB9XG4gICAgY29va2VkLnB1c2goc3RhdGUudG9rZW5WYWx1ZSk7XG4gICAgc3RhdGUuYXNzaWduYWJsZSA9IGZhbHNlO1xuICAgIGlmICh0YWdnZWQpIHtcbiAgICAgICAgbmV4dFRva2VuKHN0YXRlKTtcbiAgICAgICAgcmV0dXJuIG5ldyBUYWdnZWRUZW1wbGF0ZUV4cHJlc3Npb24oY29va2VkLCBjb29rZWQsIHJlc3VsdCwgZXhwcmVzc2lvbnMpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgbmV4dFRva2VuKHN0YXRlKTtcbiAgICAgICAgcmV0dXJuIG5ldyBUZW1wbGF0ZUV4cHJlc3Npb24oY29va2VkLCBleHByZXNzaW9ucyk7XG4gICAgfVxufVxuZnVuY3Rpb24gbmV4dFRva2VuKHN0YXRlKSB7XG4gICAgd2hpbGUgKHN0YXRlLmluZGV4IDwgc3RhdGUubGVuZ3RoKSB7XG4gICAgICAgIHN0YXRlLnN0YXJ0SW5kZXggPSBzdGF0ZS5pbmRleDtcbiAgICAgICAgaWYgKChzdGF0ZS5jdXJyZW50VG9rZW4gPSAoQ2hhclNjYW5uZXJzW3N0YXRlLmN1cnJlbnRDaGFyXShzdGF0ZSkpKSAhPSBudWxsKSB7IC8vIGEgbnVsbCB0b2tlbiBtZWFucyB0aGUgY2hhcmFjdGVyIG11c3QgYmUgc2tpcHBlZFxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRlLmN1cnJlbnRUb2tlbiA9IDE1NzI4NjQgLyogRU9GICovO1xufVxuZnVuY3Rpb24gbmV4dENoYXIoc3RhdGUpIHtcbiAgICByZXR1cm4gc3RhdGUuY3VycmVudENoYXIgPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUuaW5kZXgpO1xufVxuZnVuY3Rpb24gc2NhbklkZW50aWZpZXIoc3RhdGUpIHtcbiAgICAvLyBydW4gdG8gdGhlIG5leHQgbm9uLWlkUGFydFxuICAgIHdoaWxlIChJZFBhcnRzW25leHRDaGFyKHN0YXRlKV0pXG4gICAgICAgIDtcbiAgICBjb25zdCB0b2tlbiA9IEtleXdvcmRMb29rdXBbc3RhdGUudG9rZW5WYWx1ZSA9IHN0YXRlLnRva2VuUmF3XTtcbiAgICByZXR1cm4gdG9rZW4gPT09IHVuZGVmaW5lZCA/IDEwMjQgLyogSWRlbnRpZmllciAqLyA6IHRva2VuO1xufVxuZnVuY3Rpb24gc2Nhbk51bWJlcihzdGF0ZSwgaXNGbG9hdCkge1xuICAgIGxldCBjaGFyID0gc3RhdGUuY3VycmVudENoYXI7XG4gICAgaWYgKGlzRmxvYXQgPT09IGZhbHNlKSB7XG4gICAgICAgIGRvIHtcbiAgICAgICAgICAgIGNoYXIgPSBuZXh0Q2hhcihzdGF0ZSk7XG4gICAgICAgIH0gd2hpbGUgKGNoYXIgPD0gNTcgLyogTmluZSAqLyAmJiBjaGFyID49IDQ4IC8qIFplcm8gKi8pO1xuICAgICAgICBpZiAoY2hhciAhPT0gNDYgLyogRG90ICovKSB7XG4gICAgICAgICAgICBzdGF0ZS50b2tlblZhbHVlID0gcGFyc2VJbnQoc3RhdGUudG9rZW5SYXcsIDEwKTtcbiAgICAgICAgICAgIHJldHVybiA4MTkyIC8qIE51bWVyaWNMaXRlcmFsICovO1xuICAgICAgICB9XG4gICAgICAgIC8vIHBhc3QgdGhpcyBwb2ludCBpdCdzIGFsd2F5cyBhIGZsb2F0XG4gICAgICAgIGNoYXIgPSBuZXh0Q2hhcihzdGF0ZSk7XG4gICAgICAgIGlmIChzdGF0ZS5pbmRleCA+PSBzdGF0ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgIC8vIHVubGVzcyB0aGUgbnVtYmVyIGVuZHMgd2l0aCBhIGRvdCAtIHRoYXQgYmVoYXZlcyBhIGxpdHRsZSBkaWZmZXJlbnQgaW4gbmF0aXZlIEVTIGV4cHJlc3Npb25zXG4gICAgICAgICAgICAvLyBidXQgaW4gb3VyIEFTVCB0aGF0IGJlaGF2aW9yIGhhcyBubyBlZmZlY3QgYmVjYXVzZSBudW1iZXJzIGFyZSBhbHdheXMgc3RvcmVkIGluIHZhcmlhYmxlc1xuICAgICAgICAgICAgc3RhdGUudG9rZW5WYWx1ZSA9IHBhcnNlSW50KHN0YXRlLnRva2VuUmF3LnNsaWNlKDAsIC0xKSwgMTApO1xuICAgICAgICAgICAgcmV0dXJuIDgxOTIgLyogTnVtZXJpY0xpdGVyYWwgKi87XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGNoYXIgPD0gNTcgLyogTmluZSAqLyAmJiBjaGFyID49IDQ4IC8qIFplcm8gKi8pIHtcbiAgICAgICAgZG8ge1xuICAgICAgICAgICAgY2hhciA9IG5leHRDaGFyKHN0YXRlKTtcbiAgICAgICAgfSB3aGlsZSAoY2hhciA8PSA1NyAvKiBOaW5lICovICYmIGNoYXIgPj0gNDggLyogWmVybyAqLyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBzdGF0ZS5jdXJyZW50Q2hhciA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoLS1zdGF0ZS5pbmRleCk7XG4gICAgfVxuICAgIHN0YXRlLnRva2VuVmFsdWUgPSBwYXJzZUZsb2F0KHN0YXRlLnRva2VuUmF3KTtcbiAgICByZXR1cm4gODE5MiAvKiBOdW1lcmljTGl0ZXJhbCAqLztcbn1cbmZ1bmN0aW9uIHNjYW5TdHJpbmcoc3RhdGUpIHtcbiAgICBjb25zdCBxdW90ZSA9IHN0YXRlLmN1cnJlbnRDaGFyO1xuICAgIG5leHRDaGFyKHN0YXRlKTsgLy8gU2tpcCBpbml0aWFsIHF1b3RlLlxuICAgIGxldCB1bmVzY2FwZWQgPSAwO1xuICAgIGNvbnN0IGJ1ZmZlciA9IG5ldyBBcnJheSgpO1xuICAgIGxldCBtYXJrZXIgPSBzdGF0ZS5pbmRleDtcbiAgICB3aGlsZSAoc3RhdGUuY3VycmVudENoYXIgIT09IHF1b3RlKSB7XG4gICAgICAgIGlmIChzdGF0ZS5jdXJyZW50Q2hhciA9PT0gOTIgLyogQmFja3NsYXNoICovKSB7XG4gICAgICAgICAgICBidWZmZXIucHVzaChzdGF0ZS5pbnB1dC5zbGljZShtYXJrZXIsIHN0YXRlLmluZGV4KSk7XG4gICAgICAgICAgICBuZXh0Q2hhcihzdGF0ZSk7XG4gICAgICAgICAgICB1bmVzY2FwZWQgPSB1bmVzY2FwZUNvZGUoc3RhdGUuY3VycmVudENoYXIpO1xuICAgICAgICAgICAgbmV4dENoYXIoc3RhdGUpO1xuICAgICAgICAgICAgYnVmZmVyLnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZSh1bmVzY2FwZWQpKTtcbiAgICAgICAgICAgIG1hcmtlciA9IHN0YXRlLmluZGV4O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHN0YXRlLmluZGV4ID49IHN0YXRlLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhyb3cgUmVwb3J0ZXIuZXJyb3IoMTA4IC8qIFVudGVybWluYXRlZFF1b3RlICovLCB7IHN0YXRlIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbmV4dENoYXIoc3RhdGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGxhc3QgPSBzdGF0ZS5pbnB1dC5zbGljZShtYXJrZXIsIHN0YXRlLmluZGV4KTtcbiAgICBuZXh0Q2hhcihzdGF0ZSk7IC8vIFNraXAgdGVybWluYXRpbmcgcXVvdGUuXG4gICAgLy8gQ29tcHV0ZSB0aGUgdW5lc2NhcGVkIHN0cmluZyB2YWx1ZS5cbiAgICBidWZmZXIucHVzaChsYXN0KTtcbiAgICBjb25zdCB1bmVzY2FwZWRTdHIgPSBidWZmZXIuam9pbignJyk7XG4gICAgc3RhdGUudG9rZW5WYWx1ZSA9IHVuZXNjYXBlZFN0cjtcbiAgICByZXR1cm4gNDA5NiAvKiBTdHJpbmdMaXRlcmFsICovO1xufVxuZnVuY3Rpb24gc2NhblRlbXBsYXRlKHN0YXRlKSB7XG4gICAgbGV0IHRhaWwgPSB0cnVlO1xuICAgIGxldCByZXN1bHQgPSAnJztcbiAgICB3aGlsZSAobmV4dENoYXIoc3RhdGUpICE9PSA5NiAvKiBCYWNrdGljayAqLykge1xuICAgICAgICBpZiAoc3RhdGUuY3VycmVudENoYXIgPT09IDM2IC8qIERvbGxhciAqLykge1xuICAgICAgICAgICAgaWYgKChzdGF0ZS5pbmRleCArIDEpIDwgc3RhdGUubGVuZ3RoICYmIHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUuaW5kZXggKyAxKSA9PT0gMTIzIC8qIE9wZW5CcmFjZSAqLykge1xuICAgICAgICAgICAgICAgIHN0YXRlLmluZGV4Kys7XG4gICAgICAgICAgICAgICAgdGFpbCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ICs9ICckJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzdGF0ZS5jdXJyZW50Q2hhciA9PT0gOTIgLyogQmFja3NsYXNoICovKSB7XG4gICAgICAgICAgICByZXN1bHQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSh1bmVzY2FwZUNvZGUobmV4dENoYXIoc3RhdGUpKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoc3RhdGUuaW5kZXggPj0gc3RhdGUubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgUmVwb3J0ZXIuZXJyb3IoMTA5IC8qIFVudGVybWluYXRlZFRlbXBsYXRlICovLCB7IHN0YXRlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzdWx0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoc3RhdGUuY3VycmVudENoYXIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG5leHRDaGFyKHN0YXRlKTtcbiAgICBzdGF0ZS50b2tlblZhbHVlID0gcmVzdWx0O1xuICAgIGlmICh0YWlsKSB7XG4gICAgICAgIHJldHVybiA1NDA3MTMgLyogVGVtcGxhdGVUYWlsICovO1xuICAgIH1cbiAgICByZXR1cm4gNTQwNzE0IC8qIFRlbXBsYXRlQ29udGludWF0aW9uICovO1xufVxuZnVuY3Rpb24gc2NhblRlbXBsYXRlVGFpbChzdGF0ZSkge1xuICAgIGlmIChzdGF0ZS5pbmRleCA+PSBzdGF0ZS5sZW5ndGgpIHtcbiAgICAgICAgdGhyb3cgUmVwb3J0ZXIuZXJyb3IoMTA5IC8qIFVudGVybWluYXRlZFRlbXBsYXRlICovLCB7IHN0YXRlIH0pO1xuICAgIH1cbiAgICBzdGF0ZS5pbmRleC0tO1xuICAgIHJldHVybiBzY2FuVGVtcGxhdGUoc3RhdGUpO1xufVxuZnVuY3Rpb24gY29uc3VtZU9wdChzdGF0ZSwgdG9rZW4pIHtcbiAgICBpZiAoc3RhdGUuY3VycmVudFRva2VuID09PSB0b2tlbikge1xuICAgICAgICBuZXh0VG9rZW4oc3RhdGUpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gY29uc3VtZShzdGF0ZSwgdG9rZW4pIHtcbiAgICBpZiAoc3RhdGUuY3VycmVudFRva2VuID09PSB0b2tlbikge1xuICAgICAgICBuZXh0VG9rZW4oc3RhdGUpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGhyb3cgUmVwb3J0ZXIuZXJyb3IoMTEwIC8qIE1pc3NpbmdFeHBlY3RlZFRva2VuICovLCB7IHN0YXRlLCBleHBlY3RlZDogdG9rZW4gfSk7XG4gICAgfVxufVxuLyoqXG4gKiBBcnJheSBmb3IgbWFwcGluZyB0b2tlbnMgdG8gdG9rZW4gdmFsdWVzLiBUaGUgaW5kaWNlcyBvZiB0aGUgdmFsdWVzXG4gKiBjb3JyZXNwb25kIHRvIHRoZSB0b2tlbiBiaXRzIDAtMzguXG4gKiBGb3IgdGhpcyB0byB3b3JrIHByb3Blcmx5LCB0aGUgdmFsdWVzIGluIHRoZSBhcnJheSBtdXN0IGJlIGtlcHQgaW5cbiAqIHRoZSBzYW1lIG9yZGVyIGFzIHRoZSB0b2tlbiBiaXRzLlxuICogVXNhZ2U6IFRva2VuVmFsdWVzW3Rva2VuICYgVG9rZW4uVHlwZV1cbiAqL1xuY29uc3QgVG9rZW5WYWx1ZXMgPSBbXG4gICAgJGZhbHNlLCAkdHJ1ZSwgJG51bGwsICR1bmRlZmluZWQsICckdGhpcycsICckcGFyZW50JyxcbiAgICAnKCcsICd7JywgJy4nLCAnfScsICcpJywgJywnLCAnWycsICddJywgJzonLCAnPycsICdcXCcnLCAnXCInLFxuICAgICcmJywgJ3wnLCAnfHwnLCAnJiYnLCAnPT0nLCAnIT0nLCAnPT09JywgJyE9PScsICc8JywgJz4nLFxuICAgICc8PScsICc+PScsICdpbicsICdpbnN0YW5jZW9mJywgJysnLCAnLScsICd0eXBlb2YnLCAndm9pZCcsICcqJywgJyUnLCAnLycsICc9JywgJyEnLFxuICAgIDU0MDcxMyAvKiBUZW1wbGF0ZVRhaWwgKi8sIDU0MDcxNCAvKiBUZW1wbGF0ZUNvbnRpbnVhdGlvbiAqLyxcbiAgICAnb2YnXG5dO1xuY29uc3QgS2V5d29yZExvb2t1cCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5LZXl3b3JkTG9va3VwLnRydWUgPSAyMDQ5IC8qIFRydWVLZXl3b3JkICovO1xuS2V5d29yZExvb2t1cC5udWxsID0gMjA1MCAvKiBOdWxsS2V5d29yZCAqLztcbktleXdvcmRMb29rdXAuZmFsc2UgPSAyMDQ4IC8qIEZhbHNlS2V5d29yZCAqLztcbktleXdvcmRMb29rdXAudW5kZWZpbmVkID0gMjA1MSAvKiBVbmRlZmluZWRLZXl3b3JkICovO1xuS2V5d29yZExvb2t1cC4kdGhpcyA9IDMwNzYgLyogVGhpc1Njb3BlICovO1xuS2V5d29yZExvb2t1cC4kcGFyZW50ID0gMzA3NyAvKiBQYXJlbnRTY29wZSAqLztcbktleXdvcmRMb29rdXAuaW4gPSAxNjQwNzk4IC8qIEluS2V5d29yZCAqLztcbktleXdvcmRMb29rdXAuaW5zdGFuY2VvZiA9IDE2NDA3OTkgLyogSW5zdGFuY2VPZktleXdvcmQgKi87XG5LZXl3b3JkTG9va3VwLnR5cGVvZiA9IDM0ODUwIC8qIFR5cGVvZktleXdvcmQgKi87XG5LZXl3b3JkTG9va3VwLnZvaWQgPSAzNDg1MSAvKiBWb2lkS2V5d29yZCAqLztcbktleXdvcmRMb29rdXAub2YgPSAxMDUxMTc5IC8qIE9mS2V5d29yZCAqLztcbi8qKlxuICogUmFuZ2VzIG9mIGNvZGUgcG9pbnRzIGluIHBhaXJzIG9mIDIgKGVnIDB4NDEtMHg1QiwgMHg2MS0weDdCLCAuLi4pIHdoZXJlIHRoZSBzZWNvbmQgdmFsdWUgaXMgbm90IGluY2x1c2l2ZSAoNS03IG1lYW5zIDUgYW5kIDYpXG4gKiBTaW5nbGUgdmFsdWVzIGFyZSBkZW5vdGVkIGJ5IHRoZSBzZWNvbmQgdmFsdWUgYmVpbmcgYSAwXG4gKlxuICogQ29waWVkIGZyb20gb3V0cHV0IGdlbmVyYXRlZCB3aXRoIFwibm9kZSBidWlsZC9nZW5lcmF0ZS11bmljb2RlLmpzXCJcbiAqXG4gKiBTZWUgYWxzbzogaHR0cHM6Ly9lbi53aWtpYm9va3Mub3JnL3dpa2kvVW5pY29kZS9DaGFyYWN0ZXJfcmVmZXJlbmNlLzAwMDAtMEZGRlxuICovXG5jb25zdCBjb2RlcyA9IHtcbiAgICAvKiBbJDAtOUEtWmFfYS16XSAqL1xuICAgIEFzY2lpSWRQYXJ0OiBbMHgyNCwgMCwgMHgzMCwgMHgzQSwgMHg0MSwgMHg1QiwgMHg1RiwgMCwgMHg2MSwgMHg3Ql0sXG4gICAgSWRTdGFydDogLyogSWRlbnRpZmllclN0YXJ0ICovIFsweDI0LCAwLCAweDQxLCAweDVCLCAweDVGLCAwLCAweDYxLCAweDdCLCAweEFBLCAwLCAweEJBLCAwLCAweEMwLCAweEQ3LCAweEQ4LCAweEY3LCAweEY4LCAweDJCOSwgMHgyRTAsIDB4MkU1LCAweDFEMDAsIDB4MUQyNiwgMHgxRDJDLCAweDFENUQsIDB4MUQ2MiwgMHgxRDY2LCAweDFENkIsIDB4MUQ3OCwgMHgxRDc5LCAweDFEQkYsIDB4MUUwMCwgMHgxRjAwLCAweDIwNzEsIDAsIDB4MjA3RiwgMCwgMHgyMDkwLCAweDIwOUQsIDB4MjEyQSwgMHgyMTJDLCAweDIxMzIsIDAsIDB4MjE0RSwgMCwgMHgyMTYwLCAweDIxODksIDB4MkM2MCwgMHgyQzgwLCAweEE3MjIsIDB4QTc4OCwgMHhBNzhCLCAweEE3QUYsIDB4QTdCMCwgMHhBN0I4LCAweEE3RjcsIDB4QTgwMCwgMHhBQjMwLCAweEFCNUIsIDB4QUI1QywgMHhBQjY1LCAweEZCMDAsIDB4RkIwNywgMHhGRjIxLCAweEZGM0IsIDB4RkY0MSwgMHhGRjVCXSxcbiAgICBEaWdpdDogLyogRGVjaW1hbE51bWJlciAqLyBbMHgzMCwgMHgzQV0sXG4gICAgU2tpcDogLyogU2tpcHBhYmxlICovIFswLCAweDIxLCAweDdGLCAweEExXVxufTtcbi8qKlxuICogRGVjb21wcmVzcyB0aGUgcmFuZ2VzIGludG8gYW4gYXJyYXkgb2YgbnVtYmVycyBzbyB0aGF0IHRoZSBjaGFyIGNvZGVcbiAqIGNhbiBiZSB1c2VkIGFzIGFuIGluZGV4IHRvIHRoZSBsb29rdXBcbiAqL1xuZnVuY3Rpb24gZGVjb21wcmVzcyhsb29rdXAsICRzZXQsIGNvbXByZXNzZWQsIHZhbHVlKSB7XG4gICAgY29uc3QgcmFuZ2VDb3VudCA9IGNvbXByZXNzZWQubGVuZ3RoO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmFuZ2VDb3VudDsgaSArPSAyKSB7XG4gICAgICAgIGNvbnN0IHN0YXJ0ID0gY29tcHJlc3NlZFtpXTtcbiAgICAgICAgbGV0IGVuZCA9IGNvbXByZXNzZWRbaSArIDFdO1xuICAgICAgICBlbmQgPSBlbmQgPiAwID8gZW5kIDogc3RhcnQgKyAxO1xuICAgICAgICBpZiAobG9va3VwKSB7XG4gICAgICAgICAgICBsb29rdXAuZmlsbCh2YWx1ZSwgc3RhcnQsIGVuZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCRzZXQpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGNoID0gc3RhcnQ7IGNoIDwgZW5kOyBjaCsrKSB7XG4gICAgICAgICAgICAgICAgJHNldC5hZGQoY2gpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuLy8gQ2hhckZ1bmNMb29rdXAgZnVuY3Rpb25zXG5mdW5jdGlvbiByZXR1cm5Ub2tlbih0b2tlbikge1xuICAgIHJldHVybiBzID0+IHtcbiAgICAgICAgbmV4dENoYXIocyk7XG4gICAgICAgIHJldHVybiB0b2tlbjtcbiAgICB9O1xufVxuY29uc3QgdW5leHBlY3RlZENoYXJhY3RlciA9IHMgPT4ge1xuICAgIHRocm93IFJlcG9ydGVyLmVycm9yKDExMSAvKiBVbmV4cGVjdGVkQ2hhcmFjdGVyICovLCB7IHN0YXRlOiBzIH0pO1xufTtcbnVuZXhwZWN0ZWRDaGFyYWN0ZXIubm90TWFwcGVkID0gdHJ1ZTtcbi8vIEFTQ0lJIElkZW50aWZpZXJQYXJ0IGxvb2t1cFxuY29uc3QgQXNjaWlJZFBhcnRzID0gbmV3IFNldCgpO1xuZGVjb21wcmVzcyhudWxsLCBBc2NpaUlkUGFydHMsIGNvZGVzLkFzY2lpSWRQYXJ0LCB0cnVlKTtcbi8vIElkZW50aWZpZXJQYXJ0IGxvb2t1cFxuY29uc3QgSWRQYXJ0cyA9IG5ldyBVaW50OEFycmF5KDB4RkZGRik7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuZGVjb21wcmVzcyhJZFBhcnRzLCBudWxsLCBjb2Rlcy5JZFN0YXJ0LCAxKTtcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5kZWNvbXByZXNzKElkUGFydHMsIG51bGwsIGNvZGVzLkRpZ2l0LCAxKTtcbi8vIENoYXJhY3RlciBzY2FubmluZyBmdW5jdGlvbiBsb29rdXBcbmNvbnN0IENoYXJTY2FubmVycyA9IG5ldyBBcnJheSgweEZGRkYpO1xuQ2hhclNjYW5uZXJzLmZpbGwodW5leHBlY3RlZENoYXJhY3RlciwgMCwgMHhGRkZGKTtcbmRlY29tcHJlc3MoQ2hhclNjYW5uZXJzLCBudWxsLCBjb2Rlcy5Ta2lwLCBzID0+IHtcbiAgICBuZXh0Q2hhcihzKTtcbiAgICByZXR1cm4gbnVsbDtcbn0pO1xuZGVjb21wcmVzcyhDaGFyU2Nhbm5lcnMsIG51bGwsIGNvZGVzLklkU3RhcnQsIHNjYW5JZGVudGlmaWVyKTtcbmRlY29tcHJlc3MoQ2hhclNjYW5uZXJzLCBudWxsLCBjb2Rlcy5EaWdpdCwgcyA9PiBzY2FuTnVtYmVyKHMsIGZhbHNlKSk7XG5DaGFyU2Nhbm5lcnNbMzQgLyogRG91YmxlUXVvdGUgKi9dID1cbiAgICBDaGFyU2Nhbm5lcnNbMzkgLyogU2luZ2xlUXVvdGUgKi9dID0gcyA9PiB7XG4gICAgICAgIHJldHVybiBzY2FuU3RyaW5nKHMpO1xuICAgIH07XG5DaGFyU2Nhbm5lcnNbOTYgLyogQmFja3RpY2sgKi9dID0gcyA9PiB7XG4gICAgcmV0dXJuIHNjYW5UZW1wbGF0ZShzKTtcbn07XG4vLyAhLCAhPSwgIT09XG5DaGFyU2Nhbm5lcnNbMzMgLyogRXhjbGFtYXRpb24gKi9dID0gcyA9PiB7XG4gICAgaWYgKG5leHRDaGFyKHMpICE9PSA2MSAvKiBFcXVhbHMgKi8pIHtcbiAgICAgICAgcmV0dXJuIDMyODA4IC8qIEV4Y2xhbWF0aW9uICovO1xuICAgIH1cbiAgICBpZiAobmV4dENoYXIocykgIT09IDYxIC8qIEVxdWFscyAqLykge1xuICAgICAgICByZXR1cm4gMTYzODY3OSAvKiBFeGNsYW1hdGlvbkVxdWFscyAqLztcbiAgICB9XG4gICAgbmV4dENoYXIocyk7XG4gICAgcmV0dXJuIDE2Mzg2ODEgLyogRXhjbGFtYXRpb25FcXVhbHNFcXVhbHMgKi87XG59O1xuLy8gPSwgPT0sID09PVxuQ2hhclNjYW5uZXJzWzYxIC8qIEVxdWFscyAqL10gPSBzID0+IHtcbiAgICBpZiAobmV4dENoYXIocykgIT09IDYxIC8qIEVxdWFscyAqLykge1xuICAgICAgICByZXR1cm4gMTA0ODYxNSAvKiBFcXVhbHMgKi87XG4gICAgfVxuICAgIGlmIChuZXh0Q2hhcihzKSAhPT0gNjEgLyogRXF1YWxzICovKSB7XG4gICAgICAgIHJldHVybiAxNjM4Njc4IC8qIEVxdWFsc0VxdWFscyAqLztcbiAgICB9XG4gICAgbmV4dENoYXIocyk7XG4gICAgcmV0dXJuIDE2Mzg2ODAgLyogRXF1YWxzRXF1YWxzRXF1YWxzICovO1xufTtcbi8vICYsICYmXG5DaGFyU2Nhbm5lcnNbMzggLyogQW1wZXJzYW5kICovXSA9IHMgPT4ge1xuICAgIGlmIChuZXh0Q2hhcihzKSAhPT0gMzggLyogQW1wZXJzYW5kICovKSB7XG4gICAgICAgIHJldHVybiAxNTcyODgwIC8qIEFtcGVyc2FuZCAqLztcbiAgICB9XG4gICAgbmV4dENoYXIocyk7XG4gICAgcmV0dXJuIDE2Mzg2MTMgLyogQW1wZXJzYW5kQW1wZXJzYW5kICovO1xufTtcbi8vIHwsIHx8XG5DaGFyU2Nhbm5lcnNbMTI0IC8qIEJhciAqL10gPSBzID0+IHtcbiAgICBpZiAobmV4dENoYXIocykgIT09IDEyNCAvKiBCYXIgKi8pIHtcbiAgICAgICAgcmV0dXJuIDE1NzI4ODMgLyogQmFyICovO1xuICAgIH1cbiAgICBuZXh0Q2hhcihzKTtcbiAgICByZXR1cm4gMTYzODU0OCAvKiBCYXJCYXIgKi87XG59O1xuLy8gLlxuQ2hhclNjYW5uZXJzWzQ2IC8qIERvdCAqL10gPSBzID0+IHtcbiAgICBpZiAobmV4dENoYXIocykgPD0gNTcgLyogTmluZSAqLyAmJiBzLmN1cnJlbnRDaGFyID49IDQ4IC8qIFplcm8gKi8pIHtcbiAgICAgICAgcmV0dXJuIHNjYW5OdW1iZXIocywgdHJ1ZSk7XG4gICAgfVxuICAgIHJldHVybiAxNjM5MiAvKiBEb3QgKi87XG59O1xuLy8gPCwgPD1cbkNoYXJTY2FubmVyc1s2MCAvKiBMZXNzVGhhbiAqL10gPSBzID0+IHtcbiAgICBpZiAobmV4dENoYXIocykgIT09IDYxIC8qIEVxdWFscyAqLykge1xuICAgICAgICByZXR1cm4gMTYzODc0NiAvKiBMZXNzVGhhbiAqLztcbiAgICB9XG4gICAgbmV4dENoYXIocyk7XG4gICAgcmV0dXJuIDE2Mzg3NDggLyogTGVzc1RoYW5FcXVhbHMgKi87XG59O1xuLy8gPiwgPj1cbkNoYXJTY2FubmVyc1s2MiAvKiBHcmVhdGVyVGhhbiAqL10gPSBzID0+IHtcbiAgICBpZiAobmV4dENoYXIocykgIT09IDYxIC8qIEVxdWFscyAqLykge1xuICAgICAgICByZXR1cm4gMTYzODc0NyAvKiBHcmVhdGVyVGhhbiAqLztcbiAgICB9XG4gICAgbmV4dENoYXIocyk7XG4gICAgcmV0dXJuIDE2Mzg3NDkgLyogR3JlYXRlclRoYW5FcXVhbHMgKi87XG59O1xuQ2hhclNjYW5uZXJzWzM3IC8qIFBlcmNlbnQgKi9dID0gcmV0dXJuVG9rZW4oMTYzODg4NSAvKiBQZXJjZW50ICovKTtcbkNoYXJTY2FubmVyc1s0MCAvKiBPcGVuUGFyZW4gKi9dID0gcmV0dXJuVG9rZW4oNjcxNzUwIC8qIE9wZW5QYXJlbiAqLyk7XG5DaGFyU2Nhbm5lcnNbNDEgLyogQ2xvc2VQYXJlbiAqL10gPSByZXR1cm5Ub2tlbigxODM1MDE4IC8qIENsb3NlUGFyZW4gKi8pO1xuQ2hhclNjYW5uZXJzWzQyIC8qIEFzdGVyaXNrICovXSA9IHJldHVyblRva2VuKDE2Mzg4ODQgLyogQXN0ZXJpc2sgKi8pO1xuQ2hhclNjYW5uZXJzWzQzIC8qIFBsdXMgKi9dID0gcmV0dXJuVG9rZW4oNjIzMDA4IC8qIFBsdXMgKi8pO1xuQ2hhclNjYW5uZXJzWzQ0IC8qIENvbW1hICovXSA9IHJldHVyblRva2VuKDE1NzI4NzUgLyogQ29tbWEgKi8pO1xuQ2hhclNjYW5uZXJzWzQ1IC8qIE1pbnVzICovXSA9IHJldHVyblRva2VuKDYyMzAwOSAvKiBNaW51cyAqLyk7XG5DaGFyU2Nhbm5lcnNbNDcgLyogU2xhc2ggKi9dID0gcmV0dXJuVG9rZW4oMTYzODg4NiAvKiBTbGFzaCAqLyk7XG5DaGFyU2Nhbm5lcnNbNTggLyogQ29sb24gKi9dID0gcmV0dXJuVG9rZW4oMTU3Mjg3OCAvKiBDb2xvbiAqLyk7XG5DaGFyU2Nhbm5lcnNbNjMgLyogUXVlc3Rpb24gKi9dID0gcmV0dXJuVG9rZW4oMTU3Mjg3OSAvKiBRdWVzdGlvbiAqLyk7XG5DaGFyU2Nhbm5lcnNbOTEgLyogT3BlbkJyYWNrZXQgKi9dID0gcmV0dXJuVG9rZW4oNjcxNzU2IC8qIE9wZW5CcmFja2V0ICovKTtcbkNoYXJTY2FubmVyc1s5MyAvKiBDbG9zZUJyYWNrZXQgKi9dID0gcmV0dXJuVG9rZW4oMTgzNTAyMSAvKiBDbG9zZUJyYWNrZXQgKi8pO1xuQ2hhclNjYW5uZXJzWzEyMyAvKiBPcGVuQnJhY2UgKi9dID0gcmV0dXJuVG9rZW4oMTMxMDc5IC8qIE9wZW5CcmFjZSAqLyk7XG5DaGFyU2Nhbm5lcnNbMTI1IC8qIENsb3NlQnJhY2UgKi9dID0gcmV0dXJuVG9rZW4oMTgzNTAxNyAvKiBDbG9zZUJyYWNlICovKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWV4cHJlc3Npb24tcGFyc2VyLmpzLm1hcCIsImV4cG9ydCB7IEF0dHJTeW50YXggfSBmcm9tICcuL2FzdCc7XG5leHBvcnQgeyBJQXR0cmlidXRlUGFyc2VyIH0gZnJvbSAnLi9hdHRyaWJ1dGUtcGFyc2VyJztcbmV4cG9ydCB7IGF0dHJpYnV0ZVBhdHRlcm4sIElBdHRyaWJ1dGVQYXR0ZXJuLCBBdHRyaWJ1dGVQYXR0ZXJuLCBJbnRlcnByZXRhdGlvbiwgSVN5bnRheEludGVycHJldGVyLCB9IGZyb20gJy4vYXR0cmlidXRlLXBhdHRlcm4nO1xuZXhwb3J0IHsgQXRQcmVmaXhlZFRyaWdnZXJBdHRyaWJ1dGVQYXR0ZXJuLCBDb2xvblByZWZpeGVkQmluZEF0dHJpYnV0ZVBhdHRlcm4sIERvdFNlcGFyYXRlZEF0dHJpYnV0ZVBhdHRlcm4sIFJlZkF0dHJpYnV0ZVBhdHRlcm4sIH0gZnJvbSAnLi9hdHRyaWJ1dGUtcGF0dGVybnMnO1xuZXhwb3J0IHsgYmluZGluZ0NvbW1hbmQsIEJpbmRpbmdDb21tYW5kLCBCaW5kaW5nQ29tbWFuZERlZmluaXRpb24sIGdldFRhcmdldCwgfSBmcm9tICcuL2JpbmRpbmctY29tbWFuZCc7XG5leHBvcnQgeyBDYWxsQmluZGluZ0NvbW1hbmQsIERlZmF1bHRCaW5kaW5nQ29tbWFuZCwgRm9yQmluZGluZ0NvbW1hbmQsIEZyb21WaWV3QmluZGluZ0NvbW1hbmQsIE9uZVRpbWVCaW5kaW5nQ29tbWFuZCwgVG9WaWV3QmluZGluZ0NvbW1hbmQsIFR3b1dheUJpbmRpbmdDb21tYW5kIH0gZnJvbSAnLi9iaW5kaW5nLWNvbW1hbmRzJztcbmV4cG9ydCB7IElFeHByZXNzaW9uUGFyc2VyUmVnaXN0cmF0aW9uLCBEZWZhdWx0Q29tcG9uZW50cywgUmVmQXR0cmlidXRlUGF0dGVyblJlZ2lzdHJhdGlvbiwgRG90U2VwYXJhdGVkQXR0cmlidXRlUGF0dGVyblJlZ2lzdHJhdGlvbiwgRGVmYXVsdEJpbmRpbmdTeW50YXgsIEF0UHJlZml4ZWRUcmlnZ2VyQXR0cmlidXRlUGF0dGVyblJlZ2lzdHJhdGlvbiwgQ29sb25QcmVmaXhlZEJpbmRBdHRyaWJ1dGVQYXR0ZXJuUmVnaXN0cmF0aW9uLCBTaG9ydEhhbmRCaW5kaW5nU3ludGF4LCBDYWxsQmluZGluZ0NvbW1hbmRSZWdpc3RyYXRpb24sIERlZmF1bHRCaW5kaW5nQ29tbWFuZFJlZ2lzdHJhdGlvbiwgRm9yQmluZGluZ0NvbW1hbmRSZWdpc3RyYXRpb24sIEZyb21WaWV3QmluZGluZ0NvbW1hbmRSZWdpc3RyYXRpb24sIE9uZVRpbWVCaW5kaW5nQ29tbWFuZFJlZ2lzdHJhdGlvbiwgVG9WaWV3QmluZGluZ0NvbW1hbmRSZWdpc3RyYXRpb24sIFR3b1dheUJpbmRpbmdDb21tYW5kUmVnaXN0cmF0aW9uLCBEZWZhdWx0QmluZGluZ0xhbmd1YWdlLCBKaXRDb25maWd1cmF0aW9uIH0gZnJvbSAnLi9jb25maWd1cmF0aW9uJztcbmV4cG9ydCB7IEFjY2VzcywgUHJlY2VkZW5jZSwgQ2hhciwgfSBmcm9tICcuL2NvbW1vbic7XG5leHBvcnQgeyBwYXJzZUV4cHJlc3Npb24sIHBhcnNlLCBQYXJzZXJTdGF0ZSwgfSBmcm9tICcuL2V4cHJlc3Npb24tcGFyc2VyJztcbmV4cG9ydCB7IFJlc291cmNlTW9kZWwsIEJpbmRhYmxlSW5mbywgRWxlbWVudEluZm8sIEF0dHJJbmZvIH0gZnJvbSAnLi9yZXNvdXJjZS1tb2RlbCc7XG5leHBvcnQgeyBCaW5kaW5nU3ltYm9sLCBDdXN0b21BdHRyaWJ1dGVTeW1ib2wsIEN1c3RvbUVsZW1lbnRTeW1ib2wsIExldEVsZW1lbnRTeW1ib2wsIFBsYWluQXR0cmlidXRlU3ltYm9sLCBQbGFpbkVsZW1lbnRTeW1ib2wsIFJlcGxhY2VQYXJ0U3ltYm9sLCBTeW1ib2xGbGFncywgVGVtcGxhdGVDb250cm9sbGVyU3ltYm9sLCBUZXh0U3ltYm9sLCB9IGZyb20gJy4vc2VtYW50aWMtbW9kZWwnO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIiwiaW1wb3J0IHsga2ViYWJDYXNlLCBNZXRhZGF0YSwgfSBmcm9tICdAYXVyZWxpYS9rZXJuZWwnO1xuaW1wb3J0IHsgQmluZGluZ01vZGUsIEN1c3RvbUF0dHJpYnV0ZSwgQ3VzdG9tRWxlbWVudCwgfSBmcm9tICdAYXVyZWxpYS9ydW50aW1lJztcbmltcG9ydCB7IEJpbmRpbmdDb21tYW5kIH0gZnJvbSAnLi9iaW5kaW5nLWNvbW1hbmQnO1xuLyoqXG4gKiBBIHByZS1wcm9jZXNzZWQgcGllY2Ugb2YgaW5mb3JtYXRpb24gYWJvdXQgYSBkZWZpbmVkIGJpbmRhYmxlIHByb3BlcnR5IG9uIGEgY3VzdG9tXG4gKiBlbGVtZW50IG9yIGF0dHJpYnV0ZSwgb3B0aW1pemVkIGZvciBjb25zdW1wdGlvbiBieSB0aGUgdGVtcGxhdGUgY29tcGlsZXIuXG4gKi9cbmV4cG9ydCBjbGFzcyBCaW5kYWJsZUluZm8ge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBwcmUtcHJvY2Vzc2VkICpwcm9wZXJ0eSogKG5vdCBhdHRyaWJ1dGUpIG5hbWUgb2YgdGhlIGJpbmRhYmxlLCB3aGljaCBpc1xuICAgICAqIChpbiBvcmRlciBvZiBwcmlvcml0eSk6XG4gICAgICpcbiAgICAgKiAxLiBUaGUgYHByb3BlcnR5YCBmcm9tIHRoZSBkZXNjcmlwdGlvbiAoaWYgZGVmaW5lZClcbiAgICAgKiAyLiBUaGUgbmFtZSBvZiB0aGUgcHJvcGVydHkgb2YgdGhlIGJpbmRhYmxlIGl0c2VsZlxuICAgICAqL1xuICAgIHByb3BOYW1lLCBcbiAgICAvKipcbiAgICAgKiBUaGUgcHJlLXByb2Nlc3NlZCAoZGVmYXVsdCkgYmluZGluZ01vZGUgb2YgdGhlIGJpbmRhYmxlLCB3aGljaCBpcyAoaW4gb3JkZXIgb2YgcHJpb3JpdHkpOlxuICAgICAqXG4gICAgICogMS4gVGhlIGBtb2RlYCBmcm9tIHRoZSBiaW5kYWJsZSAoaWYgZGVmaW5lZCBhbmQgbm90IGJpbmRpbmdNb2RlLmRlZmF1bHQpXG4gICAgICogMi4gVGhlIGBkZWZhdWx0QmluZGluZ01vZGVgIChpZiBpdCdzIGFuIGF0dHJpYnV0ZSwgZGVmaW5lZCwgYW5kIG5vdCBiaW5kaW5nTW9kZS5kZWZhdWx0KVxuICAgICAqIDMuIGBiaW5kaW5nTW9kZS50b1ZpZXdgXG4gICAgICovXG4gICAgbW9kZSkge1xuICAgICAgICB0aGlzLnByb3BOYW1lID0gcHJvcE5hbWU7XG4gICAgICAgIHRoaXMubW9kZSA9IG1vZGU7XG4gICAgfVxufVxuLyoqXG4gKiBQcmUtcHJvY2Vzc2VkIGluZm9ybWF0aW9uIGFib3V0IGEgY3VzdG9tIGVsZW1lbnQgcmVzb3VyY2UsIG9wdGltaXplZFxuICogZm9yIGNvbnN1bXB0aW9uIGJ5IHRoZSB0ZW1wbGF0ZSBjb21waWxlci5cbiAqL1xuZXhwb3J0IGNsYXNzIEVsZW1lbnRJbmZvIHtcbiAgICBjb25zdHJ1Y3RvcihuYW1lLCBjb250YWluZXJsZXNzKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMuY29udGFpbmVybGVzcyA9IGNvbnRhaW5lcmxlc3M7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGxvb2t1cCBvZiB0aGUgYmluZGFibGVzIG9mIHRoaXMgZWxlbWVudCwgaW5kZXhlZCBieSB0aGUgKHByZS1wcm9jZXNzZWQpXG4gICAgICAgICAqIGF0dHJpYnV0ZSBuYW1lcyBhcyB0aGV5IHdvdWxkIGJlIGZvdW5kIGluIHBhcnNlZCBtYXJrdXAuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmJpbmRhYmxlcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tKGRlZikge1xuICAgICAgICBjb25zdCBpbmZvID0gbmV3IEVsZW1lbnRJbmZvKGRlZi5uYW1lLCBkZWYuY29udGFpbmVybGVzcyk7XG4gICAgICAgIGNvbnN0IGJpbmRhYmxlcyA9IGRlZi5iaW5kYWJsZXM7XG4gICAgICAgIGNvbnN0IGRlZmF1bHRCaW5kaW5nTW9kZSA9IEJpbmRpbmdNb2RlLnRvVmlldztcbiAgICAgICAgbGV0IGJpbmRhYmxlO1xuICAgICAgICBsZXQgcHJvcDtcbiAgICAgICAgbGV0IGF0dHI7XG4gICAgICAgIGxldCBtb2RlO1xuICAgICAgICBmb3IgKHByb3AgaW4gYmluZGFibGVzKSB7XG4gICAgICAgICAgICBiaW5kYWJsZSA9IGJpbmRhYmxlc1twcm9wXTtcbiAgICAgICAgICAgIC8vIGV4cGxpY2l0bHkgcHJvdmlkZWQgcHJvcGVydHkgbmFtZSBoYXMgcHJpb3JpdHkgb3ZlciB0aGUgaW1wbGljaXQgcHJvcGVydHkgbmFtZVxuICAgICAgICAgICAgaWYgKGJpbmRhYmxlLnByb3BlcnR5ICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICBwcm9wID0gYmluZGFibGUucHJvcGVydHk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBleHBsaWNpdGx5IHByb3ZpZGVkIGF0dHJpYnV0ZSBuYW1lIGhhcyBwcmlvcml0eSBvdmVyIHRoZSBkZXJpdmVkIGltcGxpY2l0IGF0dHJpYnV0ZSBuYW1lXG4gICAgICAgICAgICBpZiAoYmluZGFibGUuYXR0cmlidXRlICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICBhdHRyID0gYmluZGFibGUuYXR0cmlidXRlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gZGVyaXZlIHRoZSBhdHRyaWJ1dGUgbmFtZSBmcm9tIHRoZSByZXNvbHZlZCBwcm9wZXJ0eSBuYW1lXG4gICAgICAgICAgICAgICAgYXR0ciA9IGtlYmFiQ2FzZShwcm9wKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChiaW5kYWJsZS5tb2RlICE9PSB2b2lkIDAgJiYgYmluZGFibGUubW9kZSAhPT0gQmluZGluZ01vZGUuZGVmYXVsdCkge1xuICAgICAgICAgICAgICAgIG1vZGUgPSBiaW5kYWJsZS5tb2RlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbW9kZSA9IGRlZmF1bHRCaW5kaW5nTW9kZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGluZm8uYmluZGFibGVzW2F0dHJdID0gbmV3IEJpbmRhYmxlSW5mbyhwcm9wLCBtb2RlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5mbztcbiAgICB9XG59XG4vKipcbiAqIFByZS1wcm9jZXNzZWQgaW5mb3JtYXRpb24gYWJvdXQgYSBjdXN0b20gYXR0cmlidXRlIHJlc291cmNlLCBvcHRpbWl6ZWRcbiAqIGZvciBjb25zdW1wdGlvbiBieSB0aGUgdGVtcGxhdGUgY29tcGlsZXIuXG4gKi9cbmV4cG9ydCBjbGFzcyBBdHRySW5mbyB7XG4gICAgY29uc3RydWN0b3IobmFtZSwgaXNUZW1wbGF0ZUNvbnRyb2xsZXIsIG5vTXVsdGlCaW5kaW5ncykge1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLmlzVGVtcGxhdGVDb250cm9sbGVyID0gaXNUZW1wbGF0ZUNvbnRyb2xsZXI7XG4gICAgICAgIHRoaXMubm9NdWx0aUJpbmRpbmdzID0gbm9NdWx0aUJpbmRpbmdzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQSBsb29rdXAgb2YgdGhlIGJpbmRhYmxlcyBvZiB0aGlzIGF0dHJpYnV0ZSwgaW5kZXhlZCBieSB0aGUgKHByZS1wcm9jZXNzZWQpXG4gICAgICAgICAqIGJpbmRhYmxlIG5hbWVzIGFzIHRoZXkgd291bGQgYmUgZm91bmQgaW4gdGhlIGF0dHJpYnV0ZSB2YWx1ZS5cbiAgICAgICAgICpcbiAgICAgICAgICogT25seSBhcHBsaWNhYmxlIHRvIG11bHRpIGF0dHJpYnV0ZSBiaW5kaW5ncyAoc2VtaWNvbG9uLXNlcGFyYXRlZCkuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmJpbmRhYmxlcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgc2luZ2xlIG9yIGZpcnN0IGJpbmRhYmxlIG9mIHRoaXMgYXR0cmlidXRlLCBvciBhIGRlZmF1bHQgJ3ZhbHVlJ1xuICAgICAgICAgKiBiaW5kYWJsZSBpZiBubyBiaW5kYWJsZXMgd2VyZSBkZWZpbmVkIG9uIHRoZSBhdHRyaWJ1dGUuXG4gICAgICAgICAqXG4gICAgICAgICAqIE9ubHkgYXBwbGljYWJsZSB0byBzaW5nbGUgYXR0cmlidXRlIGJpbmRpbmdzICh3aGVyZSB0aGUgYXR0cmlidXRlIHZhbHVlXG4gICAgICAgICAqIGNvbnRhaW5zIG5vIHNlbWljb2xvbnMpXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmJpbmRhYmxlID0gbnVsbDtcbiAgICB9XG4gICAgc3RhdGljIGZyb20oZGVmKSB7XG4gICAgICAgIGNvbnN0IGluZm8gPSBuZXcgQXR0ckluZm8oZGVmLm5hbWUsIGRlZi5pc1RlbXBsYXRlQ29udHJvbGxlciwgZGVmLm5vTXVsdGlCaW5kaW5ncyk7XG4gICAgICAgIGNvbnN0IGJpbmRhYmxlcyA9IGRlZi5iaW5kYWJsZXM7XG4gICAgICAgIGNvbnN0IGRlZmF1bHRCaW5kaW5nTW9kZSA9IGRlZi5kZWZhdWx0QmluZGluZ01vZGUgIT09IHZvaWQgMCAmJiBkZWYuZGVmYXVsdEJpbmRpbmdNb2RlICE9PSBCaW5kaW5nTW9kZS5kZWZhdWx0XG4gICAgICAgICAgICA/IGRlZi5kZWZhdWx0QmluZGluZ01vZGVcbiAgICAgICAgICAgIDogQmluZGluZ01vZGUudG9WaWV3O1xuICAgICAgICBsZXQgYmluZGFibGU7XG4gICAgICAgIGxldCBwcm9wO1xuICAgICAgICBsZXQgbW9kZTtcbiAgICAgICAgbGV0IGhhc1ByaW1hcnkgPSBmYWxzZTtcbiAgICAgICAgbGV0IGlzUHJpbWFyeSA9IGZhbHNlO1xuICAgICAgICBsZXQgYmluZGFibGVJbmZvO1xuICAgICAgICBmb3IgKHByb3AgaW4gYmluZGFibGVzKSB7XG4gICAgICAgICAgICBiaW5kYWJsZSA9IGJpbmRhYmxlc1twcm9wXTtcbiAgICAgICAgICAgIC8vIGV4cGxpY2l0bHkgcHJvdmlkZWQgcHJvcGVydHkgbmFtZSBoYXMgcHJpb3JpdHkgb3ZlciB0aGUgaW1wbGljaXQgcHJvcGVydHkgbmFtZVxuICAgICAgICAgICAgaWYgKGJpbmRhYmxlLnByb3BlcnR5ICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICBwcm9wID0gYmluZGFibGUucHJvcGVydHk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYmluZGFibGUubW9kZSAhPT0gdm9pZCAwICYmIGJpbmRhYmxlLm1vZGUgIT09IEJpbmRpbmdNb2RlLmRlZmF1bHQpIHtcbiAgICAgICAgICAgICAgICBtb2RlID0gYmluZGFibGUubW9kZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG1vZGUgPSBkZWZhdWx0QmluZGluZ01vZGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpc1ByaW1hcnkgPSBiaW5kYWJsZS5wcmltYXJ5ID09PSB0cnVlO1xuICAgICAgICAgICAgYmluZGFibGVJbmZvID0gaW5mby5iaW5kYWJsZXNbcHJvcF0gPSBuZXcgQmluZGFibGVJbmZvKHByb3AsIG1vZGUpO1xuICAgICAgICAgICAgaWYgKGlzUHJpbWFyeSkge1xuICAgICAgICAgICAgICAgIGlmIChoYXNQcmltYXJ5KSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigncHJpbWFyeSBhbHJlYWR5IGV4aXN0cycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBoYXNQcmltYXJ5ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBpbmZvLmJpbmRhYmxlID0gYmluZGFibGVJbmZvO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gc2V0IHRvIGZpcnN0IGJpbmRhYmxlIGJ5IGNvbnZlbnRpb25cbiAgICAgICAgICAgIGlmIChpbmZvLmJpbmRhYmxlID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaW5mby5iaW5kYWJsZSA9IGJpbmRhYmxlSW5mbztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBpZiBubyBiaW5kYWJsZXMgYXJlIHByZXNlbnQsIGRlZmF1bHQgdG8gXCJ2YWx1ZVwiXG4gICAgICAgIGlmIChpbmZvLmJpbmRhYmxlID09PSBudWxsKSB7XG4gICAgICAgICAgICBpbmZvLmJpbmRhYmxlID0gbmV3IEJpbmRhYmxlSW5mbygndmFsdWUnLCBkZWZhdWx0QmluZGluZ01vZGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbmZvO1xuICAgIH1cbn1cbmNvbnN0IGNvbnRleHRMb29rdXAgPSBuZXcgV2Vha01hcCgpO1xuLyoqXG4gKiBBIHByZS1wcm9jZXNzZWQgcGllY2Ugb2YgaW5mb3JtYXRpb24gYWJvdXQgZGVjbGFyZWQgY3VzdG9tIGVsZW1lbnRzLCBhdHRyaWJ1dGVzIGFuZFxuICogYmluZGluZyBjb21tYW5kcywgb3B0aW1pemVkIGZvciBjb25zdW1wdGlvbiBieSB0aGUgdGVtcGxhdGUgY29tcGlsZXIuXG4gKi9cbmV4cG9ydCBjbGFzcyBSZXNvdXJjZU1vZGVsIHtcbiAgICBjb25zdHJ1Y3Rvcihjb250YWluZXIpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50TG9va3VwID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgdGhpcy5hdHRyaWJ1dGVMb29rdXAgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICB0aGlzLmNvbW1hbmRMb29rdXAgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICAvLyBOb3RlOiBkb24ndCBkbyB0aGlzIHNvcnQgb2YgdGhpbmcgZWxzZXdoZXJlLCB0aGlzIGlzIHB1cmVseSBmb3IgcGVyZiByZWFzb25zXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xuICAgICAgICBjb25zdCByb290Q29udGFpbmVyID0gY29udGFpbmVyLnJvb3Q7XG4gICAgICAgIHRoaXMucmVzb3VyY2VSZXNvbHZlcnMgPSBjb250YWluZXIucmVzb3VyY2VSZXNvbHZlcnM7XG4gICAgICAgIHRoaXMucm9vdFJlc291cmNlUmVzb2x2ZXJzID0gcm9vdENvbnRhaW5lci5yZXNvdXJjZVJlc29sdmVycztcbiAgICB9XG4gICAgc3RhdGljIGdldE9yQ3JlYXRlKGNvbnRleHQpIHtcbiAgICAgICAgbGV0IG1vZGVsID0gY29udGV4dExvb2t1cC5nZXQoY29udGV4dCk7XG4gICAgICAgIGlmIChtb2RlbCA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBjb250ZXh0TG9va3VwLnNldChjb250ZXh0LCBtb2RlbCA9IG5ldyBSZXNvdXJjZU1vZGVsKGNvbnRleHQpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbW9kZWw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlIGluZm9ybWF0aW9uIGFib3V0IGEgY3VzdG9tIGVsZW1lbnQgcmVzb3VyY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZWxlbWVudCAtIFRoZSBvcmlnaW5hbCBET00gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSByZXNvdXJjZSBpbmZvcm1hdGlvbiBpZiB0aGUgZWxlbWVudCBleGlzdHMsIG9yIGBudWxsYCBpZiBpdCBkb2VzIG5vdCBleGlzdC5cbiAgICAgKi9cbiAgICBnZXRFbGVtZW50SW5mbyhuYW1lKSB7XG4gICAgICAgIGxldCByZXN1bHQgPSB0aGlzLmVsZW1lbnRMb29rdXBbbmFtZV07XG4gICAgICAgIGlmIChyZXN1bHQgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgY29uc3QgZGVmID0gdGhpcy5maW5kKEN1c3RvbUVsZW1lbnQsIG5hbWUpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50TG9va3VwW25hbWVdID0gcmVzdWx0ID0gZGVmID09PSBudWxsID8gbnVsbCA6IEVsZW1lbnRJbmZvLmZyb20oZGVmKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZSBpbmZvcm1hdGlvbiBhYm91dCBhIGN1c3RvbSBhdHRyaWJ1dGUgcmVzb3VyY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc3ludGF4IC0gVGhlIHBhcnNlZCBgQXR0clN5bnRheGBcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSByZXNvdXJjZSBpbmZvcm1hdGlvbiBpZiB0aGUgYXR0cmlidXRlIGV4aXN0cywgb3IgYG51bGxgIGlmIGl0IGRvZXMgbm90IGV4aXN0LlxuICAgICAqL1xuICAgIGdldEF0dHJpYnV0ZUluZm8oc3ludGF4KSB7XG4gICAgICAgIGxldCByZXN1bHQgPSB0aGlzLmF0dHJpYnV0ZUxvb2t1cFtzeW50YXgudGFyZ2V0XTtcbiAgICAgICAgaWYgKHJlc3VsdCA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBjb25zdCBkZWYgPSB0aGlzLmZpbmQoQ3VzdG9tQXR0cmlidXRlLCBzeW50YXgudGFyZ2V0KTtcbiAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlTG9va3VwW3N5bnRheC50YXJnZXRdID0gcmVzdWx0ID0gZGVmID09PSBudWxsID8gbnVsbCA6IEF0dHJJbmZvLmZyb20oZGVmKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZSBhIGJpbmRpbmcgY29tbWFuZCByZXNvdXJjZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBuYW1lIC0gVGhlIHBhcnNlZCBgQXR0clN5bnRheGBcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEFuIGluc3RhbmNlIG9mIHRoZSBjb21tYW5kIGlmIGl0IGV4aXN0cywgb3IgYG51bGxgIGlmIGl0IGRvZXMgbm90IGV4aXN0LlxuICAgICAqL1xuICAgIGdldEJpbmRpbmdDb21tYW5kKHN5bnRheCwgb3B0aW9uYWwpIHtcbiAgICAgICAgY29uc3QgbmFtZSA9IHN5bnRheC5jb21tYW5kO1xuICAgICAgICBpZiAobmFtZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHJlc3VsdCA9IHRoaXMuY29tbWFuZExvb2t1cFtuYW1lXTtcbiAgICAgICAgaWYgKHJlc3VsdCA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLmNyZWF0ZShCaW5kaW5nQ29tbWFuZCwgbmFtZSk7XG4gICAgICAgICAgICBpZiAocmVzdWx0ID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gYmluZGluZyBjb21tYW5kOiAke25hbWV9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNvbW1hbmRMb29rdXBbbmFtZV0gPSByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgZmluZChraW5kLCBuYW1lKSB7XG4gICAgICAgIGNvbnN0IGtleSA9IGtpbmQua2V5RnJvbShuYW1lKTtcbiAgICAgICAgbGV0IHJlc29sdmVyID0gdGhpcy5yZXNvdXJjZVJlc29sdmVyc1trZXldO1xuICAgICAgICBpZiAocmVzb2x2ZXIgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgcmVzb2x2ZXIgPSB0aGlzLnJvb3RSZXNvdXJjZVJlc29sdmVyc1trZXldO1xuICAgICAgICAgICAgaWYgKHJlc29sdmVyID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAocmVzb2x2ZXIgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgcmVzb2x2ZXIuZ2V0RmFjdG9yeSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY29uc3QgZmFjdG9yeSA9IHJlc29sdmVyLmdldEZhY3RvcnkodGhpcy5jb250YWluZXIpO1xuICAgICAgICAgICAgaWYgKGZhY3RvcnkgPT09IG51bGwgfHwgZmFjdG9yeSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBkZWZpbml0aW9uID0gTWV0YWRhdGEuZ2V0T3duKGtpbmQubmFtZSwgZmFjdG9yeS5UeXBlKTtcbiAgICAgICAgICAgIGlmIChkZWZpbml0aW9uID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiB3ZSBtYXkgd2FudCB0byBsb2cgYSB3YXJuaW5nIGhlcmUsIG9yIGV2ZW4gdGhyb3cuIFRoaXMgd291bGQgaGFwcGVuIGlmIGEgZGVwZW5kZW5jeSBpcyByZWdpc3RlcmVkIHdpdGggYSByZXNvdXJjZS1saWtlIGtleVxuICAgICAgICAgICAgICAgIC8vIGJ1dCBkb2VzIG5vdCBhY3R1YWxseSBoYXZlIGEgZGVmaW5pdGlvbiBhc3NvY2lhdGVkIHZpYSB0aGUgdHlwZSdzIG1ldGFkYXRhLiBUaGF0ICpzaG91bGQqIGdlbmVyYWxseSBub3QgaGFwcGVuLlxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRlZmluaXRpb247XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNyZWF0ZShraW5kLCBuYW1lKSB7XG4gICAgICAgIGNvbnN0IGtleSA9IGtpbmQua2V5RnJvbShuYW1lKTtcbiAgICAgICAgbGV0IHJlc29sdmVyID0gdGhpcy5yZXNvdXJjZVJlc29sdmVyc1trZXldO1xuICAgICAgICBpZiAocmVzb2x2ZXIgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgcmVzb2x2ZXIgPSB0aGlzLnJvb3RSZXNvdXJjZVJlc29sdmVyc1trZXldO1xuICAgICAgICAgICAgaWYgKHJlc29sdmVyID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAocmVzb2x2ZXIgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGluc3RhbmNlID0gcmVzb2x2ZXIucmVzb2x2ZSh0aGlzLmNvbnRhaW5lciwgdGhpcy5jb250YWluZXIpO1xuICAgICAgICBpZiAoaW5zdGFuY2UgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGluc3RhbmNlO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlc291cmNlLW1vZGVsLmpzLm1hcCIsImV4cG9ydCB2YXIgU3ltYm9sRmxhZ3M7XG4oZnVuY3Rpb24gKFN5bWJvbEZsYWdzKSB7XG4gICAgU3ltYm9sRmxhZ3NbU3ltYm9sRmxhZ3NbXCJ0eXBlXCJdID0gNTExXSA9IFwidHlwZVwiO1xuICAgIFN5bWJvbEZsYWdzW1N5bWJvbEZsYWdzW1wiaXNUZW1wbGF0ZUNvbnRyb2xsZXJcIl0gPSAxXSA9IFwiaXNUZW1wbGF0ZUNvbnRyb2xsZXJcIjtcbiAgICBTeW1ib2xGbGFnc1tTeW1ib2xGbGFnc1tcImlzUmVwbGFjZVBhcnRcIl0gPSAyXSA9IFwiaXNSZXBsYWNlUGFydFwiO1xuICAgIFN5bWJvbEZsYWdzW1N5bWJvbEZsYWdzW1wiaXNDdXN0b21BdHRyaWJ1dGVcIl0gPSA0XSA9IFwiaXNDdXN0b21BdHRyaWJ1dGVcIjtcbiAgICBTeW1ib2xGbGFnc1tTeW1ib2xGbGFnc1tcImlzUGxhaW5BdHRyaWJ1dGVcIl0gPSA4XSA9IFwiaXNQbGFpbkF0dHJpYnV0ZVwiO1xuICAgIFN5bWJvbEZsYWdzW1N5bWJvbEZsYWdzW1wiaXNDdXN0b21FbGVtZW50XCJdID0gMTZdID0gXCJpc0N1c3RvbUVsZW1lbnRcIjtcbiAgICBTeW1ib2xGbGFnc1tTeW1ib2xGbGFnc1tcImlzTGV0RWxlbWVudFwiXSA9IDMyXSA9IFwiaXNMZXRFbGVtZW50XCI7XG4gICAgU3ltYm9sRmxhZ3NbU3ltYm9sRmxhZ3NbXCJpc1BsYWluRWxlbWVudFwiXSA9IDY0XSA9IFwiaXNQbGFpbkVsZW1lbnRcIjtcbiAgICBTeW1ib2xGbGFnc1tTeW1ib2xGbGFnc1tcImlzVGV4dFwiXSA9IDEyOF0gPSBcImlzVGV4dFwiO1xuICAgIFN5bWJvbEZsYWdzW1N5bWJvbEZsYWdzW1wiaXNCaW5kaW5nXCJdID0gMjU2XSA9IFwiaXNCaW5kaW5nXCI7XG4gICAgU3ltYm9sRmxhZ3NbU3ltYm9sRmxhZ3NbXCJoYXNNYXJrZXJcIl0gPSA1MTJdID0gXCJoYXNNYXJrZXJcIjtcbiAgICBTeW1ib2xGbGFnc1tTeW1ib2xGbGFnc1tcImhhc1RlbXBsYXRlXCJdID0gMTAyNF0gPSBcImhhc1RlbXBsYXRlXCI7XG4gICAgU3ltYm9sRmxhZ3NbU3ltYm9sRmxhZ3NbXCJoYXNBdHRyaWJ1dGVzXCJdID0gMjA0OF0gPSBcImhhc0F0dHJpYnV0ZXNcIjtcbiAgICBTeW1ib2xGbGFnc1tTeW1ib2xGbGFnc1tcImhhc0JpbmRpbmdzXCJdID0gNDA5Nl0gPSBcImhhc0JpbmRpbmdzXCI7XG4gICAgU3ltYm9sRmxhZ3NbU3ltYm9sRmxhZ3NbXCJoYXNDaGlsZE5vZGVzXCJdID0gODE5Ml0gPSBcImhhc0NoaWxkTm9kZXNcIjtcbiAgICBTeW1ib2xGbGFnc1tTeW1ib2xGbGFnc1tcImhhc1BhcnRzXCJdID0gMTYzODRdID0gXCJoYXNQYXJ0c1wiO1xufSkoU3ltYm9sRmxhZ3MgfHwgKFN5bWJvbEZsYWdzID0ge30pKTtcbmZ1bmN0aW9uIGNyZWF0ZU1hcmtlcihkb20pIHtcbiAgICBjb25zdCBtYXJrZXIgPSBkb20uY3JlYXRlRWxlbWVudCgnYXUtbScpO1xuICAgIGRvbS5tYWtlVGFyZ2V0KG1hcmtlcik7XG4gICAgcmV0dXJuIG1hcmtlcjtcbn1cbi8qKlxuICogQSBodG1sIGF0dHJpYnV0ZSB0aGF0IGlzIGFzc29jaWF0ZWQgd2l0aCBhIHJlZ2lzdGVyZWQgcmVzb3VyY2UsIHNwZWNpZmljYWxseSBhIHRlbXBsYXRlIGNvbnRyb2xsZXIuXG4gKi9cbmV4cG9ydCBjbGFzcyBUZW1wbGF0ZUNvbnRyb2xsZXJTeW1ib2wge1xuICAgIGNvbnN0cnVjdG9yKGRvbSwgc3ludGF4LCBpbmZvLCBwYXJ0TmFtZSwgcmVzID0gaW5mby5uYW1lKSB7XG4gICAgICAgIHRoaXMuc3ludGF4ID0gc3ludGF4O1xuICAgICAgICB0aGlzLmluZm8gPSBpbmZvO1xuICAgICAgICB0aGlzLnJlcyA9IHJlcztcbiAgICAgICAgdGhpcy5mbGFncyA9IDEgLyogaXNUZW1wbGF0ZUNvbnRyb2xsZXIgKi8gfCA1MTIgLyogaGFzTWFya2VyICovO1xuICAgICAgICB0aGlzLnBoeXNpY2FsTm9kZSA9IG51bGw7XG4gICAgICAgIHRoaXMudGVtcGxhdGUgPSBudWxsO1xuICAgICAgICB0aGlzLnRlbXBsYXRlQ29udHJvbGxlciA9IG51bGw7XG4gICAgICAgIHRoaXMuX2JpbmRpbmdzID0gbnVsbDtcbiAgICAgICAgdGhpcy5fcGFydHMgPSBudWxsO1xuICAgICAgICB0aGlzLnBhcnROYW1lID0gaW5mby5uYW1lID09PSAncmVwbGFjZWFibGUnID8gcGFydE5hbWUgOiBudWxsO1xuICAgICAgICB0aGlzLm1hcmtlciA9IGNyZWF0ZU1hcmtlcihkb20pO1xuICAgIH1cbiAgICBnZXQgYmluZGluZ3MoKSB7XG4gICAgICAgIGlmICh0aGlzLl9iaW5kaW5ncyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5fYmluZGluZ3MgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuZmxhZ3MgfD0gNDA5NiAvKiBoYXNCaW5kaW5ncyAqLztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fYmluZGluZ3M7XG4gICAgfVxuICAgIGdldCBwYXJ0cygpIHtcbiAgICAgICAgaWYgKHRoaXMuX3BhcnRzID09PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLl9wYXJ0cyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5mbGFncyB8PSAxNjM4NCAvKiBoYXNQYXJ0cyAqLztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fcGFydHM7XG4gICAgfVxufVxuLyoqXG4gKiBXcmFwcGVyIGZvciBhbiBlbGVtZW50ICh3aXRoIGFsbCBvZiBpdHMgYXR0cmlidXRlcywgcmVnYXJkbGVzcyBvZiB0aGUgb3JkZXIgaW4gd2hpY2ggdGhleSBhcmUgZGVjbGFyZWQpXG4gKiB0aGF0IGhhcyBhIHJlcGxhY2UgYXR0cmlidXRlIG9uIGl0LlxuICpcbiAqIFRoaXMgZWxlbWVudCB3aWxsIGJlIGxpZnRlZCBmcm9tIHRoZSBET00ganVzdCBsaWtlIGEgdGVtcGxhdGUgY29udHJvbGxlci5cbiAqL1xuZXhwb3J0IGNsYXNzIFJlcGxhY2VQYXJ0U3ltYm9sIHtcbiAgICBjb25zdHJ1Y3RvcihuYW1lLCBwaHlzaWNhbE5vZGUgPSBudWxsLCBwYXJlbnQgPSBudWxsLCB0ZW1wbGF0ZSA9IG51bGwpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5waHlzaWNhbE5vZGUgPSBwaHlzaWNhbE5vZGU7XG4gICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB0aGlzLnRlbXBsYXRlID0gdGVtcGxhdGU7XG4gICAgICAgIHRoaXMuZmxhZ3MgPSAyIC8qIGlzUmVwbGFjZVBhcnQgKi87XG4gICAgfVxufVxuLyoqXG4gKiBBIGh0bWwgYXR0cmlidXRlIHRoYXQgaXMgYXNzb2NpYXRlZCB3aXRoIGEgcmVnaXN0ZXJlZCByZXNvdXJjZSwgYnV0IG5vdCBhIHRlbXBsYXRlIGNvbnRyb2xsZXIuXG4gKi9cbmV4cG9ydCBjbGFzcyBDdXN0b21BdHRyaWJ1dGVTeW1ib2wge1xuICAgIGNvbnN0cnVjdG9yKHN5bnRheCwgaW5mbywgcmVzID0gaW5mby5uYW1lKSB7XG4gICAgICAgIHRoaXMuc3ludGF4ID0gc3ludGF4O1xuICAgICAgICB0aGlzLmluZm8gPSBpbmZvO1xuICAgICAgICB0aGlzLnJlcyA9IHJlcztcbiAgICAgICAgdGhpcy5mbGFncyA9IDQgLyogaXNDdXN0b21BdHRyaWJ1dGUgKi87XG4gICAgICAgIHRoaXMuX2JpbmRpbmdzID0gbnVsbDtcbiAgICB9XG4gICAgZ2V0IGJpbmRpbmdzKCkge1xuICAgICAgICBpZiAodGhpcy5fYmluZGluZ3MgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuX2JpbmRpbmdzID0gW107XG4gICAgICAgICAgICB0aGlzLmZsYWdzIHw9IDQwOTYgLyogaGFzQmluZGluZ3MgKi87XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2JpbmRpbmdzO1xuICAgIH1cbn1cbi8qKlxuICogQW4gYXR0cmlidXRlLCB3aXRoIGVpdGhlciBhIGJpbmRpbmcgY29tbWFuZCBvciBhbiBpbnRlcnBvbGF0aW9uLCB3aG9zZSB0YXJnZXQgaXMgdGhlIGh0bWxcbiAqIGF0dHJpYnV0ZSBvZiB0aGUgZWxlbWVudC5cbiAqXG4gKiBUaGlzIHdpbGwgbmV2ZXIgdGFyZ2V0IGEgYmluZGFibGUgcHJvcGVydHkgb2YgYSBjdXN0b20gYXR0cmlidXRlIG9yIGVsZW1lbnQ7XG4gKi9cbmV4cG9ydCBjbGFzcyBQbGFpbkF0dHJpYnV0ZVN5bWJvbCB7XG4gICAgY29uc3RydWN0b3Ioc3ludGF4LCBjb21tYW5kLCBleHByZXNzaW9uKSB7XG4gICAgICAgIHRoaXMuc3ludGF4ID0gc3ludGF4O1xuICAgICAgICB0aGlzLmNvbW1hbmQgPSBjb21tYW5kO1xuICAgICAgICB0aGlzLmV4cHJlc3Npb24gPSBleHByZXNzaW9uO1xuICAgICAgICB0aGlzLmZsYWdzID0gOCAvKiBpc1BsYWluQXR0cmlidXRlICovO1xuICAgIH1cbn1cbi8qKlxuICogRWl0aGVyIGFuIGF0dHJpYnV0ZSBvbiBhbiBjdXN0b20gZWxlbWVudCB0aGF0IG1hcHMgdG8gYSBkZWNsYXJlZCBiaW5kYWJsZSBwcm9wZXJ0eSBvZiB0aGF0IGVsZW1lbnQsXG4gKiBhIHNpbmdsZS12YWx1ZSBib3VuZCBjdXN0b20gYXR0cmlidXRlLCBvciBvbmUgb2Ygc2V2ZXJhbCBiaW5kYWJsZXMgdGhhdCB3ZXJlIGV4dHJhY3RlZCBmcm9tIHRoZSBhdHRyaWJ1dGVcbiAqIHZhbHVlIG9mIGEgY3VzdG9tIGF0dHJpYnV0ZSB3aXRoIG11bHRpcGxlIGJpbmRpbmdzIHVzYWdlLlxuICpcbiAqIFRoaXMgd2lsbCBhbHdheXMgdGFyZ2V0IGEgYmluZGFibGUgcHJvcGVydHkgb2YgYSBjdXN0b20gYXR0cmlidXRlIG9yIGVsZW1lbnQ7XG4gKi9cbmV4cG9ydCBjbGFzcyBCaW5kaW5nU3ltYm9sIHtcbiAgICBjb25zdHJ1Y3Rvcihjb21tYW5kLCBiaW5kYWJsZSwgZXhwcmVzc2lvbiwgcmF3VmFsdWUsIHRhcmdldCkge1xuICAgICAgICB0aGlzLmNvbW1hbmQgPSBjb21tYW5kO1xuICAgICAgICB0aGlzLmJpbmRhYmxlID0gYmluZGFibGU7XG4gICAgICAgIHRoaXMuZXhwcmVzc2lvbiA9IGV4cHJlc3Npb247XG4gICAgICAgIHRoaXMucmF3VmFsdWUgPSByYXdWYWx1ZTtcbiAgICAgICAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7XG4gICAgICAgIHRoaXMuZmxhZ3MgPSAyNTYgLyogaXNCaW5kaW5nICovO1xuICAgIH1cbn1cbi8qKlxuICogQSBodG1sIGVsZW1lbnQgdGhhdCBpcyBhc3NvY2lhdGVkIHdpdGggYSByZWdpc3RlcmVkIHJlc291cmNlIGVpdGhlciB2aWEgaXRzIChsb3dlckNhc2UpIGBub2RlTmFtZWBcbiAqIG9yIHRoZSB2YWx1ZSBvZiBpdHMgYGFzLWVsZW1lbnRgIGF0dHJpYnV0ZS5cbiAqL1xuZXhwb3J0IGNsYXNzIEN1c3RvbUVsZW1lbnRTeW1ib2wge1xuICAgIGNvbnN0cnVjdG9yKGRvbSwgcGh5c2ljYWxOb2RlLCBpbmZvLCByZXMgPSBpbmZvLm5hbWUsIGJpbmRhYmxlcyA9IGluZm8uYmluZGFibGVzKSB7XG4gICAgICAgIHRoaXMucGh5c2ljYWxOb2RlID0gcGh5c2ljYWxOb2RlO1xuICAgICAgICB0aGlzLmluZm8gPSBpbmZvO1xuICAgICAgICB0aGlzLnJlcyA9IHJlcztcbiAgICAgICAgdGhpcy5iaW5kYWJsZXMgPSBiaW5kYWJsZXM7XG4gICAgICAgIHRoaXMuZmxhZ3MgPSAxNiAvKiBpc0N1c3RvbUVsZW1lbnQgKi87XG4gICAgICAgIHRoaXMuaXNUYXJnZXQgPSB0cnVlO1xuICAgICAgICB0aGlzLnRlbXBsYXRlQ29udHJvbGxlciA9IG51bGw7XG4gICAgICAgIHRoaXMuX2N1c3RvbUF0dHJpYnV0ZXMgPSBudWxsO1xuICAgICAgICB0aGlzLl9wbGFpbkF0dHJpYnV0ZXMgPSBudWxsO1xuICAgICAgICB0aGlzLl9iaW5kaW5ncyA9IG51bGw7XG4gICAgICAgIHRoaXMuX2NoaWxkTm9kZXMgPSBudWxsO1xuICAgICAgICB0aGlzLl9wYXJ0cyA9IG51bGw7XG4gICAgICAgIGlmIChpbmZvLmNvbnRhaW5lcmxlc3MpIHtcbiAgICAgICAgICAgIHRoaXMuaXNDb250YWluZXJsZXNzID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMubWFya2VyID0gY3JlYXRlTWFya2VyKGRvbSk7XG4gICAgICAgICAgICB0aGlzLmZsYWdzIHw9IDUxMiAvKiBoYXNNYXJrZXIgKi87XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmlzQ29udGFpbmVybGVzcyA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5tYXJrZXIgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBjdXN0b21BdHRyaWJ1dGVzKCkge1xuICAgICAgICBpZiAodGhpcy5fY3VzdG9tQXR0cmlidXRlcyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5fY3VzdG9tQXR0cmlidXRlcyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5mbGFncyB8PSAyMDQ4IC8qIGhhc0F0dHJpYnV0ZXMgKi87XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2N1c3RvbUF0dHJpYnV0ZXM7XG4gICAgfVxuICAgIGdldCBwbGFpbkF0dHJpYnV0ZXMoKSB7XG4gICAgICAgIGlmICh0aGlzLl9wbGFpbkF0dHJpYnV0ZXMgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuX3BsYWluQXR0cmlidXRlcyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5mbGFncyB8PSAyMDQ4IC8qIGhhc0F0dHJpYnV0ZXMgKi87XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX3BsYWluQXR0cmlidXRlcztcbiAgICB9XG4gICAgZ2V0IGJpbmRpbmdzKCkge1xuICAgICAgICBpZiAodGhpcy5fYmluZGluZ3MgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuX2JpbmRpbmdzID0gW107XG4gICAgICAgICAgICB0aGlzLmZsYWdzIHw9IDQwOTYgLyogaGFzQmluZGluZ3MgKi87XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2JpbmRpbmdzO1xuICAgIH1cbiAgICBnZXQgY2hpbGROb2RlcygpIHtcbiAgICAgICAgaWYgKHRoaXMuX2NoaWxkTm9kZXMgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuX2NoaWxkTm9kZXMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuZmxhZ3MgfD0gODE5MiAvKiBoYXNDaGlsZE5vZGVzICovO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9jaGlsZE5vZGVzO1xuICAgIH1cbiAgICBnZXQgcGFydHMoKSB7XG4gICAgICAgIGlmICh0aGlzLl9wYXJ0cyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5fcGFydHMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuZmxhZ3MgfD0gMTYzODQgLyogaGFzUGFydHMgKi87XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX3BhcnRzO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBMZXRFbGVtZW50U3ltYm9sIHtcbiAgICBjb25zdHJ1Y3Rvcihkb20sIHBoeXNpY2FsTm9kZSwgbWFya2VyID0gY3JlYXRlTWFya2VyKGRvbSkpIHtcbiAgICAgICAgdGhpcy5waHlzaWNhbE5vZGUgPSBwaHlzaWNhbE5vZGU7XG4gICAgICAgIHRoaXMubWFya2VyID0gbWFya2VyO1xuICAgICAgICB0aGlzLmZsYWdzID0gMzIgLyogaXNMZXRFbGVtZW50ICovIHwgNTEyIC8qIGhhc01hcmtlciAqLztcbiAgICAgICAgdGhpcy50b0JpbmRpbmdDb250ZXh0ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX2JpbmRpbmdzID0gbnVsbDtcbiAgICB9XG4gICAgZ2V0IGJpbmRpbmdzKCkge1xuICAgICAgICBpZiAodGhpcy5fYmluZGluZ3MgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuX2JpbmRpbmdzID0gW107XG4gICAgICAgICAgICB0aGlzLmZsYWdzIHw9IDQwOTYgLyogaGFzQmluZGluZ3MgKi87XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2JpbmRpbmdzO1xuICAgIH1cbn1cbi8qKlxuICogQSBub3JtYWwgaHRtbCBlbGVtZW50IHRoYXQgbWF5IG9yIG1heSBub3QgaGF2ZSBhdHRyaWJ1dGUgYmVoYXZpb3JzIGFuZC9vciBjaGlsZCBub2RlIGJlaGF2aW9ycy5cbiAqXG4gKiBJdCBpcyBwb3NzaWJsZSBmb3IgYSBQbGFpbkVsZW1lbnRTeW1ib2wgdG8gbm90IHlpZWxkIGFueSBpbnN0cnVjdGlvbnMgZHVyaW5nIGNvbXBpbGF0aW9uLlxuICovXG5leHBvcnQgY2xhc3MgUGxhaW5FbGVtZW50U3ltYm9sIHtcbiAgICBjb25zdHJ1Y3Rvcihkb20sIHBoeXNpY2FsTm9kZSkge1xuICAgICAgICB0aGlzLnBoeXNpY2FsTm9kZSA9IHBoeXNpY2FsTm9kZTtcbiAgICAgICAgdGhpcy5mbGFncyA9IDY0IC8qIGlzUGxhaW5FbGVtZW50ICovO1xuICAgICAgICB0aGlzLmlzVGFyZ2V0ID0gZmFsc2U7XG4gICAgICAgIHRoaXMudGVtcGxhdGVDb250cm9sbGVyID0gbnVsbDtcbiAgICAgICAgdGhpcy5oYXNTbG90cyA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9jdXN0b21BdHRyaWJ1dGVzID0gbnVsbDtcbiAgICAgICAgdGhpcy5fcGxhaW5BdHRyaWJ1dGVzID0gbnVsbDtcbiAgICAgICAgdGhpcy5fY2hpbGROb2RlcyA9IG51bGw7XG4gICAgfVxuICAgIGdldCBjdXN0b21BdHRyaWJ1dGVzKCkge1xuICAgICAgICBpZiAodGhpcy5fY3VzdG9tQXR0cmlidXRlcyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5fY3VzdG9tQXR0cmlidXRlcyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5mbGFncyB8PSAyMDQ4IC8qIGhhc0F0dHJpYnV0ZXMgKi87XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2N1c3RvbUF0dHJpYnV0ZXM7XG4gICAgfVxuICAgIGdldCBwbGFpbkF0dHJpYnV0ZXMoKSB7XG4gICAgICAgIGlmICh0aGlzLl9wbGFpbkF0dHJpYnV0ZXMgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuX3BsYWluQXR0cmlidXRlcyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5mbGFncyB8PSAyMDQ4IC8qIGhhc0F0dHJpYnV0ZXMgKi87XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX3BsYWluQXR0cmlidXRlcztcbiAgICB9XG4gICAgZ2V0IGNoaWxkTm9kZXMoKSB7XG4gICAgICAgIGlmICh0aGlzLl9jaGlsZE5vZGVzID09PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLl9jaGlsZE5vZGVzID0gW107XG4gICAgICAgICAgICB0aGlzLmZsYWdzIHw9IDgxOTIgLyogaGFzQ2hpbGROb2RlcyAqLztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fY2hpbGROb2RlcztcbiAgICB9XG59XG4vKipcbiAqIEEgc3RhbmRhbG9uZSB0ZXh0IG5vZGUgdGhhdCBoYXMgYW4gaW50ZXJwb2xhdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIFRleHRTeW1ib2wge1xuICAgIGNvbnN0cnVjdG9yKGRvbSwgcGh5c2ljYWxOb2RlLCBpbnRlcnBvbGF0aW9uLCBtYXJrZXIgPSBjcmVhdGVNYXJrZXIoZG9tKSkge1xuICAgICAgICB0aGlzLnBoeXNpY2FsTm9kZSA9IHBoeXNpY2FsTm9kZTtcbiAgICAgICAgdGhpcy5pbnRlcnBvbGF0aW9uID0gaW50ZXJwb2xhdGlvbjtcbiAgICAgICAgdGhpcy5tYXJrZXIgPSBtYXJrZXI7XG4gICAgICAgIHRoaXMuZmxhZ3MgPSAxMjggLyogaXNUZXh0ICovIHwgNTEyIC8qIGhhc01hcmtlciAqLztcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zZW1hbnRpYy1tb2RlbC5qcy5tYXAiLCIvKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmUgKi9cbi8vLyA8cmVmZXJlbmNlIHR5cGVzPVwicmVmbGVjdC1tZXRhZGF0YVwiIC8+XG5pbXBvcnQgeyBNZXRhZGF0YSB9IGZyb20gJ0BhdXJlbGlhL21ldGFkYXRhJztcbmltcG9ydCB7IFBMQVRGT1JNIH0gZnJvbSAnLi9wbGF0Zm9ybSc7XG5pbXBvcnQgeyBSZXBvcnRlciB9IGZyb20gJy4vcmVwb3J0ZXInO1xuaW1wb3J0IHsgUHJvdG9jb2wgfSBmcm9tICcuL3Jlc291cmNlJztcbmltcG9ydCB7IGlzQXJyYXlJbmRleCwgaXNOYXRpdmVGdW5jdGlvbiwgaXNPYmplY3QgfSBmcm9tICcuL2Z1bmN0aW9ucyc7XG5leHBvcnQgY2xhc3MgUmVzb2x2ZXJCdWlsZGVyIHtcbiAgICBjb25zdHJ1Y3Rvcihjb250YWluZXIsIGtleSkge1xuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgICAgICAgdGhpcy5rZXkgPSBrZXk7XG4gICAgfVxuICAgIGluc3RhbmNlKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlZ2lzdGVyUmVzb2x2ZXIoMCAvKiBpbnN0YW5jZSAqLywgdmFsdWUpO1xuICAgIH1cbiAgICBzaW5nbGV0b24odmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVnaXN0ZXJSZXNvbHZlcigxIC8qIHNpbmdsZXRvbiAqLywgdmFsdWUpO1xuICAgIH1cbiAgICB0cmFuc2llbnQodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVnaXN0ZXJSZXNvbHZlcigyIC8qIHRyYW5zaWVudCAqLywgdmFsdWUpO1xuICAgIH1cbiAgICBjYWxsYmFjayh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWdpc3RlclJlc29sdmVyKDMgLyogY2FsbGJhY2sgKi8sIHZhbHVlKTtcbiAgICB9XG4gICAgY2FjaGVkQ2FsbGJhY2sodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVnaXN0ZXJSZXNvbHZlcigzIC8qIGNhbGxiYWNrICovLCBjYWNoZUNhbGxiYWNrUmVzdWx0KHZhbHVlKSk7XG4gICAgfVxuICAgIGFsaWFzVG8oZGVzdGluYXRpb25LZXkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVnaXN0ZXJSZXNvbHZlcig1IC8qIGFsaWFzICovLCBkZXN0aW5hdGlvbktleSk7XG4gICAgfVxuICAgIHJlZ2lzdGVyUmVzb2x2ZXIoc3RyYXRlZ3ksIHN0YXRlKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVyLCBrZXkgfSA9IHRoaXM7XG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gdGhpcy5rZXkgPSAodm9pZCAwKTtcbiAgICAgICAgcmV0dXJuIGNvbnRhaW5lci5yZWdpc3RlclJlc29sdmVyKGtleSwgbmV3IFJlc29sdmVyKGtleSwgc3RyYXRlZ3ksIHN0YXRlKSk7XG4gICAgfVxufVxuZnVuY3Rpb24gY2xvbmVBcnJheVdpdGhQb3NzaWJsZVByb3BzKHNvdXJjZSkge1xuICAgIGNvbnN0IGNsb25lID0gc291cmNlLnNsaWNlKCk7XG4gICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKHNvdXJjZSk7XG4gICAgY29uc3QgbGVuID0ga2V5cy5sZW5ndGg7XG4gICAgbGV0IGtleTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgIGtleSA9IGtleXNbaV07XG4gICAgICAgIGlmICghaXNBcnJheUluZGV4KGtleSkpIHtcbiAgICAgICAgICAgIGNsb25lW2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY2xvbmU7XG59XG5leHBvcnQgY29uc3QgREkgPSB7XG4gICAgY3JlYXRlQ29udGFpbmVyKC4uLnBhcmFtcykge1xuICAgICAgICBpZiAocGFyYW1zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBDb250YWluZXIobnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IENvbnRhaW5lcihudWxsKS5yZWdpc3RlciguLi5wYXJhbXMpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBnZXREZXNpZ25QYXJhbXR5cGVzKFR5cGUpIHtcbiAgICAgICAgcmV0dXJuIE1ldGFkYXRhLmdldE93bignZGVzaWduOnBhcmFtdHlwZXMnLCBUeXBlKTtcbiAgICB9LFxuICAgIGdldEFubm90YXRpb25QYXJhbXR5cGVzKFR5cGUpIHtcbiAgICAgICAgY29uc3Qga2V5ID0gUHJvdG9jb2wuYW5ub3RhdGlvbi5rZXlGb3IoJ2RpOnBhcmFtdHlwZXMnKTtcbiAgICAgICAgcmV0dXJuIE1ldGFkYXRhLmdldE93bihrZXksIFR5cGUpO1xuICAgIH0sXG4gICAgZ2V0T3JDcmVhdGVBbm5vdGF0aW9uUGFyYW1UeXBlcyhUeXBlKSB7XG4gICAgICAgIGNvbnN0IGtleSA9IFByb3RvY29sLmFubm90YXRpb24ua2V5Rm9yKCdkaTpwYXJhbXR5cGVzJyk7XG4gICAgICAgIGxldCBhbm5vdGF0aW9uUGFyYW10eXBlcyA9IE1ldGFkYXRhLmdldE93bihrZXksIFR5cGUpO1xuICAgICAgICBpZiAoYW5ub3RhdGlvblBhcmFtdHlwZXMgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgTWV0YWRhdGEuZGVmaW5lKGtleSwgYW5ub3RhdGlvblBhcmFtdHlwZXMgPSBbXSwgVHlwZSk7XG4gICAgICAgICAgICBQcm90b2NvbC5hbm5vdGF0aW9uLmFwcGVuZFRvKFR5cGUsIGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFubm90YXRpb25QYXJhbXR5cGVzO1xuICAgIH0sXG4gICAgZ2V0RGVwZW5kZW5jaWVzKFR5cGUpIHtcbiAgICAgICAgLy8gTm90ZTogRXZlcnkgZGV0YWlsIG9mIHRoaXMgZ2V0RGVwZW5kZW5jaWVzIG1ldGhvZCBpcyBwcmV0dHkgZGVsaWJlcmF0ZSBhdCB0aGUgbW9tZW50LCBhbmQgcHJvYmFibHkgbm90IHlldCAxMDAlIHRlc3RlZCBmcm9tIGV2ZXJ5IHBvc3NpYmxlIGFuZ2xlLFxuICAgICAgICAvLyBzbyBiZSBjYXJlZnVsIHdpdGggbWFraW5nIGNoYW5nZXMgaGVyZSBhcyBpdCBjYW4gaGF2ZSBhIGh1Z2UgaW1wYWN0IG9uIGNvbXBsZXggZW5kIHVzZXIgYXBwcy5cbiAgICAgICAgLy8gUHJlZmVyYWJseSwgb25seSBtYWtlIGNoYW5nZXMgdG8gdGhlIGRlcGVuZGVuY3kgcmVzb2x1dGlvbiBwcm9jZXNzIHZpYSBhIFJGQy5cbiAgICAgICAgY29uc3Qga2V5ID0gUHJvdG9jb2wuYW5ub3RhdGlvbi5rZXlGb3IoJ2RpOmRlcGVuZGVuY2llcycpO1xuICAgICAgICBsZXQgZGVwZW5kZW5jaWVzID0gTWV0YWRhdGEuZ2V0T3duKGtleSwgVHlwZSk7XG4gICAgICAgIGlmIChkZXBlbmRlbmNpZXMgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgLy8gVHlwZS5sZW5ndGggaXMgdGhlIG51bWJlciBvZiBjb25zdHJ1Y3RvciBwYXJhbWV0ZXJzLiBJZiB0aGlzIGlzIDAsIGl0IGNvdWxkIG1lYW4gdGhlIGNsYXNzIGhhcyBhbiBlbXB0eSBjb25zdHJ1Y3RvclxuICAgICAgICAgICAgLy8gYnV0IGl0IGNvdWxkIGFsc28gbWVhbiB0aGUgY2xhc3MgaGFzIG5vIGNvbnN0cnVjdG9yIGF0IGFsbCAoaW4gd2hpY2ggY2FzZSBpdCBpbmhlcml0cyB0aGUgY29uc3RydWN0b3IgZnJvbSB0aGUgcHJvdG90eXBlKS5cbiAgICAgICAgICAgIC8vIE5vbi16ZXJvIGNvbnN0cnVjdG9yIGxlbmd0aCArIG5vIHBhcmFtdHlwZXMgbWVhbnMgZW1pdERlY29yYXRvck1ldGFkYXRhIGlzIG9mZiwgb3IgdGhlIGNsYXNzIGhhcyBubyBkZWNvcmF0b3IuXG4gICAgICAgICAgICAvLyBXZSdyZSBub3QgZG9pbmcgYW55dGhpbmcgd2l0aCB0aGUgYWJvdmUgcmlnaHQgbm93LCBidXQgaXQncyBnb29kIHRvIGtlZXAgaW4gbWluZCBmb3IgYW55IGZ1dHVyZSBpc3N1ZXMuXG4gICAgICAgICAgICBjb25zdCBpbmplY3QgPSBUeXBlLmluamVjdDtcbiAgICAgICAgICAgIGlmIChpbmplY3QgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgIC8vIGRlc2lnbjpwYXJhbXR5cGVzIGlzIHNldCBieSB0c2Mgd2hlbiBlbWl0RGVjb3JhdG9yTWV0YWRhdGEgaXMgZW5hYmxlZC5cbiAgICAgICAgICAgICAgICBjb25zdCBkZXNpZ25QYXJhbXR5cGVzID0gREkuZ2V0RGVzaWduUGFyYW10eXBlcyhUeXBlKTtcbiAgICAgICAgICAgICAgICAvLyBhdTphbm5vdGF0aW9uOmRpOnBhcmFtdHlwZXMgaXMgc2V0IGJ5IHRoZSBwYXJhbWV0ZXIgZGVjb3JhdG9yIGZyb20gREkuY3JlYXRlSW50ZXJmYWNlIG9yIGJ5IEBpbmplY3RcbiAgICAgICAgICAgICAgICBjb25zdCBhbm5vdGF0aW9uUGFyYW10eXBlcyA9IERJLmdldEFubm90YXRpb25QYXJhbXR5cGVzKFR5cGUpO1xuICAgICAgICAgICAgICAgIGlmIChkZXNpZ25QYXJhbXR5cGVzID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFubm90YXRpb25QYXJhbXR5cGVzID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9ubHkgZ28gdXAgdGhlIHByb3RvdHlwZSBpZiBuZWl0aGVyIHN0YXRpYyBpbmplY3Qgbm9yIGFueSBvZiB0aGUgcGFyYW10eXBlcyBpcyBkZWZpbmVkLCBhc1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlcmUgaXMgbm8gc291bmQgd2F5IHRvIG1lcmdlIGEgdHlwZSdzIGRlcHMgd2l0aCBpdHMgcHJvdG90eXBlJ3MgZGVwc1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgUHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoVHlwZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIFByb3RvID09PSAnZnVuY3Rpb24nICYmIFByb3RvICE9PSBGdW5jdGlvbi5wcm90b3R5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXBlbmRlbmNpZXMgPSBjbG9uZUFycmF5V2l0aFBvc3NpYmxlUHJvcHMoREkuZ2V0RGVwZW5kZW5jaWVzKFByb3RvKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXBlbmRlbmNpZXMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vIGRlc2lnbjpwYXJhbXR5cGVzIHNvIGp1c3QgdXNlIHRoZSBhdTphbm5vdGF0aW9uOmRpOnBhcmFtdHlwZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlcGVuZGVuY2llcyA9IGNsb25lQXJyYXlXaXRoUG9zc2libGVQcm9wcyhhbm5vdGF0aW9uUGFyYW10eXBlcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoYW5ub3RhdGlvblBhcmFtdHlwZXMgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBObyBhdTphbm5vdGF0aW9uOmRpOnBhcmFtdHlwZXMgc28ganVzdCB1c2UgdGhlIGRlc2lnbjpwYXJhbXR5cGVzXG4gICAgICAgICAgICAgICAgICAgIGRlcGVuZGVuY2llcyA9IGNsb25lQXJyYXlXaXRoUG9zc2libGVQcm9wcyhkZXNpZ25QYXJhbXR5cGVzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdlJ3ZlIGdvdCBib3RoLCBzbyBtZXJnZSB0aGVtIChpbiBjYXNlIG9mIGNvbmZsaWN0IG9uIHNhbWUgaW5kZXgsIGF1OmFubm90YXRpb246ZGk6cGFyYW10eXBlcyB0YWtlIHByZWNlZGVuY2UpXG4gICAgICAgICAgICAgICAgICAgIGRlcGVuZGVuY2llcyA9IGNsb25lQXJyYXlXaXRoUG9zc2libGVQcm9wcyhkZXNpZ25QYXJhbXR5cGVzKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGxlbiA9IGFubm90YXRpb25QYXJhbXR5cGVzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGF1QW5ub3RhdGlvblBhcmFtdHlwZTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXVBbm5vdGF0aW9uUGFyYW10eXBlID0gYW5ub3RhdGlvblBhcmFtdHlwZXNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXVBbm5vdGF0aW9uUGFyYW10eXBlICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXBlbmRlbmNpZXNbaV0gPSBhdUFubm90YXRpb25QYXJhbXR5cGU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGFubm90YXRpb25QYXJhbXR5cGVzKTtcbiAgICAgICAgICAgICAgICAgICAgbGVuID0ga2V5cy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIGxldCBrZXk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleSA9IGtleXNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzQXJyYXlJbmRleChrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVwZW5kZW5jaWVzW2tleV0gPSBhbm5vdGF0aW9uUGFyYW10eXBlc1trZXldO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gSWdub3JlIHBhcmFtdHlwZXMgaWYgd2UgaGF2ZSBzdGF0aWMgaW5qZWN0XG4gICAgICAgICAgICAgICAgZGVwZW5kZW5jaWVzID0gY2xvbmVBcnJheVdpdGhQb3NzaWJsZVByb3BzKGluamVjdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBNZXRhZGF0YS5kZWZpbmUoa2V5LCBkZXBlbmRlbmNpZXMsIFR5cGUpO1xuICAgICAgICAgICAgUHJvdG9jb2wuYW5ub3RhdGlvbi5hcHBlbmRUbyhUeXBlLCBrZXkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkZXBlbmRlbmNpZXM7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBjcmVhdGVzIGEgZGVjb3JhdG9yIHRoYXQgYWxzbyBtYXRjaGVzIGFuIGludGVyZmFjZSBhbmQgY2FuIGJlIHVzZWQgYXMgYSB7QGxpbmtjb2RlIEtleX0uXG4gICAgICogYGBgXG4gICAgICogY29uc3QgSUxvZ2dlciA9IERJLmNyZWF0ZUludGVyZmFjZTxMb2dnZXI+KCdMb2dnZXInKS5ub0RlZmF1bHQoKTtcbiAgICAgKiBjb250YWluZXIucmVnaXN0ZXIoUmVnaXN0cmF0aW9uLnNpbmdsZXRvbihJTG9nZ2VyLCBnZXRTb21lTG9nZ2VyKCkpKTtcbiAgICAgKiBjb25zdCBsb2cgPSBjb250YWluZXIuZ2V0KElMb2dnZXIpO1xuICAgICAqIGxvZy5pbmZvKCdoZWxsbyB3b3JsZCcpO1xuICAgICAqIGNsYXNzIEZvbyB7XG4gICAgICogICBjb25zdHJ1Y3RvciggQElMb2dnZXIgbG9nOiBJTG9nZ2VyICkge1xuICAgICAqICAgICBsb2cuaW5mbygnaGVsbG8gd29ybGQnKTtcbiAgICAgKiAgIH1cbiAgICAgKiB9XG4gICAgICogYGBgXG4gICAgICogeW91IGNhbiBhbHNvIGJ1aWxkIGRlZmF1bHQgcmVnaXN0cmF0aW9ucyBpbnRvIHlvdXIgaW50ZXJmYWNlLlxuICAgICAqIGBgYFxuICAgICAqIGV4cG9ydCBjb25zdCBJTG9nZ2VyID0gREkuY3JlYXRlSW50ZXJmYWNlPExvZ2dlcj4oJ0xvZ2dlcicpXG4gICAgICogICAgICAgIC53aXRoRGVmYXVsdCggYnVpbGRlciA9PiBidWlsZGVyLmNhY2hlZENhbGxiYWNrKExvZ2dlckRlZmF1bHQpKTtcbiAgICAgKiBjb25zdCBsb2cgPSBjb250YWluZXIuZ2V0KElMb2dnZXIpO1xuICAgICAqIGxvZy5pbmZvKCdoZWxsbyB3b3JsZCcpO1xuICAgICAqIGNsYXNzIEZvbyB7XG4gICAgICogICBjb25zdHJ1Y3RvciggQElMb2dnZXIgbG9nOiBJTG9nZ2VyICkge1xuICAgICAqICAgICBsb2cuaW5mbygnaGVsbG8gd29ybGQnKTtcbiAgICAgKiAgIH1cbiAgICAgKiB9XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZnJpZW5kbHlOYW1lXG4gICAgICovXG4gICAgY3JlYXRlSW50ZXJmYWNlKGZyaWVuZGx5TmFtZSkge1xuICAgICAgICBjb25zdCBJbnRlcmZhY2UgPSBmdW5jdGlvbiAodGFyZ2V0LCBwcm9wZXJ0eSwgaW5kZXgpIHtcbiAgICAgICAgICAgIGlmICh0YXJnZXQgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRocm93IFJlcG9ydGVyLmVycm9yKDE2LCBJbnRlcmZhY2UuZnJpZW5kbHlOYW1lLCBJbnRlcmZhY2UpOyAvLyBUT0RPOiBhZGQgZXJyb3IgKHRyeWluZyB0byByZXNvbHZlIGFuIEludGVyZmFjZVN5bWJvbCB0aGF0IGhhcyBubyByZWdpc3RyYXRpb25zKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgYW5ub3RhdGlvblBhcmFtdHlwZXMgPSBESS5nZXRPckNyZWF0ZUFubm90YXRpb25QYXJhbVR5cGVzKHRhcmdldCk7XG4gICAgICAgICAgICBhbm5vdGF0aW9uUGFyYW10eXBlc1tpbmRleF0gPSBJbnRlcmZhY2U7XG4gICAgICAgICAgICByZXR1cm4gdGFyZ2V0O1xuICAgICAgICB9O1xuICAgICAgICBJbnRlcmZhY2UuZnJpZW5kbHlOYW1lID0gZnJpZW5kbHlOYW1lID09IG51bGwgPyAnSW50ZXJmYWNlJyA6IGZyaWVuZGx5TmFtZTtcbiAgICAgICAgSW50ZXJmYWNlLm5vRGVmYXVsdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBJbnRlcmZhY2U7XG4gICAgICAgIH07XG4gICAgICAgIEludGVyZmFjZS53aXRoRGVmYXVsdCA9IGZ1bmN0aW9uIChjb25maWd1cmUpIHtcbiAgICAgICAgICAgIEludGVyZmFjZS53aXRoRGVmYXVsdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBSZXBvcnRlci5lcnJvcigxNywgSW50ZXJmYWNlKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBJbnRlcmZhY2UucmVnaXN0ZXIgPSBmdW5jdGlvbiAoY29udGFpbmVyLCBrZXkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29uZmlndXJlKG5ldyBSZXNvbHZlckJ1aWxkZXIoY29udGFpbmVyLCBrZXkgIT09IG51bGwgJiYga2V5ICE9PSB2b2lkIDAgPyBrZXkgOiBJbnRlcmZhY2UpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gSW50ZXJmYWNlO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gSW50ZXJmYWNlO1xuICAgIH0sXG4gICAgaW5qZWN0KC4uLmRlcGVuZGVuY2llcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwga2V5LCBkZXNjcmlwdG9yKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGRlc2NyaXB0b3IgPT09ICdudW1iZXInKSB7IC8vIEl0J3MgYSBwYXJhbWV0ZXIgZGVjb3JhdG9yLlxuICAgICAgICAgICAgICAgIGNvbnN0IGFubm90YXRpb25QYXJhbXR5cGVzID0gREkuZ2V0T3JDcmVhdGVBbm5vdGF0aW9uUGFyYW1UeXBlcyh0YXJnZXQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlcCA9IGRlcGVuZGVuY2llc1swXTtcbiAgICAgICAgICAgICAgICBpZiAoZGVwICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICAgICAgYW5ub3RhdGlvblBhcmFtdHlwZXNbZGVzY3JpcHRvcl0gPSBkZXA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoa2V5KSB7IC8vIEl0J3MgYSBwcm9wZXJ0eSBkZWNvcmF0b3IuIE5vdCBzdXBwb3J0ZWQgYnkgdGhlIGNvbnRhaW5lciB3aXRob3V0IHBsdWdpbnMuXG4gICAgICAgICAgICAgICAgY29uc3QgYW5ub3RhdGlvblBhcmFtdHlwZXMgPSBESS5nZXRPckNyZWF0ZUFubm90YXRpb25QYXJhbVR5cGVzKHRhcmdldC5jb25zdHJ1Y3Rvcik7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVwID0gZGVwZW5kZW5jaWVzWzBdO1xuICAgICAgICAgICAgICAgIGlmIChkZXAgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgICAgICBhbm5vdGF0aW9uUGFyYW10eXBlc1trZXldID0gZGVwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGRlc2NyaXB0b3IpIHsgLy8gSXQncyBhIGZ1bmN0aW9uIGRlY29yYXRvciAobm90IGEgQ2xhc3MgY29uc3RydWN0b3IpXG4gICAgICAgICAgICAgICAgY29uc3QgZm4gPSBkZXNjcmlwdG9yLnZhbHVlO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFubm90YXRpb25QYXJhbXR5cGVzID0gREkuZ2V0T3JDcmVhdGVBbm5vdGF0aW9uUGFyYW1UeXBlcyhmbik7XG4gICAgICAgICAgICAgICAgbGV0IGRlcDtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRlcGVuZGVuY2llcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICBkZXAgPSBkZXBlbmRlbmNpZXNbaV07XG4gICAgICAgICAgICAgICAgICAgIGlmIChkZXAgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYW5ub3RhdGlvblBhcmFtdHlwZXNbaV0gPSBkZXA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHsgLy8gSXQncyBhIGNsYXNzIGRlY29yYXRvci5cbiAgICAgICAgICAgICAgICBjb25zdCBhbm5vdGF0aW9uUGFyYW10eXBlcyA9IERJLmdldE9yQ3JlYXRlQW5ub3RhdGlvblBhcmFtVHlwZXModGFyZ2V0KTtcbiAgICAgICAgICAgICAgICBsZXQgZGVwO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGVwZW5kZW5jaWVzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlcCA9IGRlcGVuZGVuY2llc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRlcCAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhbm5vdGF0aW9uUGFyYW10eXBlc1tpXSA9IGRlcDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyB0aGUgYHRhcmdldGAgY2xhc3MgYXMgYSB0cmFuc2llbnQgZGVwZW5kZW5jeTsgZWFjaCB0aW1lIHRoZSBkZXBlbmRlbmN5IGlzIHJlc29sdmVkXG4gICAgICogYSBuZXcgaW5zdGFuY2Ugd2lsbCBiZSBjcmVhdGVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRhcmdldCAtIFRoZSBjbGFzcyAvIGNvbnN0cnVjdG9yIGZ1bmN0aW9uIHRvIHJlZ2lzdGVyIGFzIHRyYW5zaWVudC5cbiAgICAgKiBAcmV0dXJucyBUaGUgc2FtZSBjbGFzcywgd2l0aCBhIHN0YXRpYyBgcmVnaXN0ZXJgIG1ldGhvZCB0aGF0IHRha2VzIGEgY29udGFpbmVyIGFuZCByZXR1cm5zIHRoZSBhcHByb3ByaWF0ZSByZXNvbHZlci5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlIGBgYHRzXG4gICAgICogLy8gT24gYW4gZXhpc3RpbmcgY2xhc3NcbiAgICAgKiBjbGFzcyBGb28geyB9XG4gICAgICogREkudHJhbnNpZW50KEZvbyk7XG4gICAgICpcbiAgICAgKiAvLyBJbmxpbmUgZGVjbGFyYXRpb25cbiAgICAgKiBjb25zdCBGb28gPSBESS50cmFuc2llbnQoY2xhc3MgeyB9KTtcbiAgICAgKiAvLyBGb28gaXMgbm93IHN0cm9uZ2x5IHR5cGVkIHdpdGggcmVnaXN0ZXJcbiAgICAgKiBGb28ucmVnaXN0ZXIoY29udGFpbmVyKTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICB0cmFuc2llbnQodGFyZ2V0KSB7XG4gICAgICAgIHRhcmdldC5yZWdpc3RlciA9IGZ1bmN0aW9uIHJlZ2lzdGVyKGNvbnRhaW5lcikge1xuICAgICAgICAgICAgY29uc3QgcmVnaXN0cmF0aW9uID0gUmVnaXN0cmF0aW9uLnRyYW5zaWVudCh0YXJnZXQsIHRhcmdldCk7XG4gICAgICAgICAgICByZXR1cm4gcmVnaXN0cmF0aW9uLnJlZ2lzdGVyKGNvbnRhaW5lciwgdGFyZ2V0KTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyB0aGUgYHRhcmdldGAgY2xhc3MgYXMgYSBzaW5nbGV0b24gZGVwZW5kZW5jeTsgdGhlIGNsYXNzIHdpbGwgb25seSBiZSBjcmVhdGVkIG9uY2UuIEVhY2hcbiAgICAgKiBjb25zZWN1dGl2ZSB0aW1lIHRoZSBkZXBlbmRlbmN5IGlzIHJlc29sdmVkLCB0aGUgc2FtZSBpbnN0YW5jZSB3aWxsIGJlIHJldHVybmVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRhcmdldCAtIFRoZSBjbGFzcyAvIGNvbnN0cnVjdG9yIGZ1bmN0aW9uIHRvIHJlZ2lzdGVyIGFzIGEgc2luZ2xldG9uLlxuICAgICAqIEByZXR1cm5zIFRoZSBzYW1lIGNsYXNzLCB3aXRoIGEgc3RhdGljIGByZWdpc3RlcmAgbWV0aG9kIHRoYXQgdGFrZXMgYSBjb250YWluZXIgYW5kIHJldHVybnMgdGhlIGFwcHJvcHJpYXRlIHJlc29sdmVyLlxuICAgICAqIEBleGFtcGxlIGBgYHRzXG4gICAgICogLy8gT24gYW4gZXhpc3RpbmcgY2xhc3NcbiAgICAgKiBjbGFzcyBGb28geyB9XG4gICAgICogREkuc2luZ2xldG9uKEZvbyk7XG4gICAgICpcbiAgICAgKiAvLyBJbmxpbmUgZGVjbGFyYXRpb25cbiAgICAgKiBjb25zdCBGb28gPSBESS5zaW5nbGV0b24oY2xhc3MgeyB9KTtcbiAgICAgKiAvLyBGb28gaXMgbm93IHN0cm9uZ2x5IHR5cGVkIHdpdGggcmVnaXN0ZXJcbiAgICAgKiBGb28ucmVnaXN0ZXIoY29udGFpbmVyKTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBzaW5nbGV0b24odGFyZ2V0KSB7XG4gICAgICAgIHRhcmdldC5yZWdpc3RlciA9IGZ1bmN0aW9uIHJlZ2lzdGVyKGNvbnRhaW5lcikge1xuICAgICAgICAgICAgY29uc3QgcmVnaXN0cmF0aW9uID0gUmVnaXN0cmF0aW9uLnNpbmdsZXRvbih0YXJnZXQsIHRhcmdldCk7XG4gICAgICAgICAgICByZXR1cm4gcmVnaXN0cmF0aW9uLnJlZ2lzdGVyKGNvbnRhaW5lciwgdGFyZ2V0KTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICB9LFxufTtcbmV4cG9ydCBjb25zdCBJQ29udGFpbmVyID0gREkuY3JlYXRlSW50ZXJmYWNlKCdJQ29udGFpbmVyJykubm9EZWZhdWx0KCk7XG5leHBvcnQgY29uc3QgSVNlcnZpY2VMb2NhdG9yID0gSUNvbnRhaW5lcjtcbmZ1bmN0aW9uIGNyZWF0ZVJlc29sdmVyKGdldHRlcikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIGNvbnN0IHJlc29sdmVyID0gZnVuY3Rpb24gKHRhcmdldCwgcHJvcGVydHksIGRlc2NyaXB0b3IpIHtcbiAgICAgICAgICAgIERJLmluamVjdChyZXNvbHZlcikodGFyZ2V0LCBwcm9wZXJ0eSwgZGVzY3JpcHRvcik7XG4gICAgICAgIH07XG4gICAgICAgIHJlc29sdmVyLnJlc29sdmUgPSBmdW5jdGlvbiAoaGFuZGxlciwgcmVxdWVzdG9yKSB7XG4gICAgICAgICAgICByZXR1cm4gZ2V0dGVyKGtleSwgaGFuZGxlciwgcmVxdWVzdG9yKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHJlc29sdmVyO1xuICAgIH07XG59XG5leHBvcnQgY29uc3QgaW5qZWN0ID0gREkuaW5qZWN0O1xuZnVuY3Rpb24gdHJhbnNpZW50RGVjb3JhdG9yKHRhcmdldCkge1xuICAgIHJldHVybiBESS50cmFuc2llbnQodGFyZ2V0KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2llbnQodGFyZ2V0KSB7XG4gICAgcmV0dXJuIHRhcmdldCA9PSBudWxsID8gdHJhbnNpZW50RGVjb3JhdG9yIDogdHJhbnNpZW50RGVjb3JhdG9yKHRhcmdldCk7XG59XG5mdW5jdGlvbiBzaW5nbGV0b25EZWNvcmF0b3IodGFyZ2V0KSB7XG4gICAgcmV0dXJuIERJLnNpbmdsZXRvbih0YXJnZXQpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNpbmdsZXRvbih0YXJnZXQpIHtcbiAgICByZXR1cm4gdGFyZ2V0ID09IG51bGwgPyBzaW5nbGV0b25EZWNvcmF0b3IgOiBzaW5nbGV0b25EZWNvcmF0b3IodGFyZ2V0KTtcbn1cbmV4cG9ydCBjb25zdCBhbGwgPSBjcmVhdGVSZXNvbHZlcigoa2V5LCBoYW5kbGVyLCByZXF1ZXN0b3IpID0+IHJlcXVlc3Rvci5nZXRBbGwoa2V5KSk7XG5leHBvcnQgY29uc3QgbGF6eSA9IGNyZWF0ZVJlc29sdmVyKChrZXksIGhhbmRsZXIsIHJlcXVlc3RvcikgPT4ge1xuICAgIGxldCBpbnN0YW5jZSA9IG51bGw7IC8vIGNhY2hlIGxvY2FsbHkgc28gdGhhdCBsYXp5IGFsd2F5cyByZXR1cm5zIHRoZSBzYW1lIGluc3RhbmNlIG9uY2UgcmVzb2x2ZWRcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICBpZiAoaW5zdGFuY2UgPT0gbnVsbCkge1xuICAgICAgICAgICAgaW5zdGFuY2UgPSByZXF1ZXN0b3IuZ2V0KGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGluc3RhbmNlO1xuICAgIH07XG59KTtcbmV4cG9ydCBjb25zdCBvcHRpb25hbCA9IGNyZWF0ZVJlc29sdmVyKChrZXksIGhhbmRsZXIsIHJlcXVlc3RvcikgPT4ge1xuICAgIGlmIChyZXF1ZXN0b3IuaGFzKGtleSwgdHJ1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHJlcXVlc3Rvci5nZXQoa2V5KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn0pO1xuZXhwb3J0IGNvbnN0IG5ld0luc3RhbmNlRm9yU2NvcGUgPSBjcmVhdGVSZXNvbHZlcigoa2V5LCBoYW5kbGVyLCByZXF1ZXN0b3IpID0+IHtcbiAgICBjb25zdCBpbnN0YW5jZSA9IGNyZWF0ZU5ld0luc3RhbmNlKGtleSwgaGFuZGxlcik7XG4gICAgY29uc3QgaW5zdGFuY2VQcm92aWRlciA9IG5ldyBJbnN0YW5jZVByb3ZpZGVyKCk7XG4gICAgaW5zdGFuY2VQcm92aWRlci5wcmVwYXJlKGluc3RhbmNlKTtcbiAgICByZXF1ZXN0b3IucmVnaXN0ZXJSZXNvbHZlcihrZXksIGluc3RhbmNlUHJvdmlkZXIsIHRydWUpO1xuICAgIHJldHVybiBpbnN0YW5jZTtcbn0pO1xuZXhwb3J0IGNvbnN0IG5ld0luc3RhbmNlT2YgPSBjcmVhdGVSZXNvbHZlcigoa2V5LCBoYW5kbGVyLCBfcmVxdWVzdG9yKSA9PiBjcmVhdGVOZXdJbnN0YW5jZShrZXksIGhhbmRsZXIpKTtcbmZ1bmN0aW9uIGNyZWF0ZU5ld0luc3RhbmNlKGtleSwgaGFuZGxlcikge1xuICAgIGNvbnN0IGZhY3RvcnkgPSBoYW5kbGVyLmdldEZhY3Rvcnkoa2V5KTtcbiAgICBpZiAoZmFjdG9yeSA9PT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE5vIGZhY3RvcnkgcmVnaXN0ZXJlZCBmb3IgJHtrZXl9YCk7XG4gICAgfVxuICAgIHJldHVybiBmYWN0b3J5LmNvbnN0cnVjdChoYW5kbGVyKTtcbn1cbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCB2YXIgUmVzb2x2ZXJTdHJhdGVneTtcbihmdW5jdGlvbiAoUmVzb2x2ZXJTdHJhdGVneSkge1xuICAgIFJlc29sdmVyU3RyYXRlZ3lbUmVzb2x2ZXJTdHJhdGVneVtcImluc3RhbmNlXCJdID0gMF0gPSBcImluc3RhbmNlXCI7XG4gICAgUmVzb2x2ZXJTdHJhdGVneVtSZXNvbHZlclN0cmF0ZWd5W1wic2luZ2xldG9uXCJdID0gMV0gPSBcInNpbmdsZXRvblwiO1xuICAgIFJlc29sdmVyU3RyYXRlZ3lbUmVzb2x2ZXJTdHJhdGVneVtcInRyYW5zaWVudFwiXSA9IDJdID0gXCJ0cmFuc2llbnRcIjtcbiAgICBSZXNvbHZlclN0cmF0ZWd5W1Jlc29sdmVyU3RyYXRlZ3lbXCJjYWxsYmFja1wiXSA9IDNdID0gXCJjYWxsYmFja1wiO1xuICAgIFJlc29sdmVyU3RyYXRlZ3lbUmVzb2x2ZXJTdHJhdGVneVtcImFycmF5XCJdID0gNF0gPSBcImFycmF5XCI7XG4gICAgUmVzb2x2ZXJTdHJhdGVneVtSZXNvbHZlclN0cmF0ZWd5W1wiYWxpYXNcIl0gPSA1XSA9IFwiYWxpYXNcIjtcbn0pKFJlc29sdmVyU3RyYXRlZ3kgfHwgKFJlc29sdmVyU3RyYXRlZ3kgPSB7fSkpO1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IGNsYXNzIFJlc29sdmVyIHtcbiAgICBjb25zdHJ1Y3RvcihrZXksIHN0cmF0ZWd5LCBzdGF0ZSkge1xuICAgICAgICB0aGlzLmtleSA9IGtleTtcbiAgICAgICAgdGhpcy5zdHJhdGVneSA9IHN0cmF0ZWd5O1xuICAgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgfVxuICAgIHJlZ2lzdGVyKGNvbnRhaW5lciwga2V5KSB7XG4gICAgICAgIHJldHVybiBjb250YWluZXIucmVnaXN0ZXJSZXNvbHZlcihrZXkgfHwgdGhpcy5rZXksIHRoaXMpO1xuICAgIH1cbiAgICByZXNvbHZlKGhhbmRsZXIsIHJlcXVlc3Rvcikge1xuICAgICAgICBzd2l0Y2ggKHRoaXMuc3RyYXRlZ3kpIHtcbiAgICAgICAgICAgIGNhc2UgMCAvKiBpbnN0YW5jZSAqLzpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZTtcbiAgICAgICAgICAgIGNhc2UgMSAvKiBzaW5nbGV0b24gKi86IHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0cmF0ZWd5ID0gMCAvKiBpbnN0YW5jZSAqLztcbiAgICAgICAgICAgICAgICBjb25zdCBmYWN0b3J5ID0gaGFuZGxlci5nZXRGYWN0b3J5KHRoaXMuc3RhdGUpO1xuICAgICAgICAgICAgICAgIGlmIChmYWN0b3J5ID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgUmVzb2x2ZXIgZm9yICR7U3RyaW5nKHRoaXMua2V5KX0gcmV0dXJuZWQgYSBudWxsIGZhY3RvcnlgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUgPSBmYWN0b3J5LmNvbnN0cnVjdChyZXF1ZXN0b3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSAyIC8qIHRyYW5zaWVudCAqLzoge1xuICAgICAgICAgICAgICAgIC8vIEFsd2F5cyBjcmVhdGUgdHJhbnNpZW50cyBmcm9tIHRoZSByZXF1ZXN0aW5nIGNvbnRhaW5lclxuICAgICAgICAgICAgICAgIGNvbnN0IGZhY3RvcnkgPSBoYW5kbGVyLmdldEZhY3RvcnkodGhpcy5zdGF0ZSk7XG4gICAgICAgICAgICAgICAgaWYgKGZhY3RvcnkgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBSZXNvbHZlciBmb3IgJHtTdHJpbmcodGhpcy5rZXkpfSByZXR1cm5lZCBhIG51bGwgZmFjdG9yeWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZmFjdG9yeS5jb25zdHJ1Y3QocmVxdWVzdG9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgMyAvKiBjYWxsYmFjayAqLzpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZShoYW5kbGVyLCByZXF1ZXN0b3IsIHRoaXMpO1xuICAgICAgICAgICAgY2FzZSA0IC8qIGFycmF5ICovOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXRlWzBdLnJlc29sdmUoaGFuZGxlciwgcmVxdWVzdG9yKTtcbiAgICAgICAgICAgIGNhc2UgNSAvKiBhbGlhcyAqLzpcbiAgICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlci5nZXQodGhpcy5zdGF0ZSk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRocm93IFJlcG9ydGVyLmVycm9yKDYsIHRoaXMuc3RyYXRlZ3kpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldEZhY3RvcnkoY29udGFpbmVyKSB7XG4gICAgICAgIGxldCByZXNvbHZlcjtcbiAgICAgICAgc3dpdGNoICh0aGlzLnN0cmF0ZWd5KSB7XG4gICAgICAgICAgICBjYXNlIDEgLyogc2luZ2xldG9uICovOlxuICAgICAgICAgICAgY2FzZSAyIC8qIHRyYW5zaWVudCAqLzpcbiAgICAgICAgICAgICAgICByZXR1cm4gY29udGFpbmVyLmdldEZhY3RvcnkodGhpcy5zdGF0ZSk7XG4gICAgICAgICAgICBjYXNlIDUgLyogYWxpYXMgKi86XG4gICAgICAgICAgICAgICAgcmVzb2x2ZXIgPSBjb250YWluZXIuZ2V0UmVzb2x2ZXIodGhpcy5zdGF0ZSk7XG4gICAgICAgICAgICAgICAgaWYgKHJlc29sdmVyID09IG51bGwgfHwgcmVzb2x2ZXIuZ2V0RmFjdG9yeSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZXIuZ2V0RmFjdG9yeShjb250YWluZXIpO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCBjbGFzcyBGYWN0b3J5IHtcbiAgICBjb25zdHJ1Y3RvcihUeXBlLCBpbnZva2VyLCBkZXBlbmRlbmNpZXMpIHtcbiAgICAgICAgdGhpcy5UeXBlID0gVHlwZTtcbiAgICAgICAgdGhpcy5pbnZva2VyID0gaW52b2tlcjtcbiAgICAgICAgdGhpcy5kZXBlbmRlbmNpZXMgPSBkZXBlbmRlbmNpZXM7XG4gICAgICAgIHRoaXMudHJhbnNmb3JtZXJzID0gbnVsbDtcbiAgICB9XG4gICAgY29uc3RydWN0KGNvbnRhaW5lciwgZHluYW1pY0RlcGVuZGVuY2llcykge1xuICAgICAgICBjb25zdCB0cmFuc2Zvcm1lcnMgPSB0aGlzLnRyYW5zZm9ybWVycztcbiAgICAgICAgbGV0IGluc3RhbmNlID0gZHluYW1pY0RlcGVuZGVuY2llcyAhPT0gdm9pZCAwXG4gICAgICAgICAgICA/IHRoaXMuaW52b2tlci5pbnZva2VXaXRoRHluYW1pY0RlcGVuZGVuY2llcyhjb250YWluZXIsIHRoaXMuVHlwZSwgdGhpcy5kZXBlbmRlbmNpZXMsIGR5bmFtaWNEZXBlbmRlbmNpZXMpXG4gICAgICAgICAgICA6IHRoaXMuaW52b2tlci5pbnZva2UoY29udGFpbmVyLCB0aGlzLlR5cGUsIHRoaXMuZGVwZW5kZW5jaWVzKTtcbiAgICAgICAgaWYgKHRyYW5zZm9ybWVycyA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gaW5zdGFuY2U7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGlpID0gdHJhbnNmb3JtZXJzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIGluc3RhbmNlID0gdHJhbnNmb3JtZXJzW2ldKGluc3RhbmNlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5zdGFuY2U7XG4gICAgfVxuICAgIHJlZ2lzdGVyVHJhbnNmb3JtZXIodHJhbnNmb3JtZXIpIHtcbiAgICAgICAgaWYgKHRoaXMudHJhbnNmb3JtZXJzID09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtZXJzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50cmFuc2Zvcm1lcnMucHVzaCh0cmFuc2Zvcm1lcik7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbn1cbmNvbnN0IGNyZWF0ZUZhY3RvcnkgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIGludm9rZVdpdGhEeW5hbWljRGVwZW5kZW5jaWVzKGNvbnRhaW5lciwgVHlwZSwgc3RhdGljRGVwZW5kZW5jaWVzLCBkeW5hbWljRGVwZW5kZW5jaWVzKSB7XG4gICAgICAgIGxldCBpID0gc3RhdGljRGVwZW5kZW5jaWVzLmxlbmd0aDtcbiAgICAgICAgbGV0IGFyZ3MgPSBuZXcgQXJyYXkoaSk7XG4gICAgICAgIGxldCBsb29rdXA7XG4gICAgICAgIHdoaWxlIChpLS0gPiAwKSB7XG4gICAgICAgICAgICBsb29rdXAgPSBzdGF0aWNEZXBlbmRlbmNpZXNbaV07XG4gICAgICAgICAgICBpZiAobG9va3VwID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBSZXBvcnRlci5lcnJvcig3LCBgSW5kZXggJHtpfS5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGFyZ3NbaV0gPSBjb250YWluZXIuZ2V0KGxvb2t1cCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGR5bmFtaWNEZXBlbmRlbmNpZXMgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgYXJncyA9IGFyZ3MuY29uY2F0KGR5bmFtaWNEZXBlbmRlbmNpZXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBSZWZsZWN0LmNvbnN0cnVjdChUeXBlLCBhcmdzKTtcbiAgICB9XG4gICAgY29uc3QgY2xhc3NJbnZva2VycyA9IFtcbiAgICAgICAge1xuICAgICAgICAgICAgaW52b2tlKGNvbnRhaW5lciwgVHlwZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVHlwZSgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGludm9rZVdpdGhEeW5hbWljRGVwZW5kZW5jaWVzXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIGludm9rZShjb250YWluZXIsIFR5cGUsIGRlcHMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFR5cGUoY29udGFpbmVyLmdldChkZXBzWzBdKSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaW52b2tlV2l0aER5bmFtaWNEZXBlbmRlbmNpZXNcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgaW52b2tlKGNvbnRhaW5lciwgVHlwZSwgZGVwcykge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVHlwZShjb250YWluZXIuZ2V0KGRlcHNbMF0pLCBjb250YWluZXIuZ2V0KGRlcHNbMV0pKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpbnZva2VXaXRoRHluYW1pY0RlcGVuZGVuY2llc1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBpbnZva2UoY29udGFpbmVyLCBUeXBlLCBkZXBzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBUeXBlKGNvbnRhaW5lci5nZXQoZGVwc1swXSksIGNvbnRhaW5lci5nZXQoZGVwc1sxXSksIGNvbnRhaW5lci5nZXQoZGVwc1syXSkpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGludm9rZVdpdGhEeW5hbWljRGVwZW5kZW5jaWVzXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIGludm9rZShjb250YWluZXIsIFR5cGUsIGRlcHMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFR5cGUoY29udGFpbmVyLmdldChkZXBzWzBdKSwgY29udGFpbmVyLmdldChkZXBzWzFdKSwgY29udGFpbmVyLmdldChkZXBzWzJdKSwgY29udGFpbmVyLmdldChkZXBzWzNdKSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaW52b2tlV2l0aER5bmFtaWNEZXBlbmRlbmNpZXNcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgaW52b2tlKGNvbnRhaW5lciwgVHlwZSwgZGVwcykge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVHlwZShjb250YWluZXIuZ2V0KGRlcHNbMF0pLCBjb250YWluZXIuZ2V0KGRlcHNbMV0pLCBjb250YWluZXIuZ2V0KGRlcHNbMl0pLCBjb250YWluZXIuZ2V0KGRlcHNbM10pLCBjb250YWluZXIuZ2V0KGRlcHNbNF0pKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpbnZva2VXaXRoRHluYW1pY0RlcGVuZGVuY2llc1xuICAgICAgICB9XG4gICAgXTtcbiAgICBjb25zdCBmYWxsYmFja0ludm9rZXIgPSB7XG4gICAgICAgIGludm9rZTogaW52b2tlV2l0aER5bmFtaWNEZXBlbmRlbmNpZXMsXG4gICAgICAgIGludm9rZVdpdGhEeW5hbWljRGVwZW5kZW5jaWVzXG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKFR5cGUpIHtcbiAgICAgICAgaWYgKGlzTmF0aXZlRnVuY3Rpb24oVHlwZSkpIHtcbiAgICAgICAgICAgIFJlcG9ydGVyLndyaXRlKDUsIFR5cGUubmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGVwZW5kZW5jaWVzID0gREkuZ2V0RGVwZW5kZW5jaWVzKFR5cGUpO1xuICAgICAgICBjb25zdCBpbnZva2VyID0gY2xhc3NJbnZva2Vycy5sZW5ndGggPiBkZXBlbmRlbmNpZXMubGVuZ3RoID8gY2xhc3NJbnZva2Vyc1tkZXBlbmRlbmNpZXMubGVuZ3RoXSA6IGZhbGxiYWNrSW52b2tlcjtcbiAgICAgICAgcmV0dXJuIG5ldyBGYWN0b3J5KFR5cGUsIGludm9rZXIsIGRlcGVuZGVuY2llcyk7XG4gICAgfTtcbn0pKCk7XG5jb25zdCBjb250YWluZXJSZXNvbHZlciA9IHtcbiAgICByZXNvbHZlKGhhbmRsZXIsIHJlcXVlc3Rvcikge1xuICAgICAgICByZXR1cm4gcmVxdWVzdG9yO1xuICAgIH1cbn07XG5mdW5jdGlvbiBpc1JlZ2lzdHJ5KG9iaikge1xuICAgIHJldHVybiB0eXBlb2Ygb2JqLnJlZ2lzdGVyID09PSAnZnVuY3Rpb24nO1xufVxuZnVuY3Rpb24gaXNDbGFzcyhvYmopIHtcbiAgICByZXR1cm4gb2JqLnByb3RvdHlwZSAhPT0gdm9pZCAwO1xufVxuZnVuY3Rpb24gaXNSZXNvdXJjZUtleShrZXkpIHtcbiAgICByZXR1cm4gdHlwZW9mIGtleSA9PT0gJ3N0cmluZycgJiYga2V5LmluZGV4T2YoJzonKSA+IDA7XG59XG4vKiogQGludGVybmFsICovXG5leHBvcnQgY2xhc3MgQ29udGFpbmVyIHtcbiAgICBjb25zdHJ1Y3RvcihwYXJlbnQpIHtcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIHRoaXMucmVnaXN0ZXJEZXB0aCA9IDA7XG4gICAgICAgIHRoaXMuZGlzcG9zYWJsZVJlc29sdmVycyA9IG5ldyBTZXQoKTtcbiAgICAgICAgaWYgKHBhcmVudCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5yb290ID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZXJzID0gbmV3IE1hcCgpO1xuICAgICAgICAgICAgdGhpcy5yZXNvdXJjZVJlc29sdmVycyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnJvb3QgPSBwYXJlbnQucm9vdDtcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZXJzID0gbmV3IE1hcCgpO1xuICAgICAgICAgICAgdGhpcy5yZXNvdXJjZVJlc29sdmVycyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShudWxsKSwgdGhpcy5yb290LnJlc291cmNlUmVzb2x2ZXJzKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlc29sdmVycy5zZXQoSUNvbnRhaW5lciwgY29udGFpbmVyUmVzb2x2ZXIpO1xuICAgIH1cbiAgICByZWdpc3RlciguLi5wYXJhbXMpIHtcbiAgICAgICAgaWYgKCsrdGhpcy5yZWdpc3RlckRlcHRoID09PSAxMDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5hYmxlIHRvIGF1dG9yZWdpc3RlciBkZXBlbmRlbmN5Jyk7XG4gICAgICAgICAgICAvLyBUT0RPOiBjaGFuZ2UgdG8gcmVwb3J0ZXIuZXJyb3IgYW5kIGFkZCB2YXJpb3VzIHBvc3NpYmxlIGNhdXNlcyBpbiBkZXNjcmlwdGlvbi5cbiAgICAgICAgICAgIC8vIE1vc3QgbGlrZWx5IGNhdXNlIGlzIHRyeWluZyB0byByZWdpc3RlciBhIHBsYWluIG9iamVjdCB0aGF0IGRvZXMgbm90IGhhdmUgYVxuICAgICAgICAgICAgLy8gcmVnaXN0ZXIgbWV0aG9kIGFuZCBpcyBub3QgYSBjbGFzcyBjb25zdHJ1Y3RvclxuICAgICAgICB9XG4gICAgICAgIGxldCBjdXJyZW50O1xuICAgICAgICBsZXQga2V5cztcbiAgICAgICAgbGV0IHZhbHVlO1xuICAgICAgICBsZXQgajtcbiAgICAgICAgbGV0IGpqO1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBwYXJhbXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgY3VycmVudCA9IHBhcmFtc1tpXTtcbiAgICAgICAgICAgIGlmICghaXNPYmplY3QoY3VycmVudCkpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpc1JlZ2lzdHJ5KGN1cnJlbnQpKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudC5yZWdpc3Rlcih0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKFByb3RvY29sLnJlc291cmNlLmhhcyhjdXJyZW50KSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlZnMgPSBQcm90b2NvbC5yZXNvdXJjZS5nZXRBbGwoY3VycmVudCk7XG4gICAgICAgICAgICAgICAgaWYgKGRlZnMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEZhc3QgcGF0aCBmb3IgdGhlIHZlcnkgY29tbW9uIGNhc2VcbiAgICAgICAgICAgICAgICAgICAgZGVmc1swXS5yZWdpc3Rlcih0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxlbiA9IGRlZnMubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBkID0gMDsgZCA8IGxlbjsgKytkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZzW2RdLnJlZ2lzdGVyKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaXNDbGFzcyhjdXJyZW50KSkge1xuICAgICAgICAgICAgICAgIFJlZ2lzdHJhdGlvbi5zaW5nbGV0b24oY3VycmVudCwgY3VycmVudCkucmVnaXN0ZXIodGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBrZXlzID0gT2JqZWN0LmtleXMoY3VycmVudCk7XG4gICAgICAgICAgICAgICAgaiA9IDA7XG4gICAgICAgICAgICAgICAgamogPSBrZXlzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBmb3IgKDsgaiA8IGpqOyArK2opIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBjdXJyZW50W2tleXNbal1dO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzT2JqZWN0KHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gbm90ZTogd2UgY291bGQgcmVtb3ZlIHRoaXMgaWYtYnJhbmNoIGFuZCBjYWxsIHRoaXMucmVnaXN0ZXIgZGlyZWN0bHlcbiAgICAgICAgICAgICAgICAgICAgLy8gLSB0aGUgZXh0cmEgY2hlY2sgaXMganVzdCBhIHBlcmYgdHdlYWsgdG8gY3JlYXRlIGZld2VyIHVubmVjZXNzYXJ5IGFycmF5cyBieSB0aGUgc3ByZWFkIG9wZXJhdG9yXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc1JlZ2lzdHJ5KHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUucmVnaXN0ZXIodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZ2lzdGVyKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAtLXRoaXMucmVnaXN0ZXJEZXB0aDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHJlZ2lzdGVyUmVzb2x2ZXIoa2V5LCByZXNvbHZlciwgaXNEaXNwb3NhYmxlID0gZmFsc2UpIHtcbiAgICAgICAgdmFsaWRhdGVLZXkoa2V5KTtcbiAgICAgICAgY29uc3QgcmVzb2x2ZXJzID0gdGhpcy5yZXNvbHZlcnM7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHJlc29sdmVycy5nZXQoa2V5KTtcbiAgICAgICAgaWYgKHJlc3VsdCA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXNvbHZlcnMuc2V0KGtleSwgcmVzb2x2ZXIpO1xuICAgICAgICAgICAgaWYgKGlzUmVzb3VyY2VLZXkoa2V5KSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVzb3VyY2VSZXNvbHZlcnNba2V5XSA9IHJlc29sdmVyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFJlc29sdmVyICYmIHJlc3VsdC5zdHJhdGVneSA9PT0gNCAvKiBhcnJheSAqLykge1xuICAgICAgICAgICAgcmVzdWx0LnN0YXRlLnB1c2gocmVzb2x2ZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVzb2x2ZXJzLnNldChrZXksIG5ldyBSZXNvbHZlcihrZXksIDQgLyogYXJyYXkgKi8sIFtyZXN1bHQsIHJlc29sdmVyXSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0Rpc3Bvc2FibGUpIHtcbiAgICAgICAgICAgIHRoaXMuZGlzcG9zYWJsZVJlc29sdmVycy5hZGQocmVzb2x2ZXIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXNvbHZlcjtcbiAgICB9XG4gICAgcmVnaXN0ZXJUcmFuc2Zvcm1lcihrZXksIHRyYW5zZm9ybWVyKSB7XG4gICAgICAgIGNvbnN0IHJlc29sdmVyID0gdGhpcy5nZXRSZXNvbHZlcihrZXkpO1xuICAgICAgICBpZiAocmVzb2x2ZXIgPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXNvbHZlci5nZXRGYWN0b3J5KSB7XG4gICAgICAgICAgICBjb25zdCBmYWN0b3J5ID0gcmVzb2x2ZXIuZ2V0RmFjdG9yeSh0aGlzKTtcbiAgICAgICAgICAgIGlmIChmYWN0b3J5ID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBUaGlzIHR5cGUgY2FzdCBpcyBhIGJpdCBvZiBhIGhhY2t5IG9uZSwgbmVjZXNzYXJ5IGR1ZSB0byB0aGUgZHVwbGljaXR5IG9mIElSZXNvbHZlckxpa2UuXG4gICAgICAgICAgICAvLyBQcm9ibGVtIGlzIHRoYXQgdGhhdCBpbnRlcmZhY2UncyB0eXBlIGFyZyBjYW4gYmUgb2YgdHlwZSBLZXksIGJ1dCB0aGUgZ2V0RmFjdG9yeSBtZXRob2Qgb25seSB3b3JrcyBvblxuICAgICAgICAgICAgLy8gdHlwZSBDb25zdHJ1Y3RhYmxlLiBTbyB0aGUgcmV0dXJuIHR5cGUgb2YgdGhhdCBvcHRpb25hbCBtZXRob2QgaGFzIHRoaXMgYWRkaXRpb25hbCBjb25zdHJhaW50LCB3aGljaFxuICAgICAgICAgICAgLy8gc2VlbXMgdG8gY29uZnVzZSB0aGUgdHlwZSBjaGVja2VyLlxuICAgICAgICAgICAgcmV0dXJuIGZhY3RvcnkucmVnaXN0ZXJUcmFuc2Zvcm1lcih0cmFuc2Zvcm1lcik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBnZXRSZXNvbHZlcihrZXksIGF1dG9SZWdpc3RlciA9IHRydWUpIHtcbiAgICAgICAgdmFsaWRhdGVLZXkoa2V5KTtcbiAgICAgICAgaWYgKGtleS5yZXNvbHZlICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgIHJldHVybiBrZXk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGN1cnJlbnQgPSB0aGlzO1xuICAgICAgICBsZXQgcmVzb2x2ZXI7XG4gICAgICAgIHdoaWxlIChjdXJyZW50ICE9IG51bGwpIHtcbiAgICAgICAgICAgIHJlc29sdmVyID0gY3VycmVudC5yZXNvbHZlcnMuZ2V0KGtleSk7XG4gICAgICAgICAgICBpZiAocmVzb2x2ZXIgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50LnBhcmVudCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhdXRvUmVnaXN0ZXIgPyB0aGlzLmppdFJlZ2lzdGVyKGtleSwgY3VycmVudCkgOiBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudC5wYXJlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGhhcyhrZXksIHNlYXJjaEFuY2VzdG9ycyA9IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlc29sdmVycy5oYXMoa2V5KVxuICAgICAgICAgICAgPyB0cnVlXG4gICAgICAgICAgICA6IHNlYXJjaEFuY2VzdG9ycyAmJiB0aGlzLnBhcmVudCAhPSBudWxsXG4gICAgICAgICAgICAgICAgPyB0aGlzLnBhcmVudC5oYXMoa2V5LCB0cnVlKVxuICAgICAgICAgICAgICAgIDogZmFsc2U7XG4gICAgfVxuICAgIGdldChrZXkpIHtcbiAgICAgICAgdmFsaWRhdGVLZXkoa2V5KTtcbiAgICAgICAgaWYgKGtleS5yZXNvbHZlICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgIHJldHVybiBrZXkucmVzb2x2ZSh0aGlzLCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY3VycmVudCA9IHRoaXM7XG4gICAgICAgIGxldCByZXNvbHZlcjtcbiAgICAgICAgd2hpbGUgKGN1cnJlbnQgIT0gbnVsbCkge1xuICAgICAgICAgICAgcmVzb2x2ZXIgPSBjdXJyZW50LnJlc29sdmVycy5nZXQoa2V5KTtcbiAgICAgICAgICAgIGlmIChyZXNvbHZlciA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnQucGFyZW50ID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZXIgPSB0aGlzLmppdFJlZ2lzdGVyKGtleSwgY3VycmVudCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlci5yZXNvbHZlKGN1cnJlbnQsIHRoaXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudC5wYXJlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZXIucmVzb2x2ZShjdXJyZW50LCB0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuYWJsZSB0byByZXNvbHZlIGtleTogJHtrZXl9YCk7XG4gICAgfVxuICAgIGdldEFsbChrZXkpIHtcbiAgICAgICAgdmFsaWRhdGVLZXkoa2V5KTtcbiAgICAgICAgbGV0IGN1cnJlbnQgPSB0aGlzO1xuICAgICAgICBsZXQgcmVzb2x2ZXI7XG4gICAgICAgIHdoaWxlIChjdXJyZW50ICE9IG51bGwpIHtcbiAgICAgICAgICAgIHJlc29sdmVyID0gY3VycmVudC5yZXNvbHZlcnMuZ2V0KGtleSk7XG4gICAgICAgICAgICBpZiAocmVzb2x2ZXIgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQTEFURk9STS5lbXB0eUFycmF5O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudC5wYXJlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYnVpbGRBbGxSZXNwb25zZShyZXNvbHZlciwgY3VycmVudCwgdGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFBMQVRGT1JNLmVtcHR5QXJyYXk7XG4gICAgfVxuICAgIGdldEZhY3RvcnkoVHlwZSkge1xuICAgICAgICBjb25zdCBrZXkgPSBQcm90b2NvbC5hbm5vdGF0aW9uLmtleUZvcignZGk6ZmFjdG9yeScpO1xuICAgICAgICBsZXQgZmFjdG9yeSA9IE1ldGFkYXRhLmdldE93bihrZXksIFR5cGUpO1xuICAgICAgICBpZiAoZmFjdG9yeSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBNZXRhZGF0YS5kZWZpbmUoa2V5LCBmYWN0b3J5ID0gY3JlYXRlRmFjdG9yeShUeXBlKSwgVHlwZSk7XG4gICAgICAgICAgICBQcm90b2NvbC5hbm5vdGF0aW9uLmFwcGVuZFRvKFR5cGUsIGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhY3Rvcnk7XG4gICAgfVxuICAgIGNyZWF0ZUNoaWxkKCkge1xuICAgICAgICByZXR1cm4gbmV3IENvbnRhaW5lcih0aGlzKTtcbiAgICB9XG4gICAgZGlzcG9zZVJlc29sdmVycygpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBjb25zdCBkaXNwb3NhYmxlcyA9IEFycmF5LmZyb20odGhpcy5kaXNwb3NhYmxlUmVzb2x2ZXJzKTtcbiAgICAgICAgd2hpbGUgKGRpc3Bvc2FibGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIChfYSA9IGRpc3Bvc2FibGVzLnBvcCgpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZGlzcG9zZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGppdFJlZ2lzdGVyKGtleUFzVmFsdWUsIGhhbmRsZXIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBrZXlBc1ZhbHVlICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEF0dGVtcHRlZCB0byBqaXRSZWdpc3RlciBzb21ldGhpbmcgdGhhdCBpcyBub3QgYSBjb25zdHJ1Y3RvcjogJyR7a2V5QXNWYWx1ZX0nLiBEaWQgeW91IGZvcmdldCB0byByZWdpc3RlciB0aGlzIHJlc291cmNlP2ApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc1JlZ2lzdHJ5KGtleUFzVmFsdWUpKSB7XG4gICAgICAgICAgICBjb25zdCByZWdpc3RyYXRpb25SZXNvbHZlciA9IGtleUFzVmFsdWUucmVnaXN0ZXIoaGFuZGxlciwga2V5QXNWYWx1ZSk7XG4gICAgICAgICAgICBpZiAoIShyZWdpc3RyYXRpb25SZXNvbHZlciBpbnN0YW5jZW9mIE9iamVjdCkgfHwgcmVnaXN0cmF0aW9uUmVzb2x2ZXIucmVzb2x2ZSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3UmVzb2x2ZXIgPSBoYW5kbGVyLnJlc29sdmVycy5nZXQoa2V5QXNWYWx1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKG5ld1Jlc29sdmVyICE9IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3UmVzb2x2ZXI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRocm93IFJlcG9ydGVyLmVycm9yKDQwKTsgLy8gZGlkIG5vdCByZXR1cm4gYSB2YWxpZCByZXNvbHZlciBmcm9tIHRoZSBzdGF0aWMgcmVnaXN0ZXIgbWV0aG9kXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVnaXN0cmF0aW9uUmVzb2x2ZXI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoUHJvdG9jb2wucmVzb3VyY2UuaGFzKGtleUFzVmFsdWUpKSB7XG4gICAgICAgICAgICBjb25zdCBkZWZzID0gUHJvdG9jb2wucmVzb3VyY2UuZ2V0QWxsKGtleUFzVmFsdWUpO1xuICAgICAgICAgICAgaWYgKGRlZnMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgLy8gRmFzdCBwYXRoIGZvciB0aGUgdmVyeSBjb21tb24gY2FzZVxuICAgICAgICAgICAgICAgIGRlZnNbMF0ucmVnaXN0ZXIoaGFuZGxlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsZW4gPSBkZWZzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBkID0gMDsgZCA8IGxlbjsgKytkKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlZnNbZF0ucmVnaXN0ZXIoaGFuZGxlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbmV3UmVzb2x2ZXIgPSBoYW5kbGVyLnJlc29sdmVycy5nZXQoa2V5QXNWYWx1ZSk7XG4gICAgICAgICAgICBpZiAobmV3UmVzb2x2ZXIgIT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ld1Jlc29sdmVyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgUmVwb3J0ZXIuZXJyb3IoNDApOyAvLyBkaWQgbm90IHJldHVybiBhIHZhbGlkIHJlc29sdmVyIGZyb20gdGhlIHN0YXRpYyByZWdpc3RlciBtZXRob2RcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc29sdmVyID0gbmV3IFJlc29sdmVyKGtleUFzVmFsdWUsIDEgLyogc2luZ2xldG9uICovLCBrZXlBc1ZhbHVlKTtcbiAgICAgICAgICAgIGhhbmRsZXIucmVzb2x2ZXJzLnNldChrZXlBc1ZhbHVlLCByZXNvbHZlcik7XG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2ZXI7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIEFuIGltcGxlbWVudGF0aW9uIG9mIElSZWdpc3RyeSB0aGF0IGRlbGVnYXRlcyByZWdpc3RyYXRpb24gdG8gYVxuICogc2VwYXJhdGVseSByZWdpc3RlcmVkIGNsYXNzLiBUaGUgUGFyYW1ldGVyaXplZFJlZ2lzdHJ5IGZhY2lsaXRhdGVzIHRoZVxuICogcGFzc2luZyBvZiBwYXJhbWV0ZXJzIHRvIHRoZSBmaW5hbCByZWdpc3RyeS5cbiAqL1xuZXhwb3J0IGNsYXNzIFBhcmFtZXRlcml6ZWRSZWdpc3RyeSB7XG4gICAgY29uc3RydWN0b3Ioa2V5LCBwYXJhbXMpIHtcbiAgICAgICAgdGhpcy5rZXkgPSBrZXk7XG4gICAgICAgIHRoaXMucGFyYW1zID0gcGFyYW1zO1xuICAgIH1cbiAgICByZWdpc3Rlcihjb250YWluZXIpIHtcbiAgICAgICAgaWYgKGNvbnRhaW5lci5oYXModGhpcy5rZXksIHRydWUpKSB7XG4gICAgICAgICAgICBjb25zdCByZWdpc3RyeSA9IGNvbnRhaW5lci5nZXQodGhpcy5rZXkpO1xuICAgICAgICAgICAgcmVnaXN0cnkucmVnaXN0ZXIoY29udGFpbmVyLCAuLi50aGlzLnBhcmFtcyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb250YWluZXIucmVnaXN0ZXIoLi4udGhpcy5wYXJhbXMuZmlsdGVyKHggPT4gdHlwZW9mIHggPT09ICdvYmplY3QnKSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5jb25zdCBjYWNoZSA9IG5ldyBXZWFrTWFwKCk7XG5mdW5jdGlvbiBjYWNoZUNhbGxiYWNrUmVzdWx0KGZ1bikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoaGFuZGxlciwgcmVxdWVzdG9yLCByZXNvbHZlcikge1xuICAgICAgICBpZiAoY2FjaGUuaGFzKHJlc29sdmVyKSkge1xuICAgICAgICAgICAgcmV0dXJuIGNhY2hlLmdldChyZXNvbHZlcik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdCA9IGZ1bihoYW5kbGVyLCByZXF1ZXN0b3IsIHJlc29sdmVyKTtcbiAgICAgICAgY2FjaGUuc2V0KHJlc29sdmVyLCB0KTtcbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfTtcbn1cbi8qKlxuICogeW91IGNhbiB1c2UgdGhlIHJlc3VsdGluZyB7QGxpbmtjb2RlIElSZWdpc3RyYXRpb259IG9mIGFueSBvZiB0aGUgZmFjdG9yeSBtZXRob2RzXG4gKiB0byByZWdpc3RlciB3aXRoIHRoZSBjb250YWluZXIsIGUuZy5cbiAqIGBgYFxuICogY2xhc3MgRm9vIHt9XG4gKiBjb25zdCBjb250YWluZXIgPSBESS5jcmVhdGVDb250YWluZXIoKTtcbiAqIGNvbnRhaW5lci5yZWdpc3RlcihSZWdpc3RyYXRpb24uaW5zdGFuY2UoRm9vLCBuZXcgRm9vKCkpKTtcbiAqIGNvbnRhaW5lci5nZXQoRm9vKTtcbiAqIGBgYFxuICovXG5leHBvcnQgY29uc3QgUmVnaXN0cmF0aW9uID0ge1xuICAgIC8qKlxuICAgICAqIGFsbG93cyB5b3UgdG8gcGFzcyBhbiBpbnN0YW5jZS5cbiAgICAgKiBFdmVyeSB0aW1lIHlvdSByZXF1ZXN0IHRoaXMge0BsaW5rY29kZSBLZXl9IHlvdSB3aWxsIGdldCB0aGlzIGluc3RhbmNlIGJhY2suXG4gICAgICogYGBgXG4gICAgICogUmVnaXN0cmF0aW9uLmluc3RhbmNlKEZvbywgbmV3IEZvbygpKSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0ga2V5XG4gICAgICogQHBhcmFtIHZhbHVlXG4gICAgICovXG4gICAgaW5zdGFuY2Uoa2V5LCB2YWx1ZSkge1xuICAgICAgICByZXR1cm4gbmV3IFJlc29sdmVyKGtleSwgMCAvKiBpbnN0YW5jZSAqLywgdmFsdWUpO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBmcm9tIHRoZSBjbGFzcy5cbiAgICAgKiBFdmVyeSB0aW1lIHlvdSByZXF1ZXN0IHRoaXMge0BsaW5rY29kZSBLZXl9IHlvdSB3aWxsIGdldCB0aGUgc2FtZSBvbmUgYmFjay5cbiAgICAgKiBgYGBcbiAgICAgKiBSZWdpc3RyYXRpb24uc2luZ2xldG9uKEZvbywgRm9vKTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBwYXJhbSBrZXlcbiAgICAgKiBAcGFyYW0gdmFsdWVcbiAgICAgKi9cbiAgICBzaW5nbGV0b24oa2V5LCB2YWx1ZSkge1xuICAgICAgICByZXR1cm4gbmV3IFJlc29sdmVyKGtleSwgMSAvKiBzaW5nbGV0b24gKi8sIHZhbHVlKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2UgZnJvbSBhIGNsYXNzLlxuICAgICAqIEV2ZXJ5IHRpbWUgeW91IHJlcXVlc3QgdGhpcyB7QGxpbmtjb2RlIEtleX0geW91IHdpbGwgZ2V0IGEgbmV3IGluc3RhbmNlLlxuICAgICAqIGBgYFxuICAgICAqIFJlZ2lzdHJhdGlvbi5pbnN0YW5jZShGb28sIEZvbyk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0ga2V5XG4gICAgICogQHBhcmFtIHZhbHVlXG4gICAgICovXG4gICAgdHJhbnNpZW50KGtleSwgdmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZXNvbHZlcihrZXksIDIgLyogdHJhbnNpZW50ICovLCB2YWx1ZSk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIGZyb20gdGhlIG1ldGhvZCBwYXNzZWQuXG4gICAgICogRXZlcnkgdGltZSB5b3UgcmVxdWVzdCB0aGlzIHtAbGlua2NvZGUgS2V5fSB5b3Ugd2lsbCBnZXQgYSBuZXcgaW5zdGFuY2UuXG4gICAgICogYGBgXG4gICAgICogUmVnaXN0cmF0aW9uLmNhbGxiYWNrKEZvbywgKCkgPT4gbmV3IEZvbygpKTtcbiAgICAgKiBSZWdpc3RyYXRpb24uY2FsbGJhY2soQmFyLCAoYzogSUNvbnRhaW5lcikgPT4gbmV3IEJhcihjLmdldChGb28pKSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0ga2V5XG4gICAgICogQHBhcmFtIGNhbGxiYWNrXG4gICAgICovXG4gICAgY2FsbGJhY2soa2V5LCBjYWxsYmFjaykge1xuICAgICAgICByZXR1cm4gbmV3IFJlc29sdmVyKGtleSwgMyAvKiBjYWxsYmFjayAqLywgY2FsbGJhY2spO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBmcm9tIHRoZSBtZXRob2QgcGFzc2VkLlxuICAgICAqIE9uIHRoZSBmaXJzdCByZXF1ZXN0IGZvciB0aGUge0BsaW5rY29kZSBLZXl9IHlvdXIgY2FsbGJhY2sgaXMgY2FsbGVkIGFuZCByZXR1cm5zIGFuIGluc3RhbmNlLlxuICAgICAqIHN1YnNlcXVlbnQgcmVxdWVzdHMgZm9yIHRoZSB7QGxpbmtjb2RlIEtleX0sIHRoZSBpbml0aWFsIGluc3RhbmNlIHJldHVybmVkIHdpbGwgYmUgcmV0dXJuZWQuXG4gICAgICogSWYgeW91IHBhc3MgdGhlIHNhbWUge0BsaW5rY29kZSBSZWdpc3RyYXRpb259IHRvIGFub3RoZXIgY29udGFpbmVyIHRoZSBzYW1lIGNhY2hlZCB2YWx1ZSB3aWxsIGJlIHVzZWQuXG4gICAgICogU2hvdWxkIGFsbCByZWZlcmVuY2VzIHRvIHRoZSByZXNvbHZlciByZXR1cm5lZCBiZSByZW1vdmVkLCB0aGUgY2FjaGUgd2lsbCBleHBpcmUuXG4gICAgICogYGBgXG4gICAgICogUmVnaXN0cmF0aW9uLmNhY2hlZENhbGxiYWNrKEZvbywgKCkgPT4gbmV3IEZvbygpKTtcbiAgICAgKiBSZWdpc3RyYXRpb24uY2FjaGVkQ2FsbGJhY2soQmFyLCAoYzogSUNvbnRhaW5lcikgPT4gbmV3IEJhcihjLmdldChGb28pKSk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0ga2V5XG4gICAgICogQHBhcmFtIGNhbGxiYWNrXG4gICAgICovXG4gICAgY2FjaGVkQ2FsbGJhY2soa2V5LCBjYWxsYmFjaykge1xuICAgICAgICByZXR1cm4gbmV3IFJlc29sdmVyKGtleSwgMyAvKiBjYWxsYmFjayAqLywgY2FjaGVDYWxsYmFja1Jlc3VsdChjYWxsYmFjaykpO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogY3JlYXRlcyBhbiBhbHRlcm5hdGUge0BsaW5rY29kZSBLZXl9IHRvIHJldHJpZXZlIGFuIGluc3RhbmNlIGJ5LlxuICAgICAqIFJldHVybnMgdGhlIHNhbWUgc2NvcGUgYXMgdGhlIG9yaWdpbmFsIHtAbGlua2NvZGUgS2V5fS5cbiAgICAgKiBgYGBcbiAgICAgKiBSZWdpc3Rlci5zaW5nbGV0b24oRm9vLCBGb28pXG4gICAgICogUmVnaXN0ZXIuYWxpYXNUbyhGb28sIE15Rm9vcyk7XG4gICAgICpcbiAgICAgKiBjb250YWluZXIuZ2V0QWxsKE15Rm9vcykgLy8gY29udGFpbnMgYW4gaW5zdGFuY2Ugb2YgRm9vXG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3JpZ2luYWxLZXlcbiAgICAgKiBAcGFyYW0gYWxpYXNLZXlcbiAgICAgKi9cbiAgICBhbGlhc1RvKG9yaWdpbmFsS2V5LCBhbGlhc0tleSkge1xuICAgICAgICByZXR1cm4gbmV3IFJlc29sdmVyKGFsaWFzS2V5LCA1IC8qIGFsaWFzICovLCBvcmlnaW5hbEtleSk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKiBAcGFyYW0ga2V5XG4gICAgICogQHBhcmFtIHBhcmFtc1xuICAgICAqL1xuICAgIGRlZmVyKGtleSwgLi4ucGFyYW1zKSB7XG4gICAgICAgIHJldHVybiBuZXcgUGFyYW1ldGVyaXplZFJlZ2lzdHJ5KGtleSwgcGFyYW1zKTtcbiAgICB9XG59O1xuZXhwb3J0IGNsYXNzIEluc3RhbmNlUHJvdmlkZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmluc3RhbmNlID0gbnVsbDtcbiAgICB9XG4gICAgcHJlcGFyZShpbnN0YW5jZSkge1xuICAgICAgICB0aGlzLmluc3RhbmNlID0gaW5zdGFuY2U7XG4gICAgfVxuICAgIHJlc29sdmUoaGFuZGxlciwgcmVxdWVzdG9yKSB7XG4gICAgICAgIGlmICh0aGlzLmluc3RhbmNlID09PSB1bmRlZmluZWQpIHsgLy8gdW5tZXQgcHJlY29uZGl0aW9uOiBjYWxsIHByZXBhcmVcbiAgICAgICAgICAgIHRocm93IFJlcG9ydGVyLmVycm9yKDUwKTsgLy8gVE9ETzogb3JnYW5pemUgZXJyb3IgY29kZXNcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5pbnN0YW5jZTtcbiAgICB9XG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgdGhpcy5pbnN0YW5jZSA9IG51bGw7XG4gICAgfVxufVxuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlS2V5KGtleSkge1xuICAgIGlmIChrZXkgPT09IG51bGwgfHwga2V5ID09PSB2b2lkIDApIHtcbiAgICAgICAgdGhyb3cgUmVwb3J0ZXIuZXJyb3IoNSk7XG4gICAgfVxufVxuZnVuY3Rpb24gYnVpbGRBbGxSZXNwb25zZShyZXNvbHZlciwgaGFuZGxlciwgcmVxdWVzdG9yKSB7XG4gICAgaWYgKHJlc29sdmVyIGluc3RhbmNlb2YgUmVzb2x2ZXIgJiYgcmVzb2x2ZXIuc3RyYXRlZ3kgPT09IDQgLyogYXJyYXkgKi8pIHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSByZXNvbHZlci5zdGF0ZTtcbiAgICAgICAgbGV0IGkgPSBzdGF0ZS5sZW5ndGg7XG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSBuZXcgQXJyYXkoaSk7XG4gICAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgICAgIHJlc3VsdHNbaV0gPSBzdGF0ZVtpXS5yZXNvbHZlKGhhbmRsZXIsIHJlcXVlc3Rvcik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfVxuICAgIHJldHVybiBbcmVzb2x2ZXIucmVzb2x2ZShoYW5kbGVyLCByZXF1ZXN0b3IpXTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRpLmpzLm1hcCIsImltcG9ydCB7IERJIH0gZnJvbSAnLi9kaSc7XG5pbXBvcnQgeyBSZXBvcnRlciB9IGZyb20gJy4vcmVwb3J0ZXInO1xuLyoqXG4gKiBSZXByZXNlbnRzIGEgaGFuZGxlciBmb3IgYW4gRXZlbnRBZ2dyZWdhdG9yIGV2ZW50LlxuICovXG5jbGFzcyBIYW5kbGVyIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKiogQGludGVybmFsICovXG4gICAgbWVzc2FnZVR5cGUsIFxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICBjYWxsYmFjaykge1xuICAgICAgICB0aGlzLm1lc3NhZ2VUeXBlID0gbWVzc2FnZVR5cGU7XG4gICAgICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICB9XG4gICAgaGFuZGxlKG1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2UgaW5zdGFuY2VvZiB0aGlzLm1lc3NhZ2VUeXBlKSB7XG4gICAgICAgICAgICB0aGlzLmNhbGxiYWNrLmNhbGwobnVsbCwgbWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBpbnZva2VDYWxsYmFjayhjYWxsYmFjaywgZGF0YSwgZXZlbnQpIHtcbiAgICB0cnkge1xuICAgICAgICBjYWxsYmFjayhkYXRhLCBldmVudCk7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIFJlcG9ydGVyLmVycm9yKDAsIGUpOyAvLyBUT0RPOiBjcmVhdGUgZXJyb3IgY29kZVxuICAgIH1cbn1cbmZ1bmN0aW9uIGludm9rZUhhbmRsZXIoaGFuZGxlciwgZGF0YSkge1xuICAgIHRyeSB7XG4gICAgICAgIGhhbmRsZXIuaGFuZGxlKGRhdGEpO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICBSZXBvcnRlci5lcnJvcigwLCBlKTsgLy8gVE9ETzogY3JlYXRlIGVycm9yIGNvZGVcbiAgICB9XG59XG5leHBvcnQgY29uc3QgSUV2ZW50QWdncmVnYXRvciA9IERJLmNyZWF0ZUludGVyZmFjZSgnSUV2ZW50QWdncmVnYXRvcicpLndpdGhEZWZhdWx0KHggPT4geC5zaW5nbGV0b24oRXZlbnRBZ2dyZWdhdG9yKSk7XG4vKipcbiAqIEVuYWJsZXMgbG9vc2VseSBjb3VwbGVkIHB1Ymxpc2gvc3Vic2NyaWJlIG1lc3NhZ2luZy5cbiAqL1xuZXhwb3J0IGNsYXNzIEV2ZW50QWdncmVnYXRvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICAgICAgdGhpcy5ldmVudExvb2t1cCA9IHt9O1xuICAgICAgICAvKiogQGludGVybmFsICovXG4gICAgICAgIHRoaXMubWVzc2FnZUhhbmRsZXJzID0gW107XG4gICAgfVxuICAgIHB1Ymxpc2goY2hhbm5lbE9ySW5zdGFuY2UsIGRhdGEpIHtcbiAgICAgICAgbGV0IHN1YnNjcmliZXJzO1xuICAgICAgICBsZXQgaTtcbiAgICAgICAgaWYgKCFjaGFubmVsT3JJbnN0YW5jZSkge1xuICAgICAgICAgICAgdGhyb3cgUmVwb3J0ZXIuZXJyb3IoMCk7IC8vIFRPRE86IGNyZWF0ZSBlcnJvciBjb2RlIGZvciAnRXZlbnQgd2FzIGludmFsaWQuJ1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgY2hhbm5lbE9ySW5zdGFuY2UgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBjb25zdCBjaGFubmVsID0gY2hhbm5lbE9ySW5zdGFuY2U7XG4gICAgICAgICAgICBzdWJzY3JpYmVycyA9IHRoaXMuZXZlbnRMb29rdXBbY2hhbm5lbF07XG4gICAgICAgICAgICBpZiAoc3Vic2NyaWJlcnMgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHN1YnNjcmliZXJzID0gc3Vic2NyaWJlcnMuc2xpY2UoKTtcbiAgICAgICAgICAgICAgICBpID0gc3Vic2NyaWJlcnMubGVuZ3RoO1xuICAgICAgICAgICAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgICAgICAgICAgICAgaW52b2tlQ2FsbGJhY2soc3Vic2NyaWJlcnNbaV0sIGRhdGEsIGNoYW5uZWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGluc3RhbmNlID0gY2hhbm5lbE9ySW5zdGFuY2U7XG4gICAgICAgICAgICBzdWJzY3JpYmVycyA9IHRoaXMubWVzc2FnZUhhbmRsZXJzLnNsaWNlKCk7XG4gICAgICAgICAgICBpID0gc3Vic2NyaWJlcnMubGVuZ3RoO1xuICAgICAgICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICAgICAgICAgIGludm9rZUhhbmRsZXIoc3Vic2NyaWJlcnNbaV0sIGluc3RhbmNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBzdWJzY3JpYmUoY2hhbm5lbE9yVHlwZSwgY2FsbGJhY2spIHtcbiAgICAgICAgbGV0IGhhbmRsZXI7XG4gICAgICAgIGxldCBzdWJzY3JpYmVycztcbiAgICAgICAgaWYgKCFjaGFubmVsT3JUeXBlKSB7XG4gICAgICAgICAgICB0aHJvdyBSZXBvcnRlci5lcnJvcigwKTsgLy8gVE9ETzogY3JlYXRlIGVycm9yIGNvZGUgZm9yICdFdmVudCBjaGFubmVsL3R5cGUgd2FzIGludmFsaWQuJ1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgY2hhbm5lbE9yVHlwZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGNvbnN0IGNoYW5uZWwgPSBjaGFubmVsT3JUeXBlO1xuICAgICAgICAgICAgaGFuZGxlciA9IGNhbGxiYWNrO1xuICAgICAgICAgICAgaWYgKHRoaXMuZXZlbnRMb29rdXBbY2hhbm5lbF0gPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRMb29rdXBbY2hhbm5lbF0gPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN1YnNjcmliZXJzID0gdGhpcy5ldmVudExvb2t1cFtjaGFubmVsXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGhhbmRsZXIgPSBuZXcgSGFuZGxlcihjaGFubmVsT3JUeXBlLCBjYWxsYmFjayk7XG4gICAgICAgICAgICBzdWJzY3JpYmVycyA9IHRoaXMubWVzc2FnZUhhbmRsZXJzO1xuICAgICAgICB9XG4gICAgICAgIHN1YnNjcmliZXJzLnB1c2goaGFuZGxlcik7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBkaXNwb3NlKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGlkeCA9IHN1YnNjcmliZXJzLmluZGV4T2YoaGFuZGxlcik7XG4gICAgICAgICAgICAgICAgaWYgKGlkeCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgc3Vic2NyaWJlcnMuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbiAgICBzdWJzY3JpYmVPbmNlKGNoYW5uZWxPclR5cGUsIGNhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IHN1YiA9IHRoaXMuc3Vic2NyaWJlKGNoYW5uZWxPclR5cGUsIChkYXRhLCBldmVudCkgPT4ge1xuICAgICAgICAgICAgc3ViLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhkYXRhLCBldmVudCk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gc3ViO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWV2ZW50YWdncmVnYXRvci5qcy5tYXAiLCJpbXBvcnQgeyBQTEFURk9STSB9IGZyb20gJy4vcGxhdGZvcm0nO1xuY29uc3QgaXNOdW1lcmljTG9va3VwID0ge307XG4vKipcbiAqIEVmZmljaWVudGx5IGRldGVybWluZSB3aGV0aGVyIHRoZSBwcm92aWRlZCBwcm9wZXJ0eSBrZXkgaXMgbnVtZXJpY1xuICogKGFuZCB0aHVzIGNvdWxkIGJlIGFuIGFycmF5IGluZGV4ZXIpIG9yIG5vdC5cbiAqXG4gKiBBbHdheXMgcmV0dXJucyB0cnVlIGZvciB2YWx1ZXMgb2YgdHlwZSBgJ251bWJlcidgLlxuICpcbiAqIE90aGVyd2lzZSwgb25seSByZXR1cm5zIHRydWUgZm9yIHN0cmluZ3MgdGhhdCBjb25zaXN0IG9ubHkgb2YgcG9zaXRpdmUgaW50ZWdlcnMuXG4gKlxuICogUmVzdWx0cyBhcmUgY2FjaGVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNBcnJheUluZGV4KHZhbHVlKSB7XG4gICAgc3dpdGNoICh0eXBlb2YgdmFsdWUpIHtcbiAgICAgICAgY2FzZSAnbnVtYmVyJzpcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZSA+PSAwICYmICh2YWx1ZSB8IDApID09PSB2YWx1ZTtcbiAgICAgICAgY2FzZSAnc3RyaW5nJzoge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gaXNOdW1lcmljTG9va3VwW3ZhbHVlXTtcbiAgICAgICAgICAgIGlmIChyZXN1bHQgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBsZW5ndGggPSB2YWx1ZS5sZW5ndGg7XG4gICAgICAgICAgICBpZiAobGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlzTnVtZXJpY0xvb2t1cFt2YWx1ZV0gPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBjaCA9IDA7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgY2ggPSB2YWx1ZS5jaGFyQ29kZUF0KGkpO1xuICAgICAgICAgICAgICAgIGlmIChpID09PSAwICYmIGNoID09PSAweDMwICYmIGxlbmd0aCA+IDEgLyogbXVzdCBub3Qgc3RhcnQgd2l0aCAwICovIHx8IGNoIDwgMHgzMCAvKiAwICovIHx8IGNoID4gMHgzOSAvKiA5ICovKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpc051bWVyaWNMb29rdXBbdmFsdWVdID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGlzTnVtZXJpY0xvb2t1cFt2YWx1ZV0gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIHRoZSB2YWx1ZSBwYXNzZWQgaXMgYSBudW1iZXIgb3IgYmlnaW50IGZvciBwYXJzaW5nIHB1cnBvc2VzXG4gKlxuICogQHBhcmFtIHZhbHVlIC0gVmFsdWUgdG8gZXZhbHVhdGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzTnVtYmVyT3JCaWdJbnQodmFsdWUpIHtcbiAgICBzd2l0Y2ggKHR5cGVvZiB2YWx1ZSkge1xuICAgICAgICBjYXNlICdudW1iZXInOlxuICAgICAgICBjYXNlICdiaWdpbnQnOlxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIHRoZSB2YWx1ZSBwYXNzZWQgaXMgYSBudW1iZXIgb3IgYmlnaW50IGZvciBwYXJzaW5nIHB1cnBvc2VzXG4gKlxuICogQHBhcmFtIHZhbHVlIC0gVmFsdWUgdG8gZXZhbHVhdGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzU3RyaW5nT3JEYXRlKHZhbHVlKSB7XG4gICAgc3dpdGNoICh0eXBlb2YgdmFsdWUpIHtcbiAgICAgICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICBjYXNlICdvYmplY3QnOlxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgRGF0ZTtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG4vKipcbiAqIEJhc2UgaW1wbGVtZW50YXRpb24gb2YgY2FtZWwgYW5kIGtlYmFiIGNhc2VzXG4gKi9cbmNvbnN0IGJhc2VDYXNlID0gKGZ1bmN0aW9uICgpIHtcbiAgICBsZXQgQ2hhcktpbmQ7XG4gICAgKGZ1bmN0aW9uIChDaGFyS2luZCkge1xuICAgICAgICBDaGFyS2luZFtDaGFyS2luZFtcIm5vbmVcIl0gPSAwXSA9IFwibm9uZVwiO1xuICAgICAgICBDaGFyS2luZFtDaGFyS2luZFtcImRpZ2l0XCJdID0gMV0gPSBcImRpZ2l0XCI7XG4gICAgICAgIENoYXJLaW5kW0NoYXJLaW5kW1widXBwZXJcIl0gPSAyXSA9IFwidXBwZXJcIjtcbiAgICAgICAgQ2hhcktpbmRbQ2hhcktpbmRbXCJsb3dlclwiXSA9IDNdID0gXCJsb3dlclwiO1xuICAgIH0pKENoYXJLaW5kIHx8IChDaGFyS2luZCA9IHt9KSk7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9jb25zaXN0ZW50LXR5cGUtYXNzZXJ0aW9uc1xuICAgIGNvbnN0IGlzRGlnaXQgPSBPYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUobnVsbCksIHtcbiAgICAgICAgJzAnOiB0cnVlLFxuICAgICAgICAnMSc6IHRydWUsXG4gICAgICAgICcyJzogdHJ1ZSxcbiAgICAgICAgJzMnOiB0cnVlLFxuICAgICAgICAnNCc6IHRydWUsXG4gICAgICAgICc1JzogdHJ1ZSxcbiAgICAgICAgJzYnOiB0cnVlLFxuICAgICAgICAnNyc6IHRydWUsXG4gICAgICAgICc4JzogdHJ1ZSxcbiAgICAgICAgJzknOiB0cnVlLFxuICAgIH0pO1xuICAgIGZ1bmN0aW9uIGNoYXJUb0tpbmQoY2hhcikge1xuICAgICAgICBpZiAoY2hhciA9PT0gJycpIHtcbiAgICAgICAgICAgIC8vIFdlIGdldCB0aGlzIGlmIHdlIGRvIGNoYXJBdCgpIHdpdGggYW4gaW5kZXggb3V0IG9mIHJhbmdlXG4gICAgICAgICAgICByZXR1cm4gMCAvKiBub25lICovO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjaGFyICE9PSBjaGFyLnRvVXBwZXJDYXNlKCkpIHtcbiAgICAgICAgICAgIHJldHVybiAzIC8qIGxvd2VyICovO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjaGFyICE9PSBjaGFyLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgIHJldHVybiAyIC8qIHVwcGVyICovO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0RpZ2l0W2NoYXJdID09PSB0cnVlKSB7XG4gICAgICAgICAgICByZXR1cm4gMSAvKiBkaWdpdCAqLztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gMCAvKiBub25lICovO1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24gKGlucHV0LCBjYikge1xuICAgICAgICBjb25zdCBsZW4gPSBpbnB1dC5sZW5ndGg7XG4gICAgICAgIGlmIChsZW4gPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBpbnB1dDtcbiAgICAgICAgfVxuICAgICAgICBsZXQgc2VwID0gZmFsc2U7XG4gICAgICAgIGxldCBvdXRwdXQgPSAnJztcbiAgICAgICAgbGV0IHByZXZLaW5kO1xuICAgICAgICBsZXQgY3VyQ2hhciA9ICcnO1xuICAgICAgICBsZXQgY3VyS2luZCA9IDAgLyogbm9uZSAqLztcbiAgICAgICAgbGV0IG5leHRDaGFyID0gaW5wdXQuY2hhckF0KDApO1xuICAgICAgICBsZXQgbmV4dEtpbmQgPSBjaGFyVG9LaW5kKG5leHRDaGFyKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgICAgICAgICAgcHJldktpbmQgPSBjdXJLaW5kO1xuICAgICAgICAgICAgY3VyQ2hhciA9IG5leHRDaGFyO1xuICAgICAgICAgICAgY3VyS2luZCA9IG5leHRLaW5kO1xuICAgICAgICAgICAgbmV4dENoYXIgPSBpbnB1dC5jaGFyQXQoaSArIDEpO1xuICAgICAgICAgICAgbmV4dEtpbmQgPSBjaGFyVG9LaW5kKG5leHRDaGFyKTtcbiAgICAgICAgICAgIGlmIChjdXJLaW5kID09PSAwIC8qIG5vbmUgKi8pIHtcbiAgICAgICAgICAgICAgICBpZiAob3V0cHV0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gT25seSBzZXQgc2VwIHRvIHRydWUgaWYgaXQncyBub3QgYXQgdGhlIGJlZ2lubmluZyBvZiBvdXRwdXQuXG4gICAgICAgICAgICAgICAgICAgIHNlcCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKCFzZXAgJiYgb3V0cHV0Lmxlbmd0aCA+IDAgJiYgY3VyS2luZCA9PT0gMiAvKiB1cHBlciAqLykge1xuICAgICAgICAgICAgICAgICAgICAvLyBTZXBhcmF0ZSBVQUZvbyBpbnRvIFVBIEZvby5cbiAgICAgICAgICAgICAgICAgICAgLy8gU2VwYXJhdGUgdWFGT08gaW50byB1YSBGT08uXG4gICAgICAgICAgICAgICAgICAgIHNlcCA9IHByZXZLaW5kID09PSAzIC8qIGxvd2VyICovIHx8IG5leHRLaW5kID09PSAzIC8qIGxvd2VyICovO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBvdXRwdXQgKz0gY2IoY3VyQ2hhciwgc2VwKTtcbiAgICAgICAgICAgICAgICBzZXAgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBFZmZpY2llbnRseSBjb252ZXJ0IGEgc3RyaW5nIHRvIGNhbWVsQ2FzZS5cbiAqXG4gKiBOb24tYWxwaGFudW1lcmljIGNoYXJhY3RlcnMgYXJlIHRyZWF0ZWQgYXMgc2VwYXJhdG9ycy5cbiAqXG4gKiBQcmltYXJpbHkgdXNlZCBieSBBdXJlbGlhIHRvIGNvbnZlcnQgRE9NIGF0dHJpYnV0ZSBuYW1lcyB0byBWaWV3TW9kZWwgcHJvcGVydHkgbmFtZXMuXG4gKlxuICogUmVzdWx0cyBhcmUgY2FjaGVkLlxuICovXG5leHBvcnQgY29uc3QgY2FtZWxDYXNlID0gKGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBjYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgZnVuY3Rpb24gY2FsbGJhY2soY2hhciwgc2VwKSB7XG4gICAgICAgIHJldHVybiBzZXAgPyBjaGFyLnRvVXBwZXJDYXNlKCkgOiBjaGFyLnRvTG93ZXJDYXNlKCk7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbiAoaW5wdXQpIHtcbiAgICAgICAgbGV0IG91dHB1dCA9IGNhY2hlW2lucHV0XTtcbiAgICAgICAgaWYgKG91dHB1dCA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBvdXRwdXQgPSBjYWNoZVtpbnB1dF0gPSBiYXNlQ2FzZShpbnB1dCwgY2FsbGJhY2spO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEVmZmljaWVudGx5IGNvbnZlcnQgYSBzdHJpbmcgdG8gUGFzY2FsQ2FzZS5cbiAqXG4gKiBOb24tYWxwaGFudW1lcmljIGNoYXJhY3RlcnMgYXJlIHRyZWF0ZWQgYXMgc2VwYXJhdG9ycy5cbiAqXG4gKiBQcmltYXJpbHkgdXNlZCBieSBBdXJlbGlhIHRvIGNvbnZlcnQgZWxlbWVudCBuYW1lcyB0byBjbGFzcyBuYW1lcyBmb3Igc3ludGhldGljIHR5cGVzLlxuICpcbiAqIFJlc3VsdHMgYXJlIGNhY2hlZC5cbiAqL1xuZXhwb3J0IGNvbnN0IHBhc2NhbENhc2UgPSAoZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IGNhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGlucHV0KSB7XG4gICAgICAgIGxldCBvdXRwdXQgPSBjYWNoZVtpbnB1dF07XG4gICAgICAgIGlmIChvdXRwdXQgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgb3V0cHV0ID0gY2FtZWxDYXNlKGlucHV0KTtcbiAgICAgICAgICAgIGlmIChvdXRwdXQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIG91dHB1dCA9IG91dHB1dFswXS50b1VwcGVyQ2FzZSgpICsgb3V0cHV0LnNsaWNlKDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FjaGVbaW5wdXRdID0gb3V0cHV0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEVmZmljaWVudGx5IGNvbnZlcnQgYSBzdHJpbmcgdG8ga2ViYWItY2FzZS5cbiAqXG4gKiBOb24tYWxwaGFudW1lcmljIGNoYXJhY3RlcnMgYXJlIHRyZWF0ZWQgYXMgc2VwYXJhdG9ycy5cbiAqXG4gKiBQcmltYXJpbHkgdXNlZCBieSBBdXJlbGlhIHRvIGNvbnZlcnQgVmlld01vZGVsIHByb3BlcnR5IG5hbWVzIHRvIERPTSBhdHRyaWJ1dGUgbmFtZXMuXG4gKlxuICogUmVzdWx0cyBhcmUgY2FjaGVkLlxuICovXG5leHBvcnQgY29uc3Qga2ViYWJDYXNlID0gKGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBjYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgZnVuY3Rpb24gY2FsbGJhY2soY2hhciwgc2VwKSB7XG4gICAgICAgIHJldHVybiBzZXAgPyBgLSR7Y2hhci50b0xvd2VyQ2FzZSgpfWAgOiBjaGFyLnRvTG93ZXJDYXNlKCk7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbiAoaW5wdXQpIHtcbiAgICAgICAgbGV0IG91dHB1dCA9IGNhY2hlW2lucHV0XTtcbiAgICAgICAgaWYgKG91dHB1dCA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBvdXRwdXQgPSBjYWNoZVtpbnB1dF0gPSBiYXNlQ2FzZShpbnB1dCwgY2FsbGJhY2spO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEVmZmljaWVudGx5ICh1cCB0byAxMHggZmFzdGVyIHRoYW4gYEFycmF5LmZyb21gKSBjb252ZXJ0IGFuIGBBcnJheUxpa2VgIHRvIGEgcmVhbCBhcnJheS5cbiAqXG4gKiBQcmltYXJpbHkgdXNlZCBieSBBdXJlbGlhIHRvIGNvbnZlcnQgRE9NIG5vZGUgbGlzdHMgdG8gYXJyYXlzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9BcnJheShpbnB1dCkge1xuICAgIC8vIGJlbmNobWFyazogaHR0cDovL2pzYmVuLmNoL3hqc3lGXG4gICAgY29uc3QgeyBsZW5ndGggfSA9IGlucHV0O1xuICAgIGNvbnN0IGFyciA9IEFycmF5KGxlbmd0aCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgICAgICBhcnJbaV0gPSBpbnB1dFtpXTtcbiAgICB9XG4gICAgcmV0dXJuIGFycjtcbn1cbmNvbnN0IGlkcyA9IHt9O1xuLyoqXG4gKiBSZXRyaWV2ZSB0aGUgbmV4dCBJRCBpbiBhIHNlcXVlbmNlIGZvciBhIGdpdmVuIHN0cmluZywgc3RhcnRpbmcgd2l0aCBgMWAuXG4gKlxuICogVXNlZCBieSBBdXJlbGlhIHRvIGFzc2lnbiB1bmlxdWUgSUQncyB0byBjb250cm9sbGVycyBhbmQgcmVzb3VyY2VzLlxuICpcbiAqIEF1cmVsaWEgd2lsbCBhbHdheXMgcHJlcGVuZCB0aGUgY29udGV4dCBuYW1lIHdpdGggYGF1JGAsIHNvIGFzIGxvbmcgYXMgeW91IGF2b2lkXG4gKiB1c2luZyB0aGF0IGNvbnZlbnRpb24geW91IHNob3VsZCBiZSBzYWZlIGZyb20gY29sbGlzaW9ucy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG5leHRJZChjb250ZXh0KSB7XG4gICAgaWYgKGlkc1tjb250ZXh0XSA9PT0gdm9pZCAwKSB7XG4gICAgICAgIGlkc1tjb250ZXh0XSA9IDA7XG4gICAgfVxuICAgIHJldHVybiArK2lkc1tjb250ZXh0XTtcbn1cbi8qKlxuICogUmVzZXQgdGhlIElEIGZvciB0aGUgZ2l2ZW4gc3RyaW5nLCBzbyB0aGF0IGBuZXh0SWRgIHdpbGwgcmV0dXJuIGAxYCBhZ2FpbiBmb3IgdGhlIG5leHQgY2FsbC5cbiAqXG4gKiBVc2VkIGJ5IEF1cmVsaWEgdG8gcmVzZXQgSUQncyBpbiBiZXR3ZWVuIHVuaXQgdGVzdHMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXNldElkKGNvbnRleHQpIHtcbiAgICBpZHNbY29udGV4dF0gPSAwO1xufVxuLyoqXG4gKiBBIGNvbXBhcmUgZnVuY3Rpb24gdG8gcGFzcyB0byBgQXJyYXkucHJvdG90eXBlLnNvcnRgIGZvciBzb3J0aW5nIG51bWJlcnMuXG4gKiBUaGlzIGlzIG5lZWRlZCBmb3IgbnVtZXJpYyBzb3J0LCBzaW5jZSB0aGUgZGVmYXVsdCBzb3J0cyB0aGVtIGFzIHN0cmluZ3MuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb21wYXJlTnVtYmVyKGEsIGIpIHtcbiAgICByZXR1cm4gYSAtIGI7XG59XG5jb25zdCBlbXB0eUFycmF5ID0gUExBVEZPUk0uZW1wdHlBcnJheTtcbi8qKlxuICogRWZmaWNpZW50bHkgbWVyZ2UgYW5kIGRlZHVwbGljYXRlIHRoZSAocHJpbWl0aXZlKSB2YWx1ZXMgaW4gdHdvIGFycmF5cy5cbiAqXG4gKiBEb2VzIG5vdCBkZWR1cGxpY2F0ZSBleGlzdGluZyB2YWx1ZXMgaW4gdGhlIGZpcnN0IGFycmF5LlxuICpcbiAqIEd1YXJkcyBhZ2FpbnN0IG51bGwgb3IgdW5kZWZpbmVkIGFycmF5cy5cbiAqXG4gKiBSZXR1cm5zIGBQTEFURk9STS5lbXB0eUFycmF5YCBpZiBib3RoIGFycmF5cyBhcmUgZWl0aGVyIGBudWxsYCwgYHVuZGVmaW5lZGAgb3IgYFBMQVRGT1JNLmVtcHR5QXJyYXlgXG4gKlxuICogQHBhcmFtIHNsaWNlIC0gSWYgYHRydWVgLCBhbHdheXMgcmV0dXJucyBhIG5ldyBhcnJheSBjb3B5ICh1bmxlc3MgbmVpdGhlciBhcnJheSBpcy9oYXMgYSB2YWx1ZSlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlRGlzdGluY3QoYXJyMSwgYXJyMiwgc2xpY2UpIHtcbiAgICBpZiAoYXJyMSA9PT0gdm9pZCAwIHx8IGFycjEgPT09IG51bGwgfHwgYXJyMSA9PT0gZW1wdHlBcnJheSkge1xuICAgICAgICBpZiAoYXJyMiA9PT0gdm9pZCAwIHx8IGFycjIgPT09IG51bGwgfHwgYXJyMiA9PT0gZW1wdHlBcnJheSkge1xuICAgICAgICAgICAgcmV0dXJuIGVtcHR5QXJyYXk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gc2xpY2UgPyBhcnIyLnNsaWNlKDApIDogYXJyMjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChhcnIyID09PSB2b2lkIDAgfHwgYXJyMiA9PT0gbnVsbCB8fCBhcnIyID09PSBlbXB0eUFycmF5KSB7XG4gICAgICAgIHJldHVybiBzbGljZSA/IGFycjEuc2xpY2UoMCkgOiBhcnIxO1xuICAgIH1cbiAgICBjb25zdCBsb29rdXAgPSB7fTtcbiAgICBjb25zdCBhcnIzID0gc2xpY2UgPyBhcnIxLnNsaWNlKDApIDogYXJyMTtcbiAgICBsZXQgbGVuMSA9IGFycjEubGVuZ3RoO1xuICAgIGxldCBsZW4yID0gYXJyMi5sZW5ndGg7XG4gICAgd2hpbGUgKGxlbjEtLSA+IDApIHtcbiAgICAgICAgbG9va3VwW2FycjFbbGVuMV1dID0gdHJ1ZTtcbiAgICB9XG4gICAgbGV0IGl0ZW07XG4gICAgd2hpbGUgKGxlbjItLSA+IDApIHtcbiAgICAgICAgaXRlbSA9IGFycjJbbGVuMl07XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5uZWNlc3NhcnktY29uZGl0aW9uXG4gICAgICAgIGlmIChsb29rdXBbaXRlbV0gPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgYXJyMy5wdXNoKGl0ZW0pO1xuICAgICAgICAgICAgbG9va3VwW2l0ZW1dID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYXJyMztcbn1cbi8qKlxuICogRGVjb3JhdG9yLiAobGF6aWx5KSBiaW5kIHRoZSBtZXRob2QgdG8gdGhlIGNsYXNzIGluc3RhbmNlIG9uIGZpcnN0IGNhbGwuXG4gKi9cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXR5cGVzXG5leHBvcnQgZnVuY3Rpb24gYm91bmQodGFyZ2V0LCBrZXksIGRlc2NyaXB0b3IpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgIGVudW1lcmFibGU6IGRlc2NyaXB0b3IuZW51bWVyYWJsZSxcbiAgICAgICAgZ2V0KCkge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bm5lY2Vzc2FyeS10eXBlLWFzc2VydGlvblxuICAgICAgICAgICAgY29uc3QgYm91bmRGbiA9IGRlc2NyaXB0b3IudmFsdWUuYmluZCh0aGlzKTtcbiAgICAgICAgICAgIFJlZmxlY3QuZGVmaW5lUHJvcGVydHkodGhpcywga2V5LCB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IGJvdW5kRm4sXG4gICAgICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGRlc2NyaXB0b3IuZW51bWVyYWJsZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGJvdW5kRm47XG4gICAgICAgIH0sXG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBtZXJnZUFycmF5cyguLi5hcnJheXMpIHtcbiAgICBjb25zdCByZXN1bHQgPSBbXTtcbiAgICBsZXQgayA9IDA7XG4gICAgY29uc3QgYXJyYXlzTGVuID0gYXJyYXlzLmxlbmd0aDtcbiAgICBsZXQgYXJyYXlMZW4gPSAwO1xuICAgIGxldCBhcnJheTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFycmF5c0xlbjsgKytpKSB7XG4gICAgICAgIGFycmF5ID0gYXJyYXlzW2ldO1xuICAgICAgICBpZiAoYXJyYXkgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgYXJyYXlMZW4gPSBhcnJheS5sZW5ndGg7XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGFycmF5TGVuOyArK2opIHtcbiAgICAgICAgICAgICAgICByZXN1bHRbaysrXSA9IGFycmF5W2pdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5leHBvcnQgZnVuY3Rpb24gbWVyZ2VPYmplY3RzKC4uLm9iamVjdHMpIHtcbiAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICBjb25zdCBvYmplY3RzTGVuID0gb2JqZWN0cy5sZW5ndGg7XG4gICAgbGV0IG9iamVjdDtcbiAgICBsZXQga2V5O1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb2JqZWN0c0xlbjsgKytpKSB7XG4gICAgICAgIG9iamVjdCA9IG9iamVjdHNbaV07XG4gICAgICAgIGlmIChvYmplY3QgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgZm9yIChrZXkgaW4gb2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0W2tleV0gPSBvYmplY3Rba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGZpcnN0RGVmaW5lZCguLi52YWx1ZXMpIHtcbiAgICBjb25zdCBsZW4gPSB2YWx1ZXMubGVuZ3RoO1xuICAgIGxldCB2YWx1ZTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgIHZhbHVlID0gdmFsdWVzW2ldO1xuICAgICAgICBpZiAodmFsdWUgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcihgTm8gZGVmYXVsdCB2YWx1ZSBmb3VuZGApO1xufVxuZXhwb3J0IGNvbnN0IGdldFByb3RvdHlwZUNoYWluID0gKGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBmdW5jdGlvblByb3RvdHlwZSA9IEZ1bmN0aW9uLnByb3RvdHlwZTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L3VuYm91bmQtbWV0aG9kXG4gICAgY29uc3QgZ2V0UHJvdG90eXBlT2YgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Y7XG4gICAgY29uc3QgY2FjaGUgPSBuZXcgV2Vha01hcCgpO1xuICAgIGxldCBwcm90byA9IGZ1bmN0aW9uUHJvdG90eXBlO1xuICAgIGxldCBpID0gMDtcbiAgICBsZXQgY2hhaW4gPSB2b2lkIDA7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChUeXBlKSB7XG4gICAgICAgIGNoYWluID0gY2FjaGUuZ2V0KFR5cGUpO1xuICAgICAgICBpZiAoY2hhaW4gPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgY2FjaGUuc2V0KFR5cGUsIGNoYWluID0gW3Byb3RvID0gVHlwZV0pO1xuICAgICAgICAgICAgaSA9IDA7XG4gICAgICAgICAgICB3aGlsZSAoKHByb3RvID0gZ2V0UHJvdG90eXBlT2YocHJvdG8pKSAhPT0gZnVuY3Rpb25Qcm90b3R5cGUpIHtcbiAgICAgICAgICAgICAgICBjaGFpblsrK2ldID0gcHJvdG87XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNoYWluO1xuICAgIH07XG59KSgpO1xuZXhwb3J0IGZ1bmN0aW9uIHRvTG9va3VwKC4uLm9ianMpIHtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKG51bGwpLCAuLi5vYmpzKTtcbn1cbi8qKlxuICogRGV0ZXJtaW5lIHdoZXRoZXIgYSB2YWx1ZSBpcyBhbiBvYmplY3QuXG4gKlxuICogVXNlcyBgdHlwZW9mYCB0byBndWFyYW50ZWUgdGhpcyB3b3JrcyBjcm9zcy1yZWFsbSwgd2hpY2ggaXMgd2hlcmUgYGluc3RhbmNlb2YgT2JqZWN0YCBtaWdodCBmYWlsLlxuICpcbiAqIFNvbWUgZW52aXJvbm1lbnRzIHdoZXJlIHRoZXNlIGlzc3VlcyBhcmUga25vd24gdG8gYXJpc2U6XG4gKiAtIHNhbWUtb3JpZ2luIGlmcmFtZXMgKGFjY2Vzc2luZyB0aGUgb3RoZXIgcmVhbG0gdmlhIGB3aW5kb3cudG9wYClcbiAqIC0gYGplc3RgLlxuICpcbiAqIFRoZSBleGFjdCB0ZXN0IGlzOlxuICogYGBgdHNcbiAqIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgIT09IG51bGwgfHwgdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nXG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUgdG8gdGVzdC5cbiAqIEByZXR1cm5zIGB0cnVlYCBpZiB0aGUgdmFsdWUgaXMgYW4gb2JqZWN0LCBvdGhlcndpc2UgYGZhbHNlYC5cbiAqIEFsc28gcGVyZm9ybXMgYSB0eXBlIGFzc2VydGlvbiB0aGF0IGRlZmF1bHRzIHRvIGB2YWx1ZSBpcyBPYmplY3QgfCBGdW5jdGlvbmAgd2hpY2gsIGlmIHRoZSBpbnB1dCB0eXBlIGlzIGEgdW5pb24gd2l0aCBhbiBvYmplY3QgdHlwZSwgd2lsbCBpbmZlciB0aGUgY29ycmVjdCB0eXBlLlxuICogVGhpcyBjYW4gYmUgb3ZlcnJpZGRlbiB3aXRoIHRoZSBnZW5lcmljIHR5cGUgYXJndW1lbnQuXG4gKlxuICogQGV4YW1wbGVcbiAqXG4gKiBgYGB0c1xuICogY2xhc3MgRm9vIHtcbiAqICAgYmFyID0gNDI7XG4gKiB9XG4gKlxuICogZnVuY3Rpb24gZG9TdHVmZihpbnB1dD86IEZvbyB8IG51bGwpIHtcbiAqICAgaW5wdXQuYmFyOyAvLyBPYmplY3QgaXMgcG9zc2libHkgJ251bGwnIG9yICd1bmRlZmluZWQnXG4gKlxuICogICAvLyBpbnB1dCBoYXMgYW4gb2JqZWN0IHR5cGUgaW4gaXRzIHVuaW9uIChGb28pIHNvIHRoYXQgdHlwZSB3aWxsIGJlIGV4dHJhY3RlZCBmb3IgdGhlICd0cnVlJyBjb25kaXRpb25cbiAqICAgaWYgKGlzT2JqZWN0KGlucHV0KSkge1xuICogICAgIGlucHV0LmJhcjsgLy8gT0sgKGlucHV0IGlzIG5vdyB0eXBlZCBhcyBGb28pXG4gKiAgIH1cbiAqIH1cbiAqXG4gKiBmdW5jdGlvbiBkb090aGVyU3R1ZmYoaW5wdXQ6IHVua25vd24pIHtcbiAqICAgaW5wdXQuYmFyOyAvLyBPYmplY3QgaXMgb2YgdHlwZSAndW5rbm93bidcbiAqXG4gKiAgIC8vIGlucHV0IGlzICd1bmtub3duJyBzbyB0aGVyZSBpcyBubyB1bmlvbiB0eXBlIHRvIG1hdGNoIGFuZCBpdCB3aWxsIGRlZmF1bHQgdG8gJ09iamVjdCB8IEZ1bmN0aW9uJ1xuICogICBpZiAoaXNPYmplY3QoaW5wdXQpKSB7XG4gKiAgICAgaW5wdXQuYmFyOyAvLyBQcm9wZXJ0eSAnYmFyJyBkb2VzIG5vdCBleGlzdCBvbiB0eXBlICdPYmplY3QgfCBGdW5jdGlvbidcbiAqICAgfVxuICpcbiAqICAgLy8gaWYgd2Uga25vdyBmb3Igc3VyZSB0aGF0LCBpZiBpbnB1dCBpcyBhbiBvYmplY3QsIGl0IG11c3QgYmUgYSBzcGVjaWZpYyB0eXBlLCB3ZSBjYW4gZXhwbGljaXRseSB0ZWxsIHRoZSBmdW5jdGlvbiB0byBhc3NlcnQgdGhhdCBmb3IgdXNcbiAqICAgaWYgKGlzT2JqZWN0PEZvbz4oaW5wdXQpKSB7XG4gKiAgICBpbnB1dC5iYXI7IC8vIE9LIChpbnB1dCBpcyBub3cgdHlwZWQgYXMgRm9vKVxuICogICB9XG4gKiB9XG4gKiBgYGBcbiAqL1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHlwZXNcbmV4cG9ydCBmdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICE9PSBudWxsIHx8IHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJztcbn1cbi8qKlxuICogRGV0ZXJtaW5lIHdoZXRoZXIgYSB2YWx1ZSBpcyBgbnVsbGAgb3IgYHVuZGVmaW5lZGAuXG4gKlxuICogQHBhcmFtIHZhbHVlIC0gVGhlIHZhbHVlIHRvIHRlc3QuXG4gKiBAcmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHZhbHVlIGlzIGBudWxsYCBvciBgdW5kZWZpbmVkYCwgb3RoZXJ3aXNlIGBmYWxzZWAuXG4gKiBBbHNvIHBlcmZvcm1zIGEgdHlwZSBhc3NlcnRpb24gdGhhdCBlbnN1cmVzIFR5cGVTY3JpcHQgdHJlYXRzIHRoZSB2YWx1ZSBhcHByb3ByaWF0ZWx5IGluIHRoZSBgaWZgIGFuZCBgZWxzZWAgYnJhbmNoZXMgYWZ0ZXIgdGhpcyBjaGVjay5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzTnVsbE9yVW5kZWZpbmVkKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB2b2lkIDA7XG59XG4vKipcbiAqIERldGVybWluZSB3aGV0aGVyIHRoZSB2YWx1ZSBpcyBhIG5hdGl2ZSBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0gZm4gLSBUaGUgZnVuY3Rpb24gdG8gY2hlY2suXG4gKiBAcmV0dXJucyBgdHJ1ZWAgaXMgdGhlIGZ1bmN0aW9uIGlzIGEgbmF0aXZlIGZ1bmN0aW9uLCBvdGhlcndpc2UgYGZhbHNlYFxuICovXG5leHBvcnQgY29uc3QgaXNOYXRpdmVGdW5jdGlvbiA9IChmdW5jdGlvbiAoKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHlwZXNcbiAgICBjb25zdCBsb29rdXAgPSBuZXcgV2Vha01hcCgpO1xuICAgIGxldCBpc05hdGl2ZSA9IGZhbHNlO1xuICAgIGxldCBzb3VyY2VUZXh0ID0gJyc7XG4gICAgbGV0IGkgPSAwO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXR5cGVzXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmbikge1xuICAgICAgICBpc05hdGl2ZSA9IGxvb2t1cC5nZXQoZm4pO1xuICAgICAgICBpZiAoaXNOYXRpdmUgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgc291cmNlVGV4dCA9IGZuLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBpID0gc291cmNlVGV4dC5sZW5ndGg7XG4gICAgICAgICAgICAvLyBodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvI3Byb2QtTmF0aXZlRnVuY3Rpb25cbiAgICAgICAgICAgIGlzTmF0aXZlID0gKFxuICAgICAgICAgICAgLy8gMjkgaXMgdGhlIGxlbmd0aCBvZiAnZnVuY3Rpb24gKCkgeyBbbmF0aXZlIGNvZGVdIH0nIHdoaWNoIGlzIHRoZSBzbWFsbGVzdCBsZW5ndGggb2YgYSBuYXRpdmUgZnVuY3Rpb24gc3RyaW5nXG4gICAgICAgICAgICBpID49IDI5ICYmXG4gICAgICAgICAgICAgICAgLy8gMTAwIHNlZW1zIHRvIGJlIGEgc2FmZSB1cHBlciBib3VuZCBvZiB0aGUgbWF4IGxlbmd0aCBvZiBhIG5hdGl2ZSBmdW5jdGlvbi4gSW4gQ2hyb21lIGFuZCBGRiBpdCdzIDU2LCBpbiBFZGdlIGl0J3MgNjEuXG4gICAgICAgICAgICAgICAgaSA8PSAxMDAgJiZcbiAgICAgICAgICAgICAgICAvLyBUaGlzIHdob2xlIGhldXJpc3RpYyAqY291bGQqIGJlIHRyaWNrZWQgYnkgYSBjb21tZW50LiBEbyB3ZSBuZWVkIHRvIGNhcmUgYWJvdXQgdGhhdD9cbiAgICAgICAgICAgICAgICBzb3VyY2VUZXh0LmNoYXJDb2RlQXQoaSAtIDEpID09PSAweDdEICYmIC8vIH1cbiAgICAgICAgICAgICAgICAvLyBUT0RPOiB0aGUgc3BlYyBpcyBhIGxpdHRsZSB2YWd1ZSBhYm91dCB0aGUgcHJlY2lzZSBjb25zdHJhaW50cywgc28gd2UgZG8gbmVlZCB0byB0ZXN0IHRoaXMgYWNyb3NzIHZhcmlvdXMgYnJvd3NlcnMgdG8gbWFrZSBzdXJlIGp1c3Qgb25lIHdoaXRlc3BhY2UgaXMgYSBzYWZlIGFzc3VtcHRpb24uXG4gICAgICAgICAgICAgICAgc291cmNlVGV4dC5jaGFyQ29kZUF0KGkgLSAyKSA8PSAweDIwICYmIC8vIHdoaXRlc3BhY2VcbiAgICAgICAgICAgICAgICBzb3VyY2VUZXh0LmNoYXJDb2RlQXQoaSAtIDMpID09PSAweDVEICYmIC8vIF1cbiAgICAgICAgICAgICAgICBzb3VyY2VUZXh0LmNoYXJDb2RlQXQoaSAtIDQpID09PSAweDY1ICYmIC8vIGVcbiAgICAgICAgICAgICAgICBzb3VyY2VUZXh0LmNoYXJDb2RlQXQoaSAtIDUpID09PSAweDY0ICYmIC8vIGRcbiAgICAgICAgICAgICAgICBzb3VyY2VUZXh0LmNoYXJDb2RlQXQoaSAtIDYpID09PSAweDZGICYmIC8vIG9cbiAgICAgICAgICAgICAgICBzb3VyY2VUZXh0LmNoYXJDb2RlQXQoaSAtIDcpID09PSAweDYzICYmIC8vIGNcbiAgICAgICAgICAgICAgICBzb3VyY2VUZXh0LmNoYXJDb2RlQXQoaSAtIDgpID09PSAweDIwICYmIC8vXG4gICAgICAgICAgICAgICAgc291cmNlVGV4dC5jaGFyQ29kZUF0KGkgLSA5KSA9PT0gMHg2NSAmJiAvLyBlXG4gICAgICAgICAgICAgICAgc291cmNlVGV4dC5jaGFyQ29kZUF0KGkgLSAxMCkgPT09IDB4NzYgJiYgLy8gdlxuICAgICAgICAgICAgICAgIHNvdXJjZVRleHQuY2hhckNvZGVBdChpIC0gMTEpID09PSAweDY5ICYmIC8vIGlcbiAgICAgICAgICAgICAgICBzb3VyY2VUZXh0LmNoYXJDb2RlQXQoaSAtIDEyKSA9PT0gMHg3NCAmJiAvLyB0XG4gICAgICAgICAgICAgICAgc291cmNlVGV4dC5jaGFyQ29kZUF0KGkgLSAxMykgPT09IDB4NjEgJiYgLy8gYVxuICAgICAgICAgICAgICAgIHNvdXJjZVRleHQuY2hhckNvZGVBdChpIC0gMTQpID09PSAweDZFICYmIC8vIG5cbiAgICAgICAgICAgICAgICBzb3VyY2VUZXh0LmNoYXJDb2RlQXQoaSAtIDE1KSA9PT0gMHg1OCAvLyBbXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgbG9va3VwLnNldChmbiwgaXNOYXRpdmUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpc05hdGl2ZTtcbiAgICB9O1xufSkoKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZ1bmN0aW9ucy5qcy5tYXAiLCJleHBvcnQgeyBhbGwsIERJLCBJQ29udGFpbmVyLCBpbmplY3QsIElTZXJ2aWNlTG9jYXRvciwgbGF6eSwgb3B0aW9uYWwsIFJlZ2lzdHJhdGlvbiwgc2luZ2xldG9uLCB0cmFuc2llbnQsIEluc3RhbmNlUHJvdmlkZXIsIG5ld0luc3RhbmNlRm9yU2NvcGUsIG5ld0luc3RhbmNlT2YgfSBmcm9tICcuL2RpJztcbmV4cG9ydCB7IG1ldGFkYXRhLCBNZXRhZGF0YSwgfSBmcm9tICdAYXVyZWxpYS9tZXRhZGF0YSc7XG5leHBvcnQgeyBDb2xvck9wdGlvbnMsIElMb2dDb25maWcsIElMb2dFdmVudEZhY3RvcnksIElTaW5rLCBJTG9nZ2VyLCBMb2dDb25maWcsIERlZmF1bHRMb2dFdmVudCwgRGVmYXVsdExvZ0V2ZW50RmFjdG9yeSwgRGVmYXVsdExvZ2dlciwgQ29uc29sZVNpbmssIExvZ2dlckNvbmZpZ3VyYXRpb24sIGZvcm1hdCwgfSBmcm9tICcuL2xvZ2dlcic7XG5leHBvcnQgeyByZWxhdGl2ZVRvRmlsZSwgam9pbiwgfSBmcm9tICcuL3BhdGgnO1xuZXhwb3J0IHsgUExBVEZPUk0gfSBmcm9tICcuL3BsYXRmb3JtJztcbmV4cG9ydCB7IFJlcG9ydGVyLCBUcmFjZXIsIExvZ0xldmVsLCB9IGZyb20gJy4vcmVwb3J0ZXInO1xuZXhwb3J0IHsgUHJvZmlsZXIgfSBmcm9tICcuL3Byb2ZpbGVyJztcbmV4cG9ydCB7IFByb3RvY29sLCBmcm9tQW5ub3RhdGlvbk9yRGVmaW5pdGlvbk9yVHlwZU9yRGVmYXVsdCwgZnJvbUFubm90YXRpb25PclR5cGVPckRlZmF1bHQsIGZyb21EZWZpbml0aW9uT3JEZWZhdWx0LCB9IGZyb20gJy4vcmVzb3VyY2UnO1xuZXhwb3J0IHsgRXZlbnRBZ2dyZWdhdG9yLCBJRXZlbnRBZ2dyZWdhdG9yLCB9IGZyb20gJy4vZXZlbnRhZ2dyZWdhdG9yJztcbmV4cG9ydCB7IGlzQXJyYXlJbmRleCwgY2FtZWxDYXNlLCBrZWJhYkNhc2UsIHBhc2NhbENhc2UsIHRvQXJyYXksIG5leHRJZCwgcmVzZXRJZCwgY29tcGFyZU51bWJlciwgbWVyZ2VEaXN0aW5jdCwgaXNOdW1iZXJPckJpZ0ludCwgaXNTdHJpbmdPckRhdGUsIGJvdW5kLCBtZXJnZUFycmF5cywgbWVyZ2VPYmplY3RzLCBmaXJzdERlZmluZWQsIGdldFByb3RvdHlwZUNoYWluLCBpc09iamVjdCwgaXNOdWxsT3JVbmRlZmluZWQsIGlzTmF0aXZlRnVuY3Rpb24sIH0gZnJvbSAnLi9mdW5jdGlvbnMnO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIiwiaW1wb3J0IHsgX19kZWNvcmF0ZSwgX19tZXRhZGF0YSwgX19wYXJhbSB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgdG9Mb29rdXAgfSBmcm9tICcuL2Z1bmN0aW9ucyc7XG5pbXBvcnQgeyBESSwgYWxsLCBSZWdpc3RyYXRpb24gfSBmcm9tICcuL2RpJztcbi8qKlxuICogRmxhZ3MgdG8gZW5hYmxlL2Rpc2FibGUgY29sb3IgdXNhZ2UgaW4gdGhlIGxvZ2dpbmcgb3V0cHV0LlxuICovXG5leHBvcnQgdmFyIENvbG9yT3B0aW9ucztcbihmdW5jdGlvbiAoQ29sb3JPcHRpb25zKSB7XG4gICAgLyoqXG4gICAgICogRG8gbm90IHVzZSBBU0NJSSBjb2xvciBjb2RlcyBpbiBsb2dnaW5nIG91dHB1dC5cbiAgICAgKi9cbiAgICBDb2xvck9wdGlvbnNbQ29sb3JPcHRpb25zW1wibm9Db2xvcnNcIl0gPSAwXSA9IFwibm9Db2xvcnNcIjtcbiAgICAvKipcbiAgICAgKiBVc2UgQVNDSUkgY29sb3IgY29kZXMgaW4gbG9nZ2luZyBvdXRwdXQuIEJ5IGRlZmF1bHQsIHRpbWVzdGFtcHMgYW5kIHRoZSBUUkMgYW5kIERCRyBwcmVmaXggYXJlIGNvbG9yZWQgZ3JleS4gSU5GIHdoaXRlLCBXUk4geWVsbG93LCBhbmQgRVJSIGFuZCBGVEwgcmVkLlxuICAgICAqL1xuICAgIENvbG9yT3B0aW9uc1tDb2xvck9wdGlvbnNbXCJjb2xvcnNcIl0gPSAxXSA9IFwiY29sb3JzXCI7XG59KShDb2xvck9wdGlvbnMgfHwgKENvbG9yT3B0aW9ucyA9IHt9KSk7XG5leHBvcnQgY29uc3QgSUxvZ0NvbmZpZyA9IERJLmNyZWF0ZUludGVyZmFjZSgnSUxvZ0NvbmZpZycpLndpdGhEZWZhdWx0KHggPT4geC5pbnN0YW5jZShuZXcgTG9nQ29uZmlnKDAgLyogbm9Db2xvcnMgKi8sIDMgLyogd2FybiAqLykpKTtcbmV4cG9ydCBjb25zdCBJU2luayA9IERJLmNyZWF0ZUludGVyZmFjZSgnSVNpbmsnKS5ub0RlZmF1bHQoKTtcbmV4cG9ydCBjb25zdCBJTG9nRXZlbnRGYWN0b3J5ID0gREkuY3JlYXRlSW50ZXJmYWNlKCdJTG9nRXZlbnRGYWN0b3J5Jykud2l0aERlZmF1bHQoeCA9PiB4LnNpbmdsZXRvbihEZWZhdWx0TG9nRXZlbnRGYWN0b3J5KSk7XG5leHBvcnQgY29uc3QgSUxvZ2dlciA9IERJLmNyZWF0ZUludGVyZmFjZSgnSUxvZ2dlcicpLndpdGhEZWZhdWx0KHggPT4geC5zaW5nbGV0b24oRGVmYXVsdExvZ2dlcikpO1xuLy8gaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9BTlNJX2VzY2FwZV9jb2RlI2dyYXBoaWNzXG5leHBvcnQgY29uc3QgZm9ybWF0ID0gdG9Mb29rdXAoe1xuICAgIHJlZChzdHIpIHtcbiAgICAgICAgcmV0dXJuIGBcXHUwMDFiWzMxbSR7c3RyfVxcdTAwMWJbMzltYDtcbiAgICB9LFxuICAgIGdyZWVuKHN0cikge1xuICAgICAgICByZXR1cm4gYFxcdTAwMWJbMzJtJHtzdHJ9XFx1MDAxYlszOW1gO1xuICAgIH0sXG4gICAgeWVsbG93KHN0cikge1xuICAgICAgICByZXR1cm4gYFxcdTAwMWJbMzNtJHtzdHJ9XFx1MDAxYlszOW1gO1xuICAgIH0sXG4gICAgYmx1ZShzdHIpIHtcbiAgICAgICAgcmV0dXJuIGBcXHUwMDFiWzM0bSR7c3RyfVxcdTAwMWJbMzltYDtcbiAgICB9LFxuICAgIG1hZ2VudGEoc3RyKSB7XG4gICAgICAgIHJldHVybiBgXFx1MDAxYlszNW0ke3N0cn1cXHUwMDFiWzM5bWA7XG4gICAgfSxcbiAgICBjeWFuKHN0cikge1xuICAgICAgICByZXR1cm4gYFxcdTAwMWJbMzZtJHtzdHJ9XFx1MDAxYlszOW1gO1xuICAgIH0sXG4gICAgd2hpdGUoc3RyKSB7XG4gICAgICAgIHJldHVybiBgXFx1MDAxYlszN20ke3N0cn1cXHUwMDFiWzM5bWA7XG4gICAgfSxcbiAgICBncmV5KHN0cikge1xuICAgICAgICByZXR1cm4gYFxcdTAwMWJbOTBtJHtzdHJ9XFx1MDAxYlszOW1gO1xuICAgIH0sXG59KTtcbmV4cG9ydCBjbGFzcyBMb2dDb25maWcge1xuICAgIGNvbnN0cnVjdG9yKGNvbG9yT3B0aW9ucywgbGV2ZWwpIHtcbiAgICAgICAgdGhpcy5jb2xvck9wdGlvbnMgPSBjb2xvck9wdGlvbnM7XG4gICAgICAgIHRoaXMubGV2ZWwgPSBsZXZlbDtcbiAgICB9XG59XG5jb25zdCBnZXRMb2dMZXZlbFN0cmluZyA9IChmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgbG9nTGV2ZWxTdHJpbmcgPSBbXG4gICAgICAgIHRvTG9va3VwKHtcbiAgICAgICAgICAgIFRSQzogJ1RSQycsXG4gICAgICAgICAgICBEQkc6ICdEQkcnLFxuICAgICAgICAgICAgSU5GOiAnSU5GJyxcbiAgICAgICAgICAgIFdSTjogJ1dSTicsXG4gICAgICAgICAgICBFUlI6ICdFUlInLFxuICAgICAgICAgICAgRlRMOiAnRlRMJyxcbiAgICAgICAgICAgIFFRUTogJz8/PycsXG4gICAgICAgIH0pLFxuICAgICAgICB0b0xvb2t1cCh7XG4gICAgICAgICAgICBUUkM6IGZvcm1hdC5ncmV5KCdUUkMnKSxcbiAgICAgICAgICAgIERCRzogZm9ybWF0LmdyZXkoJ0RCRycpLFxuICAgICAgICAgICAgSU5GOiBmb3JtYXQud2hpdGUoJ0lORicpLFxuICAgICAgICAgICAgV1JOOiBmb3JtYXQueWVsbG93KCdXUk4nKSxcbiAgICAgICAgICAgIEVSUjogZm9ybWF0LnJlZCgnRVJSJyksXG4gICAgICAgICAgICBGVEw6IGZvcm1hdC5yZWQoJ0ZUTCcpLFxuICAgICAgICAgICAgUVFROiBmb3JtYXQuZ3JleSgnPz8/JyksXG4gICAgICAgIH0pLFxuICAgIF07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChsZXZlbCwgY29sb3JPcHRpb25zKSB7XG4gICAgICAgIGlmIChsZXZlbCA8PSAwIC8qIHRyYWNlICovKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9nTGV2ZWxTdHJpbmdbY29sb3JPcHRpb25zXS5UUkM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxldmVsIDw9IDEgLyogZGVidWcgKi8pIHtcbiAgICAgICAgICAgIHJldHVybiBsb2dMZXZlbFN0cmluZ1tjb2xvck9wdGlvbnNdLkRCRztcbiAgICAgICAgfVxuICAgICAgICBpZiAobGV2ZWwgPD0gMiAvKiBpbmZvICovKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9nTGV2ZWxTdHJpbmdbY29sb3JPcHRpb25zXS5JTkY7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxldmVsIDw9IDMgLyogd2FybiAqLykge1xuICAgICAgICAgICAgcmV0dXJuIGxvZ0xldmVsU3RyaW5nW2NvbG9yT3B0aW9uc10uV1JOO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsZXZlbCA8PSA0IC8qIGVycm9yICovKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9nTGV2ZWxTdHJpbmdbY29sb3JPcHRpb25zXS5FUlI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxldmVsIDw9IDUgLyogZmF0YWwgKi8pIHtcbiAgICAgICAgICAgIHJldHVybiBsb2dMZXZlbFN0cmluZ1tjb2xvck9wdGlvbnNdLkZUTDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbG9nTGV2ZWxTdHJpbmdbY29sb3JPcHRpb25zXS5RUVE7XG4gICAgfTtcbn0pKCk7XG5mdW5jdGlvbiBnZXRTY29wZVN0cmluZyhzY29wZSwgY29sb3JPcHRpb25zKSB7XG4gICAgaWYgKGNvbG9yT3B0aW9ucyA9PT0gMCAvKiBub0NvbG9ycyAqLykge1xuICAgICAgICByZXR1cm4gc2NvcGUuam9pbignLicpO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L3VuYm91bmQtbWV0aG9kXG4gICAgcmV0dXJuIHNjb3BlLm1hcChmb3JtYXQuY3lhbikuam9pbignLicpO1xufVxuZnVuY3Rpb24gZ2V0SXNvU3RyaW5nKHRpbWVzdGFtcCwgY29sb3JPcHRpb25zKSB7XG4gICAgaWYgKGNvbG9yT3B0aW9ucyA9PT0gMCAvKiBub0NvbG9ycyAqLykge1xuICAgICAgICByZXR1cm4gbmV3IERhdGUodGltZXN0YW1wKS50b0lTT1N0cmluZygpO1xuICAgIH1cbiAgICByZXR1cm4gZm9ybWF0LmdyZXkobmV3IERhdGUodGltZXN0YW1wKS50b0lTT1N0cmluZygpKTtcbn1cbmV4cG9ydCBjbGFzcyBEZWZhdWx0TG9nRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKHNldmVyaXR5LCBtZXNzYWdlLCBvcHRpb25hbFBhcmFtcywgc2NvcGUsIGNvbG9yT3B0aW9ucywgdGltZXN0YW1wKSB7XG4gICAgICAgIHRoaXMuc2V2ZXJpdHkgPSBzZXZlcml0eTtcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcbiAgICAgICAgdGhpcy5vcHRpb25hbFBhcmFtcyA9IG9wdGlvbmFsUGFyYW1zO1xuICAgICAgICB0aGlzLnNjb3BlID0gc2NvcGU7XG4gICAgICAgIHRoaXMuY29sb3JPcHRpb25zID0gY29sb3JPcHRpb25zO1xuICAgICAgICB0aGlzLnRpbWVzdGFtcCA9IHRpbWVzdGFtcDtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIGNvbnN0IHsgc2V2ZXJpdHksIG1lc3NhZ2UsIHNjb3BlLCBjb2xvck9wdGlvbnMsIHRpbWVzdGFtcCB9ID0gdGhpcztcbiAgICAgICAgaWYgKHNjb3BlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGAke2dldElzb1N0cmluZyh0aW1lc3RhbXAsIGNvbG9yT3B0aW9ucyl9IFske2dldExvZ0xldmVsU3RyaW5nKHNldmVyaXR5LCBjb2xvck9wdGlvbnMpfV0gJHttZXNzYWdlfWA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGAke2dldElzb1N0cmluZyh0aW1lc3RhbXAsIGNvbG9yT3B0aW9ucyl9IFske2dldExvZ0xldmVsU3RyaW5nKHNldmVyaXR5LCBjb2xvck9wdGlvbnMpfSAke2dldFNjb3BlU3RyaW5nKHNjb3BlLCBjb2xvck9wdGlvbnMpfV0gJHttZXNzYWdlfWA7XG4gICAgfVxufVxubGV0IERlZmF1bHRMb2dFdmVudEZhY3RvcnkgPSBjbGFzcyBEZWZhdWx0TG9nRXZlbnRGYWN0b3J5IHtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICAgICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgfVxuICAgIGNyZWF0ZUxvZ0V2ZW50KGxvZ2dlciwgbGV2ZWwsIG1lc3NhZ2UsIG9wdGlvbmFsUGFyYW1zKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGVmYXVsdExvZ0V2ZW50KGxldmVsLCBtZXNzYWdlLCBvcHRpb25hbFBhcmFtcywgbG9nZ2VyLnNjb3BlLCB0aGlzLmNvbmZpZy5jb2xvck9wdGlvbnMsIERhdGUubm93KCkpO1xuICAgIH1cbn07XG5EZWZhdWx0TG9nRXZlbnRGYWN0b3J5ID0gX19kZWNvcmF0ZShbXG4gICAgX19wYXJhbSgwLCBJTG9nQ29uZmlnKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW09iamVjdF0pXG5dLCBEZWZhdWx0TG9nRXZlbnRGYWN0b3J5KTtcbmV4cG9ydCB7IERlZmF1bHRMb2dFdmVudEZhY3RvcnkgfTtcbmV4cG9ydCBjbGFzcyBDb25zb2xlU2luayB7XG4gICAgY29uc3RydWN0b3IoJGNvbnNvbGUpIHtcbiAgICAgICAgdGhpcy5lbWl0ID0gZnVuY3Rpb24gZW1pdChldmVudCkge1xuICAgICAgICAgICAgY29uc3Qgb3B0aW9uYWxQYXJhbXMgPSBldmVudC5vcHRpb25hbFBhcmFtcztcbiAgICAgICAgICAgIGlmIChvcHRpb25hbFBhcmFtcyA9PT0gdm9pZCAwIHx8IG9wdGlvbmFsUGFyYW1zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoZXZlbnQuc2V2ZXJpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwIC8qIHRyYWNlICovOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIDEgLyogZGVidWcgKi86XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJGNvbnNvbGUuZGVidWcoZXZlbnQudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMiAvKiBpbmZvICovOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRjb25zb2xlLmluZm8oZXZlbnQudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMyAvKiB3YXJuICovOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRjb25zb2xlLndhcm4oZXZlbnQudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNCAvKiBlcnJvciAqLzpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1IC8qIGZhdGFsICovOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRjb25zb2xlLmVycm9yKGV2ZW50LnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoZXZlbnQuc2V2ZXJpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwIC8qIHRyYWNlICovOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIDEgLyogZGVidWcgKi86XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJGNvbnNvbGUuZGVidWcoZXZlbnQudG9TdHJpbmcoKSwgLi4ub3B0aW9uYWxQYXJhbXMpO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDIgLyogaW5mbyAqLzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkY29uc29sZS5pbmZvKGV2ZW50LnRvU3RyaW5nKCksIC4uLm9wdGlvbmFsUGFyYW1zKTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzIC8qIHdhcm4gKi86XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJGNvbnNvbGUud2FybihldmVudC50b1N0cmluZygpLCAuLi5vcHRpb25hbFBhcmFtcyk7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNCAvKiBlcnJvciAqLzpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1IC8qIGZhdGFsICovOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRjb25zb2xlLmVycm9yKGV2ZW50LnRvU3RyaW5nKCksIC4uLm9wdGlvbmFsUGFyYW1zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxufVxubGV0IERlZmF1bHRMb2dnZXIgPSBjbGFzcyBEZWZhdWx0TG9nZ2VyIHtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcsIGZhY3RvcnksIHNpbmtzLCBzY29wZSA9IFtdLCBwYXJlbnQgPSBudWxsKSB7XG4gICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgICAgICB0aGlzLmZhY3RvcnkgPSBmYWN0b3J5O1xuICAgICAgICB0aGlzLnNpbmtzID0gc2lua3M7XG4gICAgICAgIHRoaXMuc2NvcGUgPSBzY29wZTtcbiAgICAgICAgdGhpcy5zY29wZWRMb2dnZXJzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgaWYgKHBhcmVudCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5yb290ID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gdGhpcztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucm9vdCA9IHBhcmVudC5yb290O1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2lua3NMZW4gPSBzaW5rcy5sZW5ndGg7XG4gICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgY29uc3QgZW1pdCA9IChsZXZlbCwgbXNnT3JHZXRNc2csIG9wdGlvbmFsUGFyYW1zKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gdHlwZW9mIG1zZ09yR2V0TXNnID09PSAnZnVuY3Rpb24nID8gbXNnT3JHZXRNc2coKSA6IG1zZ09yR2V0TXNnO1xuICAgICAgICAgICAgY29uc3QgZXZlbnQgPSBmYWN0b3J5LmNyZWF0ZUxvZ0V2ZW50KHRoaXMsIGxldmVsLCBtZXNzYWdlLCBvcHRpb25hbFBhcmFtcyk7XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgc2lua3NMZW47ICsraSkge1xuICAgICAgICAgICAgICAgIHNpbmtzW2ldLmVtaXQoZXZlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnRyYWNlID0gZnVuY3Rpb24gdHJhY2UobWVzc2FnZU9yR2V0TWVzc2FnZSwgLi4ub3B0aW9uYWxQYXJhbXMpIHtcbiAgICAgICAgICAgIGlmIChjb25maWcubGV2ZWwgPD0gMCAvKiB0cmFjZSAqLykge1xuICAgICAgICAgICAgICAgIGVtaXQoMCAvKiB0cmFjZSAqLywgbWVzc2FnZU9yR2V0TWVzc2FnZSwgb3B0aW9uYWxQYXJhbXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmRlYnVnID0gZnVuY3Rpb24gZGVidWcobWVzc2FnZU9yR2V0TWVzc2FnZSwgLi4ub3B0aW9uYWxQYXJhbXMpIHtcbiAgICAgICAgICAgIGlmIChjb25maWcubGV2ZWwgPD0gMSAvKiBkZWJ1ZyAqLykge1xuICAgICAgICAgICAgICAgIGVtaXQoMSAvKiBkZWJ1ZyAqLywgbWVzc2FnZU9yR2V0TWVzc2FnZSwgb3B0aW9uYWxQYXJhbXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmluZm8gPSBmdW5jdGlvbiBpbmZvKG1lc3NhZ2VPckdldE1lc3NhZ2UsIC4uLm9wdGlvbmFsUGFyYW1zKSB7XG4gICAgICAgICAgICBpZiAoY29uZmlnLmxldmVsIDw9IDIgLyogaW5mbyAqLykge1xuICAgICAgICAgICAgICAgIGVtaXQoMiAvKiBpbmZvICovLCBtZXNzYWdlT3JHZXRNZXNzYWdlLCBvcHRpb25hbFBhcmFtcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMud2FybiA9IGZ1bmN0aW9uIHdhcm4obWVzc2FnZU9yR2V0TWVzc2FnZSwgLi4ub3B0aW9uYWxQYXJhbXMpIHtcbiAgICAgICAgICAgIGlmIChjb25maWcubGV2ZWwgPD0gMyAvKiB3YXJuICovKSB7XG4gICAgICAgICAgICAgICAgZW1pdCgzIC8qIHdhcm4gKi8sIG1lc3NhZ2VPckdldE1lc3NhZ2UsIG9wdGlvbmFsUGFyYW1zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5lcnJvciA9IGZ1bmN0aW9uIGVycm9yKG1lc3NhZ2VPckdldE1lc3NhZ2UsIC4uLm9wdGlvbmFsUGFyYW1zKSB7XG4gICAgICAgICAgICBpZiAoY29uZmlnLmxldmVsIDw9IDQgLyogZXJyb3IgKi8pIHtcbiAgICAgICAgICAgICAgICBlbWl0KDQgLyogZXJyb3IgKi8sIG1lc3NhZ2VPckdldE1lc3NhZ2UsIG9wdGlvbmFsUGFyYW1zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5mYXRhbCA9IGZ1bmN0aW9uIGZhdGFsKG1lc3NhZ2VPckdldE1lc3NhZ2UsIC4uLm9wdGlvbmFsUGFyYW1zKSB7XG4gICAgICAgICAgICBpZiAoY29uZmlnLmxldmVsIDw9IDUgLyogZmF0YWwgKi8pIHtcbiAgICAgICAgICAgICAgICBlbWl0KDUgLyogZmF0YWwgKi8sIG1lc3NhZ2VPckdldE1lc3NhZ2UsIG9wdGlvbmFsUGFyYW1zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgc2NvcGVUbyhuYW1lKSB7XG4gICAgICAgIGNvbnN0IHNjb3BlZExvZ2dlcnMgPSB0aGlzLnNjb3BlZExvZ2dlcnM7XG4gICAgICAgIGxldCBzY29wZWRMb2dnZXIgPSBzY29wZWRMb2dnZXJzW25hbWVdO1xuICAgICAgICBpZiAoc2NvcGVkTG9nZ2VyID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIHNjb3BlZExvZ2dlciA9IHNjb3BlZExvZ2dlcnNbbmFtZV0gPSBuZXcgRGVmYXVsdExvZ2dlcih0aGlzLmNvbmZpZywgdGhpcy5mYWN0b3J5LCB0aGlzLnNpbmtzLCB0aGlzLnNjb3BlLmNvbmNhdChuYW1lKSwgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNjb3BlZExvZ2dlcjtcbiAgICB9XG59O1xuRGVmYXVsdExvZ2dlciA9IF9fZGVjb3JhdGUoW1xuICAgIF9fcGFyYW0oMCwgSUxvZ0NvbmZpZyksXG4gICAgX19wYXJhbSgxLCBJTG9nRXZlbnRGYWN0b3J5KSxcbiAgICBfX3BhcmFtKDIsIGFsbChJU2luaykpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0LCBPYmplY3QsIEFycmF5LCBBcnJheSwgT2JqZWN0XSlcbl0sIERlZmF1bHRMb2dnZXIpO1xuZXhwb3J0IHsgRGVmYXVsdExvZ2dlciB9O1xuLyoqXG4gKiBBIGJhc2ljIGBJTG9nZ2VyYCBjb25maWd1cmF0aW9uIHRoYXQgY29uZmlndXJlcyBhIHNpbmdsZSBgY29uc29sZWAgc2luayBiYXNlZCBvbiBwcm92aWRlZCBvcHRpb25zLlxuICpcbiAqIE5PVEU6IFlvdSAqbXVzdCogcmVnaXN0ZXIgdGhlIHJldHVybiB2YWx1ZSBvZiBgLmNyZWF0ZWAgd2l0aCB0aGUgY29udGFpbmVyIC8gYXUgaW5zdGFuY2UsIG5vdCB0aGlzIGBMb2dnZXJDb25maWd1cmF0aW9uYCBvYmplY3QgaXRzZWxmLlxuICpcbiAqIGBgYHRzXG4gKiAvLyBHT09EXG4gKiBjb250YWluZXIucmVnaXN0ZXIoTG9nZ2VyQ29uZmlndXJhdGlvbi5jcmVhdGUoY29uc29sZSkpXG4gKiAvLyBHT09EXG4gKiBjb250YWluZXIucmVnaXN0ZXIoTG9nZ2VyQ29uZmlndXJhdGlvbi5jcmVhdGUoY29uc29sZSwgTG9nTGV2ZWwuZGVidWcpKVxuICogLy8gR09PRFxuICogY29udGFpbmVyLnJlZ2lzdGVyKExvZ2dlckNvbmZpZ3VyYXRpb24uY3JlYXRlKHtcbiAqICAgZGVidWc6IFBMQVRGT1JNLm5vb3AsXG4gKiAgIGluZm86IFBMQVRGT1JNLm5vb3AsXG4gKiAgIHdhcm46IFBMQVRGT1JNLm5vb3AsXG4gKiAgIGVycm9yOiBtc2cgPT4ge1xuICogICAgIHRocm93IG5ldyBFcnJvcihtc2cpO1xuICogICB9XG4gKiB9LCBMb2dMZXZlbC5kZWJ1ZykpXG4gKlxuICogLy8gQkFEXG4gKiBjb250YWluZXIucmVnaXN0ZXIoTG9nZ2VyQ29uZmlndXJhdGlvbilcbiAqIGBgYFxuICovXG5leHBvcnQgY29uc3QgTG9nZ2VyQ29uZmlndXJhdGlvbiA9IHRvTG9va3VwKHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gJGNvbnNvbGUgLSBUaGUgYGNvbnNvbGVgIG9iamVjdCB0byB1c2UuIENhbiBiZSB0aGUgbmF0aXZlIGB3aW5kb3cuY29uc29sZWAgLyBgZ2xvYmFsLmNvbnNvbGVgLCBidXQgY2FuIGFsc28gYmUgYSB3cmFwcGVyIG9yIG1vY2sgdGhhdCBpbXBsZW1lbnRzIHRoZSBzYW1lIGludGVyZmFjZS5cbiAgICAgKiBAcGFyYW0gbGV2ZWwgLSBUaGUgZ2xvYmFsIGBMb2dMZXZlbGAgdG8gY29uZmlndXJlLiBEZWZhdWx0cyB0byBgd2FybmAgb3IgaGlnaGVyLlxuICAgICAqIEBwYXJhbSBjb2xvck9wdGlvbnMgLSBXaGV0aGVyIHRvIHVzZSBjb2xvcnMgb3Igbm90LiBEZWZhdWx0cyB0byBgbm9Db2xvcnNgLiBDb2xvcnMgYXJlIGVzcGVjaWFsbHkgbmljZSBpbiBub2RlanMgZW52aXJvbm1lbnRzIGJ1dCBkb24ndCBuZWNlc3NhcmlseSB3b3JrICh3ZWxsKSBpbiBhbGwgZW52aXJvbm1lbnRzLCBzdWNoIGFzIGJyb3dzZXJzLlxuICAgICAqL1xuICAgIGNyZWF0ZSgkY29uc29sZSwgbGV2ZWwgPSAzIC8qIHdhcm4gKi8sIGNvbG9yT3B0aW9ucyA9IDAgLyogbm9Db2xvcnMgKi8pIHtcbiAgICAgICAgcmV0dXJuIHRvTG9va3VwKHtcbiAgICAgICAgICAgIHJlZ2lzdGVyKGNvbnRhaW5lcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBjb250YWluZXIucmVnaXN0ZXIoUmVnaXN0cmF0aW9uLmluc3RhbmNlKElMb2dDb25maWcsIG5ldyBMb2dDb25maWcoY29sb3JPcHRpb25zLCBsZXZlbCkpLCBSZWdpc3RyYXRpb24uaW5zdGFuY2UoSVNpbmssIG5ldyBDb25zb2xlU2luaygkY29uc29sZSkpKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH0sXG59KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxvZ2dlci5qcy5tYXAiLCJmdW5jdGlvbiB0cmltRG90cyhhcnkpIHtcbiAgICBjb25zdCBsZW4gPSBhcnkubGVuZ3RoO1xuICAgIGxldCBpID0gMDtcbiAgICBsZXQgcGFydDtcbiAgICBmb3IgKDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgIHBhcnQgPSBhcnlbaV07XG4gICAgICAgIGlmIChwYXJ0ID09PSAnLicpIHtcbiAgICAgICAgICAgIGFyeS5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICBpIC09IDE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocGFydCA9PT0gJy4uJykge1xuICAgICAgICAgICAgLy8gSWYgYXQgdGhlIHN0YXJ0LCBvciBwcmV2aW91cyB2YWx1ZSBpcyBzdGlsbCAuLixcbiAgICAgICAgICAgIC8vIGtlZXAgdGhlbSBzbyB0aGF0IHdoZW4gY29udmVydGVkIHRvIGEgcGF0aCBpdCBtYXlcbiAgICAgICAgICAgIC8vIHN0aWxsIHdvcmsgd2hlbiBjb252ZXJ0ZWQgdG8gYSBwYXRoLCBldmVuIHRob3VnaFxuICAgICAgICAgICAgLy8gYXMgYW4gSUQgaXQgaXMgbGVzcyB0aGFuIGlkZWFsLiBJbiBsYXJnZXIgcG9pbnRcbiAgICAgICAgICAgIC8vIHJlbGVhc2VzLCBtYXkgYmUgYmV0dGVyIHRvIGp1c3Qga2ljayBvdXQgYW4gZXJyb3IuXG4gICAgICAgICAgICBpZiAoaSA9PT0gMCB8fCAoaSA9PT0gMSAmJiBhcnlbMl0gPT09ICcuLicpIHx8IGFyeVtpIC0gMV0gPT09ICcuLicpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpID4gMCkge1xuICAgICAgICAgICAgICAgIGFyeS5zcGxpY2UoaSAtIDEsIDIpO1xuICAgICAgICAgICAgICAgIGkgLT0gMjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogQ2FsY3VsYXRlcyBhIHBhdGggcmVsYXRpdmUgdG8gYSBmaWxlLlxuICpcbiAqIEBwYXJhbSBuYW1lIC0gVGhlIHJlbGF0aXZlIHBhdGguXG4gKiBAcGFyYW0gZmlsZSAtIFRoZSBmaWxlIHBhdGguXG4gKiBAcmV0dXJucyBUaGUgY2FsY3VsYXRlZCBwYXRoLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVsYXRpdmVUb0ZpbGUobmFtZSwgZmlsZSkge1xuICAgIGNvbnN0IGZpbGVQYXJ0cyA9ICFmaWxlID8gZmlsZSA6IGZpbGUuc3BsaXQoJy8nKTtcbiAgICBjb25zdCBuYW1lUGFydHMgPSBuYW1lLnRyaW0oKS5zcGxpdCgnLycpO1xuICAgIGlmIChuYW1lUGFydHNbMF0uc3RhcnRzV2l0aCgnLicpICYmIGZpbGVQYXJ0cykge1xuICAgICAgICAvLyBDb252ZXJ0IGZpbGUgdG8gYXJyYXksIGFuZCBsb3Agb2ZmIHRoZSBsYXN0IHBhcnQsXG4gICAgICAgIC8vIHNvIHRoYXQgLiBtYXRjaGVzIHRoYXQgJ2RpcmVjdG9yeScgYW5kIG5vdCBuYW1lIG9mIHRoZSBmaWxlJ3NcbiAgICAgICAgLy8gbW9kdWxlLiBGb3IgaW5zdGFuY2UsIGZpbGUgb2YgJ29uZS90d28vdGhyZWUnLCBtYXBzIHRvXG4gICAgICAgIC8vICdvbmUvdHdvL3RocmVlLmpzJywgYnV0IHdlIHdhbnQgdGhlIGRpcmVjdG9yeSwgJ29uZS90d28nIGZvclxuICAgICAgICAvLyB0aGlzIG5vcm1hbGl6YXRpb24uXG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRCYXNlUGFydHMgPSBmaWxlUGFydHMuc2xpY2UoMCwgZmlsZVBhcnRzLmxlbmd0aCAtIDEpO1xuICAgICAgICBuYW1lUGFydHMudW5zaGlmdCguLi5ub3JtYWxpemVkQmFzZVBhcnRzKTtcbiAgICB9XG4gICAgdHJpbURvdHMobmFtZVBhcnRzKTtcbiAgICByZXR1cm4gbmFtZVBhcnRzLmpvaW4oJy8nKTtcbn1cbi8qKlxuICogSm9pbnMgdHdvIHBhdGhzLlxuICpcbiAqIEBwYXJhbSBwYXRoMSAtIFRoZSBmaXJzdCBwYXRoLlxuICogQHBhcmFtIHBhdGgyIC0gVGhlIHNlY29uZCBwYXRoLlxuICogQHJldHVybnMgVGhlIGpvaW5lZCBwYXRoLlxuICovXG5leHBvcnQgZnVuY3Rpb24gam9pbihwYXRoMSwgcGF0aDIpIHtcbiAgICBpZiAoIXBhdGgxKSB7XG4gICAgICAgIHJldHVybiBwYXRoMjtcbiAgICB9XG4gICAgaWYgKCFwYXRoMikge1xuICAgICAgICByZXR1cm4gcGF0aDE7XG4gICAgfVxuICAgIGNvbnN0IHNjaGVtZU1hdGNoID0gL14oW14vXSo/OilcXC8vLmV4ZWMocGF0aDEpO1xuICAgIGNvbnN0IHNjaGVtZSA9IChzY2hlbWVNYXRjaCAmJiBzY2hlbWVNYXRjaC5sZW5ndGggPiAwKSA/IHNjaGVtZU1hdGNoWzFdIDogJyc7XG4gICAgcGF0aDEgPSBwYXRoMS5zbGljZShzY2hlbWUubGVuZ3RoKTtcbiAgICBsZXQgdXJsUHJlZml4O1xuICAgIGlmIChwYXRoMS5zdGFydHNXaXRoKCcvLy8nKSAmJiBzY2hlbWUgPT09ICdmaWxlOicpIHtcbiAgICAgICAgdXJsUHJlZml4ID0gJy8vLyc7XG4gICAgfVxuICAgIGVsc2UgaWYgKHBhdGgxLnN0YXJ0c1dpdGgoJy8vJykpIHtcbiAgICAgICAgdXJsUHJlZml4ID0gJy8vJztcbiAgICB9XG4gICAgZWxzZSBpZiAocGF0aDEuc3RhcnRzV2l0aCgnLycpKSB7XG4gICAgICAgIHVybFByZWZpeCA9ICcvJztcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHVybFByZWZpeCA9ICcnO1xuICAgIH1cbiAgICBjb25zdCB0cmFpbGluZ1NsYXNoID0gcGF0aDIuZW5kc1dpdGgoJy8nKSA/ICcvJyA6ICcnO1xuICAgIGNvbnN0IHVybDEgPSBwYXRoMS5zcGxpdCgnLycpO1xuICAgIGNvbnN0IHVybDIgPSBwYXRoMi5zcGxpdCgnLycpO1xuICAgIGNvbnN0IHVybDMgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMCwgaWkgPSB1cmwxLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgaWYgKHVybDFbaV0gPT09ICcuLicpIHtcbiAgICAgICAgICAgIHVybDMucG9wKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodXJsMVtpXSAhPT0gJy4nICYmIHVybDFbaV0gIT09ICcnKSB7XG4gICAgICAgICAgICB1cmwzLnB1c2godXJsMVtpXSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IDAsIGlpID0gdXJsMi5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIGlmICh1cmwyW2ldID09PSAnLi4nKSB7XG4gICAgICAgICAgICB1cmwzLnBvcCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHVybDJbaV0gIT09ICcuJyAmJiB1cmwyW2ldICE9PSAnJykge1xuICAgICAgICAgICAgdXJsMy5wdXNoKHVybDJbaV0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzY2hlbWUgKyB1cmxQcmVmaXggKyB1cmwzLmpvaW4oJy8nKSArIHRyYWlsaW5nU2xhc2g7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYXRoLmpzLm1hcCIsImZ1bmN0aW9uICRub29wKCkgeyByZXR1cm47IH1cbmNvbnN0ICRnbG9iYWwgPSAoZnVuY3Rpb24gKCkge1xuICAgIGlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gZ2xvYmFsO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIHdpbmRvdztcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gTm90IGFsbCBlbnZpcm9ubWVudHMgYWxsb3cgZXZhbCBhbmQgRnVuY3Rpb24uIFVzZSBvbmx5IGFzIGEgbGFzdCByZXNvcnQ6XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1uZXctZnVuY1xuICAgICAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG4gICAgfVxuICAgIGNhdGNoIChfYSkge1xuICAgICAgICAvLyBJZiBhbGwgZmFpbHMsIGdpdmUgdXAgYW5kIGNyZWF0ZSBhbiBvYmplY3QuXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvY29uc2lzdGVudC10eXBlLWFzc2VydGlvbnNcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIH1cbn0pKCk7XG5jb25zdCBpc0Jyb3dzZXJMaWtlID0gKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnXG4gICAgJiYgdHlwZW9mIHdpbmRvdy5kb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcpO1xuY29uc3QgaXNXZWJXb3JrZXJMaWtlID0gKHR5cGVvZiBzZWxmID09PSAnb2JqZWN0J1xuICAgICYmIHNlbGYuY29uc3RydWN0b3IgIT0gbnVsbFxuICAgICYmIHNlbGYuY29uc3RydWN0b3IubmFtZSA9PT0gJ0RlZGljYXRlZFdvcmtlckdsb2JhbFNjb3BlJyk7XG5jb25zdCBpc05vZGVMaWtlID0gKHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJ1xuICAgICYmIHByb2Nlc3MudmVyc2lvbnMgIT0gbnVsbFxuICAgICYmIHByb2Nlc3MudmVyc2lvbnMubm9kZSAhPSBudWxsKTtcbi8vIHBlcmZvcm1hbmNlLm5vdyBwb2x5ZmlsbCBmb3Igbm9uLWJyb3dzZXIgZW52cyBiYXNlZCBvbiBodHRwczovL2dpdGh1Yi5jb20vbXlybmUvcGVyZm9ybWFuY2Utbm93XG5jb25zdCAkbm93ID0gKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgX2EsIF9iO1xuICAgIGxldCBnZXROYW5vU2Vjb25kcztcbiAgICBsZXQgaHJ0aW1lO1xuICAgIGxldCBtb2R1bGVMb2FkVGltZTtcbiAgICBsZXQgbm9kZUxvYWRUaW1lO1xuICAgIGxldCB1cFRpbWU7XG4gICAgaWYgKCgoX2EgPSAkZ2xvYmFsLnBlcmZvcm1hbmNlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Eubm93KSAhPSBudWxsKSB7XG4gICAgICAgIGNvbnN0ICRwZXJmb3JtYW5jZSA9ICRnbG9iYWwucGVyZm9ybWFuY2U7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBlbHNlIGlmICgoKF9iID0gJGdsb2JhbC5wcm9jZXNzKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuaHJ0aW1lKSAhPSBudWxsKSB7XG4gICAgICAgIGNvbnN0IG5vdyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAoZ2V0TmFub1NlY29uZHMoKSAtIG5vZGVMb2FkVGltZSkgLyAxZTY7XG4gICAgICAgIH07XG4gICAgICAgIGhydGltZSA9ICRnbG9iYWwucHJvY2Vzcy5ocnRpbWU7XG4gICAgICAgIGdldE5hbm9TZWNvbmRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY29uc3QgaHIgPSBocnRpbWUoKTtcbiAgICAgICAgICAgIHJldHVybiBoclswXSAqIDFlOSArIGhyWzFdO1xuICAgICAgICB9O1xuICAgICAgICBtb2R1bGVMb2FkVGltZSA9IGdldE5hbm9TZWNvbmRzKCk7XG4gICAgICAgIHVwVGltZSA9ICRnbG9iYWwucHJvY2Vzcy51cHRpbWUoKSAqIDFlOTtcbiAgICAgICAgbm9kZUxvYWRUaW1lID0gbW9kdWxlTG9hZFRpbWUgLSB1cFRpbWU7XG4gICAgICAgIHJldHVybiBub3c7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBub3cgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gRGF0ZS5ub3coKSAtIG5vZGVMb2FkVGltZTtcbiAgICAgICAgfTtcbiAgICAgICAgbm9kZUxvYWRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgcmV0dXJuIG5vdztcbiAgICB9XG59KSgpO1xuY29uc3QgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuY29uc3QgZW1wdHlBcnJheSA9IE9iamVjdC5mcmVlemUoW10pO1xuY29uc3QgZW1wdHlPYmplY3QgPSBPYmplY3QuZnJlZXplKHt9KTtcbmNvbnN0ICRQTEFURk9STSA9IHtcbiAgICAvKipcbiAgICAgKiBgdHJ1ZWAgaWYgdGhlcmUgaXMgYSBgd2luZG93YCB2YXJpYWJsZSBpbiB0aGUgZ2xvYmFsIHNjb3BlIHdpdGggYSBgZG9jdW1lbnRgIHByb3BlcnR5LlxuICAgICAqXG4gICAgICogTk9URTogdGhpcyBkb2VzIG5vdCBndWFyYW50ZWUgdGhhdCB0aGUgY29kZSBpcyBhY3R1YWxseSBydW5uaW5nIGluIGEgYnJvd3NlciwgYXMgc29tZSBsaWJyYXJpZXMgdGFtcGVyIHdpdGggZ2xvYmFscy5cbiAgICAgKiBUaGUgb25seSBjb25jbHVzaW9uIHRoYXQgY2FuIGJlIGRyYXduIGlzIHRoYXQgdGhlIGB3aW5kb3dgIGdsb2JhbCBpcyBhdmFpbGFibGUgYW5kIGxpa2VseSBiZWhhdmVzIHNpbWlsYXIgdG8gaG93IGl0IHdvdWxkIGluIGEgYnJvd3Nlci5cbiAgICAgKi9cbiAgICBpc0Jyb3dzZXJMaWtlLFxuICAgIC8qKlxuICAgICAqIGB0cnVlYCBpZiB0aGVyZSBpcyBhIGBzZWxmYCB2YXJpYWJsZSAob2YgdHlwZSBgb2JqZWN0YCkgaW4gdGhlIGdsb2JhbCBzY29wZSB3aXRoIGNvbnN0cnVjdG9yIG5hbWUgYCdEZWRpY2F0ZWRXb3JrZXJHbG9iYWxTY29wZSdgLlxuICAgICAqXG4gICAgICogTk9URTogdGhpcyBkb2VzIG5vdCBndWFyYW50ZWUgdGhhdCB0aGUgY29kZSBpcyBhY3R1YWxseSBydW5uaW5nIGluIGEgd2ViIHdvcmtlciwgYXMgc29tZSBsaWJyYXJpZXMgdGFtcGVyIHdpdGggZ2xvYmFscy5cbiAgICAgKiBUaGUgb25seSBjb25jbHVzaW9uIHRoYXQgY2FuIGJlIGRyYXduIGlzIHRoYXQgdGhlIGBzZWxmYCBnbG9iYWwgaXMgYXZhaWxhYmxlIGFuZCBsaWtlbHkgYmVoYXZlcyBzaW1pbGFyIHRvIGhvdyBpdCB3b3VsZCBpbiBhIHdlYiB3b3JrZXIuXG4gICAgICovXG4gICAgaXNXZWJXb3JrZXJMaWtlLFxuICAgIC8qKlxuICAgICAqIGB0cnVlYCBpZiB0aGVyZSBpcyBhIGBwcm9jZXNzYCB2YXJpYWJsZSBpbiB0aGUgZ2xvYmFsIHNjb3BlIHdpdGggYSBgdmVyc2lvbnNgIHByb3BlcnR5IHdoaWNoIGhhcyBhIGBub2RlYCBwcm9wZXJ0eS5cbiAgICAgKlxuICAgICAqIE5PVEU6IHRoaXMgaXMgbm90IGEgZ3VhcmFudGVlIHRoYXQgdGhlIGNvZGUgaXMgYWN0dWFsbHkgcnVubmluZyBpbiBub2RlanMsIGFzIHNvbWUgbGlicmFyaWVzIHRhbXBlciB3aXRoIGdsb2JhbHMuXG4gICAgICogVGhlIG9ubHkgY29uY2x1c2lvbiB0aGF0IGNhbiBiZSBkcmF3biBpcyB0aGF0IHRoZSBgcHJvY2Vzc2AgZ2xvYmFsIGlzIGF2YWlsYWJsZSBhbmQgbGlrZWx5IGJlaGF2ZXMgc2ltaWxhciB0byBob3cgaXQgd291bGQgaW4gbm9kZWpzLlxuICAgICAqL1xuICAgIGlzTm9kZUxpa2UsXG4gICAgZ2xvYmFsOiAkZ2xvYmFsLFxuICAgIGVtcHR5QXJyYXksXG4gICAgZW1wdHlPYmplY3QsXG4gICAgbm9vcDogJG5vb3AsXG4gICAgbm93OiAkbm93LFxuICAgIGhhc093blByb3BlcnR5LFxuICAgIHJlc3RvcmUoKSB7XG4gICAgICAgIE9iamVjdC5hc3NpZ24oUExBVEZPUk0sICRQTEFURk9STSk7XG4gICAgfSxcbn07XG5leHBvcnQgY29uc3QgUExBVEZPUk0gPSB7IC4uLiRQTEFURk9STSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGxhdGZvcm0uanMubWFwIiwiaW1wb3J0IHsgUExBVEZPUk0gfSBmcm9tICcuL3BsYXRmb3JtJztcbmV4cG9ydCBjb25zdCBQcm9maWxlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgY29uc3Qgbm93ID0gUExBVEZPUk0ubm93O1xuICAgIGNvbnN0IHRpbWVycyA9IFtdO1xuICAgIGxldCBwcm9maWxlTWFwO1xuICAgIGNvbnN0IHByb2ZpbGVyID0ge1xuICAgICAgICBjcmVhdGVUaW1lcixcbiAgICAgICAgZW5hYmxlLFxuICAgICAgICBkaXNhYmxlLFxuICAgICAgICByZXBvcnQsXG4gICAgICAgIGVuYWJsZWQ6IGZhbHNlXG4gICAgfTtcbiAgICByZXR1cm4gcHJvZmlsZXI7XG4gICAgZnVuY3Rpb24gY3JlYXRlVGltZXIobmFtZSkge1xuICAgICAgICB0aW1lcnMucHVzaChuYW1lKTtcbiAgICAgICAgbGV0IGRlcHRoID0gMDtcbiAgICAgICAgbGV0IG1hcmsgPSAwO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZW50ZXIsXG4gICAgICAgICAgICBsZWF2ZVxuICAgICAgICB9O1xuICAgICAgICBmdW5jdGlvbiBlbnRlcigpIHtcbiAgICAgICAgICAgIGlmICgrK2RlcHRoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgbWFyayA9IG5vdygpO1xuICAgICAgICAgICAgICAgICsrcHJvZmlsZU1hcFtuYW1lXS50b3BMZXZlbENvdW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgKytwcm9maWxlTWFwW25hbWVdLnRvdGFsQ291bnQ7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gbGVhdmUoKSB7XG4gICAgICAgICAgICBpZiAoLS1kZXB0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHByb2ZpbGVNYXBbbmFtZV0uZHVyYXRpb24gKz0gKG5vdygpIC0gbWFyayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gZW5hYmxlKCkge1xuICAgICAgICBwcm9maWxlTWFwID0ge307XG4gICAgICAgIGZvciAoY29uc3QgdGltZXIgb2YgdGltZXJzKSB7XG4gICAgICAgICAgICBwcm9maWxlTWFwW3RpbWVyXSA9IHtcbiAgICAgICAgICAgICAgICBuYW1lOiB0aW1lcixcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMCxcbiAgICAgICAgICAgICAgICB0b3BMZXZlbENvdW50OiAwLFxuICAgICAgICAgICAgICAgIHRvdGFsQ291bnQ6IDBcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcHJvZmlsZXIuZW5hYmxlZCA9IHRydWU7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGRpc2FibGUoKSB7XG4gICAgICAgIHByb2ZpbGVyLmVuYWJsZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcmVwb3J0KGNiKSB7XG4gICAgICAgIE9iamVjdC5rZXlzKHByb2ZpbGVNYXApLm1hcChrZXkgPT4gcHJvZmlsZU1hcFtrZXldKS5zb3J0KChhLCBiKSA9PiBiLmR1cmF0aW9uIC0gYS5kdXJhdGlvbikuZm9yRWFjaChwID0+IHtcbiAgICAgICAgICAgIGNiKHAubmFtZSwgcC5kdXJhdGlvbiwgcC50b3BMZXZlbENvdW50LCBwLnRvdGFsQ291bnQpO1xuICAgICAgICB9KTtcbiAgICB9XG59KSgpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHJvZmlsZXIuanMubWFwIiwiZXhwb3J0IHZhciBMb2dMZXZlbDtcbihmdW5jdGlvbiAoTG9nTGV2ZWwpIHtcbiAgICAvKipcbiAgICAgKiBUaGUgbW9zdCBkZXRhaWxlZCBpbmZvcm1hdGlvbiBhYm91dCBpbnRlcm5hbCBhcHAgc3RhdGUuXG4gICAgICpcbiAgICAgKiBEaXNhYmxlZCBieSBkZWZhdWx0IGFuZCBzaG91bGQgbmV2ZXIgYmUgZW5hYmxlZCBpbiBhIHByb2R1Y3Rpb24gZW52aXJvbm1lbnQuXG4gICAgICovXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJ0cmFjZVwiXSA9IDBdID0gXCJ0cmFjZVwiO1xuICAgIC8qKlxuICAgICAqIEluZm9ybWF0aW9uIHRoYXQgaXMgdXNlZnVsIGZvciBkZWJ1Z2dpbmcgZHVyaW5nIGRldmVsb3BtZW50IGFuZCBoYXMgbm8gbG9uZy10ZXJtIHZhbHVlLlxuICAgICAqL1xuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiZGVidWdcIl0gPSAxXSA9IFwiZGVidWdcIjtcbiAgICAvKipcbiAgICAgKiBJbmZvcm1hdGlvbiBhYm91dCB0aGUgZ2VuZXJhbCBmbG93IG9mIHRoZSBhcHBsaWNhdGlvbiB0aGF0IGhhcyBsb25nLXRlcm0gdmFsdWUuXG4gICAgICovXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJpbmZvXCJdID0gMl0gPSBcImluZm9cIjtcbiAgICAvKipcbiAgICAgKiBVbmV4cGVjdGVkIGNpcmN1bXN0YW5jZXMgdGhhdCByZXF1aXJlIGF0dGVudGlvbiBidXQgZG8gbm90IG90aGVyd2lzZSBjYXVzZSB0aGUgY3VycmVudCBmbG93IG9mIGV4ZWN1dGlvbiB0byBzdG9wLlxuICAgICAqL1xuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wid2FyblwiXSA9IDNdID0gXCJ3YXJuXCI7XG4gICAgLyoqXG4gICAgICogVW5leHBlY3RlZCBjaXJjdW1zdGFuY2VzIHRoYXQgY2F1c2UgdGhlIGZsb3cgb2YgZXhlY3V0aW9uIGluIHRoZSBjdXJyZW50IGFjdGl2aXR5IHRvIHN0b3AgYnV0IGRvIG5vdCBjYXVzZSBhbiBhcHAtd2lkZSBmYWlsdXJlLlxuICAgICAqL1xuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiZXJyb3JcIl0gPSA0XSA9IFwiZXJyb3JcIjtcbiAgICAvKipcbiAgICAgKiBVbmV4cGVjdGVkIGNpcmN1bXN0YW5jZXMgdGhhdCBjYXVzZSBhbiBhcHAtd2lkZSBmYWlsdXJlIG9yIG90aGVyd2lzZSByZXF1aXJlIGltbWVkaWF0ZSBhdHRlbnRpb24uXG4gICAgICovXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJmYXRhbFwiXSA9IDVdID0gXCJmYXRhbFwiO1xuICAgIC8qKlxuICAgICAqIE5vIG1lc3NhZ2VzIHNob3VsZCBiZSB3cml0dGVuLlxuICAgICAqL1xuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wibm9uZVwiXSA9IDZdID0gXCJub25lXCI7XG59KShMb2dMZXZlbCB8fCAoTG9nTGV2ZWwgPSB7fSkpO1xuZXhwb3J0IGNvbnN0IFJlcG9ydGVyID0ge1xuICAgIGxldmVsOiAzIC8qIHdhcm4gKi8sXG4gICAgd3JpdGUoY29kZSwgLi4ucGFyYW1zKSB7IHJldHVybjsgfSxcbiAgICBlcnJvcihjb2RlLCAuLi5wYXJhbXMpIHsgcmV0dXJuIG5ldyBFcnJvcihgQ29kZSAke2NvZGV9YCk7IH1cbn07XG5leHBvcnQgY29uc3QgVHJhY2VyID0ge1xuICAgIC8qKlxuICAgICAqIEEgY29udmVuaWVuY2UgcHJvcGVydHkgZm9yIHRoZSB1c2VyIHRvIGNvbmRpdGlvbmFsbHkgY2FsbCB0aGUgdHJhY2VyLlxuICAgICAqIFRoaXMgc2F2ZXMgdW5uZWNlc3NhcnkgYG5vb3BgIGFuZCBgc2xpY2VgIGNhbGxzIGluIG5vbi1BT1Qgc2NlbmFyaW9zIGV2ZW4gaWYgZGVidWdnaW5nIGlzIGRpc2FibGVkLlxuICAgICAqIEluIEFPVCB0aGVzZSBjYWxscyB3aWxsIHNpbXBseSBiZSByZW1vdmVkIGVudGlyZWx5LlxuICAgICAqXG4gICAgICogVGhpcyBwcm9wZXJ0eSAqKm9ubHkqKiB0dXJucyBvbiB0cmFjaW5nIGlmIGBAYXVyZWxpYS9kZWJ1Z2AgaXMgaW5jbHVkZWQgYW5kIGNvbmZpZ3VyZWQgYXMgd2VsbC5cbiAgICAgKi9cbiAgICBlbmFibGVkOiBmYWxzZSxcbiAgICBsaXZlTG9nZ2luZ0VuYWJsZWQ6IGZhbHNlLFxuICAgIGxpdmVXcml0ZXI6IG51bGwsXG4gICAgLyoqXG4gICAgICogQ2FsbCB0aGlzIGF0IHRoZSBzdGFydCBvZiBhIG1ldGhvZC9mdW5jdGlvbi5cbiAgICAgKiBFYWNoIGNhbGwgdG8gYGVudGVyYCAqKm11c3QqKiBoYXZlIGFuIGFjY29tcGFueWluZyBjYWxsIHRvIGBsZWF2ZWAgZm9yIHRoZSB0cmFjZXIgdG8gd29yayBwcm9wZXJseS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvYmpOYW1lIC0gQW55IGh1bWFuLWZyaWVuZGx5IG5hbWUgdG8gaWRlbnRpZnkgdGhlIHRyYWNlZCBvYmplY3Qgd2l0aC5cbiAgICAgKiBAcGFyYW0gbWV0aG9kTmFtZSAtIEFueSBodW1hbi1mcmllbmRseSBuYW1lIHRvIGlkZW50aWZ5IHRoZSB0cmFjZWQgbWV0aG9kIHdpdGguXG4gICAgICogQHBhcmFtIGFyZ3MgLSBQYXNzIGluIGBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpYCB0byBhbHNvIHRyYWNlIHRoZSBwYXJhbWV0ZXJzLCBvciBgbnVsbGAgaWYgdGhpcyBpcyBub3QgbmVlZGVkICh0byBzYXZlIG1lbW9yeS9jcHUpXG4gICAgICovXG4gICAgZW50ZXIob2JqTmFtZSwgbWV0aG9kTmFtZSwgYXJncykgeyByZXR1cm47IH0sXG4gICAgLyoqXG4gICAgICogQ2FsbCB0aGlzIGF0IHRoZSBlbmQgb2YgYSBtZXRob2QvZnVuY3Rpb24uIFBvcHMgb25lIHRyYWNlIGl0ZW0gb2ZmIHRoZSBzdGFjay5cbiAgICAgKi9cbiAgICBsZWF2ZSgpIHsgcmV0dXJuOyB9LFxuICAgIC8qKlxuICAgICAqIFdyaXRlcyBvbmx5IHRoZSB0cmFjZSBpbmZvIGxlYWRpbmcgdXAgdG8gdGhlIGN1cnJlbnQgbWV0aG9kIGNhbGwuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gd3JpdGVyIC0gQW4gb2JqZWN0IHRvIHdyaXRlIHRoZSBvdXRwdXQgdG8uXG4gICAgICovXG4gICAgd3JpdGVTdGFjayh3cml0ZXIpIHsgcmV0dXJuOyB9LFxuICAgIC8qKlxuICAgICAqIFdyaXRlcyBhbGwgdHJhY2UgaW5mbyBjYXB0dXJlZCBzaW5jZSB0aGUgcHJldmlvdXMgZmx1c2hBbGwgb3BlcmF0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHdyaXRlciAtIEFuIG9iamVjdCB0byB3cml0ZSB0aGUgb3V0cHV0IHRvLiBDYW4gYmUgbnVsbCB0byBzaW1wbHkgcmVzZXQgdGhlIHRyYWNlciBzdGF0ZS5cbiAgICAgKi9cbiAgICBmbHVzaEFsbCh3cml0ZXIpIHsgcmV0dXJuOyB9LFxuICAgIGVuYWJsZUxpdmVMb2dnaW5nLFxuICAgIC8qKlxuICAgICAqIFN0b3BzIHdyaXRpbmcgb3V0IGVhY2ggdHJhY2UgaW5mbyBpdGVtIGFzIHRoZXkgYXJlIHRyYWNlZC5cbiAgICAgKi9cbiAgICBkaXNhYmxlTGl2ZUxvZ2dpbmcoKSB7IHJldHVybjsgfVxufTtcbmZ1bmN0aW9uIGVuYWJsZUxpdmVMb2dnaW5nKG9wdGlvbnNPcldyaXRlcikgeyByZXR1cm47IH1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlcG9ydGVyLmpzLm1hcCIsImltcG9ydCB7IE1ldGFkYXRhIH0gZnJvbSAnQGF1cmVsaWEvbWV0YWRhdGEnO1xuaW1wb3J0IHsgUExBVEZPUk0gfSBmcm9tICcuL3BsYXRmb3JtJztcbmNvbnN0IGFubm90YXRpb24gPSB7XG4gICAgbmFtZTogJ2F1OmFubm90YXRpb24nLFxuICAgIGFwcGVuZFRvKHRhcmdldCwga2V5KSB7XG4gICAgICAgIGNvbnN0IGtleXMgPSBNZXRhZGF0YS5nZXRPd24oYW5ub3RhdGlvbi5uYW1lLCB0YXJnZXQpO1xuICAgICAgICBpZiAoa2V5cyA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBNZXRhZGF0YS5kZWZpbmUoYW5ub3RhdGlvbi5uYW1lLCBba2V5XSwgdGFyZ2V0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGtleXMucHVzaChrZXkpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBzZXQodGFyZ2V0LCBwcm9wLCB2YWx1ZSkge1xuICAgICAgICBNZXRhZGF0YS5kZWZpbmUoYW5ub3RhdGlvbi5rZXlGb3IocHJvcCksIHZhbHVlLCB0YXJnZXQpO1xuICAgIH0sXG4gICAgZ2V0KHRhcmdldCwgcHJvcCkge1xuICAgICAgICByZXR1cm4gTWV0YWRhdGEuZ2V0T3duKGFubm90YXRpb24ua2V5Rm9yKHByb3ApLCB0YXJnZXQpO1xuICAgIH0sXG4gICAgZ2V0S2V5cyh0YXJnZXQpIHtcbiAgICAgICAgbGV0IGtleXMgPSBNZXRhZGF0YS5nZXRPd24oYW5ub3RhdGlvbi5uYW1lLCB0YXJnZXQpO1xuICAgICAgICBpZiAoa2V5cyA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBNZXRhZGF0YS5kZWZpbmUoYW5ub3RhdGlvbi5uYW1lLCBrZXlzID0gW10sIHRhcmdldCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGtleXM7XG4gICAgfSxcbiAgICBpc0tleShrZXkpIHtcbiAgICAgICAgcmV0dXJuIGtleS5zdGFydHNXaXRoKGFubm90YXRpb24ubmFtZSk7XG4gICAgfSxcbiAgICBrZXlGb3IobmFtZSwgY29udGV4dCkge1xuICAgICAgICBpZiAoY29udGV4dCA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICByZXR1cm4gYCR7YW5ub3RhdGlvbi5uYW1lfToke25hbWV9YDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYCR7YW5ub3RhdGlvbi5uYW1lfToke25hbWV9OiR7Y29udGV4dH1gO1xuICAgIH0sXG59O1xuY29uc3QgcmVzb3VyY2UgPSB7XG4gICAgbmFtZTogJ2F1OnJlc291cmNlJyxcbiAgICBhcHBlbmRUbyh0YXJnZXQsIGtleSkge1xuICAgICAgICBjb25zdCBrZXlzID0gTWV0YWRhdGEuZ2V0T3duKHJlc291cmNlLm5hbWUsIHRhcmdldCk7XG4gICAgICAgIGlmIChrZXlzID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIE1ldGFkYXRhLmRlZmluZShyZXNvdXJjZS5uYW1lLCBba2V5XSwgdGFyZ2V0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGtleXMucHVzaChrZXkpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBoYXModGFyZ2V0KSB7XG4gICAgICAgIHJldHVybiBNZXRhZGF0YS5oYXNPd24ocmVzb3VyY2UubmFtZSwgdGFyZ2V0KTtcbiAgICB9LFxuICAgIGdldEFsbCh0YXJnZXQpIHtcbiAgICAgICAgY29uc3Qga2V5cyA9IE1ldGFkYXRhLmdldE93bihyZXNvdXJjZS5uYW1lLCB0YXJnZXQpO1xuICAgICAgICBpZiAoa2V5cyA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICByZXR1cm4gUExBVEZPUk0uZW1wdHlBcnJheTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBrZXlzLm1hcChrID0+IE1ldGFkYXRhLmdldE93bihrLCB0YXJnZXQpKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgZ2V0S2V5cyh0YXJnZXQpIHtcbiAgICAgICAgbGV0IGtleXMgPSBNZXRhZGF0YS5nZXRPd24ocmVzb3VyY2UubmFtZSwgdGFyZ2V0KTtcbiAgICAgICAgaWYgKGtleXMgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgTWV0YWRhdGEuZGVmaW5lKHJlc291cmNlLm5hbWUsIGtleXMgPSBbXSwgdGFyZ2V0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ga2V5cztcbiAgICB9LFxuICAgIGlzS2V5KGtleSkge1xuICAgICAgICByZXR1cm4ga2V5LnN0YXJ0c1dpdGgocmVzb3VyY2UubmFtZSk7XG4gICAgfSxcbiAgICBrZXlGb3IobmFtZSwgY29udGV4dCkge1xuICAgICAgICBpZiAoY29udGV4dCA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICByZXR1cm4gYCR7cmVzb3VyY2UubmFtZX06JHtuYW1lfWA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGAke3Jlc291cmNlLm5hbWV9OiR7bmFtZX06JHtjb250ZXh0fWA7XG4gICAgfSxcbn07XG5leHBvcnQgY29uc3QgUHJvdG9jb2wgPSB7XG4gICAgYW5ub3RhdGlvbixcbiAgICByZXNvdXJjZSxcbn07XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L3VuYm91bmQtbWV0aG9kXG5jb25zdCBoYXNPd24gPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuLyoqXG4gKiBUaGUgb3JkZXIgaW4gd2hpY2ggdGhlIHZhbHVlcyBhcmUgY2hlY2tlZDpcbiAqIDEuIEFubm90YXRpb25zICh1c3VhbGx5IHNldCBieSBkZWNvcmF0b3JzKSBoYXZlIHRoZSBoaWdoZXN0IHByaW9yaXR5OyB0aGV5IG92ZXJyaWRlIHRoZSBkZWZpbml0aW9uIGFzIHdlbGwgYXMgc3RhdGljIHByb3BlcnRpZXMgb24gdGhlIHR5cGUuXG4gKiAyLiBEZWZpbml0aW9uIHByb3BlcnRpZXMgKHVzdWFsbHkgc2V0IGJ5IHRoZSBjdXN0b21FbGVtZW50IGRlY29yYXRvciBvYmplY3QgbGl0ZXJhbCkgY29tZSBuZXh0LiBUaGV5IG92ZXJyaWRlIHN0YXRpYyBwcm9wZXJ0aWVzIG9uIHRoZSB0eXBlLlxuICogMy4gU3RhdGljIHByb3BlcnRpZXMgb24gdGhlIHR5cGUgY29tZSBsYXN0LiBOb3RlIHRoYXQgdGhpcyBkb2VzIG5vdCBsb29rIHVwIHRoZSBwcm90b3R5cGUgY2hhaW4gKGJpbmRhYmxlcyBhcmUgYW4gZXhjZXB0aW9uIGhlcmUsIGJ1dCB3ZSBkbyB0aGF0IGRpZmZlcmVudGx5IGFueXdheSlcbiAqIDQuIFRoZSBkZWZhdWx0IHByb3BlcnR5IHRoYXQgaXMgcHJvdmlkZWQgbGFzdC4gVGhlIGZ1bmN0aW9uIGlzIG9ubHkgY2FsbGVkIGlmIHRoZSBkZWZhdWx0IHByb3BlcnR5IGlzIG5lZWRlZFxuICovXG5leHBvcnQgZnVuY3Rpb24gZnJvbUFubm90YXRpb25PckRlZmluaXRpb25PclR5cGVPckRlZmF1bHQobmFtZSwgZGVmLCBUeXBlLCBnZXREZWZhdWx0KSB7XG4gICAgbGV0IHZhbHVlID0gTWV0YWRhdGEuZ2V0T3duKFByb3RvY29sLmFubm90YXRpb24ua2V5Rm9yKG5hbWUpLCBUeXBlKTtcbiAgICBpZiAodmFsdWUgPT09IHZvaWQgMCkge1xuICAgICAgICB2YWx1ZSA9IGRlZltuYW1lXTtcbiAgICAgICAgaWYgKHZhbHVlID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIHZhbHVlID0gVHlwZVtuYW1lXTtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvc3RyaWN0LWJvb2xlYW4tZXhwcmVzc2lvbnNcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gdm9pZCAwIHx8ICFoYXNPd24uY2FsbChUeXBlLCBuYW1lKSkgeyAvLyBGaXJzdCBqdXN0IGNoZWNrIHRoZSB2YWx1ZSAoY29tbW9uIGNhc2UgaXMgZmFzdGVyKSwgYnV0IGRvIG1ha2Ugc3VyZSBpdCBkb2Vzbid0IGNvbWUgZnJvbSB0aGUgcHJvdG8gY2hhaW5cbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0RGVmYXVsdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xufVxuLyoqXG4gKiBUaGUgb3JkZXIgaW4gd2hpY2ggdGhlIHZhbHVlcyBhcmUgY2hlY2tlZDpcbiAqIDEuIEFubm90YXRpb25zICh1c3VhbGx5IHNldCBieSBkZWNvcmF0b3JzKSBoYXZlIHRoZSBoaWdoZXN0IHByaW9yaXR5OyB0aGV5IG92ZXJyaWRlIHN0YXRpYyBwcm9wZXJ0aWVzIG9uIHRoZSB0eXBlLlxuICogMi4gU3RhdGljIHByb3BlcnRpZXMgb24gdGhlIHR5cC4gTm90ZSB0aGF0IHRoaXMgZG9lcyBub3QgbG9vayB1cCB0aGUgcHJvdG90eXBlIGNoYWluIChiaW5kYWJsZXMgYXJlIGFuIGV4Y2VwdGlvbiBoZXJlLCBidXQgd2UgZG8gdGhhdCBkaWZmZXJlbnRseSBhbnl3YXkpXG4gKiAzLiBUaGUgZGVmYXVsdCBwcm9wZXJ0eSB0aGF0IGlzIHByb3ZpZGVkIGxhc3QuIFRoZSBmdW5jdGlvbiBpcyBvbmx5IGNhbGxlZCBpZiB0aGUgZGVmYXVsdCBwcm9wZXJ0eSBpcyBuZWVkZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZyb21Bbm5vdGF0aW9uT3JUeXBlT3JEZWZhdWx0KG5hbWUsIFR5cGUsIGdldERlZmF1bHQpIHtcbiAgICBsZXQgdmFsdWUgPSBNZXRhZGF0YS5nZXRPd24oUHJvdG9jb2wuYW5ub3RhdGlvbi5rZXlGb3IobmFtZSksIFR5cGUpO1xuICAgIGlmICh2YWx1ZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgIHZhbHVlID0gVHlwZVtuYW1lXTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9zdHJpY3QtYm9vbGVhbi1leHByZXNzaW9uc1xuICAgICAgICBpZiAodmFsdWUgPT09IHZvaWQgMCB8fCAhaGFzT3duLmNhbGwoVHlwZSwgbmFtZSkpIHsgLy8gRmlyc3QganVzdCBjaGVjayB0aGUgdmFsdWUgKGNvbW1vbiBjYXNlIGlzIGZhc3RlciksIGJ1dCBkbyBtYWtlIHN1cmUgaXQgZG9lc24ndCBjb21lIGZyb20gdGhlIHByb3RvIGNoYWluXG4gICAgICAgICAgICByZXR1cm4gZ2V0RGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xufVxuLyoqXG4gKiBUaGUgb3JkZXIgaW4gd2hpY2ggdGhlIHZhbHVlcyBhcmUgY2hlY2tlZDpcbiAqIDEuIERlZmluaXRpb24gcHJvcGVydGllcy5cbiAqIDIuIFRoZSBkZWZhdWx0IHByb3BlcnR5IHRoYXQgaXMgcHJvdmlkZWQgbGFzdC4gVGhlIGZ1bmN0aW9uIGlzIG9ubHkgY2FsbGVkIGlmIHRoZSBkZWZhdWx0IHByb3BlcnR5IGlzIG5lZWRlZFxuICovXG5leHBvcnQgZnVuY3Rpb24gZnJvbURlZmluaXRpb25PckRlZmF1bHQobmFtZSwgZGVmLCBnZXREZWZhdWx0KSB7XG4gICAgY29uc3QgdmFsdWUgPSBkZWZbbmFtZV07XG4gICAgaWYgKHZhbHVlID09PSB2b2lkIDApIHtcbiAgICAgICAgcmV0dXJuIGdldERlZmF1bHQoKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVzb3VyY2UuanMubWFwIiwiLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHlwZXNcbmZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgIT09IG51bGwgfHwgdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nO1xufVxuZnVuY3Rpb24gaXNOdWxsT3JVbmRlZmluZWQodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHZvaWQgMDtcbn1cbi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnkgKi9cbi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHlwZXMgKi9cbmNvbnN0IG1ldGFkYXRhSW50ZXJuYWxTbG90ID0gbmV3IFdlYWtNYXAoKTtcbmZ1bmN0aW9uICR0eXBlRXJyb3Iob3BlcmF0aW9uLCBhcmdzLCBwYXJhbU5hbWUsIGFjdHVhbFZhbHVlLCBleHBlY3RlZFR5cGUpIHtcbiAgICByZXR1cm4gbmV3IFR5cGVFcnJvcihgJHtvcGVyYXRpb259KCR7YXJncy5tYXAoU3RyaW5nKS5qb2luKCcsJyl9KSAtIEV4cGVjdGVkICcke3BhcmFtTmFtZX0nIHRvIGJlIG9mIHR5cGUgJHtleHBlY3RlZFR5cGV9LCBidXQgZ290OiAke09iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhY3R1YWxWYWx1ZSl9ICgke1N0cmluZyhhY3R1YWxWYWx1ZSl9KWApO1xufVxuZnVuY3Rpb24gdG9Qcm9wZXJ0eUtleU9yVW5kZWZpbmVkKHByb3BlcnR5S2V5KSB7XG4gICAgc3dpdGNoICh0eXBlb2YgcHJvcGVydHlLZXkpIHtcbiAgICAgICAgY2FzZSAndW5kZWZpbmVkJzpcbiAgICAgICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgICAgY2FzZSAnc3ltYm9sJzpcbiAgICAgICAgICAgIHJldHVybiBwcm9wZXJ0eUtleTtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBgJHtwcm9wZXJ0eUtleX1gO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHRvUHJvcGVydHlLZXkocHJvcGVydHlLZXkpIHtcbiAgICBzd2l0Y2ggKHR5cGVvZiBwcm9wZXJ0eUtleSkge1xuICAgICAgICBjYXNlICdzdHJpbmcnOlxuICAgICAgICBjYXNlICdzeW1ib2wnOlxuICAgICAgICAgICAgcmV0dXJuIHByb3BlcnR5S2V5O1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIGAke3Byb3BlcnR5S2V5fWA7XG4gICAgfVxufVxuZnVuY3Rpb24gZW5zdXJlUHJvcGVydHlLZXlPclVuZGVmaW5lZChwcm9wZXJ0eUtleSkge1xuICAgIHN3aXRjaCAodHlwZW9mIHByb3BlcnR5S2V5KSB7XG4gICAgICAgIGNhc2UgJ3VuZGVmaW5lZCc6XG4gICAgICAgIGNhc2UgJ3N0cmluZyc6XG4gICAgICAgIGNhc2UgJ3N5bWJvbCc6XG4gICAgICAgICAgICByZXR1cm4gcHJvcGVydHlLZXk7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBJbnZhbGlkIG1ldGFkYXRhIHByb3BlcnR5S2V5OiAke3Byb3BlcnR5S2V5fS5gKTtcbiAgICB9XG59XG5mdW5jdGlvbiBHZXRPckNyZWF0ZU1ldGFkYXRhTWFwKE8sIFAsIENyZWF0ZSkge1xuICAgIC8vIDEuIEFzc2VydDogUCBpcyB1bmRlZmluZWQgb3IgSXNQcm9wZXJ0eUtleShQKSBpcyB0cnVlLlxuICAgIC8vIDIuIExldCB0YXJnZXRNZXRhZGF0YSBiZSB0aGUgdmFsdWUgb2YgTydzIFtbTWV0YWRhdGFdXSBpbnRlcm5hbCBzbG90LlxuICAgIGxldCB0YXJnZXRNZXRhZGF0YSA9IG1ldGFkYXRhSW50ZXJuYWxTbG90LmdldChPKTtcbiAgICAvLyAzLiBJZiB0YXJnZXRNZXRhZGF0YSBpcyB1bmRlZmluZWQsIHRoZW5cbiAgICBpZiAodGFyZ2V0TWV0YWRhdGEgPT09IHZvaWQgMCkge1xuICAgICAgICAvLyAzLiBhLiBJZiBDcmVhdGUgaXMgZmFsc2UsIHJldHVybiB1bmRlZmluZWQuXG4gICAgICAgIGlmICghQ3JlYXRlKSB7XG4gICAgICAgICAgICByZXR1cm4gdm9pZCAwO1xuICAgICAgICB9XG4gICAgICAgIC8vIDMuIGIuIFNldCB0YXJnZXRNZXRhZGF0YSB0byBiZSBhIG5ld2x5IGNyZWF0ZWQgTWFwIG9iamVjdC5cbiAgICAgICAgdGFyZ2V0TWV0YWRhdGEgPSBuZXcgTWFwKCk7XG4gICAgICAgIC8vIDMuIGMuIFNldCB0aGUgW1tNZXRhZGF0YV1dIGludGVybmFsIHNsb3Qgb2YgTyB0byB0YXJnZXRNZXRhZGF0YS5cbiAgICAgICAgbWV0YWRhdGFJbnRlcm5hbFNsb3Quc2V0KE8sIHRhcmdldE1ldGFkYXRhKTtcbiAgICB9XG4gICAgLy8gNC4gTGV0IG1ldGFkYXRhTWFwIGJlID8gSW52b2tlKHRhcmdldE1ldGFkYXRhLCBcImdldFwiLCBQKS5cbiAgICBsZXQgbWV0YWRhdGFNYXAgPSB0YXJnZXRNZXRhZGF0YS5nZXQoUCk7XG4gICAgLy8gNS4gSWYgbWV0YWRhdGFNYXAgaXMgdW5kZWZpbmVkLCB0aGVuXG4gICAgaWYgKG1ldGFkYXRhTWFwID09PSB2b2lkIDApIHtcbiAgICAgICAgLy8gNS4gYS4gSWYgQ3JlYXRlIGlzIGZhbHNlLCByZXR1cm4gdW5kZWZpbmVkLlxuICAgICAgICBpZiAoIUNyZWF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHZvaWQgMDtcbiAgICAgICAgfVxuICAgICAgICAvLyA1LiBiLiBTZXQgbWV0YWRhdGFNYXAgdG8gYmUgYSBuZXdseSBjcmVhdGVkIE1hcCBvYmplY3QuXG4gICAgICAgIG1ldGFkYXRhTWFwID0gbmV3IE1hcCgpO1xuICAgICAgICAvLyA1LiBjLiBQZXJmb3JtID8gSW52b2tlKHRhcmdldE1ldGFkYXRhLCBcInNldFwiLCBQLCBtZXRhZGF0YU1hcCkuXG4gICAgICAgIHRhcmdldE1ldGFkYXRhLnNldChQLCBtZXRhZGF0YU1hcCk7XG4gICAgfVxuICAgIC8vIDYuIFJldHVybiBtZXRhZGF0YU1hcC5cbiAgICByZXR1cm4gbWV0YWRhdGFNYXA7XG59XG4vLyAzLjEuMi4xIE9yZGluYXJ5SGFzT3duTWV0YWRhdGEoTWV0YWRhdGFLZXksIE8sIFApXG4vLyBodHRwczovL3JidWNrdG9uLmdpdGh1Yi5pby9yZWZsZWN0LW1ldGFkYXRhLyNvcmRpbmFyeWhhc293bm1ldGFkYXRhXG5mdW5jdGlvbiBPcmRpbmFyeUhhc093bk1ldGFkYXRhKE1ldGFkYXRhS2V5LCBPLCBQKSB7XG4gICAgLy8gMS4gQXNzZXJ0OiBQIGlzIHVuZGVmaW5lZCBvciBJc1Byb3BlcnR5S2V5KFApIGlzIHRydWUuXG4gICAgLy8gMi4gTGV0IG1ldGFkYXRhTWFwIGJlID8gR2V0T3JDcmVhdGVNZXRhZGF0YU1hcChPLCBQLCBmYWxzZSkuXG4gICAgY29uc3QgbWV0YWRhdGFNYXAgPSBHZXRPckNyZWF0ZU1ldGFkYXRhTWFwKE8sIFAsIC8qIENyZWF0ZSAqLyBmYWxzZSk7XG4gICAgLy8gMy4gSWYgbWV0YWRhdGFNYXAgaXMgdW5kZWZpbmVkLCByZXR1cm4gZmFsc2UuXG4gICAgaWYgKG1ldGFkYXRhTWFwID09PSB2b2lkIDApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvLyA0LiBSZXR1cm4gPyBUb0Jvb2xlYW4oPyBJbnZva2UobWV0YWRhdGFNYXAsIFwiaGFzXCIsIE1ldGFkYXRhS2V5KSkuXG4gICAgcmV0dXJuIG1ldGFkYXRhTWFwLmhhcyhNZXRhZGF0YUtleSk7XG59XG4vLyAzLjEuMS4xIE9yZGluYXJ5SGFzTWV0YWRhdGEoTWV0YWRhdGFLZXksIE8sIFApXG4vLyBodHRwczovL3JidWNrdG9uLmdpdGh1Yi5pby9yZWZsZWN0LW1ldGFkYXRhLyNvcmRpbmFyeWhhc21ldGFkYXRhXG5mdW5jdGlvbiBPcmRpbmFyeUhhc01ldGFkYXRhKE1ldGFkYXRhS2V5LCBPLCBQKSB7XG4gICAgLy8gMS4gQXNzZXJ0OiBQIGlzIHVuZGVmaW5lZCBvciBJc1Byb3BlcnR5S2V5KFApIGlzIHRydWUuXG4gICAgLy8gMi4gTGV0IGhhc093biBiZSA/IE9yZGluYXJ5SGFzT3duTWV0YWRhdGEoTWV0YWRhdGFLZXksIE8sIFApLlxuICAgIC8vIDMuIElmIGhhc093biBpcyB0cnVlLCByZXR1cm4gdHJ1ZS5cbiAgICBpZiAoT3JkaW5hcnlIYXNPd25NZXRhZGF0YShNZXRhZGF0YUtleSwgTywgUCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8vIDQuIExldCBwYXJlbnQgYmUgPyBPLltbR2V0UHJvdG90eXBlT2ZdXSgpLlxuICAgIGNvbnN0IHBhcmVudCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihPKTtcbiAgICAvLyA1LiBJZiBwYXJlbnQgaXMgbm90IG51bGwsIFJldHVybiA/IHBhcmVudC5bW0hhc01ldGFkYXRhXV0oTWV0YWRhdGFLZXksIFApLlxuICAgIGlmIChwYXJlbnQgIT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIE9yZGluYXJ5SGFzTWV0YWRhdGEoTWV0YWRhdGFLZXksIHBhcmVudCwgUCk7XG4gICAgfVxuICAgIC8vIDYuIFJldHVybiBmYWxzZS5cbiAgICByZXR1cm4gZmFsc2U7XG59XG4vLyAzLjEuNC4xIE9yZGluYXJ5R2V0T3duTWV0YWRhdGEoTWV0YWRhdGFLZXksIE8sIFApXG4vLyBodHRwczovL3JidWNrdG9uLmdpdGh1Yi5pby9yZWZsZWN0LW1ldGFkYXRhLyNvcmRpbmFyeWdldG93bm1ldGFkYXRhXG5mdW5jdGlvbiBPcmRpbmFyeUdldE93bk1ldGFkYXRhKE1ldGFkYXRhS2V5LCBPLCBQKSB7XG4gICAgLy8gMS4gQXNzZXJ0OiBQIGlzIHVuZGVmaW5lZCBvciBJc1Byb3BlcnR5S2V5KFApIGlzIHRydWUuXG4gICAgLy8gMi4gTGV0IG1ldGFkYXRhTWFwIGJlID8gR2V0T3JDcmVhdGVNZXRhZGF0YU1hcChPLCBQLCBmYWxzZSkuXG4gICAgY29uc3QgbWV0YWRhdGFNYXAgPSBHZXRPckNyZWF0ZU1ldGFkYXRhTWFwKE8sIFAsIC8qIENyZWF0ZSAqLyBmYWxzZSk7XG4gICAgLy8gMy4gSWYgbWV0YWRhdGFNYXAgaXMgdW5kZWZpbmVkLCByZXR1cm4gdW5kZWZpbmVkLlxuICAgIGlmIChtZXRhZGF0YU1hcCA9PT0gdm9pZCAwKSB7XG4gICAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgfVxuICAgIC8vIDQuIFJldHVybiA/IEludm9rZShtZXRhZGF0YU1hcCwgXCJnZXRcIiwgTWV0YWRhdGFLZXkpLlxuICAgIHJldHVybiBtZXRhZGF0YU1hcC5nZXQoTWV0YWRhdGFLZXkpO1xufVxuLy8gMy4xLjMuMSBPcmRpbmFyeUdldE1ldGFkYXRhKE1ldGFkYXRhS2V5LCBPLCBQKVxuLy8gaHR0cHM6Ly9yYnVja3Rvbi5naXRodWIuaW8vcmVmbGVjdC1tZXRhZGF0YS8jb3JkaW5hcnlnZXRtZXRhZGF0YVxuZnVuY3Rpb24gT3JkaW5hcnlHZXRNZXRhZGF0YShNZXRhZGF0YUtleSwgTywgUCkge1xuICAgIC8vIDEuIEFzc2VydDogUCBpcyB1bmRlZmluZWQgb3IgSXNQcm9wZXJ0eUtleShQKSBpcyB0cnVlLlxuICAgIC8vIDIuIExldCBoYXNPd24gYmUgPyBPcmRpbmFyeUhhc093bk1ldGFkYXRhKE1ldGFkYXRhS2V5LCBPLCBQKS5cbiAgICAvLyAzLiBJZiBoYXNPd24gaXMgdHJ1ZSwgcmV0dXJuID8gT3JkaW5hcnlHZXRPd25NZXRhZGF0YShNZXRhZGF0YUtleSwgTywgUCkuXG4gICAgaWYgKE9yZGluYXJ5SGFzT3duTWV0YWRhdGEoTWV0YWRhdGFLZXksIE8sIFApKSB7XG4gICAgICAgIHJldHVybiBPcmRpbmFyeUdldE93bk1ldGFkYXRhKE1ldGFkYXRhS2V5LCBPLCBQKTtcbiAgICB9XG4gICAgLy8gNC4gTGV0IHBhcmVudCBiZSA/IE8uW1tHZXRQcm90b3R5cGVPZl1dKCkuXG4gICAgY29uc3QgcGFyZW50ID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKE8pO1xuICAgIC8vIDUuIElmIHBhcmVudCBpcyBub3QgbnVsbCwgcmV0dXJuID8gcGFyZW50LltbR2V0TWV0YWRhdGFdXShNZXRhZGF0YUtleSwgUCkuXG4gICAgaWYgKHBhcmVudCAhPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gT3JkaW5hcnlHZXRNZXRhZGF0YShNZXRhZGF0YUtleSwgcGFyZW50LCBQKTtcbiAgICB9XG4gICAgLy8gNi4gUmV0dXJuIHVuZGVmaW5lZC5cbiAgICByZXR1cm4gdm9pZCAwO1xufVxuLy8gMy4xLjUuMSBPcmRpbmFyeURlZmluZU93bk1ldGFkYXRhKE1ldGFkYXRhS2V5LCBNZXRhZGF0YVZhbHVlLCBPLCBQKVxuLy8gaHR0cHM6Ly9yYnVja3Rvbi5naXRodWIuaW8vcmVmbGVjdC1tZXRhZGF0YS8jb3JkaW5hcnlkZWZpbmVvd25tZXRhZGF0YVxuZnVuY3Rpb24gT3JkaW5hcnlEZWZpbmVPd25NZXRhZGF0YShNZXRhZGF0YUtleSwgTWV0YWRhdGFWYWx1ZSwgTywgUCkge1xuICAgIC8vIDEuIEFzc2VydDogUCBpcyB1bmRlZmluZWQgb3IgSXNQcm9wZXJ0eUtleShQKSBpcyB0cnVlLlxuICAgIC8vIDIuIExldCBtZXRhZGF0YU1hcCBiZSA/IEdldE9yQ3JlYXRlTWV0YWRhdGFNYXAoTywgUCwgdHJ1ZSkuXG4gICAgY29uc3QgbWV0YWRhdGFNYXAgPSBHZXRPckNyZWF0ZU1ldGFkYXRhTWFwKE8sIFAsIC8qIENyZWF0ZSAqLyB0cnVlKTtcbiAgICAvLyAzLiBSZXR1cm4gPyBJbnZva2UobWV0YWRhdGFNYXAsIFwic2V0XCIsIE1ldGFkYXRhS2V5LCBNZXRhZGF0YVZhbHVlKS5cbiAgICBtZXRhZGF0YU1hcC5zZXQoTWV0YWRhdGFLZXksIE1ldGFkYXRhVmFsdWUpO1xufVxuLy8gMy4xLjcuMSBPcmRpbmFyeU93bk1ldGFkYXRhS2V5cyhPLCBQKVxuLy8gaHR0cHM6Ly9yYnVja3Rvbi5naXRodWIuaW8vcmVmbGVjdC1tZXRhZGF0YS8jb3JkaW5hcnlvd25tZXRhZGF0YWtleXNcbmZ1bmN0aW9uIE9yZGluYXJ5T3duTWV0YWRhdGFLZXlzKE8sIFApIHtcbiAgICAvLyAxLiBBc3NlcnQ6IFAgaXMgdW5kZWZpbmVkIG9yIElzUHJvcGVydHlLZXkoUCkgaXMgdHJ1ZS5cbiAgICAvLyAyLiBMZXQga2V5cyBiZSA/IEFycmF5Q3JlYXRlKDApLlxuICAgIGNvbnN0IGtleXMgPSBbXTtcbiAgICAvLyAzLiBMZXQgbWV0YWRhdGFNYXAgYmUgPyBHZXRPckNyZWF0ZU1ldGFkYXRhTWFwKE8sIFAsIGZhbHNlKS5cbiAgICBjb25zdCBtZXRhZGF0YU1hcCA9IEdldE9yQ3JlYXRlTWV0YWRhdGFNYXAoTywgUCwgLyogQ3JlYXRlICovIGZhbHNlKTtcbiAgICAvLyA0LiBJZiBtZXRhZGF0YU1hcCBpcyB1bmRlZmluZWQsIHJldHVybiBrZXlzLlxuICAgIGlmIChtZXRhZGF0YU1hcCA9PT0gdm9pZCAwKSB7XG4gICAgICAgIHJldHVybiBrZXlzO1xuICAgIH1cbiAgICAvLyA1LiBMZXQga2V5c09iaiBiZSA/IEludm9rZShtZXRhZGF0YU1hcCwgXCJrZXlzXCIpLlxuICAgIGNvbnN0IGtleXNPYmogPSBtZXRhZGF0YU1hcC5rZXlzKCk7XG4gICAgLy8gNi4gTGV0IGl0ZXJhdG9yIGJlID8gR2V0SXRlcmF0b3Ioa2V5c09iaikuXG4gICAgLy8gNy4gTGV0IGsgYmUgMC5cbiAgICBsZXQgayA9IDA7XG4gICAgLy8gOC4gUmVwZWF0XG4gICAgZm9yIChjb25zdCBrZXkgb2Yga2V5c09iaikge1xuICAgICAgICAvLyA4LiBhLiBMZXQgUGsgYmUgISBUb1N0cmluZyhrKS5cbiAgICAgICAgLy8gOC4gYi4gTGV0IG5leHQgYmUgPyBJdGVyYXRvclN0ZXAoaXRlcmF0b3IpLlxuICAgICAgICAvLyA4LiBjLiBJZiBuZXh0IGlzIGZhbHNlLCB0aGVuXG4gICAgICAgIC8vIDguIGMuIGkuIExldCBzZXRTdGF0dXMgYmUgPyBTZXQoa2V5cywgXCJsZW5ndGhcIiwgaywgdHJ1ZSkuXG4gICAgICAgIC8vIDguIGMuIGlpLiBBc3NlcnQ6IHNldFN0YXR1cyBpcyB0cnVlLlxuICAgICAgICAvLyA4LiBjLiBpaWkuIFJldHVybiBrZXlzLlxuICAgICAgICAvLyA4LiBkLiBMZXQgbmV4dFZhbHVlIGJlID8gSXRlcmF0b3JWYWx1ZShuZXh0KS5cbiAgICAgICAgLy8gOC4gZS4gTGV0IGRlZmluZVN0YXR1cyBiZSBDcmVhdGVEYXRhUHJvcGVydHlPclRocm93KGtleXMsIFBrLCBuZXh0VmFsdWUpLlxuICAgICAgICBrZXlzW2tdID0ga2V5O1xuICAgICAgICAvLyA4LiBmLiBJZiBkZWZpbmVTdGF0dXMgaXMgYW4gYWJydXB0IGNvbXBsZXRpb24sIHJldHVybiA/IEl0ZXJhdG9yQ2xvc2UoaXRlcmF0b3IsIGRlZmluZVN0YXR1cykuXG4gICAgICAgIC8vIDguIGcuIEluY3JlYXNlIGsgYnkgMS5cbiAgICAgICAgKytrO1xuICAgIH1cbiAgICByZXR1cm4ga2V5cztcbn1cbi8vIDMuMS42LjEgT3JkaW5hcnlNZXRhZGF0YUtleXMoTywgUClcbi8vIGh0dHBzOi8vcmJ1Y2t0b24uZ2l0aHViLmlvL3JlZmxlY3QtbWV0YWRhdGEvI29yZGluYXJ5bWV0YWRhdGFrZXlzXG5mdW5jdGlvbiBPcmRpbmFyeU1ldGFkYXRhS2V5cyhPLCBQKSB7XG4gICAgLy8gMS4gQXNzZXJ0OiBQIGlzIHVuZGVmaW5lZCBvciBJc1Byb3BlcnR5S2V5KFApIGlzIHRydWUuXG4gICAgLy8gMi4gTGV0IG93bktleXMgYmUgPyBPcmRpbmFyeU93bk1ldGFkYXRhS2V5cyhPLCBQKS5cbiAgICBjb25zdCBvd25LZXlzID0gT3JkaW5hcnlPd25NZXRhZGF0YUtleXMoTywgUCk7XG4gICAgLy8gMy4gTGV0IHBhcmVudCBiZSA/IE8uW1tHZXRQcm90b3R5cGVPZl1dKCkuXG4gICAgY29uc3QgcGFyZW50ID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKE8pO1xuICAgIC8vIDQuIElmIHBhcmVudCBpcyBudWxsLCB0aGVuIHJldHVybiBvd25LZXlzLlxuICAgIGlmIChwYXJlbnQgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIG93bktleXM7XG4gICAgfVxuICAgIC8vIDUuIExldCBwYXJlbnRLZXlzIGJlID8gTy5bW09yZGluYXJ5TWV0YWRhdGFLZXlzXV0oUCkuXG4gICAgY29uc3QgcGFyZW50S2V5cyA9IE9yZGluYXJ5TWV0YWRhdGFLZXlzKHBhcmVudCwgUCk7XG4gICAgLy8gNi4gTGV0IG93bktleXNMZW4gPSA/IEdldChvd25LZXlzLCBcImxlbmd0aFwiKS5cbiAgICBjb25zdCBvd25LZXlzTGVuID0gb3duS2V5cy5sZW5ndGg7XG4gICAgLy8gNy4gSWYgb3duS2V5c0xlbiBpcyAwLCByZXR1cm4gcGFyZW50S2V5cy5cbiAgICBpZiAob3duS2V5c0xlbiA9PT0gMCkge1xuICAgICAgICByZXR1cm4gcGFyZW50S2V5cztcbiAgICB9XG4gICAgLy8gOC4gTGV0IHBhcmVudEtleXNMZW4gPSA/IEdldChwYXJlbnRLZXlzLCBcImxlbmd0aFwiKS5cbiAgICBjb25zdCBwYXJlbnRLZXlzTGVuID0gcGFyZW50S2V5cy5sZW5ndGg7XG4gICAgLy8gOS4gSWYgcGFyZW50S2V5c0xlbiBpcyAwLCByZXR1cm4gb3duS2V5cy5cbiAgICBpZiAocGFyZW50S2V5c0xlbiA9PT0gMCkge1xuICAgICAgICByZXR1cm4gb3duS2V5cztcbiAgICB9XG4gICAgLy8gMTAuIExldCBzZXQgYmUgYSBuZXdseSBjcmVhdGVkIFNldCBvYmplY3QuXG4gICAgY29uc3Qgc2V0ID0gbmV3IFNldCgpO1xuICAgIC8vIDExLiBMZXQga2V5cyBiZSA/IEFycmF5Q3JlYXRlKDApLlxuICAgIGNvbnN0IGtleXMgPSBbXTtcbiAgICAvLyAxMi4gTGV0IGsgYmUgMC5cbiAgICBsZXQgayA9IDA7XG4gICAgLy8gMTMuIEZvciBlYWNoIGVsZW1lbnQga2V5IG9mIG93bktleXNcbiAgICBsZXQga2V5O1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3duS2V5c0xlbjsgKytpKSB7XG4gICAgICAgIGtleSA9IG93bktleXNbaV07XG4gICAgICAgIC8vIDEzLiBhLiBMZXQgaGFzS2V5IGJlID8gSW52b2tlKHNldCwgXCJoYXNcIiwga2V5KS5cbiAgICAgICAgLy8gMTMuIGIuIElmIGhhc0tleSBpcyBmYWxzZSwgdGhlblxuICAgICAgICBpZiAoIXNldC5oYXMoa2V5KSkge1xuICAgICAgICAgICAgLy8gMTMuIGIuIGkuIExldCBQayBiZSAhIFRvU3RyaW5nKGspLlxuICAgICAgICAgICAgLy8gMTMuIGIuIGlpLiBQZXJmb3JtID8gSW52b2tlKHNldCwgXCJhZGRcIiwga2V5KS5cbiAgICAgICAgICAgIHNldC5hZGQoa2V5KTtcbiAgICAgICAgICAgIC8vIDEzLiBiLiBpaWkuIExldCBkZWZpbmVTdGF0dXMgYmUgQ3JlYXRlRGF0YVByb3BlcnR5KGtleXMsIFBrLCBrZXkpLlxuICAgICAgICAgICAgLy8gMTMuIGIuIGl2LiBBc3NlcnQ6IGRlZmluZVN0YXR1cyBpcyB0cnVlLlxuICAgICAgICAgICAga2V5c1trXSA9IGtleTtcbiAgICAgICAgICAgIC8vIDEzLiBiLiB2LiBJbmNyZWFzZSBrIGJ5IDEuXG4gICAgICAgICAgICArK2s7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gMTQuIEZvciBlYWNoIGVsZW1lbnQga2V5IG9mIHBhcmVudEtleXNcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhcmVudEtleXNMZW47ICsraSkge1xuICAgICAgICBrZXkgPSBwYXJlbnRLZXlzW2ldO1xuICAgICAgICAvLyAxNC4gYS4gTGV0IGhhc0tleSBiZSA/IEludm9rZShzZXQsIFwiaGFzXCIsIGtleSkuXG4gICAgICAgIC8vIDE0LiBiLiBJZiBoYXNLZXkgaXMgZmFsc2UsIHRoZW5cbiAgICAgICAgaWYgKCFzZXQuaGFzKGtleSkpIHtcbiAgICAgICAgICAgIC8vIDE0LiBiLiBpLiBMZXQgUGsgYmUgISBUb1N0cmluZyhrKS5cbiAgICAgICAgICAgIC8vIDE0LiBiLiBpaS4gUGVyZm9ybSA/IEludm9rZShzZXQsIFwiYWRkXCIsIGtleSkuXG4gICAgICAgICAgICBzZXQuYWRkKGtleSk7XG4gICAgICAgICAgICAvLyAxNC4gYi4gaWlpLiBMZXQgZGVmaW5lU3RhdHVzIGJlIENyZWF0ZURhdGFQcm9wZXJ0eShrZXlzLCBQaywga2V5KS5cbiAgICAgICAgICAgIC8vIDE0LiBiLiBpdi4gQXNzZXJ0OiBkZWZpbmVTdGF0dXMgaXMgdHJ1ZS5cbiAgICAgICAgICAgIGtleXNba10gPSBrZXk7XG4gICAgICAgICAgICAvLyAxNC4gYi4gdi4gSW5jcmVhc2UgayBieSAxLlxuICAgICAgICAgICAgKytrO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIDE1LiBQZXJmb3JtID8gU2V0KGtleXMsIFwibGVuZ3RoXCIsIGspLlxuICAgIC8vIDE2LiByZXR1cm4ga2V5cy5cbiAgICByZXR1cm4ga2V5cztcbn1cbi8vIDMuMS44IERlbGV0ZU1ldGFkYXRhKE1ldGFkYXRhS2V5LCBQKVxuLy8gaHR0cHM6Ly9yYnVja3Rvbi5naXRodWIuaW8vcmVmbGVjdC1tZXRhZGF0YS8jb3JkaW5hcnktb2JqZWN0LWludGVybmFsLW1ldGhvZHMtYW5kLWludGVybmFsLXNsb3RzLWRlbGV0ZW1ldGFkYXRhXG5mdW5jdGlvbiBPcmRpbmFyeURlbGV0ZU1ldGFkYXRhKE8sIE1ldGFkYXRhS2V5LCBQKSB7XG4gICAgLy8gMS4gQXNzZXJ0OiBQIGlzIHVuZGVmaW5lZCBvciBJc1Byb3BlcnR5S2V5KFApIGlzIHRydWUuXG4gICAgLy8gMi4gTGV0IG1ldGFkYXRhTWFwIGJlID8gR2V0T3JDcmVhdGVNZXRhZGF0YU1hcChPLCBQLCBmYWxzZSkuXG4gICAgY29uc3QgbWV0YWRhdGFNYXAgPSBHZXRPckNyZWF0ZU1ldGFkYXRhTWFwKE8sIFAsIGZhbHNlKTtcbiAgICAvLyAzLiBJZiBtZXRhZGF0YU1hcCBpcyB1bmRlZmluZWQsIHJldHVybiBmYWxzZS5cbiAgICBpZiAobWV0YWRhdGFNYXAgPT09IHZvaWQgMCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8vIDQuIFJldHVybiA/IEludm9rZShtZXRhZGF0YU1hcCwgXCJkZWxldGVcIiwgTWV0YWRhdGFLZXkpLlxuICAgIHJldHVybiBtZXRhZGF0YU1hcC5kZWxldGUoTWV0YWRhdGFLZXkpO1xufVxuLy8gNC4xLjIgUmVmbGVjdC5tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSlcbi8vIGh0dHBzOi8vcmJ1Y2t0b24uZ2l0aHViLmlvL3JlZmxlY3QtbWV0YWRhdGEvI3JlZmxlY3QubWV0YWRhdGFcbi8qKlxuICogQSBkZWZhdWx0IG1ldGFkYXRhIGRlY29yYXRvciBmYWN0b3J5IHRoYXQgY2FuIGJlIHVzZWQgb24gYSBjbGFzcywgY2xhc3MgbWVtYmVyLCBvciBwYXJhbWV0ZXIuXG4gKlxuICogQHBhcmFtIG1ldGFkYXRhS2V5IC0gVGhlIGtleSBmb3IgdGhlIG1ldGFkYXRhIGVudHJ5LlxuICogSWYgYG1ldGFkYXRhS2V5YCBpcyBhbHJlYWR5IGRlZmluZWQgZm9yIHRoZSB0YXJnZXQgYW5kIHRhcmdldCBrZXksIHRoZVxuICogbWV0YWRhdGFWYWx1ZSBmb3IgdGhhdCBrZXkgd2lsbCBiZSBvdmVyd3JpdHRlbi5cbiAqIEBwYXJhbSBtZXRhZGF0YVZhbHVlIC0gVGhlIHZhbHVlIGZvciB0aGUgbWV0YWRhdGEgZW50cnkuXG4gKiBAcmV0dXJucyBBIGRlY29yYXRvciBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gbWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpIHtcbiAgICBmdW5jdGlvbiBkZWNvcmF0b3IodGFyZ2V0LCBwcm9wZXJ0eUtleSkge1xuICAgICAgICAvLyAxLiBBc3NlcnQ6IEYgaGFzIGEgW1tNZXRhZGF0YUtleV1dIGludGVybmFsIHNsb3Qgd2hvc2UgdmFsdWUgaXMgYW4gRUNNQVNjcmlwdCBsYW5ndWFnZSB2YWx1ZSwgb3IgdW5kZWZpbmVkLlxuICAgICAgICAvLyAyLiBBc3NlcnQ6IEYgaGFzIGEgW1tNZXRhZGF0YVZhbHVlXV0gaW50ZXJuYWwgc2xvdCB3aG9zZSB2YWx1ZSBpcyBhbiBFQ01BU2NyaXB0IGxhbmd1YWdlIHZhbHVlLCBvciB1bmRlZmluZWQuXG4gICAgICAgIC8vIDMuIElmIFR5cGUodGFyZ2V0KSBpcyBub3QgT2JqZWN0LCB0aHJvdyBhIFR5cGVFcnJvciBleGNlcHRpb24uXG4gICAgICAgIGlmICghaXNPYmplY3QodGFyZ2V0KSkge1xuICAgICAgICAgICAgdGhyb3cgJHR5cGVFcnJvcignQG1ldGFkYXRhJywgW21ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlLCB0YXJnZXQsIHByb3BlcnR5S2V5XSwgJ3RhcmdldCcsIHRhcmdldCwgJ09iamVjdCBvciBGdW5jdGlvbicpO1xuICAgICAgICB9XG4gICAgICAgIC8vIDQuIElmIGtleSBpcyBub3QgdW5kZWZpbmVkIGFuZCBJc1Byb3BlcnR5S2V5KGtleSkgaXMgZmFsc2UsIHRocm93IGEgVHlwZUVycm9yIGV4Y2VwdGlvbi5cbiAgICAgICAgLy8gNS4gTGV0IG1ldGFkYXRhS2V5IGJlIHRoZSB2YWx1ZSBvZiBGJ3MgW1tNZXRhZGF0YUtleV1dIGludGVybmFsIHNsb3QuXG4gICAgICAgIC8vIDYuIExldCBtZXRhZGF0YVZhbHVlIGJlIHRoZSB2YWx1ZSBvZiBGJ3MgW1tNZXRhZGF0YVZhbHVlXV0gaW50ZXJuYWwgc2xvdC5cbiAgICAgICAgLy8gNy4gUGVyZm9ybSA/IHRhcmdldC5bW0RlZmluZU1ldGFkYXRhXV0obWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUsIHRhcmdldCwga2V5KS5cbiAgICAgICAgT3JkaW5hcnlEZWZpbmVPd25NZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSwgdGFyZ2V0LCBlbnN1cmVQcm9wZXJ0eUtleU9yVW5kZWZpbmVkKHByb3BlcnR5S2V5KSk7XG4gICAgICAgIC8vIDguIFJldHVybiB1bmRlZmluZWQuXG4gICAgfVxuICAgIHJldHVybiBkZWNvcmF0b3I7XG59XG5mdW5jdGlvbiBkZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIHByb3BlcnR5S2V5LCBhdHRyaWJ1dGVzKSB7XG4gICAgaWYgKHByb3BlcnR5S2V5ICE9PSB2b2lkIDApIHtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGRlY29yYXRvcnMpKSB7XG4gICAgICAgICAgICB0aHJvdyAkdHlwZUVycm9yKCdNZXRhZGF0YS5kZWNvcmF0ZScsIFtkZWNvcmF0b3JzLCB0YXJnZXQsIHByb3BlcnR5S2V5LCBhdHRyaWJ1dGVzXSwgJ2RlY29yYXRvcnMnLCBkZWNvcmF0b3JzLCAnQXJyYXknKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlzT2JqZWN0KHRhcmdldCkpIHtcbiAgICAgICAgICAgIHRocm93ICR0eXBlRXJyb3IoJ01ldGFkYXRhLmRlY29yYXRlJywgW2RlY29yYXRvcnMsIHRhcmdldCwgcHJvcGVydHlLZXksIGF0dHJpYnV0ZXNdLCAndGFyZ2V0JywgdGFyZ2V0LCAnT2JqZWN0IG9yIEZ1bmN0aW9uJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpc09iamVjdChhdHRyaWJ1dGVzKSAmJiAhaXNOdWxsT3JVbmRlZmluZWQoYXR0cmlidXRlcykpIHtcbiAgICAgICAgICAgIHRocm93ICR0eXBlRXJyb3IoJ01ldGFkYXRhLmRlY29yYXRlJywgW2RlY29yYXRvcnMsIHRhcmdldCwgcHJvcGVydHlLZXksIGF0dHJpYnV0ZXNdLCAnYXR0cmlidXRlcycsIGF0dHJpYnV0ZXMsICdPYmplY3QsIEZ1bmN0aW9uLCBudWxsLCBvciB1bmRlZmluZWQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXR0cmlidXRlcyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgYXR0cmlidXRlcyA9IHZvaWQgMDtcbiAgICAgICAgfVxuICAgICAgICBwcm9wZXJ0eUtleSA9IHRvUHJvcGVydHlLZXkocHJvcGVydHlLZXkpO1xuICAgICAgICByZXR1cm4gRGVjb3JhdGVQcm9wZXJ0eShkZWNvcmF0b3JzLCB0YXJnZXQsIHByb3BlcnR5S2V5LCBhdHRyaWJ1dGVzKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShkZWNvcmF0b3JzKSkge1xuICAgICAgICAgICAgdGhyb3cgJHR5cGVFcnJvcignTWV0YWRhdGEuZGVjb3JhdGUnLCBbZGVjb3JhdG9ycywgdGFyZ2V0LCBwcm9wZXJ0eUtleSwgYXR0cmlidXRlc10sICdkZWNvcmF0b3JzJywgZGVjb3JhdG9ycywgJ0FycmF5Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiB0YXJnZXQgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRocm93ICR0eXBlRXJyb3IoJ01ldGFkYXRhLmRlY29yYXRlJywgW2RlY29yYXRvcnMsIHRhcmdldCwgcHJvcGVydHlLZXksIGF0dHJpYnV0ZXNdLCAndGFyZ2V0JywgdGFyZ2V0LCAnRnVuY3Rpb24nKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gRGVjb3JhdGVDb25zdHJ1Y3RvcihkZWNvcmF0b3JzLCB0YXJnZXQpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIERlY29yYXRlQ29uc3RydWN0b3IoZGVjb3JhdG9ycywgdGFyZ2V0KSB7XG4gICAgZm9yIChsZXQgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgY29uc3QgZGVjb3JhdG9yID0gZGVjb3JhdG9yc1tpXTtcbiAgICAgICAgY29uc3QgZGVjb3JhdGVkID0gZGVjb3JhdG9yKHRhcmdldCk7XG4gICAgICAgIGlmICghaXNOdWxsT3JVbmRlZmluZWQoZGVjb3JhdGVkKSkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBkZWNvcmF0ZWQgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyAkdHlwZUVycm9yKCdEZWNvcmF0ZUNvbnN0cnVjdG9yJywgW2RlY29yYXRvcnMsIHRhcmdldF0sICdkZWNvcmF0ZWQnLCBkZWNvcmF0ZWQsICdGdW5jdGlvbiwgbnVsbCwgb3IgdW5kZWZpbmVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0YXJnZXQgPSBkZWNvcmF0ZWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldDtcbn1cbmZ1bmN0aW9uIERlY29yYXRlUHJvcGVydHkoZGVjb3JhdG9ycywgdGFyZ2V0LCBwcm9wZXJ0eUtleSwgZGVzY3JpcHRvcikge1xuICAgIGZvciAobGV0IGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIGNvbnN0IGRlY29yYXRvciA9IGRlY29yYXRvcnNbaV07XG4gICAgICAgIGNvbnN0IGRlY29yYXRlZCA9IGRlY29yYXRvcih0YXJnZXQsIHByb3BlcnR5S2V5LCBkZXNjcmlwdG9yKTtcbiAgICAgICAgaWYgKCFpc051bGxPclVuZGVmaW5lZChkZWNvcmF0ZWQpKSB7XG4gICAgICAgICAgICBpZiAoIWlzT2JqZWN0KGRlY29yYXRlZCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyAkdHlwZUVycm9yKCdEZWNvcmF0ZVByb3BlcnR5JywgW2RlY29yYXRvcnMsIHRhcmdldCwgcHJvcGVydHlLZXksIGRlc2NyaXB0b3JdLCAnZGVjb3JhdGVkJywgZGVjb3JhdGVkLCAnT2JqZWN0LCBGdW5jdGlvbiwgbnVsbCwgb3IgdW5kZWZpbmVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZXNjcmlwdG9yID0gZGVjb3JhdGVkO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBkZXNjcmlwdG9yO1xufVxuZnVuY3Rpb24gJGRlZmluZShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSwgdGFyZ2V0LCBwcm9wZXJ0eUtleSkge1xuICAgIC8vIDEuIElmIFR5cGUodGFyZ2V0KSBpcyBub3QgT2JqZWN0LCB0aHJvdyBhIFR5cGVFcnJvciBleGNlcHRpb24uXG4gICAgaWYgKCFpc09iamVjdCh0YXJnZXQpKSB7XG4gICAgICAgIHRocm93ICR0eXBlRXJyb3IoJ01ldGFkYXRhLmRlZmluZScsIFttZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSwgdGFyZ2V0LCBwcm9wZXJ0eUtleV0sICd0YXJnZXQnLCB0YXJnZXQsICdPYmplY3Qgb3IgRnVuY3Rpb24nKTtcbiAgICB9XG4gICAgLy8gMi4gUmV0dXJuID8gdGFyZ2V0LltbRGVmaW5lTWV0YWRhdGFdXShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSwgcHJvcGVydHlLZXkpLlxuICAgIHJldHVybiBPcmRpbmFyeURlZmluZU93bk1ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlLCB0YXJnZXQsIHRvUHJvcGVydHlLZXlPclVuZGVmaW5lZChwcm9wZXJ0eUtleSkpO1xufVxuZnVuY3Rpb24gJGhhcyhtZXRhZGF0YUtleSwgdGFyZ2V0LCBwcm9wZXJ0eUtleSkge1xuICAgIC8vIDEuIElmIFR5cGUodGFyZ2V0KSBpcyBub3QgT2JqZWN0LCB0aHJvdyBhIFR5cGVFcnJvciBleGNlcHRpb24uXG4gICAgaWYgKCFpc09iamVjdCh0YXJnZXQpKSB7XG4gICAgICAgIHRocm93ICR0eXBlRXJyb3IoJ01ldGFkYXRhLmhhcycsIFttZXRhZGF0YUtleSwgdGFyZ2V0LCBwcm9wZXJ0eUtleV0sICd0YXJnZXQnLCB0YXJnZXQsICdPYmplY3Qgb3IgRnVuY3Rpb24nKTtcbiAgICB9XG4gICAgLy8gMi4gUmV0dXJuID8gdGFyZ2V0LltbSGFzTWV0YWRhdGFdXShtZXRhZGF0YUtleSwgcHJvcGVydHlLZXkpLlxuICAgIHJldHVybiBPcmRpbmFyeUhhc01ldGFkYXRhKG1ldGFkYXRhS2V5LCB0YXJnZXQsIHRvUHJvcGVydHlLZXlPclVuZGVmaW5lZChwcm9wZXJ0eUtleSkpO1xufVxuZnVuY3Rpb24gJGhhc093bihtZXRhZGF0YUtleSwgdGFyZ2V0LCBwcm9wZXJ0eUtleSkge1xuICAgIC8vIDEuIElmIFR5cGUodGFyZ2V0KSBpcyBub3QgT2JqZWN0LCB0aHJvdyBhIFR5cGVFcnJvciBleGNlcHRpb24uXG4gICAgaWYgKCFpc09iamVjdCh0YXJnZXQpKSB7XG4gICAgICAgIHRocm93ICR0eXBlRXJyb3IoJ01ldGFkYXRhLmhhc093bicsIFttZXRhZGF0YUtleSwgdGFyZ2V0LCBwcm9wZXJ0eUtleV0sICd0YXJnZXQnLCB0YXJnZXQsICdPYmplY3Qgb3IgRnVuY3Rpb24nKTtcbiAgICB9XG4gICAgLy8gMi4gUmV0dXJuID8gdGFyZ2V0LltbSGFzT3duXV0obWV0YWRhdGFLZXksIHByb3BlcnR5S2V5KS5cbiAgICByZXR1cm4gT3JkaW5hcnlIYXNPd25NZXRhZGF0YShtZXRhZGF0YUtleSwgdGFyZ2V0LCB0b1Byb3BlcnR5S2V5T3JVbmRlZmluZWQocHJvcGVydHlLZXkpKTtcbn1cbmZ1bmN0aW9uICRnZXQobWV0YWRhdGFLZXksIHRhcmdldCwgcHJvcGVydHlLZXkpIHtcbiAgICAvLyAxLiBJZiBUeXBlKHRhcmdldCkgaXMgbm90IE9iamVjdCwgdGhyb3cgYSBUeXBlRXJyb3IgZXhjZXB0aW9uLlxuICAgIGlmICghaXNPYmplY3QodGFyZ2V0KSkge1xuICAgICAgICB0aHJvdyAkdHlwZUVycm9yKCdNZXRhZGF0YS5nZXQnLCBbbWV0YWRhdGFLZXksIHRhcmdldCwgcHJvcGVydHlLZXldLCAndGFyZ2V0JywgdGFyZ2V0LCAnT2JqZWN0IG9yIEZ1bmN0aW9uJyk7XG4gICAgfVxuICAgIC8vIDIuIFJldHVybiA/IHRhcmdldC5bW0dldE1ldGFkYXRhXV0obWV0YWRhdGFLZXksIHByb3BlcnR5S2V5KS5cbiAgICByZXR1cm4gT3JkaW5hcnlHZXRNZXRhZGF0YShtZXRhZGF0YUtleSwgdGFyZ2V0LCB0b1Byb3BlcnR5S2V5T3JVbmRlZmluZWQocHJvcGVydHlLZXkpKTtcbn1cbmZ1bmN0aW9uICRnZXRPd24obWV0YWRhdGFLZXksIHRhcmdldCwgcHJvcGVydHlLZXkpIHtcbiAgICAvLyAxLiBJZiBUeXBlKHRhcmdldCkgaXMgbm90IE9iamVjdCwgdGhyb3cgYSBUeXBlRXJyb3IgZXhjZXB0aW9uLlxuICAgIGlmICghaXNPYmplY3QodGFyZ2V0KSkge1xuICAgICAgICB0aHJvdyAkdHlwZUVycm9yKCdNZXRhZGF0YS5nZXRPd24nLCBbbWV0YWRhdGFLZXksIHRhcmdldCwgcHJvcGVydHlLZXldLCAndGFyZ2V0JywgdGFyZ2V0LCAnT2JqZWN0IG9yIEZ1bmN0aW9uJyk7XG4gICAgfVxuICAgIC8vIDIuIFJldHVybiA/IHRhcmdldC5bW0dldE93bk1ldGFkYXRhXV0obWV0YWRhdGFLZXksIHByb3BlcnR5S2V5KS5cbiAgICByZXR1cm4gT3JkaW5hcnlHZXRPd25NZXRhZGF0YShtZXRhZGF0YUtleSwgdGFyZ2V0LCB0b1Byb3BlcnR5S2V5T3JVbmRlZmluZWQocHJvcGVydHlLZXkpKTtcbn1cbmZ1bmN0aW9uICRnZXRLZXlzKHRhcmdldCwgcHJvcGVydHlLZXkpIHtcbiAgICAvLyAxLiBJZiBUeXBlKHRhcmdldCkgaXMgbm90IE9iamVjdCwgdGhyb3cgYSBUeXBlRXJyb3IgZXhjZXB0aW9uLlxuICAgIGlmICghaXNPYmplY3QodGFyZ2V0KSkge1xuICAgICAgICB0aHJvdyAkdHlwZUVycm9yKCdNZXRhZGF0YS5nZXRLZXlzJywgW3RhcmdldCwgcHJvcGVydHlLZXldLCAndGFyZ2V0JywgdGFyZ2V0LCAnT2JqZWN0IG9yIEZ1bmN0aW9uJyk7XG4gICAgfVxuICAgIC8vIDIuIFJldHVybiA/IHRhcmdldC5bW0dldE1ldGFkYXRhS2V5c11dKHByb3BlcnR5S2V5KS5cbiAgICByZXR1cm4gT3JkaW5hcnlNZXRhZGF0YUtleXModGFyZ2V0LCB0b1Byb3BlcnR5S2V5T3JVbmRlZmluZWQocHJvcGVydHlLZXkpKTtcbn1cbmZ1bmN0aW9uICRnZXRPd25LZXlzKHRhcmdldCwgcHJvcGVydHlLZXkpIHtcbiAgICAvLyAxLiBJZiBUeXBlKHRhcmdldCkgaXMgbm90IE9iamVjdCwgdGhyb3cgYSBUeXBlRXJyb3IgZXhjZXB0aW9uLlxuICAgIGlmICghaXNPYmplY3QodGFyZ2V0KSkge1xuICAgICAgICB0aHJvdyAkdHlwZUVycm9yKCdNZXRhZGF0YS5nZXRPd25LZXlzJywgW3RhcmdldCwgcHJvcGVydHlLZXldLCAndGFyZ2V0JywgdGFyZ2V0LCAnT2JqZWN0IG9yIEZ1bmN0aW9uJyk7XG4gICAgfVxuICAgIC8vIDIuIFJldHVybiA/IHRhcmdldC5bW0dldE93bk1ldGFkYXRhS2V5c11dKHByb3BlcnR5S2V5KS5cbiAgICByZXR1cm4gT3JkaW5hcnlPd25NZXRhZGF0YUtleXModGFyZ2V0LCB0b1Byb3BlcnR5S2V5T3JVbmRlZmluZWQocHJvcGVydHlLZXkpKTtcbn1cbmZ1bmN0aW9uICRkZWxldGUobWV0YWRhdGFLZXksIHRhcmdldCwgcHJvcGVydHlLZXkpIHtcbiAgICAvLyAxLiBJZiBUeXBlKHRhcmdldCkgaXMgbm90IE9iamVjdCwgdGhyb3cgYSBUeXBlRXJyb3IgZXhjZXB0aW9uLlxuICAgIGlmICghaXNPYmplY3QodGFyZ2V0KSkge1xuICAgICAgICB0aHJvdyAkdHlwZUVycm9yKCdNZXRhZGF0YS5kZWxldGUnLCBbbWV0YWRhdGFLZXksIHRhcmdldCwgcHJvcGVydHlLZXldLCAndGFyZ2V0JywgdGFyZ2V0LCAnT2JqZWN0IG9yIEZ1bmN0aW9uJyk7XG4gICAgfVxuICAgIC8vIDIuIFJldHVybiA/IHRhcmdldC5bW0RlbGV0ZU1ldGFkYXRhXV0obWV0YWRhdGFLZXksIHByb3BlcnR5S2V5KS5cbiAgICByZXR1cm4gT3JkaW5hcnlEZWxldGVNZXRhZGF0YSh0YXJnZXQsIG1ldGFkYXRhS2V5LCB0b1Byb3BlcnR5S2V5T3JVbmRlZmluZWQocHJvcGVydHlLZXkpKTtcbn1cbmNvbnN0IE1ldGFkYXRhID0ge1xuICAgIGRlZmluZTogJGRlZmluZSxcbiAgICBoYXM6ICRoYXMsXG4gICAgaGFzT3duOiAkaGFzT3duLFxuICAgIGdldDogJGdldCxcbiAgICBnZXRPd246ICRnZXRPd24sXG4gICAgZ2V0S2V5czogJGdldEtleXMsXG4gICAgZ2V0T3duS2V5czogJGdldE93bktleXMsXG4gICAgZGVsZXRlOiAkZGVsZXRlLFxufTtcbmZ1bmN0aW9uIGRlZihvYmosIGtleSwgdmFsdWUpIHtcbiAgICBSZWZsZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG4gICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICB2YWx1ZSxcbiAgICB9KTtcbn1cbmRlZihNZXRhZGF0YSwgJyRJbnRlcm5hbCcsIG1ldGFkYXRhSW50ZXJuYWxTbG90KTtcbmNvbnN0IGhhc01ldGFkYXRhID0gJ21ldGFkYXRhJyBpbiBSZWZsZWN0O1xuY29uc3QgaGFzRGVjb3JhdGUgPSAnZGVjb3JhdGUnIGluIFJlZmxlY3Q7XG5jb25zdCBoYXNEZWZpbmVNZXRhZGF0YSA9ICdkZWZpbmVNZXRhZGF0YScgaW4gUmVmbGVjdDtcbmNvbnN0IGhhc0hhc01ldGFkYXRhID0gJ2hhc01ldGFkYXRhJyBpbiBSZWZsZWN0O1xuY29uc3QgaGFzSGFzT3duTWV0YWRhdGEgPSAnaGFzT3duTWV0YWRhdGEnIGluIFJlZmxlY3Q7XG5jb25zdCBoYXNHZXRNZXRhZGF0YSA9ICdnZXRNZXRhZGF0YScgaW4gUmVmbGVjdDtcbmNvbnN0IGhhc0dldE93bk1ldGFkYXRhID0gJ2dldE93bk1ldGFkYXRhJyBpbiBSZWZsZWN0O1xuY29uc3QgaGFzR2V0TWV0YWRhdGFLZXlzID0gJ2dldE1ldGFkYXRhS2V5cycgaW4gUmVmbGVjdDtcbmNvbnN0IGhhc0dldE93bk1ldGFkYXRhS2V5cyA9ICdnZXRPd25NZXRhZGF0YUtleXMnIGluIFJlZmxlY3Q7XG5jb25zdCBoYXNEZWxldGVNZXRhZGF0YSA9ICdkZWxldGVNZXRhZGF0YScgaW4gUmVmbGVjdDtcbmNvbnN0IGhhc1NvbWUgPSAoaGFzTWV0YWRhdGEgfHxcbiAgICBoYXNEZWNvcmF0ZSB8fFxuICAgIGhhc0RlZmluZU1ldGFkYXRhIHx8XG4gICAgaGFzSGFzTWV0YWRhdGEgfHxcbiAgICBoYXNIYXNPd25NZXRhZGF0YSB8fFxuICAgIGhhc0dldE1ldGFkYXRhIHx8XG4gICAgaGFzR2V0T3duTWV0YWRhdGEgfHxcbiAgICBoYXNHZXRNZXRhZGF0YUtleXMgfHxcbiAgICBoYXNHZXRPd25NZXRhZGF0YUtleXMgfHxcbiAgICBoYXNEZWxldGVNZXRhZGF0YSk7XG5jb25zdCBoYXNBbGwgPSAoaGFzTWV0YWRhdGEgJiZcbiAgICBoYXNEZWNvcmF0ZSAmJlxuICAgIGhhc0RlZmluZU1ldGFkYXRhICYmXG4gICAgaGFzSGFzTWV0YWRhdGEgJiZcbiAgICBoYXNIYXNPd25NZXRhZGF0YSAmJlxuICAgIGhhc0dldE1ldGFkYXRhICYmXG4gICAgaGFzR2V0T3duTWV0YWRhdGEgJiZcbiAgICBoYXNHZXRNZXRhZGF0YUtleXMgJiZcbiAgICBoYXNHZXRPd25NZXRhZGF0YUtleXMgJiZcbiAgICBoYXNEZWxldGVNZXRhZGF0YSk7XG5pZiAoaGFzU29tZSAmJiAhaGFzQWxsKSB7XG4gICAgLy8gVGhpcyBpcyB0ZW1wb3JhcnkgdW50aWwgd2UgaGF2ZSB0aGUgcmVwb3J0ZXIgLyBsb2dnaW5nIGNvbXBvbmVudCB3b3JraW5nIHByb3Blcmx5LlxuICAgIC8vIFdlIHNob3VsZCBraW5kIG9mIHRocm93IGhlcmUsIGJ1dCBpdCdzIGEgYml0IGhhcnNoIHRvIGNvbXBsZXRlbHkgc3RvcCBBdXJlbGlhIGZyb20gbG9hZGluZyBmb3Igc29tZXRoaW5nIHRoYXQncyBub3QgZ3VhcmFudGVlZCB0byBmYWlsLFxuICAgIC8vIHNvIGp1c3QgbG9nIGEgd2FybmluZyBpbnN0ZWFkLlxuICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbnNvbGUsIG5vLXVuZGVmLCBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXRzLWlnbm9yZSAqL1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBjb25zb2xlLndhcm4oJ1BhcnRpYWwgZXhpc3RpbmcgUmVmbGVjdC5tZXRhZGF0YSBwb2x5ZmlsbCBmb3VuZC4gV29ya2luZyBlbnZpcm9ubWVudCBjYW5ub3QgYmUgZ3VhcmFudGVlZC4gUGxlYXNlIGZpbGUgYW4gaXNzdWUgYXQgaHR0cHM6Ly9naXRodWIuY29tL2F1cmVsaWEvYXVyZWxpYS9pc3N1ZXMgc28gdGhhdCB3ZSBjYW4gbG9vayBpbnRvIGNvbXBhdGliaWxpdHkgb3B0aW9ucyBmb3IgdGhpcyBzY2VuYXJpby4nKTtcbn1cbmlmICghaGFzTWV0YWRhdGEpIHtcbiAgICBkZWYoUmVmbGVjdCwgJ21ldGFkYXRhJywgbWV0YWRhdGEpO1xufVxuaWYgKCFoYXNEZWNvcmF0ZSkge1xuICAgIGRlZihSZWZsZWN0LCAnZGVjb3JhdGUnLCBkZWNvcmF0ZSk7XG59XG5pZiAoIWhhc0RlZmluZU1ldGFkYXRhKSB7XG4gICAgZGVmKFJlZmxlY3QsICdkZWZpbmVNZXRhZGF0YScsICRkZWZpbmUpO1xufVxuaWYgKCFoYXNIYXNNZXRhZGF0YSkge1xuICAgIGRlZihSZWZsZWN0LCAnaGFzTWV0YWRhdGEnLCAkaGFzKTtcbn1cbmlmICghaGFzSGFzT3duTWV0YWRhdGEpIHtcbiAgICBkZWYoUmVmbGVjdCwgJ2hhc093bk1ldGFkYXRhJywgJGhhc093bik7XG59XG5pZiAoIWhhc0dldE1ldGFkYXRhKSB7XG4gICAgZGVmKFJlZmxlY3QsICdnZXRNZXRhZGF0YScsICRnZXQpO1xufVxuaWYgKCFoYXNHZXRPd25NZXRhZGF0YSkge1xuICAgIGRlZihSZWZsZWN0LCAnZ2V0T3duTWV0YWRhdGEnLCAkZ2V0T3duKTtcbn1cbmlmICghaGFzR2V0TWV0YWRhdGFLZXlzKSB7XG4gICAgZGVmKFJlZmxlY3QsICdnZXRNZXRhZGF0YUtleXMnLCAkZ2V0S2V5cyk7XG59XG5pZiAoIWhhc0dldE93bk1ldGFkYXRhS2V5cykge1xuICAgIGRlZihSZWZsZWN0LCAnZ2V0T3duTWV0YWRhdGFLZXlzJywgJGdldE93bktleXMpO1xufVxuaWYgKCFoYXNEZWxldGVNZXRhZGF0YSkge1xuICAgIGRlZihSZWZsZWN0LCAnZGVsZXRlTWV0YWRhdGEnLCAkZGVsZXRlKTtcbn1cbmV4cG9ydCB7IE1ldGFkYXRhLCBtZXRhZGF0YSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIiwiLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVubmVjZXNzYXJ5LXR5cGUtYXNzZXJ0aW9uICovXG5leHBvcnQgY2xhc3MgQ29uZmlndXJhYmxlUm91dGUge1xuICAgIGNvbnN0cnVjdG9yKHBhdGgsIGNhc2VTZW5zaXRpdmUsIGhhbmRsZXIpIHtcbiAgICAgICAgdGhpcy5wYXRoID0gcGF0aDtcbiAgICAgICAgdGhpcy5jYXNlU2Vuc2l0aXZlID0gY2FzZVNlbnNpdGl2ZTtcbiAgICAgICAgdGhpcy5oYW5kbGVyID0gaGFuZGxlcjtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgRW5kcG9pbnQge1xuICAgIGNvbnN0cnVjdG9yKHJvdXRlLCBwYXJhbU5hbWVzKSB7XG4gICAgICAgIHRoaXMucm91dGUgPSByb3V0ZTtcbiAgICAgICAgdGhpcy5wYXJhbU5hbWVzID0gcGFyYW1OYW1lcztcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgUmVjb2duaXplZFJvdXRlIHtcbiAgICBjb25zdHJ1Y3RvcihlbmRwb2ludCwgcGFyYW1zLCBzZWFyY2hQYXJhbXMsIGlzRHluYW1pYywgcXVlcnlTdHJpbmcpIHtcbiAgICAgICAgdGhpcy5lbmRwb2ludCA9IGVuZHBvaW50O1xuICAgICAgICB0aGlzLnBhcmFtcyA9IHBhcmFtcztcbiAgICAgICAgdGhpcy5zZWFyY2hQYXJhbXMgPSBzZWFyY2hQYXJhbXM7XG4gICAgICAgIHRoaXMuaXNEeW5hbWljID0gaXNEeW5hbWljO1xuICAgICAgICB0aGlzLnF1ZXJ5U3RyaW5nID0gcXVlcnlTdHJpbmc7XG4gICAgfVxufVxuY2xhc3MgQ2FuZGlkYXRlIHtcbiAgICBjb25zdHJ1Y3RvcihjaGFycywgc3RhdGVzLCBza2lwcGVkU3RhdGVzLCByZXN1bHQpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB0aGlzLmNoYXJzID0gY2hhcnM7XG4gICAgICAgIHRoaXMuc3RhdGVzID0gc3RhdGVzO1xuICAgICAgICB0aGlzLnNraXBwZWRTdGF0ZXMgPSBza2lwcGVkU3RhdGVzO1xuICAgICAgICB0aGlzLnJlc3VsdCA9IHJlc3VsdDtcbiAgICAgICAgdGhpcy5oZWFkID0gc3RhdGVzW3N0YXRlcy5sZW5ndGggLSAxXTtcbiAgICAgICAgdGhpcy5lbmRwb2ludCA9IChfYSA9IHRoaXMuaGVhZCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmVuZHBvaW50O1xuICAgIH1cbiAgICBhZHZhbmNlKGNoKSB7XG4gICAgICAgIGNvbnN0IHsgY2hhcnMsIHN0YXRlcywgc2tpcHBlZFN0YXRlcywgcmVzdWx0IH0gPSB0aGlzO1xuICAgICAgICBsZXQgc3RhdGVUb0FkZCA9IG51bGw7XG4gICAgICAgIGxldCBtYXRjaENvdW50ID0gMDtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSBzdGF0ZXNbc3RhdGVzLmxlbmd0aCAtIDFdO1xuICAgICAgICBmdW5jdGlvbiAkcHJvY2VzcyhuZXh0U3RhdGUsIHNraXBwZWRTdGF0ZSkge1xuICAgICAgICAgICAgaWYgKG5leHRTdGF0ZS5pc01hdGNoKGNoKSkge1xuICAgICAgICAgICAgICAgIGlmICgrK21hdGNoQ291bnQgPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGVUb0FkZCA9IG5leHRTdGF0ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5hZGQobmV3IENhbmRpZGF0ZShjaGFycy5jb25jYXQoY2gpLCBzdGF0ZXMuY29uY2F0KG5leHRTdGF0ZSksIHNraXBwZWRTdGF0ZSA9PT0gbnVsbCA/IHNraXBwZWRTdGF0ZXMgOiBza2lwcGVkU3RhdGVzLmNvbmNhdChza2lwcGVkU3RhdGUpLCByZXN1bHQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc3RhdGUuc2VnbWVudCA9PT0gbnVsbCAmJiBuZXh0U3RhdGUuaXNPcHRpb25hbCAmJiBuZXh0U3RhdGUubmV4dFN0YXRlcyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGlmIChuZXh0U3RhdGUubmV4dFN0YXRlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgJHtuZXh0U3RhdGUubmV4dFN0YXRlcy5sZW5ndGh9IG5leHRTdGF0ZXNgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3Qgc2VwYXJhdG9yID0gbmV4dFN0YXRlLm5leHRTdGF0ZXNbMF07XG4gICAgICAgICAgICAgICAgaWYgKCFzZXBhcmF0b3IuaXNTZXBhcmF0b3IpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBOb3QgYSBzZXBhcmF0b3JgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNlcGFyYXRvci5uZXh0U3RhdGVzICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgJG5leHRTdGF0ZSBvZiBzZXBhcmF0b3IubmV4dFN0YXRlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHByb2Nlc3MoJG5leHRTdGF0ZSwgbmV4dFN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RhdGUuaXNEeW5hbWljKSB7XG4gICAgICAgICAgICAkcHJvY2VzcyhzdGF0ZSwgbnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0YXRlLm5leHRTdGF0ZXMgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgbmV4dFN0YXRlIG9mIHN0YXRlLm5leHRTdGF0ZXMpIHtcbiAgICAgICAgICAgICAgICAkcHJvY2VzcyhuZXh0U3RhdGUsIG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChzdGF0ZVRvQWRkICE9PSBudWxsKSB7XG4gICAgICAgICAgICBzdGF0ZXMucHVzaCh0aGlzLmhlYWQgPSBzdGF0ZVRvQWRkKTtcbiAgICAgICAgICAgIGNoYXJzLnB1c2goY2gpO1xuICAgICAgICAgICAgaWYgKHN0YXRlVG9BZGQuZW5kcG9pbnQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVuZHBvaW50ID0gc3RhdGVUb0FkZC5lbmRwb2ludDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobWF0Y2hDb3VudCA9PT0gMCkge1xuICAgICAgICAgICAgcmVzdWx0LnJlbW92ZSh0aGlzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmaW5hbGl6ZSgpIHtcbiAgICAgICAgZnVuY3Rpb24gY29sbGVjdFNraXBwZWRTdGF0ZXMoc2tpcHBlZFN0YXRlcywgc3RhdGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG5leHRTdGF0ZXMgPSBzdGF0ZS5uZXh0U3RhdGVzO1xuICAgICAgICAgICAgaWYgKG5leHRTdGF0ZXMgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpZiAobmV4dFN0YXRlcy5sZW5ndGggPT09IDEgJiYgbmV4dFN0YXRlc1swXS5zZWdtZW50ID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbGxlY3RTa2lwcGVkU3RhdGVzKHNraXBwZWRTdGF0ZXMsIG5leHRTdGF0ZXNbMF0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBuZXh0U3RhdGUgb2YgbmV4dFN0YXRlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5leHRTdGF0ZS5pc09wdGlvbmFsICYmIG5leHRTdGF0ZS5lbmRwb2ludCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNraXBwZWRTdGF0ZXMucHVzaChuZXh0U3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXh0U3RhdGUubmV4dFN0YXRlcyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0ICRuZXh0U3RhdGUgb2YgbmV4dFN0YXRlLm5leHRTdGF0ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxlY3RTa2lwcGVkU3RhdGVzKHNraXBwZWRTdGF0ZXMsICRuZXh0U3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbGxlY3RTa2lwcGVkU3RhdGVzKHRoaXMuc2tpcHBlZFN0YXRlcywgdGhpcy5oZWFkKTtcbiAgICB9XG4gICAgZ2V0UGFyYW1zKCkge1xuICAgICAgICBjb25zdCB7IHN0YXRlcywgY2hhcnMsIGVuZHBvaW50IH0gPSB0aGlzO1xuICAgICAgICBjb25zdCBwYXJhbXMgPSB7fTtcbiAgICAgICAgLy8gRmlyc3QgaW5pdGlhbGl6ZSBhbGwgcHJvcGVydGllcyB3aXRoIHVuZGVmaW5lZCBzbyB0aGV5IGFsbCBleGlzdCAoZXZlbiBpZiB0aGV5J3JlIG5vdCBmaWxsZWQsIGUuZy4gbm9uLW1hdGNoZWQgb3B0aW9uYWwgcGFyYW1zKVxuICAgICAgICBmb3IgKGNvbnN0IG5hbWUgb2YgZW5kcG9pbnQucGFyYW1OYW1lcykge1xuICAgICAgICAgICAgcGFyYW1zW25hbWVdID0gdm9pZCAwO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IHN0YXRlcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICBjb25zdCBzdGF0ZSA9IHN0YXRlc1tpXTtcbiAgICAgICAgICAgIGlmIChzdGF0ZS5pc0R5bmFtaWMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gc3RhdGUuc2VnbWVudC5uYW1lO1xuICAgICAgICAgICAgICAgIGlmIChwYXJhbXNbbmFtZV0gPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgICAgICBwYXJhbXNbbmFtZV0gPSBjaGFyc1tpXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcmFtc1tuYW1lXSArPSBjaGFyc1tpXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhcmFtcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29tcGFyZXMgdGhpcyBjYW5kaWRhdGUgdG8gYW5vdGhlciBjYW5kaWRhdGUgdG8gZGV0ZXJtaW5lIHRoZSBjb3JyZWN0IHNvcnRpbmcgb3JkZXIuXG4gICAgICpcbiAgICAgKiBUaGlzIGFsZ29yaXRobSBpcyBkaWZmZXJlbnQgZnJvbSBgc29ydFNvbHV0aW9uc2AgaW4gdjEncyByb3V0ZS1yZWNvZ25pemVyIGluIHRoYXQgaXQgY29tcGFyZXNcbiAgICAgKiB0aGUgY2FuZGlkYXRlcyBzZWdtZW50LWJ5LXNlZ21lbnQsIHJhdGhlciB0aGFuIG1lcmVseSBjb21wYXJpbmcgdGhlIGN1bXVsYXRpdmUgb2Ygc2VnbWVudCB0eXBlc1xuICAgICAqXG4gICAgICogVGhpcyByZXNvbHZlcyB2MSdzIGFtYmlndWl0eSBpbiBzaXR1YXRpb25zIGxpa2UgYC9mb28vOmlkL2JhcmAgdnMuIGAvZm9vL2Jhci86aWRgLCB3aGljaCBoYWQgdGhlXG4gICAgICogc2FtZSBzb3J0aW5nIHZhbHVlIGJlY2F1c2UgdGhleSBib3RoIGNvbnNpc3Qgb2YgdHdvIHN0YXRpYyBzZWdtZW50cyBhbmQgb25lIGR5bmFtaWMgc2VnbWVudC5cbiAgICAgKlxuICAgICAqIFdpdGggdGhpcyBhbGdvcml0aG0sIGAvZm9vL2Jhci86aWRgIHdvdWxkIGFsd2F5cyBiZSBzb3J0ZWQgZmlyc3QgYmVjYXVzZSB0aGUgc2Vjb25kIHNlZ21lbnQgaXMgZGlmZmVyZW50LFxuICAgICAqIGFuZCBzdGF0aWMgd2lucyBvdmVyIGR5bmFtaWMuXG4gICAgICpcbiAgICAgKiAjIyMgTk9URVxuICAgICAqIFRoaXMgYWxnb3JpdGhtIHZpb2xhdGVzIHNvbWUgb2YgdGhlIGludmFyaWFudHMgb2YgdjEncyBhbGdvcml0aG0sXG4gICAgICogYnV0IHRob3NlIGludmFyaWFudHMgd2VyZSBhcmd1YWJseSBub3QgdmVyeSBzb3VuZCB0byBiZWdpbiB3aXRoLiBFeGFtcGxlOlxuICAgICAqXG4gICAgICogYC9mb28vKnBhdGgvYmFyL2JhemAgdnMuIGAvZm9vL2Jhci8qcGF0aDEvKnBhdGgyYFxuICAgICAqIC0gaW4gdjEsIHRoZSBmaXJzdCB3b3VsZCB3aW4gYmVjYXVzZSB0aGF0IG1hdGNoIGhhcyBmZXdlciBzdGFyc1xuICAgICAqIC0gaW4gdjIsIHRoZSBzZWNvbmQgd2lsbCB3aW4gYmVjYXVzZSB0aGVyZSBpcyBhIGJpZ2dlciBzdGF0aWMgbWF0Y2ggYXQgdGhlIHN0YXJ0IG9mIHRoZSBwYXR0ZXJuXG4gICAgICpcbiAgICAgKiBUaGUgYWxnb3JpdGhtIHNob3VsZCBiZSBtb3JlIGxvZ2ljYWwgYW5kIGVhc2llciB0byByZWFzb24gYWJvdXQgaW4gdjIsIGJ1dCBpdCdzIGltcG9ydGFudCB0byBiZSBhd2FyZSBvZlxuICAgICAqIHN1YnRsZSBkaWZmZXJlbmNlIGxpa2UgdGhpcyB3aGljaCBtaWdodCBzdXJwcmlzZSBzb21lIHVzZXJzIHdobyBoYXBwZW5lZCB0byByZWx5IG9uIHRoaXMgYmVoYXZpb3IgZnJvbSB2MSxcbiAgICAgKiBpbnRlbnRpb25hbGx5IG9yIHVuaW50ZW50aW9uYWxseS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBiIC0gVGhlIGNhbmRpZGF0ZSB0byBjb21wYXJlIHRoaXMgdG8uXG4gICAgICogUGFyYW1ldGVyIG5hbWUgaXMgYGJgIGJlY2F1c2UgdGhlIG1ldGhvZCBzaG91bGQgYmUgdXNlZCBsaWtlIHNvOiBgc3RhdGVzLnNvcnQoKGEsIGIpID0+IGEuY29tcGFyZVRvKGIpKWAuXG4gICAgICogVGhpcyB3aWxsIGJyaW5nIHRoZSBjYW5kaWRhdGUgd2l0aCB0aGUgaGlnaGVzdCBzY29yZSB0byB0aGUgZmlyc3QgcG9zaXRpb24gb2YgdGhlIGFycmF5LlxuICAgICAqL1xuICAgIGNvbXBhcmVUbyhiKSB7XG4gICAgICAgIGNvbnN0IHN0YXRlc0EgPSB0aGlzLnN0YXRlcztcbiAgICAgICAgY29uc3Qgc3RhdGVzQiA9IGIuc3RhdGVzO1xuICAgICAgICBmb3IgKGxldCBpQSA9IDAsIGlCID0gMCwgaWkgPSBNYXRoLm1heChzdGF0ZXNBLmxlbmd0aCwgc3RhdGVzQi5sZW5ndGgpOyBpQSA8IGlpOyArK2lBKSB7XG4gICAgICAgICAgICBsZXQgc3RhdGVBID0gc3RhdGVzQVtpQV07XG4gICAgICAgICAgICBpZiAoc3RhdGVBID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBzdGF0ZUIgPSBzdGF0ZXNCW2lCXTtcbiAgICAgICAgICAgIGlmIChzdGF0ZUIgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBzZWdtZW50QSA9IHN0YXRlQS5zZWdtZW50O1xuICAgICAgICAgICAgbGV0IHNlZ21lbnRCID0gc3RhdGVCLnNlZ21lbnQ7XG4gICAgICAgICAgICBpZiAoc2VnbWVudEEgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpZiAoc2VnbWVudEIgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgKytpQjtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICgoc3RhdGVBID0gc3RhdGVzQVsrK2lBXSkgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2VnbWVudEEgPSBzdGF0ZUEuc2VnbWVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHNlZ21lbnRCID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaWYgKChzdGF0ZUIgPSBzdGF0ZXNCWysraUJdKSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2VnbWVudEIgPSBzdGF0ZUIuc2VnbWVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzZWdtZW50QS5raW5kIDwgc2VnbWVudEIua2luZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNlZ21lbnRBLmtpbmQgPiBzZWdtZW50Qi5raW5kKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgKytpQjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBza2lwcGVkU3RhdGVzQSA9IHRoaXMuc2tpcHBlZFN0YXRlcztcbiAgICAgICAgY29uc3Qgc2tpcHBlZFN0YXRlc0IgPSBiLnNraXBwZWRTdGF0ZXM7XG4gICAgICAgIGNvbnN0IHNraXBwZWRTdGF0ZXNBTGVuID0gc2tpcHBlZFN0YXRlc0EubGVuZ3RoO1xuICAgICAgICBjb25zdCBza2lwcGVkU3RhdGVzQkxlbiA9IHNraXBwZWRTdGF0ZXNCLmxlbmd0aDtcbiAgICAgICAgaWYgKHNraXBwZWRTdGF0ZXNBTGVuIDwgc2tpcHBlZFN0YXRlc0JMZW4pIHtcbiAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICB9XG4gICAgICAgIGlmIChza2lwcGVkU3RhdGVzQUxlbiA+IHNraXBwZWRTdGF0ZXNCTGVuKSB7XG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBza2lwcGVkU3RhdGVzQUxlbjsgKytpKSB7XG4gICAgICAgICAgICBjb25zdCBza2lwcGVkU3RhdGVBID0gc2tpcHBlZFN0YXRlc0FbaV07XG4gICAgICAgICAgICBjb25zdCBza2lwcGVkU3RhdGVCID0gc2tpcHBlZFN0YXRlc0JbaV07XG4gICAgICAgICAgICBpZiAoc2tpcHBlZFN0YXRlQS5sZW5ndGggPCBza2lwcGVkU3RhdGVCLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNraXBwZWRTdGF0ZUEubGVuZ3RoID4gc2tpcHBlZFN0YXRlQi5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gVGhpcyBzaG91bGQgb25seSBiZSBwb3NzaWJsZSB3aXRoIGEgc2luZ2xlIHBhdHRlcm4gd2l0aCBtdWx0aXBsZSBjb25zZWN1dGl2ZSBzdGFyIHNlZ21lbnRzLlxuICAgICAgICAvLyBUT0RPOiBwcm9iYWJseSB3YW50IHRvIHdhcm4gb3IgZXZlbiB0aHJvdyBoZXJlLCBidXQgbGVhdmUgaXQgYmUgZm9yIG5vdy5cbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxufVxuZnVuY3Rpb24gaGFzRW5kcG9pbnQoY2FuZGlkYXRlKSB7XG4gICAgcmV0dXJuIGNhbmRpZGF0ZS5oZWFkLmVuZHBvaW50ICE9PSBudWxsO1xufVxuZnVuY3Rpb24gY29tcGFyZUNoYWlucyhhLCBiKSB7XG4gICAgcmV0dXJuIGEuY29tcGFyZVRvKGIpO1xufVxuY2xhc3MgUmVjb2duaXplUmVzdWx0IHtcbiAgICBjb25zdHJ1Y3Rvcihyb290U3RhdGUpIHtcbiAgICAgICAgdGhpcy5jYW5kaWRhdGVzID0gW107XG4gICAgICAgIHRoaXMuY2FuZGlkYXRlcyA9IFtuZXcgQ2FuZGlkYXRlKFsnJ10sIFtyb290U3RhdGVdLCBbXSwgdGhpcyldO1xuICAgIH1cbiAgICBnZXQgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FuZGlkYXRlcy5sZW5ndGggPT09IDA7XG4gICAgfVxuICAgIGdldFNvbHV0aW9uKCkge1xuICAgICAgICBjb25zdCBjYW5kaWRhdGVzID0gdGhpcy5jYW5kaWRhdGVzLmZpbHRlcihoYXNFbmRwb2ludCk7XG4gICAgICAgIGlmIChjYW5kaWRhdGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBjYW5kaWRhdGUgb2YgY2FuZGlkYXRlcykge1xuICAgICAgICAgICAgY2FuZGlkYXRlLmZpbmFsaXplKCk7XG4gICAgICAgIH1cbiAgICAgICAgY2FuZGlkYXRlcy5zb3J0KGNvbXBhcmVDaGFpbnMpO1xuICAgICAgICByZXR1cm4gY2FuZGlkYXRlc1swXTtcbiAgICB9XG4gICAgYWRkKGNhbmRpZGF0ZSkge1xuICAgICAgICB0aGlzLmNhbmRpZGF0ZXMucHVzaChjYW5kaWRhdGUpO1xuICAgIH1cbiAgICByZW1vdmUoY2FuZGlkYXRlKSB7XG4gICAgICAgIHRoaXMuY2FuZGlkYXRlcy5zcGxpY2UodGhpcy5jYW5kaWRhdGVzLmluZGV4T2YoY2FuZGlkYXRlKSwgMSk7XG4gICAgfVxuICAgIGFkdmFuY2UoY2gpIHtcbiAgICAgICAgY29uc3QgY2FuZGlkYXRlcyA9IHRoaXMuY2FuZGlkYXRlcy5zbGljZSgpO1xuICAgICAgICBmb3IgKGNvbnN0IGNhbmRpZGF0ZSBvZiBjYW5kaWRhdGVzKSB7XG4gICAgICAgICAgICBjYW5kaWRhdGUuYWR2YW5jZShjaCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgY2xhc3MgUm91dGVSZWNvZ25pemVyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5yb290U3RhdGUgPSBuZXcgU3RhdGUobnVsbCwgbnVsbCwgJycpO1xuICAgIH1cbiAgICBhZGQocm91dGVPclJvdXRlcykge1xuICAgICAgICBpZiAocm91dGVPclJvdXRlcyBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHJvdXRlIG9mIHJvdXRlT3JSb3V0ZXMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZChyb3V0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgcm91dGUgPSByb3V0ZU9yUm91dGVzO1xuICAgICAgICBjb25zdCAkcm91dGUgPSBuZXcgQ29uZmlndXJhYmxlUm91dGUocm91dGUucGF0aCwgcm91dGUuY2FzZVNlbnNpdGl2ZSA9PT0gdHJ1ZSwgcm91dGUuaGFuZGxlcik7XG4gICAgICAgIGNvbnN0IHBhcnRzID0gcGFyc2VQYXRoKCRyb3V0ZS5wYXRoKTtcbiAgICAgICAgY29uc3QgcGFyYW1OYW1lcyA9IFtdO1xuICAgICAgICBsZXQgc3RhdGUgPSB0aGlzLnJvb3RTdGF0ZTtcbiAgICAgICAgZm9yIChjb25zdCBwYXJ0IG9mIHBhcnRzKSB7XG4gICAgICAgICAgICAvLyBFYWNoIHNlZ21lbnQgYWx3YXlzIGJlZ2lucyB3aXRoIGEgc2xhc2gsIHNvIHdlIHJlcHJlc2VudCB0aGlzIHdpdGggYSBub24tc2VnbWVudCBzdGF0ZVxuICAgICAgICAgICAgc3RhdGUgPSBzdGF0ZS5hcHBlbmQobnVsbCwgJy8nKTtcbiAgICAgICAgICAgIHN3aXRjaCAocGFydC5jaGFyQXQoMCkpIHtcbiAgICAgICAgICAgICAgICBjYXNlICc6JzogeyAvLyByb3V0ZSBwYXJhbWV0ZXJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNPcHRpb25hbCA9IHBhcnQuZW5kc1dpdGgoJz8nKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IGlzT3B0aW9uYWwgPyBwYXJ0LnNsaWNlKDEsIC0xKSA6IHBhcnQuc2xpY2UoMSk7XG4gICAgICAgICAgICAgICAgICAgIHBhcmFtTmFtZXMucHVzaChuYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUgPSBuZXcgRHluYW1pY1NlZ21lbnQobmFtZSwgaXNPcHRpb25hbCkuYXBwZW5kVG8oc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSAnKic6IHsgLy8gZHluYW1pYyByb3V0ZVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gcGFydC5zbGljZSgxKTtcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1OYW1lcy5wdXNoKG5hbWUpO1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZSA9IG5ldyBTdGFyU2VnbWVudChuYW1lKS5hcHBlbmRUbyhzdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkZWZhdWx0OiB7IC8vIHN0YW5kYXJkIHBhdGggcm91dGVcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUgPSBuZXcgU3RhdGljU2VnbWVudChwYXJ0LCAkcm91dGUuY2FzZVNlbnNpdGl2ZSkuYXBwZW5kVG8oc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZW5kcG9pbnQgPSBuZXcgRW5kcG9pbnQoJHJvdXRlLCBwYXJhbU5hbWVzKTtcbiAgICAgICAgc3RhdGUuc2V0RW5kcG9pbnQoZW5kcG9pbnQpO1xuICAgIH1cbiAgICByZWNvZ25pemUocGF0aCkge1xuICAgICAgICBsZXQgc2VhcmNoUGFyYW1zO1xuICAgICAgICBsZXQgcXVlcnlTdHJpbmcgPSAnJztcbiAgICAgICAgY29uc3QgcXVlcnlTdGFydCA9IHBhdGguaW5kZXhPZignPycpO1xuICAgICAgICBpZiAocXVlcnlTdGFydCA+PSAwKSB7XG4gICAgICAgICAgICBxdWVyeVN0cmluZyA9IHBhdGguc2xpY2UocXVlcnlTdGFydCArIDEpO1xuICAgICAgICAgICAgcGF0aCA9IHBhdGguc2xpY2UoMCwgcXVlcnlTdGFydCk7XG4gICAgICAgICAgICBzZWFyY2hQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHF1ZXJ5U3RyaW5nKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHNlYXJjaFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTtcbiAgICAgICAgfVxuICAgICAgICBwYXRoID0gZGVjb2RlVVJJKHBhdGgpO1xuICAgICAgICBpZiAoIXBhdGguc3RhcnRzV2l0aCgnLycpKSB7XG4gICAgICAgICAgICBwYXRoID0gYC8ke3BhdGh9YDtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGF0aC5sZW5ndGggPiAxICYmIHBhdGguZW5kc1dpdGgoJy8nKSkge1xuICAgICAgICAgICAgcGF0aCA9IHBhdGguc2xpY2UoMCwgLTEpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBSZWNvZ25pemVSZXN1bHQodGhpcy5yb290U3RhdGUpO1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBwYXRoLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIGNvbnN0IGNoID0gcGF0aC5jaGFyQXQoaSk7XG4gICAgICAgICAgICByZXN1bHQuYWR2YW5jZShjaCk7XG4gICAgICAgICAgICBpZiAocmVzdWx0LmlzRW1wdHkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjYW5kaWRhdGUgPSByZXN1bHQuZ2V0U29sdXRpb24oKTtcbiAgICAgICAgaWYgKGNhbmRpZGF0ZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyBlbmRwb2ludCB9ID0gY2FuZGlkYXRlO1xuICAgICAgICBjb25zdCBwYXJhbXMgPSBjYW5kaWRhdGUuZ2V0UGFyYW1zKCk7XG4gICAgICAgIGNvbnN0IGlzRHluYW1pYyA9IGNhbmRpZGF0ZS5lbmRwb2ludC5wYXJhbU5hbWVzLmxlbmd0aCA+IDA7XG4gICAgICAgIHJldHVybiBuZXcgUmVjb2duaXplZFJvdXRlKGVuZHBvaW50LCBwYXJhbXMsIHNlYXJjaFBhcmFtcywgaXNEeW5hbWljLCBxdWVyeVN0cmluZyk7XG4gICAgfVxufVxuY2xhc3MgU3RhdGUge1xuICAgIGNvbnN0cnVjdG9yKHByZXZTdGF0ZSwgc2VnbWVudCwgdmFsdWUpIHtcbiAgICAgICAgdGhpcy5wcmV2U3RhdGUgPSBwcmV2U3RhdGU7XG4gICAgICAgIHRoaXMuc2VnbWVudCA9IHNlZ21lbnQ7XG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5uZXh0U3RhdGVzID0gbnVsbDtcbiAgICAgICAgdGhpcy5lbmRwb2ludCA9IG51bGw7XG4gICAgICAgIHN3aXRjaCAoc2VnbWVudCA9PT0gbnVsbCB8fCBzZWdtZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzZWdtZW50LmtpbmQpIHtcbiAgICAgICAgICAgIGNhc2UgMiAvKiBkeW5hbWljICovOlxuICAgICAgICAgICAgICAgIHRoaXMubGVuZ3RoID0gcHJldlN0YXRlLmxlbmd0aCArIDE7XG4gICAgICAgICAgICAgICAgdGhpcy5pc1NlcGFyYXRvciA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuaXNEeW5hbWljID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmlzT3B0aW9uYWwgPSBzZWdtZW50Lm9wdGlvbmFsO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAxIC8qIHN0YXIgKi86XG4gICAgICAgICAgICAgICAgdGhpcy5sZW5ndGggPSBwcmV2U3RhdGUubGVuZ3RoICsgMTtcbiAgICAgICAgICAgICAgICB0aGlzLmlzU2VwYXJhdG9yID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5pc0R5bmFtaWMgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuaXNPcHRpb25hbCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAzIC8qIHN0YXRpYyAqLzpcbiAgICAgICAgICAgICAgICB0aGlzLmxlbmd0aCA9IHByZXZTdGF0ZS5sZW5ndGggKyAxO1xuICAgICAgICAgICAgICAgIHRoaXMuaXNTZXBhcmF0b3IgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLmlzRHluYW1pYyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuaXNPcHRpb25hbCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSB1bmRlZmluZWQ6XG4gICAgICAgICAgICAgICAgdGhpcy5sZW5ndGggPSBwcmV2U3RhdGUgPT09IG51bGwgPyAwIDogcHJldlN0YXRlLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB0aGlzLmlzU2VwYXJhdG9yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmlzRHluYW1pYyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuaXNPcHRpb25hbCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFwcGVuZChzZWdtZW50LCB2YWx1ZSkge1xuICAgICAgICBsZXQgc3RhdGU7XG4gICAgICAgIGxldCBuZXh0U3RhdGVzID0gdGhpcy5uZXh0U3RhdGVzO1xuICAgICAgICBpZiAobmV4dFN0YXRlcyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgc3RhdGUgPSB2b2lkIDA7XG4gICAgICAgICAgICBuZXh0U3RhdGVzID0gdGhpcy5uZXh0U3RhdGVzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoc2VnbWVudCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgc3RhdGUgPSBuZXh0U3RhdGVzLmZpbmQocyA9PiBzLnZhbHVlID09PSB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzdGF0ZSA9IG5leHRTdGF0ZXMuZmluZChzID0+IHsgdmFyIF9hOyByZXR1cm4gKF9hID0gcy5zZWdtZW50KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZXF1YWxzKHNlZ21lbnQpOyB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RhdGUgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgbmV4dFN0YXRlcy5wdXNoKHN0YXRlID0gbmV3IFN0YXRlKHRoaXMsIHNlZ21lbnQsIHZhbHVlKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgIH1cbiAgICBzZXRFbmRwb2ludChlbmRwb2ludCkge1xuICAgICAgICBpZiAodGhpcy5lbmRwb2ludCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgYWRkIGFtYmlndW91cyByb3V0ZS4gVGhlIHBhdHRlcm4gJHtlbmRwb2ludC5yb3V0ZS5wYXRofSBjbGFzaGVzIHdpdGggJHt0aGlzLmVuZHBvaW50LnJvdXRlLnBhdGh9YCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbmRwb2ludCA9IGVuZHBvaW50O1xuICAgICAgICBpZiAodGhpcy5pc09wdGlvbmFsKSB7XG4gICAgICAgICAgICB0aGlzLnByZXZTdGF0ZS5zZXRFbmRwb2ludChlbmRwb2ludCk7XG4gICAgICAgICAgICBpZiAodGhpcy5wcmV2U3RhdGUuaXNTZXBhcmF0b3IgJiYgdGhpcy5wcmV2U3RhdGUucHJldlN0YXRlICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcmV2U3RhdGUucHJldlN0YXRlLnNldEVuZHBvaW50KGVuZHBvaW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBpc01hdGNoKGNoKSB7XG4gICAgICAgIGNvbnN0IHNlZ21lbnQgPSB0aGlzLnNlZ21lbnQ7XG4gICAgICAgIHN3aXRjaCAoc2VnbWVudCA9PT0gbnVsbCB8fCBzZWdtZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzZWdtZW50LmtpbmQpIHtcbiAgICAgICAgICAgIGNhc2UgMiAvKiBkeW5hbWljICovOlxuICAgICAgICAgICAgICAgIHJldHVybiAhdGhpcy52YWx1ZS5pbmNsdWRlcyhjaCk7XG4gICAgICAgICAgICBjYXNlIDEgLyogc3RhciAqLzpcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIGNhc2UgMyAvKiBzdGF0aWMgKi86XG4gICAgICAgICAgICBjYXNlIHVuZGVmaW5lZDpcbiAgICAgICAgICAgICAgICAvLyBzZWdtZW50IHNlcGFyYXRvcnMgKHNsYXNoZXMpIGFyZSBub24tc2VnbWVudHMuIFdlIGNvdWxkIHNheSByZXR1cm4gY2ggPT09ICcvJyBhcyB3ZWxsLCB0ZWNobmljYWxseS5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy52YWx1ZS5pbmNsdWRlcyhjaCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBpc05vdEVtcHR5KHNlZ21lbnQpIHtcbiAgICByZXR1cm4gc2VnbWVudC5sZW5ndGggPiAwO1xufVxuZnVuY3Rpb24gcGFyc2VQYXRoKHBhdGgpIHtcbiAgICAvLyBOb3JtYWxpemUgbGVhZGluZywgdHJhaWxpbmcgYW5kIGRvdWJsZSBzbGFzaGVzIGJ5IGlnbm9yaW5nIGVtcHR5IHNlZ21lbnRzXG4gICAgcmV0dXJuIHBhdGguc3BsaXQoJy8nKS5maWx0ZXIoaXNOb3RFbXB0eSk7XG59XG52YXIgU2VnbWVudEtpbmQ7XG4oZnVuY3Rpb24gKFNlZ21lbnRLaW5kKSB7XG4gICAgU2VnbWVudEtpbmRbU2VnbWVudEtpbmRbXCJzdGFyXCJdID0gMV0gPSBcInN0YXJcIjtcbiAgICBTZWdtZW50S2luZFtTZWdtZW50S2luZFtcImR5bmFtaWNcIl0gPSAyXSA9IFwiZHluYW1pY1wiO1xuICAgIFNlZ21lbnRLaW5kW1NlZ21lbnRLaW5kW1wic3RhdGljXCJdID0gM10gPSBcInN0YXRpY1wiO1xufSkoU2VnbWVudEtpbmQgfHwgKFNlZ21lbnRLaW5kID0ge30pKTtcbmNsYXNzIFN0YXRpY1NlZ21lbnQge1xuICAgIGNvbnN0cnVjdG9yKHZhbHVlLCBjYXNlU2Vuc2l0aXZlKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5jYXNlU2Vuc2l0aXZlID0gY2FzZVNlbnNpdGl2ZTtcbiAgICB9XG4gICAgZ2V0IGtpbmQoKSB7IHJldHVybiAzIC8qIHN0YXRpYyAqLzsgfVxuICAgIGFwcGVuZFRvKHN0YXRlKSB7XG4gICAgICAgIGNvbnN0IHsgdmFsdWUsIHZhbHVlOiB7IGxlbmd0aCB9IH0gPSB0aGlzO1xuICAgICAgICBpZiAodGhpcy5jYXNlU2Vuc2l0aXZlKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgc3RhdGUgPSBzdGF0ZS5hcHBlbmQoXG4gICAgICAgICAgICAgICAgLyogc2VnbWVudCAqLyB0aGlzLCBcbiAgICAgICAgICAgICAgICAvKiB2YWx1ZSAgICovIHZhbHVlLmNoYXJBdChpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2ggPSB2YWx1ZS5jaGFyQXQoaSk7XG4gICAgICAgICAgICAgICAgc3RhdGUgPSBzdGF0ZS5hcHBlbmQoXG4gICAgICAgICAgICAgICAgLyogc2VnbWVudCAqLyB0aGlzLCBcbiAgICAgICAgICAgICAgICAvKiB2YWx1ZSAgICovIGNoLnRvVXBwZXJDYXNlKCkgKyBjaC50b0xvd2VyQ2FzZSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgfVxuICAgIGVxdWFscyhiKSB7XG4gICAgICAgIHJldHVybiAoYi5raW5kID09PSAzIC8qIHN0YXRpYyAqLyAmJlxuICAgICAgICAgICAgYi5jYXNlU2Vuc2l0aXZlID09PSB0aGlzLmNhc2VTZW5zaXRpdmUgJiZcbiAgICAgICAgICAgIGIudmFsdWUgPT09IHRoaXMudmFsdWUpO1xuICAgIH1cbn1cbmNsYXNzIER5bmFtaWNTZWdtZW50IHtcbiAgICBjb25zdHJ1Y3RvcihuYW1lLCBvcHRpb25hbCkge1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLm9wdGlvbmFsID0gb3B0aW9uYWw7XG4gICAgfVxuICAgIGdldCBraW5kKCkgeyByZXR1cm4gMiAvKiBkeW5hbWljICovOyB9XG4gICAgYXBwZW5kVG8oc3RhdGUpIHtcbiAgICAgICAgc3RhdGUgPSBzdGF0ZS5hcHBlbmQoXG4gICAgICAgIC8qIHNlZ21lbnQgKi8gdGhpcywgXG4gICAgICAgIC8qIHZhbHVlICAgKi8gJy8nKTtcbiAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgIH1cbiAgICBlcXVhbHMoYikge1xuICAgICAgICByZXR1cm4gKGIua2luZCA9PT0gMiAvKiBkeW5hbWljICovICYmXG4gICAgICAgICAgICBiLm9wdGlvbmFsID09PSB0aGlzLm9wdGlvbmFsICYmXG4gICAgICAgICAgICBiLm5hbWUgPT09IHRoaXMubmFtZSk7XG4gICAgfVxufVxuY2xhc3MgU3RhclNlZ21lbnQge1xuICAgIGNvbnN0cnVjdG9yKG5hbWUpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB9XG4gICAgZ2V0IGtpbmQoKSB7IHJldHVybiAxIC8qIHN0YXIgKi87IH1cbiAgICBhcHBlbmRUbyhzdGF0ZSkge1xuICAgICAgICBzdGF0ZSA9IHN0YXRlLmFwcGVuZChcbiAgICAgICAgLyogc2VnbWVudCAqLyB0aGlzLCBcbiAgICAgICAgLyogdmFsdWUgICAqLyAnJyk7XG4gICAgICAgIHJldHVybiBzdGF0ZTtcbiAgICB9XG4gICAgZXF1YWxzKGIpIHtcbiAgICAgICAgcmV0dXJuIChiLmtpbmQgPT09IDEgLyogc3RhciAqLyAmJlxuICAgICAgICAgICAgYi5uYW1lID09PSB0aGlzLm5hbWUpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCIsImltcG9ydCB7IF9fZGVjb3JhdGUsIF9fbWV0YWRhdGEsIF9fcGFyYW0gfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IFJlcG9ydGVyIH0gZnJvbSAnQGF1cmVsaWEva2VybmVsJztcbmltcG9ydCB7IElET00sIElTY2hlZHVsZXIgfSBmcm9tICdAYXVyZWxpYS9ydW50aW1lJztcbmltcG9ydCB7IEhUTUxET00gfSBmcm9tICdAYXVyZWxpYS9ydW50aW1lLWh0bWwnO1xuaW1wb3J0IHsgUXVldWUgfSBmcm9tICcuL3F1ZXVlJztcbmxldCBCcm93c2VyTmF2aWdhdG9yID0gY2xhc3MgQnJvd3Nlck5hdmlnYXRvciB7XG4gICAgY29uc3RydWN0b3Ioc2NoZWR1bGVyLCBkb20pIHtcbiAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICAgIHRoaXMuYWxsb3dlZEV4ZWN1dGlvbkNvc3RXaXRoaW5UaWNrID0gMjsgLy8gTGltaXQgbm8gb2YgZXhlY3V0ZWQgYWN0aW9ucyB3aXRoaW4gdGhlIHNhbWUgUkFGIChkdWUgdG8gYnJvd3NlciBsaW1pdGF0aW9uKVxuICAgICAgICB0aGlzLmlzQWN0aXZlID0gZmFsc2U7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IHtcbiAgICAgICAgICAgIHVzZVVybEZyYWdtZW50SGFzaDogdHJ1ZSxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7IHJldHVybjsgfSxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5mb3J3YXJkZWRTdGF0ZSA9IHt9O1xuICAgICAgICB0aGlzLmhhbmRsZVBvcHN0YXRlID0gKGV2KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lbnF1ZXVlKHRoaXMsICdwb3BzdGF0ZScsIFtldl0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnByb2Nlc3NDYWxscyA9IChxQ2FsbCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY2FsbCA9IHFDYWxsO1xuICAgICAgICAgICAgaWYgKGNhbGwudGFyZ2V0ID09PSB0aGlzICYmIGNhbGwubWV0aG9kTmFtZSAhPT0gJ2ZvcndhcmRTdGF0ZScpIHtcbiAgICAgICAgICAgICAgICBjYWxsLnBhcmFtZXRlcnMucHVzaCh0aGlzLmZvcndhcmRlZFN0YXRlLnJlc29sdmUpO1xuICAgICAgICAgICAgICAgIHRoaXMuZm9yd2FyZGVkU3RhdGUucmVzb2x2ZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgLy8gU2hvdWxkIHdlIHN1cHByZXNzIHRoaXMgcG9wc3RhdGUgZXZlbnQ/XG4gICAgICAgICAgICAgICAgaWYgKGNhbGwubWV0aG9kTmFtZSA9PT0gJ3BvcHN0YXRlJyAmJiB0aGlzLmZvcndhcmRlZFN0YXRlLnN1cHByZXNzUG9wc3RhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbC5wYXJhbWV0ZXJzLnB1c2godHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZm9yd2FyZGVkU3RhdGUuc3VwcHJlc3NQb3BzdGF0ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXR5cGVzXG4gICAgICAgICAgICBjb25zdCBtZXRob2QgPSBjYWxsLnRhcmdldFtjYWxsLm1ldGhvZE5hbWVdO1xuICAgICAgICAgICAgUmVwb3J0ZXIud3JpdGUoMTAwMDAsICdERVFVRVVFJywgY2FsbC5tZXRob2ROYW1lLCBjYWxsLnBhcmFtZXRlcnMpO1xuICAgICAgICAgICAgaWYgKG1ldGhvZCkge1xuICAgICAgICAgICAgICAgIG1ldGhvZC5hcHBseShjYWxsLnRhcmdldCwgY2FsbC5wYXJhbWV0ZXJzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHFDYWxsLnJlc29sdmUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy53aW5kb3cgPSBkb20ud2luZG93O1xuICAgICAgICB0aGlzLmhpc3RvcnkgPSBkb20ud2luZG93Lmhpc3Rvcnk7XG4gICAgICAgIHRoaXMubG9jYXRpb24gPSBkb20ud2luZG93LmxvY2F0aW9uO1xuICAgICAgICB0aGlzLnBlbmRpbmdDYWxscyA9IG5ldyBRdWV1ZSh0aGlzLnByb2Nlc3NDYWxscyk7XG4gICAgfVxuICAgIGFjdGl2YXRlKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNBY3RpdmUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQnJvd3NlciBuYXZpZ2F0aW9uIGhhcyBhbHJlYWR5IGJlZW4gYWN0aXZhdGVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc0FjdGl2ZSA9IHRydWU7XG4gICAgICAgIHRoaXMub3B0aW9ucy5jYWxsYmFjayA9IG9wdGlvbnMuY2FsbGJhY2s7XG4gICAgICAgIGlmIChvcHRpb25zLnVzZVVybEZyYWdtZW50SGFzaCAhPSB2b2lkIDApIHtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy51c2VVcmxGcmFnbWVudEhhc2ggPSBvcHRpb25zLnVzZVVybEZyYWdtZW50SGFzaDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBlbmRpbmdDYWxscy5hY3RpdmF0ZSh7IHNjaGVkdWxlcjogdGhpcy5zY2hlZHVsZXIsIGFsbG93ZWRFeGVjdXRpb25Db3N0V2l0aGluVGljazogdGhpcy5hbGxvd2VkRXhlY3V0aW9uQ29zdFdpdGhpblRpY2sgfSk7XG4gICAgICAgIHRoaXMud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgdGhpcy5oYW5kbGVQb3BzdGF0ZSk7XG4gICAgfVxuICAgIGRlYWN0aXZhdGUoKSB7XG4gICAgICAgIGlmICghdGhpcy5pc0FjdGl2ZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdCcm93c2VyIG5hdmlnYXRpb24gaGFzIG5vdCBiZWVuIGFjdGl2YXRlZCcpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMud2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgdGhpcy5oYW5kbGVQb3BzdGF0ZSk7XG4gICAgICAgIHRoaXMucGVuZGluZ0NhbGxzLmRlYWN0aXZhdGUoKTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0geyB1c2VVcmxGcmFnbWVudEhhc2g6IHRydWUsIGNhbGxiYWNrOiAoKSA9PiB7IHJldHVybjsgfSB9O1xuICAgICAgICB0aGlzLmlzQWN0aXZlID0gZmFsc2U7XG4gICAgfVxuICAgIGdldCBsZW5ndGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhpc3RvcnkubGVuZ3RoO1xuICAgIH1cbiAgICBnZXQgc3RhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhpc3Rvcnkuc3RhdGU7XG4gICAgfVxuICAgIGdldCB2aWV3ZXJTdGF0ZSgpIHtcbiAgICAgICAgY29uc3QgeyBwYXRobmFtZSwgc2VhcmNoLCBoYXNoIH0gPSB0aGlzLmxvY2F0aW9uO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcGF0aDogcGF0aG5hbWUsXG4gICAgICAgICAgICBxdWVyeTogc2VhcmNoLFxuICAgICAgICAgICAgaGFzaCxcbiAgICAgICAgICAgIGluc3RydWN0aW9uOiB0aGlzLm9wdGlvbnMudXNlVXJsRnJhZ21lbnRIYXNoID8gaGFzaC5zbGljZSgxKSA6IHBhdGhuYW1lLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBnbyhkZWx0YSwgc3VwcHJlc3NQb3BzdGF0ZSA9IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVucXVldWUodGhpcy5oaXN0b3J5LCAnZ28nLCBbZGVsdGFdLCBzdXBwcmVzc1BvcHN0YXRlKTtcbiAgICB9XG4gICAgcHVzaE5hdmlnYXRvclN0YXRlKHN0YXRlKSB7XG4gICAgICAgIGNvbnN0IHsgdGl0bGUsIHBhdGggfSA9IHN0YXRlLmN1cnJlbnRFbnRyeTtcbiAgICAgICAgY29uc3QgZnJhZ21lbnQgPSB0aGlzLm9wdGlvbnMudXNlVXJsRnJhZ21lbnRIYXNoID8gJyMvJyA6ICcnO1xuICAgICAgICByZXR1cm4gdGhpcy5lbnF1ZXVlKHRoaXMuaGlzdG9yeSwgJ3B1c2hTdGF0ZScsIFtzdGF0ZSwgdGl0bGUsIGAke2ZyYWdtZW50fSR7cGF0aH1gXSk7XG4gICAgfVxuICAgIHJlcGxhY2VOYXZpZ2F0b3JTdGF0ZShzdGF0ZSkge1xuICAgICAgICBjb25zdCB7IHRpdGxlLCBwYXRoIH0gPSBzdGF0ZS5jdXJyZW50RW50cnk7XG4gICAgICAgIGNvbnN0IGZyYWdtZW50ID0gdGhpcy5vcHRpb25zLnVzZVVybEZyYWdtZW50SGFzaCA/ICcjLycgOiAnJztcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5xdWV1ZSh0aGlzLmhpc3RvcnksICdyZXBsYWNlU3RhdGUnLCBbc3RhdGUsIHRpdGxlLCBgJHtmcmFnbWVudH0ke3BhdGh9YF0pO1xuICAgIH1cbiAgICBwb3BOYXZpZ2F0b3JTdGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5xdWV1ZSh0aGlzLCAncG9wU3RhdGUnLCBbXSk7XG4gICAgfVxuICAgIHBvcHN0YXRlKGV2LCByZXNvbHZlLCBzdXBwcmVzc1BvcHN0YXRlID0gZmFsc2UpIHtcbiAgICAgICAgaWYgKCFzdXBwcmVzc1BvcHN0YXRlKSB7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMuY2FsbGJhY2soe1xuICAgICAgICAgICAgICAgIC4uLnRoaXMudmlld2VyU3RhdGUsXG4gICAgICAgICAgICAgICAgLi4ue1xuICAgICAgICAgICAgICAgICAgICBldmVudDogZXYsXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlOiB0aGlzLmhpc3Rvcnkuc3RhdGUsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXNvbHZlICE9PSBudWxsICYmIHJlc29sdmUgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHBvcFN0YXRlKHJlc29sdmUpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5nbygtMSwgdHJ1ZSk7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5oaXN0b3J5LnN0YXRlO1xuICAgICAgICAvLyBUT0RPOiBGaXggYnJvd3NlciBmb3J3YXJkIGJ1ZyBhZnRlciBwb3Agb24gZmlyc3QgZW50cnlcbiAgICAgICAgaWYgKHN0YXRlICYmIHN0YXRlLm5hdmlnYXRpb25FbnRyeSAmJiAhc3RhdGUubmF2aWdhdGlvbkVudHJ5LmZpcnN0RW50cnkpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZ28oLTEsIHRydWUpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHVzaE5hdmlnYXRvclN0YXRlKHN0YXRlKTtcbiAgICAgICAgfVxuICAgICAgICByZXNvbHZlKCk7XG4gICAgfVxuICAgIGZvcndhcmRTdGF0ZShzdGF0ZSkge1xuICAgICAgICB0aGlzLmZvcndhcmRlZFN0YXRlID0gc3RhdGU7XG4gICAgfVxuICAgIC8vIEV2ZXJ5dGhpbmcgdGhhdCB3YW50cyB0byBhd2FpdCBhIGJyb3dzZXIgZXZlbnQgc2hvdWxkIHBhc3Mgc3VwcHJlc3NQb3BzdGF0ZSBwYXJhbVxuICAgIC8vIEV2ZW50cyBOT1QgcmVzdWx0aW5nIGluIHBvcHN0YXRlIGV2ZW50cyBzaG91bGQgTk9UIHBhc3Mgc3VwcHJlc3NQb3BzdGF0ZSBwYXJhbVxuICAgIGVucXVldWUodGFyZ2V0LCBtZXRob2ROYW1lLCBwYXJhbWV0ZXJzLCBzdXBwcmVzc1BvcHN0YXRlKSB7XG4gICAgICAgIGNvbnN0IGNhbGxzID0gW107XG4gICAgICAgIGNvbnN0IGNvc3RzID0gW107XG4gICAgICAgIGNvbnN0IHByb21pc2VzID0gW107XG4gICAgICAgIGlmIChzdXBwcmVzc1BvcHN0YXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIER1ZSB0byAoYnJvd3NlcikgZXZlbnRzIG5vdCBoYXZpbmcgYSBwcm9taXNlLCB3ZSBjcmVhdGUgYW5kIHByb3BhZ2F0ZSBvbmVcbiAgICAgICAgICAgIGxldCByZXNvbHZlID0gbnVsbDtcbiAgICAgICAgICAgIHByb21pc2VzLnB1c2gobmV3IFByb21pc2UoX3Jlc29sdmUgPT4ge1xuICAgICAgICAgICAgICAgIHJlc29sdmUgPSBfcmVzb2x2ZTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGNhbGxzLnB1c2goe1xuICAgICAgICAgICAgICAgIHRhcmdldDogdGhpcyxcbiAgICAgICAgICAgICAgICBtZXRob2ROYW1lOiAnZm9yd2FyZFN0YXRlJyxcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzOiBbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdXBwcmVzc1BvcHN0YXRlLFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29zdHMucHVzaCgwKTtcbiAgICAgICAgfVxuICAgICAgICBjYWxscy5wdXNoKHtcbiAgICAgICAgICAgIHRhcmdldDogdGFyZ2V0LFxuICAgICAgICAgICAgbWV0aG9kTmFtZTogbWV0aG9kTmFtZSxcbiAgICAgICAgICAgIHBhcmFtZXRlcnM6IHBhcmFtZXRlcnMsXG4gICAgICAgIH0pO1xuICAgICAgICBjb3N0cy5wdXNoKDEpO1xuICAgICAgICAvLyBUaGUgZmlyc3QgcHJvbWlzZSBpcyB0aGUgcmVsZXZhbnQgb25lIHNpbmNlIGl0J3MgZWl0aGVyIGEpIHRoZSBwcm9wYWdhdGVkIG9uZSAoaW5cbiAgICAgICAgLy8gY2FzZSBvZiBhIGJyb3dzZXIgYWN0aW9uKSwgb3IgYikgdGhlIG9ubHkgb25lIHNpbmNlIHRoZXJlJ3Mgb25seSBvbmUgY2FsbFxuICAgICAgICBwcm9taXNlcy5wdXNoKHRoaXMucGVuZGluZ0NhbGxzLmVucXVldWUoY2FsbHMsIGNvc3RzKVswXSk7XG4gICAgICAgIHJldHVybiBwcm9taXNlc1swXTtcbiAgICB9XG59O1xuQnJvd3Nlck5hdmlnYXRvciA9IF9fZGVjb3JhdGUoW1xuICAgIF9fcGFyYW0oMCwgSVNjaGVkdWxlciksXG4gICAgX19wYXJhbSgxLCBJRE9NKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW09iamVjdCwgSFRNTERPTV0pXG5dLCBCcm93c2VyTmF2aWdhdG9yKTtcbmV4cG9ydCB7IEJyb3dzZXJOYXZpZ2F0b3IgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJyb3dzZXItbmF2aWdhdG9yLmpzLm1hcCIsImltcG9ydCB7IF9fZGVjb3JhdGUsIF9fbWV0YWRhdGEsIF9fcGFyYW0gfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IElET00sIElTY2hlZHVsZXIgfSBmcm9tICdAYXVyZWxpYS9ydW50aW1lJztcbmltcG9ydCB7IEhUTUxET00gfSBmcm9tICdAYXVyZWxpYS9ydW50aW1lLWh0bWwnO1xuaW1wb3J0IHsgVGFza1F1ZXVlIH0gZnJvbSAnLi90YXNrLXF1ZXVlJztcbmxldCBCcm93c2VyVmlld2VyU3RvcmUgPSBjbGFzcyBCcm93c2VyVmlld2VyU3RvcmUge1xuICAgIGNvbnN0cnVjdG9yKHNjaGVkdWxlciwgZG9tKSB7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgICAgICB0aGlzLmFsbG93ZWRFeGVjdXRpb25Db3N0V2l0aGluVGljayA9IDI7IC8vIExpbWl0IG5vIG9mIGV4ZWN1dGVkIGFjdGlvbnMgd2l0aGluIHRoZSBzYW1lIFJBRiAoZHVlIHRvIGJyb3dzZXIgbGltaXRhdGlvbilcbiAgICAgICAgdGhpcy5pc0FjdGl2ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSB7XG4gICAgICAgICAgICB1c2VVcmxGcmFnbWVudEhhc2g6IHRydWUsXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4geyByZXR1cm47IH0sXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZm9yd2FyZGVkU3RhdGUgPSB7IGV2ZW50VGFzazogbnVsbCwgc3VwcHJlc3NQb3BzdGF0ZTogZmFsc2UgfTtcbiAgICAgICAgdGhpcy5oYW5kbGVQb3BzdGF0ZSA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgeyBldmVudFRhc2ssIHN1cHByZXNzUG9wc3RhdGUgfSA9IHRoaXMuZm9yd2FyZGVkU3RhdGU7XG4gICAgICAgICAgICB0aGlzLmZvcndhcmRlZFN0YXRlID0geyBldmVudFRhc2s6IG51bGwsIHN1cHByZXNzUG9wc3RhdGU6IGZhbHNlIH07XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wZW5kaW5nQ2FsbHMuZW5xdWV1ZShhc3luYyAodGFzaykgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0b3JlID0gdGhpcztcbiAgICAgICAgICAgICAgICBjb25zdCBldiA9IGV2ZW50O1xuICAgICAgICAgICAgICAgIGNvbnN0IGV2VGFzayA9IGV2ZW50VGFzaztcbiAgICAgICAgICAgICAgICBjb25zdCBzdXBwcmVzc1BvcHN0YXRlRXZlbnQgPSBzdXBwcmVzc1BvcHN0YXRlO1xuICAgICAgICAgICAgICAgIGF3YWl0IHN0b3JlLnBvcHN0YXRlKGV2LCBldlRhc2ssIHN1cHByZXNzUG9wc3RhdGVFdmVudCk7XG4gICAgICAgICAgICAgICAgdGFzay5yZXNvbHZlKCk7XG4gICAgICAgICAgICB9LCAxKS53YWl0KCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMud2luZG93ID0gZG9tLndpbmRvdztcbiAgICAgICAgdGhpcy5oaXN0b3J5ID0gZG9tLndpbmRvdy5oaXN0b3J5O1xuICAgICAgICB0aGlzLmxvY2F0aW9uID0gZG9tLndpbmRvdy5sb2NhdGlvbjtcbiAgICAgICAgdGhpcy5wZW5kaW5nQ2FsbHMgPSBuZXcgVGFza1F1ZXVlKCk7XG4gICAgfVxuICAgIGFjdGl2YXRlKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNBY3RpdmUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQnJvd3NlciBuYXZpZ2F0aW9uIGhhcyBhbHJlYWR5IGJlZW4gYWN0aXZhdGVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc0FjdGl2ZSA9IHRydWU7XG4gICAgICAgIHRoaXMub3B0aW9ucy5jYWxsYmFjayA9IG9wdGlvbnMuY2FsbGJhY2s7XG4gICAgICAgIGlmIChvcHRpb25zLnVzZVVybEZyYWdtZW50SGFzaCAhPSB2b2lkIDApIHtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy51c2VVcmxGcmFnbWVudEhhc2ggPSBvcHRpb25zLnVzZVVybEZyYWdtZW50SGFzaDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBlbmRpbmdDYWxscy5hY3RpdmF0ZSh7IHNjaGVkdWxlcjogdGhpcy5zY2hlZHVsZXIsIGFsbG93ZWRFeGVjdXRpb25Db3N0V2l0aGluVGljazogdGhpcy5hbGxvd2VkRXhlY3V0aW9uQ29zdFdpdGhpblRpY2sgfSk7XG4gICAgICAgIHRoaXMud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgdGhpcy5oYW5kbGVQb3BzdGF0ZSk7XG4gICAgfVxuICAgIGRlYWN0aXZhdGUoKSB7XG4gICAgICAgIGlmICghdGhpcy5pc0FjdGl2ZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdCcm93c2VyIG5hdmlnYXRpb24gaGFzIG5vdCBiZWVuIGFjdGl2YXRlZCcpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMud2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgdGhpcy5oYW5kbGVQb3BzdGF0ZSk7XG4gICAgICAgIHRoaXMucGVuZGluZ0NhbGxzLmRlYWN0aXZhdGUoKTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0geyB1c2VVcmxGcmFnbWVudEhhc2g6IHRydWUsIGNhbGxiYWNrOiAoKSA9PiB7IHJldHVybjsgfSB9O1xuICAgICAgICB0aGlzLmlzQWN0aXZlID0gZmFsc2U7XG4gICAgfVxuICAgIGdldCBsZW5ndGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhpc3RvcnkubGVuZ3RoO1xuICAgIH1cbiAgICBnZXQgc3RhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhpc3Rvcnkuc3RhdGU7XG4gICAgfVxuICAgIGdldCB2aWV3ZXJTdGF0ZSgpIHtcbiAgICAgICAgY29uc3QgeyBwYXRobmFtZSwgc2VhcmNoLCBoYXNoIH0gPSB0aGlzLmxvY2F0aW9uO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcGF0aDogcGF0aG5hbWUsXG4gICAgICAgICAgICBxdWVyeTogc2VhcmNoLFxuICAgICAgICAgICAgaGFzaCxcbiAgICAgICAgICAgIGluc3RydWN0aW9uOiB0aGlzLm9wdGlvbnMudXNlVXJsRnJhZ21lbnRIYXNoID8gaGFzaC5zbGljZSgxKSA6IHBhdGhuYW1lLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBnbyhkZWx0YSwgc3VwcHJlc3NQb3BzdGF0ZUV2ZW50ID0gZmFsc2UpIHtcbiAgICAgICAgY29uc3QgZG9uZVRhc2sgPSB0aGlzLnBlbmRpbmdDYWxscy5jcmVhdGVRdWV1ZVRhc2soKHRhc2spID0+IHRhc2sucmVzb2x2ZSgpLCAxKTtcbiAgICAgICAgdGhpcy5wZW5kaW5nQ2FsbHMuZW5xdWV1ZShbXG4gICAgICAgICAgICAodGFzaykgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0b3JlID0gdGhpcztcbiAgICAgICAgICAgICAgICBjb25zdCBldmVudFRhc2sgPSBkb25lVGFzaztcbiAgICAgICAgICAgICAgICBjb25zdCBzdXBwcmVzc1BvcHN0YXRlID0gc3VwcHJlc3NQb3BzdGF0ZUV2ZW50O1xuICAgICAgICAgICAgICAgIHN0b3JlLmZvcndhcmRTdGF0ZSh7IGV2ZW50VGFzaywgc3VwcHJlc3NQb3BzdGF0ZSB9KTtcbiAgICAgICAgICAgICAgICB0YXNrLnJlc29sdmUoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAodGFzaykgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGhpc3RvcnkgPSB0aGlzLmhpc3Rvcnk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RlcHMgPSBkZWx0YTtcbiAgICAgICAgICAgICAgICBoaXN0b3J5LmdvKHN0ZXBzKTtcbiAgICAgICAgICAgICAgICB0YXNrLnJlc29sdmUoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIF0sIFswLCAxXSk7XG4gICAgICAgIHJldHVybiBkb25lVGFzay53YWl0KCk7XG4gICAgfVxuICAgIHB1c2hOYXZpZ2F0b3JTdGF0ZShzdGF0ZSkge1xuICAgICAgICBjb25zdCB7IHRpdGxlLCBwYXRoIH0gPSBzdGF0ZS5jdXJyZW50RW50cnk7XG4gICAgICAgIGNvbnN0IGZyYWdtZW50ID0gdGhpcy5vcHRpb25zLnVzZVVybEZyYWdtZW50SGFzaCA/ICcjLycgOiAnJztcbiAgICAgICAgcmV0dXJuIHRoaXMucGVuZGluZ0NhbGxzLmVucXVldWUoKHRhc2spID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGhpc3RvcnkgPSB0aGlzLmhpc3Rvcnk7XG4gICAgICAgICAgICBjb25zdCBkYXRhID0gc3RhdGU7XG4gICAgICAgICAgICBjb25zdCB0aXRsZU9yRW1wdHkgPSB0aXRsZSB8fCAnJztcbiAgICAgICAgICAgIGNvbnN0IHVybCA9IGAke2ZyYWdtZW50fSR7cGF0aH1gO1xuICAgICAgICAgICAgaGlzdG9yeS5wdXNoU3RhdGUoZGF0YSwgdGl0bGVPckVtcHR5LCB1cmwpO1xuICAgICAgICAgICAgdGFzay5yZXNvbHZlKCk7XG4gICAgICAgIH0sIDEpLndhaXQoKTtcbiAgICB9XG4gICAgcmVwbGFjZU5hdmlnYXRvclN0YXRlKHN0YXRlKSB7XG4gICAgICAgIGNvbnN0IHsgdGl0bGUsIHBhdGggfSA9IHN0YXRlLmN1cnJlbnRFbnRyeTtcbiAgICAgICAgY29uc3QgZnJhZ21lbnQgPSB0aGlzLm9wdGlvbnMudXNlVXJsRnJhZ21lbnRIYXNoID8gJyMvJyA6ICcnO1xuICAgICAgICByZXR1cm4gdGhpcy5wZW5kaW5nQ2FsbHMuZW5xdWV1ZSgodGFzaykgPT4ge1xuICAgICAgICAgICAgY29uc3QgaGlzdG9yeSA9IHRoaXMuaGlzdG9yeTtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBzdGF0ZTtcbiAgICAgICAgICAgIGNvbnN0IHRpdGxlT3JFbXB0eSA9IHRpdGxlIHx8ICcnO1xuICAgICAgICAgICAgY29uc3QgdXJsID0gYCR7ZnJhZ21lbnR9JHtwYXRofWA7XG4gICAgICAgICAgICBoaXN0b3J5LnJlcGxhY2VTdGF0ZShkYXRhLCB0aXRsZU9yRW1wdHksIHVybCk7XG4gICAgICAgICAgICB0YXNrLnJlc29sdmUoKTtcbiAgICAgICAgfSwgMSkud2FpdCgpO1xuICAgIH1cbiAgICBwb3BOYXZpZ2F0b3JTdGF0ZSgpIHtcbiAgICAgICAgY29uc3QgZG9uZVRhc2sgPSB0aGlzLnBlbmRpbmdDYWxscy5jcmVhdGVRdWV1ZVRhc2soKHRhc2spID0+IHRhc2sucmVzb2x2ZSgpLCAxKTtcbiAgICAgICAgdGhpcy5wZW5kaW5nQ2FsbHMuZW5xdWV1ZShhc3luYyAodGFzaykgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc3RvcmUgPSB0aGlzO1xuICAgICAgICAgICAgY29uc3QgZXZlbnRUYXNrID0gZG9uZVRhc2s7XG4gICAgICAgICAgICBhd2FpdCBzdG9yZS5wb3BTdGF0ZShldmVudFRhc2spO1xuICAgICAgICAgICAgdGFzay5yZXNvbHZlKCk7XG4gICAgICAgIH0sIDEpO1xuICAgICAgICByZXR1cm4gZG9uZVRhc2sud2FpdCgpO1xuICAgIH1cbiAgICBhc3luYyBwb3BTdGF0ZShkb25lVGFzaykge1xuICAgICAgICBhd2FpdCB0aGlzLmdvKC0xLCB0cnVlKTtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLmhpc3Rvcnkuc3RhdGU7XG4gICAgICAgIC8vIFRPRE86IEZpeCBicm93c2VyIGZvcndhcmQgYnVnIGFmdGVyIHBvcCBvbiBmaXJzdCBlbnRyeVxuICAgICAgICBpZiAoc3RhdGUgJiYgc3RhdGUubmF2aWdhdGlvbkVudHJ5ICYmICFzdGF0ZS5uYXZpZ2F0aW9uRW50cnkuZmlyc3RFbnRyeSkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5nbygtMSwgdHJ1ZSk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnB1c2hOYXZpZ2F0b3JTdGF0ZShzdGF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgZG9uZVRhc2suZXhlY3V0ZSgpO1xuICAgIH1cbiAgICBmb3J3YXJkU3RhdGUoc3RhdGUpIHtcbiAgICAgICAgdGhpcy5mb3J3YXJkZWRTdGF0ZSA9IHN0YXRlO1xuICAgIH1cbiAgICBhc3luYyBwb3BzdGF0ZShldiwgZXZlbnRUYXNrLCBzdXBwcmVzc1BvcHN0YXRlID0gZmFsc2UpIHtcbiAgICAgICAgaWYgKCFzdXBwcmVzc1BvcHN0YXRlKSB7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMuY2FsbGJhY2soe1xuICAgICAgICAgICAgICAgIC4uLnRoaXMudmlld2VyU3RhdGUsXG4gICAgICAgICAgICAgICAgLi4ue1xuICAgICAgICAgICAgICAgICAgICBldmVudDogZXYsXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlOiB0aGlzLmhpc3Rvcnkuc3RhdGUsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChldmVudFRhc2sgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGF3YWl0IGV2ZW50VGFzay5leGVjdXRlKCk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuQnJvd3NlclZpZXdlclN0b3JlID0gX19kZWNvcmF0ZShbXG4gICAgX19wYXJhbSgwLCBJU2NoZWR1bGVyKSxcbiAgICBfX3BhcmFtKDEsIElET00pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0LCBIVE1MRE9NXSlcbl0sIEJyb3dzZXJWaWV3ZXJTdG9yZSk7XG5leHBvcnQgeyBCcm93c2VyVmlld2VyU3RvcmUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJyb3dzZXItdmlld2VyLXN0b3JlLmpzLm1hcCIsImltcG9ydCB7IGFycmF5UmVtb3ZlIH0gZnJvbSAnLi91dGlscyc7XG5leHBvcnQgY2xhc3MgQ29sbGVjdGlvbiBleHRlbmRzIEFycmF5IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5jdXJyZW50SW5kZXggPSAtMTtcbiAgICB9XG4gICAgbmV4dCgpIHtcbiAgICAgICAgaWYgKHRoaXMubGVuZ3RoID4gdGhpcy5jdXJyZW50SW5kZXggKyAxKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpc1srK3RoaXMuY3VycmVudEluZGV4XTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEluZGV4ID0gLTE7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZW1vdmVDdXJyZW50KCkge1xuICAgICAgICB0aGlzLnNwbGljZSh0aGlzLmN1cnJlbnRJbmRleC0tLCAxKTtcbiAgICB9XG4gICAgcmVtb3ZlKGluc3RydWN0aW9uKSB7XG4gICAgICAgIGFycmF5UmVtb3ZlKHRoaXMsIHZhbHVlID0+IHZhbHVlID09PSBpbnN0cnVjdGlvbik7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29sbGVjdGlvbi5qcy5tYXAiLCJpbXBvcnQgeyBESSB9IGZyb20gJ0BhdXJlbGlhL2tlcm5lbCc7XG5pbXBvcnQgeyBTdGFydFRhc2sgfSBmcm9tICdAYXVyZWxpYS9ydW50aW1lJztcbmltcG9ydCB7IE5hdkN1c3RvbUVsZW1lbnQgfSBmcm9tICcuL3Jlc291cmNlcy9uYXYnO1xuaW1wb3J0IHsgVmlld3BvcnRDdXN0b21FbGVtZW50IH0gZnJvbSAnLi9yZXNvdXJjZXMvdmlld3BvcnQnO1xuaW1wb3J0IHsgVmlld3BvcnRTY29wZUN1c3RvbUVsZW1lbnQgfSBmcm9tICcuL3Jlc291cmNlcy92aWV3cG9ydC1zY29wZSc7XG5pbXBvcnQgeyBHb3RvQ3VzdG9tQXR0cmlidXRlIH0gZnJvbSAnLi9yZXNvdXJjZXMvZ290byc7XG5pbXBvcnQgeyBIcmVmQ3VzdG9tQXR0cmlidXRlIH0gZnJvbSAnLi9yZXNvdXJjZXMvaHJlZic7XG5pbXBvcnQgeyBJUm91dGVyIH0gZnJvbSAnLi9yb3V0ZXInO1xuZXhwb3J0IGNvbnN0IFJvdXRlclJlZ2lzdHJhdGlvbiA9IElSb3V0ZXI7XG4vKipcbiAqIERlZmF1bHQgcnVudGltZS9lbnZpcm9ubWVudC1hZ25vc3RpYyBpbXBsZW1lbnRhdGlvbnMgZm9yIHRoZSBmb2xsb3dpbmcgaW50ZXJmYWNlczpcbiAqIC0gYElSb3V0ZXJgXG4gKi9cbmV4cG9ydCBjb25zdCBEZWZhdWx0Q29tcG9uZW50cyA9IFtcbiAgICBSb3V0ZXJSZWdpc3RyYXRpb24sXG5dO1xuZXhwb3J0IHsgVmlld3BvcnRDdXN0b21FbGVtZW50LCBWaWV3cG9ydFNjb3BlQ3VzdG9tRWxlbWVudCwgTmF2Q3VzdG9tRWxlbWVudCwgR290b0N1c3RvbUF0dHJpYnV0ZSwgSHJlZkN1c3RvbUF0dHJpYnV0ZSwgfTtcbmV4cG9ydCBjb25zdCBWaWV3cG9ydEN1c3RvbUVsZW1lbnRSZWdpc3RyYXRpb24gPSBWaWV3cG9ydEN1c3RvbUVsZW1lbnQ7XG5leHBvcnQgY29uc3QgVmlld3BvcnRTY29wZUN1c3RvbUVsZW1lbnRSZWdpc3RyYXRpb24gPSBWaWV3cG9ydFNjb3BlQ3VzdG9tRWxlbWVudDtcbmV4cG9ydCBjb25zdCBOYXZDdXN0b21FbGVtZW50UmVnaXN0cmF0aW9uID0gTmF2Q3VzdG9tRWxlbWVudDtcbmV4cG9ydCBjb25zdCBHb3RvQ3VzdG9tQXR0cmlidXRlUmVnaXN0cmF0aW9uID0gR290b0N1c3RvbUF0dHJpYnV0ZTtcbmV4cG9ydCBjb25zdCBIcmVmQ3VzdG9tQXR0cmlidXRlUmVnaXN0cmF0aW9uID0gSHJlZkN1c3RvbUF0dHJpYnV0ZTtcbi8qKlxuICogRGVmYXVsdCByb3V0ZXIgcmVzb3VyY2VzOlxuICogLSBDdXN0b20gRWxlbWVudHM6IGBhdS12aWV3cG9ydGAsIGBhdS1uYXZgXG4gKiAtIEN1c3RvbSBBdHRyaWJ1dGVzOiBgZ290b2AsIGBocmVmYFxuICovXG5leHBvcnQgY29uc3QgRGVmYXVsdFJlc291cmNlcyA9IFtcbiAgICBWaWV3cG9ydEN1c3RvbUVsZW1lbnQsXG4gICAgVmlld3BvcnRTY29wZUN1c3RvbUVsZW1lbnQsXG4gICAgTmF2Q3VzdG9tRWxlbWVudCxcbiAgICBHb3RvQ3VzdG9tQXR0cmlidXRlLFxuICAgIEhyZWZDdXN0b21BdHRyaWJ1dGUsXG5dO1xubGV0IGNvbmZpZ3VyYXRpb25PcHRpb25zID0ge307XG5sZXQgY29uZmlndXJhdGlvbkNhbGwgPSAocm91dGVyKSA9PiB7XG4gICAgcm91dGVyLmFjdGl2YXRlKGNvbmZpZ3VyYXRpb25PcHRpb25zKTtcbn07XG4vKipcbiAqIEEgREkgY29uZmlndXJhdGlvbiBvYmplY3QgY29udGFpbmluZyByb3V0ZXIgcmVzb3VyY2UgcmVnaXN0cmF0aW9ucy5cbiAqL1xuY29uc3Qgcm91dGVyQ29uZmlndXJhdGlvbiA9IHtcbiAgICAvKipcbiAgICAgKiBBcHBseSB0aGlzIGNvbmZpZ3VyYXRpb24gdG8gdGhlIHByb3ZpZGVkIGNvbnRhaW5lci5cbiAgICAgKi9cbiAgICByZWdpc3Rlcihjb250YWluZXIpIHtcbiAgICAgICAgcmV0dXJuIGNvbnRhaW5lci5yZWdpc3RlciguLi5EZWZhdWx0Q29tcG9uZW50cywgLi4uRGVmYXVsdFJlc291cmNlcywgU3RhcnRUYXNrLndpdGgoSVJvdXRlcikuYmVmb3JlQmluZCgpLmNhbGwoY29uZmlndXJhdGlvbkNhbGwpLCBTdGFydFRhc2sud2l0aChJUm91dGVyKS5iZWZvcmVBdHRhY2goKS5jYWxsKHJvdXRlciA9PiByb3V0ZXIubG9hZFVybCgpKSk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgY29udGFpbmVyIHdpdGggdGhpcyBjb25maWd1cmF0aW9uIGFwcGxpZWQgdG8gaXQuXG4gICAgICovXG4gICAgY3JlYXRlQ29udGFpbmVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWdpc3RlcihESS5jcmVhdGVDb250YWluZXIoKSk7XG4gICAgfVxufTtcbmV4cG9ydCBjb25zdCBSb3V0ZXJDb25maWd1cmF0aW9uID0ge1xuICAgIC8qKlxuICAgICAqIE1ha2UgaXQgcG9zc2libGUgdG8gc3BlY2lmeSBvcHRpb25zIHRvIFJvdXRlciBhY3RpdmF0aW9uLlxuICAgICAqIFBhcmFtZXRlciBpcyBlaXRoZXIgYSBjb25maWcgb2JqZWN0IHRoYXQncyBwYXNzZWQgdG8gUm91dGVyJ3MgYWN0aXZhdGVcbiAgICAgKiBvciBhIGNvbmZpZyBmdW5jdGlvbiB0aGF0J3MgY2FsbGVkIGluc3RlYWQgb2YgUm91dGVyJ3MgYWN0aXZhdGUuXG4gICAgICovXG4gICAgY3VzdG9taXplKGNvbmZpZykge1xuICAgICAgICBpZiAoY29uZmlnID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbmZpZ3VyYXRpb25PcHRpb25zID0ge307XG4gICAgICAgICAgICBjb25maWd1cmF0aW9uQ2FsbCA9IChyb3V0ZXIpID0+IHtcbiAgICAgICAgICAgICAgICByb3V0ZXIuYWN0aXZhdGUoY29uZmlndXJhdGlvbk9wdGlvbnMpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjb25maWcgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xuICAgICAgICAgICAgY29uZmlndXJhdGlvbkNhbGwgPSBjb25maWc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25maWd1cmF0aW9uT3B0aW9ucyA9IGNvbmZpZztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyAuLi5yb3V0ZXJDb25maWd1cmF0aW9uIH07XG4gICAgfSxcbiAgICAuLi5yb3V0ZXJDb25maWd1cmF0aW9uLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbmZpZ3VyYXRpb24uanMubWFwIiwiZXhwb3J0IGNsYXNzIEZvdW5kUm91dGUge1xuICAgIGNvbnN0cnVjdG9yKG1hdGNoID0gbnVsbCwgbWF0Y2hpbmcgPSAnJywgaW5zdHJ1Y3Rpb25zID0gW10sIHJlbWFpbmluZyA9ICcnKSB7XG4gICAgICAgIHRoaXMubWF0Y2ggPSBtYXRjaDtcbiAgICAgICAgdGhpcy5tYXRjaGluZyA9IG1hdGNoaW5nO1xuICAgICAgICB0aGlzLmluc3RydWN0aW9ucyA9IGluc3RydWN0aW9ucztcbiAgICAgICAgdGhpcy5yZW1haW5pbmcgPSByZW1haW5pbmc7XG4gICAgfVxuICAgIGdldCBmb3VuZENvbmZpZ3VyYXRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hdGNoICE9PSBudWxsO1xuICAgIH1cbiAgICBnZXQgZm91bmRJbnN0cnVjdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmluc3RydWN0aW9ucy5sZW5ndGggPiAwO1xuICAgIH1cbiAgICBnZXQgaGFzUmVtYWluaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZW1haW5pbmcgIT09IG51bGwgJiYgdGhpcy5yZW1haW5pbmcubGVuZ3RoID4gMDtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1mb3VuZC1yb3V0ZS5qcy5tYXAiLCJpbXBvcnQgeyBIb29rIH0gZnJvbSAnLi9ob29rJztcbmV4cG9ydCB2YXIgSG9va1R5cGVzO1xuKGZ1bmN0aW9uIChIb29rVHlwZXMpIHtcbiAgICBIb29rVHlwZXNbXCJCZWZvcmVOYXZpZ2F0aW9uXCJdID0gXCJiZWZvcmVOYXZpZ2F0aW9uXCI7XG4gICAgSG9va1R5cGVzW1wiVHJhbnNmb3JtRnJvbVVybFwiXSA9IFwidHJhbnNmb3JtRnJvbVVybFwiO1xuICAgIEhvb2tUeXBlc1tcIlRyYW5zZm9ybVRvVXJsXCJdID0gXCJ0cmFuc2Zvcm1Ub1VybFwiO1xufSkoSG9va1R5cGVzIHx8IChIb29rVHlwZXMgPSB7fSkpO1xuZXhwb3J0IGNsYXNzIEhvb2tNYW5hZ2VyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5ob29rcyA9IHtcbiAgICAgICAgICAgIGJlZm9yZU5hdmlnYXRpb246IFtdLFxuICAgICAgICAgICAgdHJhbnNmb3JtRnJvbVVybDogW10sXG4gICAgICAgICAgICB0cmFuc2Zvcm1Ub1VybDogW10sXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMubGFzdElkZW50aXR5ID0gMDtcbiAgICB9XG4gICAgYWRkSG9vayhob29rRnVuY3Rpb24sIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgaG9vayA9IG5ldyBIb29rKGhvb2tGdW5jdGlvbiwgb3B0aW9ucyB8fCB7fSwgKyt0aGlzLmxhc3RJZGVudGl0eSk7XG4gICAgICAgIHRoaXMuaG9va3NbaG9vay50eXBlXS5wdXNoKGhvb2spO1xuICAgICAgICByZXR1cm4gdGhpcy5sYXN0SWRlbnRpdHk7XG4gICAgfVxuICAgIHJlbW92ZUhvb2soaWQpIHtcbiAgICAgICAgZm9yIChjb25zdCB0eXBlIGluIHRoaXMuaG9va3MpIHtcbiAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodGhpcy5ob29rcywgdHlwZSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuaG9va3NbdHlwZV0uZmluZEluZGV4KGhvb2sgPT4gaG9vay5pZCA9PT0gaWQpO1xuICAgICAgICAgICAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaG9va3NbdHlwZV0uc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgaW52b2tlQmVmb3JlTmF2aWdhdGlvbih2aWV3cG9ydEluc3RydWN0aW9ucywgbmF2aWdhdGlvbkluc3RydWN0aW9uKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmludm9rZShcImJlZm9yZU5hdmlnYXRpb25cIiAvKiBCZWZvcmVOYXZpZ2F0aW9uICovLCBuYXZpZ2F0aW9uSW5zdHJ1Y3Rpb24sIHZpZXdwb3J0SW5zdHJ1Y3Rpb25zKTtcbiAgICB9XG4gICAgaW52b2tlVHJhbnNmb3JtRnJvbVVybCh1cmwsIG5hdmlnYXRpb25JbnN0cnVjdGlvbikge1xuICAgICAgICByZXR1cm4gdGhpcy5pbnZva2UoXCJ0cmFuc2Zvcm1Gcm9tVXJsXCIgLyogVHJhbnNmb3JtRnJvbVVybCAqLywgbmF2aWdhdGlvbkluc3RydWN0aW9uLCB1cmwpO1xuICAgIH1cbiAgICBpbnZva2VUcmFuc2Zvcm1Ub1VybChzdGF0ZSwgbmF2aWdhdGlvbkluc3RydWN0aW9uKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmludm9rZShcInRyYW5zZm9ybVRvVXJsXCIgLyogVHJhbnNmb3JtVG9VcmwgKi8sIG5hdmlnYXRpb25JbnN0cnVjdGlvbiwgc3RhdGUpO1xuICAgIH1cbiAgICBhc3luYyBpbnZva2UodHlwZSwgbmF2aWdhdGlvbkluc3RydWN0aW9uLCBhcmcpIHtcbiAgICAgICAgZm9yIChjb25zdCBob29rIG9mIHRoaXMuaG9va3NbdHlwZV0pIHtcbiAgICAgICAgICAgIGlmICghaG9vay53YW50c01hdGNoIHx8IGhvb2subWF0Y2hlcyhhcmcpKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb3V0Y29tZSA9IGF3YWl0IGhvb2suaW52b2tlKG5hdmlnYXRpb25JbnN0cnVjdGlvbiwgYXJnKTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG91dGNvbWUgPT09ICdib29sZWFuJykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIW91dGNvbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYXJnID0gb3V0Y29tZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFyZztcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ob29rLW1hbmFnZXIuanMubWFwIiwiaW1wb3J0IHsgQ29tcG9uZW50QXBwZWxsYXRpb25SZXNvbHZlciwgVmlld3BvcnRIYW5kbGVSZXNvbHZlciB9IGZyb20gJy4vdHlwZS1yZXNvbHZlcnMnO1xuaW1wb3J0IHsgVmlld3BvcnRJbnN0cnVjdGlvbiB9IGZyb20gJy4vdmlld3BvcnQtaW5zdHJ1Y3Rpb24nO1xuZXhwb3J0IGNsYXNzIEhvb2sge1xuICAgIGNvbnN0cnVjdG9yKGhvb2ssIG9wdGlvbnMsIGlkKSB7XG4gICAgICAgIHRoaXMuaG9vayA9IGhvb2s7XG4gICAgICAgIHRoaXMuaWQgPSBpZDtcbiAgICAgICAgdGhpcy50eXBlID0gXCJiZWZvcmVOYXZpZ2F0aW9uXCIgLyogQmVmb3JlTmF2aWdhdGlvbiAqLztcbiAgICAgICAgdGhpcy5pbmNsdWRlVGFyZ2V0cyA9IFtdO1xuICAgICAgICB0aGlzLmV4Y2x1ZGVUYXJnZXRzID0gW107XG4gICAgICAgIGlmIChvcHRpb25zLnR5cGUgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgdGhpcy50eXBlID0gb3B0aW9ucy50eXBlO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgdGFyZ2V0IG9mIG9wdGlvbnMuaW5jbHVkZSB8fCBbXSkge1xuICAgICAgICAgICAgdGhpcy5pbmNsdWRlVGFyZ2V0cy5wdXNoKG5ldyBUYXJnZXQodGFyZ2V0KSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCB0YXJnZXQgb2Ygb3B0aW9ucy5leGNsdWRlIHx8IFtdKSB7XG4gICAgICAgICAgICB0aGlzLmV4Y2x1ZGVUYXJnZXRzLnB1c2gobmV3IFRhcmdldCh0YXJnZXQpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgd2FudHNNYXRjaCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5jbHVkZVRhcmdldHMubGVuZ3RoID4gMCB8fCB0aGlzLmV4Y2x1ZGVUYXJnZXRzLmxlbmd0aCA+IDA7XG4gICAgfVxuICAgIG1hdGNoZXModmlld3BvcnRJbnN0cnVjdGlvbnMpIHtcbiAgICAgICAgaWYgKHRoaXMuaW5jbHVkZVRhcmdldHMubGVuZ3RoICYmICF0aGlzLmluY2x1ZGVUYXJnZXRzLnNvbWUodGFyZ2V0ID0+IHRhcmdldC5tYXRjaGVzKHZpZXdwb3J0SW5zdHJ1Y3Rpb25zKSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5leGNsdWRlVGFyZ2V0cy5sZW5ndGggJiYgdGhpcy5leGNsdWRlVGFyZ2V0cy5zb21lKHRhcmdldCA9PiB0YXJnZXQubWF0Y2hlcyh2aWV3cG9ydEluc3RydWN0aW9ucykpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGludm9rZShuYXZpZ2F0aW9uSW5zdHJ1Y3Rpb24sIGFyZykge1xuICAgICAgICAvLyBUT0RPOiBGaXggdGhlIHR5cGUgaGVyZVxuICAgICAgICByZXR1cm4gdGhpcy5ob29rKGFyZywgbmF2aWdhdGlvbkluc3RydWN0aW9uKTtcbiAgICB9XG59XG5jbGFzcyBUYXJnZXQge1xuICAgIGNvbnN0cnVjdG9yKHRhcmdldCkge1xuICAgICAgICB0aGlzLmNvbXBvbmVudFR5cGUgPSBudWxsO1xuICAgICAgICB0aGlzLmNvbXBvbmVudE5hbWUgPSBudWxsO1xuICAgICAgICB0aGlzLnZpZXdwb3J0ID0gbnVsbDtcbiAgICAgICAgdGhpcy52aWV3cG9ydE5hbWUgPSBudWxsO1xuICAgICAgICBpZiAodHlwZW9mIHRhcmdldCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50TmFtZSA9IHRhcmdldDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChDb21wb25lbnRBcHBlbGxhdGlvblJlc29sdmVyLmlzVHlwZSh0YXJnZXQpKSB7XG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudFR5cGUgPSB0YXJnZXQ7XG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudE5hbWUgPSBDb21wb25lbnRBcHBlbGxhdGlvblJlc29sdmVyLmdldE5hbWUodGFyZ2V0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGN2VGFyZ2V0ID0gdGFyZ2V0O1xuICAgICAgICAgICAgaWYgKGN2VGFyZ2V0LmNvbXBvbmVudCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29tcG9uZW50VHlwZSA9IENvbXBvbmVudEFwcGVsbGF0aW9uUmVzb2x2ZXIuaXNUeXBlKGN2VGFyZ2V0LmNvbXBvbmVudClcbiAgICAgICAgICAgICAgICAgICAgPyBDb21wb25lbnRBcHBlbGxhdGlvblJlc29sdmVyLmdldFR5cGUoY3ZUYXJnZXQuY29tcG9uZW50KVxuICAgICAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICAgICAgdGhpcy5jb21wb25lbnROYW1lID0gQ29tcG9uZW50QXBwZWxsYXRpb25SZXNvbHZlci5nZXROYW1lKGN2VGFyZ2V0LmNvbXBvbmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY3ZUYXJnZXQudmlld3BvcnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnZpZXdwb3J0ID0gVmlld3BvcnRIYW5kbGVSZXNvbHZlci5pc0luc3RhbmNlKGN2VGFyZ2V0LnZpZXdwb3J0KSA/IGN2VGFyZ2V0LnZpZXdwb3J0IDogbnVsbDtcbiAgICAgICAgICAgICAgICB0aGlzLnZpZXdwb3J0TmFtZSA9IFZpZXdwb3J0SGFuZGxlUmVzb2x2ZXIuZ2V0TmFtZShjdlRhcmdldC52aWV3cG9ydCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgbWF0Y2hlcyh2aWV3cG9ydEluc3RydWN0aW9ucykge1xuICAgICAgICBjb25zdCBpbnN0cnVjdGlvbnMgPSB2aWV3cG9ydEluc3RydWN0aW9ucy5zbGljZSgpO1xuICAgICAgICBpZiAoIWluc3RydWN0aW9ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGluc3RydWN0aW9ucy5wdXNoKG5ldyBWaWV3cG9ydEluc3RydWN0aW9uKCcnKSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBpbnN0cnVjdGlvbiBvZiBpbnN0cnVjdGlvbnMpIHtcbiAgICAgICAgICAgIGlmICgodGhpcy5jb21wb25lbnROYW1lICE9PSBudWxsICYmIHRoaXMuY29tcG9uZW50TmFtZSA9PT0gaW5zdHJ1Y3Rpb24uY29tcG9uZW50TmFtZSkgfHxcbiAgICAgICAgICAgICAgICAodGhpcy5jb21wb25lbnRUeXBlICE9PSBudWxsICYmIHRoaXMuY29tcG9uZW50VHlwZSA9PT0gaW5zdHJ1Y3Rpb24uY29tcG9uZW50VHlwZSkgfHxcbiAgICAgICAgICAgICAgICAodGhpcy52aWV3cG9ydE5hbWUgIT09IG51bGwgJiYgdGhpcy52aWV3cG9ydE5hbWUgPT09IGluc3RydWN0aW9uLnZpZXdwb3J0TmFtZSkgfHxcbiAgICAgICAgICAgICAgICAodGhpcy52aWV3cG9ydCAhPT0gbnVsbCAmJiB0aGlzLnZpZXdwb3J0ID09PSBpbnN0cnVjdGlvbi52aWV3cG9ydCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aG9vay5qcy5tYXAiLCJleHBvcnQgeyBCcm93c2VyTmF2aWdhdG9yLCB9IGZyb20gJy4vYnJvd3Nlci1uYXZpZ2F0b3InO1xuZXhwb3J0IHsgTGlua0hhbmRsZXIsIH0gZnJvbSAnLi9saW5rLWhhbmRsZXInO1xuZXhwb3J0IHsgSW5zdHJ1Y3Rpb25SZXNvbHZlciwgfSBmcm9tICcuL2luc3RydWN0aW9uLXJlc29sdmVyJztcbmV4cG9ydCB7IFJlZW50cnlCZWhhdmlvciwgfSBmcm9tICcuL2ludGVyZmFjZXMnO1xuZXhwb3J0IHsgbGlmZWN5Y2xlTG9nZ2VyLCBMaWZlY3ljbGVDbGFzcywgfSBmcm9tICcuL2xpZmVjeWNsZS1sb2dnZXInO1xuZXhwb3J0IHsgSG9va01hbmFnZXIsIEhvb2tUeXBlcywgfSBmcm9tICcuL2hvb2stbWFuYWdlcic7XG5leHBvcnQgeyBOYXYsIH0gZnJvbSAnLi9uYXYnO1xuZXhwb3J0IHsgTmF2Um91dGUsIH0gZnJvbSAnLi9uYXYtcm91dGUnO1xuZXhwb3J0IHsgTmF2aWdhdG9yLCB9IGZyb20gJy4vbmF2aWdhdG9yJztcbmV4cG9ydCB7IFF1ZXVlLCB9IGZyb20gJy4vcXVldWUnO1xuZXhwb3J0IHsgUm91dGVSZWNvZ25pemVyLCBDb25maWd1cmFibGVSb3V0ZSwgUmVjb2duaXplZFJvdXRlLCBFbmRwb2ludCwgfSBmcm9tICcuL3JvdXRlLXJlY29nbml6ZXInO1xuZXhwb3J0IHsgSVJvdXRlciwgUm91dGVyLCB9IGZyb20gJy4vcm91dGVyJztcbmV4cG9ydCB7IFZpZXdwb3J0LCB9IGZyb20gJy4vdmlld3BvcnQnO1xuZXhwb3J0IHsgQ29udGVudFN0YXR1cywgVmlld3BvcnRDb250ZW50LCB9IGZyb20gJy4vdmlld3BvcnQtY29udGVudCc7XG5leHBvcnQgeyBWaWV3cG9ydEluc3RydWN0aW9uLCB9IGZyb20gJy4vdmlld3BvcnQtaW5zdHJ1Y3Rpb24nO1xuZXhwb3J0IHsgUm91dGVyQ29uZmlndXJhdGlvbiwgUm91dGVyUmVnaXN0cmF0aW9uLCBEZWZhdWx0Q29tcG9uZW50cywgRGVmYXVsdFJlc291cmNlcywgVmlld3BvcnRDdXN0b21FbGVtZW50LCBWaWV3cG9ydEN1c3RvbUVsZW1lbnRSZWdpc3RyYXRpb24sIE5hdkN1c3RvbUVsZW1lbnQsIE5hdkN1c3RvbUVsZW1lbnRSZWdpc3RyYXRpb24sIEdvdG9DdXN0b21BdHRyaWJ1dGUsIEdvdG9DdXN0b21BdHRyaWJ1dGVSZWdpc3RyYXRpb24sIEhyZWZDdXN0b21BdHRyaWJ1dGUsIEhyZWZDdXN0b21BdHRyaWJ1dGVSZWdpc3RyYXRpb24sIH0gZnJvbSAnLi9jb25maWd1cmF0aW9uJztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCIsImltcG9ydCB7IFZpZXdwb3J0SW5zdHJ1Y3Rpb24gfSBmcm9tICcuL3ZpZXdwb3J0LWluc3RydWN0aW9uJztcbmV4cG9ydCBjbGFzcyBJbnN0cnVjdGlvblJlc29sdmVyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5zZXBhcmF0b3JzID0ge1xuICAgICAgICAgICAgdmlld3BvcnQ6ICdAJyxcbiAgICAgICAgICAgIHNpYmxpbmc6ICcrJyxcbiAgICAgICAgICAgIHNjb3BlOiAnLycsXG4gICAgICAgICAgICBzY29wZVN0YXJ0OiAnKCcsXG4gICAgICAgICAgICBzY29wZUVuZDogJyknLFxuICAgICAgICAgICAgbm9TY29wZTogJyEnLFxuICAgICAgICAgICAgcGFyYW1ldGVyczogJygnLFxuICAgICAgICAgICAgcGFyYW1ldGVyc0VuZDogJyknLFxuICAgICAgICAgICAgcGFyYW1ldGVyU2VwYXJhdG9yOiAnLCcsXG4gICAgICAgICAgICBwYXJhbWV0ZXJLZXlTZXBhcmF0b3I6ICc9JyxcbiAgICAgICAgICAgIHBhcmFtZXRlcjogJyYnLFxuICAgICAgICAgICAgYWRkOiAnKycsXG4gICAgICAgICAgICBjbGVhcjogJy0nLFxuICAgICAgICAgICAgYWN0aW9uOiAnLicsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGFjdGl2YXRlKG9wdGlvbnMpIHtcbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgICAgIHRoaXMuc2VwYXJhdG9ycyA9IHsgLi4udGhpcy5zZXBhcmF0b3JzLCAuLi5vcHRpb25zLnNlcGFyYXRvcnMgfTtcbiAgICB9XG4gICAgZ2V0IGNsZWFyVmlld3BvcnRJbnN0cnVjdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VwYXJhdG9ycy5jbGVhcjtcbiAgICB9XG4gICAgZ2V0IGFkZFZpZXdwb3J0SW5zdHJ1Y3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlcGFyYXRvcnMuYWRkO1xuICAgIH1cbiAgICBpc0NsZWFyVmlld3BvcnRJbnN0cnVjdGlvbihpbnN0cnVjdGlvbikge1xuICAgICAgICByZXR1cm4gaW5zdHJ1Y3Rpb24gaW5zdGFuY2VvZiBWaWV3cG9ydEluc3RydWN0aW9uXG4gICAgICAgICAgICA/IGluc3RydWN0aW9uLmNvbXBvbmVudE5hbWUgPT09IHRoaXMuY2xlYXJWaWV3cG9ydEluc3RydWN0aW9uICYmICEhaW5zdHJ1Y3Rpb24udmlld3BvcnROYW1lXG4gICAgICAgICAgICA6IGluc3RydWN0aW9uLnN0YXJ0c1dpdGgodGhpcy5jbGVhclZpZXdwb3J0SW5zdHJ1Y3Rpb24pICYmIGluc3RydWN0aW9uICE9PSB0aGlzLmNsZWFyVmlld3BvcnRJbnN0cnVjdGlvbjtcbiAgICB9XG4gICAgaXNBZGRWaWV3cG9ydEluc3RydWN0aW9uKGluc3RydWN0aW9uKSB7XG4gICAgICAgIHJldHVybiBpbnN0cnVjdGlvbiBpbnN0YW5jZW9mIFZpZXdwb3J0SW5zdHJ1Y3Rpb25cbiAgICAgICAgICAgID8gaW5zdHJ1Y3Rpb24uY29tcG9uZW50TmFtZSA9PT0gdGhpcy5hZGRWaWV3cG9ydEluc3RydWN0aW9uXG4gICAgICAgICAgICA6IChpbnN0cnVjdGlvbiA9PT0gdGhpcy5hZGRWaWV3cG9ydEluc3RydWN0aW9uXG4gICAgICAgICAgICAgICAgfHwgaW5zdHJ1Y3Rpb24uc3RhcnRzV2l0aChgJHt0aGlzLnNlcGFyYXRvcnMuYWRkfSR7dGhpcy5zZXBhcmF0b3JzLnZpZXdwb3J0fWApKTtcbiAgICB9XG4gICAgaXNDbGVhclZpZXdwb3J0U2NvcGVJbnN0cnVjdGlvbihpbnN0cnVjdGlvbikge1xuICAgICAgICByZXR1cm4gaW5zdHJ1Y3Rpb24gaW5zdGFuY2VvZiBWaWV3cG9ydEluc3RydWN0aW9uXG4gICAgICAgICAgICA/IGluc3RydWN0aW9uLmNvbXBvbmVudE5hbWUgPT09IHRoaXMuY2xlYXJWaWV3cG9ydEluc3RydWN0aW9uICYmICEhaW5zdHJ1Y3Rpb24udmlld3BvcnRTY29wZVxuICAgICAgICAgICAgOiBpbnN0cnVjdGlvbi5zdGFydHNXaXRoKHRoaXMuY2xlYXJWaWV3cG9ydEluc3RydWN0aW9uKSAmJiBpbnN0cnVjdGlvbiAhPT0gdGhpcy5jbGVhclZpZXdwb3J0SW5zdHJ1Y3Rpb247XG4gICAgfVxuICAgIGlzQ2xlYXJBbGxWaWV3cG9ydHNJbnN0cnVjdGlvbihpbnN0cnVjdGlvbikge1xuICAgICAgICByZXR1cm4gaW5zdHJ1Y3Rpb24gaW5zdGFuY2VvZiBWaWV3cG9ydEluc3RydWN0aW9uXG4gICAgICAgICAgICA/IGluc3RydWN0aW9uLmNvbXBvbmVudE5hbWUgPT09IHRoaXMuY2xlYXJWaWV3cG9ydEluc3RydWN0aW9uICYmICFpbnN0cnVjdGlvbi52aWV3cG9ydE5hbWVcbiAgICAgICAgICAgIDogaW5zdHJ1Y3Rpb24gPT09IHRoaXMuY2xlYXJWaWV3cG9ydEluc3RydWN0aW9uO1xuICAgIH1cbiAgICBpc0FkZEFsbFZpZXdwb3J0c0luc3RydWN0aW9uKGluc3RydWN0aW9uKSB7XG4gICAgICAgIHJldHVybiBpbnN0cnVjdGlvbiBpbnN0YW5jZW9mIFZpZXdwb3J0SW5zdHJ1Y3Rpb25cbiAgICAgICAgICAgID8gaW5zdHJ1Y3Rpb24uY29tcG9uZW50TmFtZSA9PT0gdGhpcy5hZGRWaWV3cG9ydEluc3RydWN0aW9uICYmICFpbnN0cnVjdGlvbi52aWV3cG9ydE5hbWVcbiAgICAgICAgICAgIDogaW5zdHJ1Y3Rpb24gPT09IHRoaXMuYWRkVmlld3BvcnRJbnN0cnVjdGlvbjtcbiAgICB9XG4gICAgY3JlYXRlVmlld3BvcnRJbnN0cnVjdGlvbihjb21wb25lbnQsIHZpZXdwb3J0LCBwYXJhbWV0ZXJzLCBvd25zU2NvcGUgPSB0cnVlLCBuZXh0U2NvcGVJbnN0cnVjdGlvbnMgPSBudWxsKSB7XG4gICAgICAgIGNvbnN0IGluc3RydWN0aW9uID0gbmV3IFZpZXdwb3J0SW5zdHJ1Y3Rpb24oY29tcG9uZW50LCB2aWV3cG9ydCwgcGFyYW1ldGVycywgb3duc1Njb3BlLCBuZXh0U2NvcGVJbnN0cnVjdGlvbnMpO1xuICAgICAgICBpbnN0cnVjdGlvbi5zZXRJbnN0cnVjdGlvblJlc29sdmVyKHRoaXMpO1xuICAgICAgICByZXR1cm4gaW5zdHJ1Y3Rpb247XG4gICAgfVxuICAgIHBhcnNlVmlld3BvcnRJbnN0cnVjdGlvbnMoaW5zdHJ1Y3Rpb25zKSB7XG4gICAgICAgIGNvbnN0IG1hdGNoID0gL15bLi9dKy8uZXhlYyhpbnN0cnVjdGlvbnMpO1xuICAgICAgICBsZXQgY29udGV4dCA9ICcnO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShtYXRjaCkgJiYgbWF0Y2gubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29udGV4dCA9IG1hdGNoWzBdO1xuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zID0gaW5zdHJ1Y3Rpb25zLnNsaWNlKGNvbnRleHQubGVuZ3RoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXJzZWRJbnN0cnVjdGlvbnMgPSB0aGlzLnBhcnNlVmlld3BvcnRJbnN0cnVjdGlvbnNXb3JrZXIoaW5zdHJ1Y3Rpb25zLCB0cnVlKS5pbnN0cnVjdGlvbnM7XG4gICAgICAgIGZvciAoY29uc3QgaW5zdHJ1Y3Rpb24gb2YgcGFyc2VkSW5zdHJ1Y3Rpb25zKSB7XG4gICAgICAgICAgICBpbnN0cnVjdGlvbi5jb250ZXh0ID0gY29udGV4dDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFyc2VkSW5zdHJ1Y3Rpb25zO1xuICAgIH1cbiAgICBwYXJzZVZpZXdwb3J0SW5zdHJ1Y3Rpb24oaW5zdHJ1Y3Rpb24pIHtcbiAgICAgICAgY29uc3QgaW5zdHJ1Y3Rpb25zID0gdGhpcy5wYXJzZVZpZXdwb3J0SW5zdHJ1Y3Rpb25zKGluc3RydWN0aW9uKTtcbiAgICAgICAgaWYgKGluc3RydWN0aW9ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBpbnN0cnVjdGlvbnNbMF07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlVmlld3BvcnRJbnN0cnVjdGlvbignJyk7XG4gICAgfVxuICAgIHN0cmluZ2lmeVZpZXdwb3J0SW5zdHJ1Y3Rpb25zKGluc3RydWN0aW9ucywgZXhjbHVkZVZpZXdwb3J0ID0gZmFsc2UsIHZpZXdwb3J0Q29udGV4dCA9IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiBpbnN0cnVjdGlvbnNcbiAgICAgICAgICAgIC5tYXAoaW5zdHJ1Y3Rpb24gPT4gdGhpcy5zdHJpbmdpZnlWaWV3cG9ydEluc3RydWN0aW9uKGluc3RydWN0aW9uLCBleGNsdWRlVmlld3BvcnQsIHZpZXdwb3J0Q29udGV4dCkpXG4gICAgICAgICAgICAuZmlsdGVyKGluc3RydWN0aW9uID0+IGluc3RydWN0aW9uICYmIGluc3RydWN0aW9uLmxlbmd0aClcbiAgICAgICAgICAgIC5qb2luKHRoaXMuc2VwYXJhdG9ycy5zaWJsaW5nKTtcbiAgICB9XG4gICAgc3RyaW5naWZ5Vmlld3BvcnRJbnN0cnVjdGlvbihpbnN0cnVjdGlvbiwgZXhjbHVkZVZpZXdwb3J0ID0gZmFsc2UsIHZpZXdwb3J0Q29udGV4dCA9IGZhbHNlKSB7XG4gICAgICAgIGlmICh0eXBlb2YgaW5zdHJ1Y3Rpb24gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdpZnlBVmlld3BvcnRJbnN0cnVjdGlvbihpbnN0cnVjdGlvbiwgZXhjbHVkZVZpZXdwb3J0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxldCBleGNsdWRlQ3VycmVudFZpZXdwb3J0ID0gZXhjbHVkZVZpZXdwb3J0O1xuICAgICAgICAgICAgbGV0IGV4Y2x1ZGVDdXJyZW50Q29tcG9uZW50ID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAodmlld3BvcnRDb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgaWYgKGluc3RydWN0aW9uLnZpZXdwb3J0ICYmIGluc3RydWN0aW9uLnZpZXdwb3J0Lm9wdGlvbnMubm9MaW5rKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFpbnN0cnVjdGlvbi5uZWVkc1ZpZXdwb3J0RGVzY3JpYmVkICYmIGluc3RydWN0aW9uLnZpZXdwb3J0ICYmICFpbnN0cnVjdGlvbi52aWV3cG9ydC5vcHRpb25zLmZvcmNlRGVzY3JpcHRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgZXhjbHVkZUN1cnJlbnRWaWV3cG9ydCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpbnN0cnVjdGlvbi52aWV3cG9ydCAmJiBpbnN0cnVjdGlvbi52aWV3cG9ydC5vcHRpb25zLmZhbGxiYWNrID09PSBpbnN0cnVjdGlvbi5jb21wb25lbnROYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGV4Y2x1ZGVDdXJyZW50Q29tcG9uZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFpbnN0cnVjdGlvbi5uZWVkc1ZpZXdwb3J0RGVzY3JpYmVkICYmIGluc3RydWN0aW9uLnZpZXdwb3J0U2NvcGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZXhjbHVkZUN1cnJlbnRWaWV3cG9ydCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgcm91dGUgPSBpbnN0cnVjdGlvbi5yb3V0ZTtcbiAgICAgICAgICAgIGNvbnN0IG5leHRJbnN0cnVjdGlvbnMgPSBpbnN0cnVjdGlvbi5uZXh0U2NvcGVJbnN0cnVjdGlvbnM7XG4gICAgICAgICAgICBsZXQgc3RyaW5naWZpZWQgPSBpbnN0cnVjdGlvbi5jb250ZXh0O1xuICAgICAgICAgICAgLy8gSXQncyBhIGNvbmZpZ3VyZWQgcm91dGVcbiAgICAgICAgICAgIGlmIChyb3V0ZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIC8vIEFscmVhZHkgYWRkZWQgYXMgcGFydCBvZiBhIGNvbmZpZ3VyYXRpb24sIHNraXAgdG8gbmV4dCBzY29wZVxuICAgICAgICAgICAgICAgIGlmIChyb3V0ZSA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkobmV4dEluc3RydWN0aW9ucylcbiAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5zdHJpbmdpZnlWaWV3cG9ydEluc3RydWN0aW9ucyhuZXh0SW5zdHJ1Y3Rpb25zLCBleGNsdWRlVmlld3BvcnQsIHZpZXdwb3J0Q29udGV4dClcbiAgICAgICAgICAgICAgICAgICAgICAgIDogJyc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHN0cmluZ2lmaWVkICs9IHJvdXRlLmVuZHNXaXRoKHRoaXMuc2VwYXJhdG9ycy5zY29wZSkgPyByb3V0ZS5zbGljZSgwLCAtdGhpcy5zZXBhcmF0b3JzLnNjb3BlLmxlbmd0aCkgOiByb3V0ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHN0cmluZ2lmaWVkICs9IHRoaXMuc3RyaW5naWZ5QVZpZXdwb3J0SW5zdHJ1Y3Rpb24oaW5zdHJ1Y3Rpb24sIGV4Y2x1ZGVDdXJyZW50Vmlld3BvcnQsIGV4Y2x1ZGVDdXJyZW50Q29tcG9uZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5leHRJbnN0cnVjdGlvbnMpICYmIG5leHRJbnN0cnVjdGlvbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV4dFN0cmluZ2lmaWVkID0gdGhpcy5zdHJpbmdpZnlWaWV3cG9ydEluc3RydWN0aW9ucyhuZXh0SW5zdHJ1Y3Rpb25zLCBleGNsdWRlVmlld3BvcnQsIHZpZXdwb3J0Q29udGV4dCk7XG4gICAgICAgICAgICAgICAgaWYgKG5leHRTdHJpbmdpZmllZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0cmluZ2lmaWVkICs9IG5leHRJbnN0cnVjdGlvbnMubGVuZ3RoID09PSAxIC8vIFRPRE86IFRoaXMgc2hvdWxkIHJlYWxseSBhbHNvIGNoZWNrIHRoYXQgdGhlIGluc3RydWN0aW9ucyBoYXZlIHZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGAke3RoaXMuc2VwYXJhdG9ycy5zY29wZX0ke25leHRTdHJpbmdpZmllZH1gXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGAke3RoaXMuc2VwYXJhdG9ycy5zY29wZX0ke3RoaXMuc2VwYXJhdG9ycy5zY29wZVN0YXJ0fSR7bmV4dFN0cmluZ2lmaWVkfSR7dGhpcy5zZXBhcmF0b3JzLnNjb3BlRW5kfWA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHN0cmluZ2lmaWVkO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0cmluZ2lmeVNjb3BlZFZpZXdwb3J0SW5zdHJ1Y3Rpb25zKGluc3RydWN0aW9ucykge1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoaW5zdHJ1Y3Rpb25zKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RyaW5naWZ5U2NvcGVkVmlld3BvcnRJbnN0cnVjdGlvbnMoW2luc3RydWN0aW9uc10pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbnN0cnVjdGlvbnMubWFwKChpbnN0cnVjdGlvbikgPT4gdGhpcy5zdHJpbmdpZnlWaWV3cG9ydEluc3RydWN0aW9uKGluc3RydWN0aW9uKSkuam9pbih0aGlzLnNlcGFyYXRvcnMuc2NvcGUpO1xuICAgIH1cbiAgICBlbmNvZGVWaWV3cG9ydEluc3RydWN0aW9ucyhpbnN0cnVjdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudCh0aGlzLnN0cmluZ2lmeVZpZXdwb3J0SW5zdHJ1Y3Rpb25zKGluc3RydWN0aW9ucykpLnJlcGxhY2UoL1xcKC9nLCAnJTI4JykucmVwbGFjZSgvXFwpL2csICclMjknKTtcbiAgICB9XG4gICAgZGVjb2RlVmlld3BvcnRJbnN0cnVjdGlvbnMoaW5zdHJ1Y3Rpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhcnNlVmlld3BvcnRJbnN0cnVjdGlvbnMoZGVjb2RlVVJJQ29tcG9uZW50KGluc3RydWN0aW9ucykpO1xuICAgIH1cbiAgICBidWlsZFNjb3BlZExpbmsoc2NvcGVDb250ZXh0LCBocmVmKSB7XG4gICAgICAgIGlmIChzY29wZUNvbnRleHQpIHtcbiAgICAgICAgICAgIGhyZWYgPSBgLyR7c2NvcGVDb250ZXh0fSR7dGhpcy5zZXBhcmF0b3JzLnNjb3BlfSR7aHJlZn1gO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBocmVmO1xuICAgIH1cbiAgICBzaG91bGRDbGVhclZpZXdwb3J0cyhwYXRoKSB7XG4gICAgICAgIGNvbnN0IGNsZWFyVmlld3BvcnRzID0gKHBhdGggPT09IHRoaXMuc2VwYXJhdG9ycy5jbGVhciB8fCBwYXRoLnN0YXJ0c1dpdGgodGhpcy5zZXBhcmF0b3JzLmNsZWFyICsgdGhpcy5zZXBhcmF0b3JzLmFkZCkpO1xuICAgICAgICBjb25zdCBuZXdQYXRoID0gcGF0aC5zdGFydHNXaXRoKHRoaXMuc2VwYXJhdG9ycy5jbGVhcikgPyBwYXRoLnNsaWNlKDIpIDogcGF0aDtcbiAgICAgICAgcmV0dXJuIHsgY2xlYXJWaWV3cG9ydHMsIG5ld1BhdGggfTtcbiAgICB9XG4gICAgbWVyZ2VWaWV3cG9ydEluc3RydWN0aW9ucyhpbnN0cnVjdGlvbnMpIHtcbiAgICAgICAgY29uc3QgbWVyZ2VkID0gW107XG4gICAgICAgIGZvciAobGV0IGluc3RydWN0aW9uIG9mIGluc3RydWN0aW9ucykge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBpbnN0cnVjdGlvbiA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbiA9IHRoaXMucGFyc2VWaWV3cG9ydEluc3RydWN0aW9uKGluc3RydWN0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gbWVyZ2VkLmZpbmRJbmRleChtZXJnZSA9PiBtZXJnZS5zYW1lVmlld3BvcnQoaW5zdHJ1Y3Rpb24pKTtcbiAgICAgICAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgbWVyZ2VkLnNwbGljZShpbmRleCwgMSwgaW5zdHJ1Y3Rpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbWVyZ2VkLnB1c2goaW5zdHJ1Y3Rpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtZXJnZWQ7XG4gICAgfVxuICAgIGZsYXR0ZW5WaWV3cG9ydEluc3RydWN0aW9ucyhpbnN0cnVjdGlvbnMpIHtcbiAgICAgICAgY29uc3QgZmxhdCA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IGluc3RydWN0aW9uIG9mIGluc3RydWN0aW9ucykge1xuICAgICAgICAgICAgZmxhdC5wdXNoKGluc3RydWN0aW9uKTtcbiAgICAgICAgICAgIGlmIChpbnN0cnVjdGlvbi5uZXh0U2NvcGVJbnN0cnVjdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBmbGF0LnB1c2goLi4udGhpcy5mbGF0dGVuVmlld3BvcnRJbnN0cnVjdGlvbnMoaW5zdHJ1Y3Rpb24ubmV4dFNjb3BlSW5zdHJ1Y3Rpb25zKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZsYXQ7XG4gICAgfVxuICAgIGNsb25lVmlld3BvcnRJbnN0cnVjdGlvbnMoaW5zdHJ1Y3Rpb25zLCBrZWVwSW5zdGFuY2VzID0gZmFsc2UsIGNvbnRleHQgPSBmYWxzZSkge1xuICAgICAgICBjb25zdCBjbG9uZXMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBpbnN0cnVjdGlvbiBvZiBpbnN0cnVjdGlvbnMpIHtcbiAgICAgICAgICAgIGNvbnN0IGNsb25lID0gdGhpcy5jcmVhdGVWaWV3cG9ydEluc3RydWN0aW9uKChrZWVwSW5zdGFuY2VzID8gaW5zdHJ1Y3Rpb24uY29tcG9uZW50SW5zdGFuY2UgOiBudWxsKSB8fCBpbnN0cnVjdGlvbi5jb21wb25lbnRUeXBlIHx8IGluc3RydWN0aW9uLmNvbXBvbmVudE5hbWUsIGtlZXBJbnN0YW5jZXMgPyBpbnN0cnVjdGlvbi52aWV3cG9ydCB8fCBpbnN0cnVjdGlvbi52aWV3cG9ydE5hbWUgOiBpbnN0cnVjdGlvbi52aWV3cG9ydE5hbWUsIGluc3RydWN0aW9uLnR5cGVkUGFyYW1ldGVycyAhPT0gbnVsbCA/IGluc3RydWN0aW9uLnR5cGVkUGFyYW1ldGVycyA6IHZvaWQgMCk7XG4gICAgICAgICAgICBjbG9uZS5uZWVkc1ZpZXdwb3J0RGVzY3JpYmVkID0gaW5zdHJ1Y3Rpb24ubmVlZHNWaWV3cG9ydERlc2NyaWJlZDtcbiAgICAgICAgICAgIGNsb25lLnJvdXRlID0gaW5zdHJ1Y3Rpb24ucm91dGU7XG4gICAgICAgICAgICBpZiAoY29udGV4dCkge1xuICAgICAgICAgICAgICAgIGNsb25lLmNvbnRleHQgPSBpbnN0cnVjdGlvbi5jb250ZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2xvbmUudmlld3BvcnRTY29wZSA9IGtlZXBJbnN0YW5jZXMgPyBpbnN0cnVjdGlvbi52aWV3cG9ydFNjb3BlIDogbnVsbDtcbiAgICAgICAgICAgIGNsb25lLnNjb3BlID0ga2VlcEluc3RhbmNlcyA/IGluc3RydWN0aW9uLnNjb3BlIDogbnVsbDtcbiAgICAgICAgICAgIGlmIChpbnN0cnVjdGlvbi5uZXh0U2NvcGVJbnN0cnVjdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBjbG9uZS5uZXh0U2NvcGVJbnN0cnVjdGlvbnMgPSB0aGlzLmNsb25lVmlld3BvcnRJbnN0cnVjdGlvbnMoaW5zdHJ1Y3Rpb24ubmV4dFNjb3BlSW5zdHJ1Y3Rpb25zLCBrZWVwSW5zdGFuY2VzLCBjb250ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNsb25lcy5wdXNoKGNsb25lKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2xvbmVzO1xuICAgIH1cbiAgICAvLyBUT0RPOiBEZWFsIHdpdGggc2VwYXJhdG9ycyBpbiBkYXRhIGFuZCBjb21wbGV4IHR5cGVzXG4gICAgcGFyc2VDb21wb25lbnRQYXJhbWV0ZXJzKHBhcmFtZXRlcnMsIHVyaUNvbXBvbmVudCA9IGZhbHNlKSB7XG4gICAgICAgIGlmIChwYXJhbWV0ZXJzID09PSB1bmRlZmluZWQgfHwgcGFyYW1ldGVycyA9PT0gbnVsbCB8fCBwYXJhbWV0ZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgcGFyYW1ldGVycyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGNvbnN0IGxpc3QgPSBbXTtcbiAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IHBhcmFtZXRlcnMuc3BsaXQodGhpcy5zZXBhcmF0b3JzLnBhcmFtZXRlclNlcGFyYXRvcik7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHBhcmFtIG9mIHBhcmFtcykge1xuICAgICAgICAgICAgICAgIGxldCBrZXk7XG4gICAgICAgICAgICAgICAgbGV0IHZhbHVlO1xuICAgICAgICAgICAgICAgIFtrZXksIHZhbHVlXSA9IHBhcmFtLnNwbGl0KHRoaXMuc2VwYXJhdG9ycy5wYXJhbWV0ZXJLZXlTZXBhcmF0b3IpO1xuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdXJpQ29tcG9uZW50ID8gZGVjb2RlVVJJQ29tcG9uZW50KGtleSkgOiBrZXk7XG4gICAgICAgICAgICAgICAgICAgIGtleSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodXJpQ29tcG9uZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGtleSA9IGRlY29kZVVSSUNvbXBvbmVudChrZXkpO1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGRlY29kZVVSSUNvbXBvbmVudCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxpc3QucHVzaCh7IGtleSwgdmFsdWUgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbGlzdDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShwYXJhbWV0ZXJzKSkge1xuICAgICAgICAgICAgcmV0dXJuIHBhcmFtZXRlcnMubWFwKHBhcmFtID0+ICh7IGtleTogdm9pZCAwLCB2YWx1ZTogcGFyYW0gfSkpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhwYXJhbWV0ZXJzKTtcbiAgICAgICAga2V5cy5zb3J0KCk7XG4gICAgICAgIHJldHVybiBrZXlzLm1hcChrZXkgPT4gKHsga2V5LCB2YWx1ZTogcGFyYW1ldGVyc1trZXldIH0pKTtcbiAgICB9XG4gICAgLy8gVE9ETzogRGVhbCB3aXRoIHNlcGFyYXRvcnMgaW4gZGF0YSBhbmQgY29tcGxleCB0eXBlc1xuICAgIHN0cmluZ2lmeUNvbXBvbmVudFBhcmFtZXRlcnMocGFyYW1ldGVycywgdXJpQ29tcG9uZW50ID0gZmFsc2UpIHtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHBhcmFtZXRlcnMpIHx8IHBhcmFtZXRlcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2VwcyA9IHRoaXMuc2VwYXJhdG9ycztcbiAgICAgICAgcmV0dXJuIHBhcmFtZXRlcnNcbiAgICAgICAgICAgIC5tYXAocGFyYW0gPT4ge1xuICAgICAgICAgICAgY29uc3Qga2V5ID0gcGFyYW0ua2V5ICE9PSB2b2lkIDAgJiYgdXJpQ29tcG9uZW50ID8gZW5jb2RlVVJJQ29tcG9uZW50KHBhcmFtLmtleSkgOiBwYXJhbS5rZXk7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHVyaUNvbXBvbmVudCA/IGVuY29kZVVSSUNvbXBvbmVudChwYXJhbS52YWx1ZSkgOiBwYXJhbS52YWx1ZTtcbiAgICAgICAgICAgIHJldHVybiBrZXkgIT09IHZvaWQgMCAmJiBrZXkgIT09IHZhbHVlID8ga2V5ICsgc2Vwcy5wYXJhbWV0ZXJLZXlTZXBhcmF0b3IgKyB2YWx1ZSA6IHZhbHVlO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLmpvaW4oc2Vwcy5wYXJhbWV0ZXJTZXBhcmF0b3IpO1xuICAgIH1cbiAgICBtYXRjaFNjb3BlKGluc3RydWN0aW9ucywgc2NvcGUpIHtcbiAgICAgICAgY29uc3QgbWF0Y2hpbmcgPSBbXTtcbiAgICAgICAgbWF0Y2hpbmcucHVzaCguLi5pbnN0cnVjdGlvbnMuZmlsdGVyKGluc3RydWN0aW9uID0+IGluc3RydWN0aW9uLnNjb3BlID09PSBzY29wZSkpO1xuICAgICAgICBtYXRjaGluZy5wdXNoKC4uLmluc3RydWN0aW9uc1xuICAgICAgICAgICAgLmZpbHRlcihpbnN0ciA9PiBpbnN0ci5zY29wZSAhPT0gc2NvcGUpXG4gICAgICAgICAgICAubWFwKGluc3RyID0+IEFycmF5LmlzQXJyYXkoaW5zdHIubmV4dFNjb3BlSW5zdHJ1Y3Rpb25zKSA/IHRoaXMubWF0Y2hTY29wZShpbnN0ci5uZXh0U2NvcGVJbnN0cnVjdGlvbnMsIHNjb3BlKSA6IFtdKVxuICAgICAgICAgICAgLmZsYXQoKSk7XG4gICAgICAgIHJldHVybiBtYXRjaGluZztcbiAgICB9XG4gICAgbWF0Y2hDaGlsZHJlbihpbnN0cnVjdGlvbnMsIGFjdGl2ZSkge1xuICAgICAgICBmb3IgKGNvbnN0IGluc3RydWN0aW9uIG9mIGluc3RydWN0aW9ucykge1xuICAgICAgICAgICAgY29uc3QgbWF0Y2hpbmcgPSBhY3RpdmUuZmlsdGVyKGluc3RyID0+IGluc3RyLnNhbWVDb21wb25lbnQoaW5zdHJ1Y3Rpb24pKTtcbiAgICAgICAgICAgIGlmIChtYXRjaGluZy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShpbnN0cnVjdGlvbi5uZXh0U2NvcGVJbnN0cnVjdGlvbnMpXG4gICAgICAgICAgICAgICAgJiYgaW5zdHJ1Y3Rpb24ubmV4dFNjb3BlSW5zdHJ1Y3Rpb25zLmxlbmd0aCA+IDBcbiAgICAgICAgICAgICAgICAmJiB0aGlzLm1hdGNoQ2hpbGRyZW4oaW5zdHJ1Y3Rpb24ubmV4dFNjb3BlSW5zdHJ1Y3Rpb25zLCBtYXRjaGluZy5tYXAoaW5zdHIgPT4gQXJyYXkuaXNBcnJheShpbnN0ci5uZXh0U2NvcGVJbnN0cnVjdGlvbnMpID8gaW5zdHIubmV4dFNjb3BlSW5zdHJ1Y3Rpb25zIDogW10pLmZsYXQoKSkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBwYXJzZVZpZXdwb3J0SW5zdHJ1Y3Rpb25zV29ya2VyKGluc3RydWN0aW9ucywgZ3JvdXBlZCA9IGZhbHNlKSB7XG4gICAgICAgIGlmICghaW5zdHJ1Y3Rpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4geyBpbnN0cnVjdGlvbnM6IFtdLCByZW1haW5pbmc6ICcnIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluc3RydWN0aW9ucy5zdGFydHNXaXRoKHRoaXMuc2VwYXJhdG9ycy5zY29wZVN0YXJ0KSkge1xuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zID0gYCR7dGhpcy5zZXBhcmF0b3JzLnNjb3BlfSR7aW5zdHJ1Y3Rpb25zfWA7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgdmlld3BvcnRJbnN0cnVjdGlvbnMgPSBbXTtcbiAgICAgICAgbGV0IGd1YXJkID0gMTAwMDtcbiAgICAgICAgd2hpbGUgKGluc3RydWN0aW9ucy5sZW5ndGggJiYgZ3VhcmQpIHtcbiAgICAgICAgICAgIGd1YXJkLS07XG4gICAgICAgICAgICBpZiAoaW5zdHJ1Y3Rpb25zLnN0YXJ0c1dpdGgodGhpcy5zZXBhcmF0b3JzLnNjb3BlKSkge1xuICAgICAgICAgICAgICAgIGluc3RydWN0aW9ucyA9IGluc3RydWN0aW9ucy5zbGljZSh0aGlzLnNlcGFyYXRvcnMuc2NvcGUubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzY29wZVN0YXJ0ID0gaW5zdHJ1Y3Rpb25zLnN0YXJ0c1dpdGgodGhpcy5zZXBhcmF0b3JzLnNjb3BlU3RhcnQpO1xuICAgICAgICAgICAgICAgIGlmIChzY29wZVN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgICAgIGluc3RydWN0aW9ucyA9IGluc3RydWN0aW9ucy5zbGljZSh0aGlzLnNlcGFyYXRvcnMuc2NvcGVTdGFydC5sZW5ndGgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCB7IGluc3RydWN0aW9uczogZm91bmQsIHJlbWFpbmluZyB9ID0gdGhpcy5wYXJzZVZpZXdwb3J0SW5zdHJ1Y3Rpb25zV29ya2VyKGluc3RydWN0aW9ucywgc2NvcGVTdGFydCk7XG4gICAgICAgICAgICAgICAgaWYgKHZpZXdwb3J0SW5zdHJ1Y3Rpb25zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICB2aWV3cG9ydEluc3RydWN0aW9uc1t2aWV3cG9ydEluc3RydWN0aW9ucy5sZW5ndGggLSAxXS5uZXh0U2NvcGVJbnN0cnVjdGlvbnMgPSBmb3VuZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZpZXdwb3J0SW5zdHJ1Y3Rpb25zLnB1c2goLi4uZm91bmQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbnMgPSByZW1haW5pbmc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpbnN0cnVjdGlvbnMuc3RhcnRzV2l0aCh0aGlzLnNlcGFyYXRvcnMuc2NvcGVFbmQpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGdyb3VwZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zID0gaW5zdHJ1Y3Rpb25zLnNsaWNlKHRoaXMuc2VwYXJhdG9ycy5zY29wZUVuZC5sZW5ndGgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4geyBpbnN0cnVjdGlvbnM6IHZpZXdwb3J0SW5zdHJ1Y3Rpb25zLCByZW1haW5pbmc6IGluc3RydWN0aW9ucyB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaW5zdHJ1Y3Rpb25zLnN0YXJ0c1dpdGgodGhpcy5zZXBhcmF0b3JzLnNpYmxpbmcpICYmICF0aGlzLmlzQWRkVmlld3BvcnRJbnN0cnVjdGlvbihpbnN0cnVjdGlvbnMpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFncm91cGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGluc3RydWN0aW9uczogdmlld3BvcnRJbnN0cnVjdGlvbnMsIHJlbWFpbmluZzogaW5zdHJ1Y3Rpb25zIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGluc3RydWN0aW9ucyA9IGluc3RydWN0aW9ucy5zbGljZSh0aGlzLnNlcGFyYXRvcnMuc2libGluZy5sZW5ndGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBpbnN0cnVjdGlvbjogdmlld3BvcnRJbnN0cnVjdGlvbiwgcmVtYWluaW5nIH0gPSB0aGlzLnBhcnNlQVZpZXdwb3J0SW5zdHJ1Y3Rpb24oaW5zdHJ1Y3Rpb25zKTtcbiAgICAgICAgICAgICAgICB2aWV3cG9ydEluc3RydWN0aW9ucy5wdXNoKHZpZXdwb3J0SW5zdHJ1Y3Rpb24pO1xuICAgICAgICAgICAgICAgIGluc3RydWN0aW9ucyA9IHJlbWFpbmluZztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBpbnN0cnVjdGlvbnM6IHZpZXdwb3J0SW5zdHJ1Y3Rpb25zLCByZW1haW5pbmc6IGluc3RydWN0aW9ucyB9O1xuICAgIH1cbiAgICBmaW5kTmV4dFRva2VuKGluc3RydWN0aW9uLCB0b2tlbnMpIHtcbiAgICAgICAgY29uc3QgbWF0Y2hlcyA9IHt9O1xuICAgICAgICAvLyBUb2tlbnMgY2FuIGhhdmUgbGVuZ3RoID4gMVxuICAgICAgICBmb3IgKGNvbnN0IHRva2VuIG9mIHRva2Vucykge1xuICAgICAgICAgICAgY29uc3QgdG9rZW5Qb3MgPSBpbnN0cnVjdGlvbi5pbmRleE9mKHRva2VuKTtcbiAgICAgICAgICAgIGlmICh0b2tlblBvcyA+IC0xKSB7XG4gICAgICAgICAgICAgICAgbWF0Y2hlc1t0b2tlbl0gPSBpbnN0cnVjdGlvbi5pbmRleE9mKHRva2VuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwb3MgPSBNYXRoLm1pbiguLi5PYmplY3QudmFsdWVzKG1hdGNoZXMpKTtcbiAgICAgICAgZm9yIChjb25zdCB0b2tlbiBpbiBtYXRjaGVzKSB7XG4gICAgICAgICAgICBpZiAobWF0Y2hlc1t0b2tlbl0gPT09IHBvcykge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHRva2VuLCBwb3MgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyB0b2tlbjogJycsIHBvczogLTEgfTtcbiAgICB9XG4gICAgcGFyc2VBVmlld3BvcnRJbnN0cnVjdGlvbihpbnN0cnVjdGlvbikge1xuICAgICAgICBjb25zdCBzZXBzID0gdGhpcy5zZXBhcmF0b3JzO1xuICAgICAgICBjb25zdCB0b2tlbnMgPSBbc2Vwcy5wYXJhbWV0ZXJzLCBzZXBzLnZpZXdwb3J0LCBzZXBzLm5vU2NvcGUsIHNlcHMuc2NvcGVFbmQsIHNlcHMuc2NvcGUsIHNlcHMuc2libGluZ107XG4gICAgICAgIGxldCBjb21wb25lbnQgPSB2b2lkIDA7XG4gICAgICAgIGxldCBwYXJhbWV0ZXJzU3RyaW5nID0gdm9pZCAwO1xuICAgICAgICBsZXQgdmlld3BvcnQgPSB2b2lkIDA7XG4gICAgICAgIGxldCBzY29wZSA9IHRydWU7XG4gICAgICAgIGxldCB0b2tlbjtcbiAgICAgICAgbGV0IHBvcztcbiAgICAgICAgY29uc3Qgc3BlY2lhbHMgPSBbc2Vwcy5hZGQsIHNlcHMuY2xlYXJdO1xuICAgICAgICBmb3IgKGNvbnN0IHNwZWNpYWwgb2Ygc3BlY2lhbHMpIHtcbiAgICAgICAgICAgIGlmIChpbnN0cnVjdGlvbiA9PT0gc3BlY2lhbCkge1xuICAgICAgICAgICAgICAgIGNvbXBvbmVudCA9IGluc3RydWN0aW9uO1xuICAgICAgICAgICAgICAgIGluc3RydWN0aW9uID0gJyc7XG4gICAgICAgICAgICAgICAgdG9rZW5zLnNoaWZ0KCk7IC8vIHBhcmFtZXRlcnNcbiAgICAgICAgICAgICAgICB0b2tlbnMuc2hpZnQoKTsgLy8gdmlld3BvcnRcbiAgICAgICAgICAgICAgICB0b2tlbiA9IHNlcHMudmlld3BvcnQ7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbXBvbmVudCA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHNwZWNpYWwgb2Ygc3BlY2lhbHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5zdHJ1Y3Rpb24uc3RhcnRzV2l0aChgJHtzcGVjaWFsfSR7c2Vwcy52aWV3cG9ydH1gKSkge1xuICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQgPSBzcGVjaWFsO1xuICAgICAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbiA9IGluc3RydWN0aW9uLnNsaWNlKGAke3NwZWNpYWx9JHtzZXBzLnZpZXdwb3J0fWAubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgdG9rZW5zLnNoaWZ0KCk7IC8vIHBhcmFtZXRlcnNcbiAgICAgICAgICAgICAgICAgICAgdG9rZW5zLnNoaWZ0KCk7IC8vIHZpZXdwb3J0XG4gICAgICAgICAgICAgICAgICAgIHRva2VuID0gc2Vwcy52aWV3cG9ydDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChjb21wb25lbnQgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgKHsgdG9rZW4sIHBvcyB9ID0gdGhpcy5maW5kTmV4dFRva2VuKGluc3RydWN0aW9uLCB0b2tlbnMpKTtcbiAgICAgICAgICAgIGNvbXBvbmVudCA9IHBvcyAhPT0gLTEgPyBpbnN0cnVjdGlvbi5zbGljZSgwLCBwb3MpIDogaW5zdHJ1Y3Rpb247XG4gICAgICAgICAgICBpbnN0cnVjdGlvbiA9IHBvcyAhPT0gLTEgPyBpbnN0cnVjdGlvbi5zbGljZShwb3MgKyB0b2tlbi5sZW5ndGgpIDogJyc7XG4gICAgICAgICAgICB0b2tlbnMuc2hpZnQoKTsgLy8gcGFyYW1ldGVyc1xuICAgICAgICAgICAgaWYgKHRva2VuID09PSBzZXBzLnBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgICAgICAoeyB0b2tlbiwgcG9zIH0gPSB0aGlzLmZpbmROZXh0VG9rZW4oaW5zdHJ1Y3Rpb24sIFtzZXBzLnBhcmFtZXRlcnNFbmRdKSk7XG4gICAgICAgICAgICAgICAgcGFyYW1ldGVyc1N0cmluZyA9IGluc3RydWN0aW9uLnNsaWNlKDAsIHBvcyk7XG4gICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb24gPSBpbnN0cnVjdGlvbi5zbGljZShwb3MgKyB0b2tlbi5sZW5ndGgpO1xuICAgICAgICAgICAgICAgICh7IHRva2VuIH0gPSB0aGlzLmZpbmROZXh0VG9rZW4oaW5zdHJ1Y3Rpb24sIHRva2VucykpO1xuICAgICAgICAgICAgICAgIGluc3RydWN0aW9uID0gaW5zdHJ1Y3Rpb24uc2xpY2UodG9rZW4ubGVuZ3RoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRva2Vucy5zaGlmdCgpOyAvLyB2aWV3cG9ydFxuICAgICAgICB9XG4gICAgICAgIGlmICh0b2tlbiA9PT0gc2Vwcy52aWV3cG9ydCkge1xuICAgICAgICAgICAgKHsgdG9rZW4sIHBvcyB9ID0gdGhpcy5maW5kTmV4dFRva2VuKGluc3RydWN0aW9uLCB0b2tlbnMpKTtcbiAgICAgICAgICAgIHZpZXdwb3J0ID0gcG9zICE9PSAtMSA/IGluc3RydWN0aW9uLnNsaWNlKDAsIHBvcykgOiBpbnN0cnVjdGlvbjtcbiAgICAgICAgICAgIGluc3RydWN0aW9uID0gcG9zICE9PSAtMSA/IGluc3RydWN0aW9uLnNsaWNlKHBvcyArIHRva2VuLmxlbmd0aCkgOiAnJztcbiAgICAgICAgfVxuICAgICAgICB0b2tlbnMuc2hpZnQoKTsgLy8gbm9TY29wZVxuICAgICAgICBpZiAodG9rZW4gPT09IHNlcHMubm9TY29wZSkge1xuICAgICAgICAgICAgc2NvcGUgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBSZXN0b3JlIHRva2VuIHRoYXQgYmVsb25ncyB0byBuZXh0IGluc3RydWN0aW9uXG4gICAgICAgIGlmICh0b2tlbiA9PT0gc2Vwcy5zY29wZUVuZCB8fCB0b2tlbiA9PT0gc2Vwcy5zY29wZSB8fCB0b2tlbiA9PT0gc2Vwcy5zaWJsaW5nKSB7XG4gICAgICAgICAgICBpbnN0cnVjdGlvbiA9IGAke3Rva2VufSR7aW5zdHJ1Y3Rpb259YDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB2aWV3cG9ydEluc3RydWN0aW9uID0gdGhpcy5jcmVhdGVWaWV3cG9ydEluc3RydWN0aW9uKGNvbXBvbmVudCwgdmlld3BvcnQsIHBhcmFtZXRlcnNTdHJpbmcsIHNjb3BlKTtcbiAgICAgICAgcmV0dXJuIHsgaW5zdHJ1Y3Rpb246IHZpZXdwb3J0SW5zdHJ1Y3Rpb24sIHJlbWFpbmluZzogaW5zdHJ1Y3Rpb24gfTtcbiAgICB9XG4gICAgc3RyaW5naWZ5QVZpZXdwb3J0SW5zdHJ1Y3Rpb24oaW5zdHJ1Y3Rpb24sIGV4Y2x1ZGVWaWV3cG9ydCA9IGZhbHNlLCBleGNsdWRlQ29tcG9uZW50ID0gZmFsc2UpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBpbnN0cnVjdGlvbiA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0cmluZ2lmeVZpZXdwb3J0SW5zdHJ1Y3Rpb24odGhpcy5wYXJzZVZpZXdwb3J0SW5zdHJ1Y3Rpb24oaW5zdHJ1Y3Rpb24pLCBleGNsdWRlVmlld3BvcnQsIGV4Y2x1ZGVDb21wb25lbnQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGV0IGluc3RydWN0aW9uU3RyaW5nID0gIWV4Y2x1ZGVDb21wb25lbnQgPyBpbnN0cnVjdGlvbi5jb21wb25lbnROYW1lIDogJyc7XG4gICAgICAgICAgICBjb25zdCBzcGVjaWZpY2F0aW9uID0gaW5zdHJ1Y3Rpb24uY29tcG9uZW50VHlwZSA/IGluc3RydWN0aW9uLmNvbXBvbmVudFR5cGUucGFyYW1ldGVycyA6IG51bGw7XG4gICAgICAgICAgICBjb25zdCBwYXJhbWV0ZXJzID0gdGhpcy5zdHJpbmdpZnlDb21wb25lbnRQYXJhbWV0ZXJzKGluc3RydWN0aW9uLnRvU29ydGVkUGFyYW1ldGVycyhzcGVjaWZpY2F0aW9uKSk7XG4gICAgICAgICAgICBpZiAocGFyYW1ldGVycy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb25TdHJpbmcgKz0gIWV4Y2x1ZGVDb21wb25lbnRcbiAgICAgICAgICAgICAgICAgICAgPyBgJHt0aGlzLnNlcGFyYXRvcnMucGFyYW1ldGVyc30ke3BhcmFtZXRlcnN9JHt0aGlzLnNlcGFyYXRvcnMucGFyYW1ldGVyc0VuZH1gXG4gICAgICAgICAgICAgICAgICAgIDogcGFyYW1ldGVycztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpbnN0cnVjdGlvbi52aWV3cG9ydE5hbWUgIT09IG51bGwgJiYgIWV4Y2x1ZGVWaWV3cG9ydCkge1xuICAgICAgICAgICAgICAgIGluc3RydWN0aW9uU3RyaW5nICs9IHRoaXMuc2VwYXJhdG9ycy52aWV3cG9ydCArIGluc3RydWN0aW9uLnZpZXdwb3J0TmFtZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghaW5zdHJ1Y3Rpb24ub3duc1Njb3BlKSB7XG4gICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb25TdHJpbmcgKz0gdGhpcy5zZXBhcmF0b3JzLm5vU2NvcGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaW5zdHJ1Y3Rpb25TdHJpbmcgfHwgJyc7XG4gICAgICAgIH1cbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbnN0cnVjdGlvbi1yZXNvbHZlci5qcy5tYXAiLCJleHBvcnQgdmFyIFJlZW50cnlCZWhhdmlvcjtcbihmdW5jdGlvbiAoUmVlbnRyeUJlaGF2aW9yKSB7XG4gICAgUmVlbnRyeUJlaGF2aW9yW1wiZGVmYXVsdFwiXSA9IFwiZGVmYXVsdFwiO1xuICAgIFJlZW50cnlCZWhhdmlvcltcImRpc2FsbG93XCJdID0gXCJkaXNhbGxvd1wiO1xuICAgIFJlZW50cnlCZWhhdmlvcltcImVudGVyXCJdID0gXCJlbnRlclwiO1xuICAgIFJlZW50cnlCZWhhdmlvcltcInJlZnJlc2hcIl0gPSBcInJlZnJlc2hcIjtcbn0pKFJlZW50cnlCZWhhdmlvciB8fCAoUmVlbnRyeUJlaGF2aW9yID0ge30pKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWludGVyZmFjZXMuanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIGxpZmVjeWNsZUxvZ2dlcihuYW1lKSB7XG4gICAgY29uc3QgbGlmZWN5Y2xlcyA9IFtcbiAgICAgICAgJ2NhbkxlYXZlJywgJ2xlYXZlJyxcbiAgICAgICAgJ2NhbkVudGVyJywgJ2VudGVyJyxcbiAgICAgICAgJ2NyZWF0ZWQnLFxuICAgICAgICAnYmVmb3JlQmluZCcsICdhZnRlckJpbmQnLFxuICAgICAgICAnYmVmb3JlQXR0YWNoJywgJ2FmdGVyQXR0YWNoJyxcbiAgICAgICAgJ2JlZm9yZURldGFjaCcsICdhZnRlckRldGFjaCcsXG4gICAgICAgICdiZWZvcmVVbmJpbmQnLCAnYWZ0ZXJVbmJpbmQnLFxuICAgIF07XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgICAgZm9yIChjb25zdCBsaWZlY3ljbGUgb2YgbGlmZWN5Y2xlcykge1xuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmcgPSB0YXJnZXQucHJvdG90eXBlW2xpZmVjeWNsZV07XG4gICAgICAgICAgICBpZiAoZXhpc3RpbmcgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgIHRhcmdldC5wcm90b3R5cGVbbGlmZWN5Y2xlXSA9IGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGAke25hbWV9ICR7bGlmZWN5Y2xlfWAsIGFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXhpc3RpbmcuYXBwbHkodGFyZ2V0LCBhcmdzKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0LnByb3RvdHlwZVtsaWZlY3ljbGVdID0gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYCR7bmFtZX0gJHtsaWZlY3ljbGV9YCwgYXJncyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsaWZlY3ljbGUuc3RhcnRzV2l0aCgnY2FuJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG59XG5leHBvcnQgY2xhc3MgTGlmZWN5Y2xlQ2xhc3Mge1xuICAgIGNhbkVudGVyKCkgeyBjb25zb2xlLmxvZyhgbmFtZSBjYW5FbnRlcmApOyByZXR1cm4gdHJ1ZTsgfVxuICAgIGVudGVyKHBhcmFtcykgeyBjb25zb2xlLmxvZyhgbmFtZSBlbnRlcmApOyB9XG4gICAgY3JlYXRlZCgpIHsgY29uc29sZS5sb2coYG5hbWUgY3JlYXRlZGApOyB9XG4gICAgYmVmb3JlQmluZCgpIHsgY29uc29sZS5sb2coYG5hbWUgYmluZGluZ2ApOyB9XG4gICAgYWZ0ZXJCaW5kKCkgeyBjb25zb2xlLmxvZyhgbmFtZSBib3VuZGApOyB9XG4gICAgYmVmb3JlQXR0YWNoKCkgeyBjb25zb2xlLmxvZyhgbmFtZSBiZWZvcmVBdHRhY2hgKTsgfVxuICAgIGFmdGVyQXR0YWNoKCkgeyBjb25zb2xlLmxvZyhgbmFtZSBhZnRlckF0dGFjaGApOyB9XG4gICAgY2FuTGVhdmUoKSB7IGNvbnNvbGUubG9nKGBuYW1lIGNhbkxlYXZlYCk7IHJldHVybiB0cnVlOyB9XG4gICAgbGVhdmUoKSB7IGNvbnNvbGUubG9nKGBuYW1lIGxlYXZlYCk7IH1cbiAgICBiZWZvcmVEZXRhY2goKSB7IGNvbnNvbGUubG9nKGBuYW1lIGJlZm9yZURldGFjaGApOyB9XG4gICAgYWZ0ZXJEZXRhY2goKSB7IGNvbnNvbGUubG9nKGBuYW1lIGFmdGVyRGV0YWNoYCk7IH1cbiAgICBiZWZvcmVVbmJpbmQoKSB7IGNvbnNvbGUubG9nKGBuYW1lIGJlZm9yZVVuYmluZGApOyB9XG4gICAgYWZ0ZXJVbmJpbmQoKSB7IGNvbnNvbGUubG9nKGBuYW1lIHVuYm91bmRgKTsgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bGlmZWN5Y2xlLWxvZ2dlci5qcy5tYXAiLCJpbXBvcnQgeyBJRE9NLCBDdXN0b21BdHRyaWJ1dGUgfSBmcm9tICdAYXVyZWxpYS9ydW50aW1lJztcbi8qKlxuICogQ2xhc3MgcmVzcG9uc2libGUgZm9yIGhhbmRsaW5nIGludGVyYWN0aW9ucyB0aGF0IHNob3VsZCB0cmlnZ2VyIG5hdmlnYXRpb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBMaW5rSGFuZGxlciB7XG4gICAgY29uc3RydWN0b3IoZG9tKSB7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IHtcbiAgICAgICAgICAgIHVzZUhyZWY6IHRydWUsXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4geyByZXR1cm47IH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5pc0FjdGl2ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmhhbmRsZXIgPSAoZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaW5mbyA9IExpbmtIYW5kbGVyLmdldEV2ZW50SW5mbyhlLCB0aGlzLndpbmRvdywgdGhpcy5vcHRpb25zKTtcbiAgICAgICAgICAgIGlmIChpbmZvLnNob3VsZEhhbmRsZUV2ZW50KSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5jYWxsYmFjayhpbmZvKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy53aW5kb3cgPSBkb20ud2luZG93O1xuICAgICAgICB0aGlzLmRvY3VtZW50ID0gZG9tLmRvY3VtZW50O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBocmVmIGFuZCBhIFwic2hvdWxkIGhhbmRsZVwiIHJlY29tbWVuZGF0aW9uLCBnaXZlbiBhbiBFdmVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBldmVudCAtIFRoZSBFdmVudCB0byBpbnNwZWN0IGZvciB0YXJnZXQgYW5jaG9yIGFuZCBocmVmLlxuICAgICAqL1xuICAgIHN0YXRpYyBnZXRFdmVudEluZm8oZXZlbnQsIHdpbiwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBpbmZvID0ge1xuICAgICAgICAgICAgc2hvdWxkSGFuZGxlRXZlbnQ6IGZhbHNlLFxuICAgICAgICAgICAgaW5zdHJ1Y3Rpb246IG51bGwsXG4gICAgICAgICAgICBhbmNob3I6IG51bGxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gaW5mby5hbmNob3IgPSBldmVudC5jdXJyZW50VGFyZ2V0O1xuICAgICAgICAvLyBTd2l0Y2ggdG8gdGhpcyBmb3IgZGVsZWdhdGlvbjpcbiAgICAgICAgLy8gY29uc3QgdGFyZ2V0ID0gaW5mby5hbmNob3IgPSBMaW5rSGFuZGxlci5jbG9zZXN0QW5jaG9yKGV2ZW50LnRhcmdldCBhcyBFbGVtZW50KTtcbiAgICAgICAgaWYgKCF0YXJnZXQgfHwgIUxpbmtIYW5kbGVyLnRhcmdldElzVGhpc1dpbmRvdyh0YXJnZXQsIHdpbikpIHtcbiAgICAgICAgICAgIHJldHVybiBpbmZvO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0YXJnZXQuaGFzQXR0cmlidXRlKCdleHRlcm5hbCcpKSB7XG4gICAgICAgICAgICByZXR1cm4gaW5mbztcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXZlbnQuYWx0S2V5IHx8IGV2ZW50LmN0cmxLZXkgfHwgZXZlbnQubWV0YUtleSB8fCBldmVudC5zaGlmdEtleSkge1xuICAgICAgICAgICAgcmV0dXJuIGluZm87XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZ290b0F0dHIgPSBDdXN0b21BdHRyaWJ1dGUuZm9yKHRhcmdldCwgJ2dvdG8nKTtcbiAgICAgICAgY29uc3QgZ290byA9IGdvdG9BdHRyICE9PSB2b2lkIDAgPyBnb3RvQXR0ci52aWV3TW9kZWwudmFsdWUgOiBudWxsO1xuICAgICAgICBjb25zdCBocmVmID0gb3B0aW9ucy51c2VIcmVmICYmIHRhcmdldC5oYXNBdHRyaWJ1dGUoJ2hyZWYnKSA/IHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2hyZWYnKSA6IG51bGw7XG4gICAgICAgIGlmICgoZ290byA9PT0gbnVsbCB8fCBnb3RvLmxlbmd0aCA9PT0gMCkgJiYgKGhyZWYgPT09IG51bGwgfHwgaHJlZi5sZW5ndGggPT09IDApKSB7XG4gICAgICAgICAgICByZXR1cm4gaW5mbztcbiAgICAgICAgfVxuICAgICAgICBpbmZvLmFuY2hvciA9IHRhcmdldDtcbiAgICAgICAgaW5mby5pbnN0cnVjdGlvbiA9IGdvdG8gfHwgaHJlZjtcbiAgICAgICAgY29uc3QgbGVmdEJ1dHRvbkNsaWNrZWQgPSBldmVudC5idXR0b24gPT09IDA7XG4gICAgICAgIGluZm8uc2hvdWxkSGFuZGxlRXZlbnQgPSBsZWZ0QnV0dG9uQ2xpY2tlZDtcbiAgICAgICAgcmV0dXJuIGluZm87XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZpbmRzIHRoZSBjbG9zZXN0IGFuY2VzdG9yIHRoYXQncyBhbiBhbmNob3IgZWxlbWVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBlbCAtIFRoZSBlbGVtZW50IHRvIHNlYXJjaCB1cHdhcmQgZnJvbS5cbiAgICAgKiBAcmV0dXJucyBUaGUgbGluayBlbGVtZW50IHRoYXQgaXMgdGhlIGNsb3Nlc3QgYW5jZXN0b3IuXG4gICAgICovXG4gICAgLy8gcHJpdmF0ZSBzdGF0aWMgY2xvc2VzdEFuY2hvcihlbDogRWxlbWVudCk6IEVsZW1lbnQgfCBudWxsIHtcbiAgICAvLyAgIHdoaWxlIChlbCAhPT0gbnVsbCAmJiBlbCAhPT0gdm9pZCAwKSB7XG4gICAgLy8gICAgIGlmIChlbC50YWdOYW1lID09PSAnQScpIHtcbiAgICAvLyAgICAgICByZXR1cm4gZWw7XG4gICAgLy8gICAgIH1cbiAgICAvLyAgICAgZWwgPSBlbC5wYXJlbnROb2RlIGFzIEVsZW1lbnQ7XG4gICAgLy8gICB9XG4gICAgLy8gICByZXR1cm4gbnVsbDtcbiAgICAvLyB9XG4gICAgLyoqXG4gICAgICogR2V0cyBhIHZhbHVlIGluZGljYXRpbmcgd2hldGhlciBvciBub3QgYW4gYW5jaG9yIHRhcmdldHMgdGhlIGN1cnJlbnQgd2luZG93LlxuICAgICAqXG4gICAgICogQHBhcmFtIHRhcmdldCAtIFRoZSBhbmNob3IgZWxlbWVudCB3aG9zZSB0YXJnZXQgc2hvdWxkIGJlIGluc3BlY3RlZC5cbiAgICAgKiBAcmV0dXJucyBUcnVlIGlmIHRoZSB0YXJnZXQgb2YgdGhlIGxpbmsgZWxlbWVudCBpcyB0aGlzIHdpbmRvdzsgZmFsc2Ugb3RoZXJ3aXNlLlxuICAgICAqL1xuICAgIHN0YXRpYyB0YXJnZXRJc1RoaXNXaW5kb3codGFyZ2V0LCB3aW4pIHtcbiAgICAgICAgY29uc3QgdGFyZ2V0V2luZG93ID0gdGFyZ2V0LmdldEF0dHJpYnV0ZSgndGFyZ2V0Jyk7XG4gICAgICAgIHJldHVybiAhdGFyZ2V0V2luZG93IHx8XG4gICAgICAgICAgICB0YXJnZXRXaW5kb3cgPT09IHdpbi5uYW1lIHx8XG4gICAgICAgICAgICB0YXJnZXRXaW5kb3cgPT09ICdfc2VsZic7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFjdGl2YXRlIHRoZSBpbnN0YW5jZS5cbiAgICAgKlxuICAgICAqL1xuICAgIGFjdGl2YXRlKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNBY3RpdmUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTGluayBoYW5kbGVyIGhhcyBhbHJlYWR5IGJlZW4gYWN0aXZhdGVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc0FjdGl2ZSA9IHRydWU7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IHsgLi4ub3B0aW9ucyB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWFjdGl2YXRlIHRoZSBpbnN0YW5jZS4gRXZlbnQgaGFuZGxlcnMgYW5kIG90aGVyIHJlc291cmNlcyBzaG91bGQgYmUgY2xlYW5lZCB1cCBoZXJlLlxuICAgICAqL1xuICAgIGRlYWN0aXZhdGUoKSB7XG4gICAgICAgIGlmICghdGhpcy5pc0FjdGl2ZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdMaW5rIGhhbmRsZXIgaGFzIG5vdCBiZWVuIGFjdGl2YXRlZCcpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaXNBY3RpdmUgPSBmYWxzZTtcbiAgICB9XG59XG5MaW5rSGFuZGxlci5pbmplY3QgPSBbSURPTV07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1saW5rLWhhbmRsZXIuanMubWFwIiwiaW1wb3J0IHsgQ29tcG9uZW50QXBwZWxsYXRpb25SZXNvbHZlciwgTmF2aWdhdGlvbkluc3RydWN0aW9uUmVzb2x2ZXIgfSBmcm9tICcuL3R5cGUtcmVzb2x2ZXJzJztcbmV4cG9ydCBjbGFzcyBOYXZSb3V0ZSB7XG4gICAgY29uc3RydWN0b3IobmF2LCByb3V0ZSkge1xuICAgICAgICB0aGlzLm5hdiA9IG5hdjtcbiAgICAgICAgdGhpcy5pbnN0cnVjdGlvbnMgPSBbXTtcbiAgICAgICAgdGhpcy5saW5rID0gbnVsbDtcbiAgICAgICAgdGhpcy5saW5rVmlzaWJsZSA9IG51bGw7XG4gICAgICAgIHRoaXMubGlua0FjdGl2ZSA9IG51bGw7XG4gICAgICAgIHRoaXMuY29tcGFyZVBhcmFtZXRlcnMgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5jaGlsZHJlbiA9IG51bGw7XG4gICAgICAgIHRoaXMudmlzaWJsZSA9IHRydWU7XG4gICAgICAgIHRoaXMuYWN0aXZlID0gJyc7XG4gICAgICAgIHRoaXMudGl0bGUgPSByb3V0ZS50aXRsZTtcbiAgICAgICAgdGhpcy5tZXRhID0gcm91dGUubWV0YTtcbiAgICAgICAgaWYgKHJvdXRlLnJvdXRlKSB7XG4gICAgICAgICAgICB0aGlzLmluc3RydWN0aW9ucyA9IHRoaXMucGFyc2VSb3V0ZShyb3V0ZS5yb3V0ZSk7XG4gICAgICAgICAgICB0aGlzLmxpbmsgPSB0aGlzLmNvbXB1dGVMaW5rKHRoaXMuaW5zdHJ1Y3Rpb25zKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxpbmtBY3RpdmUgPSByb3V0ZS5jb25zaWRlcmVkQWN0aXZlICE9PSBudWxsICYmIHJvdXRlLmNvbnNpZGVyZWRBY3RpdmUgIT09IHZvaWQgMCA/IHJvdXRlLmNvbnNpZGVyZWRBY3RpdmUgOiB0aGlzLmxpbms7XG4gICAgICAgIGlmICh0aGlzLmxpbmtBY3RpdmUgIT09IG51bGwgJiYgKCEodGhpcy5saW5rQWN0aXZlIGluc3RhbmNlb2YgRnVuY3Rpb24pIHx8IENvbXBvbmVudEFwcGVsbGF0aW9uUmVzb2x2ZXIuaXNUeXBlKHRoaXMubGlua0FjdGl2ZSkpKSB7XG4gICAgICAgICAgICB0aGlzLmxpbmtBY3RpdmUgPSBOYXZpZ2F0aW9uSW5zdHJ1Y3Rpb25SZXNvbHZlci50b1ZpZXdwb3J0SW5zdHJ1Y3Rpb25zKHRoaXMubmF2LnJvdXRlciwgdGhpcy5saW5rQWN0aXZlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmV4ZWN1dGUgPSByb3V0ZS5leGVjdXRlO1xuICAgICAgICB0aGlzLmNvbXBhcmVQYXJhbWV0ZXJzID0gISFyb3V0ZS5jb21wYXJlUGFyYW1ldGVycztcbiAgICAgICAgdGhpcy5saW5rVmlzaWJsZSA9IHJvdXRlLmNvbmRpdGlvbiA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6IHJvdXRlLmNvbmRpdGlvbjtcbiAgICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICB9XG4gICAgZ2V0IGhhc0NoaWxkcmVuKCkge1xuICAgICAgICByZXR1cm4gKHRoaXMuY2hpbGRyZW4gJiYgdGhpcy5jaGlsZHJlbi5sZW5ndGggPyAnbmF2LWhhcy1jaGlsZHJlbicgOiAnJyk7XG4gICAgfVxuICAgIHVwZGF0ZSgpIHtcbiAgICAgICAgdGhpcy52aXNpYmxlID0gdGhpcy5jb21wdXRlVmlzaWJsZSgpO1xuICAgICAgICBpZiAoKHRoaXMubGluayAmJiB0aGlzLmxpbmsubGVuZ3RoKSB8fCB0aGlzLmV4ZWN1dGUpIHtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlID0gdGhpcy5jb21wdXRlQWN0aXZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZSA9ICh0aGlzLmFjdGl2ZSA9PT0gJ25hdi1hY3RpdmUnID8gJ25hdi1hY3RpdmUnIDogKHRoaXMuYWN0aXZlQ2hpbGQoKSA/ICduYXYtYWN0aXZlLWNoaWxkJyA6ICcnKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZXhlY3V0ZUFjdGlvbihldmVudCkge1xuICAgICAgICBpZiAodGhpcy5leGVjdXRlKSB7XG4gICAgICAgICAgICB0aGlzLmV4ZWN1dGUodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfVxuICAgIHRvZ2dsZUFjdGl2ZSgpIHtcbiAgICAgICAgdGhpcy5hY3RpdmUgPSAodGhpcy5hY3RpdmUuc3RhcnRzV2l0aCgnbmF2LWFjdGl2ZScpID8gJycgOiAnbmF2LWFjdGl2ZScpO1xuICAgIH1cbiAgICBwYXJzZVJvdXRlKHJvdXRlcykge1xuICAgICAgICByZXR1cm4gTmF2aWdhdGlvbkluc3RydWN0aW9uUmVzb2x2ZXIudG9WaWV3cG9ydEluc3RydWN0aW9ucyh0aGlzLm5hdi5yb3V0ZXIsIHJvdXRlcyk7XG4gICAgfVxuICAgIGNvbXB1dGVWaXNpYmxlKCkge1xuICAgICAgICBpZiAodGhpcy5saW5rVmlzaWJsZSBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5saW5rVmlzaWJsZSh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gISF0aGlzLmxpbmtWaXNpYmxlO1xuICAgIH1cbiAgICBjb21wdXRlQWN0aXZlKCkge1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkodGhpcy5saW5rQWN0aXZlKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubGlua0FjdGl2ZSh0aGlzKSA/ICduYXYtYWN0aXZlJyA6ICcnO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbXBvbmVudHMgPSB0aGlzLmxpbmtBY3RpdmU7XG4gICAgICAgIGNvbnN0IGFjdGl2ZUNvbXBvbmVudHMgPSB0aGlzLm5hdi5yb3V0ZXIuaW5zdHJ1Y3Rpb25SZXNvbHZlci5mbGF0dGVuVmlld3BvcnRJbnN0cnVjdGlvbnModGhpcy5uYXYucm91dGVyLmFjdGl2ZUNvbXBvbmVudHMpO1xuICAgICAgICBmb3IgKGNvbnN0IGNvbXBvbmVudCBvZiBjb21wb25lbnRzKSB7XG4gICAgICAgICAgICBpZiAoYWN0aXZlQ29tcG9uZW50cy5ldmVyeSgoYWN0aXZlKSA9PiAhYWN0aXZlLnNhbWVDb21wb25lbnQoY29tcG9uZW50LCB0aGlzLmNvbXBhcmVQYXJhbWV0ZXJzICYmIGNvbXBvbmVudC50eXBlZFBhcmFtZXRlcnMgIT09IG51bGwpKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJ25hdi1hY3RpdmUnO1xuICAgIH1cbiAgICBjb21wdXRlTGluayhpbnN0cnVjdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubmF2LnJvdXRlci5pbnN0cnVjdGlvblJlc29sdmVyLnN0cmluZ2lmeVZpZXdwb3J0SW5zdHJ1Y3Rpb25zKGluc3RydWN0aW9ucyk7XG4gICAgfVxuICAgIGFjdGl2ZUNoaWxkKCkge1xuICAgICAgICBpZiAodGhpcy5jaGlsZHJlbikge1xuICAgICAgICAgICAgZm9yIChjb25zdCBjaGlsZCBvZiB0aGlzLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkLmFjdGl2ZS5zdGFydHNXaXRoKCduYXYtYWN0aXZlJykgfHwgY2hpbGQuYWN0aXZlQ2hpbGQoKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW5hdi1yb3V0ZS5qcy5tYXAiLCJpbXBvcnQgeyBOYXZSb3V0ZSB9IGZyb20gJy4vbmF2LXJvdXRlJztcbmV4cG9ydCBjbGFzcyBOYXYge1xuICAgIGNvbnN0cnVjdG9yKHJvdXRlciwgbmFtZSwgcm91dGVzID0gW10sIGNsYXNzZXMgPSB7fSkge1xuICAgICAgICB0aGlzLnJvdXRlciA9IHJvdXRlcjtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5yb3V0ZXMgPSByb3V0ZXM7XG4gICAgICAgIHRoaXMuY2xhc3NlcyA9IGNsYXNzZXM7XG4gICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgfVxuICAgIGFkZFJvdXRlcyhyb3V0ZXMpIHtcbiAgICAgICAgZm9yIChjb25zdCByb3V0ZSBvZiByb3V0ZXMpIHtcbiAgICAgICAgICAgIHRoaXMuYWRkUm91dGUodGhpcy5yb3V0ZXMsIHJvdXRlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgIH1cbiAgICB1cGRhdGUoKSB7XG4gICAgICAgIHRoaXMudXBkYXRlUm91dGVzKHRoaXMucm91dGVzKTtcbiAgICAgICAgdGhpcy5yb3V0ZXMgPSB0aGlzLnJvdXRlcy5zbGljZSgpO1xuICAgIH1cbiAgICBhZGRSb3V0ZShyb3V0ZXMsIHJvdXRlKSB7XG4gICAgICAgIGNvbnN0IG5ld1JvdXRlID0gbmV3IE5hdlJvdXRlKHRoaXMsIHJvdXRlKTtcbiAgICAgICAgcm91dGVzLnB1c2gobmV3Um91dGUpO1xuICAgICAgICBpZiAocm91dGUuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgIG5ld1JvdXRlLmNoaWxkcmVuID0gW107XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGNoaWxkIG9mIHJvdXRlLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRSb3V0ZShuZXdSb3V0ZS5jaGlsZHJlbiwgY2hpbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHVwZGF0ZVJvdXRlcyhyb3V0ZXMpIHtcbiAgICAgICAgZm9yIChjb25zdCByb3V0ZSBvZiByb3V0ZXMpIHtcbiAgICAgICAgICAgIHJvdXRlLnVwZGF0ZSgpO1xuICAgICAgICAgICAgaWYgKHJvdXRlLmNoaWxkcmVuICYmIHJvdXRlLmNoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUm91dGVzKHJvdXRlLmNoaWxkcmVuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW5hdi5qcy5tYXAiLCJpbXBvcnQgeyBSZXBvcnRlciB9IGZyb20gJ0BhdXJlbGlhL2tlcm5lbCc7XG5pbXBvcnQgeyBRdWV1ZSB9IGZyb20gJy4vcXVldWUnO1xuZXhwb3J0IGNsYXNzIE5hdmlnYXRvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuZW50cmllcyA9IFtdO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSB7XG4gICAgICAgICAgICBzdGF0ZWZ1bEhpc3RvcnlMZW5ndGg6IDAsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaXNBY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcm9jZXNzTmF2aWdhdGlvbnMgPSAocUVudHJ5KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBlbnRyeSA9IHFFbnRyeTtcbiAgICAgICAgICAgIGNvbnN0IG5hdmlnYXRpb25GbGFncyA9IHt9O1xuICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudEVudHJ5ID09PSB0aGlzLnVuaW5pdGlhbGl6ZWRFbnRyeSkgeyAvLyBSZWZyZXNoIG9yIGZpcnN0IGVudHJ5XG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkU3RhdGUoKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50RW50cnkgIT09IHRoaXMudW5pbml0aWFsaXplZEVudHJ5KSB7XG4gICAgICAgICAgICAgICAgICAgIG5hdmlnYXRpb25GbGFncy5yZWZyZXNoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG5hdmlnYXRpb25GbGFncy5maXJzdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIG5hdmlnYXRpb25GbGFncy5uZXcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiBTaG91bGQgdGhpcyByZWFsbHkgYmUgY3JlYXRlZCBoZXJlPyBTaG91bGRuJ3QgaXQgYmUgaW4gdGhlIHZpZXdlcj9cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50RW50cnkgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RydWN0aW9uOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bGxTdGF0ZUluc3RydWN0aW9uOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbnRyaWVzID0gW107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVudHJ5LmluZGV4ICE9PSB2b2lkIDAgJiYgIWVudHJ5LnJlcGxhY2luZyAmJiAhZW50cnkucmVmcmVzaGluZykgeyAvLyBIaXN0b3J5IG5hdmlnYXRpb25cbiAgICAgICAgICAgICAgICBlbnRyeS5oaXN0b3J5TW92ZW1lbnQgPSBlbnRyeS5pbmRleCAtICh0aGlzLmN1cnJlbnRFbnRyeS5pbmRleCAhPT0gdm9pZCAwID8gdGhpcy5jdXJyZW50RW50cnkuaW5kZXggOiAwKTtcbiAgICAgICAgICAgICAgICBlbnRyeS5pbnN0cnVjdGlvbiA9IHRoaXMuZW50cmllc1tlbnRyeS5pbmRleF0gIT09IHZvaWQgMCAmJiB0aGlzLmVudHJpZXNbZW50cnkuaW5kZXhdICE9PSBudWxsID8gdGhpcy5lbnRyaWVzW2VudHJ5LmluZGV4XS5mdWxsU3RhdGVJbnN0cnVjdGlvbiA6IGVudHJ5LmZ1bGxTdGF0ZUluc3RydWN0aW9uO1xuICAgICAgICAgICAgICAgIGVudHJ5LnJlcGxhY2luZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgaWYgKGVudHJ5Lmhpc3RvcnlNb3ZlbWVudCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgbmF2aWdhdGlvbkZsYWdzLmZvcndhcmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChlbnRyeS5oaXN0b3J5TW92ZW1lbnQgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIG5hdmlnYXRpb25GbGFncy5iYWNrID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChlbnRyeS5yZWZyZXNoaW5nIHx8IG5hdmlnYXRpb25GbGFncy5yZWZyZXNoKSB7IC8vIFJlZnJlc2hpbmdcbiAgICAgICAgICAgICAgICBlbnRyeS5pbmRleCA9IHRoaXMuY3VycmVudEVudHJ5LmluZGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZW50cnkucmVwbGFjaW5nKSB7IC8vIFJlcGxhY2luZ1xuICAgICAgICAgICAgICAgIG5hdmlnYXRpb25GbGFncy5yZXBsYWNlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBuYXZpZ2F0aW9uRmxhZ3MubmV3ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBlbnRyeS5pbmRleCA9IHRoaXMuY3VycmVudEVudHJ5LmluZGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7IC8vIE5ldyBlbnRyeVxuICAgICAgICAgICAgICAgIG5hdmlnYXRpb25GbGFncy5uZXcgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGVudHJ5LmluZGV4ID0gdGhpcy5jdXJyZW50RW50cnkuaW5kZXggIT09IHZvaWQgMCA/IHRoaXMuY3VycmVudEVudHJ5LmluZGV4ICsgMSA6IHRoaXMuZW50cmllcy5sZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmludm9rZUNhbGxiYWNrKGVudHJ5LCBuYXZpZ2F0aW9uRmxhZ3MsIHRoaXMuY3VycmVudEVudHJ5KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy51bmluaXRpYWxpemVkRW50cnkgPSB7XG4gICAgICAgICAgICBpbnN0cnVjdGlvbjogJ05BVklHQVRPUiBVTklOSVRJQUxJWkVEJyxcbiAgICAgICAgICAgIGZ1bGxTdGF0ZUluc3RydWN0aW9uOiAnJyxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5jdXJyZW50RW50cnkgPSB0aGlzLnVuaW5pdGlhbGl6ZWRFbnRyeTtcbiAgICAgICAgdGhpcy5wZW5kaW5nTmF2aWdhdGlvbnMgPSBuZXcgUXVldWUodGhpcy5wcm9jZXNzTmF2aWdhdGlvbnMpO1xuICAgIH1cbiAgICBnZXQgcXVldWVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wZW5kaW5nTmF2aWdhdGlvbnMubGVuZ3RoO1xuICAgIH1cbiAgICBhY3RpdmF0ZShyb3V0ZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNBY3RpdmUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTmF2aWdhdG9yIGhhcyBhbHJlYWR5IGJlZW4gYWN0aXZhdGVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc0FjdGl2ZSA9IHRydWU7XG4gICAgICAgIHRoaXMucm91dGVyID0gcm91dGVyO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSB7IC4uLm9wdGlvbnMgfTtcbiAgICB9XG4gICAgZGVhY3RpdmF0ZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzQWN0aXZlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05hdmlnYXRvciBoYXMgbm90IGJlZW4gYWN0aXZhdGVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wZW5kaW5nTmF2aWdhdGlvbnMuY2xlYXIoKTtcbiAgICAgICAgdGhpcy5pc0FjdGl2ZSA9IGZhbHNlO1xuICAgIH1cbiAgICBuYXZpZ2F0ZShlbnRyeSkge1xuICAgICAgICByZXR1cm4gdGhpcy5wZW5kaW5nTmF2aWdhdGlvbnMuZW5xdWV1ZShlbnRyeSk7XG4gICAgfVxuICAgIHJlZnJlc2goKSB7XG4gICAgICAgIGNvbnN0IGVudHJ5ID0gdGhpcy5jdXJyZW50RW50cnk7XG4gICAgICAgIGlmIChlbnRyeSA9PT0gdGhpcy51bmluaXRpYWxpemVkRW50cnkpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCgpO1xuICAgICAgICB9XG4gICAgICAgIGVudHJ5LnJlcGxhY2luZyA9IHRydWU7XG4gICAgICAgIGVudHJ5LnJlZnJlc2hpbmcgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcy5uYXZpZ2F0ZShlbnRyeSk7XG4gICAgfVxuICAgIGdvKG1vdmVtZW50KSB7XG4gICAgICAgIGNvbnN0IG5ld0luZGV4ID0gKHRoaXMuY3VycmVudEVudHJ5LmluZGV4ICE9PSB1bmRlZmluZWQgPyB0aGlzLmN1cnJlbnRFbnRyeS5pbmRleCA6IDApICsgbW92ZW1lbnQ7XG4gICAgICAgIGlmIChuZXdJbmRleCA+PSB0aGlzLmVudHJpZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBlbnRyeSA9IHRoaXMuZW50cmllc1tuZXdJbmRleF07XG4gICAgICAgIHJldHVybiB0aGlzLm5hdmlnYXRlKGVudHJ5KTtcbiAgICB9XG4gICAgc2V0RW50cnlUaXRsZSh0aXRsZSkge1xuICAgICAgICB0aGlzLmN1cnJlbnRFbnRyeS50aXRsZSA9IHRpdGxlO1xuICAgICAgICByZXR1cm4gdGhpcy5zYXZlU3RhdGUoKTtcbiAgICB9XG4gICAgZ2V0IHRpdGxlcygpIHtcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudEVudHJ5ID09IHRoaXMudW5pbml0aWFsaXplZEVudHJ5KSB7XG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmN1cnJlbnRFbnRyeS5pbmRleCAhPT0gdm9pZCAwID8gdGhpcy5jdXJyZW50RW50cnkuaW5kZXggOiAwO1xuICAgICAgICByZXR1cm4gdGhpcy5lbnRyaWVzLnNsaWNlKDAsIGluZGV4ICsgMSkuZmlsdGVyKCh2YWx1ZSkgPT4gISF2YWx1ZS50aXRsZSkubWFwKCh2YWx1ZSkgPT4gdmFsdWUudGl0bGUgPyB2YWx1ZS50aXRsZSA6ICcnKTtcbiAgICB9XG4gICAgZ2V0U3RhdGUoKSB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5vcHRpb25zLnN0b3JlID8geyAuLi50aGlzLm9wdGlvbnMuc3RvcmUuc3RhdGUgfSA6IHt9O1xuICAgICAgICBjb25zdCBlbnRyaWVzID0gKHN0YXRlLmVudHJpZXMgfHwgW10pO1xuICAgICAgICBjb25zdCBjdXJyZW50RW50cnkgPSAoc3RhdGUuY3VycmVudEVudHJ5IHx8IHRoaXMudW5pbml0aWFsaXplZEVudHJ5KTtcbiAgICAgICAgcmV0dXJuIHsgc3RhdGUsIGVudHJpZXMsIGN1cnJlbnRFbnRyeSB9O1xuICAgIH1cbiAgICBsb2FkU3RhdGUoKSB7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5nZXRTdGF0ZSgpO1xuICAgICAgICB0aGlzLmVudHJpZXMgPSBzdGF0ZS5lbnRyaWVzO1xuICAgICAgICB0aGlzLmN1cnJlbnRFbnRyeSA9IHN0YXRlLmN1cnJlbnRFbnRyeTtcbiAgICB9XG4gICAgYXN5bmMgc2F2ZVN0YXRlKHB1c2ggPSBmYWxzZSkge1xuICAgICAgICBpZiAodGhpcy5jdXJyZW50RW50cnkgPT09IHRoaXMudW5pbml0aWFsaXplZEVudHJ5KSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3RvcmVkRW50cnkgPSB0aGlzLnRvU3RvcmVkRW50cnkodGhpcy5jdXJyZW50RW50cnkpO1xuICAgICAgICB0aGlzLmVudHJpZXNbc3RvcmVkRW50cnkuaW5kZXggIT09IHVuZGVmaW5lZCA/IHN0b3JlZEVudHJ5LmluZGV4IDogMF0gPSBzdG9yZWRFbnRyeTtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zZXJpYWxpemVDYWxsYmFjayAhPT0gdm9pZCAwICYmIHRoaXMub3B0aW9ucy5zdGF0ZWZ1bEhpc3RvcnlMZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuZW50cmllcy5sZW5ndGggLSB0aGlzLm9wdGlvbnMuc3RhdGVmdWxIaXN0b3J5TGVuZ3RoO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbmRleDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZW50cnkgPSB0aGlzLmVudHJpZXNbaV07XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBlbnRyeS5pbnN0cnVjdGlvbiAhPT0gJ3N0cmluZycgfHwgdHlwZW9mIGVudHJ5LmZ1bGxTdGF0ZUluc3RydWN0aW9uICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVudHJpZXNbaV0gPSBhd2FpdCB0aGlzLm9wdGlvbnMuc2VyaWFsaXplQ2FsbGJhY2soZW50cnksIHRoaXMuZW50cmllcy5zbGljZShpbmRleCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy5zdG9yZSkge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHN0YXRlID0ge1xuICAgICAgICAgICAgZW50cmllczogW10sXG4gICAgICAgICAgICBjdXJyZW50RW50cnk6IHsgLi4udGhpcy50b1N0b3JlYWJsZUVudHJ5KHN0b3JlZEVudHJ5KSB9LFxuICAgICAgICB9O1xuICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIHRoaXMuZW50cmllcykge1xuICAgICAgICAgICAgc3RhdGUuZW50cmllcy5wdXNoKHRoaXMudG9TdG9yZWFibGVFbnRyeShlbnRyeSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwdXNoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLnN0b3JlLnB1c2hOYXZpZ2F0b3JTdGF0ZShzdGF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLnN0b3JlLnJlcGxhY2VOYXZpZ2F0b3JTdGF0ZShzdGF0ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdG9TdG9yZWRFbnRyeShlbnRyeSkge1xuICAgICAgICBjb25zdCB7IHByZXZpb3VzLCBmcm9tQnJvd3NlciwgcmVwbGFjaW5nLCByZWZyZXNoaW5nLCB1bnRyYWNrZWQsIGhpc3RvcnlNb3ZlbWVudCwgbmF2aWdhdGlvbiwgc2NvcGUsIHJlc29sdmUsIHJlamVjdCwgLi4uc3RvcmFibGVFbnRyeSB9ID0gZW50cnk7XG4gICAgICAgIHJldHVybiBzdG9yYWJsZUVudHJ5O1xuICAgIH1cbiAgICBhc3luYyBmaW5hbGl6ZShpbnN0cnVjdGlvbikge1xuICAgICAgICB0aGlzLmN1cnJlbnRFbnRyeSA9IGluc3RydWN0aW9uO1xuICAgICAgICBsZXQgaW5kZXggPSB0aGlzLmN1cnJlbnRFbnRyeS5pbmRleCAhPT0gdW5kZWZpbmVkID8gdGhpcy5jdXJyZW50RW50cnkuaW5kZXggOiAwO1xuICAgICAgICBpZiAodGhpcy5jdXJyZW50RW50cnkudW50cmFja2VkKSB7XG4gICAgICAgICAgICBpZiAoaW5zdHJ1Y3Rpb24uZnJvbUJyb3dzZXIgJiYgdGhpcy5vcHRpb25zLnN0b3JlKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5vcHRpb25zLnN0b3JlLnBvcE5hdmlnYXRvclN0YXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbmRleC0tO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50RW50cnkuaW5kZXggPSBpbmRleDtcbiAgICAgICAgICAgIHRoaXMuZW50cmllc1tpbmRleF0gPSB0aGlzLnRvU3RvcmVkRW50cnkodGhpcy5jdXJyZW50RW50cnkpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlU3RhdGUoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmN1cnJlbnRFbnRyeS5yZXBsYWNpbmcpIHtcbiAgICAgICAgICAgIHRoaXMuZW50cmllc1tpbmRleF0gPSB0aGlzLnRvU3RvcmVkRW50cnkodGhpcy5jdXJyZW50RW50cnkpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlU3RhdGUoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHsgLy8gTmV3IGVudHJ5IChhZGQgYW5kIGRpc2NhcmQgbGF0ZXIgZW50cmllcylcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc2VyaWFsaXplQ2FsbGJhY2sgIT09IHZvaWQgMCAmJiB0aGlzLm9wdGlvbnMuc3RhdGVmdWxIaXN0b3J5TGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIC8vIE5lZWQgdG8gY2xlYXIgdGhlIGluc3RydWN0aW9ucyB3ZSBkaXNjYXJkIVxuICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4UHJlc2VydmUgPSB0aGlzLmVudHJpZXMubGVuZ3RoIC0gdGhpcy5vcHRpb25zLnN0YXRlZnVsSGlzdG9yeUxlbmd0aDtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIHRoaXMuZW50cmllcy5zbGljZShpbmRleCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBlbnRyeS5pbnN0cnVjdGlvbiAhPT0gJ3N0cmluZycgfHwgdHlwZW9mIGVudHJ5LmZ1bGxTdGF0ZUluc3RydWN0aW9uICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5vcHRpb25zLnNlcmlhbGl6ZUNhbGxiYWNrKGVudHJ5LCB0aGlzLmVudHJpZXMuc2xpY2UoaW5kZXhQcmVzZXJ2ZSwgaW5kZXgpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZW50cmllcyA9IHRoaXMuZW50cmllcy5zbGljZSgwLCBpbmRleCk7XG4gICAgICAgICAgICB0aGlzLmVudHJpZXMucHVzaCh0aGlzLnRvU3RvcmVkRW50cnkodGhpcy5jdXJyZW50RW50cnkpKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZVN0YXRlKHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRFbnRyeS5yZXNvbHZlKSB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRFbnRyeS5yZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgY2FuY2VsKGluc3RydWN0aW9uKSB7XG4gICAgICAgIGlmIChpbnN0cnVjdGlvbi5mcm9tQnJvd3NlciAmJiB0aGlzLm9wdGlvbnMuc3RvcmUpIHtcbiAgICAgICAgICAgIGlmIChpbnN0cnVjdGlvbi5uYXZpZ2F0aW9uICYmIGluc3RydWN0aW9uLm5hdmlnYXRpb24ubmV3KSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5vcHRpb25zLnN0b3JlLnBvcE5hdmlnYXRvclN0YXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm9wdGlvbnMuc3RvcmUuZ28oLShpbnN0cnVjdGlvbi5oaXN0b3J5TW92ZW1lbnQgfHwgMCksIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRFbnRyeS5yZXNvbHZlKSB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRFbnRyeS5yZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaW52b2tlQ2FsbGJhY2soZW50cnksIG5hdmlnYXRpb25GbGFncywgcHJldmlvdXNFbnRyeSkge1xuICAgICAgICBjb25zdCBpbnN0cnVjdGlvbiA9IHsgLi4uZW50cnkgfTtcbiAgICAgICAgaW5zdHJ1Y3Rpb24ubmF2aWdhdGlvbiA9IG5hdmlnYXRpb25GbGFncztcbiAgICAgICAgaW5zdHJ1Y3Rpb24ucHJldmlvdXMgPSB0aGlzLnRvU3RvcmVkRW50cnkocHJldmlvdXNFbnRyeSk7XG4gICAgICAgIFJlcG9ydGVyLndyaXRlKDEwMDAwLCAnY2FsbGJhY2snLCBpbnN0cnVjdGlvbiwgaW5zdHJ1Y3Rpb24ucHJldmlvdXMsIHRoaXMuZW50cmllcyk7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuY2FsbGJhY2spIHtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5jYWxsYmFjayhpbnN0cnVjdGlvbik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdG9TdG9yZWFibGVFbnRyeShlbnRyeSkge1xuICAgICAgICBjb25zdCBzdG9yZWFibGUgPSB7IC4uLmVudHJ5IH07XG4gICAgICAgIGlmIChzdG9yZWFibGUuaW5zdHJ1Y3Rpb24gJiYgdHlwZW9mIHN0b3JlYWJsZS5pbnN0cnVjdGlvbiAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHN0b3JlYWJsZS5pbnN0cnVjdGlvbiA9IHRoaXMucm91dGVyLmluc3RydWN0aW9uUmVzb2x2ZXIuc3RyaW5naWZ5Vmlld3BvcnRJbnN0cnVjdGlvbnMoc3RvcmVhYmxlLmluc3RydWN0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RvcmVhYmxlLmZ1bGxTdGF0ZUluc3RydWN0aW9uICYmIHR5cGVvZiBzdG9yZWFibGUuZnVsbFN0YXRlSW5zdHJ1Y3Rpb24gIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBzdG9yZWFibGUuZnVsbFN0YXRlSW5zdHJ1Y3Rpb24gPSB0aGlzLnJvdXRlci5pbnN0cnVjdGlvblJlc29sdmVyLnN0cmluZ2lmeVZpZXdwb3J0SW5zdHJ1Y3Rpb25zKHN0b3JlYWJsZS5mdWxsU3RhdGVJbnN0cnVjdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0b3JlYWJsZTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1uYXZpZ2F0b3IuanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIHBhcnNlUXVlcnkocXVlcnkpIHtcbiAgICBpZiAoIXF1ZXJ5IHx8ICFxdWVyeS5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIH1cbiAgICBjb25zdCBwYXJhbWV0ZXJzID0ge307XG4gICAgLy8gVE9ETzogRGVhbCB3aXRoIGNvbXBsZXggcGFyYW1ldGVycyBzdWNoIGFzIGxpc3RzIGFuZCBvYmplY3RzXG4gICAgY29uc3QgcGFyYW1zID0gcXVlcnkucmVwbGFjZSgnKycsICcgJykuc3BsaXQoJyYnKTtcbiAgICBmb3IgKGNvbnN0IHBhcmFtIG9mIHBhcmFtcykge1xuICAgICAgICBjb25zdCBba2V5LCB2YWx1ZV0gPSBwYXJhbS5zcGxpdCgnPScpO1xuICAgICAgICBwYXJhbWV0ZXJzW2RlY29kZVVSSUNvbXBvbmVudChrZXkpXSA9IGRlY29kZVVSSUNvbXBvbmVudCh2YWx1ZSAhPT0gdm9pZCAwID8gdmFsdWUgOiBrZXkpO1xuICAgIH1cbiAgICByZXR1cm4gcGFyYW1ldGVycztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhcnNlci5qcy5tYXAiLCJpbXBvcnQgeyBfX2RlY29yYXRlLCBfX21ldGFkYXRhIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBib3VuZCB9IGZyb20gJ0BhdXJlbGlhL2tlcm5lbCc7XG4vKipcbiAqIEEgZmlyc3QtaW4tZmlyc3Qtb3V0IHF1ZXVlIHRoYXQgb25seSBwcm9jZXNzZXMgdGhlIG5leHQgcXVldWVkIGl0ZW1cbiAqIHdoZW4gdGhlIGN1cnJlbnQgb25lIGhhcyBiZWVuIHJlc29sdmVkIG9yIHJlamVjdGVkLiBTZW5kcyBxdWV1ZWQgaXRlbXNcbiAqIG9uZSBhdCBhIHRpbWUgdG8gYSBzcGVjaWZpZWQgY2FsbGJhY2sgZnVuY3Rpb24uIFRoZSBjYWxsYmFjayBmdW5jdGlvblxuICogc2hvdWxkIHJlc29sdmUgb3IgcmVqZWN0IHRoZSBxdWV1ZWQgaXRlbSB3aGVuIHByb2Nlc3NpbmcgaXMgZG9uZS5cbiAqIEVucXVldWVkIGl0ZW1zIGNhbiBiZSBhd2FpdGVkLiBFbnF1ZXVlZCBpdGVtcyBjYW4gc3BlY2lmeSBhbiAoYXJiaXRyYXJ5KVxuICogZXhlY3V0aW9uIGNvc3QgYW5kIHRoZSBxdWV1ZSBjYW4gYmUgc2V0IHVwIChhY3RpdmF0ZWQpIHRvIG9ubHkgcHJvY2Vzc1xuICogYSBzcGVjaWZpYyBhbW91bnQgb2YgZXhlY3V0aW9uIGNvc3QgcGVyIFJBRi90aWNrLlxuICovXG5leHBvcnQgY2xhc3MgUXVldWUge1xuICAgIGNvbnN0cnVjdG9yKGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICAgICAgdGhpcy5wZW5kaW5nID0gW107XG4gICAgICAgIHRoaXMucHJvY2Vzc2luZyA9IG51bGw7XG4gICAgICAgIHRoaXMuYWxsb3dlZEV4ZWN1dGlvbkNvc3RXaXRoaW5UaWNrID0gbnVsbDtcbiAgICAgICAgdGhpcy5jdXJyZW50RXhlY3V0aW9uQ29zdEluQ3VycmVudFRpY2sgPSAwO1xuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IG51bGw7XG4gICAgICAgIHRoaXMudGFzayA9IG51bGw7XG4gICAgfVxuICAgIGdldCBpc0FjdGl2ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGFzayAhPT0gbnVsbDtcbiAgICB9XG4gICAgZ2V0IGxlbmd0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGVuZGluZy5sZW5ndGg7XG4gICAgfVxuICAgIGFjdGl2YXRlKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNBY3RpdmUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUXVldWUgaGFzIGFscmVhZHkgYmVlbiBhY3RpdmF0ZWQnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IG9wdGlvbnMuc2NoZWR1bGVyO1xuICAgICAgICB0aGlzLmFsbG93ZWRFeGVjdXRpb25Db3N0V2l0aGluVGljayA9IG9wdGlvbnMuYWxsb3dlZEV4ZWN1dGlvbkNvc3RXaXRoaW5UaWNrO1xuICAgICAgICB0aGlzLnRhc2sgPSB0aGlzLnNjaGVkdWxlci5xdWV1ZVJlbmRlclRhc2sodGhpcy5kZXF1ZXVlLCB7IHBlcnNpc3RlbnQ6IHRydWUgfSk7XG4gICAgfVxuICAgIGRlYWN0aXZhdGUoKSB7XG4gICAgICAgIGlmICghdGhpcy5pc0FjdGl2ZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdRdWV1ZSBoYXMgbm90IGJlZW4gYWN0aXZhdGVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50YXNrLmNhbmNlbCgpO1xuICAgICAgICB0aGlzLnRhc2sgPSBudWxsO1xuICAgICAgICB0aGlzLmFsbG93ZWRFeGVjdXRpb25Db3N0V2l0aGluVGljayA9IG51bGw7XG4gICAgICAgIHRoaXMuY2xlYXIoKTtcbiAgICB9XG4gICAgZW5xdWV1ZShpdGVtT3JJdGVtcywgY29zdE9yQ29zdHMpIHtcbiAgICAgICAgY29uc3QgbGlzdCA9IEFycmF5LmlzQXJyYXkoaXRlbU9ySXRlbXMpO1xuICAgICAgICBjb25zdCBpdGVtcyA9IGxpc3QgPyBpdGVtT3JJdGVtcyA6IFtpdGVtT3JJdGVtc107XG4gICAgICAgIGNvbnN0IGNvc3RzID0gaXRlbXNcbiAgICAgICAgICAgIC5tYXAoKHZhbHVlLCBpbmRleCkgPT4gIUFycmF5LmlzQXJyYXkoY29zdE9yQ29zdHMpID8gY29zdE9yQ29zdHMgOiBjb3N0T3JDb3N0c1tpbmRleF0pXG4gICAgICAgICAgICAubWFwKHZhbHVlID0+IHZhbHVlICE9PSB1bmRlZmluZWQgPyB2YWx1ZSA6IDEpO1xuICAgICAgICBjb25zdCBwcm9taXNlcyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHFJdGVtID0geyAuLi5pdGVtIH07XG4gICAgICAgICAgICBxSXRlbS5jb3N0ID0gY29zdHMuc2hpZnQoKTtcbiAgICAgICAgICAgIHByb21pc2VzLnB1c2gobmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgIHFJdGVtLnJlc29sdmUgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzaW5nID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXF1ZXVlKCk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBxSXRlbS5yZWplY3QgPSAocmVhc29uKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChyZWFzb24pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NpbmcgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlcXVldWUoKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgdGhpcy5wZW5kaW5nLnB1c2gocUl0ZW0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGVxdWV1ZSgpO1xuICAgICAgICByZXR1cm4gbGlzdCA/IHByb21pc2VzIDogcHJvbWlzZXNbMF07XG4gICAgfVxuICAgIGRlcXVldWUoZGVsdGEpIHtcbiAgICAgICAgaWYgKHRoaXMucHJvY2Vzc2luZyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkZWx0YSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRFeGVjdXRpb25Db3N0SW5DdXJyZW50VGljayA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLnBlbmRpbmcubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuYWxsb3dlZEV4ZWN1dGlvbkNvc3RXaXRoaW5UaWNrICE9PSBudWxsICYmIGRlbHRhID09PSB1bmRlZmluZWQgJiYgdGhpcy5jdXJyZW50RXhlY3V0aW9uQ29zdEluQ3VycmVudFRpY2sgKyAodGhpcy5wZW5kaW5nWzBdLmNvc3QgfHwgMCkgPiB0aGlzLmFsbG93ZWRFeGVjdXRpb25Db3N0V2l0aGluVGljaykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucHJvY2Vzc2luZyA9IHRoaXMucGVuZGluZy5zaGlmdCgpIHx8IG51bGw7XG4gICAgICAgIGlmICh0aGlzLnByb2Nlc3NpbmcpIHtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEV4ZWN1dGlvbkNvc3RJbkN1cnJlbnRUaWNrICs9IHRoaXMucHJvY2Vzc2luZy5jb3N0IHx8IDA7XG4gICAgICAgICAgICB0aGlzLmNhbGxiYWNrKHRoaXMucHJvY2Vzc2luZyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2xlYXIoKSB7XG4gICAgICAgIHRoaXMucGVuZGluZy5zcGxpY2UoMCwgdGhpcy5wZW5kaW5nLmxlbmd0aCk7XG4gICAgfVxufVxuX19kZWNvcmF0ZShbXG4gICAgYm91bmQsXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEZ1bmN0aW9uKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW051bWJlcl0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cmV0dXJudHlwZVwiLCB2b2lkIDApXG5dLCBRdWV1ZS5wcm90b3R5cGUsIFwiZGVxdWV1ZVwiLCBudWxsKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXF1ZXVlLmpzLm1hcCIsImltcG9ydCB7IF9fZGVjb3JhdGUsIF9fbWV0YWRhdGEsIF9fcGFyYW0gfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IE5hdmlnYXRpb25JbnN0cnVjdGlvblJlc29sdmVyIH0gZnJvbSAnLi4vdHlwZS1yZXNvbHZlcnMnO1xuaW1wb3J0IHsgY3VzdG9tQXR0cmlidXRlLCBJTm9kZSwgYmluZGFibGUsIEJpbmRpbmdNb2RlLCBJRE9NLCBEZWxlZ2F0aW9uU3RyYXRlZ3ksIElPYnNlcnZlckxvY2F0b3IsIEN1c3RvbUF0dHJpYnV0ZSB9IGZyb20gJ0BhdXJlbGlhL3J1bnRpbWUnO1xuaW1wb3J0IHsgSVJvdXRlciB9IGZyb20gJy4uL3JvdXRlcic7XG5pbXBvcnQgeyBJRXZlbnRNYW5hZ2VyIH0gZnJvbSAnQGF1cmVsaWEvcnVudGltZS1odG1sJztcbmxldCBHb3RvQ3VzdG9tQXR0cmlidXRlID0gY2xhc3MgR290b0N1c3RvbUF0dHJpYnV0ZSB7XG4gICAgY29uc3RydWN0b3IoZG9tLCBlbGVtZW50LCByb3V0ZXIsIGV2ZW50TWFuYWdlcikge1xuICAgICAgICB0aGlzLmRvbSA9IGRvbTtcbiAgICAgICAgdGhpcy5yb3V0ZXIgPSByb3V0ZXI7XG4gICAgICAgIHRoaXMuZXZlbnRNYW5hZ2VyID0gZXZlbnRNYW5hZ2VyO1xuICAgICAgICB0aGlzLmxpc3RlbmVyID0gbnVsbDtcbiAgICAgICAgdGhpcy5oYXNIcmVmID0gbnVsbDtcbiAgICAgICAgdGhpcy5hY3RpdmVDbGFzcyA9ICdnb3RvLWFjdGl2ZSc7XG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgfVxuICAgIGJlZm9yZUJpbmQoKSB7XG4gICAgICAgIHRoaXMubGlzdGVuZXIgPSB0aGlzLmV2ZW50TWFuYWdlci5hZGRFdmVudExpc3RlbmVyKHRoaXMuZG9tLCB0aGlzLmVsZW1lbnQsICdjbGljaycsIHRoaXMucm91dGVyLmxpbmtIYW5kbGVyLmhhbmRsZXIsIERlbGVnYXRpb25TdHJhdGVneS5ub25lKTtcbiAgICAgICAgdGhpcy51cGRhdGVWYWx1ZSgpO1xuICAgICAgICBjb25zdCBvYnNlcnZlckxvY2F0b3IgPSB0aGlzLnJvdXRlci5jb250YWluZXIuZ2V0KElPYnNlcnZlckxvY2F0b3IpO1xuICAgICAgICB0aGlzLm9ic2VydmVyID0gb2JzZXJ2ZXJMb2NhdG9yLmdldE9ic2VydmVyKDAgLyogbm9uZSAqLywgdGhpcy5yb3V0ZXIsICdhY3RpdmVDb21wb25lbnRzJyk7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIuc3Vic2NyaWJlKHRoaXMpO1xuICAgIH1cbiAgICBiZWZvcmVVbmJpbmQoKSB7XG4gICAgICAgIGlmICh0aGlzLmxpc3RlbmVyICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLmxpc3RlbmVyLmRpc3Bvc2UoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9ic2VydmVyLnVuc3Vic2NyaWJlKHRoaXMpO1xuICAgIH1cbiAgICB2YWx1ZUNoYW5nZWQobmV3VmFsdWUpIHtcbiAgICAgICAgdGhpcy51cGRhdGVWYWx1ZSgpO1xuICAgIH1cbiAgICB1cGRhdGVWYWx1ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuaGFzSHJlZiA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5oYXNIcmVmID0gdGhpcy5lbGVtZW50Lmhhc0F0dHJpYnV0ZSgnaHJlZicpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5oYXNIcmVmKSB7XG4gICAgICAgICAgICAvLyBUT0RPOiBGaWd1cmUgb3V0IGEgYmV0dGVyIHZhbHVlIGhlcmUgZm9yIG5vbi1zdHJpbmdzICh1c2luZyBJbnN0cnVjdGlvblJlc29sdmVyPylcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gdHlwZW9mIHRoaXMudmFsdWUgPT09ICdzdHJpbmcnID8gdGhpcy52YWx1ZSA6IEpTT04uc3RyaW5naWZ5KHRoaXMudmFsdWUpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgnaHJlZicsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVDaGFuZ2UoKSB7XG4gICAgICAgIGNvbnN0IGNvbnRyb2xsZXIgPSBDdXN0b21BdHRyaWJ1dGUuZm9yKHRoaXMuZWxlbWVudCwgJ2dvdG8nKS5wYXJlbnQ7XG4gICAgICAgIGNvbnN0IGNyZWF0ZWQgPSBOYXZpZ2F0aW9uSW5zdHJ1Y3Rpb25SZXNvbHZlci5jcmVhdGVWaWV3cG9ydEluc3RydWN0aW9ucyh0aGlzLnJvdXRlciwgdGhpcy52YWx1ZSwgeyBjb250ZXh0OiBjb250cm9sbGVyIH0pO1xuICAgICAgICBjb25zdCBpbnN0cnVjdGlvbnMgPSBOYXZpZ2F0aW9uSW5zdHJ1Y3Rpb25SZXNvbHZlci50b1ZpZXdwb3J0SW5zdHJ1Y3Rpb25zKHRoaXMucm91dGVyLCBjcmVhdGVkLmluc3RydWN0aW9ucyk7XG4gICAgICAgIGZvciAoY29uc3QgaW5zdHJ1Y3Rpb24gb2YgaW5zdHJ1Y3Rpb25zKSB7XG4gICAgICAgICAgICBpZiAoaW5zdHJ1Y3Rpb24uc2NvcGUgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbi5zY29wZSA9IGNyZWF0ZWQuc2NvcGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gVE9ETzogVXNlIHJvdXRlciBjb25maWd1cmF0aW9uIGZvciBjbGFzcyBuYW1lIGFuZCB1cGRhdGUgdGFyZ2V0XG4gICAgICAgIGlmICh0aGlzLnJvdXRlci5jaGVja0FjdGl2ZShpbnN0cnVjdGlvbnMpKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLmFjdGl2ZUNsYXNzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuYWN0aXZlQ2xhc3MpO1xuICAgICAgICB9XG4gICAgfVxufTtcbl9fZGVjb3JhdGUoW1xuICAgIGJpbmRhYmxlKHsgbW9kZTogQmluZGluZ01vZGUudG9WaWV3IH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG5dLCBHb3RvQ3VzdG9tQXR0cmlidXRlLnByb3RvdHlwZSwgXCJ2YWx1ZVwiLCB2b2lkIDApO1xuR290b0N1c3RvbUF0dHJpYnV0ZSA9IF9fZGVjb3JhdGUoW1xuICAgIGN1c3RvbUF0dHJpYnV0ZSgnZ290bycpLFxuICAgIF9fcGFyYW0oMCwgSURPTSksXG4gICAgX19wYXJhbSgxLCBJTm9kZSksXG4gICAgX19wYXJhbSgyLCBJUm91dGVyKSxcbiAgICBfX3BhcmFtKDMsIElFdmVudE1hbmFnZXIpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0LCBPYmplY3QsIE9iamVjdCwgT2JqZWN0XSlcbl0sIEdvdG9DdXN0b21BdHRyaWJ1dGUpO1xuZXhwb3J0IHsgR290b0N1c3RvbUF0dHJpYnV0ZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z290by5qcy5tYXAiLCJpbXBvcnQgeyBfX2RlY29yYXRlLCBfX21ldGFkYXRhLCBfX3BhcmFtIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBjdXN0b21BdHRyaWJ1dGUsIElOb2RlLCBiaW5kYWJsZSwgQmluZGluZ01vZGUsIElET00sIERlbGVnYXRpb25TdHJhdGVneSB9IGZyb20gJ0BhdXJlbGlhL3J1bnRpbWUnO1xuaW1wb3J0IHsgSVJvdXRlciB9IGZyb20gJy4uL3JvdXRlcic7XG5pbXBvcnQgeyBHb3RvQ3VzdG9tQXR0cmlidXRlIH0gZnJvbSAnLi4vY29uZmlndXJhdGlvbic7XG5pbXBvcnQgeyBJRXZlbnRNYW5hZ2VyIH0gZnJvbSAnQGF1cmVsaWEvcnVudGltZS1odG1sJztcbmxldCBIcmVmQ3VzdG9tQXR0cmlidXRlID0gY2xhc3MgSHJlZkN1c3RvbUF0dHJpYnV0ZSB7XG4gICAgY29uc3RydWN0b3IoZG9tLCBlbGVtZW50LCByb3V0ZXIsIGV2ZW50TWFuYWdlcikge1xuICAgICAgICB0aGlzLmRvbSA9IGRvbTtcbiAgICAgICAgdGhpcy5yb3V0ZXIgPSByb3V0ZXI7XG4gICAgICAgIHRoaXMuZXZlbnRNYW5hZ2VyID0gZXZlbnRNYW5hZ2VyO1xuICAgICAgICB0aGlzLmV2ZW50TGlzdGVuZXIgPSBudWxsO1xuICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgIH1cbiAgICBiZWZvcmVCaW5kKCkge1xuICAgICAgICBpZiAodGhpcy5yb3V0ZXIub3B0aW9ucy51c2VIcmVmICYmICF0aGlzLmhhc0dvdG8oKSkge1xuICAgICAgICAgICAgdGhpcy5ldmVudExpc3RlbmVyID0gdGhpcy5ldmVudE1hbmFnZXIuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLmRvbSwgdGhpcy5lbGVtZW50LCAnY2xpY2snLCB0aGlzLnJvdXRlci5saW5rSGFuZGxlci5oYW5kbGVyLCBEZWxlZ2F0aW9uU3RyYXRlZ3kubm9uZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51cGRhdGVWYWx1ZSgpO1xuICAgIH1cbiAgICBiZWZvcmVVbmJpbmQoKSB7XG4gICAgICAgIGlmICh0aGlzLmV2ZW50TGlzdGVuZXIgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRMaXN0ZW5lci5kaXNwb3NlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdmFsdWVDaGFuZ2VkKCkge1xuICAgICAgICB0aGlzLnVwZGF0ZVZhbHVlKCk7XG4gICAgfVxuICAgIHVwZGF0ZVZhbHVlKCkge1xuICAgICAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKCdocmVmJywgdGhpcy52YWx1ZSk7XG4gICAgfVxuICAgIGhhc0dvdG8oKSB7XG4gICAgICAgIGNvbnN0IHBhcmVudCA9IHRoaXMuJGNvbnRyb2xsZXIucGFyZW50O1xuICAgICAgICBjb25zdCBzaWJsaW5ncyA9IHBhcmVudC52bUtpbmQgIT09IDEgLyogY3VzdG9tQXR0cmlidXRlICovID8gcGFyZW50LmNvbnRyb2xsZXJzIDogdm9pZCAwO1xuICAgICAgICByZXR1cm4gc2libGluZ3MgIT09IHZvaWQgMFxuICAgICAgICAgICAgJiYgc2libGluZ3Muc29tZShjID0+IGMudm1LaW5kID09PSAxIC8qIGN1c3RvbUF0dHJpYnV0ZSAqLyAmJiBjLnZpZXdNb2RlbCBpbnN0YW5jZW9mIEdvdG9DdXN0b21BdHRyaWJ1dGUpO1xuICAgIH1cbn07XG5fX2RlY29yYXRlKFtcbiAgICBiaW5kYWJsZSh7IG1vZGU6IEJpbmRpbmdNb2RlLnRvVmlldyB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuXSwgSHJlZkN1c3RvbUF0dHJpYnV0ZS5wcm90b3R5cGUsIFwidmFsdWVcIiwgdm9pZCAwKTtcbkhyZWZDdXN0b21BdHRyaWJ1dGUgPSBfX2RlY29yYXRlKFtcbiAgICBjdXN0b21BdHRyaWJ1dGUoe1xuICAgICAgICBuYW1lOiAnaHJlZicsXG4gICAgICAgIG5vTXVsdGlCaW5kaW5nczogdHJ1ZVxuICAgIH0pLFxuICAgIF9fcGFyYW0oMCwgSURPTSksXG4gICAgX19wYXJhbSgxLCBJTm9kZSksXG4gICAgX19wYXJhbSgyLCBJUm91dGVyKSxcbiAgICBfX3BhcmFtKDMsIElFdmVudE1hbmFnZXIpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0LCBPYmplY3QsIE9iamVjdCwgT2JqZWN0XSlcbl0sIEhyZWZDdXN0b21BdHRyaWJ1dGUpO1xuZXhwb3J0IHsgSHJlZkN1c3RvbUF0dHJpYnV0ZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aHJlZi5qcy5tYXAiLCJpbXBvcnQgeyBfX2RlY29yYXRlLCBfX21ldGFkYXRhIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBpbmplY3QgfSBmcm9tICdAYXVyZWxpYS9rZXJuZWwnO1xuaW1wb3J0IHsgYmluZGFibGUsIGN1c3RvbUVsZW1lbnQsIElOb2RlIH0gZnJvbSAnQGF1cmVsaWEvcnVudGltZSc7XG5pbXBvcnQgeyBJUm91dGVyIH0gZnJvbSAnLi4vcm91dGVyJztcbmxldCBOYXZDdXN0b21FbGVtZW50ID0gY2xhc3MgTmF2Q3VzdG9tRWxlbWVudCB7XG4gICAgY29uc3RydWN0b3Iocm91dGVyKSB7XG4gICAgICAgIHRoaXMucm91dGVyID0gcm91dGVyO1xuICAgICAgICB0aGlzLm5hbWUgPSBudWxsO1xuICAgICAgICB0aGlzLnJvdXRlcyA9IG51bGw7XG4gICAgICAgIHRoaXMubGV2ZWwgPSAwO1xuICAgICAgICB0aGlzLmNsYXNzZXMgPSB7fTtcbiAgICB9XG4gICAgZ2V0IG5hdlJvdXRlcygpIHtcbiAgICAgICAgY29uc3QgbmF2ID0gdGhpcy5yb3V0ZXIubmF2c1t0aGlzLm5hbWVdO1xuICAgICAgICByZXR1cm4gKG5hdiAhPT0gdm9pZCAwICYmIG5hdiAhPT0gbnVsbCA/IG5hdi5yb3V0ZXMgOiBbXSk7XG4gICAgfVxuICAgIGdldCBuYXZDbGFzc2VzKCkge1xuICAgICAgICBjb25zdCBuYXYgPSB0aGlzLnJvdXRlci5uYXZzW3RoaXMubmFtZV07XG4gICAgICAgIGNvbnN0IG5hdkNsYXNzZXMgPSAobmF2ICE9PSB2b2lkIDAgJiYgbmF2ICE9PSBudWxsID8gbmF2LmNsYXNzZXMgOiB7fSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi57XG4gICAgICAgICAgICAgICAgbmF2OiAnJyxcbiAgICAgICAgICAgICAgICB1bDogJycsXG4gICAgICAgICAgICAgICAgbGk6ICcnLFxuICAgICAgICAgICAgICAgIGE6ICcnLFxuICAgICAgICAgICAgICAgIHVsQWN0aXZlOiAnJyxcbiAgICAgICAgICAgICAgICBsaUFjdGl2ZTogJ25hdi1hY3RpdmUnLFxuICAgICAgICAgICAgICAgIGFBY3RpdmU6ICcnLFxuICAgICAgICAgICAgfSwgLi4ubmF2Q2xhc3Nlc1xuICAgICAgICB9O1xuICAgIH1cbiAgICBhY3RpdmUocm91dGUpIHtcbiAgICAgICAgcmV0dXJuICdBY3RpdmUnO1xuICAgIH1cbn07XG5fX2RlY29yYXRlKFtcbiAgICBiaW5kYWJsZSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuXSwgTmF2Q3VzdG9tRWxlbWVudC5wcm90b3R5cGUsIFwibmFtZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYmluZGFibGUsXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbl0sIE5hdkN1c3RvbUVsZW1lbnQucHJvdG90eXBlLCBcInJvdXRlc1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYmluZGFibGUsXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE51bWJlcilcbl0sIE5hdkN1c3RvbUVsZW1lbnQucHJvdG90eXBlLCBcImxldmVsXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBiaW5kYWJsZSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuXSwgTmF2Q3VzdG9tRWxlbWVudC5wcm90b3R5cGUsIFwiY2xhc3Nlc1wiLCB2b2lkIDApO1xuTmF2Q3VzdG9tRWxlbWVudCA9IF9fZGVjb3JhdGUoW1xuICAgIGluamVjdChJUm91dGVyLCBJTm9kZSksXG4gICAgY3VzdG9tRWxlbWVudCh7XG4gICAgICAgIG5hbWU6ICdhdS1uYXYnLCB0ZW1wbGF0ZTogYDx0ZW1wbGF0ZT5cbiAgPG5hdiBpZi5iaW5kPVwibmFtZVwiIGNsYXNzPVwiXFwke25hbWV9IFxcJHtuYXZDbGFzc2VzLm5hdn1cIj5cbiAgICA8YXUtbmF2IHJvdXRlcy5iaW5kPVwibmF2Um91dGVzXCIgY2xhc3Nlcy5iaW5kPVwibmF2Q2xhc3Nlc1wiIGNvbnRhaW5lcmxlc3M+PC9hdS1uYXY+XG4gIDwvbmF2PlxuICA8dWwgaWYuYmluZD1cInJvdXRlc1wiIGNsYXNzPVwibmF2LWxldmVsLVxcJHtsZXZlbH0gXFwke2NsYXNzZXMudWx9XCI+XG4gICAgPGxpIHJlcGVhdC5mb3I9XCJyb3V0ZSBvZiByb3V0ZXNcIiBpZi5iaW5kPVwicm91dGUudmlzaWJsZVwiIGNsYXNzPVwiXFwke3JvdXRlLmFjdGl2ZSA/IGNsYXNzZXMubGlBY3RpdmUgOiAnJ30gXFwke3JvdXRlLmhhc0NoaWxkcmVufSBcXCR7Y2xhc3Nlcy5saX1cIj5cbiAgICAgIDxhIGlmLmJpbmQ9XCJyb3V0ZS5saW5rICYmIHJvdXRlLmxpbmsubGVuZ3RoXCIgZ290bz1cIlxcJHtyb3V0ZS5saW5rfVwiIGNsYXNzPVwiXFwke3JvdXRlLmFjdGl2ZSA/IGNsYXNzZXMuYUFjdGl2ZSA6ICcnfSBcXCR7Y2xhc3Nlcy5hfVwiIGlubmVyaHRtbC5iaW5kPVwicm91dGUudGl0bGVcIj48L2E+XG4gICAgICA8YSBpZi5iaW5kPVwicm91dGUuZXhlY3V0ZVwiIGNsaWNrLnRyaWdnZXI9XCJyb3V0ZS5leGVjdXRlQWN0aW9uKCRldmVudClcIiBocmVmPVwiXCIgY2xhc3M9XCJcXCR7cm91dGUuYWN0aXZlID8gY2xhc3Nlcy5hQWN0aXZlIDogJyd9IFxcJHtjbGFzc2VzLmF9XCIgaW5uZXJodG1sLmJpbmQ9XCJyb3V0ZS50aXRsZVwiPjwvYT5cbiAgICAgIDxzcGFuIGlmLmJpbmQ9XCIoIXJvdXRlLmxpbmsgfHwgIXJvdXRlLmxpbmsubGVuZ3RoKSAmJiAhcm91dGUuZXhlY3V0ZSAmJiAhcm91dGUuY2hpbGRyZW5cIiBjbGFzcz1cIlxcJHtyb3V0ZS5hY3RpdmUgPyBjbGFzc2VzLmFBY3RpdmUgOiAnJ30gXFwke2NsYXNzZXMuc3Bhbn0gbmF2LXNlcGFyYXRvclwiIGlubmVyaHRtbC5iaW5kPVwicm91dGUudGl0bGVcIj48L3NwYW4+XG4gICAgICA8YSBpZi5iaW5kPVwiKCFyb3V0ZS5saW5rIHx8ICFyb3V0ZS5saW5rLmxlbmd0aCkgJiYgIXJvdXRlLmV4ZWN1dGUgJiYgcm91dGUuY2hpbGRyZW5cIiBjbGljay5kZWxlZ2F0ZT1cInJvdXRlLnRvZ2dsZUFjdGl2ZSgpXCIgaHJlZj1cIlwiIGNsYXNzPVwiXFwke3JvdXRlLmFjdGl2ZSA/IGNsYXNzZXMuYUFjdGl2ZSA6ICcnfSBcXCR7Y2xhc3Nlcy5hfVwiIGlubmVyaHRtbC5iaW5kPVwicm91dGUudGl0bGVcIj48L2E+XG4gICAgICA8YXUtbmF2IGlmLmJpbmQ9XCJyb3V0ZS5jaGlsZHJlblwiIHJvdXRlcy5iaW5kPVwicm91dGUuY2hpbGRyZW5cIiBsZXZlbC5iaW5kPVwibGV2ZWwgKyAxXCIgY2xhc3Nlcy5iaW5kPVwiY2xhc3Nlc1wiIGNvbnRhaW5lcmxlc3M+PC9hdS1uYXY+XG4gICAgPC9saT5cbiAgPC91bD5cbjwvdGVtcGxhdGU+YFxuICAgIH0pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0XSlcbl0sIE5hdkN1c3RvbUVsZW1lbnQpO1xuZXhwb3J0IHsgTmF2Q3VzdG9tRWxlbWVudCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bmF2LmpzLm1hcCIsImltcG9ydCB7IF9fZGVjb3JhdGUsIF9fbWV0YWRhdGEsIF9fcGFyYW0gfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IGJpbmRhYmxlLCBJTm9kZSwgY3VzdG9tRWxlbWVudCwgQ3VzdG9tRWxlbWVudCwgQ3VzdG9tRWxlbWVudERlZmluaXRpb24sIElDb250cm9sbGVyLCB9IGZyb20gJ0BhdXJlbGlhL3J1bnRpbWUnO1xuaW1wb3J0IHsgSVJvdXRlciB9IGZyb20gJy4uL3JvdXRlcic7XG5pbXBvcnQgeyBJQ29udGFpbmVyIH0gZnJvbSAnQGF1cmVsaWEva2VybmVsJztcbmV4cG9ydCBjb25zdCBQYXJlbnRWaWV3cG9ydFNjb3BlID0gQ3VzdG9tRWxlbWVudC5jcmVhdGVJbmplY3RhYmxlKCk7XG5sZXQgVmlld3BvcnRTY29wZUN1c3RvbUVsZW1lbnQgPSBjbGFzcyBWaWV3cG9ydFNjb3BlQ3VzdG9tRWxlbWVudCB7XG4gICAgY29uc3RydWN0b3Iocm91dGVyLCBlbGVtZW50LCBjb250YWluZXIsIHBhcmVudCwgcGFyZW50Q29udHJvbGxlcikge1xuICAgICAgICB0aGlzLnJvdXRlciA9IHJvdXRlcjtcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB0aGlzLnBhcmVudENvbnRyb2xsZXIgPSBwYXJlbnRDb250cm9sbGVyO1xuICAgICAgICB0aGlzLm5hbWUgPSAnZGVmYXVsdCc7XG4gICAgICAgIHRoaXMuY2F0Y2hlcyA9ICcnO1xuICAgICAgICB0aGlzLmNvbGxlY3Rpb24gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5zb3VyY2UgPSBudWxsO1xuICAgICAgICB0aGlzLnZpZXdwb3J0U2NvcGUgPSBudWxsO1xuICAgICAgICB0aGlzLmlzQm91bmQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICB9XG4gICAgY3JlYXRlKGNvbnRyb2xsZXIsIHBhcmVudENvbnRhaW5lciwgZGVmaW5pdGlvbiwgcGFydHMpIHtcbiAgICAgICAgLy8gVE9ETyhma2xldXZlcik6IGRlc2NyaWJlIHRoaXMgc29tZXdoZXJlIGluIHRoZSBkb2NzIGluc3RlYWRcbiAgICAgICAgLy8gVW5kZXIgdGhlIGNvbmRpdGlvbiB0aGF0IHRoZXJlIGlzIG5vIGByZXBsYWNlYCBhdHRyaWJ1dGUgb24gdGhpcyBjdXN0b20gZWxlbWVudCdzIGRlY2xhcmF0aW9uLFxuICAgICAgICAvLyBhbmQgdGhpcyBjdXN0b20gZWxlbWVudCBpcyBjb250YWluZXJsZXNzLCBpdHMgY29udGVudCB3aWxsIGJlIHBsYWNlZCBpbiBhIHBhcnQgbmFtZWQgJ2RlZmF1bHQnXG4gICAgICAgIC8vIFNlZSBwYWNrYWdlcy9qaXQtaHRtbC9zcmMvdGVtcGxhdGUtYmluZGVyLnRzIGxpbmUgNDExIChgcmVwbGFjZSA9ICdkZWZhdWx0JztgKSBmb3IgdGhlIGxvZ2ljIHRoYXQgZ292ZXJucyB0aGlzLlxuICAgICAgICAvLyBXZSBjb3VsZCB0aWR5IHRoaXMgdXAgaW50byBhIGZvcm1hbCBhcGkgaW4gdGhlIGZ1dHVyZS4gRm9yIG5vdywgdGhlcmUgYXJlIHR3byB3YXlzIHRvIGRvIHRoaXM6XG4gICAgICAgIC8vIDEuIGluamVjdCB0aGUgYEBJVGFyZ2V0ZWRJbnN0cnVjdGlvbmAgKElIeWRyYXRlRWxlbWVudEluc3RydWN0aW9uKSBhbmQgZ3JhYiAucGFydHNbJ2RlZmF1bHQnXSBmcm9tIHRoZXJlLCBtYW51YWxseSBjcmVhdGluZyBhIHZpZXcgZmFjdG9yeSBmcm9tIHRoYXQsIGV0Yy5cbiAgICAgICAgLy8gMi4gd2hhdCB3ZSdyZSBkb2luZyByaWdodCBoZXJlOiBncmFiIHRoZSAnZGVmYXVsdCcgcGFydCBmcm9tIHRoZSBjcmVhdGUgaG9vayBhbmQgcmV0dXJuIGl0IGFzIHRoZSBkZWZpbml0aW9uLCB0ZWxsaW5nIHRoZSByZW5kZXIgY29udGV4dCB0byB1c2UgdGhhdCBwYXJ0IHRvIGNvbXBpbGUgdGhpcyBlbGVtZW50IGluc3RlYWRcbiAgICAgICAgLy8gVGhpcyBlZmZlY3RpdmVseSBjYXVzZXMgdGhpcyBlbGVtZW50IHRvIHJlbmRlciBpdHMgZGVjbGFyZWQgY29udGVudCBhcyBpZiBpdCB3YXMgaXRzIG93biB0ZW1wbGF0ZS5cbiAgICAgICAgLy8gV2UgZG8gbmVlZCB0byBzZXQgYGNvbnRhaW5lcmxlc3NgIHRvIHRydWUgb24gdGhlIHBhcnQgZGVmaW5pdGlvbiBzbyB0aGF0IHRoZSBjb3JyZWN0IHByb2plY3RvciBpcyB1c2VkIHNpbmNlIHBhcnRzIGRlZmF1bHQgdG8gbm9uLWNvbnRhaW5lcmxlc3MuXG4gICAgICAgIC8vIE90aGVyd2lzZSwgdGhlIGNvbnRyb2xsZXIgd2lsbCB0cnkgdG8gZG8gYGFwcGVuZENoaWxkYCBvbiBhIGNvbW1lbnQgbm9kZSB3aGVuIGl0IGhhcyB0byBkbyBgaW5zZXJ0QmVmb3JlYC5cbiAgICAgICAgLy8gQWxzbywgaW4gdGhpcyBwYXJ0aWN1bGFyIHNjZW5hcmlvIChzcGVjaWZpYyB0byB2aWV3cG9ydC1zY29wZSkgd2UgbmVlZCB0byBjbG9uZSB0aGUgcGFydCBzbyBhcyB0byBwcmV2ZW50IHRoZSByZXN1bHRpbmcgY29tcGlsZWQgZGVmaW5pdGlvblxuICAgICAgICAvLyBmcm9tIGV2ZXIgYmVpbmcgY2FjaGVkLiBUaGF0J3MgdGhlIG9ubHkgcmVhc29uIHdoeSB3ZSdyZSBzcHJlYWRpbmcgdGhlIHBhcnQgaW50byBhIG5ldyBvYmplY3QgZm9yIGBnZXRPckNyZWF0ZWAuIElmIHdlIGRpZG4ndCBjbG9uZSB0aGUgb2JqZWN0LCB0aGlzIHNwZWNpZmljIGVsZW1lbnQgd291bGRuJ3Qgd29yayBjb3JyZWN0bHkuXG4gICAgICAgIGNvbnN0IHBhcnQgPSBwYXJ0c1snZGVmYXVsdCddO1xuICAgICAgICByZXR1cm4gQ3VzdG9tRWxlbWVudERlZmluaXRpb24uZ2V0T3JDcmVhdGUoeyAuLi5wYXJ0LCBjb250YWluZXJsZXNzOiB0cnVlIH0pO1xuICAgIH1cbiAgICBhZnRlckNvbXBpbGUoY29udHJvbGxlcikge1xuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRyb2xsZXIuY29udGV4dC5nZXQoSUNvbnRhaW5lcik7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdWaWV3cG9ydFNjb3BlIGNyZWF0aW5nJywgdGhpcy5nZXRBdHRyaWJ1dGUoJ25hbWUnLCB0aGlzLm5hbWUpLCB0aGlzLmNvbnRhaW5lciwgdGhpcy5wYXJlbnQsIGNvbnRyb2xsZXIsIHRoaXMpO1xuICAgICAgICAvLyB0aGlzLmNvbm5lY3QoKTtcbiAgICB9XG4gICAgYWZ0ZXJVbmJvdW5kKCkge1xuICAgICAgICB0aGlzLmlzQm91bmQgPSBmYWxzZTtcbiAgICB9XG4gICAgY29ubmVjdCgpIHtcbiAgICAgICAgaWYgKHRoaXMucm91dGVyLnJvb3RTY29wZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5hbWUgPSB0aGlzLmdldEF0dHJpYnV0ZSgnbmFtZScsIHRoaXMubmFtZSk7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7fTtcbiAgICAgICAgbGV0IHZhbHVlID0gdGhpcy5nZXRBdHRyaWJ1dGUoJ2NhdGNoZXMnLCB0aGlzLmNhdGNoZXMpO1xuICAgICAgICBpZiAodmFsdWUgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgb3B0aW9ucy5jYXRjaGVzID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgdmFsdWUgPSB0aGlzLmdldEF0dHJpYnV0ZSgnY29sbGVjdGlvbicsIHRoaXMuY29sbGVjdGlvbiwgdHJ1ZSk7XG4gICAgICAgIGlmICh2YWx1ZSAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBvcHRpb25zLmNvbGxlY3Rpb24gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBUT0RPOiBOZWVkcyB0byBiZSBib3VuZD8gSG93IHRvIHNvbHZlP1xuICAgICAgICBvcHRpb25zLnNvdXJjZSA9IHRoaXMuc291cmNlIHx8IG51bGw7XG4gICAgICAgIHRoaXMudmlld3BvcnRTY29wZSA9IHRoaXMucm91dGVyLmNvbm5lY3RWaWV3cG9ydFNjb3BlKHRoaXMudmlld3BvcnRTY29wZSwgbmFtZSwgdGhpcy5jb250YWluZXIsIHRoaXMuZWxlbWVudCwgb3B0aW9ucyk7XG4gICAgfVxuICAgIGRpc2Nvbm5lY3QoKSB7XG4gICAgICAgIGlmICh0aGlzLnZpZXdwb3J0U2NvcGUpIHtcbiAgICAgICAgICAgIHRoaXMucm91dGVyLmRpc2Nvbm5lY3RWaWV3cG9ydFNjb3BlKHRoaXMudmlld3BvcnRTY29wZSwgdGhpcy5jb250YWluZXIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudmlld3BvcnRTY29wZSA9IG51bGw7XG4gICAgfVxuICAgIGJlZm9yZUJpbmQoZmxhZ3MpIHtcbiAgICAgICAgdGhpcy5pc0JvdW5kID0gdHJ1ZTtcbiAgICAgICAgdGhpcy4kY29udHJvbGxlci5zY29wZSA9IHRoaXMucGFyZW50Q29udHJvbGxlci5zY29wZTtcbiAgICAgICAgdGhpcy5jb25uZWN0KCk7XG4gICAgICAgIGlmICh0aGlzLnZpZXdwb3J0U2NvcGUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMudmlld3BvcnRTY29wZS5iZWZvcmVCaW5kKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgYmVmb3JlVW5iaW5kKGZsYWdzKSB7XG4gICAgICAgIGlmICh0aGlzLnZpZXdwb3J0U2NvcGUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMudmlld3BvcnRTY29wZS5iZWZvcmVVbmJpbmQoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBnZXRBdHRyaWJ1dGUoa2V5LCB2YWx1ZSwgY2hlY2tFeGlzdHMgPSBmYWxzZSkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICAgICAgaWYgKHRoaXMuaXNCb3VuZCkge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5oYXNBdHRyaWJ1dGUoa2V5KSkge1xuICAgICAgICAgICAgICAgIGlmIChjaGVja0V4aXN0cykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZShrZXkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgfVxufTtcbl9fZGVjb3JhdGUoW1xuICAgIGJpbmRhYmxlLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG5dLCBWaWV3cG9ydFNjb3BlQ3VzdG9tRWxlbWVudC5wcm90b3R5cGUsIFwibmFtZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYmluZGFibGUsXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIFZpZXdwb3J0U2NvcGVDdXN0b21FbGVtZW50LnByb3RvdHlwZSwgXCJjYXRjaGVzXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBiaW5kYWJsZSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbl0sIFZpZXdwb3J0U2NvcGVDdXN0b21FbGVtZW50LnByb3RvdHlwZSwgXCJjb2xsZWN0aW9uXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBiaW5kYWJsZSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuXSwgVmlld3BvcnRTY29wZUN1c3RvbUVsZW1lbnQucHJvdG90eXBlLCBcInNvdXJjZVwiLCB2b2lkIDApO1xuVmlld3BvcnRTY29wZUN1c3RvbUVsZW1lbnQgPSBfX2RlY29yYXRlKFtcbiAgICBjdXN0b21FbGVtZW50KHtcbiAgICAgICAgbmFtZTogJ2F1LXZpZXdwb3J0LXNjb3BlJyxcbiAgICAgICAgdGVtcGxhdGU6ICc8dGVtcGxhdGU+PC90ZW1wbGF0ZT4nLFxuICAgICAgICBjb250YWluZXJsZXNzOiB0cnVlLFxuICAgICAgICBpbmplY3RhYmxlOiBQYXJlbnRWaWV3cG9ydFNjb3BlXG4gICAgfSksXG4gICAgX19wYXJhbSgwLCBJUm91dGVyKSxcbiAgICBfX3BhcmFtKDEsIElOb2RlKSxcbiAgICBfX3BhcmFtKDIsIElDb250YWluZXIpLFxuICAgIF9fcGFyYW0oMywgUGFyZW50Vmlld3BvcnRTY29wZSksXG4gICAgX19wYXJhbSg0LCBJQ29udHJvbGxlciksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3QsIE9iamVjdCwgT2JqZWN0LCBWaWV3cG9ydFNjb3BlQ3VzdG9tRWxlbWVudCwgT2JqZWN0XSlcbl0sIFZpZXdwb3J0U2NvcGVDdXN0b21FbGVtZW50KTtcbmV4cG9ydCB7IFZpZXdwb3J0U2NvcGVDdXN0b21FbGVtZW50IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD12aWV3cG9ydC1zY29wZS5qcy5tYXAiLCJpbXBvcnQgeyBfX2RlY29yYXRlLCBfX21ldGFkYXRhLCBfX3BhcmFtIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBJQ29udGFpbmVyIH0gZnJvbSAnQGF1cmVsaWEva2VybmVsJztcbmltcG9ydCB7IGJpbmRhYmxlLCBJTm9kZSwgY3VzdG9tRWxlbWVudCwgQ3VzdG9tRWxlbWVudCwgfSBmcm9tICdAYXVyZWxpYS9ydW50aW1lJztcbmltcG9ydCB7IElSb3V0ZXIgfSBmcm9tICcuLi9yb3V0ZXInO1xuZXhwb3J0IGNvbnN0IFBhcmVudFZpZXdwb3J0ID0gQ3VzdG9tRWxlbWVudC5jcmVhdGVJbmplY3RhYmxlKCk7XG5sZXQgVmlld3BvcnRDdXN0b21FbGVtZW50ID0gY2xhc3MgVmlld3BvcnRDdXN0b21FbGVtZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihyb3V0ZXIsIGVsZW1lbnQsIGNvbnRhaW5lciwgcGFyZW50Vmlld3BvcnQpIHtcbiAgICAgICAgdGhpcy5yb3V0ZXIgPSByb3V0ZXI7XG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xuICAgICAgICB0aGlzLnBhcmVudFZpZXdwb3J0ID0gcGFyZW50Vmlld3BvcnQ7XG4gICAgICAgIHRoaXMubmFtZSA9ICdkZWZhdWx0JztcbiAgICAgICAgdGhpcy51c2VkQnkgPSAnJztcbiAgICAgICAgdGhpcy5kZWZhdWx0ID0gJyc7XG4gICAgICAgIHRoaXMuZmFsbGJhY2sgPSAnJztcbiAgICAgICAgdGhpcy5ub1Njb3BlID0gZmFsc2U7XG4gICAgICAgIHRoaXMubm9MaW5rID0gZmFsc2U7XG4gICAgICAgIHRoaXMubm9IaXN0b3J5ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc3RhdGVmdWwgPSBmYWxzZTtcbiAgICAgICAgdGhpcy52aWV3cG9ydCA9IG51bGw7XG4gICAgICAgIHRoaXMuaXNCb3VuZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgIH1cbiAgICBhZnRlckNvbXBpbGUoY29udHJvbGxlcikge1xuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRyb2xsZXIuY29udGV4dC5nZXQoSUNvbnRhaW5lcik7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdWaWV3cG9ydCBjcmVhdGluZycsIHRoaXMuZ2V0QXR0cmlidXRlKCduYW1lJywgdGhpcy5uYW1lKSwgdGhpcy5jb250YWluZXIsIHRoaXMucGFyZW50Vmlld3BvcnQsIGNvbnRyb2xsZXIsIHRoaXMpO1xuICAgICAgICAvLyB0aGlzLmNvbm5lY3QoKTtcbiAgICB9XG4gICAgYWZ0ZXJVbmJpbmQoKSB7XG4gICAgICAgIHRoaXMuaXNCb3VuZCA9IGZhbHNlO1xuICAgIH1cbiAgICBjb25uZWN0KCkge1xuICAgICAgICBpZiAodGhpcy5yb3V0ZXIucm9vdFNjb3BlID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbmFtZSA9IHRoaXMuZ2V0QXR0cmlidXRlKCduYW1lJywgdGhpcy5uYW1lKTtcbiAgICAgICAgbGV0IHZhbHVlID0gdGhpcy5nZXRBdHRyaWJ1dGUoJ25vLXNjb3BlJywgdGhpcy5ub1Njb3BlKTtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHsgc2NvcGU6IHZhbHVlID09PSB2b2lkIDAgfHwgIXZhbHVlID8gdHJ1ZSA6IGZhbHNlIH07XG4gICAgICAgIHZhbHVlID0gdGhpcy5nZXRBdHRyaWJ1dGUoJ3VzZWQtYnknLCB0aGlzLnVzZWRCeSk7XG4gICAgICAgIGlmICh2YWx1ZSAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBvcHRpb25zLnVzZWRCeSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHZhbHVlID0gdGhpcy5nZXRBdHRyaWJ1dGUoJ2RlZmF1bHQnLCB0aGlzLmRlZmF1bHQpO1xuICAgICAgICBpZiAodmFsdWUgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgb3B0aW9ucy5kZWZhdWx0ID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgdmFsdWUgPSB0aGlzLmdldEF0dHJpYnV0ZSgnZmFsbGJhY2snLCB0aGlzLmZhbGxiYWNrKTtcbiAgICAgICAgaWYgKHZhbHVlICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgIG9wdGlvbnMuZmFsbGJhY2sgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICB2YWx1ZSA9IHRoaXMuZ2V0QXR0cmlidXRlKCduby1saW5rJywgdGhpcy5ub0xpbmssIHRydWUpO1xuICAgICAgICBpZiAodmFsdWUgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgb3B0aW9ucy5ub0xpbmsgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICB2YWx1ZSA9IHRoaXMuZ2V0QXR0cmlidXRlKCduby1oaXN0b3J5JywgdGhpcy5ub0hpc3RvcnksIHRydWUpO1xuICAgICAgICBpZiAodmFsdWUgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgb3B0aW9ucy5ub0hpc3RvcnkgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICB2YWx1ZSA9IHRoaXMuZ2V0QXR0cmlidXRlKCdzdGF0ZWZ1bCcsIHRoaXMuc3RhdGVmdWwsIHRydWUpO1xuICAgICAgICBpZiAodmFsdWUgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgb3B0aW9ucy5zdGF0ZWZ1bCA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudmlld3BvcnQgPSB0aGlzLnJvdXRlci5jb25uZWN0Vmlld3BvcnQodGhpcy52aWV3cG9ydCwgdGhpcy5jb250YWluZXIsIG5hbWUsIHRoaXMuZWxlbWVudCwgb3B0aW9ucyk7XG4gICAgfVxuICAgIGRpc2Nvbm5lY3QoKSB7XG4gICAgICAgIGlmICh0aGlzLnZpZXdwb3J0KSB7XG4gICAgICAgICAgICB0aGlzLnJvdXRlci5kaXNjb25uZWN0Vmlld3BvcnQodGhpcy52aWV3cG9ydCwgdGhpcy5jb250YWluZXIsIHRoaXMuZWxlbWVudCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy52aWV3cG9ydCA9IG51bGw7XG4gICAgfVxuICAgIGJlZm9yZUJpbmQoZmxhZ3MpIHtcbiAgICAgICAgdGhpcy5pc0JvdW5kID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5jb25uZWN0KCk7XG4gICAgICAgIGlmICh0aGlzLnZpZXdwb3J0KSB7XG4gICAgICAgICAgICB0aGlzLnZpZXdwb3J0LmJlZm9yZUJpbmQoZmxhZ3MpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGJlZm9yZUF0dGFjaChmbGFncykge1xuICAgICAgICBpZiAodGhpcy52aWV3cG9ydCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmlld3BvcnQuYmVmb3JlQXR0YWNoKGZsYWdzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGJlZm9yZURldGFjaChmbGFncykge1xuICAgICAgICBpZiAodGhpcy52aWV3cG9ydCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmlld3BvcnQuYmVmb3JlRGV0YWNoKGZsYWdzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGFzeW5jIGJlZm9yZVVuYmluZChmbGFncykge1xuICAgICAgICBpZiAodGhpcy52aWV3cG9ydCkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy52aWV3cG9ydC5iZWZvcmVVbmJpbmQoZmxhZ3MpO1xuICAgICAgICAgICAgdGhpcy5kaXNjb25uZWN0KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0QXR0cmlidXRlKGtleSwgdmFsdWUsIGNoZWNrRXhpc3RzID0gZmFsc2UpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0ge307XG4gICAgICAgIGlmICh0aGlzLmlzQm91bmQgJiYgIWNoZWNrRXhpc3RzKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50Lmhhc0F0dHJpYnV0ZShrZXkpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNoZWNrRXhpc3RzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSB0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKGtleSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZvaWQgMDtcbiAgICB9XG59O1xuX19kZWNvcmF0ZShbXG4gICAgYmluZGFibGUsXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIFZpZXdwb3J0Q3VzdG9tRWxlbWVudC5wcm90b3R5cGUsIFwibmFtZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYmluZGFibGUsXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIFN0cmluZylcbl0sIFZpZXdwb3J0Q3VzdG9tRWxlbWVudC5wcm90b3R5cGUsIFwidXNlZEJ5XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBiaW5kYWJsZSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgVmlld3BvcnRDdXN0b21FbGVtZW50LnByb3RvdHlwZSwgXCJkZWZhdWx0XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBiaW5kYWJsZSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgU3RyaW5nKVxuXSwgVmlld3BvcnRDdXN0b21FbGVtZW50LnByb3RvdHlwZSwgXCJmYWxsYmFja1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYmluZGFibGUsXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG5dLCBWaWV3cG9ydEN1c3RvbUVsZW1lbnQucHJvdG90eXBlLCBcIm5vU2NvcGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGJpbmRhYmxlLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuXSwgVmlld3BvcnRDdXN0b21FbGVtZW50LnByb3RvdHlwZSwgXCJub0xpbmtcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGJpbmRhYmxlLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuXSwgVmlld3BvcnRDdXN0b21FbGVtZW50LnByb3RvdHlwZSwgXCJub0hpc3RvcnlcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGJpbmRhYmxlLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuXSwgVmlld3BvcnRDdXN0b21FbGVtZW50LnByb3RvdHlwZSwgXCJzdGF0ZWZ1bFwiLCB2b2lkIDApO1xuVmlld3BvcnRDdXN0b21FbGVtZW50ID0gX19kZWNvcmF0ZShbXG4gICAgY3VzdG9tRWxlbWVudCh7XG4gICAgICAgIG5hbWU6ICdhdS12aWV3cG9ydCcsXG4gICAgICAgIGluamVjdGFibGU6IFBhcmVudFZpZXdwb3J0XG4gICAgfSksXG4gICAgX19wYXJhbSgwLCBJUm91dGVyKSxcbiAgICBfX3BhcmFtKDEsIElOb2RlKSxcbiAgICBfX3BhcmFtKDIsIElDb250YWluZXIpLFxuICAgIF9fcGFyYW0oMywgUGFyZW50Vmlld3BvcnQpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0LCBPYmplY3QsIE9iamVjdCwgVmlld3BvcnRDdXN0b21FbGVtZW50XSlcbl0sIFZpZXdwb3J0Q3VzdG9tRWxlbWVudCk7XG5leHBvcnQgeyBWaWV3cG9ydEN1c3RvbUVsZW1lbnQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXZpZXdwb3J0LmpzLm1hcCIsImltcG9ydCB7IFJvdXRlUmVjb2duaXplciBhcyAkUm91dGVSZWNvZ25pemVyLCBDb25maWd1cmFibGVSb3V0ZSBhcyAkQ29uZmlndXJhYmxlUm91dGUsIFJlY29nbml6ZWRSb3V0ZSBhcyAkUmVjb2duaXplZFJvdXRlLCBFbmRwb2ludCBhcyAkRW5kcG9pbnQsIH0gZnJvbSAnQGF1cmVsaWEvcm91dGUtcmVjb2duaXplcic7XG5leHBvcnQgY29uc3QgUm91dGVSZWNvZ25pemVyID0gJFJvdXRlUmVjb2duaXplcjtcbmV4cG9ydCBjb25zdCBDb25maWd1cmFibGVSb3V0ZSA9ICRDb25maWd1cmFibGVSb3V0ZTtcbmV4cG9ydCBjb25zdCBSZWNvZ25pemVkUm91dGUgPSAkUmVjb2duaXplZFJvdXRlO1xuZXhwb3J0IGNvbnN0IEVuZHBvaW50ID0gJEVuZHBvaW50O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cm91dGUtcmVjb2duaXplci5qcy5tYXAiLCIvKiBlc2xpbnQtZGlzYWJsZSBtYXgtbGluZXMtcGVyLWZ1bmN0aW9uICovXG5pbXBvcnQgeyBESSwgSUNvbnRhaW5lciwgUmVwb3J0ZXIsIFJlZ2lzdHJhdGlvbiwgTWV0YWRhdGEgfSBmcm9tICdAYXVyZWxpYS9rZXJuZWwnO1xuaW1wb3J0IHsgQXVyZWxpYSwgQ3VzdG9tRWxlbWVudCwgRE9NLCBpc1JlbmRlckNvbnRleHQgfSBmcm9tICdAYXVyZWxpYS9ydW50aW1lJztcbmltcG9ydCB7IEluc3RydWN0aW9uUmVzb2x2ZXIgfSBmcm9tICcuL2luc3RydWN0aW9uLXJlc29sdmVyJztcbmltcG9ydCB7IExpbmtIYW5kbGVyIH0gZnJvbSAnLi9saW5rLWhhbmRsZXInO1xuaW1wb3J0IHsgTmF2IH0gZnJvbSAnLi9uYXYnO1xuaW1wb3J0IHsgTmF2aWdhdG9yIH0gZnJvbSAnLi9uYXZpZ2F0b3InO1xuaW1wb3J0IHsgTmF2aWdhdGlvbkluc3RydWN0aW9uUmVzb2x2ZXIgfSBmcm9tICcuL3R5cGUtcmVzb2x2ZXJzJztcbmltcG9ydCB7IGFycmF5UmVtb3ZlIH0gZnJvbSAnLi91dGlscyc7XG5pbXBvcnQgeyBWaWV3cG9ydCB9IGZyb20gJy4vdmlld3BvcnQnO1xuaW1wb3J0IHsgRm91bmRSb3V0ZSB9IGZyb20gJy4vZm91bmQtcm91dGUnO1xuaW1wb3J0IHsgSG9va01hbmFnZXIgfSBmcm9tICcuL2hvb2stbWFuYWdlcic7XG5pbXBvcnQgeyBTY29wZSB9IGZyb20gJy4vc2NvcGUnO1xuaW1wb3J0IHsgVmlld3BvcnRTY29wZSB9IGZyb20gJy4vdmlld3BvcnQtc2NvcGUnO1xuaW1wb3J0IHsgQnJvd3NlclZpZXdlclN0b3JlIH0gZnJvbSAnLi9icm93c2VyLXZpZXdlci1zdG9yZSc7XG5jbGFzcyBDbG9zZXN0Vmlld3BvcnRDdXN0b21FbGVtZW50IHtcbn1cbmNsYXNzIENsb3Nlc3RTY29wZSB7XG59XG5leHBvcnQgY29uc3QgSVJvdXRlciA9IERJLmNyZWF0ZUludGVyZmFjZSgnSVJvdXRlcicpLndpdGhEZWZhdWx0KHggPT4geC5zaW5nbGV0b24oUm91dGVyKSk7XG5leHBvcnQgY2xhc3MgUm91dGVyIHtcbiAgICBjb25zdHJ1Y3Rvcihjb250YWluZXIsIG5hdmlnYXRvciwgbmF2aWdhdGlvbiwgbGlua0hhbmRsZXIsIGluc3RydWN0aW9uUmVzb2x2ZXIpIHtcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgICAgIHRoaXMubmF2aWdhdG9yID0gbmF2aWdhdG9yO1xuICAgICAgICB0aGlzLm5hdmlnYXRpb24gPSBuYXZpZ2F0aW9uO1xuICAgICAgICB0aGlzLmxpbmtIYW5kbGVyID0gbGlua0hhbmRsZXI7XG4gICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25SZXNvbHZlciA9IGluc3RydWN0aW9uUmVzb2x2ZXI7XG4gICAgICAgIHRoaXMucm9vdFNjb3BlID0gbnVsbDtcbiAgICAgICAgdGhpcy5uYXZzID0ge307XG4gICAgICAgIHRoaXMuYWN0aXZlQ29tcG9uZW50cyA9IFtdO1xuICAgICAgICB0aGlzLmFwcGVuZGVkSW5zdHJ1Y3Rpb25zID0gW107XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IHtcbiAgICAgICAgICAgIHVzZUhyZWY6IHRydWUsXG4gICAgICAgICAgICBzdGF0ZWZ1bEhpc3RvcnlMZW5ndGg6IDAsXG4gICAgICAgICAgICB1c2VEaXJlY3RSb3V0ZXM6IHRydWUsXG4gICAgICAgICAgICB1c2VDb25maWd1cmVkUm91dGVzOiB0cnVlLFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmlzQWN0aXZlID0gZmFsc2U7XG4gICAgICAgIHRoaXMubG9hZGVkRmlyc3QgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcm9jZXNzaW5nTmF2aWdhdGlvbiA9IG51bGw7XG4gICAgICAgIHRoaXMubGFzdE5hdmlnYXRpb24gPSBudWxsO1xuICAgICAgICB0aGlzLnN0YWxlQ2hlY2tzID0ge307XG4gICAgICAgIC8vIFRPRE86IHVzZSBAYm91bmQgYW5kIGltcHJvdmUgbmFtZSAoZXNsaW50LWRpc2FibGUgaXMgdGVtcClcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC90eXBlZGVmXG4gICAgICAgIHRoaXMubGlua0NhbGxiYWNrID0gKGluZm8pID0+IHtcbiAgICAgICAgICAgIGxldCBpbnN0cnVjdGlvbiA9IGluZm8uaW5zdHJ1Y3Rpb24gfHwgJyc7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGluc3RydWN0aW9uID09PSAnc3RyaW5nJyAmJiBpbnN0cnVjdGlvbi5zdGFydHNXaXRoKCcjJykpIHtcbiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbiA9IGluc3RydWN0aW9uLnNsaWNlKDEpO1xuICAgICAgICAgICAgICAgIC8vICcjJyA9PT0gJy8nID09PSAnIy8nXG4gICAgICAgICAgICAgICAgaWYgKCFpbnN0cnVjdGlvbi5zdGFydHNXaXRoKCcvJykpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb24gPSBgLyR7aW5zdHJ1Y3Rpb259YDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBBZGRzIHRvIE5hdmlnYXRvcidzIFF1ZXVlLCB3aGljaCBtYWtlcyBzdXJlIGl0J3Mgc2VyaWFsXG4gICAgICAgICAgICB0aGlzLmdvdG8oaW5zdHJ1Y3Rpb24sIHsgb3JpZ2luOiBpbmZvLmFuY2hvciB9KS5jYXRjaChlcnJvciA9PiB7IHRocm93IGVycm9yOyB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gVE9ETzogdXNlIEBib3VuZCBhbmQgaW1wcm92ZSBuYW1lIChlc2xpbnQtZGlzYWJsZSBpcyB0ZW1wKVxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L3R5cGVkZWZcbiAgICAgICAgdGhpcy5uYXZpZ2F0b3JDYWxsYmFjayA9IChpbnN0cnVjdGlvbikgPT4ge1xuICAgICAgICAgICAgLy8gSW5zdHJ1Y3Rpb25zIGV4dHJhY3RlZCBmcm9tIHF1ZXVlLCBvbmUgYXQgYSB0aW1lXG4gICAgICAgICAgICB0aGlzLnByb2Nlc3NOYXZpZ2F0aW9ucyhpbnN0cnVjdGlvbikuY2F0Y2goZXJyb3IgPT4geyB0aHJvdyBlcnJvcjsgfSk7XG4gICAgICAgIH07XG4gICAgICAgIC8vIFRPRE86IHVzZSBAYm91bmQgYW5kIGltcHJvdmUgbmFtZSAoZXNsaW50LWRpc2FibGUgaXMgdGVtcClcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC90eXBlZGVmXG4gICAgICAgIHRoaXMubmF2aWdhdG9yU2VyaWFsaXplQ2FsbGJhY2sgPSBhc3luYyAoZW50cnksIHByZXNlcnZlZEVudHJpZXMpID0+IHtcbiAgICAgICAgICAgIGxldCBleGNsdWRlQ29tcG9uZW50cyA9IFtdO1xuICAgICAgICAgICAgZm9yIChjb25zdCBwcmVzZXJ2ZWRFbnRyeSBvZiBwcmVzZXJ2ZWRFbnRyaWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBwcmVzZXJ2ZWRFbnRyeS5pbnN0cnVjdGlvbiAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgZXhjbHVkZUNvbXBvbmVudHMucHVzaCguLi50aGlzLmluc3RydWN0aW9uUmVzb2x2ZXIuZmxhdHRlblZpZXdwb3J0SW5zdHJ1Y3Rpb25zKHByZXNlcnZlZEVudHJ5Lmluc3RydWN0aW9uKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihpbnN0cnVjdGlvbiA9PiBpbnN0cnVjdGlvbi52aWV3cG9ydCAhPT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoaW5zdHJ1Y3Rpb24gPT4gaW5zdHJ1Y3Rpb24uY29tcG9uZW50SW5zdGFuY2UpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBwcmVzZXJ2ZWRFbnRyeS5mdWxsU3RhdGVJbnN0cnVjdGlvbiAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgZXhjbHVkZUNvbXBvbmVudHMucHVzaCguLi50aGlzLmluc3RydWN0aW9uUmVzb2x2ZXIuZmxhdHRlblZpZXdwb3J0SW5zdHJ1Y3Rpb25zKHByZXNlcnZlZEVudHJ5LmZ1bGxTdGF0ZUluc3RydWN0aW9uKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihpbnN0cnVjdGlvbiA9PiBpbnN0cnVjdGlvbi52aWV3cG9ydCAhPT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoaW5zdHJ1Y3Rpb24gPT4gaW5zdHJ1Y3Rpb24uY29tcG9uZW50SW5zdGFuY2UpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBleGNsdWRlQ29tcG9uZW50cyA9IGV4Y2x1ZGVDb21wb25lbnRzLmZpbHRlcigoY29tcG9uZW50LCBpLCBhcnIpID0+IGNvbXBvbmVudCAhPT0gbnVsbCAmJiBhcnIuaW5kZXhPZihjb21wb25lbnQpID09PSBpKTtcbiAgICAgICAgICAgIGNvbnN0IHNlcmlhbGl6ZWQgPSB7IC4uLmVudHJ5IH07XG4gICAgICAgICAgICBsZXQgaW5zdHJ1Y3Rpb25zID0gW107XG4gICAgICAgICAgICBpZiAoc2VyaWFsaXplZC5mdWxsU3RhdGVJbnN0cnVjdGlvbiAmJiB0eXBlb2Ygc2VyaWFsaXplZC5mdWxsU3RhdGVJbnN0cnVjdGlvbiAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbnMucHVzaCguLi5zZXJpYWxpemVkLmZ1bGxTdGF0ZUluc3RydWN0aW9uKTtcbiAgICAgICAgICAgICAgICBzZXJpYWxpemVkLmZ1bGxTdGF0ZUluc3RydWN0aW9uID0gdGhpcy5pbnN0cnVjdGlvblJlc29sdmVyLnN0cmluZ2lmeVZpZXdwb3J0SW5zdHJ1Y3Rpb25zKHNlcmlhbGl6ZWQuZnVsbFN0YXRlSW5zdHJ1Y3Rpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNlcmlhbGl6ZWQuaW5zdHJ1Y3Rpb24gJiYgdHlwZW9mIHNlcmlhbGl6ZWQuaW5zdHJ1Y3Rpb24gIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zLnB1c2goLi4uc2VyaWFsaXplZC5pbnN0cnVjdGlvbik7XG4gICAgICAgICAgICAgICAgc2VyaWFsaXplZC5pbnN0cnVjdGlvbiA9IHRoaXMuaW5zdHJ1Y3Rpb25SZXNvbHZlci5zdHJpbmdpZnlWaWV3cG9ydEluc3RydWN0aW9ucyhzZXJpYWxpemVkLmluc3RydWN0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGluc3RydWN0aW9ucyA9IGluc3RydWN0aW9ucy5maWx0ZXIoKGluc3RydWN0aW9uLCBpLCBhcnIpID0+IGluc3RydWN0aW9uICE9PSBudWxsXG4gICAgICAgICAgICAgICAgJiYgaW5zdHJ1Y3Rpb24uY29tcG9uZW50SW5zdGFuY2UgIT09IG51bGxcbiAgICAgICAgICAgICAgICAmJiBhcnIuaW5kZXhPZihpbnN0cnVjdGlvbikgPT09IGkpO1xuICAgICAgICAgICAgY29uc3QgYWxyZWFkeURvbmUgPSBbXTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgaW5zdHJ1Y3Rpb24gb2YgaW5zdHJ1Y3Rpb25zKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5mcmVlQ29tcG9uZW50cyhpbnN0cnVjdGlvbiwgZXhjbHVkZUNvbXBvbmVudHMsIGFscmVhZHlEb25lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzZXJpYWxpemVkO1xuICAgICAgICB9O1xuICAgICAgICAvLyBUT0RPOiB1c2UgQGJvdW5kIGFuZCBpbXByb3ZlIG5hbWUgKGVzbGludC1kaXNhYmxlIGlzIHRlbXApXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvdHlwZWRlZlxuICAgICAgICB0aGlzLmJyb3dzZXJOYXZpZ2F0b3JDYWxsYmFjayA9IChicm93c2VyTmF2aWdhdGlvbkV2ZW50KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBlbnRyeSA9IChicm93c2VyTmF2aWdhdGlvbkV2ZW50LnN0YXRlICYmIGJyb3dzZXJOYXZpZ2F0aW9uRXZlbnQuc3RhdGUuY3VycmVudEVudHJ5XG4gICAgICAgICAgICAgICAgPyBicm93c2VyTmF2aWdhdGlvbkV2ZW50LnN0YXRlLmN1cnJlbnRFbnRyeVxuICAgICAgICAgICAgICAgIDogeyBpbnN0cnVjdGlvbjogJycsIGZ1bGxTdGF0ZUluc3RydWN0aW9uOiAnJyB9KTtcbiAgICAgICAgICAgIGVudHJ5Lmluc3RydWN0aW9uID0gYnJvd3Nlck5hdmlnYXRpb25FdmVudC5pbnN0cnVjdGlvbjtcbiAgICAgICAgICAgIGVudHJ5LmZyb21Ccm93c2VyID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMubmF2aWdhdG9yLm5hdmlnYXRlKGVudHJ5KS5jYXRjaChlcnJvciA9PiB7IHRocm93IGVycm9yOyB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gVE9ETzogdXNlIEBib3VuZCBhbmQgaW1wcm92ZSBuYW1lIChlc2xpbnQtZGlzYWJsZSBpcyB0ZW1wKVxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L3R5cGVkZWZcbiAgICAgICAgdGhpcy5wcm9jZXNzTmF2aWdhdGlvbnMgPSBhc3luYyAocUluc3RydWN0aW9uKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpbnN0cnVjdGlvbiA9IHRoaXMucHJvY2Vzc2luZ05hdmlnYXRpb24gPSBxSW5zdHJ1Y3Rpb247XG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnJlcG9ydENhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLnJlcG9ydENhbGxiYWNrKGluc3RydWN0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBmdWxsU3RhdGVJbnN0cnVjdGlvbiA9IGZhbHNlO1xuICAgICAgICAgICAgY29uc3QgaW5zdHJ1Y3Rpb25OYXZpZ2F0aW9uID0gaW5zdHJ1Y3Rpb24ubmF2aWdhdGlvbjtcbiAgICAgICAgICAgIGlmICgoaW5zdHJ1Y3Rpb25OYXZpZ2F0aW9uLmJhY2sgfHwgaW5zdHJ1Y3Rpb25OYXZpZ2F0aW9uLmZvcndhcmQpICYmIGluc3RydWN0aW9uLmZ1bGxTdGF0ZUluc3RydWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgZnVsbFN0YXRlSW5zdHJ1Y3Rpb24gPSB0cnVlO1xuICAgICAgICAgICAgICAgIC8vIGlmICghY29uZmlybSgnUGVyZm9ybSBoaXN0b3J5IG5hdmlnYXRpb24/JykpIHsgdGhpcy5uYXZpZ2F0b3IuY2FuY2VsKGluc3RydWN0aW9uKTsgdGhpcy5wcm9jZXNzaW5nTmF2aWdhdGlvbiA9IG51bGw7IHJldHVybiBQcm9taXNlLnJlc29sdmUoKTsgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IGNvbmZpZ3VyZWRSb3V0ZSA9IGF3YWl0IHRoaXMuZmluZEluc3RydWN0aW9ucyh0aGlzLnJvb3RTY29wZS5zY29wZSwgaW5zdHJ1Y3Rpb24uaW5zdHJ1Y3Rpb24sIGluc3RydWN0aW9uLnNjb3BlIHx8IHRoaXMucm9vdFNjb3BlLnNjb3BlLCAhZnVsbFN0YXRlSW5zdHJ1Y3Rpb24pO1xuICAgICAgICAgICAgbGV0IGluc3RydWN0aW9ucyA9IGNvbmZpZ3VyZWRSb3V0ZS5pbnN0cnVjdGlvbnM7XG4gICAgICAgICAgICBsZXQgY29uZmlndXJlZFJvdXRlUGF0aCA9IG51bGw7XG4gICAgICAgICAgICBpZiAoaW5zdHJ1Y3Rpb24uaW5zdHJ1Y3Rpb24ubGVuZ3RoID4gMCAmJiAhY29uZmlndXJlZFJvdXRlLmZvdW5kQ29uZmlndXJhdGlvbiAmJiAhY29uZmlndXJlZFJvdXRlLmZvdW5kSW5zdHJ1Y3Rpb25zKSB7XG4gICAgICAgICAgICAgICAgLy8gVE9ETzogRG8gc29tZXRoaW5nIGhlcmUhXG4gICAgICAgICAgICAgICAgdGhpcy51bmtub3duUm91dGUoY29uZmlndXJlZFJvdXRlLnJlbWFpbmluZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY29uZmlndXJlZFJvdXRlLmZvdW5kQ29uZmlndXJhdGlvbikge1xuICAgICAgICAgICAgICAgIGluc3RydWN0aW9uLnBhdGggPSBpbnN0cnVjdGlvbi5pbnN0cnVjdGlvbi5zdGFydHNXaXRoKCcvJylcbiAgICAgICAgICAgICAgICAgICAgPyBpbnN0cnVjdGlvbi5pbnN0cnVjdGlvbi5zbGljZSgxKSA6IGluc3RydWN0aW9uLmluc3RydWN0aW9uO1xuICAgICAgICAgICAgICAgIGNvbmZpZ3VyZWRSb3V0ZVBhdGggPSBgJHtjb25maWd1cmVkUm91dGVQYXRoIHx8ICcnfSR7Y29uZmlndXJlZFJvdXRlLm1hdGNoaW5nfWA7XG4gICAgICAgICAgICAgICAgdGhpcy5yb290U2NvcGUucGF0aCA9IGNvbmZpZ3VyZWRSb3V0ZVBhdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBUT0RPOiBVc2VkIHRvIGhhdmUgYW4gZWFybHkgZXhpdCBpZiBubyBpbnN0cnVjdGlvbnMuIFJlc3RvcmUgaXQ/XG4gICAgICAgICAgICBjb25zdCBjbGVhclNjb3BlT3duZXJzID0gW107XG4gICAgICAgICAgICBsZXQgY2xlYXJWaWV3cG9ydFNjb3BlcyA9IFtdO1xuICAgICAgICAgICAgZm9yIChjb25zdCBjbGVhckluc3RydWN0aW9uIG9mIGluc3RydWN0aW9ucy5maWx0ZXIoaW5zdHIgPT4gdGhpcy5pbnN0cnVjdGlvblJlc29sdmVyLmlzQ2xlYXJBbGxWaWV3cG9ydHNJbnN0cnVjdGlvbihpbnN0cikpKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2NvcGUgPSBjbGVhckluc3RydWN0aW9uLnNjb3BlIHx8IHRoaXMucm9vdFNjb3BlLnNjb3BlO1xuICAgICAgICAgICAgICAgIGNsZWFyU2NvcGVPd25lcnMucHVzaCguLi5zY29wZS5jaGlsZHJlbi5maWx0ZXIoc2NvcGUgPT4gIXNjb3BlLm93bmVyLmlzRW1wdHkpLm1hcChzY29wZSA9PiBzY29wZS5vd25lcikpO1xuICAgICAgICAgICAgICAgIGlmIChzY29wZS52aWV3cG9ydFNjb3BlICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVmlld3BvcnRTY29wZXMucHVzaChzY29wZS52aWV3cG9ydFNjb3BlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbnN0cnVjdGlvbnMgPSBpbnN0cnVjdGlvbnMuZmlsdGVyKGluc3RyID0+ICF0aGlzLmluc3RydWN0aW9uUmVzb2x2ZXIuaXNDbGVhckFsbFZpZXdwb3J0c0luc3RydWN0aW9uKGluc3RyKSk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGFkZEluc3RydWN0aW9uIG9mIGluc3RydWN0aW9ucy5maWx0ZXIoaW5zdHIgPT4gdGhpcy5pbnN0cnVjdGlvblJlc29sdmVyLmlzQWRkQWxsVmlld3BvcnRzSW5zdHJ1Y3Rpb24oaW5zdHIpKSkge1xuICAgICAgICAgICAgICAgIGFkZEluc3RydWN0aW9uLnNldFZpZXdwb3J0KChhZGRJbnN0cnVjdGlvbi5zY29wZSB8fCB0aGlzLnJvb3RTY29wZS5zY29wZSkudmlld3BvcnRTY29wZS5uYW1lKTtcbiAgICAgICAgICAgICAgICBhZGRJbnN0cnVjdGlvbi5zY29wZSA9IGFkZEluc3RydWN0aW9uLnNjb3BlLm93bmluZ1Njb3BlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdXBkYXRlZFNjb3BlT3duZXJzID0gW107XG4gICAgICAgICAgICBjb25zdCBhbHJlYWR5Rm91bmRJbnN0cnVjdGlvbnMgPSBbXTtcbiAgICAgICAgICAgIC8vIFRPRE86IFRha2UgY2FyZSBvZiBjYW5jZWxsYXRpb25zIGRvd24gaW4gc3Vic2V0cy9pdGVyYXRpb25zXG4gICAgICAgICAgICBsZXQgeyBmb3VuZDogdmlld3BvcnRJbnN0cnVjdGlvbnMsIHJlbWFpbmluZzogcmVtYWluaW5nSW5zdHJ1Y3Rpb25zIH0gPSB0aGlzLmZpbmRWaWV3cG9ydHMoaW5zdHJ1Y3Rpb25zLCBhbHJlYWR5Rm91bmRJbnN0cnVjdGlvbnMpO1xuICAgICAgICAgICAgbGV0IGd1YXJkID0gMTAwO1xuICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgIGlmICghZ3VhcmQtLSkgeyAvLyBHdWFyZCBhZ2FpbnN0IGVuZGxlc3MgbG9vcFxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncmVtYWluaW5nSW5zdHJ1Y3Rpb25zJywgcmVtYWluaW5nSW5zdHJ1Y3Rpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgUmVwb3J0ZXIuZXJyb3IoMjAwMik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGNoYW5nZWRTY29wZU93bmVycyA9IFtdO1xuICAgICAgICAgICAgICAgIGNvbnN0IGhvb2tlZCA9IGF3YWl0IHRoaXMuaG9va01hbmFnZXIuaW52b2tlQmVmb3JlTmF2aWdhdGlvbih2aWV3cG9ydEluc3RydWN0aW9ucywgaW5zdHJ1Y3Rpb24pO1xuICAgICAgICAgICAgICAgIGlmIChob29rZWQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNhbmNlbE5hdmlnYXRpb24oWy4uLmNoYW5nZWRTY29wZU93bmVycywgLi4udXBkYXRlZFNjb3BlT3duZXJzXSwgaW5zdHJ1Y3Rpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmlld3BvcnRJbnN0cnVjdGlvbnMgPSBob29rZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgdmlld3BvcnRJbnN0cnVjdGlvbiBvZiB2aWV3cG9ydEluc3RydWN0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzY29wZU93bmVyID0gdmlld3BvcnRJbnN0cnVjdGlvbi5vd25lcjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNjb3BlT3duZXIgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlT3duZXIucGF0aCA9IGNvbmZpZ3VyZWRSb3V0ZVBhdGg7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2NvcGVPd25lci5zZXROZXh0Q29udGVudCh2aWV3cG9ydEluc3RydWN0aW9uLCBpbnN0cnVjdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VkU2NvcGVPd25lcnMucHVzaChzY29wZU93bmVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5UmVtb3ZlKGNsZWFyU2NvcGVPd25lcnMsIHZhbHVlID0+IHZhbHVlID09PSBzY29wZU93bmVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5pbnN0cnVjdGlvblJlc29sdmVyLmlzQ2xlYXJWaWV3cG9ydEluc3RydWN0aW9uKHZpZXdwb3J0SW5zdHJ1Y3Rpb24pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgdmlld3BvcnRJbnN0cnVjdGlvbi5zY29wZSAhPT0gbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICYmIHZpZXdwb3J0SW5zdHJ1Y3Rpb24uc2NvcGUucGFyZW50ICE9PSBudWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgdmlld3BvcnRJbnN0cnVjdGlvbi5zY29wZS5wYXJlbnQuaXNWaWV3cG9ydFNjb3BlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJyYXlSZW1vdmUoY2xlYXJWaWV3cG9ydFNjb3BlcywgdmFsdWUgPT4gdmFsdWUgPT09IHZpZXdwb3J0SW5zdHJ1Y3Rpb24uc2NvcGUucGFyZW50LnZpZXdwb3J0U2NvcGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwoY2hhbmdlZFNjb3BlT3duZXJzLm1hcCgodmFsdWUpID0+IHZhbHVlLmNhbkxlYXZlKCkpKTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0cy5zb21lKHJlc3VsdCA9PiByZXN1bHQgPT09IGZhbHNlKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jYW5jZWxOYXZpZ2F0aW9uKFsuLi5jaGFuZ2VkU2NvcGVPd25lcnMsIC4uLnVwZGF0ZWRTY29wZU93bmVyc10sIGluc3RydWN0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsKGNoYW5nZWRTY29wZU93bmVycy5tYXAoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhbkVudGVyID0gYXdhaXQgdmFsdWUuY2FuRW50ZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjYW5FbnRlciA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FuRW50ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUuZW50ZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmdvdG8oY2FuRW50ZXIsIHsgYXBwZW5kOiB0cnVlIH0pO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB2YWx1ZS5hYm9ydENvbnRlbnRDaGFuZ2UoKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogQWJvcnQgY29udGVudCBjaGFuZ2UgaW4gdGhlIHZpZXdwb3J0c1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdHMuc29tZShyZXN1bHQgPT4gcmVzdWx0ID09PSBmYWxzZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2FuY2VsTmF2aWdhdGlvbihbLi4uY2hhbmdlZFNjb3BlT3duZXJzLCAuLi51cGRhdGVkU2NvcGVPd25lcnNdLCBxSW5zdHJ1Y3Rpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHZpZXdwb3J0IG9mIGNoYW5nZWRTY29wZU93bmVycykge1xuICAgICAgICAgICAgICAgICAgICBpZiAodXBkYXRlZFNjb3BlT3duZXJzLmV2ZXJ5KHZhbHVlID0+IHZhbHVlICE9PSB2aWV3cG9ydCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRTY29wZU93bmVycy5wdXNoKHZpZXdwb3J0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBGaXggbXVsdGkgbGV2ZWwgcmVjdXJzaXZlbmVzcyFcbiAgICAgICAgICAgICAgICBhbHJlYWR5Rm91bmRJbnN0cnVjdGlvbnMucHVzaCguLi52aWV3cG9ydEluc3RydWN0aW9ucyk7XG4gICAgICAgICAgICAgICAgKHsgZm91bmQ6IHZpZXdwb3J0SW5zdHJ1Y3Rpb25zLCByZW1haW5pbmc6IHJlbWFpbmluZ0luc3RydWN0aW9ucyB9ID0gdGhpcy5maW5kVmlld3BvcnRzKHJlbWFpbmluZ0luc3RydWN0aW9ucywgYWxyZWFkeUZvdW5kSW5zdHJ1Y3Rpb25zKSk7XG4gICAgICAgICAgICAgICAgLy8gTG9vayBmb3IgY29uZmlndXJlZCBjaGlsZCByb3V0ZXMgKG9uY2Ugd2UndmUgbG9hZGVkIGV2ZXJ5dGhpbmcgc28gZmFyPylcbiAgICAgICAgICAgICAgICBpZiAoY29uZmlndXJlZFJvdXRlLmhhc1JlbWFpbmluZyAmJlxuICAgICAgICAgICAgICAgICAgICB2aWV3cG9ydEluc3RydWN0aW9ucy5sZW5ndGggPT09IDAgJiZcbiAgICAgICAgICAgICAgICAgICAgcmVtYWluaW5nSW5zdHJ1Y3Rpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgY29uZmlndXJlZCA9IG5ldyBGb3VuZFJvdXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJvdXRlU2NvcGVPd25lcnMgPSBhbHJlYWR5Rm91bmRJbnN0cnVjdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoaW5zdHIgPT4gaW5zdHIub3duZXIgIT09IG51bGwgJiYgaW5zdHIub3duZXIucGF0aCA9PT0gY29uZmlndXJlZFJvdXRlUGF0aClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoaW5zdHIgPT4gaW5zdHIub3duZXIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKCh2YWx1ZSwgaW5kZXgsIGFycikgPT4gYXJyLmluZGV4T2YodmFsdWUpID09PSBpbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgb3duZXIgb2Ygcm91dGVTY29wZU93bmVycykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlndXJlZCA9IGF3YWl0IHRoaXMuZmluZEluc3RydWN0aW9ucyhvd25lci5zY29wZSwgY29uZmlndXJlZFJvdXRlLnJlbWFpbmluZywgb3duZXIuc2NvcGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpZ3VyZWQuZm91bmRDb25maWd1cmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpZ3VyZWQuZm91bmRJbnN0cnVjdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyZWRSb3V0ZSA9IGNvbmZpZ3VyZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25maWd1cmVkUm91dGVQYXRoID0gYCR7Y29uZmlndXJlZFJvdXRlUGF0aCB8fCAnJ30vJHtjb25maWd1cmVkUm91dGUubWF0Y2hpbmd9YDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IERvIHNvbWV0aGluZyBoZXJlIVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51bmtub3duUm91dGUoY29uZmlndXJlZC5yZW1haW5pbmcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwZW5kSW5zdHJ1Y3Rpb25zKGNvbmZpZ3VyZWQuaW5zdHJ1Y3Rpb25zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gRG9uJ3QgdXNlIGRlZmF1bHRzIHdoZW4gaXQncyBhIGZ1bGwgc3RhdGUgbmF2aWdhdGlvblxuICAgICAgICAgICAgICAgIGlmIChmdWxsU3RhdGVJbnN0cnVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcGVuZGVkSW5zdHJ1Y3Rpb25zID0gdGhpcy5hcHBlbmRlZEluc3RydWN0aW9ucy5maWx0ZXIoaW5zdHJ1Y3Rpb24gPT4gIWluc3RydWN0aW9uLmRlZmF1bHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBQcm9jZXNzIG5vbi1kZWZhdWx0cyBmaXJzdFxuICAgICAgICAgICAgICAgIGxldCBhcHBlbmRlZEluc3RydWN0aW9ucyA9IHRoaXMuYXBwZW5kZWRJbnN0cnVjdGlvbnMuZmlsdGVyKGluc3RydWN0aW9uID0+ICFpbnN0cnVjdGlvbi5kZWZhdWx0KTtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcGVuZGVkSW5zdHJ1Y3Rpb25zID0gdGhpcy5hcHBlbmRlZEluc3RydWN0aW9ucy5maWx0ZXIoaW5zdHJ1Y3Rpb24gPT4gaW5zdHJ1Y3Rpb24uZGVmYXVsdCk7XG4gICAgICAgICAgICAgICAgaWYgKGFwcGVuZGVkSW5zdHJ1Y3Rpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuYXBwZW5kZWRJbnN0cnVjdGlvbnMuZmluZEluZGV4KGluc3RydWN0aW9uID0+IGluc3RydWN0aW9uLmRlZmF1bHQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXBwZW5kZWRJbnN0cnVjdGlvbnMgPSB0aGlzLmFwcGVuZGVkSW5zdHJ1Y3Rpb25zLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgd2hpbGUgKGFwcGVuZGVkSW5zdHJ1Y3Rpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXBwZW5kZWRJbnN0cnVjdGlvbiA9IGFwcGVuZGVkSW5zdHJ1Y3Rpb25zLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nQWxyZWFkeUZvdW5kID0gYWxyZWFkeUZvdW5kSW5zdHJ1Y3Rpb25zLnNvbWUoaW5zdHJ1Y3Rpb24gPT4gaW5zdHJ1Y3Rpb24uc2FtZVZpZXdwb3J0KGFwcGVuZGVkSW5zdHJ1Y3Rpb24pKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdGb3VuZCA9IHZpZXdwb3J0SW5zdHJ1Y3Rpb25zLmZpbmQodmFsdWUgPT4gdmFsdWUuc2FtZVZpZXdwb3J0KGFwcGVuZGVkSW5zdHJ1Y3Rpb24pKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdSZW1haW5pbmcgPSByZW1haW5pbmdJbnN0cnVjdGlvbnMuZmluZCh2YWx1ZSA9PiB2YWx1ZS5zYW1lVmlld3BvcnQoYXBwZW5kZWRJbnN0cnVjdGlvbikpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYXBwZW5kZWRJbnN0cnVjdGlvbi5kZWZhdWx0ICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAoZXhpc3RpbmdBbHJlYWR5Rm91bmQgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZXhpc3RpbmdGb3VuZCAhPT0gdm9pZCAwICYmICFleGlzdGluZ0ZvdW5kLmRlZmF1bHQpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKGV4aXN0aW5nUmVtYWluaW5nICE9PSB2b2lkIDAgJiYgIWV4aXN0aW5nUmVtYWluaW5nLmRlZmF1bHQpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nRm91bmQgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJyYXlSZW1vdmUodmlld3BvcnRJbnN0cnVjdGlvbnMsIHZhbHVlID0+IHZhbHVlID09PSBleGlzdGluZ0ZvdW5kKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmdSZW1haW5pbmcgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJyYXlSZW1vdmUocmVtYWluaW5nSW5zdHJ1Y3Rpb25zLCB2YWx1ZSA9PiB2YWx1ZSA9PT0gZXhpc3RpbmdSZW1haW5pbmcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChhcHBlbmRlZEluc3RydWN0aW9uLnZpZXdwb3J0ICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3cG9ydEluc3RydWN0aW9ucy5wdXNoKGFwcGVuZGVkSW5zdHJ1Y3Rpb24pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVtYWluaW5nSW5zdHJ1Y3Rpb25zLnB1c2goYXBwZW5kZWRJbnN0cnVjdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHZpZXdwb3J0SW5zdHJ1Y3Rpb25zLmxlbmd0aCA9PT0gMCAmJiByZW1haW5pbmdJbnN0cnVjdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHZpZXdwb3J0SW5zdHJ1Y3Rpb25zID0gY2xlYXJTY29wZU93bmVycy5tYXAob3duZXIgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5zdHJ1Y3Rpb24gPSB0aGlzLmNyZWF0ZVZpZXdwb3J0SW5zdHJ1Y3Rpb24odGhpcy5pbnN0cnVjdGlvblJlc29sdmVyLmNsZWFyVmlld3BvcnRJbnN0cnVjdGlvbiwgb3duZXIuaXNWaWV3cG9ydCA/IG93bmVyIDogdm9pZCAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvd25lci5pc1ZpZXdwb3J0U2NvcGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbi52aWV3cG9ydFNjb3BlID0gb3duZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaW5zdHJ1Y3Rpb247XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB2aWV3cG9ydEluc3RydWN0aW9ucy5wdXNoKC4uLmNsZWFyVmlld3BvcnRTY29wZXMubWFwKHZpZXdwb3J0U2NvcGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5zdHIgPSB0aGlzLmNyZWF0ZVZpZXdwb3J0SW5zdHJ1Y3Rpb24odGhpcy5pbnN0cnVjdGlvblJlc29sdmVyLmNsZWFyVmlld3BvcnRJbnN0cnVjdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0ci52aWV3cG9ydFNjb3BlID0gdmlld3BvcnRTY29wZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpbnN0cjtcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICBjbGVhclZpZXdwb3J0U2NvcGVzID0gW107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSB3aGlsZSAodmlld3BvcnRJbnN0cnVjdGlvbnMubGVuZ3RoID4gMCB8fCByZW1haW5pbmdJbnN0cnVjdGlvbnMubGVuZ3RoID4gMCk7XG4gICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh1cGRhdGVkU2NvcGVPd25lcnMubWFwKCh2YWx1ZSkgPT4gdmFsdWUubG9hZENvbnRlbnQoKSkpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5yZXBsYWNlUGF0aHMoaW5zdHJ1Y3Rpb24pO1xuICAgICAgICAgICAgLy8gdGhpcy51cGRhdGVOYXYoKTtcbiAgICAgICAgICAgIC8vIFJlbW92ZSBoaXN0b3J5IGVudHJ5IGlmIG5vIGhpc3Rvcnkgdmlld3BvcnRzIHVwZGF0ZWRcbiAgICAgICAgICAgIGlmIChpbnN0cnVjdGlvbk5hdmlnYXRpb24ubmV3ICYmICFpbnN0cnVjdGlvbk5hdmlnYXRpb24uZmlyc3QgJiYgIWluc3RydWN0aW9uLnJlcGVhdGluZyAmJiB1cGRhdGVkU2NvcGVPd25lcnMuZXZlcnkodmlld3BvcnQgPT4gdmlld3BvcnQub3B0aW9ucy5ub0hpc3RvcnkpKSB7XG4gICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb24udW50cmFja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVwZGF0ZWRTY29wZU93bmVycy5mb3JFYWNoKCh2aWV3cG9ydCkgPT4ge1xuICAgICAgICAgICAgICAgIHZpZXdwb3J0LmZpbmFsaXplQ29udGVudENoYW5nZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmxhc3ROYXZpZ2F0aW9uID0gdGhpcy5wcm9jZXNzaW5nTmF2aWdhdGlvbjtcbiAgICAgICAgICAgIGlmICh0aGlzLmxhc3ROYXZpZ2F0aW9uLnJlcGVhdGluZykge1xuICAgICAgICAgICAgICAgIHRoaXMubGFzdE5hdmlnYXRpb24ucmVwZWF0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnByb2Nlc3NpbmdOYXZpZ2F0aW9uID0gbnVsbDtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMubmF2aWdhdG9yLmZpbmFsaXplKGluc3RydWN0aW9uKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5ob29rTWFuYWdlciA9IG5ldyBIb29rTWFuYWdlcigpO1xuICAgIH1cbiAgICBnZXQgaXNOYXZpZ2F0aW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9jZXNzaW5nTmF2aWdhdGlvbiAhPT0gbnVsbDtcbiAgICB9XG4gICAgZ2V0IHN0YXRlZnVsSGlzdG9yeSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5zdGF0ZWZ1bEhpc3RvcnlMZW5ndGggIT09IHZvaWQgMCAmJiB0aGlzLm9wdGlvbnMuc3RhdGVmdWxIaXN0b3J5TGVuZ3RoID4gMDtcbiAgICB9XG4gICAgYWN0aXZhdGUob3B0aW9ucykge1xuICAgICAgICBpZiAodGhpcy5pc0FjdGl2ZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSb3V0ZXIgaGFzIGFscmVhZHkgYmVlbiBhY3RpdmF0ZWQnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmlzQWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0ge1xuICAgICAgICAgICAgLi4udGhpcy5vcHRpb25zLFxuICAgICAgICAgICAgLi4ub3B0aW9uc1xuICAgICAgICB9O1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmhvb2tzICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgIHRoaXMuYWRkSG9va3ModGhpcy5vcHRpb25zLmhvb2tzKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmluc3RydWN0aW9uUmVzb2x2ZXIuYWN0aXZhdGUoeyBzZXBhcmF0b3JzOiB0aGlzLm9wdGlvbnMuc2VwYXJhdG9ycyB9KTtcbiAgICAgICAgdGhpcy5uYXZpZ2F0b3IuYWN0aXZhdGUodGhpcywge1xuICAgICAgICAgICAgY2FsbGJhY2s6IHRoaXMubmF2aWdhdG9yQ2FsbGJhY2ssXG4gICAgICAgICAgICBzdG9yZTogdGhpcy5uYXZpZ2F0aW9uLFxuICAgICAgICAgICAgc3RhdGVmdWxIaXN0b3J5TGVuZ3RoOiB0aGlzLm9wdGlvbnMuc3RhdGVmdWxIaXN0b3J5TGVuZ3RoLFxuICAgICAgICAgICAgc2VyaWFsaXplQ2FsbGJhY2s6IHRoaXMuc3RhdGVmdWxIaXN0b3J5ID8gdGhpcy5uYXZpZ2F0b3JTZXJpYWxpemVDYWxsYmFjayA6IHZvaWQgMCxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubGlua0hhbmRsZXIuYWN0aXZhdGUoeyBjYWxsYmFjazogdGhpcy5saW5rQ2FsbGJhY2ssIHVzZUhyZWY6IHRoaXMub3B0aW9ucy51c2VIcmVmIH0pO1xuICAgICAgICB0aGlzLm5hdmlnYXRpb24uYWN0aXZhdGUoe1xuICAgICAgICAgICAgY2FsbGJhY2s6IHRoaXMuYnJvd3Nlck5hdmlnYXRvckNhbGxiYWNrLFxuICAgICAgICAgICAgdXNlVXJsRnJhZ21lbnRIYXNoOiB0aGlzLm9wdGlvbnMudXNlVXJsRnJhZ21lbnRIYXNoXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmVuc3VyZVJvb3RTY29wZSgpO1xuICAgIH1cbiAgICBhc3luYyBsb2FkVXJsKCkge1xuICAgICAgICBjb25zdCBlbnRyeSA9IHtcbiAgICAgICAgICAgIC4uLnRoaXMubmF2aWdhdGlvbi52aWV3ZXJTdGF0ZSxcbiAgICAgICAgICAgIC4uLntcbiAgICAgICAgICAgICAgICBmdWxsU3RhdGVJbnN0cnVjdGlvbjogJycsXG4gICAgICAgICAgICAgICAgcmVwbGFjaW5nOiB0cnVlLFxuICAgICAgICAgICAgICAgIGZyb21Ccm93c2VyOiBmYWxzZSxcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5uYXZpZ2F0b3IubmF2aWdhdGUoZW50cnkpO1xuICAgICAgICB0aGlzLmxvYWRlZEZpcnN0ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgZGVhY3RpdmF0ZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzQWN0aXZlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JvdXRlciBoYXMgbm90IGJlZW4gYWN0aXZhdGVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5saW5rSGFuZGxlci5kZWFjdGl2YXRlKCk7XG4gICAgICAgIHRoaXMubmF2aWdhdG9yLmRlYWN0aXZhdGUoKTtcbiAgICAgICAgdGhpcy5uYXZpZ2F0aW9uLmRlYWN0aXZhdGUoKTtcbiAgICB9XG4gICAgZmluZFNjb3BlKG9yaWdpbikge1xuICAgICAgICAvLyB0aGlzLmVuc3VyZVJvb3RTY29wZSgpO1xuICAgICAgICBpZiAob3JpZ2luID09PSB2b2lkIDAgfHwgb3JpZ2luID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yb290U2NvcGUuc2NvcGU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9yaWdpbiBpbnN0YW5jZW9mIFNjb3BlIHx8IG9yaWdpbiBpbnN0YW5jZW9mIFZpZXdwb3J0KSB7XG4gICAgICAgICAgICByZXR1cm4gb3JpZ2luLnNjb3BlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmdldENsb3Nlc3RTY29wZShvcmlnaW4pIHx8IHRoaXMucm9vdFNjb3BlLnNjb3BlO1xuICAgIH1cbiAgICBmaW5kUGFyZW50U2NvcGUoY29udGFpbmVyKSB7XG4gICAgICAgIGlmIChjb250YWluZXIgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJvb3RTY29wZS5zY29wZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBBbHJlYWR5IChwcmVtYXR1cmVseSkgc2V0IG9uIHRoaXMgdmlldyBtb2RlbCBzbyBnZXQgaXQgZnJvbSBjb250YWluZXIncyBwYXJlbnQgaW5zdGVhZFxuICAgICAgICBpZiAoY29udGFpbmVyLmhhcyhDbG9zZXN0U2NvcGUsIGZhbHNlKSkge1xuICAgICAgICAgICAgY29udGFpbmVyID0gY29udGFpbmVyLnBhcmVudDtcbiAgICAgICAgICAgIGlmIChjb250YWluZXIgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yb290U2NvcGUuc2NvcGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbnRhaW5lci5oYXMoQ2xvc2VzdFNjb3BlLCB0cnVlKSkge1xuICAgICAgICAgICAgcmV0dXJuIGNvbnRhaW5lci5nZXQoQ2xvc2VzdFNjb3BlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5yb290U2NvcGUuc2NvcGU7XG4gICAgfVxuICAgIC8vIEV4dGVybmFsIEFQSSB0byBnZXQgdmlld3BvcnQgYnkgbmFtZVxuICAgIGdldFZpZXdwb3J0KG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWxsVmlld3BvcnRzKCkuZmluZCh2aWV3cG9ydCA9PiB2aWV3cG9ydC5uYW1lID09PSBuYW1lKSB8fCBudWxsO1xuICAgIH1cbiAgICAvLyBDYWxsZWQgZnJvbSB0aGUgdmlld3BvcnQgc2NvcGUgY3VzdG9tIGVsZW1lbnQgaW4gY3JlYXRlZCgpXG4gICAgc2V0Q2xvc2VzdFNjb3BlKHZpZXdNb2RlbE9yQ29udGFpbmVyLCBzY29wZSkge1xuICAgICAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmdldENvbnRhaW5lcih2aWV3TW9kZWxPckNvbnRhaW5lcik7XG4gICAgICAgIFJlZ2lzdHJhdGlvbi5pbnN0YW5jZShDbG9zZXN0U2NvcGUsIHNjb3BlKS5yZWdpc3Rlcihjb250YWluZXIpO1xuICAgIH1cbiAgICBnZXRDbG9zZXN0U2NvcGUodmlld01vZGVsT3JFbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9ICdyZXNvdXJjZVJlc29sdmVycycgaW4gdmlld01vZGVsT3JFbGVtZW50XG4gICAgICAgICAgICA/IHZpZXdNb2RlbE9yRWxlbWVudFxuICAgICAgICAgICAgOiB0aGlzLmdldENsb3Nlc3RDb250YWluZXIodmlld01vZGVsT3JFbGVtZW50KTtcbiAgICAgICAgaWYgKGNvbnRhaW5lciA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFjb250YWluZXIuaGFzKENsb3Nlc3RTY29wZSwgdHJ1ZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb250YWluZXIuZ2V0KENsb3Nlc3RTY29wZSkgfHwgbnVsbDtcbiAgICB9XG4gICAgdW5zZXRDbG9zZXN0U2NvcGUodmlld01vZGVsT3JDb250YWluZXIpIHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5nZXRDb250YWluZXIodmlld01vZGVsT3JDb250YWluZXIpO1xuICAgICAgICAvLyBUT0RPOiBHZXQgYW4gJ3VucmVnaXN0ZXInIG9uIGNvbnRhaW5lclxuICAgICAgICBjb250YWluZXIucmVzb2x2ZXJzLmRlbGV0ZShDbG9zZXN0U2NvcGUpO1xuICAgIH1cbiAgICAvLyBDYWxsZWQgZnJvbSB0aGUgdmlld3BvcnQgY3VzdG9tIGVsZW1lbnQgaW4gYXR0YWNoZWQoKVxuICAgIGNvbm5lY3RWaWV3cG9ydCh2aWV3cG9ydCwgY29udGFpbmVyLCBuYW1lLCBlbGVtZW50LCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHBhcmVudFNjb3BlID0gdGhpcy5maW5kUGFyZW50U2NvcGUoY29udGFpbmVyKTtcbiAgICAgICAgaWYgKHZpZXdwb3J0ID09PSBudWxsKSB7XG4gICAgICAgICAgICB2aWV3cG9ydCA9IHBhcmVudFNjb3BlLmFkZFZpZXdwb3J0KG5hbWUsIGVsZW1lbnQsIGNvbnRhaW5lciwgb3B0aW9ucyk7XG4gICAgICAgICAgICB0aGlzLnNldENsb3Nlc3RTY29wZShjb250YWluZXIsIHZpZXdwb3J0LmNvbm5lY3RlZFNjb3BlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmlld3BvcnQ7XG4gICAgfVxuICAgIC8vIENhbGxlZCBmcm9tIHRoZSB2aWV3cG9ydCBjdXN0b20gZWxlbWVudFxuICAgIGRpc2Nvbm5lY3RWaWV3cG9ydCh2aWV3cG9ydCwgY29udGFpbmVyLCBlbGVtZW50KSB7XG4gICAgICAgIGlmICghdmlld3BvcnQuY29ubmVjdGVkU2NvcGUucGFyZW50LnJlbW92ZVZpZXdwb3J0KHZpZXdwb3J0LCBlbGVtZW50LCBjb250YWluZXIpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byByZW1vdmUgdmlld3BvcnQ6ICR7dmlld3BvcnQubmFtZX1gKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnVuc2V0Q2xvc2VzdFNjb3BlKGNvbnRhaW5lcik7XG4gICAgfVxuICAgIC8vIENhbGxlZCBmcm9tIHRoZSB2aWV3cG9ydCBzY29wZSBjdXN0b20gZWxlbWVudCBpbiBhdHRhY2hlZCgpXG4gICAgY29ubmVjdFZpZXdwb3J0U2NvcGUodmlld3BvcnRTY29wZSwgbmFtZSwgY29udGFpbmVyLCBlbGVtZW50LCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHBhcmVudFNjb3BlID0gdGhpcy5maW5kUGFyZW50U2NvcGUoY29udGFpbmVyKTtcbiAgICAgICAgaWYgKHZpZXdwb3J0U2NvcGUgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHZpZXdwb3J0U2NvcGUgPSBwYXJlbnRTY29wZS5hZGRWaWV3cG9ydFNjb3BlKG5hbWUsIGVsZW1lbnQsIG9wdGlvbnMpO1xuICAgICAgICAgICAgdGhpcy5zZXRDbG9zZXN0U2NvcGUoY29udGFpbmVyLCB2aWV3cG9ydFNjb3BlLmNvbm5lY3RlZFNjb3BlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmlld3BvcnRTY29wZTtcbiAgICB9XG4gICAgLy8gQ2FsbGVkIGZyb20gdGhlIHZpZXdwb3J0IHNjb3BlIGN1c3RvbSBlbGVtZW50XG4gICAgZGlzY29ubmVjdFZpZXdwb3J0U2NvcGUodmlld3BvcnRTY29wZSwgY29udGFpbmVyKSB7XG4gICAgICAgIGlmICghdmlld3BvcnRTY29wZS5jb25uZWN0ZWRTY29wZS5wYXJlbnQucmVtb3ZlVmlld3BvcnRTY29wZSh2aWV3cG9ydFNjb3BlKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gcmVtb3ZlIHZpZXdwb3J0IHNjb3BlOiAke3ZpZXdwb3J0U2NvcGUucGF0aH1gKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnVuc2V0Q2xvc2VzdFNjb3BlKGNvbnRhaW5lcik7XG4gICAgfVxuICAgIGFsbFZpZXdwb3J0cyhpbmNsdWRlRGlzYWJsZWQgPSBmYWxzZSwgaW5jbHVkZVJlcGxhY2VkID0gZmFsc2UpIHtcbiAgICAgICAgLy8gdGhpcy5lbnN1cmVSb290U2NvcGUoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdFNjb3BlLnNjb3BlLmFsbFZpZXdwb3J0cyhpbmNsdWRlRGlzYWJsZWQsIGluY2x1ZGVSZXBsYWNlZCk7XG4gICAgfVxuICAgIGdvdG8oaW5zdHJ1Y3Rpb25zLCBvcHRpb25zKSB7XG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICAvLyBUT0RPOiBSZXZpZXcgcXVlcnkgZXh0cmFjdGlvbjsgZGlmZmVyZW50IHBvcyBmb3IgcGF0aCBhbmQgZnJhZ21lbnQhXG4gICAgICAgIGlmICh0eXBlb2YgaW5zdHJ1Y3Rpb25zID09PSAnc3RyaW5nJyAmJiAhb3B0aW9ucy5xdWVyeSkge1xuICAgICAgICAgICAgY29uc3QgW3BhdGgsIHNlYXJjaF0gPSBpbnN0cnVjdGlvbnMuc3BsaXQoJz8nKTtcbiAgICAgICAgICAgIGluc3RydWN0aW9ucyA9IHBhdGg7XG4gICAgICAgICAgICBvcHRpb25zLnF1ZXJ5ID0gc2VhcmNoO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRvT3B0aW9ucyA9IHt9O1xuICAgICAgICBpZiAob3B0aW9ucy5vcmlnaW4pIHtcbiAgICAgICAgICAgIHRvT3B0aW9ucy5jb250ZXh0ID0gb3B0aW9ucy5vcmlnaW47XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHNjb3BlID0gbnVsbDtcbiAgICAgICAgKHsgaW5zdHJ1Y3Rpb25zLCBzY29wZSB9ID0gTmF2aWdhdGlvbkluc3RydWN0aW9uUmVzb2x2ZXIuY3JlYXRlVmlld3BvcnRJbnN0cnVjdGlvbnModGhpcywgaW5zdHJ1Y3Rpb25zLCB0b09wdGlvbnMpKTtcbiAgICAgICAgaWYgKG9wdGlvbnMuYXBwZW5kICYmIHRoaXMucHJvY2Vzc2luZ05hdmlnYXRpb24pIHtcbiAgICAgICAgICAgIGluc3RydWN0aW9ucyA9IE5hdmlnYXRpb25JbnN0cnVjdGlvblJlc29sdmVyLnRvVmlld3BvcnRJbnN0cnVjdGlvbnModGhpcywgaW5zdHJ1Y3Rpb25zKTtcbiAgICAgICAgICAgIHRoaXMuYXBwZW5kSW5zdHJ1Y3Rpb25zKGluc3RydWN0aW9ucywgc2NvcGUpO1xuICAgICAgICAgICAgLy8gQ2FuJ3QgcmV0dXJuIGN1cnJlbnQgbmF2aWdhdGlvbiBwcm9taXNlIHNpbmNlIGl0IGNhbiBsZWFkIHRvIGRlYWRsb2NrIGluIGVudGVyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZW50cnkgPSB7XG4gICAgICAgICAgICBpbnN0cnVjdGlvbjogaW5zdHJ1Y3Rpb25zLFxuICAgICAgICAgICAgZnVsbFN0YXRlSW5zdHJ1Y3Rpb246ICcnLFxuICAgICAgICAgICAgc2NvcGU6IHNjb3BlLFxuICAgICAgICAgICAgdGl0bGU6IG9wdGlvbnMudGl0bGUsXG4gICAgICAgICAgICBkYXRhOiBvcHRpb25zLmRhdGEsXG4gICAgICAgICAgICBxdWVyeTogb3B0aW9ucy5xdWVyeSxcbiAgICAgICAgICAgIHJlcGxhY2luZzogb3B0aW9ucy5yZXBsYWNlLFxuICAgICAgICAgICAgcmVwZWF0aW5nOiBvcHRpb25zLmFwcGVuZCxcbiAgICAgICAgICAgIGZyb21Ccm93c2VyOiBmYWxzZSxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMubmF2aWdhdG9yLm5hdmlnYXRlKGVudHJ5KTtcbiAgICB9XG4gICAgcmVmcmVzaCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubmF2aWdhdG9yLnJlZnJlc2goKTtcbiAgICB9XG4gICAgYmFjaygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubmF2aWdhdG9yLmdvKC0xKTtcbiAgICB9XG4gICAgZm9yd2FyZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubmF2aWdhdG9yLmdvKDEpO1xuICAgIH1cbiAgICBjaGVja0FjdGl2ZShpbnN0cnVjdGlvbnMpIHtcbiAgICAgICAgZm9yIChjb25zdCBpbnN0cnVjdGlvbiBvZiBpbnN0cnVjdGlvbnMpIHtcbiAgICAgICAgICAgIGNvbnN0IHNjb3BlSW5zdHJ1Y3Rpb25zID0gdGhpcy5pbnN0cnVjdGlvblJlc29sdmVyLm1hdGNoU2NvcGUodGhpcy5hY3RpdmVDb21wb25lbnRzLCBpbnN0cnVjdGlvbi5zY29wZSk7XG4gICAgICAgICAgICBjb25zdCBtYXRjaGluZyA9IHNjb3BlSW5zdHJ1Y3Rpb25zLmZpbHRlcihpbnN0ciA9PiBpbnN0ci5zYW1lQ29tcG9uZW50KGluc3RydWN0aW9uLCB0cnVlKSk7XG4gICAgICAgICAgICBpZiAobWF0Y2hpbmcubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoaW5zdHJ1Y3Rpb24ubmV4dFNjb3BlSW5zdHJ1Y3Rpb25zKVxuICAgICAgICAgICAgICAgICYmIGluc3RydWN0aW9uLm5leHRTY29wZUluc3RydWN0aW9ucy5sZW5ndGggPiAwXG4gICAgICAgICAgICAgICAgJiYgdGhpcy5pbnN0cnVjdGlvblJlc29sdmVyLm1hdGNoQ2hpbGRyZW4oaW5zdHJ1Y3Rpb24ubmV4dFNjb3BlSW5zdHJ1Y3Rpb25zLCBtYXRjaGluZy5tYXAoaW5zdHIgPT4gQXJyYXkuaXNBcnJheShpbnN0ci5uZXh0U2NvcGVJbnN0cnVjdGlvbnMpID8gaW5zdHIubmV4dFNjb3BlSW5zdHJ1Y3Rpb25zIDogW10pLmZsYXQoKSkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBzZXROYXYobmFtZSwgcm91dGVzLCBjbGFzc2VzKSB7XG4gICAgICAgIGNvbnN0IG5hdiA9IHRoaXMuZmluZE5hdihuYW1lKTtcbiAgICAgICAgaWYgKG5hdiAhPT0gdm9pZCAwICYmIG5hdiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbmF2LnJvdXRlcyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYWRkTmF2KG5hbWUsIHJvdXRlcywgY2xhc3Nlcyk7XG4gICAgfVxuICAgIGFkZE5hdihuYW1lLCByb3V0ZXMsIGNsYXNzZXMpIHtcbiAgICAgICAgbGV0IG5hdiA9IHRoaXMubmF2c1tuYW1lXTtcbiAgICAgICAgaWYgKG5hdiA9PT0gdm9pZCAwIHx8IG5hdiA9PT0gbnVsbCkge1xuICAgICAgICAgICAgbmF2ID0gdGhpcy5uYXZzW25hbWVdID0gbmV3IE5hdih0aGlzLCBuYW1lLCBbXSwgY2xhc3Nlcyk7XG4gICAgICAgIH1cbiAgICAgICAgbmF2LmFkZFJvdXRlcyhyb3V0ZXMpO1xuICAgICAgICBuYXYudXBkYXRlKCk7XG4gICAgfVxuICAgIHVwZGF0ZU5hdihuYW1lKSB7XG4gICAgICAgIGNvbnN0IG5hdnMgPSBuYW1lXG4gICAgICAgICAgICA/IFtuYW1lXVxuICAgICAgICAgICAgOiBPYmplY3Qua2V5cyh0aGlzLm5hdnMpO1xuICAgICAgICBmb3IgKGNvbnN0IG5hdiBvZiBuYXZzKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5uYXZzW25hdl0gIT09IHZvaWQgMCAmJiB0aGlzLm5hdnNbbmF2XSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMubmF2c1tuYXZdLnVwZGF0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGZpbmROYXYobmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5uYXZzW25hbWVdO1xuICAgIH1cbiAgICBhZGRSb3V0ZXMocm91dGVzLCBjb250ZXh0KSB7XG4gICAgICAgIC8vIFRPRE86IFRoaXMgc2hvdWxkIGFkZCB0byB0aGUgY29udGV4dCBpbnN0ZWFkXG4gICAgICAgIC8vIFRPRE86IEFkZCByb3V0ZXMgd2l0aG91dCBjb250ZXh0IHRvIHJvb3RTY29wZSBjb250ZW50ICh3aGljaCBuZWVkcyB0byBiZSBjcmVhdGVkKT9cbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAvLyBjb25zdCB2aWV3cG9ydCA9IChjb250ZXh0ICE9PSB2b2lkIDAgPyB0aGlzLmNsb3Nlc3RWaWV3cG9ydChjb250ZXh0KSA6IHRoaXMucm9vdFNjb3BlKSB8fCB0aGlzLnJvb3RTY29wZSBhcyBWaWV3cG9ydDtcbiAgICAgICAgLy8gcmV0dXJuIHZpZXdwb3J0LmFkZFJvdXRlcyhyb3V0ZXMpO1xuICAgIH1cbiAgICByZW1vdmVSb3V0ZXMocm91dGVzLCBjb250ZXh0KSB7XG4gICAgICAgIC8vIFRPRE86IFRoaXMgc2hvdWxkIHJlbW92ZSBmcm9tIHRoZSBjb250ZXh0IGluc3RlYWRcbiAgICAgICAgLy8gY29uc3Qgdmlld3BvcnQgPSAoY29udGV4dCAhPT0gdm9pZCAwID8gdGhpcy5jbG9zZXN0Vmlld3BvcnQoY29udGV4dCkgOiB0aGlzLnJvb3RTY29wZSkgfHwgdGhpcy5yb290U2NvcGUgYXMgVmlld3BvcnQ7XG4gICAgICAgIC8vIHJldHVybiB2aWV3cG9ydC5yZW1vdmVSb3V0ZXMocm91dGVzKTtcbiAgICB9XG4gICAgYWRkSG9va3MoaG9va3MpIHtcbiAgICAgICAgcmV0dXJuIGhvb2tzLm1hcChob29rID0+IHRoaXMuYWRkSG9vayhob29rLmhvb2ssIGhvb2sub3B0aW9ucykpO1xuICAgIH1cbiAgICBhZGRIb29rKGhvb2ssIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaG9va01hbmFnZXIuYWRkSG9vayhob29rLCBvcHRpb25zKTtcbiAgICB9XG4gICAgcmVtb3ZlSG9va3MoaG9va3MpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjcmVhdGVWaWV3cG9ydEluc3RydWN0aW9uKGNvbXBvbmVudCwgdmlld3BvcnQsIHBhcmFtZXRlcnMsIG93bnNTY29wZSA9IHRydWUsIG5leHRTY29wZUluc3RydWN0aW9ucyA9IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdHJ1Y3Rpb25SZXNvbHZlci5jcmVhdGVWaWV3cG9ydEluc3RydWN0aW9uKGNvbXBvbmVudCwgdmlld3BvcnQsIHBhcmFtZXRlcnMsIG93bnNTY29wZSwgbmV4dFNjb3BlSW5zdHJ1Y3Rpb25zKTtcbiAgICB9XG4gICAgYXN5bmMgZmluZEluc3RydWN0aW9ucyhzY29wZSwgaW5zdHJ1Y3Rpb24sIGluc3RydWN0aW9uU2NvcGUsIHRyYW5zZm9ybVVybCA9IGZhbHNlKSB7XG4gICAgICAgIGxldCByb3V0ZSA9IG5ldyBGb3VuZFJvdXRlKCk7XG4gICAgICAgIGlmICh0eXBlb2YgaW5zdHJ1Y3Rpb24gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBpbnN0cnVjdGlvbiA9IHRyYW5zZm9ybVVybFxuICAgICAgICAgICAgICAgID8gYXdhaXQgdGhpcy5ob29rTWFuYWdlci5pbnZva2VUcmFuc2Zvcm1Gcm9tVXJsKGluc3RydWN0aW9uLCB0aGlzLnByb2Nlc3NpbmdOYXZpZ2F0aW9uKVxuICAgICAgICAgICAgICAgIDogaW5zdHJ1Y3Rpb247XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShpbnN0cnVjdGlvbikpIHtcbiAgICAgICAgICAgICAgICByb3V0ZS5pbnN0cnVjdGlvbnMgPSBpbnN0cnVjdGlvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIFRPRE86IFJldmlldyB0aGlzXG4gICAgICAgICAgICAgICAgaWYgKGluc3RydWN0aW9uID09PSAnLycpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb24gPSAnJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgaW5zdHJ1Y3Rpb25zID0gdGhpcy5pbnN0cnVjdGlvblJlc29sdmVyLnBhcnNlVmlld3BvcnRJbnN0cnVjdGlvbnMoaW5zdHJ1Y3Rpb24pO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMudXNlQ29uZmlndXJlZFJvdXRlcyAmJiAhdGhpcy5oYXNTaWJsaW5nSW5zdHJ1Y3Rpb25zKGluc3RydWN0aW9ucykpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZm91bmRSb3V0ZSA9IHNjb3BlLmZpbmRNYXRjaGluZ1JvdXRlKGluc3RydWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZvdW5kUm91dGUgIT09IG51bGwgJiYgZm91bmRSb3V0ZS5mb3VuZENvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvdXRlID0gZm91bmRSb3V0ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMudXNlRGlyZWN0Um91dGVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm91dGUuaW5zdHJ1Y3Rpb25zID0gaW5zdHJ1Y3Rpb25zO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyb3V0ZS5pbnN0cnVjdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXh0SW5zdHJ1Y3Rpb25zID0gcm91dGUuaW5zdHJ1Y3Rpb25zWzBdLm5leHRTY29wZUluc3RydWN0aW9ucyB8fCBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm91dGUucmVtYWluaW5nID0gdGhpcy5pbnN0cnVjdGlvblJlc29sdmVyLnN0cmluZ2lmeVZpZXdwb3J0SW5zdHJ1Y3Rpb25zKG5leHRJbnN0cnVjdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3V0ZS5pbnN0cnVjdGlvbnNbMF0ubmV4dFNjb3BlSW5zdHJ1Y3Rpb25zID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5vcHRpb25zLnVzZURpcmVjdFJvdXRlcykge1xuICAgICAgICAgICAgICAgICAgICByb3V0ZS5pbnN0cnVjdGlvbnMgPSBpbnN0cnVjdGlvbnM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcm91dGUuaW5zdHJ1Y3Rpb25zID0gaW5zdHJ1Y3Rpb247XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBpbnN0ciBvZiByb3V0ZS5pbnN0cnVjdGlvbnMpIHtcbiAgICAgICAgICAgIGlmIChpbnN0ci5zY29wZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGluc3RyLnNjb3BlID0gaW5zdHJ1Y3Rpb25TY29wZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcm91dGU7XG4gICAgfVxuICAgIGhhc1NpYmxpbmdJbnN0cnVjdGlvbnMoaW5zdHJ1Y3Rpb25zKSB7XG4gICAgICAgIGlmIChpbnN0cnVjdGlvbnMgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5zdHJ1Y3Rpb25zLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbnN0cnVjdGlvbnMuc29tZShpbnN0cnVjdGlvbiA9PiB0aGlzLmhhc1NpYmxpbmdJbnN0cnVjdGlvbnMoaW5zdHJ1Y3Rpb24ubmV4dFNjb3BlSW5zdHJ1Y3Rpb25zKSk7XG4gICAgfVxuICAgIGFwcGVuZEluc3RydWN0aW9ucyhpbnN0cnVjdGlvbnMsIHNjb3BlID0gbnVsbCkge1xuICAgICAgICBpZiAoc2NvcGUgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHNjb3BlID0gdGhpcy5yb290U2NvcGUuc2NvcGU7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBpbnN0cnVjdGlvbiBvZiBpbnN0cnVjdGlvbnMpIHtcbiAgICAgICAgICAgIGlmIChpbnN0cnVjdGlvbi5zY29wZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGluc3RydWN0aW9uLnNjb3BlID0gc2NvcGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hcHBlbmRlZEluc3RydWN0aW9ucy5wdXNoKC4uLmluc3RydWN0aW9ucyk7XG4gICAgfVxuICAgIGNoZWNrU3RhbGUobmFtZSwgaW5zdHJ1Y3Rpb25zKSB7XG4gICAgICAgIGNvbnN0IHN0YWxlQ2hlY2sgPSB0aGlzLnN0YWxlQ2hlY2tzW25hbWVdO1xuICAgICAgICBpZiAoc3RhbGVDaGVjayA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICB0aGlzLnN0YWxlQ2hlY2tzW25hbWVdID0gaW5zdHJ1Y3Rpb25zLnNsaWNlKCk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0YWxlQ2hlY2subGVuZ3RoICE9PSBpbnN0cnVjdGlvbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLnN0YWxlQ2hlY2tzW25hbWVdID0gaW5zdHJ1Y3Rpb25zLnNsaWNlKCk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGlpID0gaW5zdHJ1Y3Rpb25zLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChzdGFsZUNoZWNrW2ldICE9PSBpbnN0cnVjdGlvbnNbaV0pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YWxlQ2hlY2tzW25hbWVdID0gaW5zdHJ1Y3Rpb25zLnNsaWNlKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICB1bmtub3duUm91dGUocm91dGUpIHtcbiAgICAgICAgaWYgKHR5cGVvZiByb3V0ZSAhPT0gJ3N0cmluZycgfHwgcm91dGUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy51c2VDb25maWd1cmVkUm91dGVzICYmIHRoaXMub3B0aW9ucy51c2VEaXJlY3RSb3V0ZXMpIHtcbiAgICAgICAgICAgIC8vIFRPRE86IEFkZCBtaXNzaW5nL3Vua25vd24gcm91dGUgaGFuZGxpbmdcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgTm8gbWF0Y2hpbmcgY29uZmlndXJlZCByb3V0ZSBvciBjb21wb25lbnQgZm91bmQgZm9yICcke3JvdXRlfSdgKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLm9wdGlvbnMudXNlQ29uZmlndXJlZFJvdXRlcykge1xuICAgICAgICAgICAgLy8gVE9ETzogQWRkIG1pc3NpbmcvdW5rbm93biByb3V0ZSBoYW5kbGluZ1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBObyBtYXRjaGluZyBjb25maWd1cmVkIHJvdXRlIGZvdW5kIGZvciAnJHtyb3V0ZX0nYCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBUT0RPOiBBZGQgbWlzc2luZy91bmtub3duIHJvdXRlIGhhbmRsaW5nXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE5vIG1hdGNoaW5nIHJvdXRlL2NvbXBvbmVudCBmb3VuZCBmb3IgJyR7cm91dGV9J2ApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZpbmRWaWV3cG9ydHMoaW5zdHJ1Y3Rpb25zLCBhbHJlYWR5Rm91bmQsIHdpdGhvdXRWaWV3cG9ydHMgPSBmYWxzZSkge1xuICAgICAgICBjb25zdCBmb3VuZCA9IFtdO1xuICAgICAgICBjb25zdCByZW1haW5pbmcgPSBbXTtcbiAgICAgICAgd2hpbGUgKGluc3RydWN0aW9ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGlmIChpbnN0cnVjdGlvbnNbMF0uc2NvcGUgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbnNbMF0uc2NvcGUgPSB0aGlzLnJvb3RTY29wZS5zY29wZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHNjb3BlID0gaW5zdHJ1Y3Rpb25zWzBdLnNjb3BlO1xuICAgICAgICAgICAgY29uc3QgeyBmb3VuZFZpZXdwb3J0cywgcmVtYWluaW5nSW5zdHJ1Y3Rpb25zIH0gPSBzY29wZS5maW5kVmlld3BvcnRzKGluc3RydWN0aW9ucy5maWx0ZXIoaW5zdHJ1Y3Rpb24gPT4gaW5zdHJ1Y3Rpb24uc2NvcGUgPT09IHNjb3BlKSwgYWxyZWFkeUZvdW5kLCB3aXRob3V0Vmlld3BvcnRzKTtcbiAgICAgICAgICAgIGZvdW5kLnB1c2goLi4uZm91bmRWaWV3cG9ydHMpO1xuICAgICAgICAgICAgcmVtYWluaW5nLnB1c2goLi4ucmVtYWluaW5nSW5zdHJ1Y3Rpb25zKTtcbiAgICAgICAgICAgIGluc3RydWN0aW9ucyA9IGluc3RydWN0aW9ucy5maWx0ZXIoaW5zdHJ1Y3Rpb24gPT4gaW5zdHJ1Y3Rpb24uc2NvcGUgIT09IHNjb3BlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBmb3VuZDogZm91bmQuc2xpY2UoKSwgcmVtYWluaW5nIH07XG4gICAgfVxuICAgIGFzeW5jIGNhbmNlbE5hdmlnYXRpb24odXBkYXRlZFNjb3BlT3duZXJzLCBxSW5zdHJ1Y3Rpb24pIHtcbiAgICAgICAgLy8gVE9ETzogVGFrZSBjYXJlIG9mIGRpc2FibGluZyB2aWV3cG9ydHMgd2hlbiBjYW5jZWxsaW5nIGFuZCBzdGF0ZWZ1bCFcbiAgICAgICAgdXBkYXRlZFNjb3BlT3duZXJzLmZvckVhY2goKHZpZXdwb3J0KSA9PiB7XG4gICAgICAgICAgICB2aWV3cG9ydC5hYm9ydENvbnRlbnRDaGFuZ2UoKS5jYXRjaChlcnJvciA9PiB7IHRocm93IGVycm9yOyB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHRoaXMubmF2aWdhdG9yLmNhbmNlbChxSW5zdHJ1Y3Rpb24pO1xuICAgICAgICB0aGlzLnByb2Nlc3NpbmdOYXZpZ2F0aW9uID0gbnVsbDtcbiAgICAgICAgcUluc3RydWN0aW9uLnJlc29sdmUoKTtcbiAgICB9XG4gICAgZW5zdXJlUm9vdFNjb3BlKCkge1xuICAgICAgICBpZiAoIXRoaXMucm9vdFNjb3BlKSB7XG4gICAgICAgICAgICBjb25zdCByb290ID0gdGhpcy5jb250YWluZXIuZ2V0KEF1cmVsaWEpLnJvb3Q7XG4gICAgICAgICAgICAvLyByb290LmNvbmZpZy5jb21wb25lbnQgc2hvdWxkbid0IGJlIHVzZWQgaW4gdGhlIGVuZC4gTWV0YWRhdGEgd2lsbCBwcm9iYWJseSBlbGltaW5hdGUgaXRcbiAgICAgICAgICAgIHRoaXMucm9vdFNjb3BlID0gbmV3IFZpZXdwb3J0U2NvcGUoJ3Jvb3RTY29wZScsIHRoaXMsIHJvb3QuY29uZmlnLmhvc3QsIG51bGwsIHRydWUsIHJvb3QuY29uZmlnLmNvbXBvbmVudCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdFNjb3BlO1xuICAgIH1cbiAgICBhc3luYyByZXBsYWNlUGF0aHMoaW5zdHJ1Y3Rpb24pIHtcbiAgICAgICAgdGhpcy5yb290U2NvcGUuc2NvcGUucmVwYXJlbnRWaWV3cG9ydEluc3RydWN0aW9ucygpO1xuICAgICAgICBsZXQgaW5zdHJ1Y3Rpb25zID0gdGhpcy5yb290U2NvcGUuc2NvcGUuaG9pc3RlZENoaWxkcmVuXG4gICAgICAgICAgICAuZmlsdGVyKHNjb3BlID0+IHNjb3BlLnZpZXdwb3J0SW5zdHJ1Y3Rpb24gIT09IG51bGwgJiYgIXNjb3BlLnZpZXdwb3J0SW5zdHJ1Y3Rpb24uaXNFbXB0eSgpKVxuICAgICAgICAgICAgLm1hcChzY29wZSA9PiBzY29wZS52aWV3cG9ydEluc3RydWN0aW9uKTtcbiAgICAgICAgaW5zdHJ1Y3Rpb25zID0gdGhpcy5pbnN0cnVjdGlvblJlc29sdmVyLmNsb25lVmlld3BvcnRJbnN0cnVjdGlvbnMoaW5zdHJ1Y3Rpb25zLCB0cnVlKTtcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBtYWtlcyBzdXJlIHJpZ2h0IHZpZXdwb3J0L3ZpZXdwb3J0IHNjb3BlcyBhcmUgc2V0IGFuZCB1cGRhdGVcbiAgICAgICAgLy8gd2hldGhlciB2aWV3cG9ydCBuYW1lIGlzIG5lY2Vzc2FyeSBvciBub3RcbiAgICAgICAgY29uc3QgYWxyZWFkeUZvdW5kID0gW107XG4gICAgICAgIGxldCB7IGZvdW5kLCByZW1haW5pbmcgfSA9IHRoaXMuZmluZFZpZXdwb3J0cyhpbnN0cnVjdGlvbnMsIGFscmVhZHlGb3VuZCwgdHJ1ZSk7XG4gICAgICAgIGxldCBndWFyZCA9IDEwMDtcbiAgICAgICAgd2hpbGUgKHJlbWFpbmluZy5sZW5ndGgpIHtcbiAgICAgICAgICAgIC8vIEd1YXJkIGFnYWluc3QgZW5kbGVzcyBsb29wXG4gICAgICAgICAgICBpZiAoIWd1YXJkLS0pIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBmaW5kIHZpZXdwb3J0IHdoZW4gdXBkYXRpbmcgdmlld2VyIHBhdGhzLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYWxyZWFkeUZvdW5kLnB1c2goLi4uZm91bmQpO1xuICAgICAgICAgICAgKHsgZm91bmQsIHJlbWFpbmluZyB9ID0gdGhpcy5maW5kVmlld3BvcnRzKHJlbWFpbmluZywgYWxyZWFkeUZvdW5kLCB0cnVlKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hY3RpdmVDb21wb25lbnRzID0gaW5zdHJ1Y3Rpb25zO1xuICAgICAgICB0aGlzLmFjdGl2ZVJvdXRlID0gaW5zdHJ1Y3Rpb24ucm91dGU7XG4gICAgICAgIC8vIEZpcnN0IGludm9rZSB3aXRoIHZpZXdwb3J0IGluc3RydWN0aW9ucyAoc2hvdWxkIGl0IHBlcmhhcHMgZ2V0IGZ1bGwgc3RhdGU/KVxuICAgICAgICBsZXQgc3RhdGUgPSBhd2FpdCB0aGlzLmhvb2tNYW5hZ2VyLmludm9rZVRyYW5zZm9ybVRvVXJsKGluc3RydWN0aW9ucywgaW5zdHJ1Y3Rpb24pO1xuICAgICAgICBpZiAodHlwZW9mIHN0YXRlICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgLy8gQ29udmVydCB0byBzdHJpbmcgaWYgbmVjZXNzYXJ5XG4gICAgICAgICAgICBzdGF0ZSA9IHRoaXMuaW5zdHJ1Y3Rpb25SZXNvbHZlci5zdHJpbmdpZnlWaWV3cG9ydEluc3RydWN0aW9ucyhzdGF0ZSwgZmFsc2UsIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEludm9rZSBhZ2FpbiB3aXRoIHN0cmluZ1xuICAgICAgICBzdGF0ZSA9IGF3YWl0IHRoaXMuaG9va01hbmFnZXIuaW52b2tlVHJhbnNmb3JtVG9Vcmwoc3RhdGUsIGluc3RydWN0aW9uKTtcbiAgICAgICAgY29uc3QgcXVlcnkgPSAoaW5zdHJ1Y3Rpb24ucXVlcnkgJiYgaW5zdHJ1Y3Rpb24ucXVlcnkubGVuZ3RoID8gYD8ke2luc3RydWN0aW9uLnF1ZXJ5fWAgOiAnJyk7XG4gICAgICAgIC8vIGlmIChpbnN0cnVjdGlvbi5wYXRoID09PSB2b2lkIDAgfHwgaW5zdHJ1Y3Rpb24ucGF0aC5sZW5ndGggPT09IDAgfHwgaW5zdHJ1Y3Rpb24ucGF0aCA9PT0gJy8nKSB7XG4gICAgICAgIGluc3RydWN0aW9uLnBhdGggPSBzdGF0ZSArIHF1ZXJ5O1xuICAgICAgICAvLyB9XG4gICAgICAgIGNvbnN0IGZ1bGxWaWV3cG9ydFN0YXRlcyA9IFt0aGlzLmNyZWF0ZVZpZXdwb3J0SW5zdHJ1Y3Rpb24odGhpcy5pbnN0cnVjdGlvblJlc29sdmVyLmNsZWFyVmlld3BvcnRJbnN0cnVjdGlvbildO1xuICAgICAgICBmdWxsVmlld3BvcnRTdGF0ZXMucHVzaCguLi50aGlzLmluc3RydWN0aW9uUmVzb2x2ZXIuY2xvbmVWaWV3cG9ydEluc3RydWN0aW9ucyhpbnN0cnVjdGlvbnMsIHRoaXMuc3RhdGVmdWxIaXN0b3J5KSk7XG4gICAgICAgIGluc3RydWN0aW9uLmZ1bGxTdGF0ZUluc3RydWN0aW9uID0gZnVsbFZpZXdwb3J0U3RhdGVzO1xuICAgICAgICAvLyBUT0RPOiBGZXRjaCBhbmQgdXBkYXRlIHRpdGxlXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgYXN5bmMgZnJlZUNvbXBvbmVudHMoaW5zdHJ1Y3Rpb24sIGV4Y2x1ZGVDb21wb25lbnRzLCBhbHJlYWR5RG9uZSkge1xuICAgICAgICBjb25zdCBjb21wb25lbnQgPSBpbnN0cnVjdGlvbi5jb21wb25lbnRJbnN0YW5jZTtcbiAgICAgICAgY29uc3Qgdmlld3BvcnQgPSBpbnN0cnVjdGlvbi52aWV3cG9ydDtcbiAgICAgICAgaWYgKGNvbXBvbmVudCA9PT0gbnVsbCB8fCB2aWV3cG9ydCA9PT0gbnVsbCB8fCBhbHJlYWR5RG9uZS5zb21lKGRvbmUgPT4gZG9uZSA9PT0gY29tcG9uZW50KSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZXhjbHVkZUNvbXBvbmVudHMuc29tZShleGNsdWRlID0+IGV4Y2x1ZGUgPT09IGNvbXBvbmVudCkpIHtcbiAgICAgICAgICAgIGF3YWl0IHZpZXdwb3J0LmZyZWVDb250ZW50KGNvbXBvbmVudCk7XG4gICAgICAgICAgICBhbHJlYWR5RG9uZS5wdXNoKGNvbXBvbmVudCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluc3RydWN0aW9uLm5leHRTY29wZUluc3RydWN0aW9ucyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBuZXh0SW5zdHJ1Y3Rpb24gb2YgaW5zdHJ1Y3Rpb24ubmV4dFNjb3BlSW5zdHJ1Y3Rpb25zKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5mcmVlQ29tcG9uZW50cyhuZXh0SW5zdHJ1Y3Rpb24sIGV4Y2x1ZGVDb21wb25lbnRzLCBhbHJlYWR5RG9uZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0Q2xvc2VzdENvbnRhaW5lcih2aWV3TW9kZWxPckVsZW1lbnQpIHtcbiAgICAgICAgaWYgKCdjb250ZXh0JyBpbiB2aWV3TW9kZWxPckVsZW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybiB2aWV3TW9kZWxPckVsZW1lbnQuY29udGV4dDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoJyRjb250cm9sbGVyJyBpbiB2aWV3TW9kZWxPckVsZW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybiB2aWV3TW9kZWxPckVsZW1lbnQuJGNvbnRyb2xsZXIuY29udGV4dDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb250cm9sbGVyID0gdGhpcy5DdXN0b21FbGVtZW50Rm9yKHZpZXdNb2RlbE9yRWxlbWVudCk7XG4gICAgICAgIGlmIChjb250cm9sbGVyID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb250cm9sbGVyLmNvbnRleHQ7XG4gICAgfVxuICAgIGdldENvbnRhaW5lcih2aWV3TW9kZWxPckNvbnRhaW5lcikge1xuICAgICAgICBpZiAoJ3Jlc291cmNlUmVzb2x2ZXJzJyBpbiB2aWV3TW9kZWxPckNvbnRhaW5lcikge1xuICAgICAgICAgICAgcmV0dXJuIHZpZXdNb2RlbE9yQ29udGFpbmVyO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc1JlbmRlckNvbnRleHQodmlld01vZGVsT3JDb250YWluZXIpKSB7XG4gICAgICAgICAgICByZXR1cm4gdmlld01vZGVsT3JDb250YWluZXIuZ2V0KElDb250YWluZXIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICgnJGNvbnRyb2xsZXInIGluIHZpZXdNb2RlbE9yQ29udGFpbmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gdmlld01vZGVsT3JDb250YWluZXIuJGNvbnRyb2xsZXIuY29udGV4dC5nZXQoSUNvbnRhaW5lcik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIC8vIFRPRE86IFRoaXMgaXMgcHJvYmFibHkgd3Jvbmcgc2luY2UgaXQgY2F1c2VkIHRlc3QgZmFpbHMgd2hlbiBpbiBDdXN0b21FbGVtZW50LmZvclxuICAgIC8vIEZyZWQgcHJvYmFibHkga25vd3MgYW5kIHdpbGwgbmVlZCB0byBsb29rIGF0IGl0XG4gICAgLy8gVGhpcyBjYW4gbW9zdCBsaWtlbHkgYWxzbyBiZSBjaGFuZ2VkIHNvIHRoYXQgdGhlIG5vZGUgdHJhdmVyc2FsIGlzbid0IG5lY2Vzc2FyeVxuICAgIEN1c3RvbUVsZW1lbnRGb3Iobm9kZSkge1xuICAgICAgICBsZXQgY3VyID0gbm9kZTtcbiAgICAgICAgd2hpbGUgKGN1ciAhPT0gbnVsbCkge1xuICAgICAgICAgICAgY29uc3Qgbm9kZVJlc291cmNlTmFtZSA9IGN1ci5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgY29uc3QgY29udHJvbGxlciA9IE1ldGFkYXRhLmdldE93bihgJHtDdXN0b21FbGVtZW50Lm5hbWV9OiR7bm9kZVJlc291cmNlTmFtZX1gLCBjdXIpXG4gICAgICAgICAgICAgICAgfHwgTWV0YWRhdGEuZ2V0T3duKEN1c3RvbUVsZW1lbnQubmFtZSwgY3VyKTtcbiAgICAgICAgICAgIGlmIChjb250cm9sbGVyICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29udHJvbGxlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1ciA9IERPTS5nZXRFZmZlY3RpdmVQYXJlbnROb2RlKGN1cik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICh2b2lkIDApO1xuICAgIH1cbn1cblJvdXRlci5pbmplY3QgPSBbSUNvbnRhaW5lciwgTmF2aWdhdG9yLCBCcm93c2VyVmlld2VyU3RvcmUsIExpbmtIYW5kbGVyLCBJbnN0cnVjdGlvblJlc29sdmVyXTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJvdXRlci5qcy5tYXAiLCJpbXBvcnQgeyBWaWV3cG9ydFNjb3BlIH0gZnJvbSAnLi92aWV3cG9ydC1zY29wZSc7XG5pbXBvcnQgeyBGb3VuZFJvdXRlIH0gZnJvbSAnLi9mb3VuZC1yb3V0ZSc7XG5pbXBvcnQgeyBOYXZpZ2F0aW9uSW5zdHJ1Y3Rpb25SZXNvbHZlciB9IGZyb20gJy4vdHlwZS1yZXNvbHZlcnMnO1xuaW1wb3J0IHsgVmlld3BvcnQgfSBmcm9tICcuL3ZpZXdwb3J0JztcbmltcG9ydCB7IGFycmF5UmVtb3ZlIH0gZnJvbSAnLi91dGlscyc7XG5pbXBvcnQgeyBDb2xsZWN0aW9uIH0gZnJvbSAnLi9jb2xsZWN0aW9uJztcbmltcG9ydCB7IFJvdXRlUmVjb2duaXplciB9IGZyb20gJy4vcm91dGUtcmVjb2duaXplcic7XG5leHBvcnQgY2xhc3MgU2NvcGUge1xuICAgIGNvbnN0cnVjdG9yKHJvdXRlciwgaGFzU2NvcGUsIG93bmluZ1Njb3BlLCB2aWV3cG9ydCA9IG51bGwsIHZpZXdwb3J0U2NvcGUgPSBudWxsLCByb290Q29tcG9uZW50VHlwZSA9IG51bGwpIHtcbiAgICAgICAgdGhpcy5yb3V0ZXIgPSByb3V0ZXI7XG4gICAgICAgIHRoaXMuaGFzU2NvcGUgPSBoYXNTY29wZTtcbiAgICAgICAgdGhpcy5vd25pbmdTY29wZSA9IG93bmluZ1Njb3BlO1xuICAgICAgICB0aGlzLnZpZXdwb3J0ID0gdmlld3BvcnQ7XG4gICAgICAgIHRoaXMudmlld3BvcnRTY29wZSA9IHZpZXdwb3J0U2NvcGU7XG4gICAgICAgIHRoaXMucm9vdENvbXBvbmVudFR5cGUgPSByb290Q29tcG9uZW50VHlwZTtcbiAgICAgICAgdGhpcy5pZCA9ICcuJztcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBudWxsO1xuICAgICAgICB0aGlzLmNoaWxkcmVuID0gW107XG4gICAgICAgIHRoaXMucmVwbGFjZWRDaGlsZHJlbiA9IFtdO1xuICAgICAgICB0aGlzLnBhdGggPSBudWxsO1xuICAgICAgICB0aGlzLmVuYWJsZWQgPSB0cnVlO1xuICAgICAgICAvLyBTdXBwb3J0IGNvbGxlY3Rpb24gZmVhdHVyZSBpbiB2aWV3cG9ydCBzY29wZXNcbiAgICAgICAgdGhpcy5jaGlsZENvbGxlY3Rpb25zID0ge307XG4gICAgICAgIHRoaXMub3duaW5nU2NvcGUgPSBvd25pbmdTY29wZSB8fCB0aGlzO1xuICAgICAgICB0aGlzLnNjb3BlID0gdGhpcy5oYXNTY29wZSA/IHRoaXMgOiB0aGlzLm93bmluZ1Njb3BlO1xuICAgIH1cbiAgICBnZXQgaXNWaWV3cG9ydCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmlld3BvcnQgIT09IG51bGw7XG4gICAgfVxuICAgIGdldCBpc1ZpZXdwb3J0U2NvcGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZpZXdwb3J0U2NvcGUgIT09IG51bGw7XG4gICAgfVxuICAgIGdldCBwYXNzVGhyb3VnaFNjb3BlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc1ZpZXdwb3J0U2NvcGUgJiYgdGhpcy52aWV3cG9ydFNjb3BlLnBhc3NUaHJvdWdoU2NvcGU7XG4gICAgfVxuICAgIGdldCBvd25lcigpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNWaWV3cG9ydCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmlld3BvcnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaXNWaWV3cG9ydFNjb3BlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52aWV3cG9ydFNjb3BlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBnZXQgZW5hYmxlZENoaWxkcmVuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jaGlsZHJlbi5maWx0ZXIoc2NvcGUgPT4gc2NvcGUuZW5hYmxlZCk7XG4gICAgfVxuICAgIGdldCBob2lzdGVkQ2hpbGRyZW4oKSB7XG4gICAgICAgIGNvbnN0IHNjb3BlcyA9IHRoaXMuZW5hYmxlZENoaWxkcmVuO1xuICAgICAgICB3aGlsZSAoc2NvcGVzLnNvbWUoc2NvcGUgPT4gc2NvcGUucGFzc1Rocm91Z2hTY29wZSkpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgc2NvcGUgb2Ygc2NvcGVzLnNsaWNlKCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoc2NvcGUucGFzc1Rocm91Z2hTY29wZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IHNjb3Blcy5pbmRleE9mKHNjb3BlKTtcbiAgICAgICAgICAgICAgICAgICAgc2NvcGVzLnNwbGljZShpbmRleCwgMSwgLi4uc2NvcGUuZW5hYmxlZENoaWxkcmVuKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNjb3BlcztcbiAgICB9XG4gICAgZ2V0IGVuYWJsZWRWaWV3cG9ydHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNoaWxkcmVuLmZpbHRlcihzY29wZSA9PiBzY29wZS5pc1ZpZXdwb3J0ICYmIHNjb3BlLmVuYWJsZWQpXG4gICAgICAgICAgICAubWFwKHNjb3BlID0+IHNjb3BlLnZpZXdwb3J0KTtcbiAgICB9XG4gICAgZ2V0IHZpZXdwb3J0SW5zdHJ1Y3Rpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLmlzVmlld3BvcnRTY29wZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmlld3BvcnRTY29wZS5jb250ZW50O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmlzVmlld3BvcnQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZpZXdwb3J0LmNvbnRlbnQuY29udGVudDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgZ2V0RW5hYmxlZFZpZXdwb3J0cyh2aWV3cG9ydFNjb3Blcykge1xuICAgICAgICByZXR1cm4gdmlld3BvcnRTY29wZXMuZmlsdGVyKHNjb3BlID0+ICFzY29wZS5pc1ZpZXdwb3J0U2NvcGUpLm1hcChzY29wZSA9PiBzY29wZS52aWV3cG9ydCkucmVkdWNlKCh2aWV3cG9ydHMsIHZpZXdwb3J0KSA9PiB7XG4gICAgICAgICAgICB2aWV3cG9ydHNbdmlld3BvcnQubmFtZV0gPSB2aWV3cG9ydDtcbiAgICAgICAgICAgIHJldHVybiB2aWV3cG9ydHM7XG4gICAgICAgIH0sIHt9KTtcbiAgICB9XG4gICAgZ2V0T3duZWRWaWV3cG9ydHMoaW5jbHVkZURpc2FibGVkID0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWxsVmlld3BvcnRzKGluY2x1ZGVEaXNhYmxlZCkuZmlsdGVyKHZpZXdwb3J0ID0+IHZpZXdwb3J0Lm93bmluZ1Njb3BlID09PSB0aGlzKTtcbiAgICB9XG4gICAgZ2V0T3duZWRTY29wZXMoaW5jbHVkZURpc2FibGVkID0gZmFsc2UpIHtcbiAgICAgICAgY29uc3Qgc2NvcGVzID0gdGhpcy5hbGxTY29wZXMoaW5jbHVkZURpc2FibGVkKS5maWx0ZXIoc2NvcGUgPT4gc2NvcGUub3duaW5nU2NvcGUgPT09IHRoaXMpO1xuICAgICAgICAvLyBIb2lzdCBjaGlsZHJlbiB0byBwYXNzIHRocm91Z2ggc2NvcGVzXG4gICAgICAgIGZvciAoY29uc3Qgc2NvcGUgb2Ygc2NvcGVzLnNsaWNlKCkpIHtcbiAgICAgICAgICAgIGlmIChzY29wZS5wYXNzVGhyb3VnaFNjb3BlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBzY29wZXMuaW5kZXhPZihzY29wZSk7XG4gICAgICAgICAgICAgICAgc2NvcGVzLnNwbGljZShpbmRleCwgMSwgLi4uc2NvcGUuZ2V0T3duZWRTY29wZXMoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNjb3BlcztcbiAgICB9XG4gICAgLy8gTm90ZTogVGhpcyBjYW4ndCBjaGFuZ2Ugc3RhdGUgb3RoZXIgdGhhbiB0aGUgaW5zdHJ1Y3Rpb25zIVxuICAgIGZpbmRWaWV3cG9ydHMoaW5zdHJ1Y3Rpb25zLCBhbHJlYWR5Rm91bmQsIGRpc3JlZ2FyZFZpZXdwb3J0cyA9IGZhbHNlKSB7XG4gICAgICAgIGNvbnN0IGZvdW5kVmlld3BvcnRzID0gW107XG4gICAgICAgIGxldCByZW1haW5pbmdJbnN0cnVjdGlvbnMgPSBbXTtcbiAgICAgICAgY29uc3Qgb3duZWRTY29wZXMgPSB0aGlzLmdldE93bmVkU2NvcGVzKCk7XG4gICAgICAgIC8vIEdldCBhIHNoYWxsb3cgY29weSBvZiBhbGwgYXZhaWxhYmxlIG1hbnVhbCB2aWV3cG9ydCBzY29wZXNcbiAgICAgICAgY29uc3Qgdmlld3BvcnRTY29wZXMgPSBvd25lZFNjb3Blcy5maWx0ZXIoc2NvcGUgPT4gc2NvcGUuaXNWaWV3cG9ydFNjb3BlKS5tYXAoc2NvcGUgPT4gc2NvcGUudmlld3BvcnRTY29wZSk7XG4gICAgICAgIGNvbnN0IGF2YWlsYWJsZVZpZXdwb3J0U2NvcGVzID0gdmlld3BvcnRTY29wZXMuZmlsdGVyKHZpZXdwb3J0U2NvcGUgPT4gYWxyZWFkeUZvdW5kLmV2ZXJ5KGZvdW5kID0+IGZvdW5kLnZpZXdwb3J0U2NvcGUgIT09IHZpZXdwb3J0U2NvcGUpKTtcbiAgICAgICAgLy8gR2V0IGEgc2hhbGxvdyBjb3B5IG9mIGFsbCBhdmFpbGFibGUgdmlld3BvcnRzXG4gICAgICAgIGNvbnN0IGF2YWlsYWJsZVZpZXdwb3J0cyA9IHsgLi4udGhpcy5nZXRFbmFibGVkVmlld3BvcnRzKG93bmVkU2NvcGVzKSB9O1xuICAgICAgICBmb3IgKGNvbnN0IGluc3RydWN0aW9uIG9mIGFscmVhZHlGb3VuZC5maWx0ZXIoZm91bmQgPT4gZm91bmQuc2NvcGUgPT09IHRoaXMpKSB7XG4gICAgICAgICAgICBhdmFpbGFibGVWaWV3cG9ydHNbaW5zdHJ1Y3Rpb24udmlld3BvcnROYW1lXSA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgdmlld3BvcnRJbnN0cnVjdGlvbnMgPSBuZXcgQ29sbGVjdGlvbiguLi5pbnN0cnVjdGlvbnMuc2xpY2UoKSk7XG4gICAgICAgIGxldCBpbnN0cnVjdGlvbiA9IG51bGw7XG4gICAgICAgIC8vIFRoZSB2aWV3cG9ydCBzY29wZSBpcyBhbHJlYWR5IGtub3duXG4gICAgICAgIHdoaWxlICgoaW5zdHJ1Y3Rpb24gPSB2aWV3cG9ydEluc3RydWN0aW9ucy5uZXh0KCkpICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoaW5zdHJ1Y3Rpb24udmlld3BvcnRTY29wZSAhPT0gbnVsbCAmJiAhdGhpcy5yb3V0ZXIuaW5zdHJ1Y3Rpb25SZXNvbHZlci5pc0FkZFZpZXdwb3J0SW5zdHJ1Y3Rpb24oaW5zdHJ1Y3Rpb24pKSB7XG4gICAgICAgICAgICAgICAgcmVtYWluaW5nSW5zdHJ1Y3Rpb25zLnB1c2goLi4udGhpcy5mb3VuZFZpZXdwb3J0U2NvcGUoaW5zdHJ1Y3Rpb24sIGluc3RydWN0aW9uLnZpZXdwb3J0U2NvcGUpKTtcbiAgICAgICAgICAgICAgICBmb3VuZFZpZXdwb3J0cy5wdXNoKGluc3RydWN0aW9uKTtcbiAgICAgICAgICAgICAgICBhcnJheVJlbW92ZShhdmFpbGFibGVWaWV3cG9ydFNjb3BlcywgYXZhaWxhYmxlID0+IGF2YWlsYWJsZSA9PT0gaW5zdHJ1Y3Rpb24udmlld3BvcnRTY29wZSk7XG4gICAgICAgICAgICAgICAgdmlld3BvcnRJbnN0cnVjdGlvbnMucmVtb3ZlQ3VycmVudCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIFRoZSB2aWV3cG9ydCBpcyBhbHJlYWR5IGtub3duXG4gICAgICAgIGlmICghZGlzcmVnYXJkVmlld3BvcnRzKSB7XG4gICAgICAgICAgICB3aGlsZSAoKGluc3RydWN0aW9uID0gdmlld3BvcnRJbnN0cnVjdGlvbnMubmV4dCgpKSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGlmIChpbnN0cnVjdGlvbi52aWV3cG9ydCkge1xuICAgICAgICAgICAgICAgICAgICByZW1haW5pbmdJbnN0cnVjdGlvbnMucHVzaCguLi50aGlzLmZvdW5kVmlld3BvcnQoaW5zdHJ1Y3Rpb24sIGluc3RydWN0aW9uLnZpZXdwb3J0LCBkaXNyZWdhcmRWaWV3cG9ydHMpKTtcbiAgICAgICAgICAgICAgICAgICAgZm91bmRWaWV3cG9ydHMucHVzaChpbnN0cnVjdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIGF2YWlsYWJsZVZpZXdwb3J0c1tpbnN0cnVjdGlvbi52aWV3cG9ydC5uYW1lXSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIHZpZXdwb3J0SW5zdHJ1Y3Rpb25zLnJlbW92ZUN1cnJlbnQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gVmlld3BvcnQgc2NvcGVzIGhhdmUgcHJpb3JpdHlcbiAgICAgICAgd2hpbGUgKChpbnN0cnVjdGlvbiA9IHZpZXdwb3J0SW5zdHJ1Y3Rpb25zLm5leHQoKSkgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGZvciAobGV0IHZpZXdwb3J0U2NvcGUgb2Ygdmlld3BvcnRTY29wZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAodmlld3BvcnRTY29wZS5hY2NlcHRTZWdtZW50KGluc3RydWN0aW9uLmNvbXBvbmVudE5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZpZXdwb3J0U2NvcGUuc291cmNlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2F2YWlsYWJsZScsIHZpZXdwb3J0U2NvcGUuYXZhaWxhYmxlLCBzb3VyY2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGF2YWlsYWJsZSA9IGF2YWlsYWJsZVZpZXdwb3J0U2NvcGVzLmZpbmQoYXZhaWxhYmxlID0+IGF2YWlsYWJsZS5uYW1lID09PSB2aWV3cG9ydFNjb3BlLm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGF2YWlsYWJsZSA9PT0gdm9pZCAwIHx8IHRoaXMucm91dGVyLmluc3RydWN0aW9uUmVzb2x2ZXIuaXNBZGRWaWV3cG9ydEluc3RydWN0aW9uKGluc3RydWN0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSB2aWV3cG9ydFNjb3BlLmFkZFNvdXJjZUl0ZW0oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdmFpbGFibGUgPSB0aGlzLmdldE93bmVkU2NvcGVzKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihzY29wZSA9PiBzY29wZS5pc1ZpZXdwb3J0U2NvcGUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoc2NvcGUgPT4gc2NvcGUudmlld3BvcnRTY29wZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbmQodmlld3BvcnRTY29wZSA9PiB2aWV3cG9ydFNjb3BlLnNvdXJjZUl0ZW0gPT09IGl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdmlld3BvcnRTY29wZSA9IGF2YWlsYWJsZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZW1haW5pbmdJbnN0cnVjdGlvbnMucHVzaCguLi50aGlzLmZvdW5kVmlld3BvcnRTY29wZShpbnN0cnVjdGlvbiwgdmlld3BvcnRTY29wZSkpO1xuICAgICAgICAgICAgICAgICAgICBmb3VuZFZpZXdwb3J0cy5wdXNoKGluc3RydWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgYXJyYXlSZW1vdmUoYXZhaWxhYmxlVmlld3BvcnRTY29wZXMsIGF2YWlsYWJsZSA9PiBhdmFpbGFibGUgPT09IGluc3RydWN0aW9uLnZpZXdwb3J0U2NvcGUpO1xuICAgICAgICAgICAgICAgICAgICB2aWV3cG9ydEluc3RydWN0aW9ucy5yZW1vdmVDdXJyZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBDb25maWd1cmVkIHZpZXdwb3J0IGlzIHJ1bGluZ1xuICAgICAgICB3aGlsZSAoKGluc3RydWN0aW9uID0gdmlld3BvcnRJbnN0cnVjdGlvbnMubmV4dCgpKSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaW5zdHJ1Y3Rpb24ubmVlZHNWaWV3cG9ydERlc2NyaWJlZCA9IHRydWU7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG5hbWUgaW4gYXZhaWxhYmxlVmlld3BvcnRzKSB7XG4gICAgICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhdmFpbGFibGVWaWV3cG9ydHMsIG5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZpZXdwb3J0ID0gYXZhaWxhYmxlVmlld3BvcnRzW25hbWVdO1xuICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiBBbHNvIGNoZWNrIGlmIChyZXNvbHZlZCkgY29tcG9uZW50IHdhbnRzIGEgc3BlY2lmaWMgdmlld3BvcnRcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZpZXdwb3J0ICYmIHZpZXdwb3J0LndhbnRDb21wb25lbnQoaW5zdHJ1Y3Rpb24uY29tcG9uZW50TmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlbWFpbmluZyA9IHRoaXMuZm91bmRWaWV3cG9ydChpbnN0cnVjdGlvbiwgdmlld3BvcnQsIGRpc3JlZ2FyZFZpZXdwb3J0cywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3VuZFZpZXdwb3J0cy5wdXNoKGluc3RydWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbWFpbmluZ0luc3RydWN0aW9ucy5wdXNoKC4uLnJlbWFpbmluZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhdmFpbGFibGVWaWV3cG9ydHNbbmFtZV0gPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmlld3BvcnRJbnN0cnVjdGlvbnMucmVtb3ZlQ3VycmVudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gTmV4dCBpbiBsaW5lIGlzIHNwZWNpZmllZCB2aWV3cG9ydCAoYnV0IG5vdCBpZiB3ZSdyZSBkaXNyZWdhcmRpbmcgdmlld3BvcnRzKVxuICAgICAgICBpZiAoIWRpc3JlZ2FyZFZpZXdwb3J0cykge1xuICAgICAgICAgICAgd2hpbGUgKChpbnN0cnVjdGlvbiA9IHZpZXdwb3J0SW5zdHJ1Y3Rpb25zLm5leHQoKSkgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gaW5zdHJ1Y3Rpb24udmlld3BvcnROYW1lO1xuICAgICAgICAgICAgICAgIGlmICghbmFtZSB8fCAhbmFtZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1Njb3BlID0gaW5zdHJ1Y3Rpb24ub3duc1Njb3BlO1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5nZXRFbmFibGVkVmlld3BvcnRzKG93bmVkU2NvcGVzKVtuYW1lXSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogTm8gbG9uZ2VyIHByZS1jcmVhdGluZyB2aWV3cG9ydHMuIEV2YWx1YXRlIVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFZpZXdwb3J0KG5hbWUsIG51bGwsIG51bGwsIHsgc2NvcGU6IG5ld1Njb3BlLCBmb3JjZURlc2NyaXB0aW9uOiB0cnVlIH0pO1xuICAgICAgICAgICAgICAgICAgICBhdmFpbGFibGVWaWV3cG9ydHNbbmFtZV0gPSB0aGlzLmdldEVuYWJsZWRWaWV3cG9ydHMob3duZWRTY29wZXMpW25hbWVdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCB2aWV3cG9ydCA9IGF2YWlsYWJsZVZpZXdwb3J0c1tuYW1lXTtcbiAgICAgICAgICAgICAgICBpZiAodmlld3BvcnQgJiYgdmlld3BvcnQuYWNjZXB0Q29tcG9uZW50KGluc3RydWN0aW9uLmNvbXBvbmVudE5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlbWFpbmluZyA9IHRoaXMuZm91bmRWaWV3cG9ydChpbnN0cnVjdGlvbiwgdmlld3BvcnQsIGRpc3JlZ2FyZFZpZXdwb3J0cywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGZvdW5kVmlld3BvcnRzLnB1c2goaW5zdHJ1Y3Rpb24pO1xuICAgICAgICAgICAgICAgICAgICByZW1haW5pbmdJbnN0cnVjdGlvbnMucHVzaCguLi5yZW1haW5pbmcpO1xuICAgICAgICAgICAgICAgICAgICBhdmFpbGFibGVWaWV3cG9ydHNbbmFtZV0gPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB2aWV3cG9ydEluc3RydWN0aW9ucy5yZW1vdmVDdXJyZW50KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIEZpbmFsbHksIG9ubHkgb25lIGFjY2VwdGluZyB2aWV3cG9ydCBsZWZ0P1xuICAgICAgICB3aGlsZSAoKGluc3RydWN0aW9uID0gdmlld3BvcnRJbnN0cnVjdGlvbnMubmV4dCgpKSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgY29uc3QgcmVtYWluaW5nVmlld3BvcnRzID0gW107XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG5hbWUgaW4gYXZhaWxhYmxlVmlld3BvcnRzKSB7XG4gICAgICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhdmFpbGFibGVWaWV3cG9ydHMsIG5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZpZXdwb3J0ID0gYXZhaWxhYmxlVmlld3BvcnRzW25hbWVdO1xuICAgICAgICAgICAgICAgICAgICBpZiAodmlld3BvcnQgJiYgdmlld3BvcnQuYWNjZXB0Q29tcG9uZW50KGluc3RydWN0aW9uLmNvbXBvbmVudE5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZW1haW5pbmdWaWV3cG9ydHMucHVzaCh2aWV3cG9ydCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVtYWluaW5nVmlld3BvcnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHZpZXdwb3J0ID0gcmVtYWluaW5nVmlld3BvcnRzLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVtYWluaW5nID0gdGhpcy5mb3VuZFZpZXdwb3J0KGluc3RydWN0aW9uLCB2aWV3cG9ydCwgZGlzcmVnYXJkVmlld3BvcnRzLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBmb3VuZFZpZXdwb3J0cy5wdXNoKGluc3RydWN0aW9uKTtcbiAgICAgICAgICAgICAgICByZW1haW5pbmdJbnN0cnVjdGlvbnMucHVzaCguLi5yZW1haW5pbmcpO1xuICAgICAgICAgICAgICAgIGF2YWlsYWJsZVZpZXdwb3J0c1t2aWV3cG9ydC5uYW1lXSA9IG51bGw7XG4gICAgICAgICAgICAgICAgdmlld3BvcnRJbnN0cnVjdGlvbnMucmVtb3ZlQ3VycmVudCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIElmIHdlJ3JlIGlnbm9yaW5nIHZpZXdwb3J0cywgd2Ugbm93IG1hdGNoIHRoZW0gYW55d2F5XG4gICAgICAgIGlmIChkaXNyZWdhcmRWaWV3cG9ydHMpIHtcbiAgICAgICAgICAgIHdoaWxlICgoaW5zdHJ1Y3Rpb24gPSB2aWV3cG9ydEluc3RydWN0aW9ucy5uZXh0KCkpICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgbGV0IHZpZXdwb3J0ID0gaW5zdHJ1Y3Rpb24udmlld3BvcnQ7XG4gICAgICAgICAgICAgICAgaWYgKCF2aWV3cG9ydCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gaW5zdHJ1Y3Rpb24udmlld3BvcnROYW1lO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIW5hbWUgfHwgIW5hbWUubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdTY29wZSA9IGluc3RydWN0aW9uLm93bnNTY29wZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmdldEVuYWJsZWRWaWV3cG9ydHMob3duZWRTY29wZXMpW25hbWVdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IE5vIGxvbmdlciBwcmUtY3JlYXRpbmcgdmlld3BvcnRzLiBFdmFsdWF0ZSFcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkVmlld3BvcnQobmFtZSwgbnVsbCwgbnVsbCwgeyBzY29wZTogbmV3U2NvcGUsIGZvcmNlRGVzY3JpcHRpb246IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhdmFpbGFibGVWaWV3cG9ydHNbbmFtZV0gPSB0aGlzLmdldEVuYWJsZWRWaWV3cG9ydHMob3duZWRTY29wZXMpW25hbWVdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZpZXdwb3J0ID0gYXZhaWxhYmxlVmlld3BvcnRzW25hbWVdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodmlld3BvcnQgJiYgdmlld3BvcnQuYWNjZXB0Q29tcG9uZW50KGluc3RydWN0aW9uLmNvbXBvbmVudE5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlbWFpbmluZyA9IHRoaXMuZm91bmRWaWV3cG9ydChpbnN0cnVjdGlvbiwgdmlld3BvcnQsIGRpc3JlZ2FyZFZpZXdwb3J0cyk7XG4gICAgICAgICAgICAgICAgICAgIGZvdW5kVmlld3BvcnRzLnB1c2goaW5zdHJ1Y3Rpb24pO1xuICAgICAgICAgICAgICAgICAgICByZW1haW5pbmdJbnN0cnVjdGlvbnMucHVzaCguLi5yZW1haW5pbmcpO1xuICAgICAgICAgICAgICAgICAgICBhdmFpbGFibGVWaWV3cG9ydHNbdmlld3BvcnQubmFtZV0gPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB2aWV3cG9ydEluc3RydWN0aW9ucy5yZW1vdmVDdXJyZW50KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJlbWFpbmluZ0luc3RydWN0aW9ucyA9IFsuLi52aWV3cG9ydEluc3RydWN0aW9ucywgLi4ucmVtYWluaW5nSW5zdHJ1Y3Rpb25zXTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGZvdW5kVmlld3BvcnRzLFxuICAgICAgICAgICAgcmVtYWluaW5nSW5zdHJ1Y3Rpb25zLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBmb3VuZFZpZXdwb3J0U2NvcGUoaW5zdHJ1Y3Rpb24sIHZpZXdwb3J0U2NvcGUpIHtcbiAgICAgICAgaW5zdHJ1Y3Rpb24udmlld3BvcnRTY29wZSA9IHZpZXdwb3J0U2NvcGU7XG4gICAgICAgIGluc3RydWN0aW9uLm5lZWRzVmlld3BvcnREZXNjcmliZWQgPSBmYWxzZTtcbiAgICAgICAgY29uc3QgcmVtYWluaW5nID0gKGluc3RydWN0aW9uLm5leHRTY29wZUluc3RydWN0aW9ucyB8fCBbXSkuc2xpY2UoKTtcbiAgICAgICAgZm9yIChjb25zdCByZW0gb2YgcmVtYWluaW5nKSB7XG4gICAgICAgICAgICBpZiAocmVtLnNjb3BlID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmVtLnNjb3BlID0gdmlld3BvcnRTY29wZS5zY29wZS5zY29wZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVtYWluaW5nO1xuICAgIH1cbiAgICBmb3VuZFZpZXdwb3J0KGluc3RydWN0aW9uLCB2aWV3cG9ydCwgd2l0aG91dFZpZXdwb3J0cywgZG9lc250TmVlZFZpZXdwb3J0RGVzY3JpYmVkID0gZmFsc2UpIHtcbiAgICAgICAgaW5zdHJ1Y3Rpb24uc2V0Vmlld3BvcnQodmlld3BvcnQpO1xuICAgICAgICBpZiAoZG9lc250TmVlZFZpZXdwb3J0RGVzY3JpYmVkKSB7XG4gICAgICAgICAgICBpbnN0cnVjdGlvbi5uZWVkc1ZpZXdwb3J0RGVzY3JpYmVkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVtYWluaW5nID0gKGluc3RydWN0aW9uLm5leHRTY29wZUluc3RydWN0aW9ucyB8fCBbXSkuc2xpY2UoKTtcbiAgICAgICAgZm9yIChjb25zdCByZW0gb2YgcmVtYWluaW5nKSB7XG4gICAgICAgICAgICBpZiAocmVtLnNjb3BlID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmVtLnNjb3BlID0gdmlld3BvcnQuc2NvcGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlbWFpbmluZztcbiAgICB9XG4gICAgYWRkVmlld3BvcnQobmFtZSwgZWxlbWVudCwgY29udGFpbmVyLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgbGV0IHZpZXdwb3J0ID0gdGhpcy5nZXRFbmFibGVkVmlld3BvcnRzKHRoaXMuZ2V0T3duZWRTY29wZXMoKSlbbmFtZV07XG4gICAgICAgIC8vIEVhY2ggYXUtdmlld3BvcnQgZWxlbWVudCBoYXMgaXRzIG93biBWaWV3cG9ydFxuICAgICAgICBpZiAoZWxlbWVudCAmJiB2aWV3cG9ydCAmJiB2aWV3cG9ydC5lbGVtZW50ICE9PSBudWxsICYmIHZpZXdwb3J0LmVsZW1lbnQgIT09IGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHZpZXdwb3J0LmVuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHZpZXdwb3J0ID0gdGhpcy5nZXRPd25lZFZpZXdwb3J0cyh0cnVlKS5maW5kKGNoaWxkID0+IGNoaWxkLm5hbWUgPT09IG5hbWUgJiYgY2hpbGQuZWxlbWVudCA9PT0gZWxlbWVudCkgfHwgbnVsbDtcbiAgICAgICAgICAgIGlmICh2aWV3cG9ydCkge1xuICAgICAgICAgICAgICAgIHZpZXdwb3J0LmVuYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghdmlld3BvcnQpIHtcbiAgICAgICAgICAgIHZpZXdwb3J0ID0gbmV3IFZpZXdwb3J0KHRoaXMucm91dGVyLCBuYW1lLCBudWxsLCBudWxsLCB0aGlzLnNjb3BlLCAhIW9wdGlvbnMuc2NvcGUsIG9wdGlvbnMpO1xuICAgICAgICAgICAgdGhpcy5hZGRDaGlsZCh2aWV3cG9ydC5jb25uZWN0ZWRTY29wZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVE9ETzogRWl0aGVyIGV4cGxhaW4gd2h5IHx8IGluc3RlYWQgb2YgJiYgaGVyZSAobWlnaHQgb25seSBuZWVkIG9uZSkgb3IgY2hhbmdlIGl0IHRvICYmIGlmIHRoYXQgc2hvdWxkIHR1cm4gb3V0IHRvIG5vdCBiZSByZWxldmFudFxuICAgICAgICBpZiAoZWxlbWVudCB8fCBjb250YWluZXIpIHtcbiAgICAgICAgICAgIHZpZXdwb3J0LnNldEVsZW1lbnQoZWxlbWVudCwgY29udGFpbmVyLCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmlld3BvcnQ7XG4gICAgfVxuICAgIHJlbW92ZVZpZXdwb3J0KHZpZXdwb3J0LCBlbGVtZW50LCBjb250YWluZXIpIHtcbiAgICAgICAgaWYgKCghZWxlbWVudCAmJiAhY29udGFpbmVyKSB8fCB2aWV3cG9ydC5yZW1vdmUoZWxlbWVudCwgY29udGFpbmVyKSkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVDaGlsZCh2aWV3cG9ydC5jb25uZWN0ZWRTY29wZSk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGFkZFZpZXdwb3J0U2NvcGUobmFtZSwgZWxlbWVudCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IHZpZXdwb3J0U2NvcGUgPSBuZXcgVmlld3BvcnRTY29wZShuYW1lLCB0aGlzLnJvdXRlciwgZWxlbWVudCwgdGhpcy5zY29wZSwgdHJ1ZSwgbnVsbCwgb3B0aW9ucyk7XG4gICAgICAgIHRoaXMuYWRkQ2hpbGQodmlld3BvcnRTY29wZS5jb25uZWN0ZWRTY29wZSk7XG4gICAgICAgIHJldHVybiB2aWV3cG9ydFNjb3BlO1xuICAgIH1cbiAgICByZW1vdmVWaWV3cG9ydFNjb3BlKHZpZXdwb3J0U2NvcGUpIHtcbiAgICAgICAgLy8gdmlld3BvcnRTY29wZS5yZW1vdmUoKTtcbiAgICAgICAgdGhpcy5yZW1vdmVDaGlsZCh2aWV3cG9ydFNjb3BlLmNvbm5lY3RlZFNjb3BlKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGFkZENoaWxkKHNjb3BlKSB7XG4gICAgICAgIGlmICghdGhpcy5jaGlsZHJlbi5zb21lKHZwID0+IHZwID09PSBzY29wZSkpIHtcbiAgICAgICAgICAgIGlmIChzY29wZS5wYXJlbnQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBzY29wZS5wYXJlbnQucmVtb3ZlQ2hpbGQoc2NvcGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jaGlsZHJlbi5wdXNoKHNjb3BlKTtcbiAgICAgICAgICAgIHNjb3BlLnBhcmVudCA9IHRoaXM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVtb3ZlQ2hpbGQoc2NvcGUpIHtcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmNoaWxkcmVuLmluZGV4T2Yoc2NvcGUpO1xuICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICAgICAgdGhpcy5jaGlsZHJlbi5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgc2NvcGUucGFyZW50ID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjbGVhclJlcGxhY2VkQ2hpbGRyZW4oKSB7XG4gICAgICAgIHRoaXMucmVwbGFjZWRDaGlsZHJlbiA9IFtdO1xuICAgIH1cbiAgICBkaXNhYmxlUmVwbGFjZWRDaGlsZHJlbigpIHtcbiAgICAgICAgdGhpcy5yZXBsYWNlZENoaWxkcmVuID0gdGhpcy5lbmFibGVkQ2hpbGRyZW47XG4gICAgICAgIGZvciAoY29uc3Qgc2NvcGUgb2YgdGhpcy5yZXBsYWNlZENoaWxkcmVuKSB7XG4gICAgICAgICAgICBzY29wZS5lbmFibGVkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVlbmFibGVSZXBsYWNlZENoaWxkcmVuKCkge1xuICAgICAgICBmb3IgKGNvbnN0IHNjb3BlIG9mIHRoaXMucmVwbGFjZWRDaGlsZHJlbikge1xuICAgICAgICAgICAgc2NvcGUuZW5hYmxlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYWxsVmlld3BvcnRzKGluY2x1ZGVEaXNhYmxlZCA9IGZhbHNlLCBpbmNsdWRlUmVwbGFjZWQgPSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5hbGxTY29wZXMoaW5jbHVkZURpc2FibGVkLCBpbmNsdWRlUmVwbGFjZWQpLmZpbHRlcihzY29wZSA9PiBzY29wZS5pc1ZpZXdwb3J0KS5tYXAoc2NvcGUgPT4gc2NvcGUudmlld3BvcnQpO1xuICAgIH1cbiAgICBhbGxTY29wZXMoaW5jbHVkZURpc2FibGVkID0gZmFsc2UsIGluY2x1ZGVSZXBsYWNlZCA9IGZhbHNlKSB7XG4gICAgICAgIGNvbnN0IHNjb3BlcyA9IGluY2x1ZGVEaXNhYmxlZCA/IHRoaXMuY2hpbGRyZW4uc2xpY2UoKSA6IHRoaXMuZW5hYmxlZENoaWxkcmVuO1xuICAgICAgICBmb3IgKGNvbnN0IHNjb3BlIG9mIHNjb3Blcy5zbGljZSgpKSB7XG4gICAgICAgICAgICBzY29wZXMucHVzaCguLi5zY29wZS5hbGxTY29wZXMoaW5jbHVkZURpc2FibGVkLCBpbmNsdWRlUmVwbGFjZWQpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2NvcGVzO1xuICAgIH1cbiAgICByZXBhcmVudFZpZXdwb3J0SW5zdHJ1Y3Rpb25zKCkge1xuICAgICAgICBjb25zdCBzY29wZXMgPSB0aGlzLmhvaXN0ZWRDaGlsZHJlblxuICAgICAgICAgICAgLmZpbHRlcihzY29wZSA9PiBzY29wZS52aWV3cG9ydEluc3RydWN0aW9uICE9PSBudWxsICYmIHNjb3BlLnZpZXdwb3J0SW5zdHJ1Y3Rpb24uY29tcG9uZW50TmFtZSk7XG4gICAgICAgIGlmICghc2NvcGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBzY29wZSBvZiBzY29wZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkSW5zdHJ1Y3Rpb25zID0gc2NvcGUucmVwYXJlbnRWaWV3cG9ydEluc3RydWN0aW9ucygpO1xuICAgICAgICAgICAgc2NvcGUudmlld3BvcnRJbnN0cnVjdGlvbi5uZXh0U2NvcGVJbnN0cnVjdGlvbnMgPVxuICAgICAgICAgICAgICAgIGNoaWxkSW5zdHJ1Y3Rpb25zICE9PSBudWxsICYmIGNoaWxkSW5zdHJ1Y3Rpb25zLmxlbmd0aCA+IDAgPyBjaGlsZEluc3RydWN0aW9ucyA6IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNjb3Blcy5tYXAoc2NvcGUgPT4gc2NvcGUudmlld3BvcnRJbnN0cnVjdGlvbik7XG4gICAgfVxuICAgIGZpbmRNYXRjaGluZ1JvdXRlKHBhdGgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNWaWV3cG9ydFNjb3BlICYmICF0aGlzLnBhc3NUaHJvdWdoU2NvcGUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbmRNYXRjaGluZ1JvdXRlSW5Sb3V0ZXMocGF0aCwgdGhpcy52aWV3cG9ydFNjb3BlLmdldFJvdXRlcygpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5pc1ZpZXdwb3J0KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5maW5kTWF0Y2hpbmdSb3V0ZUluUm91dGVzKHBhdGgsIHRoaXMudmlld3BvcnQuZ2V0Um91dGVzKCkpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRPRE86IE1hdGNoIHNwZWNpZmllZCBuYW1lcyBoZXJlXG4gICAgICAgIGZvciAoY29uc3QgY2hpbGQgb2YgdGhpcy5lbmFibGVkQ2hpbGRyZW4pIHtcbiAgICAgICAgICAgIGNvbnN0IGZvdW5kID0gY2hpbGQuZmluZE1hdGNoaW5nUm91dGUocGF0aCk7XG4gICAgICAgICAgICBpZiAoZm91bmQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZm91bmQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGFzeW5jIGNhbkxlYXZlKCkge1xuICAgICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5jaGlsZHJlbi5tYXAoY2hpbGQgPT4gY2hpbGQudmlld3BvcnQgIT09IG51bGxcbiAgICAgICAgICAgID8gY2hpbGQudmlld3BvcnQuY2FuTGVhdmUoKVxuICAgICAgICAgICAgOiBjaGlsZC5jYW5MZWF2ZSgpKSk7XG4gICAgICAgIHJldHVybiAhcmVzdWx0cy5zb21lKHJlc3VsdCA9PiByZXN1bHQgPT09IGZhbHNlKTtcbiAgICB9XG4gICAgZmluZE1hdGNoaW5nUm91dGVJblJvdXRlcyhwYXRoLCByb3V0ZXMpIHtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHJvdXRlcykpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJvdXRlcyA9IHJvdXRlcy5tYXAocm91dGUgPT4gdGhpcy5lbnN1cmVQcm9wZXJSb3V0ZShyb3V0ZSkpO1xuICAgICAgICBjb25zdCBjUm91dGVzID0gcm91dGVzLm1hcChyb3V0ZSA9PiAoe1xuICAgICAgICAgICAgcGF0aDogcm91dGUucGF0aCxcbiAgICAgICAgICAgIGhhbmRsZXI6IHJvdXRlLFxuICAgICAgICB9KSk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IGNSb3V0ZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgY29uc3QgY1JvdXRlID0gY1JvdXRlc1tpXTtcbiAgICAgICAgICAgIGNSb3V0ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgLi4uY1JvdXRlLFxuICAgICAgICAgICAgICAgIHBhdGg6IGAke2NSb3V0ZS5wYXRofS8qcmVtYWluaW5nUGF0aGAsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBmb3VuZCA9IG5ldyBGb3VuZFJvdXRlKCk7XG4gICAgICAgIGxldCBwYXJhbXMgPSB7fTtcbiAgICAgICAgaWYgKHBhdGguc3RhcnRzV2l0aCgnLycpIHx8IHBhdGguc3RhcnRzV2l0aCgnKycpKSB7XG4gICAgICAgICAgICBwYXRoID0gcGF0aC5zbGljZSgxKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZWNvZ25pemVyID0gbmV3IFJvdXRlUmVjb2duaXplcigpO1xuICAgICAgICByZWNvZ25pemVyLmFkZChjUm91dGVzKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gcmVjb2duaXplci5yZWNvZ25pemUocGF0aCk7XG4gICAgICAgIGlmIChyZXN1bHQgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGZvdW5kLm1hdGNoID0gcmVzdWx0LmVuZHBvaW50LnJvdXRlLmhhbmRsZXI7XG4gICAgICAgICAgICBmb3VuZC5tYXRjaGluZyA9IHBhdGg7XG4gICAgICAgICAgICBjb25zdCAkcGFyYW1zID0geyAuLi5yZXN1bHQucGFyYW1zIH07XG4gICAgICAgICAgICBpZiAoJHBhcmFtcy5yZW1haW5pbmdQYXRoICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICBmb3VuZC5yZW1haW5pbmcgPSAkcGFyYW1zLnJlbWFpbmluZ1BhdGg7XG4gICAgICAgICAgICAgICAgUmVmbGVjdC5kZWxldGVQcm9wZXJ0eSgkcGFyYW1zLCAncmVtYWluaW5nUGF0aCcpO1xuICAgICAgICAgICAgICAgIGZvdW5kLm1hdGNoaW5nID0gZm91bmQubWF0Y2hpbmcuc2xpY2UoMCwgZm91bmQubWF0Y2hpbmcuaW5kZXhPZihmb3VuZC5yZW1haW5pbmcpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcmFtcyA9ICRwYXJhbXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZvdW5kLmZvdW5kQ29uZmlndXJhdGlvbikge1xuICAgICAgICAgICAgLy8gY2xvbmUgaXQgc28gY29uZmlnIGRvZXNuJ3QgZ2V0IG1vZGlmaWVkXG4gICAgICAgICAgICBmb3VuZC5pbnN0cnVjdGlvbnMgPSB0aGlzLnJvdXRlci5pbnN0cnVjdGlvblJlc29sdmVyLmNsb25lVmlld3BvcnRJbnN0cnVjdGlvbnMoZm91bmQubWF0Y2guaW5zdHJ1Y3Rpb25zLCBmYWxzZSwgdHJ1ZSk7XG4gICAgICAgICAgICBjb25zdCBpbnN0cnVjdGlvbnMgPSBmb3VuZC5pbnN0cnVjdGlvbnMuc2xpY2UoKTtcbiAgICAgICAgICAgIHdoaWxlIChpbnN0cnVjdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGluc3RydWN0aW9uID0gaW5zdHJ1Y3Rpb25zLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb24uYWRkUGFyYW1ldGVycyhwYXJhbXMpO1xuICAgICAgICAgICAgICAgIGluc3RydWN0aW9uLnJvdXRlID0gJyc7XG4gICAgICAgICAgICAgICAgaWYgKGluc3RydWN0aW9uLm5leHRTY29wZUluc3RydWN0aW9ucyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbnMudW5zaGlmdCguLi5pbnN0cnVjdGlvbi5uZXh0U2NvcGVJbnN0cnVjdGlvbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChmb3VuZC5pbnN0cnVjdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGZvdW5kLmluc3RydWN0aW9uc1swXS5yb3V0ZSA9IGZvdW5kLm1hdGNoaW5nO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmb3VuZDtcbiAgICB9XG4gICAgZW5zdXJlUHJvcGVyUm91dGUocm91dGUpIHtcbiAgICAgICAgaWYgKHJvdXRlLmlkID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIHJvdXRlLmlkID0gcm91dGUucGF0aDtcbiAgICAgICAgfVxuICAgICAgICByb3V0ZS5pbnN0cnVjdGlvbnMgPSBOYXZpZ2F0aW9uSW5zdHJ1Y3Rpb25SZXNvbHZlci50b1ZpZXdwb3J0SW5zdHJ1Y3Rpb25zKHRoaXMucm91dGVyLCByb3V0ZS5pbnN0cnVjdGlvbnMpO1xuICAgICAgICByZXR1cm4gcm91dGU7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2NvcGUuanMubWFwIiwiaW1wb3J0IHsgX19kZWNvcmF0ZSwgX19tZXRhZGF0YSB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgYm91bmQgfSBmcm9tICdAYXVyZWxpYS9rZXJuZWwnO1xuZXhwb3J0IGNsYXNzIFF1ZXVlVGFzayB7XG4gICAgY29uc3RydWN0b3IodGFza1F1ZXVlLCBpdGVtLCBjb3N0ID0gMCkge1xuICAgICAgICB0aGlzLnRhc2tRdWV1ZSA9IHRhc2tRdWV1ZTtcbiAgICAgICAgdGhpcy5pdGVtID0gaXRlbTtcbiAgICAgICAgdGhpcy5jb3N0ID0gY29zdDtcbiAgICAgICAgdGhpcy5kb25lID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnRhc2tRdWV1ZS5yZXNvbHZlKHRoaXMsIHJlc29sdmUpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMucmVqZWN0ID0gKHJlYXNvbikgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudGFza1F1ZXVlLnJlamVjdCh0aGlzLCByZWplY3QsIHJlYXNvbik7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgZXhlY3V0ZSgpIHtcbiAgICAgICAgaWYgKCdleGVjdXRlJyBpbiB0aGlzLml0ZW0pIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuaXRlbS5leGVjdXRlKHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5pdGVtKHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHdhaXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb21pc2U7XG4gICAgfVxuICAgIGNhbkNhbmNlbCgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjYW5jZWwoKSB7IHJldHVybjsgfVxufVxuLyoqXG4gKiBBIGZpcnN0LWluLWZpcnN0LW91dCB0YXNrIHF1ZXVlIHRoYXQgb25seSBwcm9jZXNzZXMgdGhlIG5leHQgcXVldWVkIGl0ZW1cbiAqIHdoZW4gdGhlIGN1cnJlbnQgb25lIGhhcyBiZWVuIHJlc29sdmVkIG9yIHJlamVjdGVkLiBJZiBhIGNhbGxiYWNrIGZ1bmN0aW9uXG4gKiBpcyBzcGVjaWZpZWQsIGl0IHJlY2VpdmVzIHRoZSBxdWV1ZWQgaXRlbXMgYXMgdGFza3Mgb25lIGF0IGEgdGltZS4gSWYgbm9cbiAqIGNhbGxiYWNrIGlzIHNwZWNpZmllZCwgdGhlIHRhc2tzIHRoZW1zZWx2ZXMgYXJlIGVpdGhlciBleGVjdXRlZCAoaWYgYVxuICogZnVuY3Rpb24pIG9yIHRoZSBleGVjdXRlIG1ldGhvZCBpbiB0aGVtIGFyZSBydW4uIFRoZSBleGVjdXRlZCBmdW5jdGlvblxuICogc2hvdWxkIHJlc29sdmUgb3IgcmVqZWN0IHRoZSB0YXNrIHdoZW4gcHJvY2Vzc2luZyBpcyBkb25lLlxuICogRW5xdWV1ZWQgaXRlbXMnIHRhc2tzIGNhbiBiZSBhd2FpdGVkLiBFbnF1ZXVlZCBpdGVtcyBjYW4gc3BlY2lmeSBhblxuICogKGFyYml0cmFyeSkgZXhlY3V0aW9uIGNvc3QgYW5kIHRoZSBxdWV1ZSBjYW4gYmUgc2V0IHVwIChhY3RpdmF0ZWQpIHRvXG4gKiBvbmx5IHByb2Nlc3MgYSBzcGVjaWZpYyBhbW91bnQgb2YgZXhlY3V0aW9uIGNvc3QgcGVyIFJBRi90aWNrLlxuICovXG5leHBvcnQgY2xhc3MgVGFza1F1ZXVlIHtcbiAgICBjb25zdHJ1Y3RvcihjYWxsYmFjaykge1xuICAgICAgICB0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2s7XG4gICAgICAgIHRoaXMucGVuZGluZyA9IFtdO1xuICAgICAgICB0aGlzLnByb2Nlc3NpbmcgPSBudWxsO1xuICAgICAgICB0aGlzLmFsbG93ZWRFeGVjdXRpb25Db3N0V2l0aGluVGljayA9IG51bGw7XG4gICAgICAgIHRoaXMuY3VycmVudEV4ZWN1dGlvbkNvc3RJbkN1cnJlbnRUaWNrID0gMDtcbiAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBudWxsO1xuICAgICAgICB0aGlzLnRhc2sgPSBudWxsO1xuICAgIH1cbiAgICBnZXQgaXNBY3RpdmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRhc2sgIT09IG51bGw7XG4gICAgfVxuICAgIGdldCBsZW5ndGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBlbmRpbmcubGVuZ3RoO1xuICAgIH1cbiAgICBhY3RpdmF0ZShvcHRpb25zKSB7XG4gICAgICAgIGlmICh0aGlzLmlzQWN0aXZlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Rhc2tRdWV1ZSBoYXMgYWxyZWFkeSBiZWVuIGFjdGl2YXRlZCcpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2NoZWR1bGVyID0gb3B0aW9ucy5zY2hlZHVsZXI7XG4gICAgICAgIHRoaXMuYWxsb3dlZEV4ZWN1dGlvbkNvc3RXaXRoaW5UaWNrID0gb3B0aW9ucy5hbGxvd2VkRXhlY3V0aW9uQ29zdFdpdGhpblRpY2s7XG4gICAgICAgIHRoaXMudGFzayA9IHRoaXMuc2NoZWR1bGVyLnF1ZXVlUmVuZGVyVGFzayh0aGlzLmRlcXVldWUsIHsgcGVyc2lzdGVudDogdHJ1ZSB9KTtcbiAgICB9XG4gICAgZGVhY3RpdmF0ZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzQWN0aXZlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Rhc2tRdWV1ZSBoYXMgbm90IGJlZW4gYWN0aXZhdGVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50YXNrLmNhbmNlbCgpO1xuICAgICAgICB0aGlzLnRhc2sgPSBudWxsO1xuICAgICAgICB0aGlzLmFsbG93ZWRFeGVjdXRpb25Db3N0V2l0aGluVGljayA9IG51bGw7XG4gICAgICAgIHRoaXMuY2xlYXIoKTtcbiAgICB9XG4gICAgZW5xdWV1ZShpdGVtT3JJdGVtcywgY29zdE9yQ29zdHMpIHtcbiAgICAgICAgY29uc3QgbGlzdCA9IEFycmF5LmlzQXJyYXkoaXRlbU9ySXRlbXMpO1xuICAgICAgICBjb25zdCBpdGVtcyA9IChsaXN0ID8gaXRlbU9ySXRlbXMgOiBbaXRlbU9ySXRlbXNdKTtcbiAgICAgICAgY29uc3QgY29zdHMgPSBpdGVtc1xuICAgICAgICAgICAgLm1hcCgodmFsdWUsIGluZGV4KSA9PiAhQXJyYXkuaXNBcnJheShjb3N0T3JDb3N0cykgPyBjb3N0T3JDb3N0cyA6IGNvc3RPckNvc3RzW2luZGV4XSlcbiAgICAgICAgICAgIC5tYXAoKHZhbHVlKSA9PiB2YWx1ZSAhPT0gdW5kZWZpbmVkID8gdmFsdWUgOiAxKTtcbiAgICAgICAgY29uc3QgdGFza3MgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7XG4gICAgICAgICAgICB0YXNrcy5wdXNoKGl0ZW0gaW5zdGFuY2VvZiBRdWV1ZVRhc2tcbiAgICAgICAgICAgICAgICA/IGl0ZW1cbiAgICAgICAgICAgICAgICA6IHRoaXMuY3JlYXRlUXVldWVUYXNrKGl0ZW0sIGNvc3RzLnNoaWZ0KCkpKTsgLy8gVE9ETzogR2V0IGNhbmNlbGxhYmxlIGluIGFzIHdlbGxcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBlbmRpbmcucHVzaCguLi50YXNrcyk7XG4gICAgICAgIHRoaXMuZGVxdWV1ZSgpO1xuICAgICAgICByZXR1cm4gbGlzdCA/IHRhc2tzIDogdGFza3NbMF07XG4gICAgfVxuICAgIGNyZWF0ZVF1ZXVlVGFzayhpdGVtLCBjb3N0KSB7XG4gICAgICAgIHJldHVybiBuZXcgUXVldWVUYXNrKHRoaXMsIGl0ZW0sIGNvc3QpO1xuICAgIH1cbiAgICBkZXF1ZXVlKGRlbHRhKSB7XG4gICAgICAgIGlmICh0aGlzLnByb2Nlc3NpbmcgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGVsdGEgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50RXhlY3V0aW9uQ29zdEluQ3VycmVudFRpY2sgPSAwO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5wZW5kaW5nLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmFsbG93ZWRFeGVjdXRpb25Db3N0V2l0aGluVGljayAhPT0gbnVsbCAmJiBkZWx0YSA9PT0gdW5kZWZpbmVkICYmIHRoaXMuY3VycmVudEV4ZWN1dGlvbkNvc3RJbkN1cnJlbnRUaWNrICsgKHRoaXMucGVuZGluZ1swXS5jb3N0IHx8IDApID4gdGhpcy5hbGxvd2VkRXhlY3V0aW9uQ29zdFdpdGhpblRpY2spIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByb2Nlc3NpbmcgPSB0aGlzLnBlbmRpbmcuc2hpZnQoKSB8fCBudWxsO1xuICAgICAgICBpZiAodGhpcy5wcm9jZXNzaW5nKSB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRFeGVjdXRpb25Db3N0SW5DdXJyZW50VGljayArPSB0aGlzLnByb2Nlc3NpbmcuY29zdCB8fCAwO1xuICAgICAgICAgICAgaWYgKHRoaXMuY2FsbGJhY2sgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2FsbGJhY2sodGhpcy5wcm9jZXNzaW5nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIERvbid0IG5lZWQgdG8gYXdhaXQgdGhpcyBzaW5jZSBuZXh0IHRhc2sgd29uJ3QgYmUgZGVxdWV1ZWQgdW50aWxcbiAgICAgICAgICAgICAgICAvLyBleGVjdXRlZCBmdW5jdGlvbiBpcyByZXNvbHZlZFxuICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc2luZy5leGVjdXRlKCkuY2F0Y2goZXJyb3IgPT4geyB0aHJvdyBlcnJvcjsgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2xlYXIoKSB7XG4gICAgICAgIHRoaXMucGVuZGluZy5zcGxpY2UoMCwgdGhpcy5wZW5kaW5nLmxlbmd0aCk7XG4gICAgfVxuICAgIHJlc29sdmUodGFzaywgcmVzb2x2ZSkge1xuICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIHRoaXMucHJvY2Vzc2luZyA9IG51bGw7XG4gICAgICAgIHRoaXMuZGVxdWV1ZSgpO1xuICAgIH1cbiAgICByZWplY3QodGFzaywgcmVqZWN0LCByZWFzb24pIHtcbiAgICAgICAgcmVqZWN0KHJlYXNvbik7XG4gICAgICAgIHRoaXMucHJvY2Vzc2luZyA9IG51bGw7XG4gICAgICAgIHRoaXMuZGVxdWV1ZSgpO1xuICAgIH1cbn1cbl9fZGVjb3JhdGUoW1xuICAgIGJvdW5kLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBGdW5jdGlvbiksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtOdW1iZXJdKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnJldHVybnR5cGVcIiwgdm9pZCAwKVxuXSwgVGFza1F1ZXVlLnByb3RvdHlwZSwgXCJkZXF1ZXVlXCIsIG51bGwpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGFzay1xdWV1ZS5qcy5tYXAiLCJpbXBvcnQgeyBDdXN0b21FbGVtZW50IH0gZnJvbSAnQGF1cmVsaWEvcnVudGltZSc7XG5pbXBvcnQgeyBWaWV3cG9ydCB9IGZyb20gJy4vdmlld3BvcnQnO1xuaW1wb3J0IHsgVmlld3BvcnRJbnN0cnVjdGlvbiB9IGZyb20gJy4vdmlld3BvcnQtaW5zdHJ1Y3Rpb24nO1xuZXhwb3J0IGNvbnN0IENvbXBvbmVudEFwcGVsbGF0aW9uUmVzb2x2ZXIgPSB7XG4gICAgaXNOYW1lOiBmdW5jdGlvbiAoY29tcG9uZW50KSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgY29tcG9uZW50ID09PSAnc3RyaW5nJztcbiAgICB9LFxuICAgIGlzVHlwZTogZnVuY3Rpb24gKGNvbXBvbmVudCkge1xuICAgICAgICByZXR1cm4gQ3VzdG9tRWxlbWVudC5pc1R5cGUoY29tcG9uZW50KTtcbiAgICB9LFxuICAgIGlzSW5zdGFuY2U6IGZ1bmN0aW9uIChjb21wb25lbnQpIHtcbiAgICAgICAgcmV0dXJuICFDb21wb25lbnRBcHBlbGxhdGlvblJlc29sdmVyLmlzTmFtZShjb21wb25lbnQpICYmICFDb21wb25lbnRBcHBlbGxhdGlvblJlc29sdmVyLmlzVHlwZShjb21wb25lbnQpO1xuICAgIH0sXG4gICAgZ2V0TmFtZTogZnVuY3Rpb24gKGNvbXBvbmVudCkge1xuICAgICAgICBpZiAoQ29tcG9uZW50QXBwZWxsYXRpb25SZXNvbHZlci5pc05hbWUoY29tcG9uZW50KSkge1xuICAgICAgICAgICAgcmV0dXJuIGNvbXBvbmVudDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChDb21wb25lbnRBcHBlbGxhdGlvblJlc29sdmVyLmlzVHlwZShjb21wb25lbnQpKSB7XG4gICAgICAgICAgICByZXR1cm4gQ3VzdG9tRWxlbWVudC5nZXREZWZpbml0aW9uKGNvbXBvbmVudCkubmFtZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBDb21wb25lbnRBcHBlbGxhdGlvblJlc29sdmVyLmdldE5hbWUoY29tcG9uZW50LmNvbnN0cnVjdG9yKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgZ2V0VHlwZTogZnVuY3Rpb24gKGNvbXBvbmVudCkge1xuICAgICAgICBpZiAoQ29tcG9uZW50QXBwZWxsYXRpb25SZXNvbHZlci5pc05hbWUoY29tcG9uZW50KSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoQ29tcG9uZW50QXBwZWxsYXRpb25SZXNvbHZlci5pc1R5cGUoY29tcG9uZW50KSkge1xuICAgICAgICAgICAgcmV0dXJuIGNvbXBvbmVudDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBjb21wb25lbnQuY29uc3RydWN0b3I7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGdldEluc3RhbmNlOiBmdW5jdGlvbiAoY29tcG9uZW50KSB7XG4gICAgICAgIGlmIChDb21wb25lbnRBcHBlbGxhdGlvblJlc29sdmVyLmlzTmFtZShjb21wb25lbnQpIHx8IENvbXBvbmVudEFwcGVsbGF0aW9uUmVzb2x2ZXIuaXNUeXBlKGNvbXBvbmVudCkpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGNvbXBvbmVudDtcbiAgICAgICAgfVxuICAgIH0sXG59O1xuZXhwb3J0IGNvbnN0IFZpZXdwb3J0SGFuZGxlUmVzb2x2ZXIgPSB7XG4gICAgaXNOYW1lOiBmdW5jdGlvbiAodmlld3BvcnQpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiB2aWV3cG9ydCA9PT0gJ3N0cmluZyc7XG4gICAgfSxcbiAgICBpc0luc3RhbmNlOiBmdW5jdGlvbiAodmlld3BvcnQpIHtcbiAgICAgICAgcmV0dXJuIHZpZXdwb3J0IGluc3RhbmNlb2YgVmlld3BvcnQ7XG4gICAgfSxcbiAgICBnZXROYW1lOiBmdW5jdGlvbiAodmlld3BvcnQpIHtcbiAgICAgICAgaWYgKFZpZXdwb3J0SGFuZGxlUmVzb2x2ZXIuaXNOYW1lKHZpZXdwb3J0KSkge1xuICAgICAgICAgICAgcmV0dXJuIHZpZXdwb3J0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHZpZXdwb3J0ID8gKHZpZXdwb3J0KS5uYW1lIDogbnVsbDtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgZ2V0SW5zdGFuY2U6IGZ1bmN0aW9uICh2aWV3cG9ydCkge1xuICAgICAgICBpZiAoVmlld3BvcnRIYW5kbGVSZXNvbHZlci5pc05hbWUodmlld3BvcnQpKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB2aWV3cG9ydDtcbiAgICAgICAgfVxuICAgIH0sXG59O1xuZXhwb3J0IGNvbnN0IE5hdmlnYXRpb25JbnN0cnVjdGlvblJlc29sdmVyID0ge1xuICAgIGNyZWF0ZVZpZXdwb3J0SW5zdHJ1Y3Rpb25zOiBmdW5jdGlvbiAocm91dGVyLCBuYXZpZ2F0aW9uSW5zdHJ1Y3Rpb25zLCBvcHRpb25zKSB7XG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICBsZXQgc2NvcGUgPSBudWxsO1xuICAgICAgICBpZiAob3B0aW9ucy5jb250ZXh0KSB7XG4gICAgICAgICAgICBzY29wZSA9IHJvdXRlci5maW5kU2NvcGUob3B0aW9ucy5jb250ZXh0KTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbmF2aWdhdGlvbkluc3RydWN0aW9ucyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAvLyBJZiBpdCdzIG5vdCBmcm9tIHNjb3BlIHJvb3QsIGZpZ3VyZSBvdXQgd2hpY2ggc2NvcGVcbiAgICAgICAgICAgICAgICBpZiAoIW5hdmlnYXRpb25JbnN0cnVjdGlvbnMuc3RhcnRzV2l0aCgnLycpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFNjb3BlIG1vZGlmaWNhdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5hdmlnYXRpb25JbnN0cnVjdGlvbnMuc3RhcnRzV2l0aCgnLicpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgc2FtZSBhcyBubyBzY29wZSBtb2RpZmljYXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuYXZpZ2F0aW9uSW5zdHJ1Y3Rpb25zLnN0YXJ0c1dpdGgoJy4vJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYXZpZ2F0aW9uSW5zdHJ1Y3Rpb25zID0gbmF2aWdhdGlvbkluc3RydWN0aW9ucy5zbGljZSgyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpbmQgb3V0IGhvdyBtYW55IHNjb3BlcyB1cHdhcmRzIHdlIHNob3VsZCBtb3ZlXG4gICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAobmF2aWdhdGlvbkluc3RydWN0aW9ucy5zdGFydHNXaXRoKCcuLi8nKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlID0gc2NvcGUucGFyZW50IHx8IHNjb3BlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hdmlnYXRpb25JbnN0cnVjdGlvbnMgPSBuYXZpZ2F0aW9uSW5zdHJ1Y3Rpb25zLnNsaWNlKDMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChzY29wZS5wYXRoICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYXZpZ2F0aW9uSW5zdHJ1Y3Rpb25zID0gYCR7c2NvcGUucGF0aH0vJHtuYXZpZ2F0aW9uSW5zdHJ1Y3Rpb25zfWA7XG4gICAgICAgICAgICAgICAgICAgICAgICBzY29wZSA9IHJvdXRlci5yb290U2NvcGUuc2NvcGU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7IC8vIFNwZWNpZmllZCByb290IHNjb3BlIHdpdGggL1xuICAgICAgICAgICAgICAgICAgICBzY29wZSA9IHJvdXRlci5yb290U2NvcGUuc2NvcGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbmF2aWdhdGlvbkluc3RydWN0aW9ucyA9IE5hdmlnYXRpb25JbnN0cnVjdGlvblJlc29sdmVyLnRvVmlld3BvcnRJbnN0cnVjdGlvbnMocm91dGVyLCBuYXZpZ2F0aW9uSW5zdHJ1Y3Rpb25zKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGluc3RydWN0aW9uIG9mIG5hdmlnYXRpb25JbnN0cnVjdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluc3RydWN0aW9uLnNjb3BlID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbi5zY29wZSA9IHNjb3BlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpbnN0cnVjdGlvbnM6IG5hdmlnYXRpb25JbnN0cnVjdGlvbnMsXG4gICAgICAgICAgICBzY29wZSxcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIHRvVmlld3BvcnRJbnN0cnVjdGlvbnM6IGZ1bmN0aW9uIChyb3V0ZXIsIG5hdmlnYXRpb25JbnN0cnVjdGlvbnMpIHtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KG5hdmlnYXRpb25JbnN0cnVjdGlvbnMpKSB7XG4gICAgICAgICAgICByZXR1cm4gTmF2aWdhdGlvbkluc3RydWN0aW9uUmVzb2x2ZXIudG9WaWV3cG9ydEluc3RydWN0aW9ucyhyb3V0ZXIsIFtuYXZpZ2F0aW9uSW5zdHJ1Y3Rpb25zXSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaW5zdHJ1Y3Rpb25zID0gW107XG4gICAgICAgIGZvciAoY29uc3QgaW5zdHJ1Y3Rpb24gb2YgbmF2aWdhdGlvbkluc3RydWN0aW9ucykge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBpbnN0cnVjdGlvbiA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbnMucHVzaCguLi5yb3V0ZXIuaW5zdHJ1Y3Rpb25SZXNvbHZlci5wYXJzZVZpZXdwb3J0SW5zdHJ1Y3Rpb25zKGluc3RydWN0aW9uKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpbnN0cnVjdGlvbiBpbnN0YW5jZW9mIFZpZXdwb3J0SW5zdHJ1Y3Rpb24pIHtcbiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbnMucHVzaChpbnN0cnVjdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpbnN0cnVjdGlvbi5jb21wb25lbnQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB2aWV3cG9ydENvbXBvbmVudCA9IGluc3RydWN0aW9uO1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld0luc3RydWN0aW9uID0gcm91dGVyLmNyZWF0ZVZpZXdwb3J0SW5zdHJ1Y3Rpb24odmlld3BvcnRDb21wb25lbnQuY29tcG9uZW50LCB2aWV3cG9ydENvbXBvbmVudC52aWV3cG9ydCwgdmlld3BvcnRDb21wb25lbnQucGFyYW1ldGVycyk7XG4gICAgICAgICAgICAgICAgaWYgKHZpZXdwb3J0Q29tcG9uZW50LmNoaWxkcmVuICE9PSB2b2lkIDAgJiYgdmlld3BvcnRDb21wb25lbnQuY2hpbGRyZW4gIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3SW5zdHJ1Y3Rpb24ubmV4dFNjb3BlSW5zdHJ1Y3Rpb25zID0gTmF2aWdhdGlvbkluc3RydWN0aW9uUmVzb2x2ZXIudG9WaWV3cG9ydEluc3RydWN0aW9ucyhyb3V0ZXIsIHZpZXdwb3J0Q29tcG9uZW50LmNoaWxkcmVuKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zLnB1c2gobmV3SW5zdHJ1Y3Rpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zLnB1c2gocm91dGVyLmNyZWF0ZVZpZXdwb3J0SW5zdHJ1Y3Rpb24oaW5zdHJ1Y3Rpb24pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5zdHJ1Y3Rpb25zO1xuICAgIH0sXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHlwZS1yZXNvbHZlcnMuanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIGFycmF5UmVtb3ZlKGFyciwgZnVuYykge1xuICAgIGNvbnN0IHJlbW92ZWQgPSBbXTtcbiAgICBsZXQgYXJySW5kZXggPSBhcnIuZmluZEluZGV4KGZ1bmMpO1xuICAgIHdoaWxlIChhcnJJbmRleCA+PSAwKSB7XG4gICAgICAgIHJlbW92ZWQucHVzaChhcnIuc3BsaWNlKGFyckluZGV4LCAxKVswXSk7XG4gICAgICAgIGFyckluZGV4ID0gYXJyLmZpbmRJbmRleChmdW5jKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlbW92ZWQ7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD11dGlscy5qcy5tYXAiLCJpbXBvcnQgeyBSZXBvcnRlciB9IGZyb20gJ0BhdXJlbGlhL2tlcm5lbCc7XG5pbXBvcnQgeyBDb250cm9sbGVyLCBJTGlmZWN5Y2xlLCBDdXN0b21FbGVtZW50IH0gZnJvbSAnQGF1cmVsaWEvcnVudGltZSc7XG5pbXBvcnQgeyBwYXJzZVF1ZXJ5IH0gZnJvbSAnLi9wYXJzZXInO1xuaW1wb3J0IHsgVmlld3BvcnRJbnN0cnVjdGlvbiB9IGZyb20gJy4vdmlld3BvcnQtaW5zdHJ1Y3Rpb24nO1xuZXhwb3J0IHZhciBDb250ZW50U3RhdHVzO1xuKGZ1bmN0aW9uIChDb250ZW50U3RhdHVzKSB7XG4gICAgQ29udGVudFN0YXR1c1tDb250ZW50U3RhdHVzW1wibm9uZVwiXSA9IDBdID0gXCJub25lXCI7XG4gICAgQ29udGVudFN0YXR1c1tDb250ZW50U3RhdHVzW1wiY3JlYXRlZFwiXSA9IDFdID0gXCJjcmVhdGVkXCI7XG4gICAgQ29udGVudFN0YXR1c1tDb250ZW50U3RhdHVzW1wibG9hZGVkXCJdID0gMl0gPSBcImxvYWRlZFwiO1xuICAgIENvbnRlbnRTdGF0dXNbQ29udGVudFN0YXR1c1tcImluaXRpYWxpemVkXCJdID0gM10gPSBcImluaXRpYWxpemVkXCI7XG4gICAgQ29udGVudFN0YXR1c1tDb250ZW50U3RhdHVzW1wiYWRkZWRcIl0gPSA0XSA9IFwiYWRkZWRcIjtcbn0pKENvbnRlbnRTdGF0dXMgfHwgKENvbnRlbnRTdGF0dXMgPSB7fSkpO1xuZXhwb3J0IGNsYXNzIFZpZXdwb3J0Q29udGVudCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLy8gQ2FuIChhbmQgd2FudHMpIGJlIGEgKHJlc29sdmVkKSB0eXBlIG9yIGEgc3RyaW5nICh0byBiZSByZXNvbHZlZCBsYXRlcilcbiAgICBjb250ZW50ID0gbmV3IFZpZXdwb3J0SW5zdHJ1Y3Rpb24oJycpLCBpbnN0cnVjdGlvbiA9IHtcbiAgICAgICAgaW5zdHJ1Y3Rpb246ICcnLFxuICAgICAgICBmdWxsU3RhdGVJbnN0cnVjdGlvbjogJycsXG4gICAgfSwgY29udGFpbmVyID0gbnVsbCkge1xuICAgICAgICB0aGlzLmNvbnRlbnQgPSBjb250ZW50O1xuICAgICAgICB0aGlzLmluc3RydWN0aW9uID0gaW5zdHJ1Y3Rpb247XG4gICAgICAgIHRoaXMuY29udGVudFN0YXR1cyA9IDAgLyogbm9uZSAqLztcbiAgICAgICAgdGhpcy5lbnRlcmVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZnJvbUNhY2hlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZnJvbUhpc3RvcnkgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5yZWVudHJ5ID0gZmFsc2U7XG4gICAgICAgIC8vIElmIHdlJ3ZlIGdvdCBhIGNvbnRhaW5lciwgd2UncmUgZ29vZCB0byByZXNvbHZlIHR5cGVcbiAgICAgICAgaWYgKCF0aGlzLmNvbnRlbnQuaXNDb21wb25lbnRUeXBlKCkgJiYgY29udGFpbmVyICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnQuY29tcG9uZW50VHlwZSA9IHRoaXMudG9Db21wb25lbnRUeXBlKGNvbnRhaW5lcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGNvbXBvbmVudEluc3RhbmNlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250ZW50LmNvbXBvbmVudEluc3RhbmNlO1xuICAgIH1cbiAgICBnZXQgdmlld3BvcnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRlbnQudmlld3BvcnQ7XG4gICAgfVxuICAgIGVxdWFsQ29tcG9uZW50KG90aGVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRlbnQuc2FtZUNvbXBvbmVudChvdGhlci5jb250ZW50KTtcbiAgICB9XG4gICAgZXF1YWxQYXJhbWV0ZXJzKG90aGVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRlbnQuc2FtZUNvbXBvbmVudChvdGhlci5jb250ZW50LCB0cnVlKSAmJlxuICAgICAgICAgICAgLy8gVE9ETzogUmV2aWV3IHdoZXRoZXIgcXVlcnkgaXMgcmVsZXZhbnRcbiAgICAgICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb24ucXVlcnkgPT09IG90aGVyLmluc3RydWN0aW9uLnF1ZXJ5O1xuICAgIH1cbiAgICByZWVudHJ5QmVoYXZpb3IoKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5jb250ZW50LmNvbXBvbmVudEluc3RhbmNlICE9PSBudWxsICYmXG4gICAgICAgICAgICAncmVlbnRyeUJlaGF2aW9yJyBpbiB0aGlzLmNvbnRlbnQuY29tcG9uZW50SW5zdGFuY2UgJiZcbiAgICAgICAgICAgIHRoaXMuY29udGVudC5jb21wb25lbnRJbnN0YW5jZS5yZWVudHJ5QmVoYXZpb3IgIT09IHZvaWQgMClcbiAgICAgICAgICAgID8gdGhpcy5jb250ZW50LmNvbXBvbmVudEluc3RhbmNlLnJlZW50cnlCZWhhdmlvclxuICAgICAgICAgICAgOiBcImRlZmF1bHRcIiAvKiBkZWZhdWx0ICovO1xuICAgIH1cbiAgICBpc0NhY2hlRXF1YWwob3RoZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudC5zYW1lQ29tcG9uZW50KG90aGVyLmNvbnRlbnQsIHRydWUpO1xuICAgIH1cbiAgICBjcmVhdGVDb21wb25lbnQoY29udGFpbmVyLCBmYWxsYmFjaykge1xuICAgICAgICBpZiAodGhpcy5jb250ZW50U3RhdHVzICE9PSAwIC8qIG5vbmUgKi8pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBEb24ndCBsb2FkIGNhY2hlZCBjb250ZW50IG9yIGluc3RhbnRpYXRlZCBoaXN0b3J5IGNvbnRlbnRcbiAgICAgICAgaWYgKCF0aGlzLmZyb21DYWNoZSAmJiAhdGhpcy5mcm9tSGlzdG9yeSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRlbnQuY29tcG9uZW50SW5zdGFuY2UgPSB0aGlzLnRvQ29tcG9uZW50SW5zdGFuY2UoY29udGFpbmVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZhbGxiYWNrICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250ZW50LnNldFBhcmFtZXRlcnMoeyBpZDogdGhpcy5jb250ZW50LmNvbXBvbmVudE5hbWUgfSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGVudC5zZXRDb21wb25lbnQoZmFsbGJhY2spO1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250ZW50LmNvbXBvbmVudEluc3RhbmNlID0gdGhpcy50b0NvbXBvbmVudEluc3RhbmNlKGNvbnRhaW5lcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvbnRlbnRTdGF0dXMgPSAxIC8qIGNyZWF0ZWQgKi87XG4gICAgfVxuICAgIGRlc3Ryb3lDb21wb25lbnQoKSB7XG4gICAgICAgIC8vIFRPRE86IFdlIG1pZ2h0IHdhbnQgdG8gZG8gc29tZXRoaW5nIGhlcmUgZXZlbnR1YWxseSwgd2hvIGtub3dzP1xuICAgICAgICBpZiAodGhpcy5jb250ZW50U3RhdHVzICE9PSAxIC8qIGNyZWF0ZWQgKi8pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBEb24ndCBkZXN0cm95IGNvbXBvbmVudHMgd2hlbiBzdGF0ZWZ1bFxuICAgICAgICB0aGlzLmNvbnRlbnRTdGF0dXMgPSAwIC8qIG5vbmUgKi87XG4gICAgfVxuICAgIGFzeW5jIGNhbkVudGVyKHZpZXdwb3J0LCBwcmV2aW91c0luc3RydWN0aW9uKSB7XG4gICAgICAgIGlmICghdGhpcy5jb250ZW50LmNvbXBvbmVudEluc3RhbmNlKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLmNvbnRlbnQuY29tcG9uZW50SW5zdGFuY2UuY2FuRW50ZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHR5cGVQYXJhbWV0ZXJzID0gdGhpcy5jb250ZW50LmNvbXBvbmVudFR5cGUgPyB0aGlzLmNvbnRlbnQuY29tcG9uZW50VHlwZS5wYXJhbWV0ZXJzIDogbnVsbDtcbiAgICAgICAgdGhpcy5pbnN0cnVjdGlvbi5wYXJhbWV0ZXJzID0gdGhpcy5jb250ZW50LnRvU3BlY2lmaWVkUGFyYW1ldGVycyh0eXBlUGFyYW1ldGVycyk7XG4gICAgICAgIGNvbnN0IG1lcmdlZCA9IHsgLi4ucGFyc2VRdWVyeSh0aGlzLmluc3RydWN0aW9uLnF1ZXJ5KSwgLi4udGhpcy5pbnN0cnVjdGlvbi5wYXJhbWV0ZXJzIH07XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuY29udGVudC5jb21wb25lbnRJbnN0YW5jZS5jYW5FbnRlcihtZXJnZWQsIHRoaXMuaW5zdHJ1Y3Rpb24sIHByZXZpb3VzSW5zdHJ1Y3Rpb24pO1xuICAgICAgICBSZXBvcnRlci53cml0ZSgxMDAwMCwgJ3ZpZXdwb3J0IGNhbkVudGVyJywgcmVzdWx0KTtcbiAgICAgICAgaWYgKHR5cGVvZiByZXN1bHQgPT09ICdib29sZWFuJykge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHJlc3VsdCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHJldHVybiBbdmlld3BvcnQucm91dGVyLmNyZWF0ZVZpZXdwb3J0SW5zdHJ1Y3Rpb24ocmVzdWx0LCB2aWV3cG9ydCldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGFzeW5jIGNhbkxlYXZlKG5leHRJbnN0cnVjdGlvbikge1xuICAgICAgICBpZiAoIXRoaXMuY29udGVudC5jb21wb25lbnRJbnN0YW5jZSB8fCAhdGhpcy5jb250ZW50LmNvbXBvbmVudEluc3RhbmNlLmNhbkxlYXZlKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLmNvbnRlbnQuY29tcG9uZW50SW5zdGFuY2UuY2FuTGVhdmUobmV4dEluc3RydWN0aW9uLCB0aGlzLmluc3RydWN0aW9uKTtcbiAgICAgICAgUmVwb3J0ZXIud3JpdGUoMTAwMDAsICd2aWV3cG9ydCBjYW5MZWF2ZScsIHJlc3VsdCk7XG4gICAgICAgIGlmICh0eXBlb2YgcmVzdWx0ID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgYXN5bmMgZW50ZXIocHJldmlvdXNJbnN0cnVjdGlvbikge1xuICAgICAgICAvLyBpZiAoIXRoaXMucmVlbnRyeSAmJiAodGhpcy5jb250ZW50U3RhdHVzICE9PSBDb250ZW50U3RhdHVzLmNyZWF0ZWQgfHwgdGhpcy5lbnRlcmVkKSkge1xuICAgICAgICBpZiAoIXRoaXMucmVlbnRyeSAmJiAodGhpcy5jb250ZW50U3RhdHVzICE9PSAyIC8qIGxvYWRlZCAqLyB8fCB0aGlzLmVudGVyZWQpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY29udGVudC5jb21wb25lbnRJbnN0YW5jZSAmJiB0aGlzLmNvbnRlbnQuY29tcG9uZW50SW5zdGFuY2UuZW50ZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IHR5cGVQYXJhbWV0ZXJzID0gdGhpcy5jb250ZW50LmNvbXBvbmVudFR5cGUgPyB0aGlzLmNvbnRlbnQuY29tcG9uZW50VHlwZS5wYXJhbWV0ZXJzIDogbnVsbDtcbiAgICAgICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb24ucGFyYW1ldGVycyA9IHRoaXMuY29udGVudC50b1NwZWNpZmllZFBhcmFtZXRlcnModHlwZVBhcmFtZXRlcnMpO1xuICAgICAgICAgICAgY29uc3QgbWVyZ2VkID0geyAuLi5wYXJzZVF1ZXJ5KHRoaXMuaW5zdHJ1Y3Rpb24ucXVlcnkpLCAuLi50aGlzLmluc3RydWN0aW9uLnBhcmFtZXRlcnMgfTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY29udGVudC5jb21wb25lbnRJbnN0YW5jZS5lbnRlcihtZXJnZWQsIHRoaXMuaW5zdHJ1Y3Rpb24sIHByZXZpb3VzSW5zdHJ1Y3Rpb24pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZW50ZXJlZCA9IHRydWU7XG4gICAgfVxuICAgIGFzeW5jIGxlYXZlKG5leHRJbnN0cnVjdGlvbikge1xuICAgICAgICBpZiAodGhpcy5jb250ZW50U3RhdHVzICE9PSA0IC8qIGFkZGVkICovIHx8ICF0aGlzLmVudGVyZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5jb250ZW50LmNvbXBvbmVudEluc3RhbmNlICYmIHRoaXMuY29udGVudC5jb21wb25lbnRJbnN0YW5jZS5sZWF2ZSkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5jb250ZW50LmNvbXBvbmVudEluc3RhbmNlLmxlYXZlKG5leHRJbnN0cnVjdGlvbiwgdGhpcy5pbnN0cnVjdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbnRlcmVkID0gZmFsc2U7XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvcmVxdWlyZS1hd2FpdFxuICAgIGFzeW5jIGxvYWRDb21wb25lbnQoY29udGFpbmVyLCBlbGVtZW50LCB2aWV3cG9ydCkge1xuICAgICAgICAvLyBpZiAodGhpcy5jb250ZW50U3RhdHVzICE9PSBDb250ZW50U3RhdHVzLmNyZWF0ZWQgfHwgIXRoaXMuZW50ZXJlZCB8fCAhdGhpcy5jb250ZW50LmNvbXBvbmVudEluc3RhbmNlKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbnRlbnRTdGF0dXMgIT09IDEgLyogY3JlYXRlZCAqLyB8fCB0aGlzLmVudGVyZWQgfHwgIXRoaXMuY29udGVudC5jb21wb25lbnRJbnN0YW5jZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIERvbid0IGxvYWQgY2FjaGVkIGNvbnRlbnQgb3IgaW5zdGFudGlhdGVkIGhpc3RvcnkgY29udGVudFxuICAgICAgICBpZiAoIXRoaXMuZnJvbUNhY2hlIHx8ICF0aGlzLmZyb21IaXN0b3J5KSB7XG4gICAgICAgICAgICBjb25zdCBob3N0ID0gZWxlbWVudDtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2xsZXIgPSBDb250cm9sbGVyLmZvckN1c3RvbUVsZW1lbnQodGhpcy5jb250ZW50LmNvbXBvbmVudEluc3RhbmNlLCBjb250YWluZXIuZ2V0KElMaWZlY3ljbGUpLCBob3N0LCBjb250YWluZXIsIHZvaWQgMCwgdm9pZCAwKTtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIucGFyZW50ID0gQ3VzdG9tRWxlbWVudC5mb3IoZWxlbWVudCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb250ZW50U3RhdHVzID0gMiAvKiBsb2FkZWQgKi87XG4gICAgfVxuICAgIHVubG9hZENvbXBvbmVudChjYWNoZSwgc3RhdGVmdWwgPSBmYWxzZSkge1xuICAgICAgICAvLyBUT0RPOiBXZSBtaWdodCB3YW50IHRvIGRvIHNvbWV0aGluZyBoZXJlIGV2ZW50dWFsbHksIHdobyBrbm93cz9cbiAgICAgICAgaWYgKHRoaXMuY29udGVudFN0YXR1cyAhPT0gMiAvKiBsb2FkZWQgKi8pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBEb24ndCB1bmxvYWQgY29tcG9uZW50cyB3aGVuIHN0YXRlZnVsXG4gICAgICAgIGlmICghc3RhdGVmdWwpIHtcbiAgICAgICAgICAgIHRoaXMuY29udGVudFN0YXR1cyA9IDEgLyogY3JlYXRlZCAqLztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlLnB1c2godGhpcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaW5pdGlhbGl6ZUNvbXBvbmVudChwYXJlbnQpIHtcbiAgICAgICAgaWYgKHRoaXMuY29udGVudFN0YXR1cyAhPT0gMiAvKiBsb2FkZWQgKi8pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBEb24ndCBpbml0aWFsaXplIGNhY2hlZCBjb250ZW50IG9yIGluc3RhbnRpYXRlZCBoaXN0b3J5IGNvbnRlbnRcbiAgICAgICAgLy8gaWYgKCF0aGlzLmZyb21DYWNoZSB8fCAhdGhpcy5mcm9tSGlzdG9yeSkge1xuICAgICAgICAvLyAoKHRoaXMuY29udGVudC5jb21wb25lbnRJbnN0YW5jZSBhcyBJUm91dGVhYmxlQ29tcG9uZW50KS4kY29udHJvbGxlciBhcyBJQ29udHJvbGxlcikucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB0aGlzLmNvbnRlbnQuY29tcG9uZW50SW5zdGFuY2UuJGNvbnRyb2xsZXIuYmluZCgxMDI0IC8qIGZyb21TdGFydFRhc2sgKi8gfCA0MDk2IC8qIGZyb21CaW5kICovKTtcbiAgICAgICAgLy8gfVxuICAgICAgICB0aGlzLmNvbnRlbnRTdGF0dXMgPSAzIC8qIGluaXRpYWxpemVkICovO1xuICAgIH1cbiAgICBhc3luYyB0ZXJtaW5hdGVDb21wb25lbnQoc3RhdGVmdWwgPSBmYWxzZSkge1xuICAgICAgICBpZiAodGhpcy5jb250ZW50U3RhdHVzICE9PSAzIC8qIGluaXRpYWxpemVkICovKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gRG9uJ3QgdGVybWluYXRlIGNhY2hlZCBjb250ZW50XG4gICAgICAgIC8vIGlmICghc3RhdGVmdWwpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5jb250ZW50LmNvbXBvbmVudEluc3RhbmNlLiRjb250cm9sbGVyLnVuYmluZCgyMDQ4IC8qIGZyb21TdG9wVGFzayAqLyB8IDgxOTIgLyogZnJvbVVuYmluZCAqLykud2FpdCgpO1xuICAgICAgICAvLyAoKHRoaXMuY29udGVudC5jb21wb25lbnRJbnN0YW5jZSBhcyBJUm91dGVhYmxlQ29tcG9uZW50KS4kY29udHJvbGxlciBhcyBJQ29udHJvbGxlcikucGFyZW50ID0gdm9pZCAwO1xuICAgICAgICAvLyB9XG4gICAgICAgIHRoaXMuY29udGVudFN0YXR1cyA9IDIgLyogbG9hZGVkICovO1xuICAgIH1cbiAgICBhZGRDb21wb25lbnQoZWxlbWVudCkge1xuICAgICAgICBpZiAodGhpcy5jb250ZW50U3RhdHVzICE9PSAzIC8qIGluaXRpYWxpemVkICovKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb250ZW50LmNvbXBvbmVudEluc3RhbmNlLiRjb250cm9sbGVyLmF0dGFjaCgxMDI0IC8qIGZyb21TdGFydFRhc2sgKi8pO1xuICAgICAgICBpZiAodGhpcy5mcm9tQ2FjaGUgfHwgdGhpcy5mcm9tSGlzdG9yeSkge1xuICAgICAgICAgICAgY29uc3QgZWxlbWVudHMgPSBBcnJheS5mcm9tKGVsZW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJyonKSk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGVsIG9mIGVsZW1lbnRzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYXR0ciA9IGVsLmdldEF0dHJpYnV0ZSgnYXUtZWxlbWVudC1zY3JvbGwnKTtcbiAgICAgICAgICAgICAgICBpZiAoYXR0cikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBbdG9wLCBsZWZ0XSA9IGF0dHIuc3BsaXQoJywnKTtcbiAgICAgICAgICAgICAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKCdhdS1lbGVtZW50LXNjcm9sbCcpO1xuICAgICAgICAgICAgICAgICAgICBlbC5zY3JvbGxUbygrbGVmdCwgK3RvcCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuY29udGVudFN0YXR1cyA9IDQgLyogYWRkZWQgKi87XG4gICAgfVxuICAgIHJlbW92ZUNvbXBvbmVudChlbGVtZW50LCBzdGF0ZWZ1bCA9IGZhbHNlKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbnRlbnRTdGF0dXMgIT09IDQgLyogYWRkZWQgKi8gfHwgdGhpcy5lbnRlcmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0YXRlZnVsICYmIGVsZW1lbnQgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnRzID0gQXJyYXkuZnJvbShlbGVtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCcqJykpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBlbCBvZiBlbGVtZW50cykge1xuICAgICAgICAgICAgICAgIGlmIChlbC5zY3JvbGxUb3AgPiAwIHx8IGVsLnNjcm9sbExlZnQpIHtcbiAgICAgICAgICAgICAgICAgICAgZWwuc2V0QXR0cmlidXRlKCdhdS1lbGVtZW50LXNjcm9sbCcsIGAke2VsLnNjcm9sbFRvcH0sJHtlbC5zY3JvbGxMZWZ0fWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvbnRlbnQuY29tcG9uZW50SW5zdGFuY2UuJGNvbnRyb2xsZXIuZGV0YWNoKDIwNDggLyogZnJvbVN0b3BUYXNrICovKTtcbiAgICAgICAgdGhpcy5jb250ZW50U3RhdHVzID0gMyAvKiBpbml0aWFsaXplZCAqLztcbiAgICB9XG4gICAgYXN5bmMgZnJlZUNvbnRlbnQoZWxlbWVudCwgbmV4dEluc3RydWN0aW9uLCBjYWNoZSwgc3RhdGVmdWwgPSBmYWxzZSkge1xuICAgICAgICBzd2l0Y2ggKHRoaXMuY29udGVudFN0YXR1cykge1xuICAgICAgICAgICAgY2FzZSA0IC8qIGFkZGVkICovOlxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMubGVhdmUobmV4dEluc3RydWN0aW9uKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUNvbXBvbmVudChlbGVtZW50LCBzdGF0ZWZ1bCk7XG4gICAgICAgICAgICBjYXNlIDMgLyogaW5pdGlhbGl6ZWQgKi86XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy50ZXJtaW5hdGVDb21wb25lbnQoc3RhdGVmdWwpO1xuICAgICAgICAgICAgY2FzZSAyIC8qIGxvYWRlZCAqLzpcbiAgICAgICAgICAgICAgICB0aGlzLnVubG9hZENvbXBvbmVudChjYWNoZSwgc3RhdGVmdWwpO1xuICAgICAgICAgICAgY2FzZSAxIC8qIGNyZWF0ZWQgKi86XG4gICAgICAgICAgICAgICAgdGhpcy5kZXN0cm95Q29tcG9uZW50KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdG9Db21wb25lbnROYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250ZW50LmNvbXBvbmVudE5hbWU7XG4gICAgfVxuICAgIHRvQ29tcG9uZW50VHlwZShjb250YWluZXIpIHtcbiAgICAgICAgaWYgKHRoaXMuY29udGVudC5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRlbnQudG9Db21wb25lbnRUeXBlKGNvbnRhaW5lcik7XG4gICAgfVxuICAgIHRvQ29tcG9uZW50SW5zdGFuY2UoY29udGFpbmVyKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbnRlbnQuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5jb250ZW50LnRvQ29tcG9uZW50SW5zdGFuY2UoY29udGFpbmVyKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD12aWV3cG9ydC1jb250ZW50LmpzLm1hcCIsImltcG9ydCB7IEN1c3RvbUVsZW1lbnQgfSBmcm9tICdAYXVyZWxpYS9ydW50aW1lJztcbmltcG9ydCB7IENvbXBvbmVudEFwcGVsbGF0aW9uUmVzb2x2ZXIgfSBmcm9tICcuL3R5cGUtcmVzb2x2ZXJzJztcbmV4cG9ydCB2YXIgUGFyYW1ldGVyc1R5cGU7XG4oZnVuY3Rpb24gKFBhcmFtZXRlcnNUeXBlKSB7XG4gICAgUGFyYW1ldGVyc1R5cGVbXCJub25lXCJdID0gXCJub25lXCI7XG4gICAgUGFyYW1ldGVyc1R5cGVbXCJzdHJpbmdcIl0gPSBcInN0cmluZ1wiO1xuICAgIFBhcmFtZXRlcnNUeXBlW1wiYXJyYXlcIl0gPSBcImFycmF5XCI7XG4gICAgUGFyYW1ldGVyc1R5cGVbXCJvYmplY3RcIl0gPSBcIm9iamVjdFwiO1xufSkoUGFyYW1ldGVyc1R5cGUgfHwgKFBhcmFtZXRlcnNUeXBlID0ge30pKTtcbmV4cG9ydCBjbGFzcyBWaWV3cG9ydEluc3RydWN0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcihjb21wb25lbnQsIHZpZXdwb3J0LCBwYXJhbWV0ZXJzLCBvd25zU2NvcGUgPSB0cnVlLCBuZXh0U2NvcGVJbnN0cnVjdGlvbnMgPSBudWxsKSB7XG4gICAgICAgIHRoaXMub3duc1Njb3BlID0gb3duc1Njb3BlO1xuICAgICAgICB0aGlzLm5leHRTY29wZUluc3RydWN0aW9ucyA9IG5leHRTY29wZUluc3RydWN0aW9ucztcbiAgICAgICAgdGhpcy5jb21wb25lbnROYW1lID0gbnVsbDtcbiAgICAgICAgdGhpcy5jb21wb25lbnRUeXBlID0gbnVsbDtcbiAgICAgICAgdGhpcy5jb21wb25lbnRJbnN0YW5jZSA9IG51bGw7XG4gICAgICAgIHRoaXMudmlld3BvcnROYW1lID0gbnVsbDtcbiAgICAgICAgdGhpcy52aWV3cG9ydCA9IG51bGw7XG4gICAgICAgIHRoaXMucGFyYW1ldGVyc1N0cmluZyA9IG51bGw7XG4gICAgICAgIHRoaXMucGFyYW1ldGVyc1JlY29yZCA9IG51bGw7XG4gICAgICAgIHRoaXMucGFyYW1ldGVyc0xpc3QgPSBudWxsO1xuICAgICAgICB0aGlzLnBhcmFtZXRlcnNUeXBlID0gXCJub25lXCIgLyogbm9uZSAqLztcbiAgICAgICAgdGhpcy5zY29wZSA9IG51bGw7XG4gICAgICAgIHRoaXMuY29udGV4dCA9ICcnO1xuICAgICAgICB0aGlzLnZpZXdwb3J0U2NvcGUgPSBudWxsO1xuICAgICAgICB0aGlzLm5lZWRzVmlld3BvcnREZXNjcmliZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5yb3V0ZSA9IG51bGw7XG4gICAgICAgIHRoaXMuZGVmYXVsdCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmluc3RydWN0aW9uUmVzb2x2ZXIgPSBudWxsO1xuICAgICAgICB0aGlzLnNldENvbXBvbmVudChjb21wb25lbnQpO1xuICAgICAgICB0aGlzLnNldFZpZXdwb3J0KHZpZXdwb3J0KTtcbiAgICAgICAgdGhpcy5zZXRQYXJhbWV0ZXJzKHBhcmFtZXRlcnMpO1xuICAgIH1cbiAgICBnZXQgb3duZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZpZXdwb3J0IHx8IHRoaXMudmlld3BvcnRTY29wZSB8fCBudWxsO1xuICAgIH1cbiAgICBnZXQgdHlwZWRQYXJhbWV0ZXJzKCkge1xuICAgICAgICBzd2l0Y2ggKHRoaXMucGFyYW1ldGVyc1R5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJzdHJpbmdcIiAvKiBzdHJpbmcgKi86XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyYW1ldGVyc1N0cmluZztcbiAgICAgICAgICAgIGNhc2UgXCJhcnJheVwiIC8qIGFycmF5ICovOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcmFtZXRlcnNMaXN0O1xuICAgICAgICAgICAgY2FzZSBcIm9iamVjdFwiIC8qIG9iamVjdCAqLzpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJhbWV0ZXJzUmVjb3JkO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgcGFyYW1ldGVycygpIHtcbiAgICAgICAgaWYgKHRoaXMuaW5zdHJ1Y3Rpb25SZXNvbHZlciAhPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5zdHJ1Y3Rpb25SZXNvbHZlci5wYXJzZUNvbXBvbmVudFBhcmFtZXRlcnModGhpcy50eXBlZFBhcmFtZXRlcnMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgZ2V0IG5vcm1hbGl6ZWRQYXJhbWV0ZXJzKCkge1xuICAgICAgICBpZiAodGhpcy5pbnN0cnVjdGlvblJlc29sdmVyICE9PSBudWxsICYmIHRoaXMudHlwZWRQYXJhbWV0ZXJzICE9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbnN0cnVjdGlvblJlc29sdmVyLnN0cmluZ2lmeUNvbXBvbmVudFBhcmFtZXRlcnModGhpcy5wYXJhbWV0ZXJzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJyc7XG4gICAgfVxuICAgIHNldENvbXBvbmVudChjb21wb25lbnQpIHtcbiAgICAgICAgaWYgKENvbXBvbmVudEFwcGVsbGF0aW9uUmVzb2x2ZXIuaXNOYW1lKGNvbXBvbmVudCkpIHtcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50TmFtZSA9IENvbXBvbmVudEFwcGVsbGF0aW9uUmVzb2x2ZXIuZ2V0TmFtZShjb21wb25lbnQpO1xuICAgICAgICAgICAgdGhpcy5jb21wb25lbnRUeXBlID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50SW5zdGFuY2UgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKENvbXBvbmVudEFwcGVsbGF0aW9uUmVzb2x2ZXIuaXNUeXBlKGNvbXBvbmVudCkpIHtcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50TmFtZSA9IENvbXBvbmVudEFwcGVsbGF0aW9uUmVzb2x2ZXIuZ2V0TmFtZShjb21wb25lbnQpO1xuICAgICAgICAgICAgdGhpcy5jb21wb25lbnRUeXBlID0gQ29tcG9uZW50QXBwZWxsYXRpb25SZXNvbHZlci5nZXRUeXBlKGNvbXBvbmVudCk7XG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudEluc3RhbmNlID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChDb21wb25lbnRBcHBlbGxhdGlvblJlc29sdmVyLmlzSW5zdGFuY2UoY29tcG9uZW50KSkge1xuICAgICAgICAgICAgdGhpcy5jb21wb25lbnROYW1lID0gQ29tcG9uZW50QXBwZWxsYXRpb25SZXNvbHZlci5nZXROYW1lKGNvbXBvbmVudCk7XG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudFR5cGUgPSBDb21wb25lbnRBcHBlbGxhdGlvblJlc29sdmVyLmdldFR5cGUoY29tcG9uZW50KTtcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50SW5zdGFuY2UgPSBDb21wb25lbnRBcHBlbGxhdGlvblJlc29sdmVyLmdldEluc3RhbmNlKGNvbXBvbmVudCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0Vmlld3BvcnQodmlld3BvcnQpIHtcbiAgICAgICAgaWYgKHZpZXdwb3J0ID09PSB1bmRlZmluZWQgfHwgdmlld3BvcnQgPT09ICcnKSB7XG4gICAgICAgICAgICB2aWV3cG9ydCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiB2aWV3cG9ydCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHRoaXMudmlld3BvcnROYW1lID0gdmlld3BvcnQ7XG4gICAgICAgICAgICB0aGlzLnZpZXdwb3J0ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudmlld3BvcnQgPSB2aWV3cG9ydDtcbiAgICAgICAgICAgIGlmICh2aWV3cG9ydCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMudmlld3BvcnROYW1lID0gdmlld3BvcnQubmFtZTtcbiAgICAgICAgICAgICAgICB0aGlzLnNjb3BlID0gdmlld3BvcnQub3duaW5nU2NvcGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0UGFyYW1ldGVycyhwYXJhbWV0ZXJzKSB7XG4gICAgICAgIGlmIChwYXJhbWV0ZXJzID09PSB1bmRlZmluZWQgfHwgcGFyYW1ldGVycyA9PT0gbnVsbCB8fCBwYXJhbWV0ZXJzID09PSAnJykge1xuICAgICAgICAgICAgdGhpcy5wYXJhbWV0ZXJzVHlwZSA9IFwibm9uZVwiIC8qIG5vbmUgKi87XG4gICAgICAgICAgICBwYXJhbWV0ZXJzID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgcGFyYW1ldGVycyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHRoaXMucGFyYW1ldGVyc1R5cGUgPSBcInN0cmluZ1wiIC8qIHN0cmluZyAqLztcbiAgICAgICAgICAgIHRoaXMucGFyYW1ldGVyc1N0cmluZyA9IHBhcmFtZXRlcnM7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShwYXJhbWV0ZXJzKSkge1xuICAgICAgICAgICAgdGhpcy5wYXJhbWV0ZXJzVHlwZSA9IFwiYXJyYXlcIiAvKiBhcnJheSAqLztcbiAgICAgICAgICAgIHRoaXMucGFyYW1ldGVyc0xpc3QgPSBwYXJhbWV0ZXJzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wYXJhbWV0ZXJzVHlwZSA9IFwib2JqZWN0XCIgLyogb2JqZWN0ICovO1xuICAgICAgICAgICAgdGhpcy5wYXJhbWV0ZXJzUmVjb3JkID0gcGFyYW1ldGVycztcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBUaGlzIG9ubHkgd29ya3Mgd2l0aCBvYmplY3RzIGFkZGVkIHRvIG9iamVjdHMhXG4gICAgYWRkUGFyYW1ldGVycyhwYXJhbWV0ZXJzKSB7XG4gICAgICAgIGlmICh0aGlzLnBhcmFtZXRlcnNUeXBlID09PSBcIm5vbmVcIiAvKiBub25lICovKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZXRQYXJhbWV0ZXJzKHBhcmFtZXRlcnMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnBhcmFtZXRlcnNUeXBlICE9PSBcIm9iamVjdFwiIC8qIG9iamVjdCAqLykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5cXCd0IGFkZCBvYmplY3QgcGFyYW1ldGVycyB0byBleGlzdGluZyBub24tb2JqZWN0IHBhcmFtZXRlcnMhJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRQYXJhbWV0ZXJzKHsgLi4udGhpcy5wYXJhbWV0ZXJzUmVjb3JkLCAuLi5wYXJhbWV0ZXJzIH0pO1xuICAgIH1cbiAgICBzZXRJbnN0cnVjdGlvblJlc29sdmVyKGluc3RydWN0aW9uUmVzb2x2ZXIpIHtcbiAgICAgICAgdGhpcy5pbnN0cnVjdGlvblJlc29sdmVyID0gaW5zdHJ1Y3Rpb25SZXNvbHZlcjtcbiAgICB9XG4gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLmlzQ29tcG9uZW50TmFtZSgpICYmICF0aGlzLmlzQ29tcG9uZW50VHlwZSgpICYmICF0aGlzLmlzQ29tcG9uZW50SW5zdGFuY2UoKTtcbiAgICB9XG4gICAgaXNDb21wb25lbnROYW1lKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLmNvbXBvbmVudE5hbWUgJiYgIXRoaXMuaXNDb21wb25lbnRUeXBlKCkgJiYgIXRoaXMuaXNDb21wb25lbnRJbnN0YW5jZSgpO1xuICAgIH1cbiAgICBpc0NvbXBvbmVudFR5cGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbXBvbmVudFR5cGUgIT09IG51bGwgJiYgIXRoaXMuaXNDb21wb25lbnRJbnN0YW5jZSgpO1xuICAgIH1cbiAgICBpc0NvbXBvbmVudEluc3RhbmNlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb21wb25lbnRJbnN0YW5jZSAhPT0gbnVsbDtcbiAgICB9XG4gICAgdG9Db21wb25lbnRUeXBlKGNvbnRhaW5lcikge1xuICAgICAgICBpZiAodGhpcy5jb21wb25lbnRUeXBlICE9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb21wb25lbnRUeXBlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmNvbXBvbmVudE5hbWUgIT09IG51bGxcbiAgICAgICAgICAgICYmIHR5cGVvZiB0aGlzLmNvbXBvbmVudE5hbWUgPT09ICdzdHJpbmcnXG4gICAgICAgICAgICAmJiBjb250YWluZXIgIT09IG51bGxcbiAgICAgICAgICAgICYmIGNvbnRhaW5lci5oYXMoQ3VzdG9tRWxlbWVudC5rZXlGcm9tKHRoaXMuY29tcG9uZW50TmFtZSksIHRydWUpKSB7XG4gICAgICAgICAgICBjb25zdCByZXNvbHZlciA9IGNvbnRhaW5lci5nZXRSZXNvbHZlcihDdXN0b21FbGVtZW50LmtleUZyb20odGhpcy5jb21wb25lbnROYW1lKSk7XG4gICAgICAgICAgICBpZiAocmVzb2x2ZXIgIT09IG51bGwgJiYgcmVzb2x2ZXIuZ2V0RmFjdG9yeSAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmFjdG9yeSA9IHJlc29sdmVyLmdldEZhY3RvcnkoY29udGFpbmVyKTtcbiAgICAgICAgICAgICAgICBpZiAoZmFjdG9yeSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFjdG9yeS5UeXBlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgdG9Db21wb25lbnRJbnN0YW5jZShjb250YWluZXIpIHtcbiAgICAgICAgaWYgKHRoaXMuY29tcG9uZW50SW5zdGFuY2UgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbXBvbmVudEluc3RhbmNlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb250YWluZXIgIT09IHZvaWQgMCAmJiBjb250YWluZXIgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzQ29tcG9uZW50VHlwZSgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRhaW5lci5nZXQodGhpcy5jb21wb25lbnRUeXBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBjb250YWluZXIuZ2V0KEN1c3RvbUVsZW1lbnQua2V5RnJvbSh0aGlzLmNvbXBvbmVudE5hbWUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgdG9WaWV3cG9ydEluc3RhbmNlKHJvdXRlcikge1xuICAgICAgICBpZiAodGhpcy52aWV3cG9ydCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmlld3BvcnQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJvdXRlci5nZXRWaWV3cG9ydCh0aGlzLnZpZXdwb3J0TmFtZSk7XG4gICAgfVxuICAgIHRvU3BlY2lmaWVkUGFyYW1ldGVycyhzcGVjaWZpY2F0aW9ucykge1xuICAgICAgICBzcGVjaWZpY2F0aW9ucyA9IHNwZWNpZmljYXRpb25zIHx8IFtdO1xuICAgICAgICBjb25zdCBwYXJhbWV0ZXJzID0gdGhpcy5wYXJhbWV0ZXJzO1xuICAgICAgICBjb25zdCBzcGVjaWZpZWQgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBzcGVjIG9mIHNwZWNpZmljYXRpb25zKSB7XG4gICAgICAgICAgICAvLyBGaXJzdCBnZXQgbmFtZWQgaWYgaXQgZXhpc3RzXG4gICAgICAgICAgICBsZXQgaW5kZXggPSBwYXJhbWV0ZXJzLmZpbmRJbmRleChwYXJhbSA9PiBwYXJhbS5rZXkgPT09IHNwZWMpO1xuICAgICAgICAgICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBbcGFyYW1ldGVyXSA9IHBhcmFtZXRlcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICBzcGVjaWZpZWRbc3BlY10gPSBwYXJhbWV0ZXIudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBPdGhlcndpc2UgZ2V0IGZpcnN0IHVubmFtZWRcbiAgICAgICAgICAgICAgICBpbmRleCA9IHBhcmFtZXRlcnMuZmluZEluZGV4KHBhcmFtID0+IHBhcmFtLmtleSA9PT0gdm9pZCAwKTtcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBbcGFyYW1ldGVyXSA9IHBhcmFtZXRlcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgc3BlY2lmaWVkW3NwZWNdID0gcGFyYW1ldGVyLnZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBBZGQgYWxsIHJlbWFpbmluZyBuYW1lZFxuICAgICAgICBmb3IgKGNvbnN0IHBhcmFtZXRlciBvZiBwYXJhbWV0ZXJzLmZpbHRlcihwYXJhbSA9PiBwYXJhbS5rZXkgIT09IHZvaWQgMCkpIHtcbiAgICAgICAgICAgIHNwZWNpZmllZFtwYXJhbWV0ZXIua2V5XSA9IHBhcmFtZXRlci52YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgaW5kZXggPSBzcGVjaWZpY2F0aW9ucy5sZW5ndGg7XG4gICAgICAgIC8vIEFkZCBhbGwgcmVtYWluaW5nIHVubmFtZWQuLi5cbiAgICAgICAgZm9yIChjb25zdCBwYXJhbWV0ZXIgb2YgcGFyYW1ldGVycy5maWx0ZXIocGFyYW0gPT4gcGFyYW0ua2V5ID09PSB2b2lkIDApKSB7XG4gICAgICAgICAgICAvLyAuLndpdGggYW4gaW5kZXhcbiAgICAgICAgICAgIHNwZWNpZmllZFtpbmRleCsrXSA9IHBhcmFtZXRlci52YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3BlY2lmaWVkO1xuICAgIH1cbiAgICB0b1NvcnRlZFBhcmFtZXRlcnMoc3BlY2lmaWNhdGlvbnMpIHtcbiAgICAgICAgc3BlY2lmaWNhdGlvbnMgPSBzcGVjaWZpY2F0aW9ucyB8fCBbXTtcbiAgICAgICAgY29uc3QgcGFyYW1ldGVycyA9IHRoaXMucGFyYW1ldGVycztcbiAgICAgICAgY29uc3Qgc29ydGVkID0gW107XG4gICAgICAgIGZvciAoY29uc3Qgc3BlYyBvZiBzcGVjaWZpY2F0aW9ucykge1xuICAgICAgICAgICAgLy8gRmlyc3QgZ2V0IG5hbWVkIGlmIGl0IGV4aXN0c1xuICAgICAgICAgICAgbGV0IGluZGV4ID0gcGFyYW1ldGVycy5maW5kSW5kZXgocGFyYW0gPT4gcGFyYW0ua2V5ID09PSBzcGVjKTtcbiAgICAgICAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyYW1ldGVyID0geyAuLi5wYXJhbWV0ZXJzLnNwbGljZShpbmRleCwgMSlbMF0gfTtcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXIua2V5ID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIHNvcnRlZC5wdXNoKHBhcmFtZXRlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBPdGhlcndpc2UgZ2V0IGZpcnN0IHVubmFtZWRcbiAgICAgICAgICAgICAgICBpbmRleCA9IHBhcmFtZXRlcnMuZmluZEluZGV4KHBhcmFtID0+IHBhcmFtLmtleSA9PT0gdm9pZCAwKTtcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJhbWV0ZXIgPSB7IC4uLnBhcmFtZXRlcnMuc3BsaWNlKGluZGV4LCAxKVswXSB9O1xuICAgICAgICAgICAgICAgICAgICBzb3J0ZWQucHVzaChwYXJhbWV0ZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gT3IgYW4gZW1wdHlcbiAgICAgICAgICAgICAgICAgICAgc29ydGVkLnB1c2goeyB2YWx1ZTogdm9pZCAwIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBBZGQgYWxsIHJlbWFpbmluZyBuYW1lZFxuICAgICAgICBjb25zdCBwYXJhbXMgPSBwYXJhbWV0ZXJzLmZpbHRlcihwYXJhbSA9PiBwYXJhbS5rZXkgIT09IHZvaWQgMCk7XG4gICAgICAgIHBhcmFtcy5zb3J0KChhLCBiKSA9PiAoYS5rZXkgfHwgJycpIDwgKGIua2V5IHx8ICcnKSA/IDEgOiAoYi5rZXkgfHwgJycpIDwgKGEua2V5IHx8ICcnKSA/IC0xIDogMCk7XG4gICAgICAgIHNvcnRlZC5wdXNoKC4uLnBhcmFtcyk7XG4gICAgICAgIC8vIEFkZCBhbGwgcmVtYWluaW5nIHVubmFtZWQuLi5cbiAgICAgICAgc29ydGVkLnB1c2goLi4ucGFyYW1ldGVycy5maWx0ZXIocGFyYW0gPT4gcGFyYW0ua2V5ID09PSB2b2lkIDApKTtcbiAgICAgICAgcmV0dXJuIHNvcnRlZDtcbiAgICB9XG4gICAgc2FtZUNvbXBvbmVudChvdGhlciwgY29tcGFyZVBhcmFtZXRlcnMgPSBmYWxzZSwgY29tcGFyZVR5cGUgPSBmYWxzZSkge1xuICAgICAgICBpZiAoY29tcGFyZVBhcmFtZXRlcnMgJiYgIXRoaXMuc2FtZVBhcmFtZXRlcnMob3RoZXIsIGNvbXBhcmVUeXBlKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb21wYXJlVHlwZSA/IHRoaXMuY29tcG9uZW50VHlwZSA9PT0gb3RoZXIuY29tcG9uZW50VHlwZSA6IHRoaXMuY29tcG9uZW50TmFtZSA9PT0gb3RoZXIuY29tcG9uZW50TmFtZTtcbiAgICB9XG4gICAgLy8gVE9ETzogU29tZXdoZXJlIHdlIG5lZWQgdG8gY2hlY2sgZm9yIGZvcm1hdCBzdWNoIGFzIHNwYWNlcyBldGNcbiAgICBzYW1lUGFyYW1ldGVycyhvdGhlciwgY29tcGFyZVR5cGUgPSBmYWxzZSkge1xuICAgICAgICBpZiAoIXRoaXMuc2FtZUNvbXBvbmVudChvdGhlciwgZmFsc2UsIGNvbXBhcmVUeXBlKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHR5cGVQYXJhbWV0ZXJzID0gdGhpcy5jb21wb25lbnRUeXBlID8gdGhpcy5jb21wb25lbnRUeXBlLnBhcmFtZXRlcnMgOiBbXTtcbiAgICAgICAgY29uc3QgbWluZSA9IHRoaXMudG9TcGVjaWZpZWRQYXJhbWV0ZXJzKHR5cGVQYXJhbWV0ZXJzKTtcbiAgICAgICAgY29uc3Qgb3RoZXJzID0gb3RoZXIudG9TcGVjaWZpZWRQYXJhbWV0ZXJzKHR5cGVQYXJhbWV0ZXJzKTtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKG1pbmUpLmV2ZXJ5KGtleSA9PiBtaW5lW2tleV0gPT09IG90aGVyc1trZXldKVxuICAgICAgICAgICAgJiYgT2JqZWN0LmtleXMob3RoZXJzKS5ldmVyeShrZXkgPT4gb3RoZXJzW2tleV0gPT09IG1pbmVba2V5XSk7XG4gICAgfVxuICAgIHNhbWVWaWV3cG9ydChvdGhlcikge1xuICAgICAgICBpZiAodGhpcy52aWV3cG9ydCAhPT0gbnVsbCAmJiBvdGhlci52aWV3cG9ydCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmlld3BvcnQgPT09IG90aGVyLnZpZXdwb3J0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnNjb3BlID09PSBvdGhlci5zY29wZSAmJlxuICAgICAgICAgICAgKHRoaXMudmlld3BvcnQgPyB0aGlzLnZpZXdwb3J0Lm5hbWUgOiB0aGlzLnZpZXdwb3J0TmFtZSkgPT09IChvdGhlci52aWV3cG9ydCA/IG90aGVyLnZpZXdwb3J0Lm5hbWUgOiBvdGhlci52aWV3cG9ydE5hbWUpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXZpZXdwb3J0LWluc3RydWN0aW9uLmpzLm1hcCIsImltcG9ydCB7IFZpZXdwb3J0SW5zdHJ1Y3Rpb24gfSBmcm9tICcuL3ZpZXdwb3J0LWluc3RydWN0aW9uJztcbmltcG9ydCB7IFNjb3BlIH0gZnJvbSAnLi9zY29wZSc7XG5pbXBvcnQgeyBhcnJheVJlbW92ZSB9IGZyb20gJy4vdXRpbHMnO1xuZXhwb3J0IGNsYXNzIFZpZXdwb3J0U2NvcGUge1xuICAgIGNvbnN0cnVjdG9yKG5hbWUsIHJvdXRlciwgZWxlbWVudCwgb3duaW5nU2NvcGUsIHNjb3BlLCByb290Q29tcG9uZW50VHlwZSA9IG51bGwsIC8vIHRlbXBvcmFyeS4gTWV0YWRhdGEgd2lsbCBwcm9iYWJseSBlbGltaW5hdGUgaXRcbiAgICBvcHRpb25zID0ge1xuICAgICAgICBjYXRjaGVzOiBbXSxcbiAgICAgICAgc291cmNlOiBudWxsLFxuICAgIH0pIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5yb3V0ZXIgPSByb3V0ZXI7XG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICAgIHRoaXMucm9vdENvbXBvbmVudFR5cGUgPSByb290Q29tcG9uZW50VHlwZTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgdGhpcy5wYXRoID0gbnVsbDtcbiAgICAgICAgdGhpcy5jb250ZW50ID0gbnVsbDtcbiAgICAgICAgdGhpcy5uZXh0Q29udGVudCA9IG51bGw7XG4gICAgICAgIHRoaXMuYXZhaWxhYmxlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5zb3VyY2VJdGVtID0gbnVsbDtcbiAgICAgICAgdGhpcy5zb3VyY2VJdGVtSW5kZXggPSAtMTtcbiAgICAgICAgdGhpcy5yZW1vdmUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5hZGQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5jb25uZWN0ZWRTY29wZSA9IG5ldyBTY29wZShyb3V0ZXIsIHNjb3BlLCBvd25pbmdTY29wZSwgbnVsbCwgdGhpcyk7XG4gICAgICAgIGlmICh0aGlzLmNhdGNoZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhpcy5jb250ZW50ID0gcm91dGVyLmNyZWF0ZVZpZXdwb3J0SW5zdHJ1Y3Rpb24odGhpcy5jYXRjaGVzWzBdLCB0aGlzLm5hbWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBzY29wZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdGVkU2NvcGUuc2NvcGU7XG4gICAgfVxuICAgIGdldCBvd25pbmdTY29wZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdGVkU2NvcGUub3duaW5nU2NvcGU7XG4gICAgfVxuICAgIGdldCBlbmFibGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0ZWRTY29wZS5lbmFibGVkO1xuICAgIH1cbiAgICBzZXQgZW5hYmxlZChlbmFibGVkKSB7XG4gICAgICAgIHRoaXMuY29ubmVjdGVkU2NvcGUuZW5hYmxlZCA9IGVuYWJsZWQ7XG4gICAgfVxuICAgIGdldCBpc1ZpZXdwb3J0KCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGdldCBpc1ZpZXdwb3J0U2NvcGUoKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBnZXQgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudCA9PT0gbnVsbDtcbiAgICB9XG4gICAgZ2V0IHBhc3NUaHJvdWdoU2NvcGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvb3RDb21wb25lbnRUeXBlID09PSBudWxsICYmIHRoaXMuY2F0Y2hlcy5sZW5ndGggPT09IDA7XG4gICAgfVxuICAgIGdldCBzaWJsaW5ncygpIHtcbiAgICAgICAgY29uc3QgcGFyZW50ID0gdGhpcy5jb25uZWN0ZWRTY29wZS5wYXJlbnQ7XG4gICAgICAgIGlmIChwYXJlbnQgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBbdGhpc107XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhcmVudC5lbmFibGVkQ2hpbGRyZW5cbiAgICAgICAgICAgIC5maWx0ZXIoY2hpbGQgPT4gY2hpbGQuaXNWaWV3cG9ydFNjb3BlICYmIGNoaWxkLnZpZXdwb3J0U2NvcGUubmFtZSA9PT0gdGhpcy5uYW1lKVxuICAgICAgICAgICAgLm1hcChjaGlsZCA9PiBjaGlsZC52aWV3cG9ydFNjb3BlKTtcbiAgICB9XG4gICAgZ2V0IHNvdXJjZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5zb3VyY2UgfHwgbnVsbDtcbiAgICB9XG4gICAgZ2V0IGNhdGNoZXMoKSB7XG4gICAgICAgIGxldCBjYXRjaGVzID0gdGhpcy5vcHRpb25zLmNhdGNoZXMgfHwgW107XG4gICAgICAgIGlmICh0eXBlb2YgY2F0Y2hlcyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGNhdGNoZXMgPSBjYXRjaGVzLnNwbGl0KCcsJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNhdGNoZXM7XG4gICAgfVxuICAgIGdldCBkZWZhdWx0KCkge1xuICAgICAgICBpZiAodGhpcy5jYXRjaGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNhdGNoZXNbMF07XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0TmV4dENvbnRlbnQoY29udGVudCwgaW5zdHJ1Y3Rpb24pIHtcbiAgICAgICAgbGV0IHZpZXdwb3J0SW5zdHJ1Y3Rpb247XG4gICAgICAgIGlmIChjb250ZW50IGluc3RhbmNlb2YgVmlld3BvcnRJbnN0cnVjdGlvbikge1xuICAgICAgICAgICAgdmlld3BvcnRJbnN0cnVjdGlvbiA9IGNvbnRlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgdmlld3BvcnRJbnN0cnVjdGlvbiA9IHRoaXMucm91dGVyLmluc3RydWN0aW9uUmVzb2x2ZXIucGFyc2VWaWV3cG9ydEluc3RydWN0aW9uKGNvbnRlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmlld3BvcnRJbnN0cnVjdGlvbiA9IHRoaXMucm91dGVyLmNyZWF0ZVZpZXdwb3J0SW5zdHJ1Y3Rpb24oY29udGVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmlld3BvcnRJbnN0cnVjdGlvbi52aWV3cG9ydFNjb3BlID0gdGhpcztcbiAgICAgICAgdGhpcy5yZW1vdmUgPSB0aGlzLnJvdXRlci5pbnN0cnVjdGlvblJlc29sdmVyLmlzQ2xlYXJWaWV3cG9ydEluc3RydWN0aW9uKHZpZXdwb3J0SW5zdHJ1Y3Rpb24pXG4gICAgICAgICAgICB8fCB0aGlzLnJvdXRlci5pbnN0cnVjdGlvblJlc29sdmVyLmlzQ2xlYXJBbGxWaWV3cG9ydHNJbnN0cnVjdGlvbih2aWV3cG9ydEluc3RydWN0aW9uKTtcbiAgICAgICAgdGhpcy5hZGQgPSB0aGlzLnJvdXRlci5pbnN0cnVjdGlvblJlc29sdmVyLmlzQWRkVmlld3BvcnRJbnN0cnVjdGlvbih2aWV3cG9ydEluc3RydWN0aW9uKVxuICAgICAgICAgICAgJiYgQXJyYXkuaXNBcnJheSh0aGlzLnNvdXJjZSk7XG4gICAgICAgIGlmICh0aGlzLmFkZCkge1xuICAgICAgICAgICAgdmlld3BvcnRJbnN0cnVjdGlvbi5jb21wb25lbnROYW1lID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5kZWZhdWx0ICE9PSB2b2lkIDAgJiYgdmlld3BvcnRJbnN0cnVjdGlvbi5jb21wb25lbnROYW1lID09PSBudWxsKSB7XG4gICAgICAgICAgICB2aWV3cG9ydEluc3RydWN0aW9uLmNvbXBvbmVudE5hbWUgPSB0aGlzLmRlZmF1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5uZXh0Q29udGVudCA9IHZpZXdwb3J0SW5zdHJ1Y3Rpb247XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBjYW5MZWF2ZSgpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0cnVlKTtcbiAgICB9XG4gICAgY2FuRW50ZXIoKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodHJ1ZSk7XG4gICAgfVxuICAgIGVudGVyKCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRydWUpO1xuICAgIH1cbiAgICBsb2FkQ29udGVudCgpIHtcbiAgICAgICAgdGhpcy5jb250ZW50ID0gIXRoaXMucmVtb3ZlID8gdGhpcy5uZXh0Q29udGVudCA6IG51bGw7XG4gICAgICAgIHRoaXMubmV4dENvbnRlbnQgPSBudWxsO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRydWUpO1xuICAgIH1cbiAgICBmaW5hbGl6ZUNvbnRlbnRDaGFuZ2UoKSB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdWaWV3cG9ydFNjb3BlIGZpbmFsaXppbmcnLCB0aGlzLmNvbnRlbnQpO1xuICAgICAgICBpZiAodGhpcy5yZW1vdmUgJiYgQXJyYXkuaXNBcnJheSh0aGlzLnNvdXJjZSkpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlU291cmNlSXRlbSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFib3J0Q29udGVudENoYW5nZSgpIHtcbiAgICAgICAgdGhpcy5uZXh0Q29udGVudCA9IG51bGw7XG4gICAgICAgIGlmICh0aGlzLmFkZCkge1xuICAgICAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLnNvdXJjZS5pbmRleE9mKHRoaXMuc291cmNlSXRlbSk7XG4gICAgICAgICAgICB0aGlzLnNvdXJjZS5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgdGhpcy5zb3VyY2VJdGVtID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGFjY2VwdFNlZ21lbnQoc2VnbWVudCkge1xuICAgICAgICBpZiAoc2VnbWVudCA9PT0gbnVsbCAmJiBzZWdtZW50ID09PSB2b2lkIDAgfHwgc2VnbWVudC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzZWdtZW50ID09PSB0aGlzLnJvdXRlci5pbnN0cnVjdGlvblJlc29sdmVyLmNsZWFyVmlld3BvcnRJbnN0cnVjdGlvblxuICAgICAgICAgICAgfHwgc2VnbWVudCA9PT0gdGhpcy5yb3V0ZXIuaW5zdHJ1Y3Rpb25SZXNvbHZlci5hZGRWaWV3cG9ydEluc3RydWN0aW9uXG4gICAgICAgICAgICB8fCBzZWdtZW50ID09PSB0aGlzLm5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmNhdGNoZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5jYXRjaGVzLmluY2x1ZGVzKHNlZ21lbnQpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5jYXRjaGVzLmZpbHRlcigodmFsdWUpID0+IHZhbHVlLmluY2x1ZGVzKCcqJykpLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBiZWZvcmVCaW5kKCkge1xuICAgICAgICBjb25zdCBzb3VyY2UgPSB0aGlzLnNvdXJjZSB8fCBbXTtcbiAgICAgICAgaWYgKHNvdXJjZS5sZW5ndGggPiAwICYmIHRoaXMuc291cmNlSXRlbSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5zb3VyY2VJdGVtID0gdGhpcy5nZXRBdmFpbGFibGVTb3VyY2VJdGVtKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYmVmb3JlVW5iaW5kKCkge1xuICAgICAgICBpZiAodGhpcy5zb3VyY2VJdGVtICE9PSBudWxsICYmIHRoaXMuc291cmNlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBhcnJheVJlbW92ZSh0aGlzLnNvdXJjZSwgKGl0ZW0pID0+IGl0ZW0gPT09IHRoaXMuc291cmNlSXRlbSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zb3VyY2VJdGVtID0gbnVsbDtcbiAgICB9XG4gICAgZ2V0QXZhaWxhYmxlU291cmNlSXRlbSgpIHtcbiAgICAgICAgaWYgKHRoaXMuc291cmNlID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzaWJsaW5ncyA9IHRoaXMuc2libGluZ3M7XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiB0aGlzLnNvdXJjZSkge1xuICAgICAgICAgICAgaWYgKHNpYmxpbmdzLmV2ZXJ5KHNpYmxpbmcgPT4gc2libGluZy5zb3VyY2VJdGVtICE9PSBpdGVtKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBhZGRTb3VyY2VJdGVtKCkge1xuICAgICAgICBjb25zdCBpdGVtID0ge307XG4gICAgICAgIHRoaXMuc291cmNlLnB1c2goaXRlbSk7XG4gICAgICAgIHJldHVybiBpdGVtO1xuICAgIH1cbiAgICByZW1vdmVTb3VyY2VJdGVtKCkge1xuICAgICAgICB0aGlzLnNvdXJjZUl0ZW1JbmRleCA9IHRoaXMuc291cmNlLmluZGV4T2YodGhpcy5zb3VyY2VJdGVtKTtcbiAgICAgICAgaWYgKHRoaXMuc291cmNlSXRlbUluZGV4ID49IDApIHtcbiAgICAgICAgICAgIHRoaXMuc291cmNlLnNwbGljZSh0aGlzLnNvdXJjZUl0ZW1JbmRleCwgMSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0Um91dGVzKCkge1xuICAgICAgICBpZiAodGhpcy5yb290Q29tcG9uZW50VHlwZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucm9vdENvbXBvbmVudFR5cGUucm91dGVzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXZpZXdwb3J0LXNjb3BlLmpzLm1hcCIsImltcG9ydCB7IFJlcG9ydGVyIH0gZnJvbSAnQGF1cmVsaWEva2VybmVsJztcbmltcG9ydCB7IEN1c3RvbUVsZW1lbnQgfSBmcm9tICdAYXVyZWxpYS9ydW50aW1lJztcbmltcG9ydCB7IGFycmF5UmVtb3ZlIH0gZnJvbSAnLi91dGlscyc7XG5pbXBvcnQgeyBWaWV3cG9ydENvbnRlbnQgfSBmcm9tICcuL3ZpZXdwb3J0LWNvbnRlbnQnO1xuaW1wb3J0IHsgVmlld3BvcnRJbnN0cnVjdGlvbiB9IGZyb20gJy4vdmlld3BvcnQtaW5zdHJ1Y3Rpb24nO1xuaW1wb3J0IHsgU2NvcGUgfSBmcm9tICcuL3Njb3BlJztcbmV4cG9ydCBjbGFzcyBWaWV3cG9ydCB7XG4gICAgY29uc3RydWN0b3Iocm91dGVyLCBuYW1lLCBlbGVtZW50LCBjb250YWluZXIsIG93bmluZ1Njb3BlLCBzY29wZSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHRoaXMucm91dGVyID0gcm91dGVyO1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgdGhpcy5uZXh0Q29udGVudCA9IG51bGw7XG4gICAgICAgIHRoaXMuZm9yY2VSZW1vdmUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wYXRoID0gbnVsbDtcbiAgICAgICAgdGhpcy5jbGVhciA9IGZhbHNlO1xuICAgICAgICB0aGlzLmVsZW1lbnRSZXNvbHZlID0gbnVsbDtcbiAgICAgICAgdGhpcy5wcmV2aW91c1ZpZXdwb3J0U3RhdGUgPSBudWxsO1xuICAgICAgICB0aGlzLmNhY2hlID0gW107XG4gICAgICAgIHRoaXMuaGlzdG9yeUNhY2hlID0gW107XG4gICAgICAgIHRoaXMuY29udGVudCA9IG5ldyBWaWV3cG9ydENvbnRlbnQoKTtcbiAgICAgICAgdGhpcy5jb25uZWN0ZWRTY29wZSA9IG5ldyBTY29wZShyb3V0ZXIsIHNjb3BlLCBvd25pbmdTY29wZSwgdGhpcyk7XG4gICAgfVxuICAgIGdldCBzY29wZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdGVkU2NvcGUuc2NvcGU7XG4gICAgfVxuICAgIGdldCBvd25pbmdTY29wZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdGVkU2NvcGUub3duaW5nU2NvcGU7XG4gICAgfVxuICAgIGdldCBlbmFibGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0ZWRTY29wZS5lbmFibGVkO1xuICAgIH1cbiAgICBzZXQgZW5hYmxlZChlbmFibGVkKSB7XG4gICAgICAgIHRoaXMuY29ubmVjdGVkU2NvcGUuZW5hYmxlZCA9IGVuYWJsZWQ7XG4gICAgfVxuICAgIGdldCBpc1ZpZXdwb3J0KCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZ2V0IGlzVmlld3BvcnRTY29wZSgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBnZXQgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudC5jb21wb25lbnRJbnN0YW5jZSA9PT0gbnVsbDtcbiAgICB9XG4gICAgZ2V0IGRvRm9yY2VSZW1vdmUoKSB7XG4gICAgICAgIGxldCBzY29wZSA9IHRoaXMuY29ubmVjdGVkU2NvcGU7XG4gICAgICAgIHdoaWxlIChzY29wZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKHNjb3BlLnZpZXdwb3J0ICE9PSBudWxsICYmIHNjb3BlLnZpZXdwb3J0LmZvcmNlUmVtb3ZlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzY29wZSA9IHNjb3BlLnBhcmVudDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHNldE5leHRDb250ZW50KGNvbnRlbnQsIGluc3RydWN0aW9uKSB7XG4gICAgICAgIGxldCB2aWV3cG9ydEluc3RydWN0aW9uO1xuICAgICAgICBpZiAoY29udGVudCBpbnN0YW5jZW9mIFZpZXdwb3J0SW5zdHJ1Y3Rpb24pIHtcbiAgICAgICAgICAgIHZpZXdwb3J0SW5zdHJ1Y3Rpb24gPSBjb250ZW50O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHZpZXdwb3J0SW5zdHJ1Y3Rpb24gPSB0aGlzLnJvdXRlci5pbnN0cnVjdGlvblJlc29sdmVyLnBhcnNlVmlld3BvcnRJbnN0cnVjdGlvbihjb250ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZpZXdwb3J0SW5zdHJ1Y3Rpb24gPSB0aGlzLnJvdXRlci5jcmVhdGVWaWV3cG9ydEluc3RydWN0aW9uKGNvbnRlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZpZXdwb3J0SW5zdHJ1Y3Rpb24uc2V0Vmlld3BvcnQodGhpcyk7XG4gICAgICAgIHRoaXMuY2xlYXIgPSB0aGlzLnJvdXRlci5pbnN0cnVjdGlvblJlc29sdmVyLmlzQ2xlYXJWaWV3cG9ydEluc3RydWN0aW9uKHZpZXdwb3J0SW5zdHJ1Y3Rpb24pO1xuICAgICAgICAvLyBDYW4gaGF2ZSBhIChyZXNvbHZlZCkgdHlwZSBvciBhIHN0cmluZyAodG8gYmUgcmVzb2x2ZWQgbGF0ZXIpXG4gICAgICAgIHRoaXMubmV4dENvbnRlbnQgPSBuZXcgVmlld3BvcnRDb250ZW50KCF0aGlzLmNsZWFyID8gdmlld3BvcnRJbnN0cnVjdGlvbiA6IHZvaWQgMCwgaW5zdHJ1Y3Rpb24sIHRoaXMuY29udGFpbmVyKTtcbiAgICAgICAgdGhpcy5uZXh0Q29udGVudC5mcm9tSGlzdG9yeSA9IHRoaXMubmV4dENvbnRlbnQuY29tcG9uZW50SW5zdGFuY2UgJiYgaW5zdHJ1Y3Rpb24ubmF2aWdhdGlvblxuICAgICAgICAgICAgPyAhIWluc3RydWN0aW9uLm5hdmlnYXRpb24uYmFjayB8fCAhIWluc3RydWN0aW9uLm5hdmlnYXRpb24uZm9yd2FyZFxuICAgICAgICAgICAgOiBmYWxzZTtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zdGF0ZWZ1bCkge1xuICAgICAgICAgICAgLy8gVE9ETzogQWRkIGEgcGFyYW1ldGVyIGhlcmUgdG8gZGVjaWRlIHJlcXVpcmVkIGVxdWFsaXR5XG4gICAgICAgICAgICBjb25zdCBjYWNoZWQgPSB0aGlzLmNhY2hlLmZpbmQoKGl0ZW0pID0+IHRoaXMubmV4dENvbnRlbnQuaXNDYWNoZUVxdWFsKGl0ZW0pKTtcbiAgICAgICAgICAgIGlmIChjYWNoZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm5leHRDb250ZW50ID0gY2FjaGVkO1xuICAgICAgICAgICAgICAgIHRoaXMubmV4dENvbnRlbnQuZnJvbUNhY2hlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuY2FjaGUucHVzaCh0aGlzLm5leHRDb250ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBDaGlsZHJlbiB0aGF0IHdpbGwgYmUgcmVwbGFjZWQgKHVubGVzcyBhZGRlZCBhZ2FpbikgYnkgbmV4dCBjb250ZW50LiBXaWxsXG4gICAgICAgIC8vIGJlIHJlLWVuYWJsZWQgb24gY2FuY2VsXG4gICAgICAgIHRoaXMuY29ubmVjdGVkU2NvcGUuY2xlYXJSZXBsYWNlZENoaWxkcmVuKCk7XG4gICAgICAgIC8vIElmIHdlIGdldCB0aGUgc2FtZSBfaW5zdGFuY2VfLCBkb24ndCBkbyBhbnl0aGluZyAoaGFwcGVucyB3aXRoIGNhY2hlZCBhbmQgaGlzdG9yeSlcbiAgICAgICAgaWYgKHRoaXMubmV4dENvbnRlbnQuY29tcG9uZW50SW5zdGFuY2UgIT09IG51bGwgJiYgdGhpcy5jb250ZW50LmNvbXBvbmVudEluc3RhbmNlID09PSB0aGlzLm5leHRDb250ZW50LmNvbXBvbmVudEluc3RhbmNlKSB7XG4gICAgICAgICAgICB0aGlzLm5leHRDb250ZW50ID0gbnVsbDtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBSZWVudHJ5QmVoYXZpb3IgJ3JlZnJlc2gnIHRha2VzIHByZWNlZGVuY2VcbiAgICAgICAgaWYgKCF0aGlzLmNvbnRlbnQuZXF1YWxDb21wb25lbnQodGhpcy5uZXh0Q29udGVudCkgfHxcbiAgICAgICAgICAgIGluc3RydWN0aW9uLm5hdmlnYXRpb24ucmVmcmVzaCB8fFxuICAgICAgICAgICAgdGhpcy5jb250ZW50LnJlZW50cnlCZWhhdmlvcigpID09PSBcInJlZnJlc2hcIiAvKiByZWZyZXNoICovKSB7XG4gICAgICAgICAgICB0aGlzLmNvbm5lY3RlZFNjb3BlLmRpc2FibGVSZXBsYWNlZENoaWxkcmVuKCk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBFeHBsaWNpdGx5IGRvbid0IGFsbG93IG5hdmlnYXRpb24gYmFjayB0byB0aGUgc2FtZSBjb21wb25lbnQgYWdhaW5cbiAgICAgICAgaWYgKHRoaXMuY29udGVudC5yZWVudHJ5QmVoYXZpb3IoKSA9PT0gXCJkaXNhbGxvd1wiIC8qIGRpc2FsbG93ICovKSB7XG4gICAgICAgICAgICB0aGlzLm5leHRDb250ZW50ID0gbnVsbDtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBFeHBsaWNpdGx5IHJlLWVudGVyIHNhbWUgY29tcG9uZW50IGFnYWluXG4gICAgICAgIGlmICh0aGlzLmNvbnRlbnQucmVlbnRyeUJlaGF2aW9yKCkgPT09IFwiZW50ZXJcIiAvKiBlbnRlciAqLykge1xuICAgICAgICAgICAgdGhpcy5jb250ZW50LnJlZW50cnkgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5uZXh0Q29udGVudC5jb250ZW50LnNldENvbXBvbmVudCh0aGlzLmNvbnRlbnQuY29tcG9uZW50SW5zdGFuY2UpO1xuICAgICAgICAgICAgdGhpcy5uZXh0Q29udGVudC5jb250ZW50U3RhdHVzID0gdGhpcy5jb250ZW50LmNvbnRlbnRTdGF0dXM7XG4gICAgICAgICAgICB0aGlzLm5leHRDb250ZW50LnJlZW50cnkgPSB0aGlzLmNvbnRlbnQucmVlbnRyeTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIFJlZW50cnlCZWhhdmlvciBpcyBub3cgJ2RlZmF1bHQnXG4gICAgICAgIC8vIFJlcXVpcmVzIHVwZGF0ZWQgcGFyYW1ldGVycyBpZiB2aWV3cG9ydCBzdGF0ZWZ1bFxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnN0YXRlZnVsICYmXG4gICAgICAgICAgICB0aGlzLmNvbnRlbnQuZXF1YWxQYXJhbWV0ZXJzKHRoaXMubmV4dENvbnRlbnQpKSB7XG4gICAgICAgICAgICB0aGlzLm5leHRDb250ZW50ID0gbnVsbDtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBEZWZhdWx0IGlzIHRvIHRyaWdnZXIgYSByZWZyZXNoICh3aXRob3V0IGEgY2hlY2sgb2YgcGFyYW1ldGVycylcbiAgICAgICAgdGhpcy5jb25uZWN0ZWRTY29wZS5kaXNhYmxlUmVwbGFjZWRDaGlsZHJlbigpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgc2V0RWxlbWVudChlbGVtZW50LCBjb250YWluZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgICAgIGlmICh0aGlzLmVsZW1lbnQgIT09IGVsZW1lbnQpIHtcbiAgICAgICAgICAgIC8vIFRPRE86IFJlc3RvcmUgdGhpcyBzdGF0ZSBvbiBuYXZpZ2F0aW9uIGNhbmNlbFxuICAgICAgICAgICAgdGhpcy5wcmV2aW91c1ZpZXdwb3J0U3RhdGUgPSB7IC4uLnRoaXMgfTtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJTdGF0ZSgpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLnVzZWRCeSkge1xuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy51c2VkQnkgPSBvcHRpb25zLnVzZWRCeTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvcHRpb25zLmRlZmF1bHQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMuZGVmYXVsdCA9IG9wdGlvbnMuZGVmYXVsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvcHRpb25zLmZhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLmZhbGxiYWNrID0gb3B0aW9ucy5mYWxsYmFjaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvcHRpb25zLm5vTGluaykge1xuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5ub0xpbmsgPSBvcHRpb25zLm5vTGluaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvcHRpb25zLm5vSGlzdG9yeSkge1xuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5ub0hpc3RvcnkgPSBvcHRpb25zLm5vSGlzdG9yeTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvcHRpb25zLnN0YXRlZnVsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLnN0YXRlZnVsID0gb3B0aW9ucy5zdGF0ZWZ1bDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnRSZXNvbHZlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50UmVzb2x2ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIFRPRE86IE1pZ2h0IG5vdCBuZWVkIHRoaXM/IEZpZ3VyZSBpdCBvdXRcbiAgICAgICAgLy8gaWYgKGNvbnRhaW5lcikge1xuICAgICAgICAvLyAgIGNvbnRhaW5lclsndmlld3BvcnROYW1lJ10gPSB0aGlzLm5hbWU7XG4gICAgICAgIC8vIH1cbiAgICAgICAgaWYgKHRoaXMuY29udGFpbmVyICE9PSBjb250YWluZXIpIHtcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5jb250ZW50LmNvbXBvbmVudEluc3RhbmNlICYmICghdGhpcy5uZXh0Q29udGVudCB8fCAhdGhpcy5uZXh0Q29udGVudC5jb21wb25lbnRJbnN0YW5jZSkgJiYgdGhpcy5vcHRpb25zLmRlZmF1bHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGluc3RydWN0aW9ucyA9IHRoaXMucm91dGVyLmluc3RydWN0aW9uUmVzb2x2ZXIucGFyc2VWaWV3cG9ydEluc3RydWN0aW9ucyh0aGlzLm9wdGlvbnMuZGVmYXVsdCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGluc3RydWN0aW9uIG9mIGluc3RydWN0aW9ucykge1xuICAgICAgICAgICAgICAgIC8vIFNldCB0byBuYW1lIHRvIGJlIGRlbGF5ZWQgb25lIHR1cm5cbiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbi5zZXRWaWV3cG9ydCh0aGlzLm5hbWUpO1xuICAgICAgICAgICAgICAgIGluc3RydWN0aW9uLnNjb3BlID0gdGhpcy5vd25pbmdTY29wZTtcbiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbi5kZWZhdWx0ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucm91dGVyLmdvdG8oaW5zdHJ1Y3Rpb25zLCB7IGFwcGVuZDogdHJ1ZSB9KS5jYXRjaChlcnJvciA9PiB7IHRocm93IGVycm9yOyB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyByZW1vdmUoZWxlbWVudCwgY29udGFpbmVyKSB7XG4gICAgICAgIGlmICh0aGlzLmVsZW1lbnQgPT09IGVsZW1lbnQgJiYgdGhpcy5jb250YWluZXIgPT09IGNvbnRhaW5lcikge1xuICAgICAgICAgICAgaWYgKHRoaXMuY29udGVudC5jb21wb25lbnRJbnN0YW5jZSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuY29udGVudC5mcmVlQ29udGVudCh0aGlzLmVsZW1lbnQsICh0aGlzLm5leHRDb250ZW50ID8gdGhpcy5uZXh0Q29udGVudC5pbnN0cnVjdGlvbiA6IG51bGwpLCB0aGlzLmhpc3RvcnlDYWNoZSwgdGhpcy5kb0ZvcmNlUmVtb3ZlID8gZmFsc2UgOiB0aGlzLnJvdXRlci5zdGF0ZWZ1bEhpc3RvcnkgfHwgdGhpcy5vcHRpb25zLnN0YXRlZnVsKTsgLy8gLmNhdGNoKGVycm9yID0+IHsgdGhyb3cgZXJyb3I7IH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuZG9Gb3JjZVJlbW92ZSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGlzdG9yeUNhY2hlLm1hcChjb250ZW50ID0+IGNvbnRlbnQuZnJlZUNvbnRlbnQobnVsbCwgbnVsbCwgdGhpcy5oaXN0b3J5Q2FjaGUsIGZhbHNlKSkpO1xuICAgICAgICAgICAgICAgIHRoaXMuaGlzdG9yeUNhY2hlID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGFzeW5jIGNhbkxlYXZlKCkge1xuICAgICAgICBjb25zdCBjYW5MZWF2ZUNoaWxkcmVuID0gYXdhaXQgdGhpcy5jb25uZWN0ZWRTY29wZS5jYW5MZWF2ZSgpO1xuICAgICAgICBpZiAoIWNhbkxlYXZlQ2hpbGRyZW4pIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5jb250ZW50LmNhbkxlYXZlKHRoaXMubmV4dENvbnRlbnQgPyB0aGlzLm5leHRDb250ZW50Lmluc3RydWN0aW9uIDogbnVsbCk7XG4gICAgfVxuICAgIGFzeW5jIGNhbkVudGVyKCkge1xuICAgICAgICBpZiAodGhpcy5jbGVhcikge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCh0aGlzLm5leHRDb250ZW50LmNvbnRlbnQgfHwgbnVsbCkgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0aGlzLndhaXRGb3JFbGVtZW50KCk7XG4gICAgICAgIHRoaXMubmV4dENvbnRlbnQuY3JlYXRlQ29tcG9uZW50KHRoaXMuY29udGFpbmVyLCB0aGlzLm9wdGlvbnMuZmFsbGJhY2spO1xuICAgICAgICBhd2FpdCB0aGlzLm5leHRDb250ZW50LmxvYWRDb21wb25lbnQodGhpcy5jb250YWluZXIsIHRoaXMuZWxlbWVudCwgdGhpcyk7XG4gICAgICAgIHJldHVybiB0aGlzLm5leHRDb250ZW50LmNhbkVudGVyKHRoaXMsIHRoaXMuY29udGVudC5pbnN0cnVjdGlvbik7XG4gICAgfVxuICAgIGFzeW5jIGVudGVyKCkge1xuICAgICAgICBSZXBvcnRlci53cml0ZSgxMDAwMCwgJ1ZpZXdwb3J0IGVudGVyJywgdGhpcy5uYW1lKTtcbiAgICAgICAgaWYgKHRoaXMuY2xlYXIpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5uZXh0Q29udGVudCB8fCAhdGhpcy5uZXh0Q29udGVudC5jb21wb25lbnRJbnN0YW5jZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMubmV4dENvbnRlbnQuZW50ZXIodGhpcy5jb250ZW50Lmluc3RydWN0aW9uKTtcbiAgICAgICAgLy8gYXdhaXQgdGhpcy5uZXh0Q29udGVudC5sb2FkQ29tcG9uZW50KHRoaXMuY29udGFpbmVyIGFzIElDb250YWluZXIsIHRoaXMuZWxlbWVudCBhcyBFbGVtZW50LCB0aGlzKTtcbiAgICAgICAgdGhpcy5uZXh0Q29udGVudC5pbml0aWFsaXplQ29tcG9uZW50KEN1c3RvbUVsZW1lbnQuZm9yKHRoaXMuZWxlbWVudCkpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgYXN5bmMgbG9hZENvbnRlbnQoKSB7XG4gICAgICAgIFJlcG9ydGVyLndyaXRlKDEwMDAwLCAnVmlld3BvcnQgbG9hZENvbnRlbnQnLCB0aGlzLm5hbWUpO1xuICAgICAgICAvLyBObyBuZWVkIHRvIHdhaXQgZm9yIG5leHQgY29tcG9uZW50IGFjdGl2YXRpb25cbiAgICAgICAgaWYgKHRoaXMuY29udGVudC5jb21wb25lbnRJbnN0YW5jZSAmJiAhdGhpcy5uZXh0Q29udGVudC5jb21wb25lbnRJbnN0YW5jZSkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5jb250ZW50LmxlYXZlKHRoaXMubmV4dENvbnRlbnQuaW5zdHJ1Y3Rpb24pO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy51bmxvYWRDb250ZW50KCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubmV4dENvbnRlbnQuY29tcG9uZW50SW5zdGFuY2UpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbnRlbnQuY29tcG9uZW50SW5zdGFuY2UgIT09IHRoaXMubmV4dENvbnRlbnQuY29tcG9uZW50SW5zdGFuY2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm5leHRDb250ZW50LmFkZENvbXBvbmVudCh0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb25uZWN0ZWRTY29wZS5yZWVuYWJsZVJlcGxhY2VkQ2hpbGRyZW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIE9ubHkgd2hlbiBuZXh0IGNvbXBvbmVudCBhY3RpdmF0aW9uIGlzIGRvbmVcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbnRlbnQuY29tcG9uZW50SW5zdGFuY2UpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmNvbnRlbnQubGVhdmUodGhpcy5uZXh0Q29udGVudC5pbnN0cnVjdGlvbik7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmNvbnRlbnQucmVlbnRyeSAmJiB0aGlzLmNvbnRlbnQuY29tcG9uZW50SW5zdGFuY2UgIT09IHRoaXMubmV4dENvbnRlbnQuY29tcG9uZW50SW5zdGFuY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy51bmxvYWRDb250ZW50KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jb250ZW50ID0gdGhpcy5uZXh0Q29udGVudDtcbiAgICAgICAgICAgIHRoaXMuY29udGVudC5yZWVudHJ5ID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY2xlYXIpIHtcbiAgICAgICAgICAgIHRoaXMuY29udGVudCA9IG5ldyBWaWV3cG9ydENvbnRlbnQodm9pZCAwLCB0aGlzLm5leHRDb250ZW50Lmluc3RydWN0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm5leHRDb250ZW50ID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGZpbmFsaXplQ29udGVudENoYW5nZSgpIHtcbiAgICAgICAgdGhpcy5wcmV2aW91c1ZpZXdwb3J0U3RhdGUgPSBudWxsO1xuICAgICAgICB0aGlzLmNvbm5lY3RlZFNjb3BlLmNsZWFyUmVwbGFjZWRDaGlsZHJlbigpO1xuICAgIH1cbiAgICBhc3luYyBhYm9ydENvbnRlbnRDaGFuZ2UoKSB7XG4gICAgICAgIHRoaXMuY29ubmVjdGVkU2NvcGUucmVlbmFibGVSZXBsYWNlZENoaWxkcmVuKCk7XG4gICAgICAgIGF3YWl0IHRoaXMubmV4dENvbnRlbnQuZnJlZUNvbnRlbnQodGhpcy5lbGVtZW50LCB0aGlzLm5leHRDb250ZW50Lmluc3RydWN0aW9uLCB0aGlzLmhpc3RvcnlDYWNoZSwgdGhpcy5yb3V0ZXIuc3RhdGVmdWxIaXN0b3J5IHx8IHRoaXMub3B0aW9ucy5zdGF0ZWZ1bCk7XG4gICAgICAgIGlmICh0aGlzLnByZXZpb3VzVmlld3BvcnRTdGF0ZSkge1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLCB0aGlzLnByZXZpb3VzVmlld3BvcnRTdGF0ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gVE9ETzogRGVhbCB3aXRoIG5vbi1zdHJpbmcgY29tcG9uZW50c1xuICAgIHdhbnRDb21wb25lbnQoY29tcG9uZW50KSB7XG4gICAgICAgIGxldCB1c2VkQnkgPSB0aGlzLm9wdGlvbnMudXNlZEJ5IHx8IFtdO1xuICAgICAgICBpZiAodHlwZW9mIHVzZWRCeSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHVzZWRCeSA9IHVzZWRCeS5zcGxpdCgnLCcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1c2VkQnkuaW5jbHVkZXMoY29tcG9uZW50KTtcbiAgICB9XG4gICAgLy8gVE9ETzogRGVhbCB3aXRoIG5vbi1zdHJpbmcgY29tcG9uZW50c1xuICAgIGFjY2VwdENvbXBvbmVudChjb21wb25lbnQpIHtcbiAgICAgICAgaWYgKGNvbXBvbmVudCA9PT0gJy0nIHx8IGNvbXBvbmVudCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHVzZWRCeSA9IHRoaXMub3B0aW9ucy51c2VkQnk7XG4gICAgICAgIGlmICghdXNlZEJ5IHx8ICF1c2VkQnkubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHVzZWRCeSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHVzZWRCeSA9IHVzZWRCeS5zcGxpdCgnLCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh1c2VkQnkuaW5jbHVkZXMoY29tcG9uZW50KSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVzZWRCeS5maWx0ZXIoKHZhbHVlKSA9PiB2YWx1ZS5pbmNsdWRlcygnKicpKS5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgYmVmb3JlQmluZChmbGFncykge1xuICAgICAgICBpZiAodGhpcy5jb250ZW50LmNvbXBvbmVudEluc3RhbmNlKSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnQuaW5pdGlhbGl6ZUNvbXBvbmVudChDdXN0b21FbGVtZW50LmZvcih0aGlzLmVsZW1lbnQpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBiZWZvcmVBdHRhY2goZmxhZ3MpIHtcbiAgICAgICAgdGhpcy5lbmFibGVkID0gdHJ1ZTtcbiAgICAgICAgaWYgKHRoaXMuY29udGVudC5jb21wb25lbnRJbnN0YW5jZSkge1xuICAgICAgICAgICAgLy8gT25seSBhY3RzIGlmIG5vdCBhbHJlYWR5IGVudGVyZWRcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY29udGVudC5lbnRlcih0aGlzLmNvbnRlbnQuaW5zdHJ1Y3Rpb24pO1xuICAgICAgICAgICAgdGhpcy5jb250ZW50LmFkZENvbXBvbmVudCh0aGlzLmVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGJlZm9yZURldGFjaChmbGFncykge1xuICAgICAgICBpZiAodGhpcy5jb250ZW50LmNvbXBvbmVudEluc3RhbmNlKSB7XG4gICAgICAgICAgICAvLyBPbmx5IGFjdHMgaWYgbm90IGFscmVhZHkgbGVmdFxuICAgICAgICAgICAgYXdhaXQgdGhpcy5jb250ZW50LmxlYXZlKHRoaXMuY29udGVudC5pbnN0cnVjdGlvbik7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnQucmVtb3ZlQ29tcG9uZW50KHRoaXMuZWxlbWVudCwgdGhpcy5kb0ZvcmNlUmVtb3ZlID8gZmFsc2UgOiB0aGlzLnJvdXRlci5zdGF0ZWZ1bEhpc3RvcnkgfHwgdGhpcy5vcHRpb25zLnN0YXRlZnVsKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVuYWJsZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgYXN5bmMgYmVmb3JlVW5iaW5kKGZsYWdzKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbnRlbnQuY29tcG9uZW50SW5zdGFuY2UpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY29udGVudC50ZXJtaW5hdGVDb21wb25lbnQodGhpcy5kb0ZvcmNlUmVtb3ZlID8gZmFsc2UgOiB0aGlzLnJvdXRlci5zdGF0ZWZ1bEhpc3RvcnkgfHwgdGhpcy5vcHRpb25zLnN0YXRlZnVsKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBmcmVlQ29udGVudChjb21wb25lbnQpIHtcbiAgICAgICAgY29uc3QgY29udGVudCA9IHRoaXMuaGlzdG9yeUNhY2hlLmZpbmQoY2FjaGVkID0+IGNhY2hlZC5jb21wb25lbnRJbnN0YW5jZSA9PT0gY29tcG9uZW50KTtcbiAgICAgICAgaWYgKGNvbnRlbnQgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgdGhpcy5mb3JjZVJlbW92ZSA9IHRydWU7XG4gICAgICAgICAgICBhd2FpdCBjb250ZW50LmZyZWVDb250ZW50KG51bGwsIG51bGwsIHRoaXMuaGlzdG9yeUNhY2hlLCBmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLmZvcmNlUmVtb3ZlID0gZmFsc2U7XG4gICAgICAgICAgICBhcnJheVJlbW92ZSh0aGlzLmhpc3RvcnlDYWNoZSwgKGNhY2hlZCA9PiBjYWNoZWQgPT09IGNvbnRlbnQpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRSb3V0ZXMoKSB7XG4gICAgICAgIGxldCBjb21wb25lbnRUeXBlID0gdGhpcy5uZXh0Q29udGVudCAhPT0gbnVsbFxuICAgICAgICAgICAgJiYgdGhpcy5uZXh0Q29udGVudC5jb250ZW50ICE9PSBudWxsXG4gICAgICAgICAgICA/IHRoaXMubmV4dENvbnRlbnQuY29udGVudC5jb21wb25lbnRUeXBlXG4gICAgICAgICAgICA6IHRoaXMuY29udGVudC5jb250ZW50LmNvbXBvbmVudFR5cGU7XG4gICAgICAgIC8vIFRPRE86IFRoaXMgaXMgZ29pbmcgYXdheSBvbmNlIE1ldGFkYXRhIGlzIGluIVxuICAgICAgICBpZiAoY29tcG9uZW50VHlwZSA9PT0gbnVsbCB8fCBjb21wb25lbnRUeXBlID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2xsZXIgPSBDdXN0b21FbGVtZW50LmZvcih0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgY29tcG9uZW50VHlwZSA9IGNvbnRyb2xsZXIuY29udGV4dC5jb21wb25lbnRUeXBlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb21wb25lbnRUeXBlID09PSBudWxsIHx8IGNvbXBvbmVudFR5cGUgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgcm91dGVzID0gY29tcG9uZW50VHlwZS5yb3V0ZXM7XG4gICAgICAgIHJldHVybiBBcnJheS5pc0FycmF5KHJvdXRlcykgPyByb3V0ZXMgOiBudWxsO1xuICAgIH1cbiAgICBhc3luYyB1bmxvYWRDb250ZW50KCkge1xuICAgICAgICB0aGlzLmNvbnRlbnQucmVtb3ZlQ29tcG9uZW50KHRoaXMuZWxlbWVudCwgdGhpcy5yb3V0ZXIuc3RhdGVmdWxIaXN0b3J5IHx8IHRoaXMub3B0aW9ucy5zdGF0ZWZ1bCk7XG4gICAgICAgIGF3YWl0IHRoaXMuY29udGVudC50ZXJtaW5hdGVDb21wb25lbnQodGhpcy5yb3V0ZXIuc3RhdGVmdWxIaXN0b3J5IHx8IHRoaXMub3B0aW9ucy5zdGF0ZWZ1bCk7XG4gICAgICAgIHRoaXMuY29udGVudC51bmxvYWRDb21wb25lbnQodGhpcy5oaXN0b3J5Q2FjaGUsIHRoaXMucm91dGVyLnN0YXRlZnVsSGlzdG9yeSB8fCB0aGlzLm9wdGlvbnMuc3RhdGVmdWwpO1xuICAgICAgICB0aGlzLmNvbnRlbnQuZGVzdHJveUNvbXBvbmVudCgpO1xuICAgIH1cbiAgICBjbGVhclN0YXRlKCkge1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSB7fTtcbiAgICAgICAgdGhpcy5jb250ZW50ID0gbmV3IFZpZXdwb3J0Q29udGVudCgpO1xuICAgICAgICB0aGlzLmNhY2hlID0gW107XG4gICAgfVxuICAgIGFzeW5jIHdhaXRGb3JFbGVtZW50KCkge1xuICAgICAgICBpZiAodGhpcy5lbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRSZXNvbHZlID0gcmVzb2x2ZTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dmlld3BvcnQuanMubWFwIiwiaW1wb3J0IHsgX19kZWNvcmF0ZSwgX19tZXRhZGF0YSwgX19wYXJhbSB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgREksIElDb250YWluZXIsIFJlZ2lzdHJhdGlvbiB9IGZyb20gJ0BhdXJlbGlhL2tlcm5lbCc7XG5pbXBvcnQgeyBJRE9NLCBJRE9NSW5pdGlhbGl6ZXIsIElTY2hlZHVsZXIgfSBmcm9tICdAYXVyZWxpYS9ydW50aW1lJztcbmltcG9ydCB7IFJ1bnRpbWVIdG1sQ29uZmlndXJhdGlvbiwgSFRNTERPTSB9IGZyb20gJ0BhdXJlbGlhL3J1bnRpbWUtaHRtbCc7XG5pbXBvcnQgeyBjcmVhdGVET01TY2hlZHVsZXIgfSBmcm9tICdAYXVyZWxpYS9zY2hlZHVsZXItZG9tJztcbmxldCBCcm93c2VyRE9NSW5pdGlhbGl6ZXIgPSBjbGFzcyBCcm93c2VyRE9NSW5pdGlhbGl6ZXIge1xuICAgIGNvbnN0cnVjdG9yKGNvbnRhaW5lcikge1xuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgICB9XG4gICAgc3RhdGljIHJlZ2lzdGVyKGNvbnRhaW5lcikge1xuICAgICAgICByZXR1cm4gUmVnaXN0cmF0aW9uLnNpbmdsZXRvbihJRE9NSW5pdGlhbGl6ZXIsIHRoaXMpLnJlZ2lzdGVyKGNvbnRhaW5lcik7XG4gICAgfVxuICAgIGluaXRpYWxpemUoY29uZmlnKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbnRhaW5lci5oYXMoSURPTSwgZmFsc2UpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb250YWluZXIuZ2V0KElET00pO1xuICAgICAgICB9XG4gICAgICAgIGxldCBkb207XG4gICAgICAgIGlmIChjb25maWcgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWYgKGNvbmZpZy5kb20gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGRvbSA9IGNvbmZpZy5kb207XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjb25maWcuaG9zdC5vd25lckRvY3VtZW50ICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgZG9tID0gbmV3IEhUTUxET00od2luZG93LCBjb25maWcuaG9zdC5vd25lckRvY3VtZW50LCBOb2RlLCBFbGVtZW50LCBIVE1MRWxlbWVudCwgQ3VzdG9tRXZlbnQsIENTU1N0eWxlU2hlZXQsIFNoYWRvd1Jvb3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZG9tID0gbmV3IEhUTUxET00od2luZG93LCBkb2N1bWVudCwgTm9kZSwgRWxlbWVudCwgSFRNTEVsZW1lbnQsIEN1c3RvbUV2ZW50LCBDU1NTdHlsZVNoZWV0LCBTaGFkb3dSb290KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGRvbSA9IG5ldyBIVE1MRE9NKHdpbmRvdywgZG9jdW1lbnQsIE5vZGUsIEVsZW1lbnQsIEhUTUxFbGVtZW50LCBDdXN0b21FdmVudCwgQ1NTU3R5bGVTaGVldCwgU2hhZG93Um9vdCk7XG4gICAgICAgIH1cbiAgICAgICAgUmVnaXN0cmF0aW9uLmluc3RhbmNlKElET00sIGRvbSkucmVnaXN0ZXIodGhpcy5jb250YWluZXIpO1xuICAgICAgICBSZWdpc3RyYXRpb24uaW5zdGFuY2UoSVNjaGVkdWxlciwgY3JlYXRlRE9NU2NoZWR1bGVyKHRoaXMuY29udGFpbmVyLCB3aW5kb3cpKS5yZWdpc3Rlcih0aGlzLmNvbnRhaW5lcik7XG4gICAgICAgIHJldHVybiBkb207XG4gICAgfVxufTtcbkJyb3dzZXJET01Jbml0aWFsaXplciA9IF9fZGVjb3JhdGUoW1xuICAgIF9fcGFyYW0oMCwgSUNvbnRhaW5lciksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3RdKVxuXSwgQnJvd3NlckRPTUluaXRpYWxpemVyKTtcbmV4cG9ydCBjb25zdCBJRE9NSW5pdGlhbGl6ZXJSZWdpc3RyYXRpb24gPSBCcm93c2VyRE9NSW5pdGlhbGl6ZXI7XG4vKipcbiAqIERlZmF1bHQgSFRNTC1zcGVjaWZpYywgYnJvd3Nlci1zcGVjaWZpYyBpbXBsZW1lbnRhdGlvbnMgZm9yIHRoZSBmb2xsb3dpbmcgaW50ZXJmYWNlczpcbiAqIC0gYElET01Jbml0aWFsaXplcmBcbiAqL1xuZXhwb3J0IGNvbnN0IERlZmF1bHRDb21wb25lbnRzID0gW1xuICAgIElET01Jbml0aWFsaXplclJlZ2lzdHJhdGlvbixcbl07XG4vKipcbiAqIEEgREkgY29uZmlndXJhdGlvbiBvYmplY3QgY29udGFpbmluZyBodG1sLXNwZWNpZmljLCBicm93c2VyLXNwZWNpZmljIHJlZ2lzdHJhdGlvbnM6XG4gKiAtIGBSdW50aW1lSHRtbENvbmZpZ3VyYXRpb25gIGZyb20gYEBhdXJlbGlhL3J1bnRpbWUtaHRtbGBcbiAqIC0gYERlZmF1bHRDb21wb25lbnRzYFxuICovXG5leHBvcnQgY29uc3QgUnVudGltZUh0bWxCcm93c2VyQ29uZmlndXJhdGlvbiA9IHtcbiAgICAvKipcbiAgICAgKiBBcHBseSB0aGlzIGNvbmZpZ3VyYXRpb24gdG8gdGhlIHByb3ZpZGVkIGNvbnRhaW5lci5cbiAgICAgKi9cbiAgICByZWdpc3Rlcihjb250YWluZXIpIHtcbiAgICAgICAgcmV0dXJuIFJ1bnRpbWVIdG1sQ29uZmlndXJhdGlvblxuICAgICAgICAgICAgLnJlZ2lzdGVyKGNvbnRhaW5lcilcbiAgICAgICAgICAgIC5yZWdpc3RlciguLi5EZWZhdWx0Q29tcG9uZW50cyk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgY29udGFpbmVyIHdpdGggdGhpcyBjb25maWd1cmF0aW9uIGFwcGxpZWQgdG8gaXQuXG4gICAgICovXG4gICAgY3JlYXRlQ29udGFpbmVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWdpc3RlcihESS5jcmVhdGVDb250YWluZXIoKSk7XG4gICAgfVxufTtcbmV4cG9ydCB7IEJyb3dzZXJET01Jbml0aWFsaXplciwgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCIsImltcG9ydCB7IF9fZGVjb3JhdGUsIF9fbWV0YWRhdGEgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IElTZXJ2aWNlTG9jYXRvciwgUmVwb3J0ZXIsIH0gZnJvbSAnQGF1cmVsaWEva2VybmVsJztcbmltcG9ydCB7IEJpbmRpbmdNb2RlLCBjb25uZWN0YWJsZSwgaGFzQmluZCwgaGFzVW5iaW5kLCBJT2JzZXJ2ZXJMb2NhdG9yLCBJU2NoZWR1bGVyLCBJTm9kZSwgfSBmcm9tICdAYXVyZWxpYS9ydW50aW1lJztcbmltcG9ydCB7IEF0dHJpYnV0ZU9ic2VydmVyLCB9IGZyb20gJy4uL29ic2VydmF0aW9uL2VsZW1lbnQtYXR0cmlidXRlLW9ic2VydmVyJztcbi8vIEJpbmRpbmdNb2RlIGlzIG5vdCBhIGNvbnN0IGVudW0gKGFuZCB0aGVyZWZvcmUgbm90IGlubGluZWQpLCBzbyBhc3NpZ25pbmcgdGhlbSB0byBhIHZhcmlhYmxlIHRvIHNhdmUgYSBtZW1iZXIgYWNjZXNzb3IgaXMgYSBtaW5vciBwZXJmIHR3ZWFrXG5jb25zdCB7IG9uZVRpbWUsIHRvVmlldywgZnJvbVZpZXcgfSA9IEJpbmRpbmdNb2RlO1xuLy8gcHJlLWNvbWJpbmluZyBmbGFncyBmb3IgYml0d2lzZSBjaGVja3MgaXMgYSBtaW5vciBwZXJmIHR3ZWFrXG5jb25zdCB0b1ZpZXdPck9uZVRpbWUgPSB0b1ZpZXcgfCBvbmVUaW1lO1xuLyoqXG4gKiBBdHRyaWJ1dGUgYmluZGluZy4gSGFuZGxlIGF0dHJpYnV0ZSBiaW5kaW5nIGJldHdlbiB2aWV3L3ZpZXcgbW9kZWwuIFVuZGVyc3RhbmQgSHRtbCBzcGVjaWFsIGF0dHJpYnV0ZXNcbiAqL1xubGV0IEF0dHJpYnV0ZUJpbmRpbmcgPSBjbGFzcyBBdHRyaWJ1dGVCaW5kaW5nIHtcbiAgICBjb25zdHJ1Y3Rvcihzb3VyY2VFeHByZXNzaW9uLCB0YXJnZXQsIFxuICAgIC8vIHNvbWUgYXR0cmlidXRlcyBtYXkgaGF2ZSBpbm5lciBzdHJ1Y3R1cmVcbiAgICAvLyBzdWNoIGFzIGNsYXNzIC0+IGNvbGxlY3Rpb24gb2YgY2xhc3MgbmFtZXNcbiAgICAvLyBzdWNoIGFzIHN0eWxlIC0+IGNvbGxlY3Rpb24gb2Ygc3R5bGUgcnVsZXNcbiAgICAvL1xuICAgIC8vIGZvciBub3JtYWwgYXR0cmlidXRlcywgdGFyZ2V0QXR0cmlidXRlIGFuZCB0YXJnZXRQcm9wZXJ0eSBhcmUgdGhlIHNhbWUgYW5kIGNhbiBiZSBpZ25vcmVcbiAgICB0YXJnZXRBdHRyaWJ1dGUsIHRhcmdldFByb3BlcnR5LCBtb2RlLCBvYnNlcnZlckxvY2F0b3IsIGxvY2F0b3IpIHtcbiAgICAgICAgdGhpcy5zb3VyY2VFeHByZXNzaW9uID0gc291cmNlRXhwcmVzc2lvbjtcbiAgICAgICAgdGhpcy50YXJnZXRBdHRyaWJ1dGUgPSB0YXJnZXRBdHRyaWJ1dGU7XG4gICAgICAgIHRoaXMudGFyZ2V0UHJvcGVydHkgPSB0YXJnZXRQcm9wZXJ0eTtcbiAgICAgICAgdGhpcy5tb2RlID0gbW9kZTtcbiAgICAgICAgdGhpcy5vYnNlcnZlckxvY2F0b3IgPSBvYnNlcnZlckxvY2F0b3I7XG4gICAgICAgIHRoaXMubG9jYXRvciA9IGxvY2F0b3I7XG4gICAgICAgIHRoaXMuaW50ZXJjZXB0b3IgPSB0aGlzO1xuICAgICAgICB0aGlzLiRzdGF0ZSA9IDAgLyogbm9uZSAqLztcbiAgICAgICAgdGhpcy4kc2NvcGUgPSBudWxsO1xuICAgICAgICB0aGlzLnBlcnNpc3RlbnRGbGFncyA9IDAgLyogbm9uZSAqLztcbiAgICAgICAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7XG4gICAgICAgIGNvbm5lY3RhYmxlLmFzc2lnbklkVG8odGhpcyk7XG4gICAgICAgIHRoaXMuJHNjaGVkdWxlciA9IGxvY2F0b3IuZ2V0KElTY2hlZHVsZXIpO1xuICAgIH1cbiAgICB1cGRhdGVUYXJnZXQodmFsdWUsIGZsYWdzKSB7XG4gICAgICAgIGZsYWdzIHw9IHRoaXMucGVyc2lzdGVudEZsYWdzO1xuICAgICAgICB0aGlzLnRhcmdldE9ic2VydmVyLnNldFZhbHVlKHZhbHVlLCBmbGFncyB8IDE2IC8qIHVwZGF0ZVRhcmdldEluc3RhbmNlICovKTtcbiAgICB9XG4gICAgdXBkYXRlU291cmNlKHZhbHVlLCBmbGFncykge1xuICAgICAgICBmbGFncyB8PSB0aGlzLnBlcnNpc3RlbnRGbGFncztcbiAgICAgICAgdGhpcy5zb3VyY2VFeHByZXNzaW9uLmFzc2lnbihmbGFncyB8IDMyIC8qIHVwZGF0ZVNvdXJjZUV4cHJlc3Npb24gKi8sIHRoaXMuJHNjb3BlLCB0aGlzLmxvY2F0b3IsIHZhbHVlKTtcbiAgICB9XG4gICAgaGFuZGxlQ2hhbmdlKG5ld1ZhbHVlLCBfcHJldmlvdXNWYWx1ZSwgZmxhZ3MpIHtcbiAgICAgICAgaWYgKCEodGhpcy4kc3RhdGUgJiA0IC8qIGlzQm91bmQgKi8pKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZmxhZ3MgfD0gdGhpcy5wZXJzaXN0ZW50RmxhZ3M7XG4gICAgICAgIGlmICh0aGlzLm1vZGUgPT09IEJpbmRpbmdNb2RlLmZyb21WaWV3KSB7XG4gICAgICAgICAgICBmbGFncyAmPSB+MTYgLyogdXBkYXRlVGFyZ2V0SW5zdGFuY2UgKi87XG4gICAgICAgICAgICBmbGFncyB8PSAzMiAvKiB1cGRhdGVTb3VyY2VFeHByZXNzaW9uICovO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmbGFncyAmIDE2IC8qIHVwZGF0ZVRhcmdldEluc3RhbmNlICovKSB7XG4gICAgICAgICAgICBjb25zdCBwcmV2aW91c1ZhbHVlID0gdGhpcy50YXJnZXRPYnNlcnZlci5nZXRWYWx1ZSgpO1xuICAgICAgICAgICAgLy8gaWYgdGhlIG9ubHkgb2JzZXJ2YWJsZSBpcyBhbiBBY2Nlc3NTY29wZSB0aGVuIHdlIGNhbiBhc3N1bWUgdGhlIHBhc3NlZC1pbiBuZXdWYWx1ZSBpcyB0aGUgY29ycmVjdCBhbmQgbGF0ZXN0IHZhbHVlXG4gICAgICAgICAgICBpZiAodGhpcy5zb3VyY2VFeHByZXNzaW9uLiRraW5kICE9PSAxMDA4MiAvKiBBY2Nlc3NTY29wZSAqLyB8fCB0aGlzLm9ic2VydmVyU2xvdHMgPiAxKSB7XG4gICAgICAgICAgICAgICAgbmV3VmFsdWUgPSB0aGlzLnNvdXJjZUV4cHJlc3Npb24uZXZhbHVhdGUoZmxhZ3MsIHRoaXMuJHNjb3BlLCB0aGlzLmxvY2F0b3IsIHRoaXMucGFydCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobmV3VmFsdWUgIT09IHByZXZpb3VzVmFsdWUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmludGVyY2VwdG9yLnVwZGF0ZVRhcmdldChuZXdWYWx1ZSwgZmxhZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCh0aGlzLm1vZGUgJiBvbmVUaW1lKSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMudmVyc2lvbisrO1xuICAgICAgICAgICAgICAgIHRoaXMuc291cmNlRXhwcmVzc2lvbi5jb25uZWN0KGZsYWdzLCB0aGlzLiRzY29wZSwgdGhpcy5pbnRlcmNlcHRvciwgdGhpcy5wYXJ0KTtcbiAgICAgICAgICAgICAgICB0aGlzLmludGVyY2VwdG9yLnVub2JzZXJ2ZShmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZsYWdzICYgMzIgLyogdXBkYXRlU291cmNlRXhwcmVzc2lvbiAqLykge1xuICAgICAgICAgICAgaWYgKG5ld1ZhbHVlICE9PSB0aGlzLnNvdXJjZUV4cHJlc3Npb24uZXZhbHVhdGUoZmxhZ3MsIHRoaXMuJHNjb3BlLCB0aGlzLmxvY2F0b3IsIHRoaXMucGFydCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmludGVyY2VwdG9yLnVwZGF0ZVNvdXJjZShuZXdWYWx1ZSwgZmxhZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IFJlcG9ydGVyLmVycm9yKDE1LCBmbGFncyk7XG4gICAgfVxuICAgICRiaW5kKGZsYWdzLCBzY29wZSwgcGFydCkge1xuICAgICAgICBpZiAodGhpcy4kc3RhdGUgJiA0IC8qIGlzQm91bmQgKi8pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLiRzY29wZSA9PT0gc2NvcGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmludGVyY2VwdG9yLiR1bmJpbmQoZmxhZ3MgfCA0MDk2IC8qIGZyb21CaW5kICovKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBhZGQgaXNCaW5kaW5nIGZsYWdcbiAgICAgICAgdGhpcy4kc3RhdGUgfD0gMSAvKiBpc0JpbmRpbmcgKi87XG4gICAgICAgIC8vIFN0b3JlIGZsYWdzIHdoaWNoIHdlIGNhbiBvbmx5IHJlY2VpdmUgZHVyaW5nICRiaW5kIGFuZCBuZWVkIHRvIHBhc3Mgb25cbiAgICAgICAgLy8gdG8gdGhlIEFTVCBkdXJpbmcgZXZhbHVhdGUvY29ubmVjdC9hc3NpZ25cbiAgICAgICAgdGhpcy5wZXJzaXN0ZW50RmxhZ3MgPSBmbGFncyAmIDIwODAzNzQ3OTkgLyogcGVyc2lzdGVudEJpbmRpbmdGbGFncyAqLztcbiAgICAgICAgdGhpcy4kc2NvcGUgPSBzY29wZTtcbiAgICAgICAgdGhpcy5wYXJ0ID0gcGFydDtcbiAgICAgICAgbGV0IHNvdXJjZUV4cHJlc3Npb24gPSB0aGlzLnNvdXJjZUV4cHJlc3Npb247XG4gICAgICAgIGlmIChoYXNCaW5kKHNvdXJjZUV4cHJlc3Npb24pKSB7XG4gICAgICAgICAgICBzb3VyY2VFeHByZXNzaW9uLmJpbmQoZmxhZ3MsIHNjb3BlLCB0aGlzLmludGVyY2VwdG9yKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgdGFyZ2V0T2JzZXJ2ZXIgPSB0aGlzLnRhcmdldE9ic2VydmVyO1xuICAgICAgICBpZiAoIXRhcmdldE9ic2VydmVyKSB7XG4gICAgICAgICAgICB0YXJnZXRPYnNlcnZlciA9IHRoaXMudGFyZ2V0T2JzZXJ2ZXIgPSBuZXcgQXR0cmlidXRlT2JzZXJ2ZXIodGhpcy4kc2NoZWR1bGVyLCBmbGFncywgdGhpcy5vYnNlcnZlckxvY2F0b3IsIHRoaXMudGFyZ2V0LCB0aGlzLnRhcmdldFByb3BlcnR5LCB0aGlzLnRhcmdldEF0dHJpYnV0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRhcmdldE9ic2VydmVyLmJpbmQpIHtcbiAgICAgICAgICAgIHRhcmdldE9ic2VydmVyLmJpbmQoZmxhZ3MpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGR1cmluZyBiaW5kLCBiaW5kaW5nIGJlaGF2aW9yIG1pZ2h0IGhhdmUgY2hhbmdlZCBzb3VyY2VFeHByZXNzaW9uXG4gICAgICAgIHNvdXJjZUV4cHJlc3Npb24gPSB0aGlzLnNvdXJjZUV4cHJlc3Npb247XG4gICAgICAgIGlmICh0aGlzLm1vZGUgJiB0b1ZpZXdPck9uZVRpbWUpIHtcbiAgICAgICAgICAgIHRoaXMuaW50ZXJjZXB0b3IudXBkYXRlVGFyZ2V0KHNvdXJjZUV4cHJlc3Npb24uZXZhbHVhdGUoZmxhZ3MsIHNjb3BlLCB0aGlzLmxvY2F0b3IsIHBhcnQpLCBmbGFncyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubW9kZSAmIHRvVmlldykge1xuICAgICAgICAgICAgc291cmNlRXhwcmVzc2lvbi5jb25uZWN0KGZsYWdzLCBzY29wZSwgdGhpcywgcGFydCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubW9kZSAmIGZyb21WaWV3KSB7XG4gICAgICAgICAgICB0YXJnZXRPYnNlcnZlclt0aGlzLmlkXSB8PSAzMiAvKiB1cGRhdGVTb3VyY2VFeHByZXNzaW9uICovO1xuICAgICAgICAgICAgdGFyZ2V0T2JzZXJ2ZXIuc3Vic2NyaWJlKHRoaXMuaW50ZXJjZXB0b3IpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGFkZCBpc0JvdW5kIGZsYWcgYW5kIHJlbW92ZSBpc0JpbmRpbmcgZmxhZ1xuICAgICAgICB0aGlzLiRzdGF0ZSB8PSA0IC8qIGlzQm91bmQgKi87XG4gICAgICAgIHRoaXMuJHN0YXRlICY9IH4xIC8qIGlzQmluZGluZyAqLztcbiAgICB9XG4gICAgJHVuYmluZChmbGFncykge1xuICAgICAgICBpZiAoISh0aGlzLiRzdGF0ZSAmIDQgLyogaXNCb3VuZCAqLykpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBhZGQgaXNVbmJpbmRpbmcgZmxhZ1xuICAgICAgICB0aGlzLiRzdGF0ZSB8PSAyIC8qIGlzVW5iaW5kaW5nICovO1xuICAgICAgICAvLyBjbGVhciBwZXJzaXN0ZW50IGZsYWdzXG4gICAgICAgIHRoaXMucGVyc2lzdGVudEZsYWdzID0gMCAvKiBub25lICovO1xuICAgICAgICBpZiAoaGFzVW5iaW5kKHRoaXMuc291cmNlRXhwcmVzc2lvbikpIHtcbiAgICAgICAgICAgIHRoaXMuc291cmNlRXhwcmVzc2lvbi51bmJpbmQoZmxhZ3MsIHRoaXMuJHNjb3BlLCB0aGlzLmludGVyY2VwdG9yKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiRzY29wZSA9IG51bGw7XG4gICAgICAgIGlmICh0aGlzLnRhcmdldE9ic2VydmVyLnVuYmluZCkge1xuICAgICAgICAgICAgdGhpcy50YXJnZXRPYnNlcnZlci51bmJpbmQoZmxhZ3MpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnRhcmdldE9ic2VydmVyLnVuc3Vic2NyaWJlKSB7XG4gICAgICAgICAgICB0aGlzLnRhcmdldE9ic2VydmVyLnVuc3Vic2NyaWJlKHRoaXMuaW50ZXJjZXB0b3IpO1xuICAgICAgICAgICAgdGhpcy50YXJnZXRPYnNlcnZlclt0aGlzLmlkXSAmPSB+MzIgLyogdXBkYXRlU291cmNlRXhwcmVzc2lvbiAqLztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmludGVyY2VwdG9yLnVub2JzZXJ2ZSh0cnVlKTtcbiAgICAgICAgLy8gcmVtb3ZlIGlzQm91bmQgYW5kIGlzVW5iaW5kaW5nIGZsYWdzXG4gICAgICAgIHRoaXMuJHN0YXRlICY9IH4oNCAvKiBpc0JvdW5kICovIHwgMiAvKiBpc1VuYmluZGluZyAqLyk7XG4gICAgfVxuICAgIGNvbm5lY3QoZmxhZ3MpIHtcbiAgICAgICAgaWYgKHRoaXMuJHN0YXRlICYgNCAvKiBpc0JvdW5kICovKSB7XG4gICAgICAgICAgICBmbGFncyB8PSB0aGlzLnBlcnNpc3RlbnRGbGFncztcbiAgICAgICAgICAgIHRoaXMuc291cmNlRXhwcmVzc2lvbi5jb25uZWN0KGZsYWdzIHwgMjA5NzE1MiAvKiBtdXN0RXZhbHVhdGUgKi8sIHRoaXMuJHNjb3BlLCB0aGlzLmludGVyY2VwdG9yLCB0aGlzLnBhcnQpOyAvLyB3aHkgZG8gd2UgaGF2ZSBhIGNvbm5lY3QgbWV0aG9kIGhlcmUgaW4gdGhlIGZpcnN0IHBsYWNlPyB3aWxsIHRoaXMgYmUgY2FsbGVkIGFmdGVyIGJpbmQ/XG4gICAgICAgIH1cbiAgICB9XG59O1xuQXR0cmlidXRlQmluZGluZyA9IF9fZGVjb3JhdGUoW1xuICAgIGNvbm5lY3RhYmxlKCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3QsIE9iamVjdCwgU3RyaW5nLCBTdHJpbmcsIE51bWJlciwgT2JqZWN0LCBPYmplY3RdKVxuXSwgQXR0cmlidXRlQmluZGluZyk7XG5leHBvcnQgeyBBdHRyaWJ1dGVCaW5kaW5nIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hdHRyaWJ1dGUuanMubWFwIiwiaW1wb3J0IHsgaGFzQmluZCwgaGFzVW5iaW5kIH0gZnJvbSAnQGF1cmVsaWEvcnVudGltZSc7XG4vKipcbiAqIExpc3RlbmVyIGJpbmRpbmcuIEhhbmRsZSBldmVudCBiaW5kaW5nIGJldHdlZW4gdmlldyBhbmQgdmlldyBtb2RlbFxuICovXG5leHBvcnQgY2xhc3MgTGlzdGVuZXIge1xuICAgIGNvbnN0cnVjdG9yKGRvbSwgdGFyZ2V0RXZlbnQsIGRlbGVnYXRpb25TdHJhdGVneSwgc291cmNlRXhwcmVzc2lvbiwgdGFyZ2V0LCBwcmV2ZW50RGVmYXVsdCwgZXZlbnRNYW5hZ2VyLCBsb2NhdG9yKSB7XG4gICAgICAgIHRoaXMuZG9tID0gZG9tO1xuICAgICAgICB0aGlzLnRhcmdldEV2ZW50ID0gdGFyZ2V0RXZlbnQ7XG4gICAgICAgIHRoaXMuZGVsZWdhdGlvblN0cmF0ZWd5ID0gZGVsZWdhdGlvblN0cmF0ZWd5O1xuICAgICAgICB0aGlzLnNvdXJjZUV4cHJlc3Npb24gPSBzb3VyY2VFeHByZXNzaW9uO1xuICAgICAgICB0aGlzLnRhcmdldCA9IHRhcmdldDtcbiAgICAgICAgdGhpcy5wcmV2ZW50RGVmYXVsdCA9IHByZXZlbnREZWZhdWx0O1xuICAgICAgICB0aGlzLmV2ZW50TWFuYWdlciA9IGV2ZW50TWFuYWdlcjtcbiAgICAgICAgdGhpcy5sb2NhdG9yID0gbG9jYXRvcjtcbiAgICAgICAgdGhpcy5pbnRlcmNlcHRvciA9IHRoaXM7XG4gICAgICAgIHRoaXMuJHN0YXRlID0gMCAvKiBub25lICovO1xuICAgIH1cbiAgICBjYWxsU291cmNlKGV2ZW50KSB7XG4gICAgICAgIGNvbnN0IG92ZXJyaWRlQ29udGV4dCA9IHRoaXMuJHNjb3BlLm92ZXJyaWRlQ29udGV4dDtcbiAgICAgICAgb3ZlcnJpZGVDb250ZXh0LiRldmVudCA9IGV2ZW50O1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnNvdXJjZUV4cHJlc3Npb24uZXZhbHVhdGUoMjA5NzE1MiAvKiBtdXN0RXZhbHVhdGUgKi8sIHRoaXMuJHNjb3BlLCB0aGlzLmxvY2F0b3IsIHRoaXMucGFydCk7XG4gICAgICAgIFJlZmxlY3QuZGVsZXRlUHJvcGVydHkob3ZlcnJpZGVDb250ZXh0LCAnJGV2ZW50Jyk7XG4gICAgICAgIGlmIChyZXN1bHQgIT09IHRydWUgJiYgdGhpcy5wcmV2ZW50RGVmYXVsdCkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBoYW5kbGVFdmVudChldmVudCkge1xuICAgICAgICB0aGlzLmludGVyY2VwdG9yLmNhbGxTb3VyY2UoZXZlbnQpO1xuICAgIH1cbiAgICAkYmluZChmbGFncywgc2NvcGUsIHBhcnQpIHtcbiAgICAgICAgaWYgKHRoaXMuJHN0YXRlICYgNCAvKiBpc0JvdW5kICovKSB7XG4gICAgICAgICAgICBpZiAodGhpcy4kc2NvcGUgPT09IHNjb3BlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pbnRlcmNlcHRvci4kdW5iaW5kKGZsYWdzIHwgNDA5NiAvKiBmcm9tQmluZCAqLyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gYWRkIGlzQmluZGluZyBmbGFnXG4gICAgICAgIHRoaXMuJHN0YXRlIHw9IDEgLyogaXNCaW5kaW5nICovO1xuICAgICAgICB0aGlzLiRzY29wZSA9IHNjb3BlO1xuICAgICAgICB0aGlzLnBhcnQgPSBwYXJ0O1xuICAgICAgICBjb25zdCBzb3VyY2VFeHByZXNzaW9uID0gdGhpcy5zb3VyY2VFeHByZXNzaW9uO1xuICAgICAgICBpZiAoaGFzQmluZChzb3VyY2VFeHByZXNzaW9uKSkge1xuICAgICAgICAgICAgc291cmNlRXhwcmVzc2lvbi5iaW5kKGZsYWdzLCBzY29wZSwgdGhpcy5pbnRlcmNlcHRvcik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5oYW5kbGVyID0gdGhpcy5ldmVudE1hbmFnZXIuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLmRvbSwgdGhpcy50YXJnZXQsIHRoaXMudGFyZ2V0RXZlbnQsIHRoaXMuaW50ZXJjZXB0b3IsIHRoaXMuZGVsZWdhdGlvblN0cmF0ZWd5KTtcbiAgICAgICAgLy8gYWRkIGlzQm91bmQgZmxhZyBhbmQgcmVtb3ZlIGlzQmluZGluZyBmbGFnXG4gICAgICAgIHRoaXMuJHN0YXRlIHw9IDQgLyogaXNCb3VuZCAqLztcbiAgICAgICAgdGhpcy4kc3RhdGUgJj0gfjEgLyogaXNCaW5kaW5nICovO1xuICAgIH1cbiAgICAkdW5iaW5kKGZsYWdzKSB7XG4gICAgICAgIGlmICghKHRoaXMuJHN0YXRlICYgNCAvKiBpc0JvdW5kICovKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIGFkZCBpc1VuYmluZGluZyBmbGFnXG4gICAgICAgIHRoaXMuJHN0YXRlIHw9IDIgLyogaXNVbmJpbmRpbmcgKi87XG4gICAgICAgIGNvbnN0IHNvdXJjZUV4cHJlc3Npb24gPSB0aGlzLnNvdXJjZUV4cHJlc3Npb247XG4gICAgICAgIGlmIChoYXNVbmJpbmQoc291cmNlRXhwcmVzc2lvbikpIHtcbiAgICAgICAgICAgIHNvdXJjZUV4cHJlc3Npb24udW5iaW5kKGZsYWdzLCB0aGlzLiRzY29wZSwgdGhpcy5pbnRlcmNlcHRvcik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4kc2NvcGUgPSBudWxsO1xuICAgICAgICB0aGlzLmhhbmRsZXIuZGlzcG9zZSgpO1xuICAgICAgICB0aGlzLmhhbmRsZXIgPSBudWxsO1xuICAgICAgICAvLyByZW1vdmUgaXNCb3VuZCBhbmQgaXNVbmJpbmRpbmcgZmxhZ3NcbiAgICAgICAgdGhpcy4kc3RhdGUgJj0gfig0IC8qIGlzQm91bmQgKi8gfCAyIC8qIGlzVW5iaW5kaW5nICovKTtcbiAgICB9XG4gICAgb2JzZXJ2ZVByb3BlcnR5KGZsYWdzLCBvYmosIHByb3BlcnR5TmFtZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGhhbmRsZUNoYW5nZShuZXdWYWx1ZSwgcHJldmlvdXNWYWx1ZSwgZmxhZ3MpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxpc3RlbmVyLmpzLm1hcCIsImltcG9ydCB7IERJIH0gZnJvbSAnQGF1cmVsaWEva2VybmVsJztcbmltcG9ydCB7IFJ1bnRpbWVDb25maWd1cmF0aW9uIH0gZnJvbSAnQGF1cmVsaWEvcnVudGltZSc7XG5pbXBvcnQgeyBBdHRyaWJ1dGVCaW5kaW5nUmVuZGVyZXIsIExpc3RlbmVyQmluZGluZ1JlbmRlcmVyLCBTZXRBdHRyaWJ1dGVSZW5kZXJlciwgU3R5bGVQcm9wZXJ0eUJpbmRpbmdSZW5kZXJlciwgVGV4dEJpbmRpbmdSZW5kZXJlciwgU2V0Q2xhc3NBdHRyaWJ1dGVSZW5kZXJlciwgU2V0U3R5bGVBdHRyaWJ1dGVSZW5kZXJlciB9IGZyb20gJy4vaHRtbC1yZW5kZXJlcic7XG5pbXBvcnQgeyBUYXJnZXRBY2Nlc3NvckxvY2F0b3IsIFRhcmdldE9ic2VydmVyTG9jYXRvciB9IGZyb20gJy4vb2JzZXJ2YXRpb24vb2JzZXJ2ZXItbG9jYXRvcic7XG5pbXBvcnQgeyBIVE1MUHJvamVjdG9yTG9jYXRvciB9IGZyb20gJy4vcHJvamVjdG9ycyc7XG5pbXBvcnQgeyBBdHRyQmluZGluZ0JlaGF2aW9yIH0gZnJvbSAnLi9yZXNvdXJjZXMvYmluZGluZy1iZWhhdmlvcnMvYXR0cic7XG5pbXBvcnQgeyBTZWxmQmluZGluZ0JlaGF2aW9yIH0gZnJvbSAnLi9yZXNvdXJjZXMvYmluZGluZy1iZWhhdmlvcnMvc2VsZic7XG5pbXBvcnQgeyBVcGRhdGVUcmlnZ2VyQmluZGluZ0JlaGF2aW9yIH0gZnJvbSAnLi9yZXNvdXJjZXMvYmluZGluZy1iZWhhdmlvcnMvdXBkYXRlLXRyaWdnZXInO1xuaW1wb3J0IHsgQmx1ciB9IGZyb20gJy4vcmVzb3VyY2VzL2N1c3RvbS1hdHRyaWJ1dGVzL2JsdXInO1xuaW1wb3J0IHsgRm9jdXMgfSBmcm9tICcuL3Jlc291cmNlcy9jdXN0b20tYXR0cmlidXRlcy9mb2N1cyc7XG5pbXBvcnQgeyBQb3J0YWwgfSBmcm9tICcuL3Jlc291cmNlcy9jdXN0b20tYXR0cmlidXRlcy9wb3J0YWwnO1xuaW1wb3J0IHsgQ29tcG9zZSB9IGZyb20gJy4vcmVzb3VyY2VzL2N1c3RvbS1lbGVtZW50cy9jb21wb3NlJztcbmV4cG9ydCBjb25zdCBJUHJvamVjdG9yTG9jYXRvclJlZ2lzdHJhdGlvbiA9IEhUTUxQcm9qZWN0b3JMb2NhdG9yO1xuZXhwb3J0IGNvbnN0IElUYXJnZXRBY2Nlc3NvckxvY2F0b3JSZWdpc3RyYXRpb24gPSBUYXJnZXRBY2Nlc3NvckxvY2F0b3I7XG5leHBvcnQgY29uc3QgSVRhcmdldE9ic2VydmVyTG9jYXRvclJlZ2lzdHJhdGlvbiA9IFRhcmdldE9ic2VydmVyTG9jYXRvcjtcbi8qKlxuICogRGVmYXVsdCBIVE1MLXNwZWNpZmljIChidXQgZW52aXJvbm1lbnQtYWdub3N0aWMpIGltcGxlbWVudGF0aW9ucyBmb3IgdGhlIGZvbGxvd2luZyBpbnRlcmZhY2VzOlxuICogLSBgSVByb2plY3RvckxvY2F0b3JgXG4gKiAtIGBJVGFyZ2V0QWNjZXNzb3JMb2NhdG9yYFxuICogLSBgSVRhcmdldE9ic2VydmVyTG9jYXRvcmBcbiAqIC0gYElUZW1wbGF0ZUZhY3RvcnlgXG4gKi9cbmV4cG9ydCBjb25zdCBEZWZhdWx0Q29tcG9uZW50cyA9IFtcbiAgICBJUHJvamVjdG9yTG9jYXRvclJlZ2lzdHJhdGlvbixcbiAgICBJVGFyZ2V0QWNjZXNzb3JMb2NhdG9yUmVnaXN0cmF0aW9uLFxuICAgIElUYXJnZXRPYnNlcnZlckxvY2F0b3JSZWdpc3RyYXRpb24sXG5dO1xuZXhwb3J0IGNvbnN0IEF0dHJCaW5kaW5nQmVoYXZpb3JSZWdpc3RyYXRpb24gPSBBdHRyQmluZGluZ0JlaGF2aW9yO1xuZXhwb3J0IGNvbnN0IFNlbGZCaW5kaW5nQmVoYXZpb3JSZWdpc3RyYXRpb24gPSBTZWxmQmluZGluZ0JlaGF2aW9yO1xuZXhwb3J0IGNvbnN0IFVwZGF0ZVRyaWdnZXJCaW5kaW5nQmVoYXZpb3JSZWdpc3RyYXRpb24gPSBVcGRhdGVUcmlnZ2VyQmluZGluZ0JlaGF2aW9yO1xuZXhwb3J0IGNvbnN0IENvbXBvc2VSZWdpc3RyYXRpb24gPSBDb21wb3NlO1xuZXhwb3J0IGNvbnN0IFBvcnRhbFJlZ2lzdHJhdGlvbiA9IFBvcnRhbDtcbmV4cG9ydCBjb25zdCBGb2N1c1JlZ2lzdHJhdGlvbiA9IEZvY3VzO1xuZXhwb3J0IGNvbnN0IEJsdXJSZWdpc3RyYXRpb24gPSBCbHVyO1xuLyoqXG4gKiBEZWZhdWx0IEhUTUwtc3BlY2lmaWMgKGJ1dCBlbnZpcm9ubWVudC1hZ25vc3RpYykgcmVzb3VyY2VzOlxuICogLSBCaW5kaW5nIEJlaGF2aW9yczogYGF0dHJgLCBgc2VsZmAsIGB1cGRhdGVUcmlnZ2VyYFxuICogLSBDdXN0b20gRWxlbWVudHM6IGBhdS1jb21wb3NlYFxuICogLSBDdXN0b20gQXR0cmlidXRlczogYGJsdXJgLCBgZm9jdXNgLCBgcG9ydGFsYFxuICovXG5leHBvcnQgY29uc3QgRGVmYXVsdFJlc291cmNlcyA9IFtcbiAgICBBdHRyQmluZGluZ0JlaGF2aW9yUmVnaXN0cmF0aW9uLFxuICAgIFNlbGZCaW5kaW5nQmVoYXZpb3JSZWdpc3RyYXRpb24sXG4gICAgVXBkYXRlVHJpZ2dlckJpbmRpbmdCZWhhdmlvclJlZ2lzdHJhdGlvbixcbiAgICBDb21wb3NlUmVnaXN0cmF0aW9uLFxuICAgIFBvcnRhbFJlZ2lzdHJhdGlvbixcbiAgICBGb2N1c1JlZ2lzdHJhdGlvbixcbiAgICBCbHVyUmVnaXN0cmF0aW9uXG5dO1xuZXhwb3J0IGNvbnN0IExpc3RlbmVyQmluZGluZ1JlbmRlcmVyUmVnaXN0cmF0aW9uID0gTGlzdGVuZXJCaW5kaW5nUmVuZGVyZXI7XG5leHBvcnQgY29uc3QgQXR0cmlidXRlQmluZGluZ1JlbmRlcmVyUmVnaXN0cmF0aW9uID0gQXR0cmlidXRlQmluZGluZ1JlbmRlcmVyO1xuZXhwb3J0IGNvbnN0IFNldEF0dHJpYnV0ZVJlbmRlcmVyUmVnaXN0cmF0aW9uID0gU2V0QXR0cmlidXRlUmVuZGVyZXI7XG5leHBvcnQgY29uc3QgU2V0Q2xhc3NBdHRyaWJ1dGVSZW5kZXJlclJlZ2lzdHJhdGlvbiA9IFNldENsYXNzQXR0cmlidXRlUmVuZGVyZXI7XG5leHBvcnQgY29uc3QgU2V0U3R5bGVBdHRyaWJ1dGVSZW5kZXJlclJlZ2lzdHJhdGlvbiA9IFNldFN0eWxlQXR0cmlidXRlUmVuZGVyZXI7XG5leHBvcnQgY29uc3QgU3R5bGVQcm9wZXJ0eUJpbmRpbmdSZW5kZXJlclJlZ2lzdHJhdGlvbiA9IFN0eWxlUHJvcGVydHlCaW5kaW5nUmVuZGVyZXI7XG5leHBvcnQgY29uc3QgVGV4dEJpbmRpbmdSZW5kZXJlclJlZ2lzdHJhdGlvbiA9IFRleHRCaW5kaW5nUmVuZGVyZXI7XG4vKipcbiAqIERlZmF1bHQgSFRNTC1zcGVjZmljIChidXQgZW52aXJvbm1lbnQtYWdub3N0aWMpIHJlbmRlcmVycyBmb3I6XG4gKiAtIExpc3RlbmVyIEJpbmRpbmdzOiBgdHJpZ2dlcmAsIGBjYXB0dXJlYCwgYGRlbGVnYXRlYFxuICogLSBTZXRBdHRyaWJ1dGVcbiAqIC0gU3R5bGVQcm9wZXJ0eTogYHN0eWxlYCwgYGNzc2BcbiAqIC0gVGV4dEJpbmRpbmc6IGAke31gXG4gKi9cbmV4cG9ydCBjb25zdCBEZWZhdWx0UmVuZGVyZXJzID0gW1xuICAgIExpc3RlbmVyQmluZGluZ1JlbmRlcmVyUmVnaXN0cmF0aW9uLFxuICAgIEF0dHJpYnV0ZUJpbmRpbmdSZW5kZXJlclJlZ2lzdHJhdGlvbixcbiAgICBTZXRBdHRyaWJ1dGVSZW5kZXJlclJlZ2lzdHJhdGlvbixcbiAgICBTZXRDbGFzc0F0dHJpYnV0ZVJlbmRlcmVyUmVnaXN0cmF0aW9uLFxuICAgIFNldFN0eWxlQXR0cmlidXRlUmVuZGVyZXJSZWdpc3RyYXRpb24sXG4gICAgU3R5bGVQcm9wZXJ0eUJpbmRpbmdSZW5kZXJlclJlZ2lzdHJhdGlvbixcbiAgICBUZXh0QmluZGluZ1JlbmRlcmVyUmVnaXN0cmF0aW9uXG5dO1xuLyoqXG4gKiBBIERJIGNvbmZpZ3VyYXRpb24gb2JqZWN0IGNvbnRhaW5pbmcgaHRtbC1zcGVjaWZpYyAoYnV0IGVudmlyb25tZW50LWFnbm9zdGljKSByZWdpc3RyYXRpb25zOlxuICogLSBgUnVudGltZUNvbmZpZ3VyYXRpb25gIGZyb20gYEBhdXJlbGlhL3J1bnRpbWVgXG4gKiAtIGBEZWZhdWx0Q29tcG9uZW50c2BcbiAqIC0gYERlZmF1bHRSZXNvdXJjZXNgXG4gKiAtIGBEZWZhdWx0UmVuZGVyZXJzYFxuICovXG5leHBvcnQgY29uc3QgUnVudGltZUh0bWxDb25maWd1cmF0aW9uID0ge1xuICAgIC8qKlxuICAgICAqIEFwcGx5IHRoaXMgY29uZmlndXJhdGlvbiB0byB0aGUgcHJvdmlkZWQgY29udGFpbmVyLlxuICAgICAqL1xuICAgIHJlZ2lzdGVyKGNvbnRhaW5lcikge1xuICAgICAgICByZXR1cm4gUnVudGltZUNvbmZpZ3VyYXRpb25cbiAgICAgICAgICAgIC5yZWdpc3Rlcihjb250YWluZXIpXG4gICAgICAgICAgICAucmVnaXN0ZXIoLi4uRGVmYXVsdENvbXBvbmVudHMsIC4uLkRlZmF1bHRSZXNvdXJjZXMsIC4uLkRlZmF1bHRSZW5kZXJlcnMpO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IGNvbnRhaW5lciB3aXRoIHRoaXMgY29uZmlndXJhdGlvbiBhcHBsaWVkIHRvIGl0LlxuICAgICAqL1xuICAgIGNyZWF0ZUNvbnRhaW5lcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVnaXN0ZXIoREkuY3JlYXRlQ29udGFpbmVyKCkpO1xuICAgIH1cbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb25maWd1cmF0aW9uLmpzLm1hcCIsImltcG9ydCB7IEN1c3RvbUVsZW1lbnQsIEh5ZHJhdGVFbGVtZW50SW5zdHJ1Y3Rpb24sIEN1c3RvbUVsZW1lbnREZWZpbml0aW9uLCBnZXRSZW5kZXJDb250ZXh0LCB9IGZyb20gJ0BhdXJlbGlhL3J1bnRpbWUnO1xuaW1wb3J0IHsgaXNIVE1MVGFyZ2V0ZWRJbnN0cnVjdGlvbiB9IGZyb20gJy4vZGVmaW5pdGlvbnMnO1xuaW1wb3J0IHsgU2V0QXR0cmlidXRlSW5zdHJ1Y3Rpb24gfSBmcm9tICcuL2luc3RydWN0aW9ucyc7XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRWxlbWVudChkb20sIHRhZ09yVHlwZSwgcHJvcHMsIGNoaWxkcmVuKSB7XG4gICAgaWYgKHR5cGVvZiB0YWdPclR5cGUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiBjcmVhdGVFbGVtZW50Rm9yVGFnKGRvbSwgdGFnT3JUeXBlLCBwcm9wcywgY2hpbGRyZW4pO1xuICAgIH1cbiAgICBlbHNlIGlmIChDdXN0b21FbGVtZW50LmlzVHlwZSh0YWdPclR5cGUpKSB7XG4gICAgICAgIHJldHVybiBjcmVhdGVFbGVtZW50Rm9yVHlwZShkb20sIHRhZ09yVHlwZSwgcHJvcHMsIGNoaWxkcmVuKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCB0YWdPclR5cGUuYCk7XG4gICAgfVxufVxuLyoqXG4gKiBSZW5kZXJQbGFuLiBUb2RvOiBkZXNjcmliZSBnb2FsIG9mIHRoaXMgY2xhc3NcbiAqL1xuZXhwb3J0IGNsYXNzIFJlbmRlclBsYW4ge1xuICAgIGNvbnN0cnVjdG9yKGRvbSwgbm9kZSwgaW5zdHJ1Y3Rpb25zLCBkZXBlbmRlbmNpZXMpIHtcbiAgICAgICAgdGhpcy5kb20gPSBkb207XG4gICAgICAgIHRoaXMubm9kZSA9IG5vZGU7XG4gICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25zID0gaW5zdHJ1Y3Rpb25zO1xuICAgICAgICB0aGlzLmRlcGVuZGVuY2llcyA9IGRlcGVuZGVuY2llcztcbiAgICAgICAgdGhpcy5sYXp5RGVmaW5pdGlvbiA9IHZvaWQgMDtcbiAgICB9XG4gICAgZ2V0IGRlZmluaXRpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLmxhenlEZWZpbml0aW9uID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIHRoaXMubGF6eURlZmluaXRpb24gPSBDdXN0b21FbGVtZW50RGVmaW5pdGlvbi5jcmVhdGUoe1xuICAgICAgICAgICAgICAgIG5hbWU6IEN1c3RvbUVsZW1lbnQuZ2VuZXJhdGVOYW1lKCksXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6IHRoaXMubm9kZSxcbiAgICAgICAgICAgICAgICBuZWVkc0NvbXBpbGU6IHR5cGVvZiB0aGlzLm5vZGUgPT09ICdzdHJpbmcnLFxuICAgICAgICAgICAgICAgIGluc3RydWN0aW9uczogdGhpcy5pbnN0cnVjdGlvbnMsXG4gICAgICAgICAgICAgICAgZGVwZW5kZW5jaWVzOiB0aGlzLmRlcGVuZGVuY2llcyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmxhenlEZWZpbml0aW9uO1xuICAgIH1cbiAgICBnZXRDb250ZXh0KHBhcmVudENvbnRhaW5lcikge1xuICAgICAgICByZXR1cm4gZ2V0UmVuZGVyQ29udGV4dCh0aGlzLmRlZmluaXRpb24sIHBhcmVudENvbnRhaW5lciwgdm9pZCAwKTtcbiAgICB9XG4gICAgY3JlYXRlVmlldyhwYXJlbnRDb250YWluZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Vmlld0ZhY3RvcnkocGFyZW50Q29udGFpbmVyKS5jcmVhdGUoKTtcbiAgICB9XG4gICAgZ2V0Vmlld0ZhY3RvcnkocGFyZW50Q29udGFpbmVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldENvbnRleHQocGFyZW50Q29udGFpbmVyKS5nZXRWaWV3RmFjdG9yeSgpO1xuICAgIH1cbiAgICAvKiogQGludGVybmFsICovXG4gICAgbWVyZ2VJbnRvKHBhcmVudCwgaW5zdHJ1Y3Rpb25zLCBkZXBlbmRlbmNpZXMpIHtcbiAgICAgICAgdGhpcy5kb20uYXBwZW5kQ2hpbGQocGFyZW50LCB0aGlzLm5vZGUpO1xuICAgICAgICBpbnN0cnVjdGlvbnMucHVzaCguLi50aGlzLmluc3RydWN0aW9ucyk7XG4gICAgICAgIGRlcGVuZGVuY2llcy5wdXNoKC4uLnRoaXMuZGVwZW5kZW5jaWVzKTtcbiAgICB9XG59XG5mdW5jdGlvbiBjcmVhdGVFbGVtZW50Rm9yVGFnKGRvbSwgdGFnTmFtZSwgcHJvcHMsIGNoaWxkcmVuKSB7XG4gICAgY29uc3QgaW5zdHJ1Y3Rpb25zID0gW107XG4gICAgY29uc3QgYWxsSW5zdHJ1Y3Rpb25zID0gW107XG4gICAgY29uc3QgZGVwZW5kZW5jaWVzID0gW107XG4gICAgY29uc3QgZWxlbWVudCA9IGRvbS5jcmVhdGVFbGVtZW50KHRhZ05hbWUpO1xuICAgIGxldCBoYXNJbnN0cnVjdGlvbnMgPSBmYWxzZTtcbiAgICBpZiAocHJvcHMpIHtcbiAgICAgICAgT2JqZWN0LmtleXMocHJvcHMpXG4gICAgICAgICAgICAuZm9yRWFjaCh0byA9PiB7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHByb3BzW3RvXTtcbiAgICAgICAgICAgIGlmIChpc0hUTUxUYXJnZXRlZEluc3RydWN0aW9uKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGhhc0luc3RydWN0aW9ucyA9IHRydWU7XG4gICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zLnB1c2godmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZG9tLnNldEF0dHJpYnV0ZShlbGVtZW50LCB0bywgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGhhc0luc3RydWN0aW9ucykge1xuICAgICAgICBkb20ubWFrZVRhcmdldChlbGVtZW50KTtcbiAgICAgICAgYWxsSW5zdHJ1Y3Rpb25zLnB1c2goaW5zdHJ1Y3Rpb25zKTtcbiAgICB9XG4gICAgaWYgKGNoaWxkcmVuKSB7XG4gICAgICAgIGFkZENoaWxkcmVuKGRvbSwgZWxlbWVudCwgY2hpbGRyZW4sIGFsbEluc3RydWN0aW9ucywgZGVwZW5kZW5jaWVzKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBSZW5kZXJQbGFuKGRvbSwgZWxlbWVudCwgYWxsSW5zdHJ1Y3Rpb25zLCBkZXBlbmRlbmNpZXMpO1xufVxuZnVuY3Rpb24gY3JlYXRlRWxlbWVudEZvclR5cGUoZG9tLCBUeXBlLCBwcm9wcywgY2hpbGRyZW4pIHtcbiAgICBjb25zdCBkZWZpbml0aW9uID0gQ3VzdG9tRWxlbWVudC5nZXREZWZpbml0aW9uKFR5cGUpO1xuICAgIGNvbnN0IHRhZ05hbWUgPSBkZWZpbml0aW9uLm5hbWU7XG4gICAgY29uc3QgaW5zdHJ1Y3Rpb25zID0gW107XG4gICAgY29uc3QgYWxsSW5zdHJ1Y3Rpb25zID0gW2luc3RydWN0aW9uc107XG4gICAgY29uc3QgZGVwZW5kZW5jaWVzID0gW107XG4gICAgY29uc3QgY2hpbGRJbnN0cnVjdGlvbnMgPSBbXTtcbiAgICBjb25zdCBiaW5kYWJsZXMgPSBkZWZpbml0aW9uLmJpbmRhYmxlcztcbiAgICBjb25zdCBlbGVtZW50ID0gZG9tLmNyZWF0ZUVsZW1lbnQodGFnTmFtZSk7XG4gICAgZG9tLm1ha2VUYXJnZXQoZWxlbWVudCk7XG4gICAgaWYgKCFkZXBlbmRlbmNpZXMuaW5jbHVkZXMoVHlwZSkpIHtcbiAgICAgICAgZGVwZW5kZW5jaWVzLnB1c2goVHlwZSk7XG4gICAgfVxuICAgIGluc3RydWN0aW9ucy5wdXNoKG5ldyBIeWRyYXRlRWxlbWVudEluc3RydWN0aW9uKHRhZ05hbWUsIGNoaWxkSW5zdHJ1Y3Rpb25zKSk7XG4gICAgaWYgKHByb3BzKSB7XG4gICAgICAgIE9iamVjdC5rZXlzKHByb3BzKVxuICAgICAgICAgICAgLmZvckVhY2godG8gPT4ge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBwcm9wc1t0b107XG4gICAgICAgICAgICBpZiAoaXNIVE1MVGFyZ2V0ZWRJbnN0cnVjdGlvbih2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBjaGlsZEluc3RydWN0aW9ucy5wdXNoKHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJpbmRhYmxlID0gYmluZGFibGVzW3RvXTtcbiAgICAgICAgICAgICAgICBpZiAoYmluZGFibGUgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgICAgICBjaGlsZEluc3RydWN0aW9ucy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwicmVcIiAvKiBzZXRQcm9wZXJ0eSAqLyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjaGlsZEluc3RydWN0aW9ucy5wdXNoKG5ldyBTZXRBdHRyaWJ1dGVJbnN0cnVjdGlvbih2YWx1ZSwgdG8pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoY2hpbGRyZW4pIHtcbiAgICAgICAgYWRkQ2hpbGRyZW4oZG9tLCBlbGVtZW50LCBjaGlsZHJlbiwgYWxsSW5zdHJ1Y3Rpb25zLCBkZXBlbmRlbmNpZXMpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFJlbmRlclBsYW4oZG9tLCBlbGVtZW50LCBhbGxJbnN0cnVjdGlvbnMsIGRlcGVuZGVuY2llcyk7XG59XG5mdW5jdGlvbiBhZGRDaGlsZHJlbihkb20sIHBhcmVudCwgY2hpbGRyZW4sIGFsbEluc3RydWN0aW9ucywgZGVwZW5kZW5jaWVzKSB7XG4gICAgZm9yIChsZXQgaSA9IDAsIGlpID0gY2hpbGRyZW4ubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICBjb25zdCBjdXJyZW50ID0gY2hpbGRyZW5baV07XG4gICAgICAgIHN3aXRjaCAodHlwZW9mIGN1cnJlbnQpIHtcbiAgICAgICAgICAgIGNhc2UgJ3N0cmluZyc6XG4gICAgICAgICAgICAgICAgZG9tLmFwcGVuZENoaWxkKHBhcmVudCwgZG9tLmNyZWF0ZVRleHROb2RlKGN1cnJlbnQpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ29iamVjdCc6XG4gICAgICAgICAgICAgICAgaWYgKGRvbS5pc05vZGVJbnN0YW5jZShjdXJyZW50KSkge1xuICAgICAgICAgICAgICAgICAgICBkb20uYXBwZW5kQ2hpbGQocGFyZW50LCBjdXJyZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoJ21lcmdlSW50bycgaW4gY3VycmVudCkge1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50Lm1lcmdlSW50byhwYXJlbnQsIGFsbEluc3RydWN0aW9ucywgZGVwZW5kZW5jaWVzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jcmVhdGUtZWxlbWVudC5qcy5tYXAiLCJleHBvcnQgdmFyIEhUTUxUYXJnZXRlZEluc3RydWN0aW9uVHlwZTtcbihmdW5jdGlvbiAoSFRNTFRhcmdldGVkSW5zdHJ1Y3Rpb25UeXBlKSB7XG4gICAgSFRNTFRhcmdldGVkSW5zdHJ1Y3Rpb25UeXBlW1widGV4dEJpbmRpbmdcIl0gPSBcImhhXCI7XG4gICAgSFRNTFRhcmdldGVkSW5zdHJ1Y3Rpb25UeXBlW1wibGlzdGVuZXJCaW5kaW5nXCJdID0gXCJoYlwiO1xuICAgIEhUTUxUYXJnZXRlZEluc3RydWN0aW9uVHlwZVtcImF0dHJpYnV0ZUJpbmRpbmdcIl0gPSBcImhjXCI7XG4gICAgSFRNTFRhcmdldGVkSW5zdHJ1Y3Rpb25UeXBlW1wic3R5bGVQcm9wZXJ0eUJpbmRpbmdcIl0gPSBcImhkXCI7XG4gICAgSFRNTFRhcmdldGVkSW5zdHJ1Y3Rpb25UeXBlW1wic2V0QXR0cmlidXRlXCJdID0gXCJoZVwiO1xuICAgIEhUTUxUYXJnZXRlZEluc3RydWN0aW9uVHlwZVtcInNldENsYXNzQXR0cmlidXRlXCJdID0gXCJoZlwiO1xuICAgIEhUTUxUYXJnZXRlZEluc3RydWN0aW9uVHlwZVtcInNldFN0eWxlQXR0cmlidXRlXCJdID0gXCJoZ1wiO1xufSkoSFRNTFRhcmdldGVkSW5zdHJ1Y3Rpb25UeXBlIHx8IChIVE1MVGFyZ2V0ZWRJbnN0cnVjdGlvblR5cGUgPSB7fSkpO1xuZXhwb3J0IGZ1bmN0aW9uIGlzSFRNTFRhcmdldGVkSW5zdHJ1Y3Rpb24odmFsdWUpIHtcbiAgICBjb25zdCB0eXBlID0gdmFsdWUudHlwZTtcbiAgICByZXR1cm4gdHlwZW9mIHR5cGUgPT09ICdzdHJpbmcnICYmIHR5cGUubGVuZ3RoID09PSAyO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGVmaW5pdGlvbnMuanMubWFwIiwiaW1wb3J0IHsgUExBVEZPUk0sIFJlZ2lzdHJhdGlvbiwgUmVwb3J0ZXIgfSBmcm9tICdAYXVyZWxpYS9rZXJuZWwnO1xuaW1wb3J0IHsgRE9NLCBJRE9NLCBJTm9kZSwgQ3VzdG9tRWxlbWVudCB9IGZyb20gJ0BhdXJlbGlhL3J1bnRpbWUnO1xuaW1wb3J0IHsgU2hhZG93RE9NUHJvamVjdG9yIH0gZnJvbSAnLi9wcm9qZWN0b3JzJztcbmV4cG9ydCB2YXIgTm9kZVR5cGU7XG4oZnVuY3Rpb24gKE5vZGVUeXBlKSB7XG4gICAgTm9kZVR5cGVbTm9kZVR5cGVbXCJFbGVtZW50XCJdID0gMV0gPSBcIkVsZW1lbnRcIjtcbiAgICBOb2RlVHlwZVtOb2RlVHlwZVtcIkF0dHJcIl0gPSAyXSA9IFwiQXR0clwiO1xuICAgIE5vZGVUeXBlW05vZGVUeXBlW1wiVGV4dFwiXSA9IDNdID0gXCJUZXh0XCI7XG4gICAgTm9kZVR5cGVbTm9kZVR5cGVbXCJDREFUQVNlY3Rpb25cIl0gPSA0XSA9IFwiQ0RBVEFTZWN0aW9uXCI7XG4gICAgTm9kZVR5cGVbTm9kZVR5cGVbXCJFbnRpdHlSZWZlcmVuY2VcIl0gPSA1XSA9IFwiRW50aXR5UmVmZXJlbmNlXCI7XG4gICAgTm9kZVR5cGVbTm9kZVR5cGVbXCJFbnRpdHlcIl0gPSA2XSA9IFwiRW50aXR5XCI7XG4gICAgTm9kZVR5cGVbTm9kZVR5cGVbXCJQcm9jZXNzaW5nSW5zdHJ1Y3Rpb25cIl0gPSA3XSA9IFwiUHJvY2Vzc2luZ0luc3RydWN0aW9uXCI7XG4gICAgTm9kZVR5cGVbTm9kZVR5cGVbXCJDb21tZW50XCJdID0gOF0gPSBcIkNvbW1lbnRcIjtcbiAgICBOb2RlVHlwZVtOb2RlVHlwZVtcIkRvY3VtZW50XCJdID0gOV0gPSBcIkRvY3VtZW50XCI7XG4gICAgTm9kZVR5cGVbTm9kZVR5cGVbXCJEb2N1bWVudFR5cGVcIl0gPSAxMF0gPSBcIkRvY3VtZW50VHlwZVwiO1xuICAgIE5vZGVUeXBlW05vZGVUeXBlW1wiRG9jdW1lbnRGcmFnbWVudFwiXSA9IDExXSA9IFwiRG9jdW1lbnRGcmFnbWVudFwiO1xuICAgIE5vZGVUeXBlW05vZGVUeXBlW1wiTm90YXRpb25cIl0gPSAxMl0gPSBcIk5vdGF0aW9uXCI7XG59KShOb2RlVHlwZSB8fCAoTm9kZVR5cGUgPSB7fSkpO1xuY29uc3QgZWZmZWN0aXZlUGFyZW50Tm9kZU92ZXJyaWRlcyA9IG5ldyBXZWFrTWFwKCk7XG4vKipcbiAqIElET00gaW1wbGVtZW50YXRpb24gZm9yIEh0bWwuXG4gKi9cbmV4cG9ydCBjbGFzcyBIVE1MRE9NIHtcbiAgICBjb25zdHJ1Y3Rvcih3aW5kb3csIGRvY3VtZW50LCBUTm9kZSwgVEVsZW1lbnQsIFRIVE1MRWxlbWVudCwgVEN1c3RvbUV2ZW50LCBUQ1NTU3R5bGVTaGVldCwgVFNoYWRvd1Jvb3QpIHtcbiAgICAgICAgdGhpcy53aW5kb3cgPSB3aW5kb3c7XG4gICAgICAgIHRoaXMuZG9jdW1lbnQgPSBkb2N1bWVudDtcbiAgICAgICAgdGhpcy5Ob2RlID0gVE5vZGU7XG4gICAgICAgIHRoaXMuRWxlbWVudCA9IFRFbGVtZW50O1xuICAgICAgICB0aGlzLkhUTUxFbGVtZW50ID0gVEhUTUxFbGVtZW50O1xuICAgICAgICB0aGlzLkN1c3RvbUV2ZW50ID0gVEN1c3RvbUV2ZW50O1xuICAgICAgICB0aGlzLkNTU1N0eWxlU2hlZXQgPSBUQ1NTU3R5bGVTaGVldDtcbiAgICAgICAgdGhpcy5TaGFkb3dSb290ID0gVFNoYWRvd1Jvb3Q7XG4gICAgICAgIGlmIChET00uaXNJbml0aWFsaXplZCkge1xuICAgICAgICAgICAgUmVwb3J0ZXIud3JpdGUoMTAwMSk7IC8vIFRPRE86IGNyZWF0ZSByZXBvcnRlcnMgY29kZSAvLyBET00gYWxyZWFkeSBpbml0aWFsaXplZCAoanVzdCBpbmZvKVxuICAgICAgICAgICAgRE9NLmRlc3Ryb3koKTtcbiAgICAgICAgfVxuICAgICAgICBET00uaW5pdGlhbGl6ZSh0aGlzKTtcbiAgICAgICAgdGhpcy5lbXB0eU5vZGVzID0gbmV3IEZyYWdtZW50Tm9kZVNlcXVlbmNlKHRoaXMsIGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSk7XG4gICAgfVxuICAgIHN0YXRpYyByZWdpc3Rlcihjb250YWluZXIpIHtcbiAgICAgICAgcmV0dXJuIFJlZ2lzdHJhdGlvbi5hbGlhc1RvKElET00sIHRoaXMpLnJlZ2lzdGVyKGNvbnRhaW5lcik7XG4gICAgfVxuICAgIGFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBzdWJzY3JpYmVyLCBwdWJsaXNoZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgKHB1Ymxpc2hlciB8fCB0aGlzLmRvY3VtZW50KS5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgc3Vic2NyaWJlciwgb3B0aW9ucyk7XG4gICAgfVxuICAgIGFwcGVuZENoaWxkKHBhcmVudCwgY2hpbGQpIHtcbiAgICAgICAgcGFyZW50LmFwcGVuZENoaWxkKGNoaWxkKTtcbiAgICB9XG4gICAgY2xvbmVOb2RlKG5vZGUsIGRlZXApIHtcbiAgICAgICAgcmV0dXJuIG5vZGUuY2xvbmVOb2RlKGRlZXAgIT09IGZhbHNlKTtcbiAgICB9XG4gICAgY29udmVydFRvUmVuZGVyTG9jYXRpb24obm9kZSkge1xuICAgICAgICBpZiAodGhpcy5pc1JlbmRlckxvY2F0aW9uKG5vZGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gbm9kZTsgLy8gaXQncyBhbHJlYWR5IGEgSVJlbmRlckxvY2F0aW9uIChjb252ZXJ0ZWQgYnkgRnJhZ21lbnROb2RlU2VxdWVuY2UpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5vZGUucGFyZW50Tm9kZSA9PSBudWxsKSB7XG4gICAgICAgICAgICB0aHJvdyBSZXBvcnRlci5lcnJvcig1Mik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbG9jYXRpb25FbmQgPSB0aGlzLmRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoJ2F1LWVuZCcpO1xuICAgICAgICBjb25zdCBsb2NhdGlvblN0YXJ0ID0gdGhpcy5kb2N1bWVudC5jcmVhdGVDb21tZW50KCdhdS1zdGFydCcpO1xuICAgICAgICBub2RlLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKGxvY2F0aW9uRW5kLCBub2RlKTtcbiAgICAgICAgbG9jYXRpb25FbmQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobG9jYXRpb25TdGFydCwgbG9jYXRpb25FbmQpO1xuICAgICAgICBsb2NhdGlvbkVuZC4kc3RhcnQgPSBsb2NhdGlvblN0YXJ0O1xuICAgICAgICBsb2NhdGlvblN0YXJ0LiRub2RlcyA9IG51bGw7XG4gICAgICAgIHJldHVybiBsb2NhdGlvbkVuZDtcbiAgICB9XG4gICAgY3JlYXRlRG9jdW1lbnRGcmFnbWVudChtYXJrdXBPck5vZGUpIHtcbiAgICAgICAgaWYgKG1hcmt1cE9yTm9kZSA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaXNOb2RlSW5zdGFuY2UobWFya3VwT3JOb2RlKSkge1xuICAgICAgICAgICAgaWYgKG1hcmt1cE9yTm9kZS5jb250ZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbWFya3VwT3JOb2RlLmNvbnRlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBmcmFnbWVudCA9IHRoaXMuZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgICAgICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQobWFya3VwT3JOb2RlKTtcbiAgICAgICAgICAgIHJldHVybiBmcmFnbWVudDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVUZW1wbGF0ZShtYXJrdXBPck5vZGUpLmNvbnRlbnQ7XG4gICAgfVxuICAgIGNyZWF0ZU5vZGVTZXF1ZW5jZShmcmFnbWVudCkge1xuICAgICAgICBpZiAoZnJhZ21lbnQgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVtcHR5Tm9kZXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBGcmFnbWVudE5vZGVTZXF1ZW5jZSh0aGlzLCBmcmFnbWVudC5jbG9uZU5vZGUodHJ1ZSkpO1xuICAgIH1cbiAgICBjcmVhdGVFbGVtZW50KG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChuYW1lKTtcbiAgICB9XG4gICAgZmV0Y2goaW5wdXQsIGluaXQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2luZG93LmZldGNoKGlucHV0LCBpbml0KTtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjcmVhdGVDdXN0b21FdmVudChldmVudFR5cGUsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB0aGlzLkN1c3RvbUV2ZW50KGV2ZW50VHlwZSwgb3B0aW9ucyk7XG4gICAgfVxuICAgIGRpc3BhdGNoRXZlbnQoZXZ0KSB7XG4gICAgICAgIHRoaXMuZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChldnQpO1xuICAgIH1cbiAgICBjcmVhdGVOb2RlT2JzZXJ2ZXIobm9kZSwgY2IsIGluaXQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBNdXRhdGlvbk9ic2VydmVyID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgLy8gVE9ETzogZmluZCBhIHByb3BlciByZXNwb25zZSBmb3IgdGhpcyBzY2VuYXJpb1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBkaXNjb25uZWN0KCkgeyB9LFxuICAgICAgICAgICAgICAgIG9ic2VydmUoKSB7IH0sXG4gICAgICAgICAgICAgICAgdGFrZVJlY29yZHMoKSB7IHJldHVybiBQTEFURk9STS5lbXB0eUFycmF5OyB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoY2IpO1xuICAgICAgICBvYnNlcnZlci5vYnNlcnZlKG5vZGUsIGluaXQpO1xuICAgICAgICByZXR1cm4gb2JzZXJ2ZXI7XG4gICAgfVxuICAgIGNyZWF0ZVRlbXBsYXRlKG1hcmt1cCkge1xuICAgICAgICBpZiAobWFya3VwID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RlbXBsYXRlJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdGVtcGxhdGUgPSB0aGlzLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RlbXBsYXRlJyk7XG4gICAgICAgIHRlbXBsYXRlLmlubmVySFRNTCA9IG1hcmt1cC50b1N0cmluZygpO1xuICAgICAgICByZXR1cm4gdGVtcGxhdGU7XG4gICAgfVxuICAgIGNyZWF0ZVRleHROb2RlKHRleHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGV4dCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGVmZmVjdGl2ZSBwYXJlbnROb2RlIGFjY29yZGluZyB0byBBdXJlbGlhJ3MgY29tcG9uZW50IGhpZXJhcmNoeS5cbiAgICAgKlxuICAgICAqIFVzZWQgYnkgQXVyZWxpYSB0byBmaW5kIHRoZSBjbG9zZXN0IHBhcmVudCBjb250cm9sbGVyIHJlbGF0aXZlIHRvIGEgbm9kZS5cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIHN1cHBvcnRzIDMgYWRkaXRpb25hbCBzY2VuYXJpb3MgdGhhdCBgbm9kZS5wYXJlbnROb2RlYCBkb2VzIG5vdCBzdXBwb3J0OlxuICAgICAqIC0gQ29udGFpbmVybGVzcyBlbGVtZW50cy4gVGhlIHBhcmVudE5vZGUgaW4gdGhpcyBjYXNlIGlzIGEgY29tbWVudCBwcmVjZW5kaW5nIHRoZSBlbGVtZW50IHVuZGVyIHNwZWNpZmljIGNvbmRpdGlvbnMsIHJhdGhlciB0aGFuIGEgbm9kZSB3cmFwcGluZyB0aGUgZWxlbWVudC5cbiAgICAgKiAtIFNoYWRvd0RPTS4gSWYgYSBgU2hhZG93Um9vdGAgaXMgZW5jb3VudGVyZWQsIHRoaXMgbWV0aG9kIHJldHJpZXZlcyB0aGUgYXNzb2NpYXRlZCBjb250cm9sbGVyIHZpYSB0aGUgbWV0YWRhdGEgYXBpIHRvIGxvY2F0ZSB0aGUgb3JpZ2luYWwgaG9zdC5cbiAgICAgKiAtIFBvcnRhbHMuIElmIHRoZSBwcm92aWRlZCBub2RlIHdhcyBtb3ZlZCB0byBhIGRpZmZlcmVudCBsb2NhdGlvbiBpbiB0aGUgRE9NIGJ5IGEgYHBvcnRhbGAgYXR0cmlidXRlLCB0aGVuIHRoZSBvcmlnaW5hbCBwYXJlbnQgb2YgdGhlIG5vZGUgd2lsbCBiZSByZXR1cm5lZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBub2RlIC0gVGhlIG5vZGUgdG8gZ2V0IHRoZSBwYXJlbnQgZm9yLlxuICAgICAqIEByZXR1cm5zIEVpdGhlciB0aGUgY2xvc2VzdCBwYXJlbnQgbm9kZSwgdGhlIGNsb3Nlc3QgYElSZW5kZXJMb2NhdGlvbmAgKGNvbW1lbnQgbm9kZSB0aGF0IGlzIHRoZSBjb250YWluZXJsZXNzIGhvc3QpLCBvcmlnaW5hbCBwb3J0YWwgaG9zdCwgb3IgYG51bGxgIGlmIHRoaXMgaXMgZWl0aGVyIHRoZSBhYnNvbHV0ZSBkb2N1bWVudCByb290IG9yIGEgZGlzY29ubmVjdGVkIG5vZGUuXG4gICAgICovXG4gICAgZ2V0RWZmZWN0aXZlUGFyZW50Tm9kZShub2RlKSB7XG4gICAgICAgIC8vIFRPRE86IHRoaXMgbWV0aG9kIG5lZWRzIG1vcmUgdGVzdHMhXG4gICAgICAgIC8vIEZpcnN0IGxvb2sgZm9yIGFueSBvdmVycmlkZXNcbiAgICAgICAgaWYgKGVmZmVjdGl2ZVBhcmVudE5vZGVPdmVycmlkZXMuaGFzKG5vZGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gZWZmZWN0aXZlUGFyZW50Tm9kZU92ZXJyaWRlcy5nZXQobm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVGhlbiB0cnkgdG8gZ2V0IHRoZSBuZWFyZXN0IGF1LXN0YXJ0IHJlbmRlciBsb2NhdGlvbiwgd2hpY2ggd291bGQgYmUgdGhlIGNvbnRhaW5lcmxlc3MgcGFyZW50LFxuICAgICAgICAvLyBhZ2FpbiBsb29raW5nIGZvciBhbnkgb3ZlcnJpZGVzIGFsb25nIHRoZSB3YXkuXG4gICAgICAgIC8vIG90aGVyd2lzZSByZXR1cm4gdGhlIG5vcm1hbCBwYXJlbnQgbm9kZVxuICAgICAgICBsZXQgY29udGFpbmVybGVzc09mZnNldCA9IDA7XG4gICAgICAgIGxldCBuZXh0ID0gbm9kZS5uZXh0U2libGluZztcbiAgICAgICAgd2hpbGUgKG5leHQgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChuZXh0Lm5vZGVUeXBlID09PSA4IC8qIENvbW1lbnQgKi8pIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKG5leHQudGV4dENvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYXUtc3RhcnQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgd2Ugc2VlIGFuIGF1LXN0YXJ0IGJlZm9yZSB3ZSBzZWUgYXUtZW5kLCBpdCB3aWxsIHByZWNlZGUgdGhlIGhvc3Qgb2YgYSBzaWJsaW5nIGNvbnRhaW5lcmxlc3MgZWxlbWVudCByYXRoZXIgdGhhbiBhIHBhcmVudC5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNvIHdlIHVzZSB0aGUgb2Zmc2V0IHRvIGlnbm9yZSB0aGUgbmV4dCBhdS1lbmRcbiAgICAgICAgICAgICAgICAgICAgICAgICsrY29udGFpbmVybGVzc09mZnNldDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdhdS1lbmQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRhaW5lcmxlc3NPZmZzZXQtLSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5leHQgPSBuZXh0Lm5leHRTaWJsaW5nO1xuICAgICAgICB9XG4gICAgICAgIGlmIChub2RlLnBhcmVudE5vZGUgPT09IG51bGwgJiYgbm9kZS5ub2RlVHlwZSA9PT0gMTEgLyogRG9jdW1lbnRGcmFnbWVudCAqLykge1xuICAgICAgICAgICAgLy8gQ291bGQgYmUgYSBzaGFkb3cgcm9vdDsgc2VlIGlmIHRoZXJlJ3MgYSBjb250cm9sbGVyIGFuZCBpZiBzbywgZ2V0IHRoZSBvcmlnaW5hbCBob3N0IHZpYSB0aGUgcHJvamVjdG9yXG4gICAgICAgICAgICBjb25zdCBjb250cm9sbGVyID0gQ3VzdG9tRWxlbWVudC5mb3Iobm9kZSk7XG4gICAgICAgICAgICBpZiAoY29udHJvbGxlciA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgLy8gTm90IGEgc2hhZG93IHJvb3QgKG9yIGF0IGxlYXN0LCBub3Qgb25lIGNyZWF0ZWQgYnkgQXVyZWxpYSlcbiAgICAgICAgICAgICAgICAvLyBOb3RoaW5nIG1vcmUgd2UgY2FuIHRyeSwganVzdCByZXR1cm4gbnVsbFxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcHJvamVjdG9yID0gY29udHJvbGxlci5wcm9qZWN0b3I7XG4gICAgICAgICAgICBpZiAocHJvamVjdG9yIGluc3RhbmNlb2YgU2hhZG93RE9NUHJvamVjdG9yKSB7XG4gICAgICAgICAgICAgICAgLy8gTm93IHdlIGNhbiB1c2UgdGhlIG9yaWdpbmFsIGhvc3QgdG8gdHJhdmVyc2UgZnVydGhlciB1cFxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEVmZmVjdGl2ZVBhcmVudE5vZGUocHJvamVjdG9yLmhvc3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBub2RlLnBhcmVudE5vZGU7XG4gICAgfVxuICAgIHNldEVmZmVjdGl2ZVBhcmVudE5vZGUoY2hpbGROb2RlT3JOb2RlU2VxdWVuY2UsIHBhcmVudE5vZGUpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNOb2RlSW5zdGFuY2UoY2hpbGROb2RlT3JOb2RlU2VxdWVuY2UpKSB7XG4gICAgICAgICAgICBlZmZlY3RpdmVQYXJlbnROb2RlT3ZlcnJpZGVzLnNldChjaGlsZE5vZGVPck5vZGVTZXF1ZW5jZSwgcGFyZW50Tm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBub2RlcyA9IGNoaWxkTm9kZU9yTm9kZVNlcXVlbmNlLmNoaWxkTm9kZXM7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBub2Rlcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICAgICAgZWZmZWN0aXZlUGFyZW50Tm9kZU92ZXJyaWRlcy5zZXQobm9kZXNbaV0sIHBhcmVudE5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGluc2VydEJlZm9yZShub2RlVG9JbnNlcnQsIHJlZmVyZW5jZU5vZGUpIHtcbiAgICAgICAgcmVmZXJlbmNlTm9kZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShub2RlVG9JbnNlcnQsIHJlZmVyZW5jZU5vZGUpO1xuICAgIH1cbiAgICBpc01hcmtlcihub2RlKSB7XG4gICAgICAgIHJldHVybiBub2RlLm5vZGVOYW1lID09PSAnQVUtTSc7XG4gICAgfVxuICAgIGlzTm9kZUluc3RhbmNlKHBvdGVudGlhbE5vZGUpIHtcbiAgICAgICAgcmV0dXJuIHBvdGVudGlhbE5vZGUgIT0gbnVsbCAmJiBwb3RlbnRpYWxOb2RlLm5vZGVUeXBlID4gMDtcbiAgICB9XG4gICAgaXNSZW5kZXJMb2NhdGlvbihub2RlKSB7XG4gICAgICAgIHJldHVybiBub2RlLnRleHRDb250ZW50ID09PSAnYXUtZW5kJztcbiAgICB9XG4gICAgbWFrZVRhcmdldChub2RlKSB7XG4gICAgICAgIG5vZGUuY2xhc3NOYW1lID0gJ2F1JztcbiAgICB9XG4gICAgcmVnaXN0ZXJFbGVtZW50UmVzb2x2ZXIoY29udGFpbmVyLCByZXNvbHZlcikge1xuICAgICAgICBjb250YWluZXIucmVnaXN0ZXJSZXNvbHZlcihJTm9kZSwgcmVzb2x2ZXIpO1xuICAgICAgICBjb250YWluZXIucmVnaXN0ZXJSZXNvbHZlcih0aGlzLk5vZGUsIHJlc29sdmVyKTtcbiAgICAgICAgY29udGFpbmVyLnJlZ2lzdGVyUmVzb2x2ZXIodGhpcy5FbGVtZW50LCByZXNvbHZlcik7XG4gICAgICAgIGNvbnRhaW5lci5yZWdpc3RlclJlc29sdmVyKHRoaXMuSFRNTEVsZW1lbnQsIHJlc29sdmVyKTtcbiAgICB9XG4gICAgcmVtb3ZlKG5vZGUpIHtcbiAgICAgICAgaWYgKG5vZGUucmVtb3ZlKSB7XG4gICAgICAgICAgICBub2RlLnJlbW92ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG5vZGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBzdWJzY3JpYmVyLCBwdWJsaXNoZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgKHB1Ymxpc2hlciB8fCB0aGlzLmRvY3VtZW50KS5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgc3Vic2NyaWJlciwgb3B0aW9ucyk7XG4gICAgfVxuICAgIHNldEF0dHJpYnV0ZShub2RlLCBuYW1lLCB2YWx1ZSkge1xuICAgICAgICBub2RlLnNldEF0dHJpYnV0ZShuYW1lLCB2YWx1ZSk7XG4gICAgfVxufVxuY29uc3QgJERPTSA9IERPTTtcbmV4cG9ydCB7ICRET00gYXMgRE9NIH07XG4vKiBlc2xpbnQtZW5hYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnkgKi9cbi8vIFRoaXMgaXMgdGhlIG1vc3QgY29tbW9uIGZvcm0gb2YgSU5vZGVTZXF1ZW5jZS5cbi8vIEV2ZXJ5IGN1c3RvbSBlbGVtZW50IG9yIHRlbXBsYXRlIGNvbnRyb2xsZXIgd2hvc2Ugbm9kZSBzZXF1ZW5jZSBpcyBiYXNlZCBvbiBhbiBIVE1MIHRlbXBsYXRlXG4vLyBoYXMgYW4gaW5zdGFuY2Ugb2YgdGhpcyB1bmRlciB0aGUgaG9vZC4gQW55b25lIHdobyB3YW50cyB0byBjcmVhdGUgYSBub2RlIHNlcXVlbmNlIGZyb21cbi8vIGEgc3RyaW5nIG9mIG1hcmt1cCB3b3VsZCBhbHNvIHJlY2VpdmUgYW4gaW5zdGFuY2Ugb2YgdGhpcy5cbi8vIENvbXBpbGVkVGVtcGxhdGVzIGNyZWF0ZSBpbnN0YW5jZXMgb2YgRnJhZ21lbnROb2RlU2VxdWVuY2UuXG4vKipcbiAqIFRoaXMgaXMgdGhlIG1vc3QgY29tbW9uIGZvcm0gb2YgSU5vZGVTZXF1ZW5jZS5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGNsYXNzIEZyYWdtZW50Tm9kZVNlcXVlbmNlIHtcbiAgICBjb25zdHJ1Y3Rvcihkb20sIGZyYWdtZW50KSB7XG4gICAgICAgIHRoaXMuZG9tID0gZG9tO1xuICAgICAgICB0aGlzLmZyYWdtZW50ID0gZnJhZ21lbnQ7XG4gICAgICAgIHRoaXMuaXNNb3VudGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaXNMaW5rZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5uZXh0ID0gdm9pZCAwO1xuICAgICAgICB0aGlzLnJlZk5vZGUgPSB2b2lkIDA7XG4gICAgICAgIGNvbnN0IHRhcmdldE5vZGVMaXN0ID0gZnJhZ21lbnQucXVlcnlTZWxlY3RvckFsbCgnLmF1Jyk7XG4gICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgbGV0IGlpID0gdGFyZ2V0Tm9kZUxpc3QubGVuZ3RoO1xuICAgICAgICBjb25zdCB0YXJnZXRzID0gdGhpcy50YXJnZXRzID0gQXJyYXkoaWkpO1xuICAgICAgICB3aGlsZSAoaSA8IGlpKSB7XG4gICAgICAgICAgICAvLyBlYWdlcmx5IGNvbnZlcnQgYWxsIG1hcmtlcnMgdG8gUmVuZGVyTG9jYXRpb25zIChvdGhlcndpc2UgdGhlIHJlbmRlcmVyXG4gICAgICAgICAgICAvLyB3aWxsIGRvIGl0IGFueXdheSkgYW5kIHN0b3JlIHRoZW0gaW4gdGhlIHRhcmdldCBsaXN0IChzaW5jZSB0aGUgY29tbWVudHNcbiAgICAgICAgICAgIC8vIGNhbid0IGJlIHF1ZXJpZWQpXG4gICAgICAgICAgICBjb25zdCB0YXJnZXQgPSB0YXJnZXROb2RlTGlzdFtpXTtcbiAgICAgICAgICAgIGlmICh0YXJnZXQubm9kZU5hbWUgPT09ICdBVS1NJykge1xuICAgICAgICAgICAgICAgIC8vIG5vdGUgdGhlIHJlbmRlcmVyIHdpbGwgc3RpbGwgY2FsbCB0aGlzIG1ldGhvZCwgYnV0IGl0IHdpbGwganVzdCByZXR1cm4gdGhlXG4gICAgICAgICAgICAgICAgLy8gbG9jYXRpb24gaWYgaXQgc2VlcyBpdCdzIGFscmVhZHkgYSBsb2NhdGlvblxuICAgICAgICAgICAgICAgIHRhcmdldHNbaV0gPSB0aGlzLmRvbS5jb252ZXJ0VG9SZW5kZXJMb2NhdGlvbih0YXJnZXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gYWxzbyBzdG9yZSBub24tbWFya2VycyBmb3IgY29uc2lzdGVudCBvcmRlcmluZ1xuICAgICAgICAgICAgICAgIHRhcmdldHNbaV0gPSB0YXJnZXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICArK2k7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2hpbGROb2RlTGlzdCA9IGZyYWdtZW50LmNoaWxkTm9kZXM7XG4gICAgICAgIGkgPSAwO1xuICAgICAgICBpaSA9IGNoaWxkTm9kZUxpc3QubGVuZ3RoO1xuICAgICAgICBjb25zdCBjaGlsZE5vZGVzID0gdGhpcy5jaGlsZE5vZGVzID0gQXJyYXkoaWkpO1xuICAgICAgICB3aGlsZSAoaSA8IGlpKSB7XG4gICAgICAgICAgICBjaGlsZE5vZGVzW2ldID0gY2hpbGROb2RlTGlzdFtpXTtcbiAgICAgICAgICAgICsraTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZpcnN0Q2hpbGQgPSBmcmFnbWVudC5maXJzdENoaWxkO1xuICAgICAgICB0aGlzLmxhc3RDaGlsZCA9IGZyYWdtZW50Lmxhc3RDaGlsZDtcbiAgICB9XG4gICAgZmluZFRhcmdldHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRhcmdldHM7XG4gICAgfVxuICAgIGluc2VydEJlZm9yZShyZWZOb2RlKSB7XG4gICAgICAgIGlmICh0aGlzLmlzTGlua2VkICYmICEhdGhpcy5yZWZOb2RlKSB7XG4gICAgICAgICAgICB0aGlzLmFkZFRvTGlua2VkKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBwYXJlbnQgPSByZWZOb2RlLnBhcmVudE5vZGU7XG4gICAgICAgICAgICBpZiAodGhpcy5pc01vdW50ZWQpIHtcbiAgICAgICAgICAgICAgICBsZXQgY3VycmVudCA9IHRoaXMuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgICAgICBjb25zdCBlbmQgPSB0aGlzLmxhc3RDaGlsZDtcbiAgICAgICAgICAgICAgICBsZXQgbmV4dDtcbiAgICAgICAgICAgICAgICB3aGlsZSAoY3VycmVudCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIG5leHQgPSBjdXJyZW50Lm5leHRTaWJsaW5nO1xuICAgICAgICAgICAgICAgICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKGN1cnJlbnQsIHJlZk5vZGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudCA9PT0gZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50ID0gbmV4dDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlzTW91bnRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgcmVmTm9kZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0aGlzLmZyYWdtZW50LCByZWZOb2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBhcHBlbmRUbyhwYXJlbnQpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNNb3VudGVkKSB7XG4gICAgICAgICAgICBsZXQgY3VycmVudCA9IHRoaXMuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgIGNvbnN0IGVuZCA9IHRoaXMubGFzdENoaWxkO1xuICAgICAgICAgICAgbGV0IG5leHQ7XG4gICAgICAgICAgICB3aGlsZSAoY3VycmVudCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgbmV4dCA9IGN1cnJlbnQubmV4dFNpYmxpbmc7XG4gICAgICAgICAgICAgICAgcGFyZW50LmFwcGVuZENoaWxkKGN1cnJlbnQpO1xuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50ID09PSBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGN1cnJlbnQgPSBuZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5pc01vdW50ZWQgPSB0cnVlO1xuICAgICAgICAgICAgcGFyZW50LmFwcGVuZENoaWxkKHRoaXMuZnJhZ21lbnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlbW92ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNNb3VudGVkKSB7XG4gICAgICAgICAgICB0aGlzLmlzTW91bnRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgY29uc3QgZnJhZ21lbnQgPSB0aGlzLmZyYWdtZW50O1xuICAgICAgICAgICAgY29uc3QgZW5kID0gdGhpcy5sYXN0Q2hpbGQ7XG4gICAgICAgICAgICBsZXQgbmV4dDtcbiAgICAgICAgICAgIGxldCBjdXJyZW50ID0gdGhpcy5maXJzdENoaWxkO1xuICAgICAgICAgICAgd2hpbGUgKGN1cnJlbnQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBuZXh0ID0gY3VycmVudC5uZXh0U2libGluZztcbiAgICAgICAgICAgICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChjdXJyZW50KTtcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudCA9PT0gZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjdXJyZW50ID0gbmV4dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBhZGRUb0xpbmtlZCgpIHtcbiAgICAgICAgY29uc3QgcmVmTm9kZSA9IHRoaXMucmVmTm9kZTtcbiAgICAgICAgY29uc3QgcGFyZW50ID0gcmVmTm9kZS5wYXJlbnROb2RlO1xuICAgICAgICBpZiAodGhpcy5pc01vdW50ZWQpIHtcbiAgICAgICAgICAgIGxldCBjdXJyZW50ID0gdGhpcy5maXJzdENoaWxkO1xuICAgICAgICAgICAgY29uc3QgZW5kID0gdGhpcy5sYXN0Q2hpbGQ7XG4gICAgICAgICAgICBsZXQgbmV4dDtcbiAgICAgICAgICAgIHdoaWxlIChjdXJyZW50ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBuZXh0ID0gY3VycmVudC5uZXh0U2libGluZztcbiAgICAgICAgICAgICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKGN1cnJlbnQsIHJlZk5vZGUpO1xuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50ID09PSBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGN1cnJlbnQgPSBuZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5pc01vdW50ZWQgPSB0cnVlO1xuICAgICAgICAgICAgcGFyZW50Lmluc2VydEJlZm9yZSh0aGlzLmZyYWdtZW50LCByZWZOb2RlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1bmxpbmsoKSB7XG4gICAgICAgIHRoaXMuaXNMaW5rZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5uZXh0ID0gdm9pZCAwO1xuICAgICAgICB0aGlzLnJlZk5vZGUgPSB2b2lkIDA7XG4gICAgfVxuICAgIGxpbmsobmV4dCkge1xuICAgICAgICB0aGlzLmlzTGlua2VkID0gdHJ1ZTtcbiAgICAgICAgaWYgKHRoaXMuZG9tLmlzUmVuZGVyTG9jYXRpb24obmV4dCkpIHtcbiAgICAgICAgICAgIHRoaXMucmVmTm9kZSA9IG5leHQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm5leHQgPSBuZXh0O1xuICAgICAgICAgICAgdGhpcy5vYnRhaW5SZWZOb2RlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb2J0YWluUmVmTm9kZSgpIHtcbiAgICAgICAgaWYgKHRoaXMubmV4dCAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICB0aGlzLnJlZk5vZGUgPSB0aGlzLm5leHQuZmlyc3RDaGlsZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucmVmTm9kZSA9IHZvaWQgMDtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCBjbGFzcyBBdU1hcmtlciB7XG4gICAgY29uc3RydWN0b3IobmV4dFNpYmxpbmcpIHtcbiAgICAgICAgdGhpcy5uZXh0U2libGluZyA9IG5leHRTaWJsaW5nO1xuICAgICAgICB0aGlzLnRleHRDb250ZW50ID0gJyc7XG4gICAgfVxuICAgIGdldCBwYXJlbnROb2RlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5uZXh0U2libGluZy5wYXJlbnROb2RlO1xuICAgIH1cbiAgICByZW1vdmUoKSB7IH1cbn1cbihwcm90byA9PiB7XG4gICAgcHJvdG8ucHJldmlvdXNTaWJsaW5nID0gbnVsbDtcbiAgICBwcm90by5jaGlsZE5vZGVzID0gUExBVEZPUk0uZW1wdHlBcnJheTtcbiAgICBwcm90by5ub2RlTmFtZSA9ICdBVS1NJztcbiAgICBwcm90by5ub2RlVHlwZSA9IDEgLyogRWxlbWVudCAqLztcbn0pKEF1TWFya2VyLnByb3RvdHlwZSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kb20uanMubWFwIiwiaW1wb3J0IHsgX19kZWNvcmF0ZSwgX19tZXRhZGF0YSwgX19wYXJhbSB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgQmluZGluZ01vZGUsIGVuc3VyZUV4cHJlc3Npb24sIElFeHByZXNzaW9uUGFyc2VyLCBpbnN0cnVjdGlvblJlbmRlcmVyLCBJbnRlcnBvbGF0aW9uQmluZGluZywgSU9ic2VydmVyTG9jYXRvciwgTXVsdGlJbnRlcnBvbGF0aW9uQmluZGluZywgUHJvcGVydHlCaW5kaW5nLCBhcHBseUJpbmRpbmdCZWhhdmlvciwgfSBmcm9tICdAYXVyZWxpYS9ydW50aW1lJztcbmltcG9ydCB7IEF0dHJpYnV0ZUJpbmRpbmcgfSBmcm9tICcuL2JpbmRpbmcvYXR0cmlidXRlJztcbmltcG9ydCB7IExpc3RlbmVyIH0gZnJvbSAnLi9iaW5kaW5nL2xpc3RlbmVyJztcbmltcG9ydCB7IElFdmVudE1hbmFnZXIgfSBmcm9tICcuL29ic2VydmF0aW9uL2V2ZW50LW1hbmFnZXInO1xubGV0IFRleHRCaW5kaW5nUmVuZGVyZXIgPSBcbi8qKiBAaW50ZXJuYWwgKi9cbmNsYXNzIFRleHRCaW5kaW5nUmVuZGVyZXIge1xuICAgIGNvbnN0cnVjdG9yKHBhcnNlciwgb2JzZXJ2ZXJMb2NhdG9yKSB7XG4gICAgICAgIHRoaXMucGFyc2VyID0gcGFyc2VyO1xuICAgICAgICB0aGlzLm9ic2VydmVyTG9jYXRvciA9IG9ic2VydmVyTG9jYXRvcjtcbiAgICB9XG4gICAgcmVuZGVyKGZsYWdzLCBjb250ZXh0LCBjb250cm9sbGVyLCB0YXJnZXQsIGluc3RydWN0aW9uKSB7XG4gICAgICAgIGNvbnN0IG5leHQgPSB0YXJnZXQubmV4dFNpYmxpbmc7XG4gICAgICAgIGlmIChjb250ZXh0LmRvbS5pc01hcmtlcih0YXJnZXQpKSB7XG4gICAgICAgICAgICBjb250ZXh0LmRvbS5yZW1vdmUodGFyZ2V0KTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgYmluZGluZztcbiAgICAgICAgY29uc3QgZXhwciA9IGVuc3VyZUV4cHJlc3Npb24odGhpcy5wYXJzZXIsIGluc3RydWN0aW9uLmZyb20sIDIwNDggLyogSW50ZXJwb2xhdGlvbiAqLyk7XG4gICAgICAgIGlmIChleHByLmlzTXVsdGkpIHtcbiAgICAgICAgICAgIGJpbmRpbmcgPSBhcHBseUJpbmRpbmdCZWhhdmlvcihuZXcgTXVsdGlJbnRlcnBvbGF0aW9uQmluZGluZyh0aGlzLm9ic2VydmVyTG9jYXRvciwgZXhwciwgbmV4dCwgJ3RleHRDb250ZW50JywgQmluZGluZ01vZGUudG9WaWV3LCBjb250ZXh0KSwgZXhwciwgY29udGV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBiaW5kaW5nID0gYXBwbHlCaW5kaW5nQmVoYXZpb3IobmV3IEludGVycG9sYXRpb25CaW5kaW5nKGV4cHIuZmlyc3RFeHByZXNzaW9uLCBleHByLCBuZXh0LCAndGV4dENvbnRlbnQnLCBCaW5kaW5nTW9kZS50b1ZpZXcsIHRoaXMub2JzZXJ2ZXJMb2NhdG9yLCBjb250ZXh0LCB0cnVlKSwgZXhwciwgY29udGV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgY29udHJvbGxlci5hZGRCaW5kaW5nKGJpbmRpbmcpO1xuICAgIH1cbn07XG5UZXh0QmluZGluZ1JlbmRlcmVyID0gX19kZWNvcmF0ZShbXG4gICAgaW5zdHJ1Y3Rpb25SZW5kZXJlcihcImhhXCIgLyogdGV4dEJpbmRpbmcgKi8pXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgICxcbiAgICBfX3BhcmFtKDAsIElFeHByZXNzaW9uUGFyc2VyKSxcbiAgICBfX3BhcmFtKDEsIElPYnNlcnZlckxvY2F0b3IpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0LCBPYmplY3RdKVxuXSwgVGV4dEJpbmRpbmdSZW5kZXJlcik7XG5leHBvcnQgeyBUZXh0QmluZGluZ1JlbmRlcmVyIH07XG5sZXQgTGlzdGVuZXJCaW5kaW5nUmVuZGVyZXIgPSBcbi8qKiBAaW50ZXJuYWwgKi9cbmNsYXNzIExpc3RlbmVyQmluZGluZ1JlbmRlcmVyIHtcbiAgICBjb25zdHJ1Y3RvcihwYXJzZXIsIGV2ZW50TWFuYWdlcikge1xuICAgICAgICB0aGlzLnBhcnNlciA9IHBhcnNlcjtcbiAgICAgICAgdGhpcy5ldmVudE1hbmFnZXIgPSBldmVudE1hbmFnZXI7XG4gICAgfVxuICAgIHJlbmRlcihmbGFncywgY29udGV4dCwgY29udHJvbGxlciwgdGFyZ2V0LCBpbnN0cnVjdGlvbikge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L3Jlc3RyaWN0LXBsdXMtb3BlcmFuZHNcbiAgICAgICAgY29uc3QgZXhwciA9IGVuc3VyZUV4cHJlc3Npb24odGhpcy5wYXJzZXIsIGluc3RydWN0aW9uLmZyb20sIDgwIC8qIElzRXZlbnRDb21tYW5kICovIHwgKGluc3RydWN0aW9uLnN0cmF0ZWd5ICsgNiAvKiBEZWxlZ2F0aW9uU3RyYXRlZ3lEZWx0YSAqLykpO1xuICAgICAgICBjb25zdCBiaW5kaW5nID0gYXBwbHlCaW5kaW5nQmVoYXZpb3IobmV3IExpc3RlbmVyKGNvbnRleHQuZG9tLCBpbnN0cnVjdGlvbi50bywgaW5zdHJ1Y3Rpb24uc3RyYXRlZ3ksIGV4cHIsIHRhcmdldCwgaW5zdHJ1Y3Rpb24ucHJldmVudERlZmF1bHQsIHRoaXMuZXZlbnRNYW5hZ2VyLCBjb250ZXh0KSwgZXhwciwgY29udGV4dCk7XG4gICAgICAgIGNvbnRyb2xsZXIuYWRkQmluZGluZyhiaW5kaW5nKTtcbiAgICB9XG59O1xuTGlzdGVuZXJCaW5kaW5nUmVuZGVyZXIgPSBfX2RlY29yYXRlKFtcbiAgICBpbnN0cnVjdGlvblJlbmRlcmVyKFwiaGJcIiAvKiBsaXN0ZW5lckJpbmRpbmcgKi8pXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgICxcbiAgICBfX3BhcmFtKDAsIElFeHByZXNzaW9uUGFyc2VyKSxcbiAgICBfX3BhcmFtKDEsIElFdmVudE1hbmFnZXIpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0LCBPYmplY3RdKVxuXSwgTGlzdGVuZXJCaW5kaW5nUmVuZGVyZXIpO1xuZXhwb3J0IHsgTGlzdGVuZXJCaW5kaW5nUmVuZGVyZXIgfTtcbmxldCBTZXRBdHRyaWJ1dGVSZW5kZXJlciA9IFxuLyoqIEBpbnRlcm5hbCAqL1xuY2xhc3MgU2V0QXR0cmlidXRlUmVuZGVyZXIge1xuICAgIHJlbmRlcihmbGFncywgY29udGV4dCwgY29udHJvbGxlciwgdGFyZ2V0LCBpbnN0cnVjdGlvbikge1xuICAgICAgICB0YXJnZXQuc2V0QXR0cmlidXRlKGluc3RydWN0aW9uLnRvLCBpbnN0cnVjdGlvbi52YWx1ZSk7XG4gICAgfVxufTtcblNldEF0dHJpYnV0ZVJlbmRlcmVyID0gX19kZWNvcmF0ZShbXG4gICAgaW5zdHJ1Y3Rpb25SZW5kZXJlcihcImhlXCIgLyogc2V0QXR0cmlidXRlICovKVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbl0sIFNldEF0dHJpYnV0ZVJlbmRlcmVyKTtcbmV4cG9ydCB7IFNldEF0dHJpYnV0ZVJlbmRlcmVyIH07XG5sZXQgU2V0Q2xhc3NBdHRyaWJ1dGVSZW5kZXJlciA9IGNsYXNzIFNldENsYXNzQXR0cmlidXRlUmVuZGVyZXIge1xuICAgIHJlbmRlcihmbGFncywgY29udGV4dCwgY29udHJvbGxlciwgdGFyZ2V0LCBpbnN0cnVjdGlvbikge1xuICAgICAgICBhZGRDbGFzc2VzKHRhcmdldC5jbGFzc0xpc3QsIGluc3RydWN0aW9uLnZhbHVlKTtcbiAgICB9XG59O1xuU2V0Q2xhc3NBdHRyaWJ1dGVSZW5kZXJlciA9IF9fZGVjb3JhdGUoW1xuICAgIGluc3RydWN0aW9uUmVuZGVyZXIoXCJoZlwiIC8qIHNldENsYXNzQXR0cmlidXRlICovKVxuXSwgU2V0Q2xhc3NBdHRyaWJ1dGVSZW5kZXJlcik7XG5leHBvcnQgeyBTZXRDbGFzc0F0dHJpYnV0ZVJlbmRlcmVyIH07XG5sZXQgU2V0U3R5bGVBdHRyaWJ1dGVSZW5kZXJlciA9IGNsYXNzIFNldFN0eWxlQXR0cmlidXRlUmVuZGVyZXIge1xuICAgIHJlbmRlcihmbGFncywgY29udGV4dCwgY29udHJvbGxlciwgdGFyZ2V0LCBpbnN0cnVjdGlvbikge1xuICAgICAgICB0YXJnZXQuc3R5bGUuY3NzVGV4dCArPSBpbnN0cnVjdGlvbi52YWx1ZTtcbiAgICB9XG59O1xuU2V0U3R5bGVBdHRyaWJ1dGVSZW5kZXJlciA9IF9fZGVjb3JhdGUoW1xuICAgIGluc3RydWN0aW9uUmVuZGVyZXIoXCJoZ1wiIC8qIHNldFN0eWxlQXR0cmlidXRlICovKVxuXSwgU2V0U3R5bGVBdHRyaWJ1dGVSZW5kZXJlcik7XG5leHBvcnQgeyBTZXRTdHlsZUF0dHJpYnV0ZVJlbmRlcmVyIH07XG5sZXQgU3R5bGVQcm9wZXJ0eUJpbmRpbmdSZW5kZXJlciA9IFxuLyoqIEBpbnRlcm5hbCAqL1xuY2xhc3MgU3R5bGVQcm9wZXJ0eUJpbmRpbmdSZW5kZXJlciB7XG4gICAgY29uc3RydWN0b3IocGFyc2VyLCBvYnNlcnZlckxvY2F0b3IpIHtcbiAgICAgICAgdGhpcy5wYXJzZXIgPSBwYXJzZXI7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJMb2NhdG9yID0gb2JzZXJ2ZXJMb2NhdG9yO1xuICAgIH1cbiAgICByZW5kZXIoZmxhZ3MsIGNvbnRleHQsIGNvbnRyb2xsZXIsIHRhcmdldCwgaW5zdHJ1Y3Rpb24pIHtcbiAgICAgICAgY29uc3QgZXhwciA9IGVuc3VyZUV4cHJlc3Npb24odGhpcy5wYXJzZXIsIGluc3RydWN0aW9uLmZyb20sIDQ4IC8qIElzUHJvcGVydHlDb21tYW5kICovIHwgQmluZGluZ01vZGUudG9WaWV3KTtcbiAgICAgICAgY29uc3QgYmluZGluZyA9IGFwcGx5QmluZGluZ0JlaGF2aW9yKG5ldyBQcm9wZXJ0eUJpbmRpbmcoZXhwciwgdGFyZ2V0LnN0eWxlLCBpbnN0cnVjdGlvbi50bywgQmluZGluZ01vZGUudG9WaWV3LCB0aGlzLm9ic2VydmVyTG9jYXRvciwgY29udGV4dCksIGV4cHIsIGNvbnRleHQpO1xuICAgICAgICBjb250cm9sbGVyLmFkZEJpbmRpbmcoYmluZGluZyk7XG4gICAgfVxufTtcblN0eWxlUHJvcGVydHlCaW5kaW5nUmVuZGVyZXIgPSBfX2RlY29yYXRlKFtcbiAgICBpbnN0cnVjdGlvblJlbmRlcmVyKFwiaGRcIiAvKiBzdHlsZVByb3BlcnR5QmluZGluZyAqLylcbiAgICAvKiogQGludGVybmFsICovXG4gICAgLFxuICAgIF9fcGFyYW0oMCwgSUV4cHJlc3Npb25QYXJzZXIpLFxuICAgIF9fcGFyYW0oMSwgSU9ic2VydmVyTG9jYXRvciksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3QsIE9iamVjdF0pXG5dLCBTdHlsZVByb3BlcnR5QmluZGluZ1JlbmRlcmVyKTtcbmV4cG9ydCB7IFN0eWxlUHJvcGVydHlCaW5kaW5nUmVuZGVyZXIgfTtcbmxldCBBdHRyaWJ1dGVCaW5kaW5nUmVuZGVyZXIgPSBcbi8qKiBAaW50ZXJuYWwgKi9cbmNsYXNzIEF0dHJpYnV0ZUJpbmRpbmdSZW5kZXJlciB7XG4gICAgY29uc3RydWN0b3IocGFyc2VyLCBvYnNlcnZlckxvY2F0b3IpIHtcbiAgICAgICAgdGhpcy5wYXJzZXIgPSBwYXJzZXI7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJMb2NhdG9yID0gb2JzZXJ2ZXJMb2NhdG9yO1xuICAgIH1cbiAgICByZW5kZXIoZmxhZ3MsIGNvbnRleHQsIGNvbnRyb2xsZXIsIHRhcmdldCwgaW5zdHJ1Y3Rpb24pIHtcbiAgICAgICAgY29uc3QgZXhwciA9IGVuc3VyZUV4cHJlc3Npb24odGhpcy5wYXJzZXIsIGluc3RydWN0aW9uLmZyb20sIDQ4IC8qIElzUHJvcGVydHlDb21tYW5kICovIHwgQmluZGluZ01vZGUudG9WaWV3KTtcbiAgICAgICAgY29uc3QgYmluZGluZyA9IGFwcGx5QmluZGluZ0JlaGF2aW9yKG5ldyBBdHRyaWJ1dGVCaW5kaW5nKGV4cHIsIHRhcmdldCwgaW5zdHJ1Y3Rpb24uYXR0ciAvKiB0YXJnZXRBdHRyaWJ1dGUgKi8sIGluc3RydWN0aW9uLnRvIC8qIHRhcmdldEtleSAqLywgQmluZGluZ01vZGUudG9WaWV3LCB0aGlzLm9ic2VydmVyTG9jYXRvciwgY29udGV4dCksIGV4cHIsIGNvbnRleHQpO1xuICAgICAgICBjb250cm9sbGVyLmFkZEJpbmRpbmcoYmluZGluZyk7XG4gICAgfVxufTtcbkF0dHJpYnV0ZUJpbmRpbmdSZW5kZXJlciA9IF9fZGVjb3JhdGUoW1xuICAgIGluc3RydWN0aW9uUmVuZGVyZXIoXCJoY1wiIC8qIGF0dHJpYnV0ZUJpbmRpbmcgKi8pXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgICxcbiAgICBfX3BhcmFtKDAsIElFeHByZXNzaW9uUGFyc2VyKSxcbiAgICBfX3BhcmFtKDEsIElPYnNlcnZlckxvY2F0b3IpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0LCBPYmplY3RdKVxuXSwgQXR0cmlidXRlQmluZGluZ1JlbmRlcmVyKTtcbmV4cG9ydCB7IEF0dHJpYnV0ZUJpbmRpbmdSZW5kZXJlciB9O1xuLy8gaHR0cDovL2pzYmVuLmNoLzduNUt0XG5mdW5jdGlvbiBhZGRDbGFzc2VzKGNsYXNzTGlzdCwgY2xhc3NOYW1lKSB7XG4gICAgY29uc3QgbGVuID0gY2xhc3NOYW1lLmxlbmd0aDtcbiAgICBsZXQgc3RhcnQgPSAwO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAgaWYgKGNsYXNzTmFtZS5jaGFyQ29kZUF0KGkpID09PSAweDIwKSB7XG4gICAgICAgICAgICBpZiAoaSAhPT0gc3RhcnQpIHtcbiAgICAgICAgICAgICAgICBjbGFzc0xpc3QuYWRkKGNsYXNzTmFtZS5zbGljZShzdGFydCwgaSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3RhcnQgPSBpICsgMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpICsgMSA9PT0gbGVuKSB7XG4gICAgICAgICAgICBjbGFzc0xpc3QuYWRkKGNsYXNzTmFtZS5zbGljZShzdGFydCkpO1xuICAgICAgICB9XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aHRtbC1yZW5kZXJlci5qcy5tYXAiLCJleHBvcnQgeyBMaXN0ZW5lciB9IGZyb20gJy4vYmluZGluZy9saXN0ZW5lcic7XG5leHBvcnQgeyBBdHRyaWJ1dGVCaW5kaW5nIH0gZnJvbSAnLi9iaW5kaW5nL2F0dHJpYnV0ZSc7XG5leHBvcnQgeyBBdHRyaWJ1dGVOU0FjY2Vzc29yIH0gZnJvbSAnLi9vYnNlcnZhdGlvbi9hdHRyaWJ1dGUtbnMtYWNjZXNzb3InO1xuZXhwb3J0IHsgQ2hlY2tlZE9ic2VydmVyIH0gZnJvbSAnLi9vYnNlcnZhdGlvbi9jaGVja2VkLW9ic2VydmVyJztcbmV4cG9ydCB7IENsYXNzQXR0cmlidXRlQWNjZXNzb3IgfSBmcm9tICcuL29ic2VydmF0aW9uL2NsYXNzLWF0dHJpYnV0ZS1hY2Nlc3Nvcic7XG5leHBvcnQgeyBEYXRhQXR0cmlidXRlQWNjZXNzb3IgfSBmcm9tICcuL29ic2VydmF0aW9uL2RhdGEtYXR0cmlidXRlLWFjY2Vzc29yJztcbmV4cG9ydCB7IEVsZW1lbnRQcm9wZXJ0eUFjY2Vzc29yIH0gZnJvbSAnLi9vYnNlcnZhdGlvbi9lbGVtZW50LXByb3BlcnR5LWFjY2Vzc29yJztcbmV4cG9ydCB7IExpc3RlbmVyVHJhY2tlciwgRGVsZWdhdGVPckNhcHR1cmVTdWJzY3JpcHRpb24sIFRyaWdnZXJTdWJzY3JpcHRpb24sIElFdmVudE1hbmFnZXIsIEV2ZW50U3Vic2NyaWJlciwgRXZlbnRNYW5hZ2VyIH0gZnJvbSAnLi9vYnNlcnZhdGlvbi9ldmVudC1tYW5hZ2VyJztcbmV4cG9ydCB7IFRhcmdldEFjY2Vzc29yTG9jYXRvciwgVGFyZ2V0T2JzZXJ2ZXJMb2NhdG9yIH0gZnJvbSAnLi9vYnNlcnZhdGlvbi9vYnNlcnZlci1sb2NhdG9yJztcbmV4cG9ydCB7IFNlbGVjdFZhbHVlT2JzZXJ2ZXIgfSBmcm9tICcuL29ic2VydmF0aW9uL3NlbGVjdC12YWx1ZS1vYnNlcnZlcic7XG5leHBvcnQgeyBTdHlsZUF0dHJpYnV0ZUFjY2Vzc29yIH0gZnJvbSAnLi9vYnNlcnZhdGlvbi9zdHlsZS1hdHRyaWJ1dGUtYWNjZXNzb3InO1xuZXhwb3J0IHsgSVNWR0FuYWx5emVyIH0gZnJvbSAnLi9vYnNlcnZhdGlvbi9zdmctYW5hbHl6ZXInO1xuZXhwb3J0IHsgVmFsdWVBdHRyaWJ1dGVPYnNlcnZlciB9IGZyb20gJy4vb2JzZXJ2YXRpb24vdmFsdWUtYXR0cmlidXRlLW9ic2VydmVyJztcbmV4cG9ydCB7IEF0dHJCaW5kaW5nQmVoYXZpb3IgfSBmcm9tICcuL3Jlc291cmNlcy9iaW5kaW5nLWJlaGF2aW9ycy9hdHRyJztcbmV4cG9ydCB7IFNlbGZCaW5kaW5nQmVoYXZpb3IgfSBmcm9tICcuL3Jlc291cmNlcy9iaW5kaW5nLWJlaGF2aW9ycy9zZWxmJztcbmV4cG9ydCB7IFVwZGF0ZVRyaWdnZXJCaW5kaW5nQmVoYXZpb3IgfSBmcm9tICcuL3Jlc291cmNlcy9iaW5kaW5nLWJlaGF2aW9ycy91cGRhdGUtdHJpZ2dlcic7XG5leHBvcnQgeyBCbHVyLCBCbHVyTWFuYWdlciB9IGZyb20gJy4vcmVzb3VyY2VzL2N1c3RvbS1hdHRyaWJ1dGVzL2JsdXInO1xuZXhwb3J0IHsgRm9jdXMgfSBmcm9tICcuL3Jlc291cmNlcy9jdXN0b20tYXR0cmlidXRlcy9mb2N1cyc7XG5leHBvcnQgeyBQb3J0YWwgfSBmcm9tICcuL3Jlc291cmNlcy9jdXN0b20tYXR0cmlidXRlcy9wb3J0YWwnO1xuZXhwb3J0IHsgQ29tcG9zZSB9IGZyb20gJy4vcmVzb3VyY2VzL2N1c3RvbS1lbGVtZW50cy9jb21wb3NlJztcbmV4cG9ydCB7IElQcm9qZWN0b3JMb2NhdG9yUmVnaXN0cmF0aW9uLCBJVGFyZ2V0QWNjZXNzb3JMb2NhdG9yUmVnaXN0cmF0aW9uLCBJVGFyZ2V0T2JzZXJ2ZXJMb2NhdG9yUmVnaXN0cmF0aW9uLCBEZWZhdWx0Q29tcG9uZW50cywgQXR0ckJpbmRpbmdCZWhhdmlvclJlZ2lzdHJhdGlvbiwgU2VsZkJpbmRpbmdCZWhhdmlvclJlZ2lzdHJhdGlvbiwgVXBkYXRlVHJpZ2dlckJpbmRpbmdCZWhhdmlvclJlZ2lzdHJhdGlvbiwgQ29tcG9zZVJlZ2lzdHJhdGlvbiwgRGVmYXVsdFJlc291cmNlcywgQXR0cmlidXRlQmluZGluZ1JlbmRlcmVyUmVnaXN0cmF0aW9uLCBMaXN0ZW5lckJpbmRpbmdSZW5kZXJlclJlZ2lzdHJhdGlvbiwgU2V0QXR0cmlidXRlUmVuZGVyZXJSZWdpc3RyYXRpb24sIFNldENsYXNzQXR0cmlidXRlUmVuZGVyZXJSZWdpc3RyYXRpb24sIFNldFN0eWxlQXR0cmlidXRlUmVuZGVyZXJSZWdpc3RyYXRpb24sIFN0eWxlUHJvcGVydHlCaW5kaW5nUmVuZGVyZXJSZWdpc3RyYXRpb24sIFRleHRCaW5kaW5nUmVuZGVyZXJSZWdpc3RyYXRpb24sIERlZmF1bHRSZW5kZXJlcnMsIFJ1bnRpbWVIdG1sQ29uZmlndXJhdGlvbiB9IGZyb20gJy4vY29uZmlndXJhdGlvbic7XG5leHBvcnQgeyBjcmVhdGVFbGVtZW50LCBSZW5kZXJQbGFuIH0gZnJvbSAnLi9jcmVhdGUtZWxlbWVudCc7XG5leHBvcnQgeyBIVE1MVGFyZ2V0ZWRJbnN0cnVjdGlvblR5cGUsIGlzSFRNTFRhcmdldGVkSW5zdHJ1Y3Rpb24gfSBmcm9tICcuL2RlZmluaXRpb25zJztcbmV4cG9ydCB7IE5vZGVUeXBlLCBIVE1MRE9NLCBET00sIEZyYWdtZW50Tm9kZVNlcXVlbmNlIH0gZnJvbSAnLi9kb20nO1xuZXhwb3J0IHsgQXR0cmlidXRlQmluZGluZ0luc3RydWN0aW9uLCBDYXB0dXJlQmluZGluZ0luc3RydWN0aW9uLCBEZWxlZ2F0ZUJpbmRpbmdJbnN0cnVjdGlvbiwgU2V0QXR0cmlidXRlSW5zdHJ1Y3Rpb24sIFNldENsYXNzQXR0cmlidXRlSW5zdHJ1Y3Rpb24sIFNldFN0eWxlQXR0cmlidXRlSW5zdHJ1Y3Rpb24sIFN0eWxlUHJvcGVydHlCaW5kaW5nSW5zdHJ1Y3Rpb24sIFRleHRCaW5kaW5nSW5zdHJ1Y3Rpb24sIFRyaWdnZXJCaW5kaW5nSW5zdHJ1Y3Rpb24gfSBmcm9tICcuL2luc3RydWN0aW9ucyc7XG5leHBvcnQgeyBDb250YWluZXJsZXNzUHJvamVjdG9yLCBIb3N0UHJvamVjdG9yLCBIVE1MUHJvamVjdG9yTG9jYXRvciwgU2hhZG93RE9NUHJvamVjdG9yIH0gZnJvbSAnLi9wcm9qZWN0b3JzJztcbmV4cG9ydCB7IFN0eWxlQ29uZmlndXJhdGlvbiB9IGZyb20gJy4vc3R5bGVzL3N0eWxlLWNvbmZpZ3VyYXRpb24nO1xuZXhwb3J0IHsgQ1NTTW9kdWxlc1Byb2Nlc3NvclJlZ2lzdHJ5LCBjc3NNb2R1bGVzIH0gZnJvbSAnLi9zdHlsZXMvY3NzLW1vZHVsZXMtcmVnaXN0cnknO1xuZXhwb3J0IHsgU2hhZG93RE9NUmVnaXN0cnksIElTaGFkb3dET01TdHlsZUZhY3RvcnksIHNoYWRvd0NTUyB9IGZyb20gJy4vc3R5bGVzL3NoYWRvdy1kb20tcmVnaXN0cnknO1xuZXhwb3J0IHsgQWRvcHRlZFN0eWxlU2hlZXRzU3R5bGVzLCBTdHlsZUVsZW1lbnRTdHlsZXMsIElTaGFkb3dET01TdHlsZXMsIElTaGFkb3dET01HbG9iYWxTdHlsZXMgfSBmcm9tICcuL3N0eWxlcy9zaGFkb3ctZG9tLXN0eWxlcyc7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiLCJpbXBvcnQgeyBEZWxlZ2F0aW9uU3RyYXRlZ3kgfSBmcm9tICdAYXVyZWxpYS9ydW50aW1lJztcbmV4cG9ydCBjbGFzcyBUZXh0QmluZGluZ0luc3RydWN0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcihmcm9tKSB7XG4gICAgICAgIHRoaXMuZnJvbSA9IGZyb207XG4gICAgICAgIHRoaXMudHlwZSA9IFwiaGFcIiAvKiB0ZXh0QmluZGluZyAqLztcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgVHJpZ2dlckJpbmRpbmdJbnN0cnVjdGlvbiB7XG4gICAgY29uc3RydWN0b3IoZnJvbSwgdG8pIHtcbiAgICAgICAgdGhpcy5mcm9tID0gZnJvbTtcbiAgICAgICAgdGhpcy50byA9IHRvO1xuICAgICAgICB0aGlzLnR5cGUgPSBcImhiXCIgLyogbGlzdGVuZXJCaW5kaW5nICovO1xuICAgICAgICB0aGlzLnByZXZlbnREZWZhdWx0ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5zdHJhdGVneSA9IERlbGVnYXRpb25TdHJhdGVneS5ub25lO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBEZWxlZ2F0ZUJpbmRpbmdJbnN0cnVjdGlvbiB7XG4gICAgY29uc3RydWN0b3IoZnJvbSwgdG8pIHtcbiAgICAgICAgdGhpcy5mcm9tID0gZnJvbTtcbiAgICAgICAgdGhpcy50byA9IHRvO1xuICAgICAgICB0aGlzLnR5cGUgPSBcImhiXCIgLyogbGlzdGVuZXJCaW5kaW5nICovO1xuICAgICAgICB0aGlzLnByZXZlbnREZWZhdWx0ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc3RyYXRlZ3kgPSBEZWxlZ2F0aW9uU3RyYXRlZ3kuYnViYmxpbmc7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIENhcHR1cmVCaW5kaW5nSW5zdHJ1Y3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKGZyb20sIHRvKSB7XG4gICAgICAgIHRoaXMuZnJvbSA9IGZyb207XG4gICAgICAgIHRoaXMudG8gPSB0bztcbiAgICAgICAgdGhpcy50eXBlID0gXCJoYlwiIC8qIGxpc3RlbmVyQmluZGluZyAqLztcbiAgICAgICAgdGhpcy5wcmV2ZW50RGVmYXVsdCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnN0cmF0ZWd5ID0gRGVsZWdhdGlvblN0cmF0ZWd5LmNhcHR1cmluZztcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgU3R5bGVQcm9wZXJ0eUJpbmRpbmdJbnN0cnVjdGlvbiB7XG4gICAgY29uc3RydWN0b3IoZnJvbSwgdG8pIHtcbiAgICAgICAgdGhpcy5mcm9tID0gZnJvbTtcbiAgICAgICAgdGhpcy50byA9IHRvO1xuICAgICAgICB0aGlzLnR5cGUgPSBcImhkXCIgLyogc3R5bGVQcm9wZXJ0eUJpbmRpbmcgKi87XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFNldEF0dHJpYnV0ZUluc3RydWN0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih2YWx1ZSwgdG8pIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgICB0aGlzLnRvID0gdG87XG4gICAgICAgIHRoaXMudHlwZSA9IFwiaGVcIiAvKiBzZXRBdHRyaWJ1dGUgKi87XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFNldENsYXNzQXR0cmlidXRlSW5zdHJ1Y3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKHZhbHVlKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy50eXBlID0gXCJoZlwiIC8qIHNldENsYXNzQXR0cmlidXRlICovO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBTZXRTdHlsZUF0dHJpYnV0ZUluc3RydWN0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih2YWx1ZSkge1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICAgIHRoaXMudHlwZSA9IFwiaGdcIiAvKiBzZXRTdHlsZUF0dHJpYnV0ZSAqLztcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQXR0cmlidXRlQmluZGluZ0luc3RydWN0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBgYXR0cmAgYW5kIGB0b2AgaGF2ZSB0aGUgc2FtZSB2YWx1ZSBvbiBhIG5vcm1hbCBhdHRyaWJ1dGVcbiAgICAgKiBXaWxsIGJlIGRpZmZlcmVudCBvbiBgY2xhc3NgIGFuZCBgc3R5bGVgXG4gICAgICogb24gYGNsYXNzYDogYXR0ciA9IGBjbGFzc2AgKGZyb20gYmluZGluZyBjb21tYW5kKSwgdG8gPSBhdHRyaWJ1dGUgbmFtZVxuICAgICAqIG9uIGBzdHlsZWA6IGF0dHIgPSBgc3R5bGVgIChmcm9tIGJpbmRpbmcgY29tbWFuZCksIHRvID0gYXR0cmlidXRlIG5hbWVcbiAgICAgKi9cbiAgICBhdHRyLCBmcm9tLCB0bykge1xuICAgICAgICB0aGlzLmF0dHIgPSBhdHRyO1xuICAgICAgICB0aGlzLmZyb20gPSBmcm9tO1xuICAgICAgICB0aGlzLnRvID0gdG87XG4gICAgICAgIHRoaXMudHlwZSA9IFwiaGNcIiAvKiBhdHRyaWJ1dGVCaW5kaW5nICovO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluc3RydWN0aW9ucy5qcy5tYXAiLCIvKipcbiAqIEF0dHJpYnV0ZSBhY2Nlc3NvciBpbiBhIFhNTCBkb2N1bWVudC9lbGVtZW50IHRoYXQgY2FuIGJlIGFjY2Vzc2VkIHZpYSBhIG5hbWVzcGFjZS5cbiAqIFdyYXBzIFtgZ2V0QXR0cmlidXRlTlNgXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvRWxlbWVudC9nZXRBdHRyaWJ1dGVOUykuXG4gKi9cbmV4cG9ydCBjbGFzcyBBdHRyaWJ1dGVOU0FjY2Vzc29yIHtcbiAgICBjb25zdHJ1Y3RvcihzY2hlZHVsZXIsIGZsYWdzLCBvYmosIHByb3BlcnR5S2V5LCBuYW1lc3BhY2UpIHtcbiAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICAgIHRoaXMucHJvcGVydHlLZXkgPSBwcm9wZXJ0eUtleTtcbiAgICAgICAgdGhpcy5uYW1lc3BhY2UgPSBuYW1lc3BhY2U7XG4gICAgICAgIHRoaXMuY3VycmVudFZhbHVlID0gbnVsbDtcbiAgICAgICAgdGhpcy5vbGRWYWx1ZSA9IG51bGw7XG4gICAgICAgIHRoaXMuaGFzQ2hhbmdlcyA9IGZhbHNlO1xuICAgICAgICB0aGlzLnRhc2sgPSBudWxsO1xuICAgICAgICB0aGlzLm9iaiA9IG9iajtcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW50RmxhZ3MgPSBmbGFncyAmIDgwNTMwNjM4MyAvKiB0YXJnZXRPYnNlcnZlckZsYWdzICovO1xuICAgIH1cbiAgICBnZXRWYWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudFZhbHVlO1xuICAgIH1cbiAgICBzZXRWYWx1ZShuZXdWYWx1ZSwgZmxhZ3MpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50VmFsdWUgPSBuZXdWYWx1ZTtcbiAgICAgICAgdGhpcy5oYXNDaGFuZ2VzID0gbmV3VmFsdWUgIT09IHRoaXMub2xkVmFsdWU7XG4gICAgICAgIGlmICgoZmxhZ3MgJiA0MDk2IC8qIGZyb21CaW5kICovKSA+IDAgfHwgdGhpcy5wZXJzaXN0ZW50RmxhZ3MgPT09IDI2ODQzNTQ1NiAvKiBub1RhcmdldE9ic2VydmVyUXVldWUgKi8pIHtcbiAgICAgICAgICAgIHRoaXMuZmx1c2hDaGFuZ2VzKGZsYWdzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLnBlcnNpc3RlbnRGbGFncyAhPT0gNTM2ODcwOTEyIC8qIHBlcnNpc3RlbnRUYXJnZXRPYnNlcnZlclF1ZXVlICovICYmIHRoaXMudGFzayA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy50YXNrID0gdGhpcy5zY2hlZHVsZXIucXVldWVSZW5kZXJUYXNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmZsdXNoQ2hhbmdlcyhmbGFncyk7XG4gICAgICAgICAgICAgICAgdGhpcy50YXNrID0gbnVsbDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZsdXNoQ2hhbmdlcyhmbGFncykge1xuICAgICAgICBpZiAodGhpcy5oYXNDaGFuZ2VzKSB7XG4gICAgICAgICAgICB0aGlzLmhhc0NoYW5nZXMgPSBmYWxzZTtcbiAgICAgICAgICAgIGNvbnN0IHsgY3VycmVudFZhbHVlIH0gPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy5vbGRWYWx1ZSA9IGN1cnJlbnRWYWx1ZTtcbiAgICAgICAgICAgIGlmIChjdXJyZW50VmFsdWUgPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vYmoucmVtb3ZlQXR0cmlidXRlTlModGhpcy5uYW1lc3BhY2UsIHRoaXMucHJvcGVydHlLZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vYmouc2V0QXR0cmlidXRlTlModGhpcy5uYW1lc3BhY2UsIHRoaXMucHJvcGVydHlLZXksIGN1cnJlbnRWYWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgYmluZChmbGFncykge1xuICAgICAgICBpZiAodGhpcy5wZXJzaXN0ZW50RmxhZ3MgPT09IDUzNjg3MDkxMiAvKiBwZXJzaXN0ZW50VGFyZ2V0T2JzZXJ2ZXJRdWV1ZSAqLykge1xuICAgICAgICAgICAgaWYgKHRoaXMudGFzayAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMudGFzay5jYW5jZWwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudGFzayA9IHRoaXMuc2NoZWR1bGVyLnF1ZXVlUmVuZGVyVGFzaygoKSA9PiB0aGlzLmZsdXNoQ2hhbmdlcyhmbGFncyksIHsgcGVyc2lzdGVudDogdHJ1ZSB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmN1cnJlbnRWYWx1ZSA9IHRoaXMub2xkVmFsdWUgPSB0aGlzLm9iai5nZXRBdHRyaWJ1dGVOUyh0aGlzLm5hbWVzcGFjZSwgdGhpcy5wcm9wZXJ0eUtleSk7XG4gICAgfVxuICAgIHVuYmluZChmbGFncykge1xuICAgICAgICBpZiAodGhpcy50YXNrICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLnRhc2suY2FuY2VsKCk7XG4gICAgICAgICAgICB0aGlzLnRhc2sgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXR0cmlidXRlLW5zLWFjY2Vzc29yLmpzLm1hcCIsImltcG9ydCB7IF9fZGVjb3JhdGUsIF9fbWV0YWRhdGEgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IHN1YnNjcmliZXJDb2xsZWN0aW9uLCBJU2NoZWR1bGVyLCBnZXRDb2xsZWN0aW9uT2JzZXJ2ZXIsIElMaWZlY3ljbGUsIH0gZnJvbSAnQGF1cmVsaWEvcnVudGltZSc7XG5jb25zdCB0b1N0cmluZ1RhZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG5mdW5jdGlvbiBkZWZhdWx0TWF0Y2hlcihhLCBiKSB7XG4gICAgcmV0dXJuIGEgPT09IGI7XG59XG5sZXQgQ2hlY2tlZE9ic2VydmVyID0gY2xhc3MgQ2hlY2tlZE9ic2VydmVyIHtcbiAgICBjb25zdHJ1Y3RvcihzY2hlZHVsZXIsIGZsYWdzLCBsaWZlY3ljbGUsIGhhbmRsZXIsIG9iaikge1xuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgICAgdGhpcy5saWZlY3ljbGUgPSBsaWZlY3ljbGU7XG4gICAgICAgIHRoaXMuaGFuZGxlciA9IGhhbmRsZXI7XG4gICAgICAgIHRoaXMub2JqID0gb2JqO1xuICAgICAgICB0aGlzLmN1cnJlbnRWYWx1ZSA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5vbGRWYWx1ZSA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5oYXNDaGFuZ2VzID0gZmFsc2U7XG4gICAgICAgIHRoaXMudGFzayA9IG51bGw7XG4gICAgICAgIHRoaXMuY29sbGVjdGlvbk9ic2VydmVyID0gdm9pZCAwO1xuICAgICAgICB0aGlzLnZhbHVlT2JzZXJ2ZXIgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMucGVyc2lzdGVudEZsYWdzID0gZmxhZ3MgJiA4MDUzMDYzODMgLyogdGFyZ2V0T2JzZXJ2ZXJGbGFncyAqLztcbiAgICB9XG4gICAgZ2V0VmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRWYWx1ZTtcbiAgICB9XG4gICAgc2V0VmFsdWUobmV3VmFsdWUsIGZsYWdzKSB7XG4gICAgICAgIHRoaXMuY3VycmVudFZhbHVlID0gbmV3VmFsdWU7XG4gICAgICAgIHRoaXMuaGFzQ2hhbmdlcyA9IG5ld1ZhbHVlICE9PSB0aGlzLm9sZFZhbHVlO1xuICAgICAgICBpZiAoKGZsYWdzICYgNDA5NiAvKiBmcm9tQmluZCAqLykgPT09IDQwOTYgLyogZnJvbUJpbmQgKi8gfHwgdGhpcy5wZXJzaXN0ZW50RmxhZ3MgPT09IDI2ODQzNTQ1NiAvKiBub1RhcmdldE9ic2VydmVyUXVldWUgKi8pIHtcbiAgICAgICAgICAgIHRoaXMuZmx1c2hDaGFuZ2VzKGZsYWdzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLnBlcnNpc3RlbnRGbGFncyAhPT0gNTM2ODcwOTEyIC8qIHBlcnNpc3RlbnRUYXJnZXRPYnNlcnZlclF1ZXVlICovICYmIHRoaXMudGFzayA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy50YXNrID0gdGhpcy5zY2hlZHVsZXIucXVldWVSZW5kZXJUYXNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmZsdXNoQ2hhbmdlcyhmbGFncyk7XG4gICAgICAgICAgICAgICAgdGhpcy50YXNrID0gbnVsbDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZsdXNoQ2hhbmdlcyhmbGFncykge1xuICAgICAgICBpZiAodGhpcy5oYXNDaGFuZ2VzKSB7XG4gICAgICAgICAgICB0aGlzLmhhc0NoYW5nZXMgPSBmYWxzZTtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRWYWx1ZSA9IHRoaXMub2xkVmFsdWUgPSB0aGlzLmN1cnJlbnRWYWx1ZTtcbiAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlT2JzZXJ2ZXIgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLm9iai4kb2JzZXJ2ZXJzICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMub2JqLiRvYnNlcnZlcnMubW9kZWwgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZU9ic2VydmVyID0gdGhpcy5vYmouJG9ic2VydmVycy5tb2RlbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLm9iai4kb2JzZXJ2ZXJzLnZhbHVlICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWVPYnNlcnZlciA9IHRoaXMub2JqLiRvYnNlcnZlcnMudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudmFsdWVPYnNlcnZlciAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWVPYnNlcnZlci5zdWJzY3JpYmUodGhpcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuY29sbGVjdGlvbk9ic2VydmVyICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbGxlY3Rpb25PYnNlcnZlci51bnN1YnNjcmliZUZyb21Db2xsZWN0aW9uKHRoaXMpO1xuICAgICAgICAgICAgICAgIHRoaXMuY29sbGVjdGlvbk9ic2VydmVyID0gdm9pZCAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMub2JqLnR5cGUgPT09ICdjaGVja2JveCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbGxlY3Rpb25PYnNlcnZlciA9IGdldENvbGxlY3Rpb25PYnNlcnZlcihmbGFncywgdGhpcy5saWZlY3ljbGUsIGN1cnJlbnRWYWx1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY29sbGVjdGlvbk9ic2VydmVyICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb2xsZWN0aW9uT2JzZXJ2ZXIuc3Vic2NyaWJlVG9Db2xsZWN0aW9uKHRoaXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc3luY2hyb25pemVFbGVtZW50KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFuZGxlQ29sbGVjdGlvbkNoYW5nZShpbmRleE1hcCwgZmxhZ3MpIHtcbiAgICAgICAgY29uc3QgeyBjdXJyZW50VmFsdWUsIG9sZFZhbHVlIH0gPSB0aGlzO1xuICAgICAgICBpZiAoKGZsYWdzICYgNDA5NiAvKiBmcm9tQmluZCAqLykgPiAwIHx8IHRoaXMucGVyc2lzdGVudEZsYWdzID09PSAyNjg0MzU0NTYgLyogbm9UYXJnZXRPYnNlcnZlclF1ZXVlICovKSB7XG4gICAgICAgICAgICB0aGlzLm9sZFZhbHVlID0gY3VycmVudFZhbHVlO1xuICAgICAgICAgICAgdGhpcy5zeW5jaHJvbml6ZUVsZW1lbnQoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuaGFzQ2hhbmdlcyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucGVyc2lzdGVudEZsYWdzICE9PSA1MzY4NzA5MTIgLyogcGVyc2lzdGVudFRhcmdldE9ic2VydmVyUXVldWUgKi8gJiYgdGhpcy50YXNrID09PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLnRhc2sgPSB0aGlzLnNjaGVkdWxlci5xdWV1ZVJlbmRlclRhc2soKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuZmx1c2hDaGFuZ2VzKGZsYWdzKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRhc2sgPSBudWxsO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jYWxsU3Vic2NyaWJlcnMoY3VycmVudFZhbHVlLCBvbGRWYWx1ZSwgZmxhZ3MpO1xuICAgIH1cbiAgICBoYW5kbGVDaGFuZ2UobmV3VmFsdWUsIHByZXZpb3VzVmFsdWUsIGZsYWdzKSB7XG4gICAgICAgIGlmICgoZmxhZ3MgJiA0MDk2IC8qIGZyb21CaW5kICovKSA+IDAgfHwgdGhpcy5wZXJzaXN0ZW50RmxhZ3MgPT09IDI2ODQzNTQ1NiAvKiBub1RhcmdldE9ic2VydmVyUXVldWUgKi8pIHtcbiAgICAgICAgICAgIHRoaXMuc3luY2hyb25pemVFbGVtZW50KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmhhc0NoYW5nZXMgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnBlcnNpc3RlbnRGbGFncyAhPT0gNTM2ODcwOTEyIC8qIHBlcnNpc3RlbnRUYXJnZXRPYnNlcnZlclF1ZXVlICovICYmIHRoaXMudGFzayA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy50YXNrID0gdGhpcy5zY2hlZHVsZXIucXVldWVSZW5kZXJUYXNrKCgpID0+IHRoaXMuZmx1c2hDaGFuZ2VzKGZsYWdzKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jYWxsU3Vic2NyaWJlcnMobmV3VmFsdWUsIHByZXZpb3VzVmFsdWUsIGZsYWdzKTtcbiAgICB9XG4gICAgc3luY2hyb25pemVFbGVtZW50KCkge1xuICAgICAgICBjb25zdCBjdXJyZW50VmFsdWUgPSB0aGlzLmN1cnJlbnRWYWx1ZTtcbiAgICAgICAgY29uc3Qgb2JqID0gdGhpcy5vYmo7XG4gICAgICAgIGNvbnN0IGVsZW1lbnRWYWx1ZSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosICdtb2RlbCcpID8gb2JqLm1vZGVsIDogb2JqLnZhbHVlO1xuICAgICAgICBjb25zdCBpc1JhZGlvID0gb2JqLnR5cGUgPT09ICdyYWRpbyc7XG4gICAgICAgIGNvbnN0IG1hdGNoZXIgPSBvYmoubWF0Y2hlciAhPT0gdm9pZCAwID8gb2JqLm1hdGNoZXIgOiBkZWZhdWx0TWF0Y2hlcjtcbiAgICAgICAgaWYgKGlzUmFkaW8pIHtcbiAgICAgICAgICAgIG9iai5jaGVja2VkID0gISFtYXRjaGVyKGN1cnJlbnRWYWx1ZSwgZWxlbWVudFZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjdXJyZW50VmFsdWUgPT09IHRydWUpIHtcbiAgICAgICAgICAgIG9iai5jaGVja2VkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxldCBoYXNNYXRjaCA9IGZhbHNlO1xuICAgICAgICAgICAgc3dpdGNoICh0b1N0cmluZ1RhZy5jYWxsKGN1cnJlbnRWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdbb2JqZWN0IEFycmF5XSc6XG4gICAgICAgICAgICAgICAgICAgIGhhc01hdGNoID0gY3VycmVudFZhbHVlLmZpbmRJbmRleChpdGVtID0+ICEhbWF0Y2hlcihpdGVtLCBlbGVtZW50VmFsdWUpKSAhPT0gLTE7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ1tvYmplY3QgU2V0XSc6XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdiBvZiBjdXJyZW50VmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaGVyKHYsIGVsZW1lbnRWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNNYXRjaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnW29iamVjdCBNYXBdJzpcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBwYWlyIG9mIGN1cnJlbnRWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdJdGVtID0gcGFpclswXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0ICRpc0NoZWNrZWQgPSBwYWlyWzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYSBwb3RlbnRpYWwgY29tcGxhaW4sIHdoZW4gb25seSBgdHJ1ZWAgaXMgc3VwcG9ydGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBidXQgaXQncyBjb25zaXN0ZW50IHdpdGggYXJyYXlcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaGVyKGV4aXN0aW5nSXRlbSwgZWxlbWVudFZhbHVlKSAmJiAkaXNDaGVja2VkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzTWF0Y2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvYmouY2hlY2tlZCA9IGhhc01hdGNoO1xuICAgICAgICB9XG4gICAgfVxuICAgIGhhbmRsZUV2ZW50KCkge1xuICAgICAgICBsZXQgY3VycmVudFZhbHVlID0gdGhpcy5vbGRWYWx1ZSA9IHRoaXMuY3VycmVudFZhbHVlO1xuICAgICAgICBjb25zdCBvYmogPSB0aGlzLm9iajtcbiAgICAgICAgY29uc3QgZWxlbWVudFZhbHVlID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgJ21vZGVsJykgPyBvYmoubW9kZWwgOiBvYmoudmFsdWU7XG4gICAgICAgIGNvbnN0IGlzQ2hlY2tlZCA9IG9iai5jaGVja2VkO1xuICAgICAgICBjb25zdCBtYXRjaGVyID0gb2JqLm1hdGNoZXIgIT09IHZvaWQgMCA/IG9iai5tYXRjaGVyIDogZGVmYXVsdE1hdGNoZXI7XG4gICAgICAgIGlmIChvYmoudHlwZSA9PT0gJ2NoZWNrYm94Jykge1xuICAgICAgICAgICAgY29uc3QgdG9TdHJpbmdSZXQgPSB0b1N0cmluZ1RhZy5jYWxsKGN1cnJlbnRWYWx1ZSk7XG4gICAgICAgICAgICBpZiAodG9TdHJpbmdSZXQgPT09ICdbb2JqZWN0IEFycmF5XScpIHtcbiAgICAgICAgICAgICAgICAvLyBBcnJheSBiaW5kaW5nIHN0ZXBzIG9uIGEgY2hhbmdlIGV2ZW50OlxuICAgICAgICAgICAgICAgIC8vIDEuIGZpbmQgY29ycmVzcG9uZGluZyBpdGVtIElOREVYIGluIHRoZSBTZXQgYmFzZWQgb24gY3VycmVudCBtb2RlbC92YWx1ZSBhbmQgbWF0Y2hlclxuICAgICAgICAgICAgICAgIC8vIDIuIGlzIHRoZSBjaGVja2JveCBjaGVja2VkP1xuICAgICAgICAgICAgICAgIC8vICAgIDIuMS4gWWVzOiBpcyB0aGUgY29ycmVzcG9uZGluZyBpdGVtIGluIHRoZSBBcnJheSAoaW5kZXggPT09IC0xKT9cbiAgICAgICAgICAgICAgICAvLyAgICAgICAgMi4xLjEgTm86IHB1c2ggdGhlIGN1cnJlbnQgbW9kZWwvdmFsdWUgdG8gdGhlIEFycmF5XG4gICAgICAgICAgICAgICAgLy8gICAgMi4yLiBObzogaXMgdGhlIGNvcnJlc3BvbmRpbmcgaXRlbSBpbiB0aGUgQXJyYXkgKGluZGV4ICE9PSAtMSk/XG4gICAgICAgICAgICAgICAgLy8gICAgICAgIDIuMi4xOiBZZXM6IHJlbW92ZSB0aGUgY29ycmVzcG9uZGluZyBpdGVtXG4gICAgICAgICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gY3VycmVudFZhbHVlLmZpbmRJbmRleChpdGVtID0+ICEhbWF0Y2hlcihpdGVtLCBlbGVtZW50VmFsdWUpKTtcbiAgICAgICAgICAgICAgICAvLyBpZiB0aGUgY2hlY2tib3ggaXMgY2hlY2tkZSwgYW5kIHRoZXJlJ3Mgbm8gbWF0Y2hpbmcgdmFsdWUgaW4gdGhlIGV4aXN0aW5nIGFycmF5XG4gICAgICAgICAgICAgICAgLy8gYWRkIHRoZSBjaGVja2JveCBtb2RlbC92YWx1ZSB0byB0aGUgYXJyYXlcbiAgICAgICAgICAgICAgICBpZiAoaXNDaGVja2VkICYmIGluZGV4ID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VmFsdWUucHVzaChlbGVtZW50VmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICghaXNDaGVja2VkICYmIGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGUgY2hlY2tib3ggaXMgbm90IGNoZWNrZWQsIGFuZCBmb3VuZCBhIG1hdGNoaW5nIGl0ZW0gaW4gdGhlIGFycmF5XG4gICAgICAgICAgICAgICAgICAgIC8vIGJhc2VkIG9uIHRoZSBjaGVja2JveCBtb2RlbC92YWx1ZVxuICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgdGhlIGV4aXN0aW5nIGl0ZW1cbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFZhbHVlLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIHdoZW4gZXhpc3RpbmcgY3VycmVudFZhbHVlIGlzIGFuIGFycmF5LFxuICAgICAgICAgICAgICAgIC8vIGRvIG5vdCBpbnZva2UgY2FsbGJhY2sgYXMgb25seSB0aGUgYXJyYXkgb2JqIGhhcyBjaGFuZ2VkXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodG9TdHJpbmdSZXQgPT09ICdbb2JqZWN0IFNldF0nKSB7XG4gICAgICAgICAgICAgICAgLy8gU2V0IGJpbmRpbmcgc3RlcHMgb24gYSBjaGFuZ2UgZXZlbnQ6XG4gICAgICAgICAgICAgICAgLy8gMS4gZmluZCBjb3JyZXNwb25kaW5nIGl0ZW0gaW4gdGhlIFNldCBiYXNlZCBvbiBjdXJyZW50IG1vZGVsL3ZhbHVlIGFuZCBtYXRjaGVyXG4gICAgICAgICAgICAgICAgLy8gMi4gaXMgdGhlIGNoZWNrYm94IGNoZWNrZWQ/XG4gICAgICAgICAgICAgICAgLy8gICAgMi4xLiBZZXM6IGlzIHRoZSBjb3JyZXNwb25kaW5nIGl0ZW0gaW4gdGhlIFNldD9cbiAgICAgICAgICAgICAgICAvLyAgICAgICAgMi4xLjEgTm86IGFkZCB0aGUgY3VycmVudCBtb2RlbC92YWx1ZSB0byB0aGUgU2V0XG4gICAgICAgICAgICAgICAgLy8gICAgMi4yLiBObzogaXMgdGhlIGNvcnJlc3BvbmRpbmcgaXRlbSBpbiB0aGUgU2V0P1xuICAgICAgICAgICAgICAgIC8vICAgICAgICAyLjIuMTogWWVzOiByZW1vdmUgdGhlIGNvcnJlc3BvbmRpbmcgaXRlbVxuICAgICAgICAgICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAgICAgICAgICAgICAvLyAxLiBmaW5kIGNvcnJlc3BvbmRpbmcgaXRlbVxuICAgICAgICAgICAgICAgIGNvbnN0IHVuc2V0ID0ge307XG4gICAgICAgICAgICAgICAgbGV0IGV4aXN0aW5nSXRlbSA9IHVuc2V0O1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdmFsdWUgb2YgY3VycmVudFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaGVyKHZhbHVlLCBlbGVtZW50VmFsdWUpID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZ0l0ZW0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIDIuMS4gQ2hlY2tib3ggaXMgY2hlY2tlZCwgaXMgdGhlIGNvcnJlc3BvbmRpbmcgaXRlbSBpbiB0aGUgU2V0P1xuICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgLy8gaWYgY2hlY2tib3ggaXMgY2hlY2tlZCBhbmQgdGhlcmUncyBubyB2YWx1ZSBpbiB0aGUgZXhpc3RpbmcgU2V0XG4gICAgICAgICAgICAgICAgLy8gYWRkIHRoZSBjaGVja2JveCBtb2RlbC92YWx1ZSB0byB0aGUgU2V0XG4gICAgICAgICAgICAgICAgaWYgKGlzQ2hlY2tlZCAmJiBleGlzdGluZ0l0ZW0gPT09IHVuc2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIDIuMS4xLiBhZGQgdGhlIGN1cnJlbnQgbW9kZWwvdmFsdWUgdG8gdGhlIFNldFxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VmFsdWUuYWRkKGVsZW1lbnRWYWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFpc0NoZWNrZWQgJiYgZXhpc3RpbmdJdGVtICE9PSB1bnNldCkge1xuICAgICAgICAgICAgICAgICAgICAvLyAyLjIuMSBDaGVja2JveCBpcyB1bmNoZWNrZWQsIGNvcnJlc3BvbmRpbmcgaXMgaW4gdGhlIFNldFxuICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAvLyBpZiBjaGVja2JveCBpcyBub3QgY2hlY2tlZCwgYW5kIGZvdW5kIGEgbWF0Y2hpbmcgaXRlbSBpbiB0aGUgU2V0XG4gICAgICAgICAgICAgICAgICAgIC8vIGJhc2VkIG9uIHRoZSBjaGVja2JveCBtb2RlbC92YWx1ZVxuICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgdGhlIGV4aXN0aW5nIGl0ZW1cbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFZhbHVlLmRlbGV0ZShleGlzdGluZ0l0ZW0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyB3aGVuIGV4aXN0aW5nIHZhbHVlIGlzIGEgU2V0LFxuICAgICAgICAgICAgICAgIC8vIGRvIG5vdCBpbnZva2UgY2FsbGJhY2sgYXMgb25seSB0aGUgU2V0IGhhcyBiZWVuIG11dGF0ZWRcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0b1N0cmluZ1JldCA9PT0gJ1tvYmplY3QgTWFwXScpIHtcbiAgICAgICAgICAgICAgICAvLyBNYXAgYmluZGluZyBzdGVwcyBvbiBhIGNoYW5nZSBldmVudFxuICAgICAgICAgICAgICAgIC8vIDEuIGZpbmQgY29ycmVzcG9uZGluZyBpdGVtIGluIHRoZSBNYXAgYmFzZWQgb24gY3VycmVudCBtb2RlbC92YWx1ZSBhbmQgbWF0Y2hlclxuICAgICAgICAgICAgICAgIC8vIDIuIFNldCB0aGUgdmFsdWUgb2YgdGhlIGNvcnJlc3BvbmRpbmcgaXRlbSBpbiB0aGUgTWFwIGJhc2VkIG9uIGNoZWNrZWQgc3RhdGUgb2YgdGhlIGNoZWNrYm94XG4gICAgICAgICAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgICAgICAgICAgICAgIC8vIDEuIGZpbmQgdGhlIGNvcnJlc3BvbmRpbmcgaXRlbVxuICAgICAgICAgICAgICAgIGxldCBleGlzdGluZ0l0ZW07XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBwYWlyIG9mIGN1cnJlbnRWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJySXRlbSA9IHBhaXJbMF07XG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaGVyKGN1cnJJdGVtLCBlbGVtZW50VmFsdWUpID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBleGlzdGluZ0l0ZW0gPSBjdXJySXRlbTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIDIuIHNldCB0aGUgdmFsdWUgb2YgdGhlIGNvcnJlc3BvbmRpbmcgaXRlbSBpbiB0aGUgbWFwXG4gICAgICAgICAgICAgICAgLy8gaWYgY2hlY2tib3ggaXMgY2hlY2tlZCBhbmQgdGhlcmUncyBubyB2YWx1ZSBpbiB0aGUgZXhpc3RpbmcgTWFwXG4gICAgICAgICAgICAgICAgLy8gYWRkIHRoZSBjaGVja2JveCBtb2RlbC92YWx1ZSB0byB0aGUgTWFwIGFzIGtleSxcbiAgICAgICAgICAgICAgICAvLyBhbmQgdmFsdWUgd2lsbCBiZSBjaGVja2VkIHN0YXRlIG9mIHRoZSBjaGVja2JveFxuICAgICAgICAgICAgICAgIGN1cnJlbnRWYWx1ZS5zZXQoZXhpc3RpbmdJdGVtLCBpc0NoZWNrZWQpO1xuICAgICAgICAgICAgICAgIC8vIHdoZW4gZXhpc3RpbmcgdmFsdWUgaXMgYSBNYXAsXG4gICAgICAgICAgICAgICAgLy8gZG8gbm90IGludm9rZSBjYWxsYmFjayBhcyBvbmx5IHRoZSBNYXAgaGFzIGJlZW4gbXV0YXRlZFxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1cnJlbnRWYWx1ZSA9IGlzQ2hlY2tlZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc0NoZWNrZWQpIHtcbiAgICAgICAgICAgIGN1cnJlbnRWYWx1ZSA9IGVsZW1lbnRWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIGlmIGl0J3MgYSByYWRpbyBhbmQgaXQgaGFzIGJlZW4gdW5jaGVja2VkXG4gICAgICAgICAgICAvLyBkbyBub3RoaW5nLCBhcyB0aGUgcmFkaW8gdGhhdCB3YXMgY2hlY2tlZCB3aWxsIGZpcmUgY2hhbmdlIGV2ZW50IGFuZCBpdCB3aWxsIGJlIGhhbmRsZSB0aGVyZVxuICAgICAgICAgICAgLy8gYSByYWRpbyBjYW5ub3QgYmUgdW5jaGVja2VkIGJ5IHVzZXJcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmN1cnJlbnRWYWx1ZSA9IGN1cnJlbnRWYWx1ZTtcbiAgICAgICAgdGhpcy5jYWxsU3Vic2NyaWJlcnModGhpcy5jdXJyZW50VmFsdWUsIHRoaXMub2xkVmFsdWUsIDEzMTA3MiAvKiBmcm9tRE9NRXZlbnQgKi8gfCA1MjQyODggLyogYWxsb3dQdWJsaXNoUm91bmR0cmlwICovKTtcbiAgICB9XG4gICAgYmluZChmbGFncykge1xuICAgICAgICBpZiAodGhpcy5wZXJzaXN0ZW50RmxhZ3MgPT09IDUzNjg3MDkxMiAvKiBwZXJzaXN0ZW50VGFyZ2V0T2JzZXJ2ZXJRdWV1ZSAqLykge1xuICAgICAgICAgICAgaWYgKHRoaXMudGFzayAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMudGFzay5jYW5jZWwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudGFzayA9IHRoaXMuc2NoZWR1bGVyLnF1ZXVlUmVuZGVyVGFzaygoKSA9PiB0aGlzLmZsdXNoQ2hhbmdlcyhmbGFncyksIHsgcGVyc2lzdGVudDogdHJ1ZSB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmN1cnJlbnRWYWx1ZSA9IHRoaXMub2JqLmNoZWNrZWQ7XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnNcbiAgICB1bmJpbmQoZmxhZ3MpIHtcbiAgICAgICAgaWYgKHRoaXMuY29sbGVjdGlvbk9ic2VydmVyICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgIHRoaXMuY29sbGVjdGlvbk9ic2VydmVyLnVuc3Vic2NyaWJlRnJvbUNvbGxlY3Rpb24odGhpcyk7XG4gICAgICAgICAgICB0aGlzLmNvbGxlY3Rpb25PYnNlcnZlciA9IHZvaWQgMDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy52YWx1ZU9ic2VydmVyICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgIHRoaXMudmFsdWVPYnNlcnZlci51bnN1YnNjcmliZSh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy50YXNrICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLnRhc2suY2FuY2VsKCk7XG4gICAgICAgICAgICB0aGlzLnRhc2sgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN1YnNjcmliZShzdWJzY3JpYmVyKSB7XG4gICAgICAgIGlmICghdGhpcy5oYXNTdWJzY3JpYmVycygpKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZXIuc3Vic2NyaWJlKHRoaXMub2JqLCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFkZFN1YnNjcmliZXIoc3Vic2NyaWJlcik7XG4gICAgfVxuICAgIHVuc3Vic2NyaWJlKHN1YnNjcmliZXIpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVTdWJzY3JpYmVyKHN1YnNjcmliZXIpO1xuICAgICAgICBpZiAoIXRoaXMuaGFzU3Vic2NyaWJlcnMoKSkge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVyLmRpc3Bvc2UoKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5DaGVja2VkT2JzZXJ2ZXIgPSBfX2RlY29yYXRlKFtcbiAgICBzdWJzY3JpYmVyQ29sbGVjdGlvbigpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0LCBOdW1iZXIsIE9iamVjdCwgT2JqZWN0LCBPYmplY3RdKVxuXSwgQ2hlY2tlZE9ic2VydmVyKTtcbmV4cG9ydCB7IENoZWNrZWRPYnNlcnZlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2hlY2tlZC1vYnNlcnZlci5qcy5tYXAiLCJpbXBvcnQgeyBQTEFURk9STSB9IGZyb20gJ0BhdXJlbGlhL2tlcm5lbCc7XG5leHBvcnQgY2xhc3MgQ2xhc3NBdHRyaWJ1dGVBY2Nlc3NvciB7XG4gICAgY29uc3RydWN0b3Ioc2NoZWR1bGVyLCBmbGFncywgb2JqKSB7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgICAgICB0aGlzLmN1cnJlbnRWYWx1ZSA9ICcnO1xuICAgICAgICB0aGlzLm9sZFZhbHVlID0gJyc7XG4gICAgICAgIHRoaXMuZG9Ob3RDYWNoZSA9IHRydWU7XG4gICAgICAgIHRoaXMubmFtZUluZGV4ID0ge307XG4gICAgICAgIHRoaXMudmVyc2lvbiA9IDA7XG4gICAgICAgIHRoaXMuaGFzQ2hhbmdlcyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmlzQWN0aXZlID0gZmFsc2U7XG4gICAgICAgIHRoaXMudGFzayA9IG51bGw7XG4gICAgICAgIHRoaXMub2JqID0gb2JqO1xuICAgICAgICB0aGlzLnBlcnNpc3RlbnRGbGFncyA9IGZsYWdzICYgODA1MzA2MzgzIC8qIHRhcmdldE9ic2VydmVyRmxhZ3MgKi87XG4gICAgfVxuICAgIGdldFZhbHVlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50VmFsdWU7XG4gICAgfVxuICAgIHNldFZhbHVlKG5ld1ZhbHVlLCBmbGFncykge1xuICAgICAgICB0aGlzLmN1cnJlbnRWYWx1ZSA9IG5ld1ZhbHVlO1xuICAgICAgICB0aGlzLmhhc0NoYW5nZXMgPSBuZXdWYWx1ZSAhPT0gdGhpcy5vbGRWYWx1ZTtcbiAgICAgICAgaWYgKChmbGFncyAmIDQwOTYgLyogZnJvbUJpbmQgKi8pID4gMCB8fCB0aGlzLnBlcnNpc3RlbnRGbGFncyA9PT0gMjY4NDM1NDU2IC8qIG5vVGFyZ2V0T2JzZXJ2ZXJRdWV1ZSAqLykge1xuICAgICAgICAgICAgdGhpcy5mbHVzaENoYW5nZXMoZmxhZ3MpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMucGVyc2lzdGVudEZsYWdzICE9PSA1MzY4NzA5MTIgLyogcGVyc2lzdGVudFRhcmdldE9ic2VydmVyUXVldWUgKi8gJiYgdGhpcy50YXNrID09PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLnRhc2sgPSB0aGlzLnNjaGVkdWxlci5xdWV1ZVJlbmRlclRhc2soKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuZmx1c2hDaGFuZ2VzKGZsYWdzKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRhc2sgPSBudWxsO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZmx1c2hDaGFuZ2VzKGZsYWdzKSB7XG4gICAgICAgIGlmICh0aGlzLmhhc0NoYW5nZXMpIHtcbiAgICAgICAgICAgIHRoaXMuaGFzQ2hhbmdlcyA9IGZhbHNlO1xuICAgICAgICAgICAgY29uc3QgeyBjdXJyZW50VmFsdWUsIG5hbWVJbmRleCB9ID0gdGhpcztcbiAgICAgICAgICAgIGxldCB7IHZlcnNpb24gfSA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLm9sZFZhbHVlID0gY3VycmVudFZhbHVlO1xuICAgICAgICAgICAgY29uc3QgY2xhc3Nlc1RvQWRkID0gZ2V0Q2xhc3Nlc1RvQWRkKGN1cnJlbnRWYWx1ZSk7XG4gICAgICAgICAgICAvLyBHZXQgc3RyaW5ncyBzcGxpdCBvbiBhIHNwYWNlIG5vdCBpbmNsdWRpbmcgZW1wdGllc1xuICAgICAgICAgICAgaWYgKGNsYXNzZXNUb0FkZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRDbGFzc2VzQW5kVXBkYXRlSW5kZXgoY2xhc3Nlc1RvQWRkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudmVyc2lvbiArPSAxO1xuICAgICAgICAgICAgLy8gRmlyc3QgY2FsbCB0byBzZXRWYWx1ZT8gIFdlJ3JlIGRvbmUuXG4gICAgICAgICAgICBpZiAodmVyc2lvbiA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFJlbW92ZSBjbGFzc2VzIGZyb20gcHJldmlvdXMgdmVyc2lvbi5cbiAgICAgICAgICAgIHZlcnNpb24gLT0gMTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgbmFtZSBpbiBuYW1lSW5kZXgpIHtcbiAgICAgICAgICAgICAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChuYW1lSW5kZXgsIG5hbWUpIHx8IG5hbWVJbmRleFtuYW1lXSAhPT0gdmVyc2lvbikge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gVE9ETzogdGhpcyBoYXMgdGhlIHNpZGUtZWZmZWN0IHRoYXQgY2xhc3NlcyBhbHJlYWR5IHByZXNlbnQgd2hpY2ggYXJlIGFkZGVkIGFnYWluLFxuICAgICAgICAgICAgICAgIC8vIHdpbGwgYmUgcmVtb3ZlZCBpZiB0aGV5J3JlIG5vdCBwcmVzZW50IGluIHRoZSBuZXh0IHVwZGF0ZS5cbiAgICAgICAgICAgICAgICAvLyBCZXR0ZXIgd291bGQgYmUgZG8gaGF2ZSBzb21lIGNvbmZpZ3VyYWJpbGl0eSBmb3IgdGhpcyBiZWhhdmlvciwgYWxsb3dpbmcgdGhlIHVzZXIgdG9cbiAgICAgICAgICAgICAgICAvLyBkZWNpZGUgd2hldGhlciBpbml0aWFsIGNsYXNzZXMgYWx3YXlzIG5lZWQgdG8gYmUga2VwdCwgYWx3YXlzIHJlbW92ZWQsIG9yIHNvbWV0aGluZyBpbiBiZXR3ZWVuXG4gICAgICAgICAgICAgICAgdGhpcy5vYmouY2xhc3NMaXN0LnJlbW92ZShuYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBiaW5kKGZsYWdzKSB7XG4gICAgICAgIGlmICh0aGlzLnBlcnNpc3RlbnRGbGFncyA9PT0gNTM2ODcwOTEyIC8qIHBlcnNpc3RlbnRUYXJnZXRPYnNlcnZlclF1ZXVlICovKSB7XG4gICAgICAgICAgICBpZiAodGhpcy50YXNrICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50YXNrLmNhbmNlbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy50YXNrID0gdGhpcy5zY2hlZHVsZXIucXVldWVSZW5kZXJUYXNrKCgpID0+IHRoaXMuZmx1c2hDaGFuZ2VzKGZsYWdzKSwgeyBwZXJzaXN0ZW50OiB0cnVlIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHVuYmluZChmbGFncykge1xuICAgICAgICBpZiAodGhpcy50YXNrICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLnRhc2suY2FuY2VsKCk7XG4gICAgICAgICAgICB0aGlzLnRhc2sgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFkZENsYXNzZXNBbmRVcGRhdGVJbmRleChjbGFzc2VzKSB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSB0aGlzLm9iajtcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGlpID0gY2xhc3Nlcy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBjbGFzc05hbWUgPSBjbGFzc2VzW2ldO1xuICAgICAgICAgICAgaWYgKGNsYXNzTmFtZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubmFtZUluZGV4W2NsYXNzTmFtZV0gPSB0aGlzLnZlcnNpb247XG4gICAgICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRDbGFzc2VzVG9BZGQob2JqZWN0KSB7XG4gICAgZnVuY3Rpb24gc3BsaXRDbGFzc1N0cmluZyhjbGFzc1N0cmluZykge1xuICAgICAgICBjb25zdCBtYXRjaGVzID0gY2xhc3NTdHJpbmcubWF0Y2goL1xcUysvZyk7XG4gICAgICAgIGlmIChtYXRjaGVzID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gUExBVEZPUk0uZW1wdHlBcnJheTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWF0Y2hlcztcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBvYmplY3QgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiBzcGxpdENsYXNzU3RyaW5nKG9iamVjdCk7XG4gICAgfVxuICAgIGlmIChvYmplY3QgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICBjb25zdCBsZW4gPSBvYmplY3QubGVuZ3RoO1xuICAgICAgICBpZiAobGVuID4gMCkge1xuICAgICAgICAgICAgY29uc3QgY2xhc3NlcyA9IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgICAgICAgICAgICAgIGNsYXNzZXMucHVzaCguLi5nZXRDbGFzc2VzVG9BZGQob2JqZWN0W2ldKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY2xhc3NlcztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBQTEFURk9STS5lbXB0eUFycmF5O1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKG9iamVjdCBpbnN0YW5jZW9mIE9iamVjdCkge1xuICAgICAgICBjb25zdCBjbGFzc2VzID0gW107XG4gICAgICAgIGZvciAoY29uc3QgcHJvcGVydHkgaW4gb2JqZWN0KSB7XG4gICAgICAgICAgICAvLyBMZXQgbm9uIHR5cGljYWwgdmFsdWVzIGFsc28gZXZhbHVhdGUgdHJ1ZSBzbyBkaXNhYmxlIGJvb2wgY2hlY2tcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvc3RyaWN0LWJvb2xlYW4tZXhwcmVzc2lvbnMsIG5vLWV4dHJhLWJvb2xlYW4tY2FzdFxuICAgICAgICAgICAgaWYgKEJvb2xlYW4ob2JqZWN0W3Byb3BlcnR5XSkpIHtcbiAgICAgICAgICAgICAgICAvLyBXZSBtdXN0IGRvIHRoaXMgaW4gY2FzZSBvYmplY3QgcHJvcGVydHkgaGFzIGEgc3BhY2UgaW4gdGhlIG5hbWUgd2hpY2ggcmVzdWx0cyBpbiB0d28gY2xhc3Nlc1xuICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0eS5pbmNsdWRlcygnICcpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzZXMucHVzaCguLi5zcGxpdENsYXNzU3RyaW5nKHByb3BlcnR5KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjbGFzc2VzLnB1c2gocHJvcGVydHkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2xhc3NlcztcbiAgICB9XG4gICAgcmV0dXJuIFBMQVRGT1JNLmVtcHR5QXJyYXk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jbGFzcy1hdHRyaWJ1dGUtYWNjZXNzb3IuanMubWFwIiwiLyoqXG4gKiBBdHRyaWJ1dGUgYWNjZXNzb3IgZm9yIEhUTUwgZWxlbWVudHMuXG4gKiBOb3RlIHRoYXQgQXVyZWxpYSB3b3JrcyB3aXRoIHByb3BlcnRpZXMsIHNvIGluIGFsbCBjYXNlIGl0IHdpbGwgdHJ5IHRvIGFzc2lnbiB0byBwcm9wZXJ0eSBpbnN0ZWFkIG9mIGF0dHJpYnV0ZXMuXG4gKiBVbmxlc3MgdGhlIHByb3BlcnR5IGZhbGxzIGludG8gYSBzcGVjaWFsIHNldCwgdGhlbiBpdCB3aWxsIHVzZSBhdHRyaWJ1dGUgZm9yIGl0LlxuICpcbiAqIEBzZWUgRWxlbWVudFByb3BlcnR5QWNjZXNzb3JcbiAqL1xuZXhwb3J0IGNsYXNzIERhdGFBdHRyaWJ1dGVBY2Nlc3NvciB7XG4gICAgY29uc3RydWN0b3Ioc2NoZWR1bGVyLCBmbGFncywgb2JqLCBwcm9wZXJ0eUtleSkge1xuICAgICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgICAgdGhpcy5wcm9wZXJ0eUtleSA9IHByb3BlcnR5S2V5O1xuICAgICAgICB0aGlzLmN1cnJlbnRWYWx1ZSA9IG51bGw7XG4gICAgICAgIHRoaXMub2xkVmFsdWUgPSBudWxsO1xuICAgICAgICB0aGlzLmhhc0NoYW5nZXMgPSBmYWxzZTtcbiAgICAgICAgdGhpcy50YXNrID0gbnVsbDtcbiAgICAgICAgdGhpcy5vYmogPSBvYmo7XG4gICAgICAgIHRoaXMucGVyc2lzdGVudEZsYWdzID0gZmxhZ3MgJiA4MDUzMDYzODMgLyogdGFyZ2V0T2JzZXJ2ZXJGbGFncyAqLztcbiAgICB9XG4gICAgZ2V0VmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRWYWx1ZTtcbiAgICB9XG4gICAgc2V0VmFsdWUobmV3VmFsdWUsIGZsYWdzKSB7XG4gICAgICAgIHRoaXMuY3VycmVudFZhbHVlID0gbmV3VmFsdWU7XG4gICAgICAgIHRoaXMuaGFzQ2hhbmdlcyA9IG5ld1ZhbHVlICE9PSB0aGlzLm9sZFZhbHVlO1xuICAgICAgICBpZiAoKGZsYWdzICYgNDA5NiAvKiBmcm9tQmluZCAqLykgPiAwIHx8IHRoaXMucGVyc2lzdGVudEZsYWdzID09PSAyNjg0MzU0NTYgLyogbm9UYXJnZXRPYnNlcnZlclF1ZXVlICovKSB7XG4gICAgICAgICAgICB0aGlzLmZsdXNoQ2hhbmdlcyhmbGFncyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5wZXJzaXN0ZW50RmxhZ3MgIT09IDUzNjg3MDkxMiAvKiBwZXJzaXN0ZW50VGFyZ2V0T2JzZXJ2ZXJRdWV1ZSAqLyAmJiB0aGlzLnRhc2sgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMudGFzayA9IHRoaXMuc2NoZWR1bGVyLnF1ZXVlUmVuZGVyVGFzaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5mbHVzaENoYW5nZXMoZmxhZ3MpO1xuICAgICAgICAgICAgICAgIHRoaXMudGFzayA9IG51bGw7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmbHVzaENoYW5nZXMoZmxhZ3MpIHtcbiAgICAgICAgaWYgKHRoaXMuaGFzQ2hhbmdlcykge1xuICAgICAgICAgICAgdGhpcy5oYXNDaGFuZ2VzID0gZmFsc2U7XG4gICAgICAgICAgICBjb25zdCB7IGN1cnJlbnRWYWx1ZSB9ID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMub2xkVmFsdWUgPSBjdXJyZW50VmFsdWU7XG4gICAgICAgICAgICBpZiAoY3VycmVudFZhbHVlID09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgIHRoaXMub2JqLnJlbW92ZUF0dHJpYnV0ZSh0aGlzLnByb3BlcnR5S2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMub2JqLnNldEF0dHJpYnV0ZSh0aGlzLnByb3BlcnR5S2V5LCBjdXJyZW50VmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGJpbmQoZmxhZ3MpIHtcbiAgICAgICAgaWYgKHRoaXMucGVyc2lzdGVudEZsYWdzID09PSA1MzY4NzA5MTIgLyogcGVyc2lzdGVudFRhcmdldE9ic2VydmVyUXVldWUgKi8pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnRhc2sgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRhc2suY2FuY2VsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnRhc2sgPSB0aGlzLnNjaGVkdWxlci5xdWV1ZVJlbmRlclRhc2soKCkgPT4gdGhpcy5mbHVzaENoYW5nZXMoZmxhZ3MpLCB7IHBlcnNpc3RlbnQ6IHRydWUgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jdXJyZW50VmFsdWUgPSB0aGlzLm9sZFZhbHVlID0gdGhpcy5vYmouZ2V0QXR0cmlidXRlKHRoaXMucHJvcGVydHlLZXkpO1xuICAgIH1cbiAgICB1bmJpbmQoZmxhZ3MpIHtcbiAgICAgICAgaWYgKHRoaXMudGFzayAhPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy50YXNrLmNhbmNlbCgpO1xuICAgICAgICAgICAgdGhpcy50YXNrID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGEtYXR0cmlidXRlLWFjY2Vzc29yLmpzLm1hcCIsImltcG9ydCB7IF9fZGVjb3JhdGUsIF9fbWV0YWRhdGEgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IERPTSwgSU9ic2VydmVyTG9jYXRvciwgc3Vic2NyaWJlckNvbGxlY3Rpb24sIElTY2hlZHVsZXIsIH0gZnJvbSAnQGF1cmVsaWEvcnVudGltZSc7XG4vKipcbiAqIE9ic2VydmVyIGZvciBoYW5kbGluZyB0d28td2F5IGJpbmRpbmcgd2l0aCBhdHRyaWJ1dGVzXG4gKiBIYXMgZGlmZmVyZW50IHN0cmF0ZWd5IGZvciBjbGFzcy9zdHlsZSBhbmQgbm9ybWFsIGF0dHJpYnV0ZXNcbiAqIFRPRE86IGhhbmRsZSBTVkcvYXR0cmlidXRlcyB3aXRoIG5hbWVzcGFjZVxuICovXG5sZXQgQXR0cmlidXRlT2JzZXJ2ZXIgPSBjbGFzcyBBdHRyaWJ1dGVPYnNlcnZlciB7XG4gICAgY29uc3RydWN0b3Ioc2NoZWR1bGVyLCBmbGFncywgb2JzZXJ2ZXJMb2NhdG9yLCBvYmosIHByb3BlcnR5S2V5LCB0YXJnZXRBdHRyaWJ1dGUpIHtcbiAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJMb2NhdG9yID0gb2JzZXJ2ZXJMb2NhdG9yO1xuICAgICAgICB0aGlzLm9iaiA9IG9iajtcbiAgICAgICAgdGhpcy5wcm9wZXJ0eUtleSA9IHByb3BlcnR5S2V5O1xuICAgICAgICB0aGlzLnRhcmdldEF0dHJpYnV0ZSA9IHRhcmdldEF0dHJpYnV0ZTtcbiAgICAgICAgdGhpcy5jdXJyZW50VmFsdWUgPSBudWxsO1xuICAgICAgICB0aGlzLm9sZFZhbHVlID0gbnVsbDtcbiAgICAgICAgdGhpcy5oYXNDaGFuZ2VzID0gZmFsc2U7XG4gICAgICAgIHRoaXMudGFzayA9IG51bGw7XG4gICAgICAgIHRoaXMucGVyc2lzdGVudEZsYWdzID0gZmxhZ3MgJiA4MDUzMDYzODMgLyogdGFyZ2V0T2JzZXJ2ZXJGbGFncyAqLztcbiAgICB9XG4gICAgZ2V0VmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRWYWx1ZTtcbiAgICB9XG4gICAgc2V0VmFsdWUobmV3VmFsdWUsIGZsYWdzKSB7XG4gICAgICAgIHRoaXMuY3VycmVudFZhbHVlID0gbmV3VmFsdWU7XG4gICAgICAgIHRoaXMuaGFzQ2hhbmdlcyA9IG5ld1ZhbHVlICE9PSB0aGlzLm9sZFZhbHVlO1xuICAgICAgICBpZiAoKGZsYWdzICYgNDA5NiAvKiBmcm9tQmluZCAqLykgPiAwIHx8IHRoaXMucGVyc2lzdGVudEZsYWdzID09PSAyNjg0MzU0NTYgLyogbm9UYXJnZXRPYnNlcnZlclF1ZXVlICovKSB7XG4gICAgICAgICAgICB0aGlzLmZsdXNoQ2hhbmdlcyhmbGFncyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5wZXJzaXN0ZW50RmxhZ3MgIT09IDUzNjg3MDkxMiAvKiBwZXJzaXN0ZW50VGFyZ2V0T2JzZXJ2ZXJRdWV1ZSAqLyAmJiB0aGlzLnRhc2sgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMudGFzayA9IHRoaXMuc2NoZWR1bGVyLnF1ZXVlUmVuZGVyVGFzaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5mbHVzaENoYW5nZXMoZmxhZ3MpO1xuICAgICAgICAgICAgICAgIHRoaXMudGFzayA9IG51bGw7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmbHVzaENoYW5nZXMoZmxhZ3MpIHtcbiAgICAgICAgaWYgKHRoaXMuaGFzQ2hhbmdlcykge1xuICAgICAgICAgICAgdGhpcy5oYXNDaGFuZ2VzID0gZmFsc2U7XG4gICAgICAgICAgICBjb25zdCB7IGN1cnJlbnRWYWx1ZSB9ID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMub2xkVmFsdWUgPSBjdXJyZW50VmFsdWU7XG4gICAgICAgICAgICBzd2l0Y2ggKHRoaXMudGFyZ2V0QXR0cmlidXRlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnY2xhc3MnOiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdoeSBpcyBjbGFzcyBhdHRyaWJ1dGUgb2JzZXJ2ZXIgc2V0VmFsdWUgbG9vayBkaWZmZXJlbnQgd2l0aCBjbGFzcyBhdHRyaWJ1dGUgYWNjZXNzb3I/XG4gICAgICAgICAgICAgICAgICAgIC8vID09PT09PT09PT09PT09XG4gICAgICAgICAgICAgICAgICAgIC8vIEZvciBjbGFzcyBsaXN0XG4gICAgICAgICAgICAgICAgICAgIC8vIG5ld1ZhbHVlIGlzIHNpbXBseSBjaGVja2VkIGlmIHRydXRoeSBvciBmYWxzeVxuICAgICAgICAgICAgICAgICAgICAvLyBhbmQgdG9nZ2xlIHRoZSBjbGFzcyBhY2NvcmRpbmdseVxuICAgICAgICAgICAgICAgICAgICAvLyAtLSB0aGUgcnVsZSBvZiB0aGlzIGlzIHF1aXRlIGRpZmZlcmVudCB0byBub3JtYWwgYXR0cmlidXRlXG4gICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgIC8vIGZvciBjbGFzcyBhdHRyaWJ1dGUsIG9ic2VydmVyIGlzIGRpZmZlcmVudCBpbiBhIHdheSB0aGF0IGl0IG9ubHkgb2JzZXJ2ZSBhIHBhcnRpY3VsYXIgY2xhc3MgYXQgYSB0aW1lXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoaXMgYWxzbyBjb21lcyBmcm9tIHN5bnRheCwgd2hlcmUgaXQgd291bGQgdHlwaWNhbGx5IGJlIG15LWNsYXNzLmNsYXNzPVwic29tZVByb3BlcnR5XCJcbiAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgLy8gc28gdGhlcmUgaXMgbm8gbmVlZCBmb3Igc2VwYXJhdGluZyBjbGFzcyBieSBzcGFjZSBhbmQgYWRkIGFsbCBvZiB0aGVtIGxpa2UgY2xhc3MgYWNjZXNzb3JcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEhY3VycmVudFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9iai5jbGFzc0xpc3QuYWRkKHRoaXMucHJvcGVydHlLZXkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vYmouY2xhc3NMaXN0LnJlbW92ZSh0aGlzLnByb3BlcnR5S2V5KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSAnc3R5bGUnOiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBwcmlvcml0eSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICBsZXQgbmV3VmFsdWUgPSBjdXJyZW50VmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbmV3VmFsdWUgPT09ICdzdHJpbmcnICYmIG5ld1ZhbHVlLmluY2x1ZGVzKCchaW1wb3J0YW50JykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByaW9yaXR5ID0gJ2ltcG9ydGFudCc7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZSA9IG5ld1ZhbHVlLnJlcGxhY2UoJyFpbXBvcnRhbnQnLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vYmouc3R5bGUuc2V0UHJvcGVydHkodGhpcy5wcm9wZXJ0eUtleSwgbmV3VmFsdWUsIHByaW9yaXR5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFuZGxlTXV0YXRpb24obXV0YXRpb25SZWNvcmRzKSB7XG4gICAgICAgIGxldCBzaG91bGRQcm9jZXNzID0gZmFsc2U7XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IG11dGF0aW9uUmVjb3Jkcy5sZW5ndGg7IGlpID4gaTsgKytpKSB7XG4gICAgICAgICAgICBjb25zdCByZWNvcmQgPSBtdXRhdGlvblJlY29yZHNbaV07XG4gICAgICAgICAgICBpZiAocmVjb3JkLnR5cGUgPT09ICdhdHRyaWJ1dGVzJyAmJiByZWNvcmQuYXR0cmlidXRlTmFtZSA9PT0gdGhpcy5wcm9wZXJ0eUtleSkge1xuICAgICAgICAgICAgICAgIHNob3VsZFByb2Nlc3MgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChzaG91bGRQcm9jZXNzKSB7XG4gICAgICAgICAgICBsZXQgbmV3VmFsdWU7XG4gICAgICAgICAgICBzd2l0Y2ggKHRoaXMudGFyZ2V0QXR0cmlidXRlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnY2xhc3MnOlxuICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZSA9IHRoaXMub2JqLmNsYXNzTGlzdC5jb250YWlucyh0aGlzLnByb3BlcnR5S2V5KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnc3R5bGUnOlxuICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZSA9IHRoaXMub2JqLnN0eWxlLmdldFByb3BlcnR5VmFsdWUodGhpcy5wcm9wZXJ0eUtleSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5zdXBwb3J0ZWQgdGFyZ2V0QXR0cmlidXRlOiAke3RoaXMudGFyZ2V0QXR0cmlidXRlfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG5ld1ZhbHVlICE9PSB0aGlzLmN1cnJlbnRWYWx1ZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgY3VycmVudFZhbHVlIH0gPSB0aGlzO1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFZhbHVlID0gdGhpcy5vbGRWYWx1ZSA9IG5ld1ZhbHVlO1xuICAgICAgICAgICAgICAgIHRoaXMuaGFzQ2hhbmdlcyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuY2FsbFN1YnNjcmliZXJzKG5ld1ZhbHVlLCBjdXJyZW50VmFsdWUsIDEzMTA3MiAvKiBmcm9tRE9NRXZlbnQgKi8pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHN1YnNjcmliZShzdWJzY3JpYmVyKSB7XG4gICAgICAgIGlmICghdGhpcy5oYXNTdWJzY3JpYmVycygpKSB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRWYWx1ZSA9IHRoaXMub2xkVmFsdWUgPSB0aGlzLm9iai5nZXRBdHRyaWJ1dGUodGhpcy5wcm9wZXJ0eUtleSk7XG4gICAgICAgICAgICBzdGFydE9ic2VydmF0aW9uKHRoaXMub2JqLCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFkZFN1YnNjcmliZXIoc3Vic2NyaWJlcik7XG4gICAgfVxuICAgIHVuc3Vic2NyaWJlKHN1YnNjcmliZXIpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVTdWJzY3JpYmVyKHN1YnNjcmliZXIpO1xuICAgICAgICBpZiAoIXRoaXMuaGFzU3Vic2NyaWJlcnMoKSkge1xuICAgICAgICAgICAgc3RvcE9ic2VydmF0aW9uKHRoaXMub2JqLCB0aGlzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBiaW5kKGZsYWdzKSB7XG4gICAgICAgIGlmICh0aGlzLnBlcnNpc3RlbnRGbGFncyA9PT0gNTM2ODcwOTEyIC8qIHBlcnNpc3RlbnRUYXJnZXRPYnNlcnZlclF1ZXVlICovKSB7XG4gICAgICAgICAgICBpZiAodGhpcy50YXNrICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50YXNrLmNhbmNlbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy50YXNrID0gdGhpcy5zY2hlZHVsZXIucXVldWVSZW5kZXJUYXNrKCgpID0+IHRoaXMuZmx1c2hDaGFuZ2VzKGZsYWdzKSwgeyBwZXJzaXN0ZW50OiB0cnVlIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHVuYmluZChmbGFncykge1xuICAgICAgICBpZiAodGhpcy50YXNrICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLnRhc2suY2FuY2VsKCk7XG4gICAgICAgICAgICB0aGlzLnRhc2sgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxufTtcbkF0dHJpYnV0ZU9ic2VydmVyID0gX19kZWNvcmF0ZShbXG4gICAgc3Vic2NyaWJlckNvbGxlY3Rpb24oKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW09iamVjdCwgTnVtYmVyLCBPYmplY3QsIE9iamVjdCwgU3RyaW5nLCBTdHJpbmddKVxuXSwgQXR0cmlidXRlT2JzZXJ2ZXIpO1xuZXhwb3J0IHsgQXR0cmlidXRlT2JzZXJ2ZXIgfTtcbmNvbnN0IHN0YXJ0T2JzZXJ2YXRpb24gPSAoZWxlbWVudCwgc3Vic2NyaXB0aW9uKSA9PiB7XG4gICAgaWYgKGVsZW1lbnQuJGVNT2JzZXJ2ZXJzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgZWxlbWVudC4kZU1PYnNlcnZlcnMgPSBuZXcgU2V0KCk7XG4gICAgfVxuICAgIGlmIChlbGVtZW50LiRtT2JzZXJ2ZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBlbGVtZW50LiRtT2JzZXJ2ZXIgPSBET00uY3JlYXRlTm9kZU9ic2VydmVyKGVsZW1lbnQsIGhhbmRsZU11dGF0aW9uLCB7IGF0dHJpYnV0ZXM6IHRydWUgfSk7XG4gICAgfVxuICAgIGVsZW1lbnQuJGVNT2JzZXJ2ZXJzLmFkZChzdWJzY3JpcHRpb24pO1xufTtcbmNvbnN0IHN0b3BPYnNlcnZhdGlvbiA9IChlbGVtZW50LCBzdWJzY3JpcHRpb24pID0+IHtcbiAgICBjb25zdCAkZU1PYnNlcnZlcnMgPSBlbGVtZW50LiRlTU9ic2VydmVycztcbiAgICBpZiAoJGVNT2JzZXJ2ZXJzICYmICRlTU9ic2VydmVycy5kZWxldGUoc3Vic2NyaXB0aW9uKSkge1xuICAgICAgICBpZiAoJGVNT2JzZXJ2ZXJzLnNpemUgPT09IDApIHtcbiAgICAgICAgICAgIGVsZW1lbnQuJG1PYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgICBlbGVtZW50LiRtT2JzZXJ2ZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn07XG5jb25zdCBoYW5kbGVNdXRhdGlvbiA9IChtdXRhdGlvblJlY29yZHMpID0+IHtcbiAgICBtdXRhdGlvblJlY29yZHNbMF0udGFyZ2V0LiRlTU9ic2VydmVycy5mb3JFYWNoKGludm9rZUhhbmRsZU11dGF0aW9uLCBtdXRhdGlvblJlY29yZHMpO1xufTtcbmZ1bmN0aW9uIGludm9rZUhhbmRsZU11dGF0aW9uKHMpIHtcbiAgICBzLmhhbmRsZU11dGF0aW9uKHRoaXMpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZWxlbWVudC1hdHRyaWJ1dGUtb2JzZXJ2ZXIuanMubWFwIiwiLyoqXG4gKiBQcm9wZXJ0eSBhY2Nlc3NvciBmb3IgSFRNTCBFbGVtZW50cy5cbiAqIE5vdGUgdGhhdCBBdXJlbGlhIHdvcmtzIHdpdGggcHJvcGVydGllcywgc28gaW4gYWxsIGNhc2UgaXQgd2lsbCB0cnkgdG8gYXNzaWduIHRvIHByb3BlcnR5IGluc3RlYWQgb2YgYXR0cmlidXRlcy5cbiAqIFVubGVzcyB0aGUgcHJvcGVydHkgZmFsbHMgaW50byBhIHNwZWNpYWwgc2V0LCB0aGVuIGl0IHdpbGwgdXNlIGF0dHJpYnV0ZSBmb3IgaXQuXG4gKlxuICogQHNlZSBEYXRhQXR0cmlidXRlQWNjZXNzb3JcbiAqL1xuZXhwb3J0IGNsYXNzIEVsZW1lbnRQcm9wZXJ0eUFjY2Vzc29yIHtcbiAgICBjb25zdHJ1Y3RvcihzY2hlZHVsZXIsIGZsYWdzLCBvYmosIHByb3BlcnR5S2V5KSB7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgICAgICB0aGlzLm9iaiA9IG9iajtcbiAgICAgICAgdGhpcy5wcm9wZXJ0eUtleSA9IHByb3BlcnR5S2V5O1xuICAgICAgICB0aGlzLmN1cnJlbnRWYWx1ZSA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5vbGRWYWx1ZSA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5oYXNDaGFuZ2VzID0gZmFsc2U7XG4gICAgICAgIHRoaXMudGFzayA9IG51bGw7XG4gICAgICAgIHRoaXMucGVyc2lzdGVudEZsYWdzID0gZmxhZ3MgJiA4MDUzMDYzODMgLyogdGFyZ2V0T2JzZXJ2ZXJGbGFncyAqLztcbiAgICB9XG4gICAgZ2V0VmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRWYWx1ZTtcbiAgICB9XG4gICAgc2V0VmFsdWUobmV3VmFsdWUsIGZsYWdzKSB7XG4gICAgICAgIHRoaXMuY3VycmVudFZhbHVlID0gbmV3VmFsdWU7XG4gICAgICAgIHRoaXMuaGFzQ2hhbmdlcyA9IG5ld1ZhbHVlICE9PSB0aGlzLm9sZFZhbHVlO1xuICAgICAgICBpZiAoKGZsYWdzICYgNDA5NiAvKiBmcm9tQmluZCAqLykgPiAwIHx8IHRoaXMucGVyc2lzdGVudEZsYWdzID09PSAyNjg0MzU0NTYgLyogbm9UYXJnZXRPYnNlcnZlclF1ZXVlICovKSB7XG4gICAgICAgICAgICB0aGlzLmZsdXNoQ2hhbmdlcyhmbGFncyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5wZXJzaXN0ZW50RmxhZ3MgIT09IDUzNjg3MDkxMiAvKiBwZXJzaXN0ZW50VGFyZ2V0T2JzZXJ2ZXJRdWV1ZSAqLyAmJiB0aGlzLnRhc2sgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMudGFzayA9IHRoaXMuc2NoZWR1bGVyLnF1ZXVlUmVuZGVyVGFzaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5mbHVzaENoYW5nZXMoZmxhZ3MpO1xuICAgICAgICAgICAgICAgIHRoaXMudGFzayA9IG51bGw7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmbHVzaENoYW5nZXMoZmxhZ3MpIHtcbiAgICAgICAgaWYgKHRoaXMuaGFzQ2hhbmdlcykge1xuICAgICAgICAgICAgdGhpcy5oYXNDaGFuZ2VzID0gZmFsc2U7XG4gICAgICAgICAgICBjb25zdCB7IGN1cnJlbnRWYWx1ZSB9ID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMub2xkVmFsdWUgPSBjdXJyZW50VmFsdWU7XG4gICAgICAgICAgICB0aGlzLm9ialt0aGlzLnByb3BlcnR5S2V5XSA9IGN1cnJlbnRWYWx1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBiaW5kKGZsYWdzKSB7XG4gICAgICAgIGlmICh0aGlzLnBlcnNpc3RlbnRGbGFncyA9PT0gNTM2ODcwOTEyIC8qIHBlcnNpc3RlbnRUYXJnZXRPYnNlcnZlclF1ZXVlICovKSB7XG4gICAgICAgICAgICBpZiAodGhpcy50YXNrICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50YXNrLmNhbmNlbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy50YXNrID0gdGhpcy5zY2hlZHVsZXIucXVldWVSZW5kZXJUYXNrKCgpID0+IHRoaXMuZmx1c2hDaGFuZ2VzKGZsYWdzKSwgeyBwZXJzaXN0ZW50OiB0cnVlIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY3VycmVudFZhbHVlID0gdGhpcy5vbGRWYWx1ZSA9IHRoaXMub2JqW3RoaXMucHJvcGVydHlLZXldO1xuICAgIH1cbiAgICB1bmJpbmQoZmxhZ3MpIHtcbiAgICAgICAgaWYgKHRoaXMudGFzayAhPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy50YXNrLmNhbmNlbCgpO1xuICAgICAgICAgICAgdGhpcy50YXNrID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVsZW1lbnQtcHJvcGVydHktYWNjZXNzb3IuanMubWFwIiwiaW1wb3J0IHsgREkgfSBmcm9tICdAYXVyZWxpYS9rZXJuZWwnO1xuaW1wb3J0IHsgRGVsZWdhdGlvblN0cmF0ZWd5IH0gZnJvbSAnQGF1cmVsaWEvcnVudGltZSc7XG4vLyBOb3RlOiBwYXRoIGFuZCBkZWVwUGF0aCBhcmUgZGVzaWduZWQgdG8gaGFuZGxlIHYwIGFuZCB2MSBzaGFkb3cgZG9tIHNwZWNzIHJlc3BlY3RpdmVseVxuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbmRPcmlnaW5hbEV2ZW50VGFyZ2V0KGV2ZW50KSB7XG4gICAgcmV0dXJuIChldmVudC5jb21wb3NlZFBhdGggJiYgZXZlbnQuY29tcG9zZWRQYXRoKClbMF0pIHx8IChldmVudC5kZWVwUGF0aCAmJiBldmVudC5kZWVwUGF0aCgpWzBdKSB8fCAoZXZlbnQucGF0aCAmJiBldmVudC5wYXRoWzBdKSB8fCBldmVudC50YXJnZXQ7XG59XG5mdW5jdGlvbiBzdG9wUHJvcGFnYXRpb24oKSB7XG4gICAgdGhpcy5zdGFuZGFyZFN0b3BQcm9wYWdhdGlvbigpO1xuICAgIHRoaXMucHJvcGFnYXRpb25TdG9wcGVkID0gdHJ1ZTtcbn1cbmZ1bmN0aW9uIGhhbmRsZUNhcHR1cmVkRXZlbnQoZXZlbnQpIHtcbiAgICBldmVudC5wcm9wYWdhdGlvblN0b3BwZWQgPSBmYWxzZTtcbiAgICBsZXQgdGFyZ2V0ID0gZmluZE9yaWdpbmFsRXZlbnRUYXJnZXQoZXZlbnQpO1xuICAgIGNvbnN0IG9yZGVyZWRDYWxsYmFja3MgPSBbXTtcbiAgICAvKipcbiAgICAgKiBEdXJpbmcgY2FwdHVyaW5nIHBoYXNlLCBldmVudCAnYnViYmxlcycgZG93biBmcm9tIHBhcmVudC4gTmVlZHMgdG8gcmVvcmRlciBjYWxsYmFjayBmcm9tIHJvb3QgZG93biB0byB0YXJnZXRcbiAgICAgKi9cbiAgICB3aGlsZSAodGFyZ2V0KSB7XG4gICAgICAgIGlmICh0YXJnZXQuY2FwdHVyZWRDYWxsYmFja3MpIHtcbiAgICAgICAgICAgIGNvbnN0IGNhbGxiYWNrID0gdGFyZ2V0LmNhcHR1cmVkQ2FsbGJhY2tzW2V2ZW50LnR5cGVdO1xuICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50LnN0b3BQcm9wYWdhdGlvbiAhPT0gc3RvcFByb3BhZ2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnN0YW5kYXJkU3RvcFByb3BhZ2F0aW9uID0gZXZlbnQuc3RvcFByb3BhZ2F0aW9uO1xuICAgICAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24gPSBzdG9wUHJvcGFnYXRpb247XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG9yZGVyZWRDYWxsYmFja3MucHVzaChjYWxsYmFjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGFyZ2V0ID0gdGFyZ2V0LnBhcmVudE5vZGU7XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSBvcmRlcmVkQ2FsbGJhY2tzLmxlbmd0aCAtIDE7IGkgPj0gMCAmJiAhZXZlbnQucHJvcGFnYXRpb25TdG9wcGVkOyBpLS0pIHtcbiAgICAgICAgY29uc3Qgb3JkZXJlZENhbGxiYWNrID0gb3JkZXJlZENhbGxiYWNrc1tpXTtcbiAgICAgICAgaWYgKCdoYW5kbGVFdmVudCcgaW4gb3JkZXJlZENhbGxiYWNrKSB7XG4gICAgICAgICAgICBvcmRlcmVkQ2FsbGJhY2suaGFuZGxlRXZlbnQoZXZlbnQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb3JkZXJlZENhbGxiYWNrKGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGhhbmRsZURlbGVnYXRlZEV2ZW50KGV2ZW50KSB7XG4gICAgZXZlbnQucHJvcGFnYXRpb25TdG9wcGVkID0gZmFsc2U7XG4gICAgbGV0IHRhcmdldCA9IGZpbmRPcmlnaW5hbEV2ZW50VGFyZ2V0KGV2ZW50KTtcbiAgICB3aGlsZSAodGFyZ2V0ICYmICFldmVudC5wcm9wYWdhdGlvblN0b3BwZWQpIHtcbiAgICAgICAgaWYgKHRhcmdldC5kZWxlZ2F0ZWRDYWxsYmFja3MpIHtcbiAgICAgICAgICAgIGNvbnN0IGNhbGxiYWNrID0gdGFyZ2V0LmRlbGVnYXRlZENhbGxiYWNrc1tldmVudC50eXBlXTtcbiAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIGlmIChldmVudC5zdG9wUHJvcGFnYXRpb24gIT09IHN0b3BQcm9wYWdhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBldmVudC5zdGFuZGFyZFN0b3BQcm9wYWdhdGlvbiA9IGV2ZW50LnN0b3BQcm9wYWdhdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uID0gc3RvcFByb3BhZ2F0aW9uO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoJ2hhbmRsZUV2ZW50JyBpbiBjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjay5oYW5kbGVFdmVudChldmVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhldmVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRhcmdldCA9IHRhcmdldC5wYXJlbnROb2RlO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBMaXN0ZW5lclRyYWNrZXIge1xuICAgIGNvbnN0cnVjdG9yKGRvbSwgZXZlbnROYW1lLCBsaXN0ZW5lciwgY2FwdHVyZSkge1xuICAgICAgICB0aGlzLmRvbSA9IGRvbTtcbiAgICAgICAgdGhpcy5ldmVudE5hbWUgPSBldmVudE5hbWU7XG4gICAgICAgIHRoaXMubGlzdGVuZXIgPSBsaXN0ZW5lcjtcbiAgICAgICAgdGhpcy5jYXB0dXJlID0gY2FwdHVyZTtcbiAgICAgICAgdGhpcy5jb3VudCA9IDA7XG4gICAgfVxuICAgIGluY3JlbWVudCgpIHtcbiAgICAgICAgdGhpcy5jb3VudCsrO1xuICAgICAgICBpZiAodGhpcy5jb3VudCA9PT0gMSkge1xuICAgICAgICAgICAgdGhpcy5kb20uYWRkRXZlbnRMaXN0ZW5lcih0aGlzLmV2ZW50TmFtZSwgdGhpcy5saXN0ZW5lciwgbnVsbCwgdGhpcy5jYXB0dXJlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBkZWNyZW1lbnQoKSB7XG4gICAgICAgIHRoaXMuY291bnQtLTtcbiAgICAgICAgaWYgKHRoaXMuY291bnQgPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuZG9tLnJlbW92ZUV2ZW50TGlzdGVuZXIodGhpcy5ldmVudE5hbWUsIHRoaXMubGlzdGVuZXIsIG51bGwsIHRoaXMuY2FwdHVyZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyogQGludGVybmFsICovXG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuY291bnQgPiAwKSB7XG4gICAgICAgICAgICB0aGlzLmNvdW50ID0gMDtcbiAgICAgICAgICAgIHRoaXMuZG9tLnJlbW92ZUV2ZW50TGlzdGVuZXIodGhpcy5ldmVudE5hbWUsIHRoaXMubGlzdGVuZXIsIG51bGwsIHRoaXMuY2FwdHVyZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIEVuYWJsZSBkaXNwb3NlKCkgcGF0dGVybiBmb3IgYGRlbGVnYXRlYCAmIGBjYXB0dXJlYCBjb21tYW5kc1xuICovXG5leHBvcnQgY2xhc3MgRGVsZWdhdGVPckNhcHR1cmVTdWJzY3JpcHRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGVudHJ5LCBsb29rdXAsIHRhcmdldEV2ZW50LCBjYWxsYmFjaykge1xuICAgICAgICB0aGlzLmVudHJ5ID0gZW50cnk7XG4gICAgICAgIHRoaXMubG9va3VwID0gbG9va3VwO1xuICAgICAgICB0aGlzLnRhcmdldEV2ZW50ID0gdGFyZ2V0RXZlbnQ7XG4gICAgICAgIGxvb2t1cFt0YXJnZXRFdmVudF0gPSBjYWxsYmFjaztcbiAgICB9XG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgdGhpcy5lbnRyeS5kZWNyZW1lbnQoKTtcbiAgICAgICAgdGhpcy5sb29rdXBbdGhpcy50YXJnZXRFdmVudF0gPSBudWxsO1xuICAgIH1cbn1cbi8qKlxuICogRW5hYmxlIGRpc3Bvc2UoKSBwYXR0ZXJuIGZvciBhZGRFdmVudExpc3RlbmVyIGZvciBgdHJpZ2dlcmBcbiAqL1xuZXhwb3J0IGNsYXNzIFRyaWdnZXJTdWJzY3JpcHRpb24ge1xuICAgIGNvbnN0cnVjdG9yKGRvbSwgdGFyZ2V0LCB0YXJnZXRFdmVudCwgY2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5kb20gPSBkb207XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xuICAgICAgICB0aGlzLnRhcmdldEV2ZW50ID0gdGFyZ2V0RXZlbnQ7XG4gICAgICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICAgICAgZG9tLmFkZEV2ZW50TGlzdGVuZXIodGFyZ2V0RXZlbnQsIGNhbGxiYWNrLCB0YXJnZXQpO1xuICAgIH1cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICB0aGlzLmRvbS5yZW1vdmVFdmVudExpc3RlbmVyKHRoaXMudGFyZ2V0RXZlbnQsIHRoaXMuY2FsbGJhY2ssIHRoaXMudGFyZ2V0KTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgRXZlbnRTdWJzY3JpYmVyIHtcbiAgICBjb25zdHJ1Y3Rvcihkb20sIGV2ZW50cykge1xuICAgICAgICB0aGlzLmRvbSA9IGRvbTtcbiAgICAgICAgdGhpcy5ldmVudHMgPSBldmVudHM7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gbnVsbDtcbiAgICAgICAgdGhpcy5oYW5kbGVyID0gbnVsbDtcbiAgICB9XG4gICAgc3Vic2NyaWJlKG5vZGUsIGNhbGxiYWNrT3JMaXN0ZW5lcikge1xuICAgICAgICB0aGlzLnRhcmdldCA9IG5vZGU7XG4gICAgICAgIHRoaXMuaGFuZGxlciA9IGNhbGxiYWNrT3JMaXN0ZW5lcjtcbiAgICAgICAgY29uc3QgYWRkID0gdGhpcy5kb20uYWRkRXZlbnRMaXN0ZW5lcjtcbiAgICAgICAgY29uc3QgZXZlbnRzID0gdGhpcy5ldmVudHM7XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IGV2ZW50cy5sZW5ndGg7IGlpID4gaTsgKytpKSB7XG4gICAgICAgICAgICBhZGQoZXZlbnRzW2ldLCBjYWxsYmFja09yTGlzdGVuZXIsIG5vZGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSB0aGlzLnRhcmdldDtcbiAgICAgICAgY29uc3QgY2FsbGJhY2tPckxpc3RlbmVyID0gdGhpcy5oYW5kbGVyO1xuICAgICAgICBjb25zdCBldmVudHMgPSB0aGlzLmV2ZW50cztcbiAgICAgICAgY29uc3QgZG9tID0gdGhpcy5kb207XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IGV2ZW50cy5sZW5ndGg7IGlpID4gaTsgKytpKSB7XG4gICAgICAgICAgICBkb20ucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudHNbaV0sIGNhbGxiYWNrT3JMaXN0ZW5lciwgbm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50YXJnZXQgPSB0aGlzLmhhbmRsZXIgPSBudWxsO1xuICAgIH1cbn1cbmV4cG9ydCBjb25zdCBJRXZlbnRNYW5hZ2VyID0gREkuY3JlYXRlSW50ZXJmYWNlKCdJRXZlbnRNYW5hZ2VyJykud2l0aERlZmF1bHQoeCA9PiB4LnNpbmdsZXRvbihFdmVudE1hbmFnZXIpKTtcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCBjbGFzcyBFdmVudE1hbmFnZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmRlbGVnYXRlZEhhbmRsZXJzID0ge307XG4gICAgICAgIHRoaXMuY2FwdHVyZWRIYW5kbGVycyA9IHt9O1xuICAgIH1cbiAgICBhZGRFdmVudExpc3RlbmVyKGRvbSwgdGFyZ2V0LCB0YXJnZXRFdmVudCwgY2FsbGJhY2tPckxpc3RlbmVyLCBzdHJhdGVneSkge1xuICAgICAgICBsZXQgZGVsZWdhdGVkSGFuZGxlcnM7XG4gICAgICAgIGxldCBjYXB0dXJlZEhhbmRsZXJzO1xuICAgICAgICBsZXQgaGFuZGxlckVudHJ5O1xuICAgICAgICBpZiAoc3RyYXRlZ3kgPT09IERlbGVnYXRpb25TdHJhdGVneS5idWJibGluZykge1xuICAgICAgICAgICAgZGVsZWdhdGVkSGFuZGxlcnMgPSB0aGlzLmRlbGVnYXRlZEhhbmRsZXJzO1xuICAgICAgICAgICAgaGFuZGxlckVudHJ5ID0gZGVsZWdhdGVkSGFuZGxlcnNbdGFyZ2V0RXZlbnRdIHx8IChkZWxlZ2F0ZWRIYW5kbGVyc1t0YXJnZXRFdmVudF0gPSBuZXcgTGlzdGVuZXJUcmFja2VyKGRvbSwgdGFyZ2V0RXZlbnQsIGhhbmRsZURlbGVnYXRlZEV2ZW50LCBmYWxzZSkpO1xuICAgICAgICAgICAgaGFuZGxlckVudHJ5LmluY3JlbWVudCgpO1xuICAgICAgICAgICAgY29uc3QgZGVsZWdhdGVkQ2FsbGJhY2tzID0gdGFyZ2V0LmRlbGVnYXRlZENhbGxiYWNrcyB8fCAodGFyZ2V0LmRlbGVnYXRlZENhbGxiYWNrcyA9IHt9KTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGVsZWdhdGVPckNhcHR1cmVTdWJzY3JpcHRpb24oaGFuZGxlckVudHJ5LCBkZWxlZ2F0ZWRDYWxsYmFja3MsIHRhcmdldEV2ZW50LCBjYWxsYmFja09yTGlzdGVuZXIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdHJhdGVneSA9PT0gRGVsZWdhdGlvblN0cmF0ZWd5LmNhcHR1cmluZykge1xuICAgICAgICAgICAgY2FwdHVyZWRIYW5kbGVycyA9IHRoaXMuY2FwdHVyZWRIYW5kbGVycztcbiAgICAgICAgICAgIGhhbmRsZXJFbnRyeSA9IGNhcHR1cmVkSGFuZGxlcnNbdGFyZ2V0RXZlbnRdIHx8IChjYXB0dXJlZEhhbmRsZXJzW3RhcmdldEV2ZW50XSA9IG5ldyBMaXN0ZW5lclRyYWNrZXIoZG9tLCB0YXJnZXRFdmVudCwgaGFuZGxlQ2FwdHVyZWRFdmVudCwgdHJ1ZSkpO1xuICAgICAgICAgICAgaGFuZGxlckVudHJ5LmluY3JlbWVudCgpO1xuICAgICAgICAgICAgY29uc3QgY2FwdHVyZWRDYWxsYmFja3MgPSB0YXJnZXQuY2FwdHVyZWRDYWxsYmFja3MgfHwgKHRhcmdldC5jYXB0dXJlZENhbGxiYWNrcyA9IHt9KTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGVsZWdhdGVPckNhcHR1cmVTdWJzY3JpcHRpb24oaGFuZGxlckVudHJ5LCBjYXB0dXJlZENhbGxiYWNrcywgdGFyZ2V0RXZlbnQsIGNhbGxiYWNrT3JMaXN0ZW5lcik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBUcmlnZ2VyU3Vic2NyaXB0aW9uKGRvbSwgdGFyZ2V0LCB0YXJnZXRFdmVudCwgY2FsbGJhY2tPckxpc3RlbmVyKTtcbiAgICB9XG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgbGV0IGtleTtcbiAgICAgICAgY29uc3QgeyBkZWxlZ2F0ZWRIYW5kbGVycywgY2FwdHVyZWRIYW5kbGVycyB9ID0gdGhpcztcbiAgICAgICAgZm9yIChrZXkgaW4gZGVsZWdhdGVkSGFuZGxlcnMpIHtcbiAgICAgICAgICAgIGRlbGVnYXRlZEhhbmRsZXJzW2tleV0uZGlzcG9zZSgpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoa2V5IGluIGNhcHR1cmVkSGFuZGxlcnMpIHtcbiAgICAgICAgICAgIGNhcHR1cmVkSGFuZGxlcnNba2V5XS5kaXNwb3NlKCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ldmVudC1tYW5hZ2VyLmpzLm1hcCIsImltcG9ydCB7IF9fZGVjb3JhdGUsIF9fbWV0YWRhdGEsIF9fcGFyYW0gfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IFJlZ2lzdHJhdGlvbiB9IGZyb20gJ0BhdXJlbGlhL2tlcm5lbCc7XG5pbXBvcnQgeyBJRE9NLCBJVGFyZ2V0QWNjZXNzb3JMb2NhdG9yLCBJVGFyZ2V0T2JzZXJ2ZXJMb2NhdG9yLCBTZXR0ZXJPYnNlcnZlciB9IGZyb20gJ0BhdXJlbGlhL3J1bnRpbWUnO1xuaW1wb3J0IHsgQXR0cmlidXRlTlNBY2Nlc3NvciB9IGZyb20gJy4vYXR0cmlidXRlLW5zLWFjY2Vzc29yJztcbmltcG9ydCB7IENoZWNrZWRPYnNlcnZlciB9IGZyb20gJy4vY2hlY2tlZC1vYnNlcnZlcic7XG5pbXBvcnQgeyBDbGFzc0F0dHJpYnV0ZUFjY2Vzc29yIH0gZnJvbSAnLi9jbGFzcy1hdHRyaWJ1dGUtYWNjZXNzb3InO1xuaW1wb3J0IHsgRGF0YUF0dHJpYnV0ZUFjY2Vzc29yIH0gZnJvbSAnLi9kYXRhLWF0dHJpYnV0ZS1hY2Nlc3Nvcic7XG5pbXBvcnQgeyBFbGVtZW50UHJvcGVydHlBY2Nlc3NvciB9IGZyb20gJy4vZWxlbWVudC1wcm9wZXJ0eS1hY2Nlc3Nvcic7XG5pbXBvcnQgeyBFdmVudFN1YnNjcmliZXIgfSBmcm9tICcuL2V2ZW50LW1hbmFnZXInO1xuaW1wb3J0IHsgU2VsZWN0VmFsdWVPYnNlcnZlciB9IGZyb20gJy4vc2VsZWN0LXZhbHVlLW9ic2VydmVyJztcbmltcG9ydCB7IFN0eWxlQXR0cmlidXRlQWNjZXNzb3IgfSBmcm9tICcuL3N0eWxlLWF0dHJpYnV0ZS1hY2Nlc3Nvcic7XG5pbXBvcnQgeyBJU1ZHQW5hbHl6ZXIgfSBmcm9tICcuL3N2Zy1hbmFseXplcic7XG5pbXBvcnQgeyBWYWx1ZUF0dHJpYnV0ZU9ic2VydmVyIH0gZnJvbSAnLi92YWx1ZS1hdHRyaWJ1dGUtb2JzZXJ2ZXInO1xuLy8gaHR0cHM6Ly9pbmZyYS5zcGVjLndoYXR3Zy5vcmcvI25hbWVzcGFjZXNcbmNvbnN0IGh0bWxOUyA9ICdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sJztcbmNvbnN0IG1hdGhtbE5TID0gJ2h0dHA6Ly93d3cudzMub3JnLzE5OTgvTWF0aC9NYXRoTUwnO1xuY29uc3Qgc3ZnTlMgPSAnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnO1xuY29uc3QgeGxpbmtOUyA9ICdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJztcbmNvbnN0IHhtbE5TID0gJ2h0dHA6Ly93d3cudzMub3JnL1hNTC8xOTk4L25hbWVzcGFjZSc7XG5jb25zdCB4bWxuc05TID0gJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAveG1sbnMvJztcbi8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3N5bnRheC5odG1sI2F0dHJpYnV0ZXMtMlxuY29uc3QgbnNBdHRyaWJ1dGVzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKG51bGwpLCB7XG4gICAgJ3hsaW5rOmFjdHVhdGUnOiBbJ2FjdHVhdGUnLCB4bGlua05TXSxcbiAgICAneGxpbms6YXJjcm9sZSc6IFsnYXJjcm9sZScsIHhsaW5rTlNdLFxuICAgICd4bGluazpocmVmJzogWydocmVmJywgeGxpbmtOU10sXG4gICAgJ3hsaW5rOnJvbGUnOiBbJ3JvbGUnLCB4bGlua05TXSxcbiAgICAneGxpbms6c2hvdyc6IFsnc2hvdycsIHhsaW5rTlNdLFxuICAgICd4bGluazp0aXRsZSc6IFsndGl0bGUnLCB4bGlua05TXSxcbiAgICAneGxpbms6dHlwZSc6IFsndHlwZScsIHhsaW5rTlNdLFxuICAgICd4bWw6bGFuZyc6IFsnbGFuZycsIHhtbE5TXSxcbiAgICAneG1sOnNwYWNlJzogWydzcGFjZScsIHhtbE5TXSxcbiAgICAneG1sbnMnOiBbJ3htbG5zJywgeG1sbnNOU10sXG4gICAgJ3htbG5zOnhsaW5rJzogWyd4bGluaycsIHhtbG5zTlNdLFxufSk7XG5jb25zdCBpbnB1dEV2ZW50cyA9IFsnY2hhbmdlJywgJ2lucHV0J107XG5jb25zdCBzZWxlY3RFdmVudHMgPSBbJ2NoYW5nZSddO1xuY29uc3QgY29udGVudEV2ZW50cyA9IFsnY2hhbmdlJywgJ2lucHV0JywgJ2JsdXInLCAna2V5dXAnLCAncGFzdGUnXTtcbmNvbnN0IHNjcm9sbEV2ZW50cyA9IFsnc2Nyb2xsJ107XG5jb25zdCBvdmVycmlkZVByb3BzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKG51bGwpLCB7XG4gICAgJ2NsYXNzJzogdHJ1ZSxcbiAgICAnc3R5bGUnOiB0cnVlLFxuICAgICdjc3MnOiB0cnVlLFxuICAgICdjaGVja2VkJzogdHJ1ZSxcbiAgICAndmFsdWUnOiB0cnVlLFxuICAgICdtb2RlbCc6IHRydWUsXG4gICAgJ3hsaW5rOmFjdHVhdGUnOiB0cnVlLFxuICAgICd4bGluazphcmNyb2xlJzogdHJ1ZSxcbiAgICAneGxpbms6aHJlZic6IHRydWUsXG4gICAgJ3hsaW5rOnJvbGUnOiB0cnVlLFxuICAgICd4bGluazpzaG93JzogdHJ1ZSxcbiAgICAneGxpbms6dGl0bGUnOiB0cnVlLFxuICAgICd4bGluazp0eXBlJzogdHJ1ZSxcbiAgICAneG1sOmxhbmcnOiB0cnVlLFxuICAgICd4bWw6c3BhY2UnOiB0cnVlLFxuICAgICd4bWxucyc6IHRydWUsXG4gICAgJ3htbG5zOnhsaW5rJzogdHJ1ZSxcbn0pO1xubGV0IFRhcmdldE9ic2VydmVyTG9jYXRvciA9IGNsYXNzIFRhcmdldE9ic2VydmVyTG9jYXRvciB7XG4gICAgY29uc3RydWN0b3IoZG9tLCBzdmdBbmFseXplcikge1xuICAgICAgICB0aGlzLmRvbSA9IGRvbTtcbiAgICAgICAgdGhpcy5zdmdBbmFseXplciA9IHN2Z0FuYWx5emVyO1xuICAgIH1cbiAgICBzdGF0aWMgcmVnaXN0ZXIoY29udGFpbmVyKSB7XG4gICAgICAgIHJldHVybiBSZWdpc3RyYXRpb24uc2luZ2xldG9uKElUYXJnZXRPYnNlcnZlckxvY2F0b3IsIHRoaXMpLnJlZ2lzdGVyKGNvbnRhaW5lcik7XG4gICAgfVxuICAgIGdldE9ic2VydmVyKGZsYWdzLCBzY2hlZHVsZXIsIGxpZmVjeWNsZSwgb2JzZXJ2ZXJMb2NhdG9yLCBvYmosIHByb3BlcnR5TmFtZSkge1xuICAgICAgICBzd2l0Y2ggKHByb3BlcnR5TmFtZSkge1xuICAgICAgICAgICAgY2FzZSAnY2hlY2tlZCc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDaGVja2VkT2JzZXJ2ZXIoc2NoZWR1bGVyLCBmbGFncywgbGlmZWN5Y2xlLCBuZXcgRXZlbnRTdWJzY3JpYmVyKHRoaXMuZG9tLCBpbnB1dEV2ZW50cyksIG9iaik7XG4gICAgICAgICAgICBjYXNlICd2YWx1ZSc6XG4gICAgICAgICAgICAgICAgaWYgKG9iai50YWdOYW1lID09PSAnU0VMRUNUJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFNlbGVjdFZhbHVlT2JzZXJ2ZXIoc2NoZWR1bGVyLCBmbGFncywgb2JzZXJ2ZXJMb2NhdG9yLCB0aGlzLmRvbSwgbmV3IEV2ZW50U3Vic2NyaWJlcih0aGlzLmRvbSwgc2VsZWN0RXZlbnRzKSwgb2JqKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBWYWx1ZUF0dHJpYnV0ZU9ic2VydmVyKHNjaGVkdWxlciwgZmxhZ3MsIG5ldyBFdmVudFN1YnNjcmliZXIodGhpcy5kb20sIGlucHV0RXZlbnRzKSwgb2JqLCBwcm9wZXJ0eU5hbWUpO1xuICAgICAgICAgICAgY2FzZSAnZmlsZXMnOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVmFsdWVBdHRyaWJ1dGVPYnNlcnZlcihzY2hlZHVsZXIsIGZsYWdzLCBuZXcgRXZlbnRTdWJzY3JpYmVyKHRoaXMuZG9tLCBpbnB1dEV2ZW50cyksIG9iaiwgcHJvcGVydHlOYW1lKTtcbiAgICAgICAgICAgIGNhc2UgJ3RleHRDb250ZW50JzpcbiAgICAgICAgICAgIGNhc2UgJ2lubmVySFRNTCc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBWYWx1ZUF0dHJpYnV0ZU9ic2VydmVyKHNjaGVkdWxlciwgZmxhZ3MsIG5ldyBFdmVudFN1YnNjcmliZXIodGhpcy5kb20sIGNvbnRlbnRFdmVudHMpLCBvYmosIHByb3BlcnR5TmFtZSk7XG4gICAgICAgICAgICBjYXNlICdzY3JvbGxUb3AnOlxuICAgICAgICAgICAgY2FzZSAnc2Nyb2xsTGVmdCc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBWYWx1ZUF0dHJpYnV0ZU9ic2VydmVyKHNjaGVkdWxlciwgZmxhZ3MsIG5ldyBFdmVudFN1YnNjcmliZXIodGhpcy5kb20sIHNjcm9sbEV2ZW50cyksIG9iaiwgcHJvcGVydHlOYW1lKTtcbiAgICAgICAgICAgIGNhc2UgJ2NsYXNzJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENsYXNzQXR0cmlidXRlQWNjZXNzb3Ioc2NoZWR1bGVyLCBmbGFncywgb2JqKTtcbiAgICAgICAgICAgIGNhc2UgJ3N0eWxlJzpcbiAgICAgICAgICAgIGNhc2UgJ2Nzcyc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBTdHlsZUF0dHJpYnV0ZUFjY2Vzc29yKHNjaGVkdWxlciwgZmxhZ3MsIG9iaik7XG4gICAgICAgICAgICBjYXNlICdtb2RlbCc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBTZXR0ZXJPYnNlcnZlcihsaWZlY3ljbGUsIGZsYWdzLCBvYmosIHByb3BlcnR5TmFtZSk7XG4gICAgICAgICAgICBjYXNlICdyb2xlJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IERhdGFBdHRyaWJ1dGVBY2Nlc3NvcihzY2hlZHVsZXIsIGZsYWdzLCBvYmosIHByb3BlcnR5TmFtZSk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGlmIChuc0F0dHJpYnV0ZXNbcHJvcGVydHlOYW1lXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5zUHJvcHMgPSBuc0F0dHJpYnV0ZXNbcHJvcGVydHlOYW1lXTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBdHRyaWJ1dGVOU0FjY2Vzc29yKHNjaGVkdWxlciwgZmxhZ3MsIG9iaiwgbnNQcm9wc1swXSwgbnNQcm9wc1sxXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpc0RhdGFBdHRyaWJ1dGUob2JqLCBwcm9wZXJ0eU5hbWUsIHRoaXMuc3ZnQW5hbHl6ZXIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRGF0YUF0dHJpYnV0ZUFjY2Vzc29yKHNjaGVkdWxlciwgZmxhZ3MsIG9iaiwgcHJvcGVydHlOYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIG92ZXJyaWRlc0FjY2Vzc29yKGZsYWdzLCBvYmosIHByb3BlcnR5TmFtZSkge1xuICAgICAgICByZXR1cm4gb3ZlcnJpZGVQcm9wc1twcm9wZXJ0eU5hbWVdID09PSB0cnVlO1xuICAgIH1cbiAgICAvLyBjb25zaWRlciBhIHNjZW5hcmlvIHdoZXJlIHVzZXIgd291bGQgd2FudCB0byBwcm92aWRlIGEgRGF0ZSBvYmplY3Qgb2JzZXJ2YXRpb24gdmlhIHBhdGNoaW5nIGEgZmV3IG11dGF0aW9uIG1ldGhvZCBvbiBpdFxuICAgIC8vIHRoZW4gdGhpcyBleHRlbnNpb24gcG9pbnQgb2YgdGhpcyBkZWZhdWx0IGltcGxlbWVudGFpb24gY2Fubm90IGJlIHVzZWQsXG4gICAgLy8gYW5kIGEgbmV3IGltcGxlbWVudGF0aW9uIG9mIElUYXJnZXRPYnNlcnZlckxvY2F0b3Igc2hvdWxkIGJlIHVzZWQgaW5zdGVhZFxuICAgIC8vIFRoaXMgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBvbmx5IGFjY291bnRzIGZvciB0aGUgbW9zdCBjb21tb24gdGFyZ2V0IHNjZW5hcmlvc1xuICAgIGhhbmRsZXMoZmxhZ3MsIG9iaikge1xuICAgICAgICByZXR1cm4gdGhpcy5kb20uaXNOb2RlSW5zdGFuY2Uob2JqKTtcbiAgICB9XG59O1xuVGFyZ2V0T2JzZXJ2ZXJMb2NhdG9yID0gX19kZWNvcmF0ZShbXG4gICAgX19wYXJhbSgwLCBJRE9NKSxcbiAgICBfX3BhcmFtKDEsIElTVkdBbmFseXplciksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3QsIE9iamVjdF0pXG5dLCBUYXJnZXRPYnNlcnZlckxvY2F0b3IpO1xuZXhwb3J0IHsgVGFyZ2V0T2JzZXJ2ZXJMb2NhdG9yIH07XG5sZXQgVGFyZ2V0QWNjZXNzb3JMb2NhdG9yID0gY2xhc3MgVGFyZ2V0QWNjZXNzb3JMb2NhdG9yIHtcbiAgICBjb25zdHJ1Y3Rvcihkb20sIHN2Z0FuYWx5emVyKSB7XG4gICAgICAgIHRoaXMuZG9tID0gZG9tO1xuICAgICAgICB0aGlzLnN2Z0FuYWx5emVyID0gc3ZnQW5hbHl6ZXI7XG4gICAgfVxuICAgIHN0YXRpYyByZWdpc3Rlcihjb250YWluZXIpIHtcbiAgICAgICAgcmV0dXJuIFJlZ2lzdHJhdGlvbi5zaW5nbGV0b24oSVRhcmdldEFjY2Vzc29yTG9jYXRvciwgdGhpcykucmVnaXN0ZXIoY29udGFpbmVyKTtcbiAgICB9XG4gICAgZ2V0QWNjZXNzb3IoZmxhZ3MsIHNjaGVkdWxlciwgbGlmZWN5Y2xlLCBvYmosIHByb3BlcnR5TmFtZSkge1xuICAgICAgICBzd2l0Y2ggKHByb3BlcnR5TmFtZSkge1xuICAgICAgICAgICAgY2FzZSAndGV4dENvbnRlbnQnOlxuICAgICAgICAgICAgICAgIC8vIG5vdGU6IHRoaXMgY2FzZSBpcyBqdXN0IGFuIG9wdGltaXphdGlvbiAodGV4dENvbnRlbnQgaXMgdGhlIG1vc3Qgb2Z0ZW4gdXNlZCBwcm9wZXJ0eSlcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEVsZW1lbnRQcm9wZXJ0eUFjY2Vzc29yKHNjaGVkdWxlciwgZmxhZ3MsIG9iaiwgcHJvcGVydHlOYW1lKTtcbiAgICAgICAgICAgIGNhc2UgJ2NsYXNzJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENsYXNzQXR0cmlidXRlQWNjZXNzb3Ioc2NoZWR1bGVyLCBmbGFncywgb2JqKTtcbiAgICAgICAgICAgIGNhc2UgJ3N0eWxlJzpcbiAgICAgICAgICAgIGNhc2UgJ2Nzcyc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBTdHlsZUF0dHJpYnV0ZUFjY2Vzc29yKHNjaGVkdWxlciwgZmxhZ3MsIG9iaik7XG4gICAgICAgICAgICAvLyBUT0RPOiB0aGVyZSBhcmUgKG1hbnkpIG1vcmUgc2l0dWF0aW9uIHdoZXJlIHdlIHdhbnQgdG8gZGVmYXVsdCB0byBEYXRhQXR0cmlidXRlQWNjZXNzb3IsXG4gICAgICAgICAgICAvLyBidXQgZm9yIG5vdyBzdGljayB0byB3aGF0IHZDdXJyZW50IGRvZXNcbiAgICAgICAgICAgIGNhc2UgJ3NyYyc6XG4gICAgICAgICAgICBjYXNlICdocmVmJzpcbiAgICAgICAgICAgIC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL2RvbS5odG1sI3dhaS1hcmlhXG4gICAgICAgICAgICBjYXNlICdyb2xlJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IERhdGFBdHRyaWJ1dGVBY2Nlc3NvcihzY2hlZHVsZXIsIGZsYWdzLCBvYmosIHByb3BlcnR5TmFtZSk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGlmIChuc0F0dHJpYnV0ZXNbcHJvcGVydHlOYW1lXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5zUHJvcHMgPSBuc0F0dHJpYnV0ZXNbcHJvcGVydHlOYW1lXTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBdHRyaWJ1dGVOU0FjY2Vzc29yKHNjaGVkdWxlciwgZmxhZ3MsIG9iaiwgbnNQcm9wc1swXSwgbnNQcm9wc1sxXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpc0RhdGFBdHRyaWJ1dGUob2JqLCBwcm9wZXJ0eU5hbWUsIHRoaXMuc3ZnQW5hbHl6ZXIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRGF0YUF0dHJpYnV0ZUFjY2Vzc29yKHNjaGVkdWxlciwgZmxhZ3MsIG9iaiwgcHJvcGVydHlOYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBFbGVtZW50UHJvcGVydHlBY2Nlc3NvcihzY2hlZHVsZXIsIGZsYWdzLCBvYmosIHByb3BlcnR5TmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFuZGxlcyhmbGFncywgb2JqKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRvbS5pc05vZGVJbnN0YW5jZShvYmopO1xuICAgIH1cbn07XG5UYXJnZXRBY2Nlc3NvckxvY2F0b3IgPSBfX2RlY29yYXRlKFtcbiAgICBfX3BhcmFtKDAsIElET00pLFxuICAgIF9fcGFyYW0oMSwgSVNWR0FuYWx5emVyKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW09iamVjdCwgT2JqZWN0XSlcbl0sIFRhcmdldEFjY2Vzc29yTG9jYXRvcik7XG5leHBvcnQgeyBUYXJnZXRBY2Nlc3NvckxvY2F0b3IgfTtcbmNvbnN0IElzRGF0YUF0dHJpYnV0ZSA9IHt9O1xuZnVuY3Rpb24gaXNEYXRhQXR0cmlidXRlKG9iaiwgcHJvcGVydHlOYW1lLCBzdmdBbmFseXplcikge1xuICAgIGlmIChJc0RhdGFBdHRyaWJ1dGVbcHJvcGVydHlOYW1lXSA9PT0gdHJ1ZSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgY29uc3QgcHJlZml4ID0gcHJvcGVydHlOYW1lLnNsaWNlKDAsIDUpO1xuICAgIC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL2RvbS5odG1sI3dhaS1hcmlhXG4gICAgLy8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2UvZG9tLmh0bWwjY3VzdG9tLWRhdGEtYXR0cmlidXRlXG4gICAgcmV0dXJuIElzRGF0YUF0dHJpYnV0ZVtwcm9wZXJ0eU5hbWVdID1cbiAgICAgICAgcHJlZml4ID09PSAnYXJpYS0nIHx8XG4gICAgICAgICAgICBwcmVmaXggPT09ICdkYXRhLScgfHxcbiAgICAgICAgICAgIHN2Z0FuYWx5emVyLmlzU3RhbmRhcmRTdmdBdHRyaWJ1dGUob2JqLCBwcm9wZXJ0eU5hbWUpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b2JzZXJ2ZXItbG9jYXRvci5qcy5tYXAiLCJpbXBvcnQgeyBfX2RlY29yYXRlLCBfX21ldGFkYXRhIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBJRE9NLCBJT2JzZXJ2ZXJMb2NhdG9yLCBzdWJzY3JpYmVyQ29sbGVjdGlvbiwgSVNjaGVkdWxlciwgfSBmcm9tICdAYXVyZWxpYS9ydW50aW1lJztcbmltcG9ydCB7IGJvdW5kIH0gZnJvbSAnQGF1cmVsaWEva2VybmVsJztcbmNvbnN0IGNoaWxkT2JzZXJ2ZXJPcHRpb25zID0ge1xuICAgIGNoaWxkTGlzdDogdHJ1ZSxcbiAgICBzdWJ0cmVlOiB0cnVlLFxuICAgIGNoYXJhY3RlckRhdGE6IHRydWVcbn07XG5mdW5jdGlvbiBkZWZhdWx0TWF0Y2hlcihhLCBiKSB7XG4gICAgcmV0dXJuIGEgPT09IGI7XG59XG5sZXQgU2VsZWN0VmFsdWVPYnNlcnZlciA9IGNsYXNzIFNlbGVjdFZhbHVlT2JzZXJ2ZXIge1xuICAgIGNvbnN0cnVjdG9yKHNjaGVkdWxlciwgZmxhZ3MsIG9ic2VydmVyTG9jYXRvciwgZG9tLCBoYW5kbGVyLCBvYmopIHtcbiAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJMb2NhdG9yID0gb2JzZXJ2ZXJMb2NhdG9yO1xuICAgICAgICB0aGlzLmRvbSA9IGRvbTtcbiAgICAgICAgdGhpcy5oYW5kbGVyID0gaGFuZGxlcjtcbiAgICAgICAgdGhpcy5vYmogPSBvYmo7XG4gICAgICAgIHRoaXMuY3VycmVudFZhbHVlID0gdm9pZCAwO1xuICAgICAgICB0aGlzLm9sZFZhbHVlID0gdm9pZCAwO1xuICAgICAgICB0aGlzLmhhc0NoYW5nZXMgPSBmYWxzZTtcbiAgICAgICAgdGhpcy50YXNrID0gbnVsbDtcbiAgICAgICAgdGhpcy5hcnJheU9ic2VydmVyID0gdm9pZCAwO1xuICAgICAgICB0aGlzLm5vZGVPYnNlcnZlciA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW50RmxhZ3MgPSBmbGFncyAmIDgwNTMwNjM4MyAvKiB0YXJnZXRPYnNlcnZlckZsYWdzICovO1xuICAgIH1cbiAgICBnZXRWYWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudFZhbHVlO1xuICAgIH1cbiAgICBzZXRWYWx1ZShuZXdWYWx1ZSwgZmxhZ3MpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50VmFsdWUgPSBuZXdWYWx1ZTtcbiAgICAgICAgdGhpcy5oYXNDaGFuZ2VzID0gbmV3VmFsdWUgIT09IHRoaXMub2xkVmFsdWU7XG4gICAgICAgIGlmICgoZmxhZ3MgJiA0MDk2IC8qIGZyb21CaW5kICovKSA+IDAgfHwgdGhpcy5wZXJzaXN0ZW50RmxhZ3MgPT09IDI2ODQzNTQ1NiAvKiBub1RhcmdldE9ic2VydmVyUXVldWUgKi8pIHtcbiAgICAgICAgICAgIHRoaXMuZmx1c2hDaGFuZ2VzKGZsYWdzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLnBlcnNpc3RlbnRGbGFncyAhPT0gNTM2ODcwOTEyIC8qIHBlcnNpc3RlbnRUYXJnZXRPYnNlcnZlclF1ZXVlICovICYmIHRoaXMudGFzayA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy50YXNrID0gdGhpcy5zY2hlZHVsZXIucXVldWVSZW5kZXJUYXNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmZsdXNoQ2hhbmdlcyhmbGFncyk7XG4gICAgICAgICAgICAgICAgdGhpcy50YXNrID0gbnVsbDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZsdXNoQ2hhbmdlcyhmbGFncykge1xuICAgICAgICBpZiAodGhpcy5oYXNDaGFuZ2VzKSB7XG4gICAgICAgICAgICB0aGlzLmhhc0NoYW5nZXMgPSBmYWxzZTtcbiAgICAgICAgICAgIGNvbnN0IHsgY3VycmVudFZhbHVlIH0gPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy5vbGRWYWx1ZSA9IGN1cnJlbnRWYWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IGlzQXJyYXkgPSBBcnJheS5pc0FycmF5KGN1cnJlbnRWYWx1ZSk7XG4gICAgICAgICAgICBpZiAoIWlzQXJyYXkgJiYgY3VycmVudFZhbHVlICE9IHZvaWQgMCAmJiB0aGlzLm9iai5tdWx0aXBsZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignT25seSBudWxsIG9yIEFycmF5IGluc3RhbmNlcyBjYW4gYmUgYm91bmQgdG8gYSBtdWx0aS1zZWxlY3QuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5hcnJheU9ic2VydmVyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hcnJheU9ic2VydmVyLnVuc3Vic2NyaWJlRnJvbUNvbGxlY3Rpb24odGhpcyk7XG4gICAgICAgICAgICAgICAgdGhpcy5hcnJheU9ic2VydmVyID0gdm9pZCAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzQXJyYXkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFycmF5T2JzZXJ2ZXIgPSB0aGlzLm9ic2VydmVyTG9jYXRvci5nZXRBcnJheU9ic2VydmVyKGZsYWdzLCBjdXJyZW50VmFsdWUpO1xuICAgICAgICAgICAgICAgIHRoaXMuYXJyYXlPYnNlcnZlci5zdWJzY3JpYmVUb0NvbGxlY3Rpb24odGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnN5bmNocm9uaXplT3B0aW9ucygpO1xuICAgICAgICAgICAgdGhpcy5ub3RpZnkoZmxhZ3MpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGhhbmRsZUNvbGxlY3Rpb25DaGFuZ2UoaW5kZXhNYXAsIGZsYWdzKSB7XG4gICAgICAgIGlmICgoZmxhZ3MgJiA0MDk2IC8qIGZyb21CaW5kICovKSA+IDAgfHwgdGhpcy5wZXJzaXN0ZW50RmxhZ3MgPT09IDI2ODQzNTQ1NiAvKiBub1RhcmdldE9ic2VydmVyUXVldWUgKi8pIHtcbiAgICAgICAgICAgIHRoaXMuc3luY2hyb25pemVPcHRpb25zKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmhhc0NoYW5nZXMgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnBlcnNpc3RlbnRGbGFncyAhPT0gNTM2ODcwOTEyIC8qIHBlcnNpc3RlbnRUYXJnZXRPYnNlcnZlclF1ZXVlICovICYmIHRoaXMudGFzayA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy50YXNrID0gdGhpcy5zY2hlZHVsZXIucXVldWVSZW5kZXJUYXNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmZsdXNoQ2hhbmdlcyhmbGFncyk7XG4gICAgICAgICAgICAgICAgdGhpcy50YXNrID0gbnVsbDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2FsbFN1YnNjcmliZXJzKHRoaXMuY3VycmVudFZhbHVlLCB0aGlzLm9sZFZhbHVlLCBmbGFncyk7XG4gICAgfVxuICAgIGhhbmRsZUNoYW5nZShuZXdWYWx1ZSwgcHJldmlvdXNWYWx1ZSwgZmxhZ3MpIHtcbiAgICAgICAgaWYgKChmbGFncyAmIDQwOTYgLyogZnJvbUJpbmQgKi8pID4gMCB8fCB0aGlzLnBlcnNpc3RlbnRGbGFncyA9PT0gMjY4NDM1NDU2IC8qIG5vVGFyZ2V0T2JzZXJ2ZXJRdWV1ZSAqLykge1xuICAgICAgICAgICAgdGhpcy5zeW5jaHJvbml6ZU9wdGlvbnMoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuaGFzQ2hhbmdlcyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucGVyc2lzdGVudEZsYWdzICE9PSA1MzY4NzA5MTIgLyogcGVyc2lzdGVudFRhcmdldE9ic2VydmVyUXVldWUgKi8gJiYgdGhpcy50YXNrID09PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLnRhc2sgPSB0aGlzLnNjaGVkdWxlci5xdWV1ZVJlbmRlclRhc2soKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuZmx1c2hDaGFuZ2VzKGZsYWdzKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRhc2sgPSBudWxsO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jYWxsU3Vic2NyaWJlcnMobmV3VmFsdWUsIHByZXZpb3VzVmFsdWUsIGZsYWdzKTtcbiAgICB9XG4gICAgbm90aWZ5KGZsYWdzKSB7XG4gICAgICAgIGlmICgoZmxhZ3MgJiA0MDk2IC8qIGZyb21CaW5kICovKSA+IDAgfHwgdGhpcy5wZXJzaXN0ZW50RmxhZ3MgPT09IDI2ODQzNTQ1NiAvKiBub1RhcmdldE9ic2VydmVyUXVldWUgKi8pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBvbGRWYWx1ZSA9IHRoaXMub2xkVmFsdWU7XG4gICAgICAgIGNvbnN0IG5ld1ZhbHVlID0gdGhpcy5jdXJyZW50VmFsdWU7XG4gICAgICAgIGlmIChuZXdWYWx1ZSA9PT0gb2xkVmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNhbGxTdWJzY3JpYmVycyhuZXdWYWx1ZSwgb2xkVmFsdWUsIGZsYWdzKTtcbiAgICB9XG4gICAgaGFuZGxlRXZlbnQoKSB7XG4gICAgICAgIC8vIFwiZnJvbS12aWV3XCIgY2hhbmdlcyBhcmUgYWx3YXlzIHN5bmNocm9ub3VzIG5vdywgc28gaW1tZWRpYXRlbHkgc3luYyB0aGUgdmFsdWUgYW5kIG5vdGlmeSBzdWJzY3JpYmVyc1xuICAgICAgICBjb25zdCBzaG91bGROb3RpZnkgPSB0aGlzLnN5bmNocm9uaXplVmFsdWUoKTtcbiAgICAgICAgaWYgKHNob3VsZE5vdGlmeSkge1xuICAgICAgICAgICAgdGhpcy5jYWxsU3Vic2NyaWJlcnModGhpcy5jdXJyZW50VmFsdWUsIHRoaXMub2xkVmFsdWUsIDEzMTA3MiAvKiBmcm9tRE9NRXZlbnQgKi8gfCA1MjQyODggLyogYWxsb3dQdWJsaXNoUm91bmR0cmlwICovKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzeW5jaHJvbml6ZU9wdGlvbnMoaW5kZXhNYXApIHtcbiAgICAgICAgY29uc3QgeyBjdXJyZW50VmFsdWUsIG9iaiB9ID0gdGhpcztcbiAgICAgICAgY29uc3QgaXNBcnJheSA9IEFycmF5LmlzQXJyYXkoY3VycmVudFZhbHVlKTtcbiAgICAgICAgY29uc3QgbWF0Y2hlciA9IG9iai5tYXRjaGVyICE9PSB2b2lkIDAgPyBvYmoubWF0Y2hlciA6IGRlZmF1bHRNYXRjaGVyO1xuICAgICAgICBjb25zdCBvcHRpb25zID0gb2JqLm9wdGlvbnM7XG4gICAgICAgIGxldCBpID0gb3B0aW9ucy5sZW5ndGg7XG4gICAgICAgIHdoaWxlIChpLS0gPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBvcHRpb24gPSBvcHRpb25zW2ldO1xuICAgICAgICAgICAgY29uc3Qgb3B0aW9uVmFsdWUgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob3B0aW9uLCAnbW9kZWwnKSA/IG9wdGlvbi5tb2RlbCA6IG9wdGlvbi52YWx1ZTtcbiAgICAgICAgICAgIGlmIChpc0FycmF5KSB7XG4gICAgICAgICAgICAgICAgb3B0aW9uLnNlbGVjdGVkID0gY3VycmVudFZhbHVlLmZpbmRJbmRleChpdGVtID0+ICEhbWF0Y2hlcihvcHRpb25WYWx1ZSwgaXRlbSkpICE9PSAtMTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9wdGlvbi5zZWxlY3RlZCA9ICEhbWF0Y2hlcihvcHRpb25WYWx1ZSwgY3VycmVudFZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzeW5jaHJvbml6ZVZhbHVlKCkge1xuICAgICAgICAvLyBTcGVjIGZvciBzeW5jaHJvbml6aW5nIHZhbHVlIGZyb20gYFNlbGVjdE9ic2VydmVyYCB0byBgPHNlbGVjdC8+YFxuICAgICAgICAvLyBXaGVuIHN5bmNocm9uaXppbmcgdmFsdWUgdG8gb2JzZXJ2ZWQgPHNlbGVjdC8+IGVsZW1lbnQsIGRvIHRoZSBmb2xsb3dpbmcgc3RlcHM6XG4gICAgICAgIC8vIEEuIElmIGA8c2VsZWN0Lz5gIGlzIG11bHRpcGxlXG4gICAgICAgIC8vICAgIDEuIENoZWNrIGlmIGN1cnJlbnQgdmFsdWUsIGNhbGxlZCBgY3VycmVudFZhbHVlYCBpcyBhbiBhcnJheVxuICAgICAgICAvLyAgICAgIGEuIElmIG5vdCBhbiBhcnJheSwgcmV0dXJuIHRydWUgdG8gc2lnbmFsIHZhbHVlIGhhcyBjaGFuZ2VkXG4gICAgICAgIC8vICAgICAgYi4gSWYgaXMgYW4gYXJyYXk6XG4gICAgICAgIC8vICAgICAgICBpLiBnYXRoZXIgYWxsIGN1cnJlbnQgc2VsZWN0ZWQgPG9wdGlvbi8+LCBpbiB0byBhcnJheSBjYWxsZWQgYHZhbHVlc2BcbiAgICAgICAgLy8gICAgICAgIGlpLiBsb29wIHRocm91Z2ggdGhlIGBjdXJyZW50VmFsdWVgIGFycmF5IGFuZCByZW1vdmUgaXRlbXMgdGhhdCBhcmUgbm9sb25nZXIgc2VsZWN0ZWQgYmFzZWQgb24gbWF0Y2hlclxuICAgICAgICAvLyAgICAgICAgaWlpLiBsb29wIHRocm91Z2ggdGhlIGB2YWx1ZXNgIGFycmF5IGFuZCBhZGQgaXRlbXMgdGhhdCBhcmUgc2VsZWN0ZWQgYmFzZWQgb24gbWF0Y2hlclxuICAgICAgICAvLyAgICAgICAgaXYuIFJldHVybiBmYWxzZSB0byBzaWduYWwgdmFsdWUgaGFzbid0IGNoYW5nZWRcbiAgICAgICAgLy8gQi4gSWYgdGhlIHNlbGVjdCBpcyBzaW5nbGVcbiAgICAgICAgLy8gICAgMS4gTGV0IGB2YWx1ZWAgZXF1YWwgdGhlIGZpcnN0IHNlbGVjdGVkIG9wdGlvbiwgaWYgbm8gb3B0aW9uIHNlbGVjdGVkLCB0aGVuIGB2YWx1ZWAgaXMgYG51bGxgXG4gICAgICAgIC8vICAgIDIuIGFzc2lnbiBgdGhpcy5jdXJyZW50VmFsdWVgIHRvIGB0aGlzLm9sZFZhbHVlYFxuICAgICAgICAvLyAgICAzLiBhc3NpZ24gYHZhbHVlYCB0byBgdGhpcy5jdXJyZW50VmFsdWVgXG4gICAgICAgIC8vICAgIDQuIHJldHVybiBgdHJ1ZWAgdG8gc2lnbmFsIHZhbHVlIGhhcyBjaGFuZ2VkXG4gICAgICAgIGNvbnN0IG9iaiA9IHRoaXMub2JqO1xuICAgICAgICBjb25zdCBvcHRpb25zID0gb2JqLm9wdGlvbnM7XG4gICAgICAgIGNvbnN0IGxlbiA9IG9wdGlvbnMubGVuZ3RoO1xuICAgICAgICBjb25zdCBjdXJyZW50VmFsdWUgPSB0aGlzLmN1cnJlbnRWYWx1ZTtcbiAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICBpZiAob2JqLm11bHRpcGxlKSB7XG4gICAgICAgICAgICAvLyBBLlxuICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGN1cnJlbnRWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAvLyBBLjEuYVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQS4xLmJcbiAgICAgICAgICAgIC8vIG11bHRpIHNlbGVjdFxuICAgICAgICAgICAgbGV0IG9wdGlvbjtcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoZXIgPSBvYmoubWF0Y2hlciB8fCBkZWZhdWx0TWF0Y2hlcjtcbiAgICAgICAgICAgIC8vIEEuMS5iLmlcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlcyA9IFtdO1xuICAgICAgICAgICAgd2hpbGUgKGkgPCBsZW4pIHtcbiAgICAgICAgICAgICAgICBvcHRpb24gPSBvcHRpb25zW2ldO1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb24uc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVzLnB1c2goT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9wdGlvbiwgJ21vZGVsJylcbiAgICAgICAgICAgICAgICAgICAgICAgID8gb3B0aW9uLm1vZGVsXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG9wdGlvbi52YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICsraTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEEuMS5iLmlpXG4gICAgICAgICAgICBpID0gMDtcbiAgICAgICAgICAgIHdoaWxlIChpIDwgY3VycmVudFZhbHVlLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGEgPSBjdXJyZW50VmFsdWVbaV07XG4gICAgICAgICAgICAgICAgLy8gVG9kbzogcmVtb3ZlIGFycm93IGZuXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlcy5maW5kSW5kZXgoYiA9PiAhIW1hdGNoZXIoYSwgYikpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VmFsdWUuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgKytpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEEuMS5iLmlpaVxuICAgICAgICAgICAgaSA9IDA7XG4gICAgICAgICAgICB3aGlsZSAoaSA8IHZhbHVlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhID0gdmFsdWVzW2ldO1xuICAgICAgICAgICAgICAgIC8vIFRvZG86IHJlbW92ZSBhcnJvdyBmblxuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50VmFsdWUuZmluZEluZGV4KGIgPT4gISFtYXRjaGVyKGEsIGIpKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFZhbHVlLnB1c2goYSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICsraTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEEuMS5iLml2XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQi4gc2luZ2xlIHNlbGVjdFxuICAgICAgICAvLyBCLjFcbiAgICAgICAgbGV0IHZhbHVlID0gbnVsbDtcbiAgICAgICAgd2hpbGUgKGkgPCBsZW4pIHtcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbiA9IG9wdGlvbnNbaV07XG4gICAgICAgICAgICBpZiAob3B0aW9uLnNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob3B0aW9uLCAnbW9kZWwnKVxuICAgICAgICAgICAgICAgICAgICA/IG9wdGlvbi5tb2RlbFxuICAgICAgICAgICAgICAgICAgICA6IG9wdGlvbi52YWx1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICsraTtcbiAgICAgICAgfVxuICAgICAgICAvLyBCLjJcbiAgICAgICAgdGhpcy5vbGRWYWx1ZSA9IHRoaXMuY3VycmVudFZhbHVlO1xuICAgICAgICAvLyBCLjNcbiAgICAgICAgdGhpcy5jdXJyZW50VmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgLy8gQi40XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBiaW5kKGZsYWdzKSB7XG4gICAgICAgIHRoaXMubm9kZU9ic2VydmVyID0gdGhpcy5kb20uY3JlYXRlTm9kZU9ic2VydmVyKHRoaXMub2JqLCB0aGlzLmhhbmRsZU5vZGVDaGFuZ2UsIGNoaWxkT2JzZXJ2ZXJPcHRpb25zKTtcbiAgICAgICAgaWYgKHRoaXMucGVyc2lzdGVudEZsYWdzID09PSA1MzY4NzA5MTIgLyogcGVyc2lzdGVudFRhcmdldE9ic2VydmVyUXVldWUgKi8pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnRhc2sgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRhc2suY2FuY2VsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnRhc2sgPSB0aGlzLnNjaGVkdWxlci5xdWV1ZVJlbmRlclRhc2soKCkgPT4gdGhpcy5mbHVzaENoYW5nZXMoZmxhZ3MpLCB7IHBlcnNpc3RlbnQ6IHRydWUgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdW5iaW5kKGZsYWdzKSB7XG4gICAgICAgIHRoaXMubm9kZU9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgdGhpcy5ub2RlT2JzZXJ2ZXIgPSBudWxsO1xuICAgICAgICBpZiAodGhpcy50YXNrICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLnRhc2suY2FuY2VsKCk7XG4gICAgICAgICAgICB0aGlzLnRhc2sgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmFycmF5T2JzZXJ2ZXIpIHtcbiAgICAgICAgICAgIHRoaXMuYXJyYXlPYnNlcnZlci51bnN1YnNjcmliZUZyb21Db2xsZWN0aW9uKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5hcnJheU9ic2VydmVyID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVOb2RlQ2hhbmdlKCkge1xuICAgICAgICB0aGlzLnN5bmNocm9uaXplT3B0aW9ucygpO1xuICAgICAgICBjb25zdCBzaG91bGROb3RpZnkgPSB0aGlzLnN5bmNocm9uaXplVmFsdWUoKTtcbiAgICAgICAgaWYgKHNob3VsZE5vdGlmeSkge1xuICAgICAgICAgICAgdGhpcy5ub3RpZnkoMTMxMDcyIC8qIGZyb21ET01FdmVudCAqLyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3Vic2NyaWJlKHN1YnNjcmliZXIpIHtcbiAgICAgICAgaWYgKCF0aGlzLmhhc1N1YnNjcmliZXJzKCkpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlci5zdWJzY3JpYmUodGhpcy5vYmosIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYWRkU3Vic2NyaWJlcihzdWJzY3JpYmVyKTtcbiAgICB9XG4gICAgdW5zdWJzY3JpYmUoc3Vic2NyaWJlcikge1xuICAgICAgICB0aGlzLnJlbW92ZVN1YnNjcmliZXIoc3Vic2NyaWJlcik7XG4gICAgICAgIGlmICghdGhpcy5oYXNTdWJzY3JpYmVycygpKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZXIuZGlzcG9zZSgpO1xuICAgICAgICB9XG4gICAgfVxufTtcbl9fZGVjb3JhdGUoW1xuICAgIGJvdW5kLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBGdW5jdGlvbiksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnJldHVybnR5cGVcIiwgdm9pZCAwKVxuXSwgU2VsZWN0VmFsdWVPYnNlcnZlci5wcm90b3R5cGUsIFwiaGFuZGxlTm9kZUNoYW5nZVwiLCBudWxsKTtcblNlbGVjdFZhbHVlT2JzZXJ2ZXIgPSBfX2RlY29yYXRlKFtcbiAgICBzdWJzY3JpYmVyQ29sbGVjdGlvbigpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0LCBOdW1iZXIsIE9iamVjdCwgT2JqZWN0LCBPYmplY3QsIE9iamVjdF0pXG5dLCBTZWxlY3RWYWx1ZU9ic2VydmVyKTtcbmV4cG9ydCB7IFNlbGVjdFZhbHVlT2JzZXJ2ZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNlbGVjdC12YWx1ZS1vYnNlcnZlci5qcy5tYXAiLCJpbXBvcnQgeyBQTEFURk9STSwga2ViYWJDYXNlIH0gZnJvbSAnQGF1cmVsaWEva2VybmVsJztcbmV4cG9ydCBjbGFzcyBTdHlsZUF0dHJpYnV0ZUFjY2Vzc29yIHtcbiAgICBjb25zdHJ1Y3RvcihzY2hlZHVsZXIsIGZsYWdzLCBvYmopIHtcbiAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICAgIHRoaXMuY3VycmVudFZhbHVlID0gJyc7XG4gICAgICAgIHRoaXMub2xkVmFsdWUgPSAnJztcbiAgICAgICAgdGhpcy5zdHlsZXMgPSB7fTtcbiAgICAgICAgdGhpcy52ZXJzaW9uID0gMDtcbiAgICAgICAgdGhpcy5oYXNDaGFuZ2VzID0gZmFsc2U7XG4gICAgICAgIHRoaXMudGFzayA9IG51bGw7XG4gICAgICAgIHRoaXMub2JqID0gb2JqO1xuICAgICAgICB0aGlzLnBlcnNpc3RlbnRGbGFncyA9IGZsYWdzICYgODA1MzA2MzgzIC8qIHRhcmdldE9ic2VydmVyRmxhZ3MgKi87XG4gICAgfVxuICAgIGdldFZhbHVlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vYmouc3R5bGUuY3NzVGV4dDtcbiAgICB9XG4gICAgc2V0VmFsdWUobmV3VmFsdWUsIGZsYWdzKSB7XG4gICAgICAgIHRoaXMuY3VycmVudFZhbHVlID0gbmV3VmFsdWU7XG4gICAgICAgIHRoaXMuaGFzQ2hhbmdlcyA9IG5ld1ZhbHVlICE9PSB0aGlzLm9sZFZhbHVlO1xuICAgICAgICBpZiAoKGZsYWdzICYgNDA5NiAvKiBmcm9tQmluZCAqLykgPiAwIHx8IHRoaXMucGVyc2lzdGVudEZsYWdzID09PSAyNjg0MzU0NTYgLyogbm9UYXJnZXRPYnNlcnZlclF1ZXVlICovKSB7XG4gICAgICAgICAgICB0aGlzLmZsdXNoQ2hhbmdlcyhmbGFncyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5wZXJzaXN0ZW50RmxhZ3MgIT09IDUzNjg3MDkxMiAvKiBwZXJzaXN0ZW50VGFyZ2V0T2JzZXJ2ZXJRdWV1ZSAqLyAmJiB0aGlzLnRhc2sgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMudGFzayA9IHRoaXMuc2NoZWR1bGVyLnF1ZXVlUmVuZGVyVGFzaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5mbHVzaENoYW5nZXMoZmxhZ3MpO1xuICAgICAgICAgICAgICAgIHRoaXMudGFzayA9IG51bGw7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRTdHlsZVR1cGxlc0Zyb21TdHJpbmcoY3VycmVudFZhbHVlKSB7XG4gICAgICAgIGNvbnN0IHN0eWxlVHVwbGVzID0gW107XG4gICAgICAgIGNvbnN0IHJ4ID0gL1xccyooW1xcdy1dKylcXHMqOlxccyooKD86KD86W1xcdy1dK1xcKFxccyooPzpcIig/OlxcXFxcInxbXlwiXSkqXCJ8Jyg/OlxcXFwnfFteJ10pKid8W1xcdy1dK1xcKFxccyooPzpbXlwiXSg/OlxcXFxcInxbXlwiXSkqXCJ8Jyg/OlxcXFwnfFteJ10pKid8W14pXSopXFwpLD98W14pXSopXFwpLD98XCIoPzpcXFxcXCJ8W15cIl0pKlwifCcoPzpcXFxcJ3xbXiddKSonfFteO10qKSw/XFxzKikrKTs/L2c7XG4gICAgICAgIGxldCBwYWlyO1xuICAgICAgICBsZXQgbmFtZTtcbiAgICAgICAgd2hpbGUgKChwYWlyID0gcnguZXhlYyhjdXJyZW50VmFsdWUpKSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbmFtZSA9IHBhaXJbMV07XG4gICAgICAgICAgICBpZiAobmFtZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN0eWxlVHVwbGVzLnB1c2goW25hbWUsIHBhaXJbMl1dKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3R5bGVUdXBsZXM7XG4gICAgfVxuICAgIGdldFN0eWxlVHVwbGVzRnJvbU9iamVjdChjdXJyZW50VmFsdWUpIHtcbiAgICAgICAgbGV0IHZhbHVlO1xuICAgICAgICBjb25zdCBzdHlsZXMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBwcm9wZXJ0eSBpbiBjdXJyZW50VmFsdWUpIHtcbiAgICAgICAgICAgIHZhbHVlID0gY3VycmVudFZhbHVlW3Byb3BlcnR5XTtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHN0eWxlcy5wdXNoKFtrZWJhYkNhc2UocHJvcGVydHkpLCB2YWx1ZV0pO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3R5bGVzLnB1c2goLi4udGhpcy5nZXRTdHlsZVR1cGxlcyh2YWx1ZSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdHlsZXM7XG4gICAgfVxuICAgIGdldFN0eWxlVHVwbGVzRnJvbUFycmF5KGN1cnJlbnRWYWx1ZSkge1xuICAgICAgICBjb25zdCBsZW4gPSBjdXJyZW50VmFsdWUubGVuZ3RoO1xuICAgICAgICBpZiAobGVuID4gMCkge1xuICAgICAgICAgICAgY29uc3Qgc3R5bGVzID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgICAgICAgICAgc3R5bGVzLnB1c2goLi4udGhpcy5nZXRTdHlsZVR1cGxlcyhjdXJyZW50VmFsdWVbaV0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzdHlsZXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFBMQVRGT1JNLmVtcHR5QXJyYXk7XG4gICAgfVxuICAgIGdldFN0eWxlVHVwbGVzKGN1cnJlbnRWYWx1ZSkge1xuICAgICAgICBpZiAodHlwZW9mIGN1cnJlbnRWYWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFN0eWxlVHVwbGVzRnJvbVN0cmluZyhjdXJyZW50VmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjdXJyZW50VmFsdWUgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U3R5bGVUdXBsZXNGcm9tQXJyYXkoY3VycmVudFZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3VycmVudFZhbHVlIGluc3RhbmNlb2YgT2JqZWN0KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRTdHlsZVR1cGxlc0Zyb21PYmplY3QoY3VycmVudFZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUExBVEZPUk0uZW1wdHlBcnJheTtcbiAgICB9XG4gICAgZmx1c2hDaGFuZ2VzKGZsYWdzKSB7XG4gICAgICAgIGlmICh0aGlzLmhhc0NoYW5nZXMpIHtcbiAgICAgICAgICAgIHRoaXMuaGFzQ2hhbmdlcyA9IGZhbHNlO1xuICAgICAgICAgICAgY29uc3QgeyBjdXJyZW50VmFsdWUgfSA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLm9sZFZhbHVlID0gY3VycmVudFZhbHVlO1xuICAgICAgICAgICAgY29uc3Qgc3R5bGVzID0gdGhpcy5zdHlsZXM7XG4gICAgICAgICAgICBsZXQgc3R5bGU7XG4gICAgICAgICAgICBsZXQgdmVyc2lvbiA9IHRoaXMudmVyc2lvbjtcbiAgICAgICAgICAgIGNvbnN0IHN0eWxlVHVwbGVzID0gdGhpcy5nZXRTdHlsZVR1cGxlcyhjdXJyZW50VmFsdWUpO1xuICAgICAgICAgICAgbGV0IHR1cGxlO1xuICAgICAgICAgICAgbGV0IG5hbWU7XG4gICAgICAgICAgICBsZXQgdmFsdWU7XG4gICAgICAgICAgICBjb25zdCBsZW4gPSBzdHlsZVR1cGxlcy5sZW5ndGg7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgICAgICAgICAgdHVwbGUgPSBzdHlsZVR1cGxlc1tpXTtcbiAgICAgICAgICAgICAgICBuYW1lID0gdHVwbGVbMF07XG4gICAgICAgICAgICAgICAgdmFsdWUgPSB0dXBsZVsxXTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFByb3BlcnR5KG5hbWUsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICBzdHlsZXNbbmFtZV0gPSB2ZXJzaW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zdHlsZXMgPSBzdHlsZXM7XG4gICAgICAgICAgICB0aGlzLnZlcnNpb24gKz0gMTtcbiAgICAgICAgICAgIGlmICh2ZXJzaW9uID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmVyc2lvbiAtPSAxO1xuICAgICAgICAgICAgZm9yIChzdHlsZSBpbiBzdHlsZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzdHlsZXMsIHN0eWxlKSB8fCBzdHlsZXNbc3R5bGVdICE9PSB2ZXJzaW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLm9iai5zdHlsZS5yZW1vdmVQcm9wZXJ0eShzdHlsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0UHJvcGVydHkoc3R5bGUsIHZhbHVlKSB7XG4gICAgICAgIGxldCBwcmlvcml0eSA9ICcnO1xuICAgICAgICBpZiAodmFsdWUgIT0gbnVsbCAmJiB0eXBlb2YgdmFsdWUuaW5kZXhPZiA9PT0gJ2Z1bmN0aW9uJyAmJiB2YWx1ZS5pbmNsdWRlcygnIWltcG9ydGFudCcpKSB7XG4gICAgICAgICAgICBwcmlvcml0eSA9ICdpbXBvcnRhbnQnO1xuICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKCchaW1wb3J0YW50JywgJycpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub2JqLnN0eWxlLnNldFByb3BlcnR5KHN0eWxlLCB2YWx1ZSwgcHJpb3JpdHkpO1xuICAgIH1cbiAgICBiaW5kKGZsYWdzKSB7XG4gICAgICAgIGlmICh0aGlzLnBlcnNpc3RlbnRGbGFncyA9PT0gNTM2ODcwOTEyIC8qIHBlcnNpc3RlbnRUYXJnZXRPYnNlcnZlclF1ZXVlICovKSB7XG4gICAgICAgICAgICBpZiAodGhpcy50YXNrICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50YXNrLmNhbmNlbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy50YXNrID0gdGhpcy5zY2hlZHVsZXIucXVldWVSZW5kZXJUYXNrKCgpID0+IHRoaXMuZmx1c2hDaGFuZ2VzKGZsYWdzKSwgeyBwZXJzaXN0ZW50OiB0cnVlIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub2xkVmFsdWUgPSB0aGlzLmN1cnJlbnRWYWx1ZSA9IHRoaXMub2JqLnN0eWxlLmNzc1RleHQ7XG4gICAgfVxuICAgIHVuYmluZChmbGFncykge1xuICAgICAgICBpZiAodGhpcy50YXNrICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLnRhc2suY2FuY2VsKCk7XG4gICAgICAgICAgICB0aGlzLnRhc2sgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3R5bGUtYXR0cmlidXRlLWFjY2Vzc29yLmpzLm1hcCIsImltcG9ydCB7IERJIH0gZnJvbSAnQGF1cmVsaWEva2VybmVsJztcbmV4cG9ydCBjb25zdCBJU1ZHQW5hbHl6ZXIgPSBESS5jcmVhdGVJbnRlcmZhY2UoJ0lTVkdBbmFseXplcicpLndpdGhEZWZhdWx0KHggPT4geC5zaW5nbGV0b24oY2xhc3Mge1xuICAgIGlzU3RhbmRhcmRTdmdBdHRyaWJ1dGUobm9kZSwgYXR0cmlidXRlTmFtZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufSkpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3ZnLWFuYWx5emVyLmpzLm1hcCIsImltcG9ydCB7IF9fZGVjb3JhdGUsIF9fbWV0YWRhdGEgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IHN1YnNjcmliZXJDb2xsZWN0aW9uLCBJU2NoZWR1bGVyLCB9IGZyb20gJ0BhdXJlbGlhL3J1bnRpbWUnO1xuLy8gVE9ETzogaGFuZGxlIGZpbGUgYXR0cmlidXRlIHByb3Blcmx5IGFnYWluLCBldGNcbi8qKlxuICogT2JzZXJ2ZXIgZm9yIG5vbi1yYWRpbywgbm9uLWNoZWNrYm94IGlucHV0LlxuICovXG5sZXQgVmFsdWVBdHRyaWJ1dGVPYnNlcnZlciA9IGNsYXNzIFZhbHVlQXR0cmlidXRlT2JzZXJ2ZXIge1xuICAgIGNvbnN0cnVjdG9yKHNjaGVkdWxlciwgZmxhZ3MsIGhhbmRsZXIsIG9iaiwgcHJvcGVydHlLZXkpIHtcbiAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICAgIHRoaXMuaGFuZGxlciA9IGhhbmRsZXI7XG4gICAgICAgIHRoaXMub2JqID0gb2JqO1xuICAgICAgICB0aGlzLnByb3BlcnR5S2V5ID0gcHJvcGVydHlLZXk7XG4gICAgICAgIHRoaXMuY3VycmVudFZhbHVlID0gJyc7XG4gICAgICAgIHRoaXMub2xkVmFsdWUgPSAnJztcbiAgICAgICAgdGhpcy5oYXNDaGFuZ2VzID0gZmFsc2U7XG4gICAgICAgIHRoaXMudGFzayA9IG51bGw7XG4gICAgICAgIHRoaXMucGVyc2lzdGVudEZsYWdzID0gZmxhZ3MgJiA4MDUzMDYzODMgLyogdGFyZ2V0T2JzZXJ2ZXJGbGFncyAqLztcbiAgICB9XG4gICAgZ2V0VmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRWYWx1ZTtcbiAgICB9XG4gICAgc2V0VmFsdWUobmV3VmFsdWUsIGZsYWdzKSB7XG4gICAgICAgIHRoaXMuY3VycmVudFZhbHVlID0gbmV3VmFsdWU7XG4gICAgICAgIHRoaXMuaGFzQ2hhbmdlcyA9IG5ld1ZhbHVlICE9PSB0aGlzLm9sZFZhbHVlO1xuICAgICAgICBpZiAoKGZsYWdzICYgNDA5NiAvKiBmcm9tQmluZCAqLykgPiAwIHx8IHRoaXMucGVyc2lzdGVudEZsYWdzID09PSAyNjg0MzU0NTYgLyogbm9UYXJnZXRPYnNlcnZlclF1ZXVlICovKSB7XG4gICAgICAgICAgICB0aGlzLmZsdXNoQ2hhbmdlcyhmbGFncyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5wZXJzaXN0ZW50RmxhZ3MgIT09IDUzNjg3MDkxMiAvKiBwZXJzaXN0ZW50VGFyZ2V0T2JzZXJ2ZXJRdWV1ZSAqLyAmJiB0aGlzLnRhc2sgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMudGFzayA9IHRoaXMuc2NoZWR1bGVyLnF1ZXVlUmVuZGVyVGFzaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5mbHVzaENoYW5nZXMoZmxhZ3MpO1xuICAgICAgICAgICAgICAgIHRoaXMudGFzayA9IG51bGw7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmbHVzaENoYW5nZXMoZmxhZ3MpIHtcbiAgICAgICAgaWYgKHRoaXMuaGFzQ2hhbmdlcykge1xuICAgICAgICAgICAgdGhpcy5oYXNDaGFuZ2VzID0gZmFsc2U7XG4gICAgICAgICAgICBjb25zdCB7IGN1cnJlbnRWYWx1ZSwgb2xkVmFsdWUgfSA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLm9sZFZhbHVlID0gY3VycmVudFZhbHVlO1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRWYWx1ZSA9PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9ialt0aGlzLnByb3BlcnR5S2V5XSA9ICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vYmpbdGhpcy5wcm9wZXJ0eUtleV0gPSBjdXJyZW50VmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKGZsYWdzICYgNDA5NiAvKiBmcm9tQmluZCAqLykgPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbGxTdWJzY3JpYmVycyhjdXJyZW50VmFsdWUsIG9sZFZhbHVlLCBmbGFncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFuZGxlRXZlbnQoKSB7XG4gICAgICAgIGNvbnN0IG9sZFZhbHVlID0gdGhpcy5vbGRWYWx1ZSA9IHRoaXMuY3VycmVudFZhbHVlO1xuICAgICAgICBjb25zdCBjdXJyZW50VmFsdWUgPSB0aGlzLmN1cnJlbnRWYWx1ZSA9IHRoaXMub2JqW3RoaXMucHJvcGVydHlLZXldO1xuICAgICAgICBpZiAob2xkVmFsdWUgIT09IGN1cnJlbnRWYWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5vbGRWYWx1ZSA9IGN1cnJlbnRWYWx1ZTtcbiAgICAgICAgICAgIHRoaXMuY2FsbFN1YnNjcmliZXJzKGN1cnJlbnRWYWx1ZSwgb2xkVmFsdWUsIDEzMTA3MiAvKiBmcm9tRE9NRXZlbnQgKi8gfCA1MjQyODggLyogYWxsb3dQdWJsaXNoUm91bmR0cmlwICovKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdWJzY3JpYmUoc3Vic2NyaWJlcikge1xuICAgICAgICBpZiAoIXRoaXMuaGFzU3Vic2NyaWJlcnMoKSkge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVyLnN1YnNjcmliZSh0aGlzLm9iaiwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRWYWx1ZSA9IHRoaXMub2xkVmFsdWUgPSB0aGlzLm9ialt0aGlzLnByb3BlcnR5S2V5XTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFkZFN1YnNjcmliZXIoc3Vic2NyaWJlcik7XG4gICAgfVxuICAgIHVuc3Vic2NyaWJlKHN1YnNjcmliZXIpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVTdWJzY3JpYmVyKHN1YnNjcmliZXIpO1xuICAgICAgICBpZiAoIXRoaXMuaGFzU3Vic2NyaWJlcnMoKSkge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVyLmRpc3Bvc2UoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBiaW5kKGZsYWdzKSB7XG4gICAgICAgIGlmICh0aGlzLnBlcnNpc3RlbnRGbGFncyA9PT0gNTM2ODcwOTEyIC8qIHBlcnNpc3RlbnRUYXJnZXRPYnNlcnZlclF1ZXVlICovKSB7XG4gICAgICAgICAgICBpZiAodGhpcy50YXNrICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50YXNrLmNhbmNlbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy50YXNrID0gdGhpcy5zY2hlZHVsZXIucXVldWVSZW5kZXJUYXNrKCgpID0+IHRoaXMuZmx1c2hDaGFuZ2VzKGZsYWdzKSwgeyBwZXJzaXN0ZW50OiB0cnVlIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHVuYmluZChmbGFncykge1xuICAgICAgICBpZiAodGhpcy50YXNrICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLnRhc2suY2FuY2VsKCk7XG4gICAgICAgICAgICB0aGlzLnRhc2sgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxufTtcblZhbHVlQXR0cmlidXRlT2JzZXJ2ZXIgPSBfX2RlY29yYXRlKFtcbiAgICBzdWJzY3JpYmVyQ29sbGVjdGlvbigpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0LCBOdW1iZXIsIE9iamVjdCwgT2JqZWN0LCBTdHJpbmddKVxuXSwgVmFsdWVBdHRyaWJ1dGVPYnNlcnZlcik7XG5leHBvcnQgeyBWYWx1ZUF0dHJpYnV0ZU9ic2VydmVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD12YWx1ZS1hdHRyaWJ1dGUtb2JzZXJ2ZXIuanMubWFwIiwiaW1wb3J0IHsgUExBVEZPUk0sIFJlZ2lzdHJhdGlvbiwgUmVwb3J0ZXIsIHRvQXJyYXksIE1ldGFkYXRhIH0gZnJvbSAnQGF1cmVsaWEva2VybmVsJztcbmltcG9ydCB7IElQcm9qZWN0b3JMb2NhdG9yLCBDdXN0b21FbGVtZW50LCB9IGZyb20gJ0BhdXJlbGlhL3J1bnRpbWUnO1xuaW1wb3J0IHsgSVNoYWRvd0RPTVN0eWxlcywgSVNoYWRvd0RPTUdsb2JhbFN0eWxlcyB9IGZyb20gJy4vc3R5bGVzL3NoYWRvdy1kb20tc3R5bGVzJztcbmNvbnN0IGRlZmF1bHRTaGFkb3dPcHRpb25zID0ge1xuICAgIG1vZGU6ICdvcGVuJ1xufTtcbmV4cG9ydCBjbGFzcyBIVE1MUHJvamVjdG9yTG9jYXRvciB7XG4gICAgc3RhdGljIHJlZ2lzdGVyKGNvbnRhaW5lcikge1xuICAgICAgICByZXR1cm4gUmVnaXN0cmF0aW9uLnNpbmdsZXRvbihJUHJvamVjdG9yTG9jYXRvciwgdGhpcykucmVnaXN0ZXIoY29udGFpbmVyKTtcbiAgICB9XG4gICAgZ2V0RWxlbWVudFByb2plY3Rvcihkb20sICRjb21wb25lbnQsIGhvc3QsIGRlZikge1xuICAgICAgICBpZiAoZGVmLnNoYWRvd09wdGlvbnMgfHwgZGVmLmhhc1Nsb3RzKSB7XG4gICAgICAgICAgICBpZiAoZGVmLmNvbnRhaW5lcmxlc3MpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBSZXBvcnRlci5lcnJvcigyMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IFNoYWRvd0RPTVByb2plY3Rvcihkb20sICRjb21wb25lbnQsIGhvc3QsIGRlZik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRlZi5jb250YWluZXJsZXNzKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IENvbnRhaW5lcmxlc3NQcm9qZWN0b3IoZG9tLCAkY29tcG9uZW50LCBob3N0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IEhvc3RQcm9qZWN0b3IoJGNvbXBvbmVudCwgaG9zdCk7XG4gICAgfVxufVxuY29uc3QgY2hpbGRPYnNlcnZlck9wdGlvbnMgPSB7IGNoaWxkTGlzdDogdHJ1ZSB9O1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IGNsYXNzIFNoYWRvd0RPTVByb2plY3RvciB7XG4gICAgY29uc3RydWN0b3IoZG9tLCBcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L3ByZWZlci1yZWFkb25seVxuICAgICRjb250cm9sbGVyLCBob3N0LCBkZWZpbml0aW9uKSB7XG4gICAgICAgIHRoaXMuZG9tID0gZG9tO1xuICAgICAgICB0aGlzLiRjb250cm9sbGVyID0gJGNvbnRyb2xsZXI7XG4gICAgICAgIHRoaXMuaG9zdCA9IGhvc3Q7XG4gICAgICAgIGxldCBzaGFkb3dPcHRpb25zO1xuICAgICAgICBpZiAoZGVmaW5pdGlvbi5zaGFkb3dPcHRpb25zIGluc3RhbmNlb2YgT2JqZWN0ICYmXG4gICAgICAgICAgICAnbW9kZScgaW4gZGVmaW5pdGlvbi5zaGFkb3dPcHRpb25zKSB7XG4gICAgICAgICAgICBzaGFkb3dPcHRpb25zID0gZGVmaW5pdGlvbi5zaGFkb3dPcHRpb25zO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc2hhZG93T3B0aW9ucyA9IGRlZmF1bHRTaGFkb3dPcHRpb25zO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2hhZG93Um9vdCA9IGhvc3QuYXR0YWNoU2hhZG93KHNoYWRvd09wdGlvbnMpO1xuICAgICAgICBNZXRhZGF0YS5kZWZpbmUoQ3VzdG9tRWxlbWVudC5uYW1lLCAkY29udHJvbGxlciwgdGhpcy5ob3N0KTtcbiAgICAgICAgTWV0YWRhdGEuZGVmaW5lKEN1c3RvbUVsZW1lbnQubmFtZSwgJGNvbnRyb2xsZXIsIHRoaXMuc2hhZG93Um9vdCk7XG4gICAgfVxuICAgIGdldCBjaGlsZHJlbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaG9zdC5jaGlsZE5vZGVzO1xuICAgIH1cbiAgICBzdWJzY3JpYmVUb0NoaWxkcmVuQ2hhbmdlKGNhbGxiYWNrLCBvcHRpb25zID0gY2hpbGRPYnNlcnZlck9wdGlvbnMpIHtcbiAgICAgICAgLy8gVE9ETzogYWRkIGEgd2F5IHRvIGRpc3Bvc2UvZGlzY29ubmVjdFxuICAgICAgICB0aGlzLmRvbS5jcmVhdGVOb2RlT2JzZXJ2ZXIodGhpcy5ob3N0LCBjYWxsYmFjaywgb3B0aW9ucyk7XG4gICAgfVxuICAgIHByb3ZpZGVFbmNhcHN1bGF0aW9uU291cmNlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zaGFkb3dSb290O1xuICAgIH1cbiAgICBwcm9qZWN0KG5vZGVzKSB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSB0aGlzLiRjb250cm9sbGVyLmNvbnRleHQ7XG4gICAgICAgIGNvbnN0IHN0eWxlcyA9IGNvbnRleHQuaGFzKElTaGFkb3dET01TdHlsZXMsIGZhbHNlKVxuICAgICAgICAgICAgPyBjb250ZXh0LmdldChJU2hhZG93RE9NU3R5bGVzKVxuICAgICAgICAgICAgOiBjb250ZXh0LmdldChJU2hhZG93RE9NR2xvYmFsU3R5bGVzKTtcbiAgICAgICAgc3R5bGVzLmFwcGx5VG8odGhpcy5zaGFkb3dSb290KTtcbiAgICAgICAgbm9kZXMuYXBwZW5kVG8odGhpcy5zaGFkb3dSb290KTtcbiAgICB9XG4gICAgdGFrZShub2Rlcykge1xuICAgICAgICBub2Rlcy5yZW1vdmUoKTtcbiAgICAgICAgbm9kZXMudW5saW5rKCk7XG4gICAgfVxufVxuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IGNsYXNzIENvbnRhaW5lcmxlc3NQcm9qZWN0b3Ige1xuICAgIGNvbnN0cnVjdG9yKGRvbSwgJGNvbnRyb2xsZXIsIGhvc3QpIHtcbiAgICAgICAgaWYgKGhvc3QuY2hpbGROb2Rlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMuY2hpbGROb2RlcyA9IHRvQXJyYXkoaG9zdC5jaGlsZE5vZGVzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY2hpbGROb2RlcyA9IFBMQVRGT1JNLmVtcHR5QXJyYXk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ob3N0ID0gZG9tLmNvbnZlcnRUb1JlbmRlckxvY2F0aW9uKGhvc3QpO1xuICAgICAgICBNZXRhZGF0YS5kZWZpbmUoQ3VzdG9tRWxlbWVudC5uYW1lLCAkY29udHJvbGxlciwgdGhpcy5ob3N0KTtcbiAgICB9XG4gICAgZ2V0IGNoaWxkcmVuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jaGlsZE5vZGVzO1xuICAgIH1cbiAgICBzdWJzY3JpYmVUb0NoaWxkcmVuQ2hhbmdlKGNhbGxiYWNrKSB7XG4gICAgICAgIC8vIFRPRE86IHR1cm4gdGhpcyBpbnRvIGFuIGVycm9yXG4gICAgICAgIC8vIENvbnRhaW5lcmxlc3MgZG9lcyBub3QgaGF2ZSBhIGNvbnRhaW5lciBub2RlIHRvIG9ic2VydmUgY2hpbGRyZW4gb24uXG4gICAgfVxuICAgIHByb3ZpZGVFbmNhcHN1bGF0aW9uU291cmNlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ob3N0LmdldFJvb3ROb2RlKCk7XG4gICAgfVxuICAgIHByb2plY3Qobm9kZXMpIHtcbiAgICAgICAgbm9kZXMuaW5zZXJ0QmVmb3JlKHRoaXMuaG9zdCk7XG4gICAgfVxuICAgIHRha2Uobm9kZXMpIHtcbiAgICAgICAgbm9kZXMucmVtb3ZlKCk7XG4gICAgICAgIG5vZGVzLnVubGluaygpO1xuICAgIH1cbn1cbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCBjbGFzcyBIb3N0UHJvamVjdG9yIHtcbiAgICBjb25zdHJ1Y3RvcigkY29udHJvbGxlciwgaG9zdCkge1xuICAgICAgICB0aGlzLmhvc3QgPSBob3N0O1xuICAgICAgICBNZXRhZGF0YS5kZWZpbmUoQ3VzdG9tRWxlbWVudC5uYW1lLCAkY29udHJvbGxlciwgaG9zdCk7XG4gICAgfVxuICAgIGdldCBjaGlsZHJlbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaG9zdC5jaGlsZE5vZGVzO1xuICAgIH1cbiAgICBzdWJzY3JpYmVUb0NoaWxkcmVuQ2hhbmdlKGNhbGxiYWNrKSB7XG4gICAgICAgIC8vIERvIG5vdGhpbmcgc2luY2UgdGhpcyBzY2VuYXJpbyB3aWxsIG5ldmVyIGhhdmUgY2hpbGRyZW4uXG4gICAgfVxuICAgIHByb3ZpZGVFbmNhcHN1bGF0aW9uU291cmNlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ob3N0LmdldFJvb3ROb2RlKCk7XG4gICAgfVxuICAgIHByb2plY3Qobm9kZXMpIHtcbiAgICAgICAgbm9kZXMuYXBwZW5kVG8odGhpcy5ob3N0KTtcbiAgICB9XG4gICAgdGFrZShub2Rlcykge1xuICAgICAgICBub2Rlcy5yZW1vdmUoKTtcbiAgICAgICAgbm9kZXMudW5saW5rKCk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHJvamVjdG9ycy5qcy5tYXAiLCJpbXBvcnQgeyBfX2RlY29yYXRlIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBiaW5kaW5nQmVoYXZpb3IsIElTY2hlZHVsZXIgfSBmcm9tICdAYXVyZWxpYS9ydW50aW1lJztcbmltcG9ydCB7IERhdGFBdHRyaWJ1dGVBY2Nlc3NvciB9IGZyb20gJy4uLy4uL29ic2VydmF0aW9uL2RhdGEtYXR0cmlidXRlLWFjY2Vzc29yJztcbmxldCBBdHRyQmluZGluZ0JlaGF2aW9yID0gY2xhc3MgQXR0ckJpbmRpbmdCZWhhdmlvciB7XG4gICAgYmluZChmbGFncywgc2NvcGUsIGJpbmRpbmcpIHtcbiAgICAgICAgYmluZGluZy50YXJnZXRPYnNlcnZlciA9IG5ldyBEYXRhQXR0cmlidXRlQWNjZXNzb3IoYmluZGluZy5sb2NhdG9yLmdldChJU2NoZWR1bGVyKSwgZmxhZ3MsIGJpbmRpbmcudGFyZ2V0LCBiaW5kaW5nLnRhcmdldFByb3BlcnR5KTtcbiAgICB9XG4gICAgdW5iaW5kKGZsYWdzLCBzY29wZSwgYmluZGluZykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxufTtcbkF0dHJCaW5kaW5nQmVoYXZpb3IgPSBfX2RlY29yYXRlKFtcbiAgICBiaW5kaW5nQmVoYXZpb3IoJ2F0dHInKVxuXSwgQXR0ckJpbmRpbmdCZWhhdmlvcik7XG5leHBvcnQgeyBBdHRyQmluZGluZ0JlaGF2aW9yIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hdHRyLmpzLm1hcCIsImltcG9ydCB7IF9fZGVjb3JhdGUgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IFJlcG9ydGVyIH0gZnJvbSAnQGF1cmVsaWEva2VybmVsJztcbmltcG9ydCB7IGJpbmRpbmdCZWhhdmlvciB9IGZyb20gJ0BhdXJlbGlhL3J1bnRpbWUnO1xuaW1wb3J0IHsgZmluZE9yaWdpbmFsRXZlbnRUYXJnZXQgfSBmcm9tICcuLi8uLi9vYnNlcnZhdGlvbi9ldmVudC1tYW5hZ2VyJztcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVTZWxmRXZlbnQoZXZlbnQpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBmaW5kT3JpZ2luYWxFdmVudFRhcmdldChldmVudCk7XG4gICAgaWYgKHRoaXMudGFyZ2V0ICE9PSB0YXJnZXQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zZWxmRXZlbnRDYWxsU291cmNlKGV2ZW50KTtcbn1cbmxldCBTZWxmQmluZGluZ0JlaGF2aW9yID0gY2xhc3MgU2VsZkJpbmRpbmdCZWhhdmlvciB7XG4gICAgYmluZChmbGFncywgc2NvcGUsIGJpbmRpbmcpIHtcbiAgICAgICAgaWYgKCFiaW5kaW5nLmNhbGxTb3VyY2UgfHwgIWJpbmRpbmcudGFyZ2V0RXZlbnQpIHtcbiAgICAgICAgICAgIHRocm93IFJlcG9ydGVyLmVycm9yKDgpO1xuICAgICAgICB9XG4gICAgICAgIGJpbmRpbmcuc2VsZkV2ZW50Q2FsbFNvdXJjZSA9IGJpbmRpbmcuY2FsbFNvdXJjZTtcbiAgICAgICAgYmluZGluZy5jYWxsU291cmNlID0gaGFuZGxlU2VsZkV2ZW50O1xuICAgIH1cbiAgICB1bmJpbmQoZmxhZ3MsIHNjb3BlLCBiaW5kaW5nKSB7XG4gICAgICAgIGJpbmRpbmcuY2FsbFNvdXJjZSA9IGJpbmRpbmcuc2VsZkV2ZW50Q2FsbFNvdXJjZTtcbiAgICAgICAgYmluZGluZy5zZWxmRXZlbnRDYWxsU291cmNlID0gbnVsbDtcbiAgICB9XG59O1xuU2VsZkJpbmRpbmdCZWhhdmlvciA9IF9fZGVjb3JhdGUoW1xuICAgIGJpbmRpbmdCZWhhdmlvcignc2VsZicpXG5dLCBTZWxmQmluZGluZ0JlaGF2aW9yKTtcbmV4cG9ydCB7IFNlbGZCaW5kaW5nQmVoYXZpb3IgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNlbGYuanMubWFwIiwiaW1wb3J0IHsgX19kZWNvcmF0ZSwgX19tZXRhZGF0YSwgX19wYXJhbSB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgUmVwb3J0ZXIgfSBmcm9tICdAYXVyZWxpYS9rZXJuZWwnO1xuaW1wb3J0IHsgQmluZGluZ01vZGUsIElET00sIElPYnNlcnZlckxvY2F0b3IsIGJpbmRpbmdCZWhhdmlvciB9IGZyb20gJ0BhdXJlbGlhL3J1bnRpbWUnO1xuaW1wb3J0IHsgRXZlbnRTdWJzY3JpYmVyIH0gZnJvbSAnLi4vLi4vb2JzZXJ2YXRpb24vZXZlbnQtbWFuYWdlcic7XG5sZXQgVXBkYXRlVHJpZ2dlckJpbmRpbmdCZWhhdmlvciA9IGNsYXNzIFVwZGF0ZVRyaWdnZXJCaW5kaW5nQmVoYXZpb3Ige1xuICAgIGNvbnN0cnVjdG9yKG9ic2VydmVyTG9jYXRvcikge1xuICAgICAgICB0aGlzLm9ic2VydmVyTG9jYXRvciA9IG9ic2VydmVyTG9jYXRvcjtcbiAgICB9XG4gICAgYmluZChmbGFncywgc2NvcGUsIGJpbmRpbmcsIC4uLmV2ZW50cykge1xuICAgICAgICBpZiAoZXZlbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhyb3cgUmVwb3J0ZXIuZXJyb3IoOSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGJpbmRpbmcubW9kZSAhPT0gQmluZGluZ01vZGUudHdvV2F5ICYmIGJpbmRpbmcubW9kZSAhPT0gQmluZGluZ01vZGUuZnJvbVZpZXcpIHtcbiAgICAgICAgICAgIHRocm93IFJlcG9ydGVyLmVycm9yKDEwKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBlcnNpc3RlbnRGbGFncyA9IGZsYWdzICYgMjA4MDM3NDc5OSAvKiBwZXJzaXN0ZW50QmluZGluZ0ZsYWdzICovO1xuICAgICAgICAvLyBlbnN1cmUgdGhlIGJpbmRpbmcncyB0YXJnZXQgb2JzZXJ2ZXIgaGFzIGJlZW4gc2V0LlxuICAgICAgICBjb25zdCB0YXJnZXRPYnNlcnZlciA9IHRoaXMub2JzZXJ2ZXJMb2NhdG9yLmdldE9ic2VydmVyKHRoaXMucGVyc2lzdGVudEZsYWdzIHwgZmxhZ3MsIGJpbmRpbmcudGFyZ2V0LCBiaW5kaW5nLnRhcmdldFByb3BlcnR5KTtcbiAgICAgICAgaWYgKCF0YXJnZXRPYnNlcnZlci5oYW5kbGVyKSB7XG4gICAgICAgICAgICB0aHJvdyBSZXBvcnRlci5lcnJvcigxMCk7XG4gICAgICAgIH1cbiAgICAgICAgYmluZGluZy50YXJnZXRPYnNlcnZlciA9IHRhcmdldE9ic2VydmVyO1xuICAgICAgICAvLyBzdGFzaCB0aGUgb3JpZ2luYWwgZWxlbWVudCBzdWJzY3JpYmUgZnVuY3Rpb24uXG4gICAgICAgIHRhcmdldE9ic2VydmVyLm9yaWdpbmFsSGFuZGxlciA9IGJpbmRpbmcudGFyZ2V0T2JzZXJ2ZXIuaGFuZGxlcjtcbiAgICAgICAgLy8gcmVwbGFjZSB0aGUgZWxlbWVudCBzdWJzY3JpYmUgZnVuY3Rpb24gd2l0aCBvbmUgdGhhdCB1c2VzIHRoZSBjb3JyZWN0IGV2ZW50cy5cbiAgICAgICAgdGFyZ2V0T2JzZXJ2ZXIuaGFuZGxlciA9IG5ldyBFdmVudFN1YnNjcmliZXIoYmluZGluZy5sb2NhdG9yLmdldChJRE9NKSwgZXZlbnRzKTtcbiAgICB9XG4gICAgdW5iaW5kKGZsYWdzLCBzY29wZSwgYmluZGluZykge1xuICAgICAgICAvLyByZXN0b3JlIHRoZSBzdGF0ZSBvZiB0aGUgYmluZGluZy5cbiAgICAgICAgYmluZGluZy50YXJnZXRPYnNlcnZlci5oYW5kbGVyLmRpc3Bvc2UoKTtcbiAgICAgICAgYmluZGluZy50YXJnZXRPYnNlcnZlci5oYW5kbGVyID0gYmluZGluZy50YXJnZXRPYnNlcnZlci5vcmlnaW5hbEhhbmRsZXI7XG4gICAgICAgIGJpbmRpbmcudGFyZ2V0T2JzZXJ2ZXIub3JpZ2luYWxIYW5kbGVyID0gbnVsbDtcbiAgICB9XG59O1xuVXBkYXRlVHJpZ2dlckJpbmRpbmdCZWhhdmlvciA9IF9fZGVjb3JhdGUoW1xuICAgIGJpbmRpbmdCZWhhdmlvcigndXBkYXRlVHJpZ2dlcicpLFxuICAgIF9fcGFyYW0oMCwgSU9ic2VydmVyTG9jYXRvciksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3RdKVxuXSwgVXBkYXRlVHJpZ2dlckJpbmRpbmdCZWhhdmlvcik7XG5leHBvcnQgeyBVcGRhdGVUcmlnZ2VyQmluZGluZ0JlaGF2aW9yIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD11cGRhdGUtdHJpZ2dlci5qcy5tYXAiLCJpbXBvcnQgeyBfX2RlY29yYXRlLCBfX21ldGFkYXRhLCBfX3BhcmFtIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBQTEFURk9STSB9IGZyb20gJ0BhdXJlbGlhL2tlcm5lbCc7XG5pbXBvcnQgeyBiaW5kYWJsZSwgY3VzdG9tQXR0cmlidXRlLCBJRE9NLCBJTm9kZSwgSVNjaGVkdWxlciB9IGZyb20gJ0BhdXJlbGlhL3J1bnRpbWUnO1xuaW1wb3J0IHsgSFRNTERPTSB9IGZyb20gJy4uLy4uL2RvbSc7XG5jb25zdCB1bnNldCA9IFN5bWJvbCgpO1xuLy8gVXNpbmcgcGFzc2l2ZSB0byBoZWxwIHdpdGggcGVyZm9ybWFuY2VcbmNvbnN0IGRlZmF1bHRDYXB0dXJlRXZlbnRJbml0ID0ge1xuICAgIHBhc3NpdmU6IHRydWUsXG4gICAgY2FwdHVyZTogdHJ1ZVxufTtcbi8vIFVzaW5nIHBhc3NpdmUgdG8gaGVscCB3aXRoIHBlcmZvcm1hbmNlXG5jb25zdCBkZWZhdWx0QnViYmxlRXZlbnRJbml0ID0ge1xuICAgIHBhc3NpdmU6IHRydWVcbn07XG4vLyB3ZWFrbHkgY29ubmVjdCBhIGRvY3VtZW50IHRvIGEgYmx1ciBtYW5hZ2VyXG4vLyB0byBhdm9pZCBwb2xsdXRpbmcgdGhlIGRvY3VtZW50IHByb3BlcnRpZXNcbmNvbnN0IGJsdXJEb2NNYXAgPSBuZXcgV2Vha01hcCgpO1xuZXhwb3J0IGNsYXNzIEJsdXJNYW5hZ2VyIHtcbiAgICBjb25zdHJ1Y3Rvcihkb20sIHNjaGVkdWxlcikge1xuICAgICAgICB0aGlzLmRvbSA9IGRvbTtcbiAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICAgIHRoaXMuYmx1cnMgPSBbXTtcbiAgICAgICAgYmx1ckRvY01hcC5zZXQoZG9tLmRvY3VtZW50LCB0aGlzKTtcbiAgICAgICAgdGhpcy5oYW5kbGVyID0gY3JlYXRlSGFuZGxlcih0aGlzLCB0aGlzLmJsdXJzKTtcbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZUZvcihkb20sIHNjaGVkdWxlcikge1xuICAgICAgICByZXR1cm4gYmx1ckRvY01hcC5nZXQoZG9tLmRvY3VtZW50KSB8fCBuZXcgQmx1ck1hbmFnZXIoZG9tLCBzY2hlZHVsZXIpO1xuICAgIH1cbiAgICByZWdpc3RlcihibHVyKSB7XG4gICAgICAgIGNvbnN0IGJsdXJzID0gdGhpcy5ibHVycztcbiAgICAgICAgaWYgKCFibHVycy5pbmNsdWRlcyhibHVyKSAmJiBibHVycy5wdXNoKGJsdXIpID09PSAxKSB7XG4gICAgICAgICAgICB0aGlzLmFkZExpc3RlbmVycygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHVucmVnaXN0ZXIoYmx1cikge1xuICAgICAgICBjb25zdCBibHVycyA9IHRoaXMuYmx1cnM7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gYmx1cnMuaW5kZXhPZihibHVyKTtcbiAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgIGJsdXJzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGJsdXJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcnMoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhZGRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIGNvbnN0IGRvbSA9IHRoaXMuZG9tO1xuICAgICAgICBjb25zdCBkb2MgPSBkb20uZG9jdW1lbnQ7XG4gICAgICAgIGNvbnN0IHdpbiA9IGRvbS53aW5kb3c7XG4gICAgICAgIGNvbnN0IGhhbmRsZXIgPSB0aGlzLmhhbmRsZXI7XG4gICAgICAgIGlmICh3aW4ubmF2aWdhdG9yLnBvaW50ZXJFbmFibGVkKSB7XG4gICAgICAgICAgICBkb2MuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcmRvd24nLCBoYW5kbGVyLCBkZWZhdWx0Q2FwdHVyZUV2ZW50SW5pdCk7XG4gICAgICAgIH1cbiAgICAgICAgZG9jLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBoYW5kbGVyLCBkZWZhdWx0Q2FwdHVyZUV2ZW50SW5pdCk7XG4gICAgICAgIGRvYy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBoYW5kbGVyLCBkZWZhdWx0Q2FwdHVyZUV2ZW50SW5pdCk7XG4gICAgICAgIGRvYy5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIGhhbmRsZXIsIGRlZmF1bHRDYXB0dXJlRXZlbnRJbml0KTtcbiAgICAgICAgd2luLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBoYW5kbGVyLCBkZWZhdWx0QnViYmxlRXZlbnRJbml0KTtcbiAgICB9XG4gICAgcmVtb3ZlTGlzdGVuZXJzKCkge1xuICAgICAgICBjb25zdCBkb20gPSB0aGlzLmRvbTtcbiAgICAgICAgY29uc3QgZG9jID0gZG9tLmRvY3VtZW50O1xuICAgICAgICBjb25zdCB3aW4gPSBkb20ud2luZG93O1xuICAgICAgICBjb25zdCBoYW5kbGVyID0gdGhpcy5oYW5kbGVyO1xuICAgICAgICBpZiAod2luLm5hdmlnYXRvci5wb2ludGVyRW5hYmxlZCkge1xuICAgICAgICAgICAgZG9jLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJkb3duJywgaGFuZGxlciwgZGVmYXVsdENhcHR1cmVFdmVudEluaXQpO1xuICAgICAgICB9XG4gICAgICAgIGRvYy5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgaGFuZGxlciwgZGVmYXVsdENhcHR1cmVFdmVudEluaXQpO1xuICAgICAgICBkb2MucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgaGFuZGxlciwgZGVmYXVsdENhcHR1cmVFdmVudEluaXQpO1xuICAgICAgICBkb2MucmVtb3ZlRXZlbnRMaXN0ZW5lcignZm9jdXMnLCBoYW5kbGVyLCBkZWZhdWx0Q2FwdHVyZUV2ZW50SW5pdCk7XG4gICAgICAgIHdpbi5yZW1vdmVFdmVudExpc3RlbmVyKCdibHVyJywgaGFuZGxlciwgZGVmYXVsdEJ1YmJsZUV2ZW50SW5pdCk7XG4gICAgfVxufVxubGV0IEJsdXIgPSBjbGFzcyBCbHVyIHtcbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50LCBkb20sIHNjaGVkdWxlcikge1xuICAgICAgICB0aGlzLmRvbSA9IGRvbTtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEJ5IGRlZmF1bHQsIHRoZSBiZWhhdmlvciBzaG91bGQgYmUgbGVhc3Qgc3VycHJpc2UgcG9zc2libGUsIHRoYXQ6XG4gICAgICAgICAqXG4gICAgICAgICAqIGl0IHNlYXJjaGVzIGZvciBhbnl0aGluZyBmcm9tIHJvb3QgY29udGV4dCxcbiAgICAgICAgICogYW5kIHJvb3QgY29udGV4dCBpcyBkb2N1bWVudCBib2R5XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmxpbmtlZE11bHRpcGxlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5zZWFyY2hTdWJUcmVlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5saW5raW5nQ29udGV4dCA9IG51bGw7XG4gICAgICAgIHRoaXMudmFsdWUgPSB1bnNldDtcbiAgICAgICAgdGhpcy5tYW5hZ2VyID0gQmx1ck1hbmFnZXIuY3JlYXRlRm9yKGRvbSwgc2NoZWR1bGVyKTtcbiAgICB9XG4gICAgYWZ0ZXJBdHRhY2goKSB7XG4gICAgICAgIHRoaXMubWFuYWdlci5yZWdpc3Rlcih0aGlzKTtcbiAgICB9XG4gICAgYmVmb3JlRGV0YWNoKCkge1xuICAgICAgICB0aGlzLm1hbmFnZXIudW5yZWdpc3Rlcih0aGlzKTtcbiAgICB9XG4gICAgaGFuZGxlRXZlbnRUYXJnZXQodGFyZ2V0KSB7XG4gICAgICAgIGlmICh0aGlzLnZhbHVlID09PSBmYWxzZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRvbSA9IHRoaXMuZG9tO1xuICAgICAgICBpZiAodGFyZ2V0ID09PSBkb20ud2luZG93IHx8IHRhcmdldCA9PT0gZG9tLmRvY3VtZW50IHx8ICF0aGlzLmNvbnRhaW5zKHRhcmdldCkpIHtcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlckJsdXIoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb250YWlucyh0YXJnZXQpIHtcbiAgICAgICAgaWYgKCF0aGlzLnZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGVscztcbiAgICAgICAgbGV0IGk7XG4gICAgICAgIGxldCBqLCBqajtcbiAgICAgICAgbGV0IGxpbms7XG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLmVsZW1lbnQ7XG4gICAgICAgIGlmIChjb250YWluc0VsZW1lbnRPclNoYWRvd1Jvb3QoZWxlbWVudCwgdGFyZ2V0KSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLmxpbmtlZFdpdGgpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkb2MgPSB0aGlzLmRvbS5kb2N1bWVudDtcbiAgICAgICAgY29uc3QgbGlua2VkV2l0aCA9IHRoaXMubGlua2VkV2l0aDtcbiAgICAgICAgY29uc3QgbGlua2luZ0NvbnRleHQgPSB0aGlzLmxpbmtpbmdDb250ZXh0O1xuICAgICAgICBjb25zdCBzZWFyY2hTdWJUcmVlID0gdGhpcy5zZWFyY2hTdWJUcmVlO1xuICAgICAgICBjb25zdCBsaW5rZWRNdWx0aXBsZSA9IHRoaXMubGlua2VkTXVsdGlwbGU7XG4gICAgICAgIGNvbnN0IGxpbmtzID0gQXJyYXkuaXNBcnJheShsaW5rZWRXaXRoKSA/IGxpbmtlZFdpdGggOiBbbGlua2VkV2l0aF07XG4gICAgICAgIGNvbnN0IGNvbnRleHROb2RlID0gKHR5cGVvZiBsaW5raW5nQ29udGV4dCA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgID8gZG9jLnF1ZXJ5U2VsZWN0b3IobGlua2luZ0NvbnRleHQpXG4gICAgICAgICAgICA6IGxpbmtpbmdDb250ZXh0KVxuICAgICAgICAgICAgfHwgZG9jLmJvZHk7XG4gICAgICAgIGNvbnN0IGlpID0gbGlua3MubGVuZ3RoO1xuICAgICAgICBmb3IgKGkgPSAwOyBpaSA+IGk7ICsraSkge1xuICAgICAgICAgICAgbGluayA9IGxpbmtzW2ldO1xuICAgICAgICAgICAgLy8gV2hlbiB1c2VyIHNwZWNpZnkgdG8gbGluayB3aXRoIHNvbWV0aGluZyBieSBhIHN0cmluZywgaXQgYWN0cyBhcyBhIENTUyBzZWxlY3RvclxuICAgICAgICAgICAgLy8gV2UgbmVlZCB0byBkbyBzb21lIHF1ZXJ5aW5nIHN0dWZmIHRvIGRldGVybWluZSBpZiB0YXJnZXQgYWJvdmUgaXMgY29udGFpbmVkLlxuICAgICAgICAgICAgaWYgKHR5cGVvZiBsaW5rID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIC8vIERlZmF1bHQgYmVoYXZpb3IsIHNlYXJjaCB0aGUgd2hvbGUgdHJlZSwgZnJvbSBjb250ZXh0IHRoYXQgdXNlciBzcGVjaWZpZWQsIHdoaWNoIGRlZmF1bHQgdG8gZG9jdW1lbnQgYm9keVxuICAgICAgICAgICAgICAgIGlmIChzZWFyY2hTdWJUcmVlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHRvZG86IGFyZSB0aGVyZSB0b28gbWFueSBrbm9icz8/IENvbnNpZGVyIHJlbW92ZSBcImxpbmtlZE11bHRpcGxlXCI/P1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWxpbmtlZE11bHRpcGxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbCA9IGNvbnRleHROb2RlLnF1ZXJ5U2VsZWN0b3IobGluayk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHMgPSBlbCAhPT0gbnVsbCA/IFtlbF0gOiBQTEFURk9STS5lbXB0eUFycmF5O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxzID0gY29udGV4dE5vZGUucXVlcnlTZWxlY3RvckFsbChsaW5rKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBqaiA9IGVscy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoaiA9IDA7IGpqID4gajsgKytqKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxzW2pdLmNvbnRhaW5zKHRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZGVmYXVsdCB0byBkb2N1bWVudCBib2R5LCBpZiB1c2VyIGRpZG4ndCBkZWZpbmUgYSBsaW5raW5nIGNvbnRleHQsIGFuZCB3YW50ZWQgdG8gaWdub3JlIHN1YnRyZWUuXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgc3BlY2lmaWNhbGx5IHBlcmZvcm1hbnQgYW5kIHVzZWZ1bCBmb3IgZGlhbG9ncywgcGx1Z2luc1xuICAgICAgICAgICAgICAgICAgICAvLyB0aGF0IHVzdWFsbHkgZ2VuZXJhdGUgY29udGVudHMgdG8gZG9jdW1lbnQgYm9keVxuICAgICAgICAgICAgICAgICAgICBlbHMgPSBjb250ZXh0Tm9kZS5jaGlsZHJlbjtcbiAgICAgICAgICAgICAgICAgICAgamogPSBlbHMubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGogPSAwOyBqaiA+IGo7ICsraikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsc1tqXS5tYXRjaGVzKGxpbmspKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBXaGVuIHVzZXIgcGFzc2VkIGluIHNvbWV0aGluZyB0aGF0IGlzIG5vdCBhIHN0cmluZyxcbiAgICAgICAgICAgICAgICAvLyBzaW1wbHkgY2hlY2sgaWYgaGFzIG1ldGhvZCBgY29udGFpbnNgIChhbGxvdyBkdWNrIHR5cGluZylcbiAgICAgICAgICAgICAgICAvLyBhbmQgY2FsbCBpdCBhZ2FpbnN0IHRhcmdldC5cbiAgICAgICAgICAgICAgICAvLyBUaGlzIGVuYWJsZXMgZmxleGlibGUgdXNhZ2VzXG4gICAgICAgICAgICAgICAgaWYgKGxpbmsgJiYgbGluay5jb250YWlucyh0YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHRyaWdnZXJCbHVyKCkge1xuICAgICAgICB0aGlzLnZhbHVlID0gZmFsc2U7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5vbkJsdXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRoaXMub25CbHVyLmNhbGwobnVsbCk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuX19kZWNvcmF0ZShbXG4gICAgYmluZGFibGUoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuXSwgQmx1ci5wcm90b3R5cGUsIFwidmFsdWVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGJpbmRhYmxlKCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEZ1bmN0aW9uKVxuXSwgQmx1ci5wcm90b3R5cGUsIFwib25CbHVyXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBiaW5kYWJsZSgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG5dLCBCbHVyLnByb3RvdHlwZSwgXCJsaW5rZWRXaXRoXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBiaW5kYWJsZSgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBCb29sZWFuKVxuXSwgQmx1ci5wcm90b3R5cGUsIFwibGlua2VkTXVsdGlwbGVcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIGJpbmRhYmxlKCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIEJvb2xlYW4pXG5dLCBCbHVyLnByb3RvdHlwZSwgXCJzZWFyY2hTdWJUcmVlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBiaW5kYWJsZSgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG5dLCBCbHVyLnByb3RvdHlwZSwgXCJsaW5raW5nQ29udGV4dFwiLCB2b2lkIDApO1xuQmx1ciA9IF9fZGVjb3JhdGUoW1xuICAgIGN1c3RvbUF0dHJpYnV0ZSgnYmx1cicpLFxuICAgIF9fcGFyYW0oMCwgSU5vZGUpLCBfX3BhcmFtKDEsIElET00pLCBfX3BhcmFtKDIsIElTY2hlZHVsZXIpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0LCBIVE1MRE9NLCBPYmplY3RdKVxuXSwgQmx1cik7XG5leHBvcnQgeyBCbHVyIH07XG5jb25zdCBjb250YWluc0VsZW1lbnRPclNoYWRvd1Jvb3QgPSAoY29udGFpbmVyLCB0YXJnZXQpID0+IHtcbiAgICBpZiAoY29udGFpbmVyLmNvbnRhaW5zKHRhcmdldCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGxldCBwYXJlbnROb2RlID0gbnVsbDtcbiAgICB3aGlsZSAodGFyZ2V0ICE9IG51bGwpIHtcbiAgICAgICAgaWYgKHRhcmdldCA9PT0gY29udGFpbmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBwYXJlbnROb2RlID0gdGFyZ2V0LnBhcmVudE5vZGU7XG4gICAgICAgIGlmIChwYXJlbnROb2RlID09PSBudWxsICYmIHRhcmdldC5ub2RlVHlwZSA9PT0gMTEgLyogRG9jdW1lbnRGcmFnbWVudCAqLykge1xuICAgICAgICAgICAgdGFyZ2V0ID0gdGFyZ2V0Lmhvc3Q7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICB0YXJnZXQgPSBwYXJlbnROb2RlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59O1xuY29uc3QgY3JlYXRlSGFuZGxlciA9IChtYW5hZ2VyLCBjaGVja1RhcmdldHMpID0+IHtcbiAgICAvLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgLy8gRVZFTlRTIE9SREVSXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvLyBwb2ludGVyZG93blxuICAgIC8vIHRvdWNoc3RhcnRcbiAgICAvLyBwb2ludGVydXBcbiAgICAvLyB0b3VjaGVuZFxuICAgIC8vIG1vdXNlZG93blxuICAgIC8vIC0tLS0tLS0tLS0tLS0tXG4gICAgLy8gQkxVUlxuICAgIC8vIEZPQ1VTXG4gICAgLy8gLS0tLS0tLS0tLS0tLS1cbiAgICAvLyBtb3VzZXVwXG4gICAgLy8gY2xpY2tcbiAgICAvL1xuICAgIC8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgIC8vXG4gICAgLy8gVGhlcmUgYXJlIGNhc2VzIGZvY3VzIGhhcHBlbnMgd2l0aG91dCBtb3VzZSBpbnRlcmFjdGlvbiAoa2V5Ym9hcmQpXG4gICAgLy8gU28gaXQgbmVlZHMgdG8gY2FwdHVyZSBib3RoIG1vdXNlIC8gZm9jdXMgbW92ZW1lbnRcbiAgICAvL1xuICAgIC8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgIGxldCBoYXNDaGVja2VkID0gZmFsc2U7XG4gICAgY29uc3QgcmV2ZXJ0Q2hlY2thZ2UgPSAoKSA9PiB7XG4gICAgICAgIGhhc0NoZWNrZWQgPSBmYWxzZTtcbiAgICB9O1xuICAgIGNvbnN0IG1hcmtDaGVja2VkID0gKCkgPT4ge1xuICAgICAgICBoYXNDaGVja2VkID0gdHJ1ZTtcbiAgICAgICAgbWFuYWdlci5zY2hlZHVsZXIucXVldWVSZW5kZXJUYXNrKHJldmVydENoZWNrYWdlLCB7IHByZWVtcHQ6IHRydWUgfSk7XG4gICAgfTtcbiAgICBjb25zdCBoYW5kbGVNb3VzZWRvd24gPSAoZSkgPT4ge1xuICAgICAgICBpZiAoIWhhc0NoZWNrZWQpIHtcbiAgICAgICAgICAgIGhhbmRsZUV2ZW50KGUpO1xuICAgICAgICAgICAgbWFya0NoZWNrZWQoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogSGFuZGxlIGdsb2JhbGx5IGNhcHR1cmVkIGZvY3VzIGV2ZW50XG4gICAgICogVGhpcyBjYW4gaGFwcGVuIHZpYSBhIGZldyB3YXk6XG4gICAgICogVXNlciBjbGlja3Mgb24gYSBmb2N1c2FibGUgZWxlbWVudFxuICAgICAqIFVzZXIgdXNlcyBrZXlib2FyZCB0byBuYXZpZ2F0ZSB0byBhIGZvY3VzYWJsZSBlbGVtZW50XG4gICAgICogVXNlciBnb2VzIGJhY2sgdG8gdGhlIHdpbmRvdyBmcm9tIGFub3RoZXIgYnJvd3NlciB0YWJcbiAgICAgKiBVc2VyIGNsaWNrcyBvbiBhIG5vbi1mb2N1c2FibGUgZWxlbWVudFxuICAgICAqIFVzZXIgY2xpY2tzIG9uIHRoZSB3aW5kb3csIG91dHNpZGUgb2YgdGhlIGRvY3VtZW50XG4gICAgICovXG4gICAgY29uc3QgaGFuZGxlRm9jdXMgPSAoZSkgPT4ge1xuICAgICAgICBpZiAoaGFzQ2hlY2tlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIHRoZXJlIGFyZSB0d28gd2F5IGEgZm9jdXMgZ2V0cyBjYXB0dXJlZCBvbiB3aW5kb3dcbiAgICAgICAgLy8gd2hlbiB0aGUgd2luZG93cyBpdHNlbGYgZ290IGZvY3VzXG4gICAgICAgIC8vIGFuZCB3aGVuIGFuIGVsZW1lbnQgaW4gdGhlIGRvY3VtZW50IGdldHMgZm9jdXNcbiAgICAgICAgLy8gd2hlbiB0aGUgd2luZG93IGl0c2VsZiBnb3QgZm9jdXMsIHJlYWN0aW5nIHRvIGl0IGlzIHF1aXRlIHVubmVjZXNzYXJ5XG4gICAgICAgIC8vIGFzIGl0IGRvZXNuJ3QgcmVhbGx5IGFmZmVjdCBlbGVtZW50IGluc2lkZSB0aGUgZG9jdW1lbnRcbiAgICAgICAgLy8gRG8gYSBzaW1wbGUgY2hlY2sgYW5kIGJhaWwgaW1tZWRpYXRlbHlcbiAgICAgICAgY29uc3QgaXNXaW5kb3cgPSBlLnRhcmdldCA9PT0gbWFuYWdlci5kb20ud2luZG93O1xuICAgICAgICBpZiAoaXNXaW5kb3cpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IGNoZWNrVGFyZ2V0cy5sZW5ndGg7IGlpID4gaTsgKytpKSB7XG4gICAgICAgICAgICAgICAgY2hlY2tUYXJnZXRzW2ldLnRyaWdnZXJCbHVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBoYW5kbGVFdmVudChlKTtcbiAgICAgICAgfVxuICAgICAgICBtYXJrQ2hlY2tlZCgpO1xuICAgIH07XG4gICAgY29uc3QgaGFuZGxlV2luZG93Qmx1ciA9ICgpID0+IHtcbiAgICAgICAgaGFzQ2hlY2tlZCA9IGZhbHNlO1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBjaGVja1RhcmdldHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgY2hlY2tUYXJnZXRzW2ldLnRyaWdnZXJCbHVyKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IGhhbmRsZUV2ZW50ID0gKGUpID0+IHtcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gZS5jb21wb3NlZCA/IGUuY29tcG9zZWRQYXRoKClbMF0gOiBlLnRhcmdldDtcbiAgICAgICAgaWYgKHRhcmdldCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IGNoZWNrVGFyZ2V0cy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICBjaGVja1RhcmdldHNbaV0uaGFuZGxlRXZlbnRUYXJnZXQodGFyZ2V0KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIHtcbiAgICAgICAgb25wb2ludGVyZG93bjogaGFuZGxlTW91c2Vkb3duLFxuICAgICAgICBvbnRvdWNoc3RhcnQ6IGhhbmRsZU1vdXNlZG93bixcbiAgICAgICAgb25tb3VzZWRvd246IGhhbmRsZU1vdXNlZG93bixcbiAgICAgICAgb25mb2N1czogaGFuZGxlRm9jdXMsXG4gICAgICAgIG9uYmx1cjogaGFuZGxlV2luZG93Qmx1cixcbiAgICAgICAgaGFuZGxlRXZlbnQoZSkge1xuICAgICAgICAgICAgdGhpc1tgb24ke2UudHlwZX1gXShlKTtcbiAgICAgICAgfVxuICAgIH07XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Ymx1ci5qcy5tYXAiLCJpbXBvcnQgeyBfX2RlY29yYXRlLCBfX21ldGFkYXRhLCBfX3BhcmFtIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBiaW5kYWJsZSwgQmluZGluZ01vZGUsIGN1c3RvbUF0dHJpYnV0ZSwgSURPTSwgSU5vZGUgfSBmcm9tICdAYXVyZWxpYS9ydW50aW1lJztcbmltcG9ydCB7IEhUTUxET00gfSBmcm9tICcuLi8uLi9kb20nO1xuLyoqXG4gKiBGb2N1cyBhdHRyaWJ1dGUgZm9yIGVsZW1lbnQgZm9jdXMgYmluZGluZ1xuICovXG5sZXQgRm9jdXMgPSBjbGFzcyBGb2N1cyB7XG4gICAgY29uc3RydWN0b3IoZWxlbWVudCwgZG9tKSB7XG4gICAgICAgIHRoaXMuZG9tID0gZG9tO1xuICAgICAgICAvKipcbiAgICAgICAgICogSW5kaWNhdGVzIHdoZXRoZXIgYGFwcGx5YCBzaG91bGQgYmUgY2FsbGVkIHdoZW4gYGFmdGVyQXR0YWNoYCBjYWxsYmFjayBpcyBpbnZva2VkXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm5lZWRzQXBwbHkgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICB9XG4gICAgYmVmb3JlQmluZCgpIHtcbiAgICAgICAgdGhpcy52YWx1ZUNoYW5nZWQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW52b2tlZCBldmVyeXRpbWUgdGhlIGJvdW5kIHZhbHVlIGNoYW5nZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbmV3VmFsdWUgLSBUaGUgbmV3IHZhbHVlLlxuICAgICAqL1xuICAgIHZhbHVlQ2hhbmdlZCgpIHtcbiAgICAgICAgLy8gSW4gdGhlb3J5LCB3ZSBjb3VsZC9zaG91bGQgcmVhY3QgaW1tZWRpYXRlbHlcbiAgICAgICAgLy8gYnV0IGZvY3VzIHN0YXRlIG9mIGFuIGVsZW1lbnQgY2Fubm90IGJlIGFjaGlldmVkXG4gICAgICAgIC8vIHdoaWxlIGl0J3MgZGlzY29ubmVjdGVkIGZyb20gdGhlIGRvY3VtZW50XG4gICAgICAgIC8vIHRodXMsIHRoZXJlIG5lZXNkIHRvIGJlIGEgY2hlY2sgaWYgaXQncyBjdXJyZW50bHkgY29ubmVjdGVkIG9yIG5vdFxuICAgICAgICAvLyBiZWZvcmUgYXBwbHlpbmcgdGhlIHZhbHVlIHRvIHRoZSBlbGVtZW50XG4gICAgICAgIGlmICh0aGlzLiRjb250cm9sbGVyLnN0YXRlICYgMzIgLyogaXNBdHRhY2hlZCAqLykge1xuICAgICAgICAgICAgdGhpcy5hcHBseSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gSWYgdGhlIGVsZW1lbnQgaXMgbm90IGN1cnJlbnRseSBjb25uZWN0XG4gICAgICAgICAgICAvLyB0b2dnbGUgdGhlIGZsYWcgdG8gYWRkIHBlbmRpbmcgd29yayBmb3IgbGF0ZXJcbiAgICAgICAgICAgIC8vIGluIGFmdGVyQXR0YWNoIGxpZmVjeWNsZVxuICAgICAgICAgICAgdGhpcy5uZWVkc0FwcGx5ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbnZva2VkIHdoZW4gdGhlIGF0dHJpYnV0ZSBpcyBhZnRlckF0dGFjaCB0byB0aGUgRE9NLlxuICAgICAqL1xuICAgIGFmdGVyQXR0YWNoKCkge1xuICAgICAgICBpZiAodGhpcy5uZWVkc0FwcGx5KSB7XG4gICAgICAgICAgICB0aGlzLm5lZWRzQXBwbHkgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuYXBwbHkoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBlbCA9IHRoaXMuZWxlbWVudDtcbiAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCB0aGlzKTtcbiAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIHRoaXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbnZva2VkIHdoZW4gdGhlIGF0dHJpYnV0ZSBpcyBhZnRlckRldGFjaCBmcm9tIHRoZSBET00uXG4gICAgICovXG4gICAgYWZ0ZXJEZXRhY2goKSB7XG4gICAgICAgIGNvbnN0IGVsID0gdGhpcy5lbGVtZW50O1xuICAgICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKCdmb2N1cycsIHRoaXMpO1xuICAgICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKCdibHVyJywgdGhpcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEV2ZW50VGFyZ2V0IGludGVyZmFjZSBoYW5kbGVyIGZvciBiZXR0ZXIgbWVtb3J5IHVzYWdlXG4gICAgICovXG4gICAgaGFuZGxlRXZlbnQoZSkge1xuICAgICAgICAvLyB0aGVyZSBhcmUgb25seSB0d28gZXZlbnQgbGlzdGVuZWQgdG9cbiAgICAgICAgLy8gaWYgdGhlIGV2ZW4gaXMgZm9jdXMsIGl0IG1lbmFucyB0aGUgZWxlbWVudCBpcyBmb2N1c2VkXG4gICAgICAgIC8vIG9ubHkgbmVlZCB0byBzd2l0Y2ggdGhlIHZhbHVlIHRvIHRydWVcbiAgICAgICAgaWYgKGUudHlwZSA9PT0gJ2ZvY3VzJykge1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5kb20uZG9jdW1lbnQuYWN0aXZlRWxlbWVudCAhPT0gdGhpcy5lbGVtZW50KSB7XG4gICAgICAgICAgICAvLyBlbHNlLCBpdCdzIGJsdXIgZXZlbnRcbiAgICAgICAgICAgIC8vIHdoZW4gYSBibHVyIGV2ZW50IGhhcHBlbnMsIHRoZXJlIGFyZSB0d28gc2l0dWF0aW9uc1xuICAgICAgICAgICAgLy8gMS4gdGhlIGVsZW1lbnQgaXRzZWxmIGxvc3QgdGhlIGZvY3VzXG4gICAgICAgICAgICAvLyAyLiB3aW5kb3cgbG9zdCB0aGUgZm9jdXNcbiAgICAgICAgICAgIC8vIFRvIGhhbmRsZSBib3RoICgxKSBhbmQgKDIpLCBvbmx5IG5lZWQgdG8gY2hlY2sgaWZcbiAgICAgICAgICAgIC8vIGN1cnJlbnQgYWN0aXZlIGVsZW1lbnQgaXMgc3RpbGwgdGhlIHNhbWUgZWxlbWVudCBvZiB0aGlzIGZvY3VzIGN1c3RvbSBhdHRyaWJ1dGVcbiAgICAgICAgICAgIC8vIElmIGl0J3Mgbm90LCBpdCdzIGEgYmx1ciBldmVudCBoYXBwZW5lZCBvbiBXaW5kb3cgYmVjYXVzZSB0aGUgYnJvd3NlciB0YWIgbG9zdCBmb2N1c1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZvY3VzL2JsdXIgYmFzZWQgb24gY3VycmVudCB2YWx1ZVxuICAgICAqL1xuICAgIGFwcGx5KCkge1xuICAgICAgICBjb25zdCBlbCA9IHRoaXMuZWxlbWVudDtcbiAgICAgICAgaWYgKHRoaXMudmFsdWUpIHtcbiAgICAgICAgICAgIGVsLmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBlbC5ibHVyKCk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuX19kZWNvcmF0ZShbXG4gICAgYmluZGFibGUoeyBtb2RlOiBCaW5kaW5nTW9kZS50d29XYXkgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbl0sIEZvY3VzLnByb3RvdHlwZSwgXCJ2YWx1ZVwiLCB2b2lkIDApO1xuRm9jdXMgPSBfX2RlY29yYXRlKFtcbiAgICBjdXN0b21BdHRyaWJ1dGUoJ2ZvY3VzJyksXG4gICAgX19wYXJhbSgwLCBJTm9kZSksIF9fcGFyYW0oMSwgSURPTSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3QsIEhUTUxET01dKVxuXSwgRm9jdXMpO1xuZXhwb3J0IHsgRm9jdXMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZvY3VzLmpzLm1hcCIsImltcG9ydCB7IF9fZGVjb3JhdGUsIF9fbWV0YWRhdGEsIF9fcGFyYW0gfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IG5leHRJZCwgfSBmcm9tICdAYXVyZWxpYS9rZXJuZWwnO1xuaW1wb3J0IHsgYmluZGFibGUsIENvbnRpbnVhdGlvblRhc2ssIElET00sIElSZW5kZXJMb2NhdGlvbiwgSVZpZXdGYWN0b3J5LCBMaWZlY3ljbGVUYXNrLCB0ZW1wbGF0ZUNvbnRyb2xsZXIsIFRlcm1pbmFsVGFzaywgfSBmcm9tICdAYXVyZWxpYS9ydW50aW1lJztcbmltcG9ydCB7IEhUTUxET00sIH0gZnJvbSAnLi4vLi4vZG9tJztcbmZ1bmN0aW9uIHRvVGFzayhtYXliZVByb21pc2VPclRhc2spIHtcbiAgICBpZiAobWF5YmVQcm9taXNlT3JUYXNrID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIExpZmVjeWNsZVRhc2suZG9uZTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBtYXliZVByb21pc2VPclRhc2sudGhlbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gbmV3IFRlcm1pbmFsVGFzayhtYXliZVByb21pc2VPclRhc2spO1xuICAgIH1cbiAgICByZXR1cm4gbWF5YmVQcm9taXNlT3JUYXNrO1xufVxubGV0IFBvcnRhbCA9IGNsYXNzIFBvcnRhbCB7XG4gICAgY29uc3RydWN0b3IoZmFjdG9yeSwgb3JpZ2luYWxMb2MsIGRvbSkge1xuICAgICAgICB0aGlzLmZhY3RvcnkgPSBmYWN0b3J5O1xuICAgICAgICB0aGlzLm9yaWdpbmFsTG9jID0gb3JpZ2luYWxMb2M7XG4gICAgICAgIHRoaXMuZG9tID0gZG9tO1xuICAgICAgICB0aGlzLmlkID0gbmV4dElkKCdhdSRjb21wb25lbnQnKTtcbiAgICAgICAgdGhpcy5zdHJpY3QgPSBmYWxzZTtcbiAgICAgICAgdGhpcy50YXNrID0gTGlmZWN5Y2xlVGFzay5kb25lO1xuICAgICAgICAvLyB0byBtYWtlIHRoZSBzaGFwZSBvZiB0aGlzIG9iamVjdCBjb25zaXN0ZW50LlxuICAgICAgICAvLyB0b2RvOiBpcyB0aGlzIG5lY2Vzc2FyeVxuICAgICAgICB0aGlzLmN1cnJlbnRUYXJnZXQgPSBkb20uY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHRoaXMudmlldyA9IHRoaXMuZmFjdG9yeS5jcmVhdGUoKTtcbiAgICAgICAgZG9tLnNldEVmZmVjdGl2ZVBhcmVudE5vZGUodGhpcy52aWV3Lm5vZGVzLCBvcmlnaW5hbExvYyk7XG4gICAgICAgIHRoaXMudmlldy5ob2xkKG9yaWdpbmFsTG9jLCAxIC8qIGluc2VydEJlZm9yZSAqLyk7XG4gICAgfVxuICAgIGJlZm9yZUJpbmQoZmxhZ3MpIHtcbiAgICAgICAgaWYgKHRoaXMuY2FsbGJhY2tDb250ZXh0ID09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuY2FsbGJhY2tDb250ZXh0ID0gdGhpcy4kY29udHJvbGxlci5zY29wZS5iaW5kaW5nQ29udGV4dDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy52aWV3LmJpbmQoZmxhZ3MsIHRoaXMuJGNvbnRyb2xsZXIuc2NvcGUpO1xuICAgIH1cbiAgICBhZnRlckF0dGFjaChmbGFncykge1xuICAgICAgICB0aGlzLnRhcmdldENoYW5nZWQoKTtcbiAgICB9XG4gICAgYmVmb3JlRGV0YWNoKGZsYWdzKSB7XG4gICAgICAgIHRoaXMudGFzayA9IHRoaXMuZGVhY3RpdmF0ZShmbGFncyk7XG4gICAgfVxuICAgIGJlZm9yZVVuYmluZChmbGFncykge1xuICAgICAgICB0aGlzLmNhbGxiYWNrQ29udGV4dCA9IG51bGw7XG4gICAgICAgIHJldHVybiB0aGlzLnZpZXcudW5iaW5kKGZsYWdzKTtcbiAgICB9XG4gICAgdGFyZ2V0Q2hhbmdlZCgpIHtcbiAgICAgICAgY29uc3QgJGNvbnRyb2xsZXIgPSB0aGlzLiRjb250cm9sbGVyO1xuICAgICAgICBpZiAoKCRjb250cm9sbGVyLnN0YXRlICYgNCAvKiBpc0JvdW5kICovKSA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucHJvamVjdCgkY29udHJvbGxlci5mbGFncyk7XG4gICAgfVxuICAgIHByb2plY3QoZmxhZ3MpIHtcbiAgICAgICAgY29uc3Qgb2xkVGFyZ2V0ID0gdGhpcy5jdXJyZW50VGFyZ2V0O1xuICAgICAgICBjb25zdCBuZXdUYXJnZXQgPSB0aGlzLmN1cnJlbnRUYXJnZXQgPSB0aGlzLnJlc29sdmVUYXJnZXQoKTtcbiAgICAgICAgaWYgKG9sZFRhcmdldCA9PT0gbmV3VGFyZ2V0KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50YXNrID0gdGhpcy5kZWFjdGl2YXRlKGZsYWdzKTtcbiAgICAgICAgdGhpcy50YXNrID0gdGhpcy5hY3RpdmF0ZShuZXdUYXJnZXQsIGZsYWdzKTtcbiAgICB9XG4gICAgYWN0aXZhdGUodGFyZ2V0LCBmbGFncykge1xuICAgICAgICBjb25zdCB7IGFjdGl2YXRpbmcsIGFjdGl2YXRlZCwgY2FsbGJhY2tDb250ZXh0LCB2aWV3IH0gPSB0aGlzO1xuICAgICAgICBsZXQgdGFzayA9IHRoaXMudGFzaztcbiAgICAgICAgdmlldy5ob2xkKHRhcmdldCwgMiAvKiBhcHBlbmQgKi8pO1xuICAgICAgICBpZiAoKHRoaXMuJGNvbnRyb2xsZXIuc3RhdGUgJiA0MCAvKiBpc0F0dGFjaGVkT3JBdHRhY2hpbmcgKi8pID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdGFzaztcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGFjdGl2YXRpbmcgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGlmICh0YXNrLmRvbmUpIHtcbiAgICAgICAgICAgICAgICB0YXNrID0gdG9UYXNrKGFjdGl2YXRpbmcuY2FsbChjYWxsYmFja0NvbnRleHQsIHRhcmdldCwgdmlldykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGFzayA9IG5ldyBDb250aW51YXRpb25UYXNrKHRhc2ssIGFjdGl2YXRpbmcsIGNhbGxiYWNrQ29udGV4dCwgdGFyZ2V0LCB2aWV3KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGFzay5kb25lKSB7XG4gICAgICAgICAgICB2aWV3LmF0dGFjaChmbGFncyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0YXNrID0gbmV3IENvbnRpbnVhdGlvblRhc2sodGFzaywgdmlldy5hdHRhY2gsIHZpZXcsIGZsYWdzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGFjdGl2YXRlZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgaWYgKHRhc2suZG9uZSkge1xuICAgICAgICAgICAgICAgIC8vIFRPRE86IGNoYWluIHRoaXMgdXAgd2l0aCBSQUYgcXVldWUgbW91bnQgY2FsbGJhY2sgc28gYWN0aXZhdGVkIGlzIGNhbGxlZCBvbmx5IHdoZW5cbiAgICAgICAgICAgICAgICAvLyBub2RlIGlzIGFjdHVhbGx5IG1vdW50ZWQgKGlzIHRoaXMgbmVlZGVkIGFzIHBlciB0aGUgc3BlYyBvZiB0aGlzIHJlc291cmNlPylcbiAgICAgICAgICAgICAgICB0YXNrID0gdG9UYXNrKGFjdGl2YXRlZC5jYWxsKGNhbGxiYWNrQ29udGV4dCwgdGFyZ2V0LCB2aWV3KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0YXNrID0gbmV3IENvbnRpbnVhdGlvblRhc2sodGFzaywgYWN0aXZhdGVkLCBjYWxsYmFja0NvbnRleHQsIHRhcmdldCwgdmlldyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRhc2s7XG4gICAgfVxuICAgIGRlYWN0aXZhdGUoZmxhZ3MpIHtcbiAgICAgICAgY29uc3QgeyBkZWFjdGl2YXRpbmcsIGRlYWN0aXZhdGVkLCBjYWxsYmFja0NvbnRleHQsIHZpZXcsIHRhcmdldDogdGFyZ2V0IH0gPSB0aGlzO1xuICAgICAgICBsZXQgdGFzayA9IHRoaXMudGFzaztcbiAgICAgICAgaWYgKHR5cGVvZiBkZWFjdGl2YXRpbmcgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGlmICh0YXNrLmRvbmUpIHtcbiAgICAgICAgICAgICAgICB0YXNrID0gdG9UYXNrKGRlYWN0aXZhdGluZy5jYWxsKGNhbGxiYWNrQ29udGV4dCwgdGFyZ2V0LCB2aWV3KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0YXNrID0gbmV3IENvbnRpbnVhdGlvblRhc2sodGFzaywgZGVhY3RpdmF0aW5nLCBjYWxsYmFja0NvbnRleHQsIHRhcmdldCwgdmlldyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRhc2suZG9uZSkge1xuICAgICAgICAgICAgdmlldy5kZXRhY2goZmxhZ3MpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGFzayA9IG5ldyBDb250aW51YXRpb25UYXNrKHRhc2ssIHZpZXcuZGV0YWNoLCB2aWV3LCBmbGFncyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBkZWFjdGl2YXRlZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgaWYgKHRhc2suZG9uZSkge1xuICAgICAgICAgICAgICAgIHRhc2sgPSB0b1Rhc2soZGVhY3RpdmF0ZWQuY2FsbChjYWxsYmFja0NvbnRleHQsIHRhcmdldCwgdmlldykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGFzayA9IG5ldyBDb250aW51YXRpb25UYXNrKHRhc2ssIGRlYWN0aXZhdGVkLCBjYWxsYmFja0NvbnRleHQsIHRhcmdldCwgdmlldyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRhc2s7XG4gICAgfVxuICAgIHJlc29sdmVUYXJnZXQoKSB7XG4gICAgICAgIGNvbnN0IGRvbSA9IHRoaXMuZG9tO1xuICAgICAgICAvLyB3aXRoIGEgJCBpbiBmcm9udCB0byBtYWtlIGl0IGxlc3MgY29uZnVzaW5nL2Vycm9yIHByb25lXG4gICAgICAgIGNvbnN0ICRkb2N1bWVudCA9IGRvbS5kb2N1bWVudDtcbiAgICAgICAgbGV0IHRhcmdldCA9IHRoaXMudGFyZ2V0O1xuICAgICAgICBsZXQgY29udGV4dCA9IHRoaXMucmVuZGVyQ29udGV4dDtcbiAgICAgICAgaWYgKHR5cGVvZiB0YXJnZXQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBsZXQgcXVlcnlDb250ZXh0ID0gJGRvY3VtZW50O1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBjb250ZXh0ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIGNvbnRleHQgPSAkZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkb20uaXNOb2RlSW5zdGFuY2UoY29udGV4dCkpIHtcbiAgICAgICAgICAgICAgICBxdWVyeUNvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGFyZ2V0ID0gcXVlcnlDb250ZXh0LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZG9tLmlzTm9kZUluc3RhbmNlKHRhcmdldCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRhcmdldCA9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zdHJpY3QpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlbmRlciB0YXJnZXQgbm90IGZvdW5kJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0YXJnZXQgPSAkZG9jdW1lbnQuYm9keTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGFyZ2V0O1xuICAgIH1cbn07XG5fX2RlY29yYXRlKFtcbiAgICBiaW5kYWJsZSh7IHByaW1hcnk6IHRydWUgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbl0sIFBvcnRhbC5wcm90b3R5cGUsIFwidGFyZ2V0XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBiaW5kYWJsZSh7IGNhbGxiYWNrOiAndGFyZ2V0Q2hhbmdlZCcgfSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbl0sIFBvcnRhbC5wcm90b3R5cGUsIFwicmVuZGVyQ29udGV4dFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYmluZGFibGUoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbl0sIFBvcnRhbC5wcm90b3R5cGUsIFwic3RyaWN0XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBiaW5kYWJsZSgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBGdW5jdGlvbilcbl0sIFBvcnRhbC5wcm90b3R5cGUsIFwiZGVhY3RpdmF0aW5nXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBiaW5kYWJsZSgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBGdW5jdGlvbilcbl0sIFBvcnRhbC5wcm90b3R5cGUsIFwiYWN0aXZhdGluZ1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYmluZGFibGUoKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgRnVuY3Rpb24pXG5dLCBQb3J0YWwucHJvdG90eXBlLCBcImRlYWN0aXZhdGVkXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBiaW5kYWJsZSgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBGdW5jdGlvbilcbl0sIFBvcnRhbC5wcm90b3R5cGUsIFwiYWN0aXZhdGVkXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBiaW5kYWJsZSgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG5dLCBQb3J0YWwucHJvdG90eXBlLCBcImNhbGxiYWNrQ29udGV4dFwiLCB2b2lkIDApO1xuUG9ydGFsID0gX19kZWNvcmF0ZShbXG4gICAgdGVtcGxhdGVDb250cm9sbGVyKCdwb3J0YWwnKSxcbiAgICBfX3BhcmFtKDAsIElWaWV3RmFjdG9yeSksXG4gICAgX19wYXJhbSgxLCBJUmVuZGVyTG9jYXRpb24pLFxuICAgIF9fcGFyYW0oMiwgSURPTSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3QsIE9iamVjdCwgSFRNTERPTV0pXG5dLCBQb3J0YWwpO1xuZXhwb3J0IHsgUG9ydGFsIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wb3J0YWwuanMubWFwIiwiaW1wb3J0IHsgX19kZWNvcmF0ZSwgX19tZXRhZGF0YSwgX19wYXJhbSB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgbmV4dElkLCBQTEFURk9STSwgfSBmcm9tICdAYXVyZWxpYS9rZXJuZWwnO1xuaW1wb3J0IHsgQmluZGluZ01vZGUsIENvbnRpbnVhdGlvblRhc2ssIElET00sIElUYXJnZXRlZEluc3RydWN0aW9uLCBMaWZlY3ljbGVUYXNrLCBQcm9taXNlVGFzaywgQ3VzdG9tRWxlbWVudERlZmluaXRpb24sIGJpbmRhYmxlLCBjdXN0b21FbGVtZW50LCBnZXRSZW5kZXJDb250ZXh0LCB9IGZyb20gJ0BhdXJlbGlhL3J1bnRpbWUnO1xuaW1wb3J0IHsgY3JlYXRlRWxlbWVudCwgfSBmcm9tICcuLi8uLi9jcmVhdGUtZWxlbWVudCc7XG5jb25zdCBiaW5kYWJsZXMgPSBbJ3N1YmplY3QnLCAnY29tcG9zaW5nJ107XG5sZXQgQ29tcG9zZSA9IGNsYXNzIENvbXBvc2Uge1xuICAgIGNvbnN0cnVjdG9yKGRvbSwgaW5zdHJ1Y3Rpb24pIHtcbiAgICAgICAgdGhpcy5kb20gPSBkb207XG4gICAgICAgIHRoaXMuaWQgPSBuZXh0SWQoJ2F1JGNvbXBvbmVudCcpO1xuICAgICAgICB0aGlzLnN1YmplY3QgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMuY29tcG9zaW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMudmlldyA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy50YXNrID0gTGlmZWN5Y2xlVGFzay5kb25lO1xuICAgICAgICB0aGlzLmxhc3RTdWJqZWN0ID0gdm9pZCAwO1xuICAgICAgICB0aGlzLnByb3BlcnRpZXMgPSBpbnN0cnVjdGlvbi5pbnN0cnVjdGlvbnNcbiAgICAgICAgICAgIC5maWx0ZXIoKHgpID0+ICFiaW5kYWJsZXMuaW5jbHVkZXMoeC50bykpXG4gICAgICAgICAgICAucmVkdWNlKChhY2MsIGl0ZW0pID0+IHtcbiAgICAgICAgICAgIGlmIChpdGVtLnRvKSB7XG4gICAgICAgICAgICAgICAgYWNjW2l0ZW0udG9dID0gaXRlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgIH0sIHt9KTtcbiAgICB9XG4gICAgYmVmb3JlQmluZChmbGFncykge1xuICAgICAgICBpZiAodGhpcy50YXNrLmRvbmUpIHtcbiAgICAgICAgICAgIHRoaXMudGFzayA9IHRoaXMuY29tcG9zZSh0aGlzLnN1YmplY3QsIGZsYWdzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudGFzayA9IG5ldyBDb250aW51YXRpb25UYXNrKHRoaXMudGFzaywgdGhpcy5jb21wb3NlLCB0aGlzLCB0aGlzLnN1YmplY3QsIGZsYWdzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy50YXNrLmRvbmUpIHtcbiAgICAgICAgICAgIHRoaXMudGFzayA9IHRoaXMuYmluZFZpZXcoZmxhZ3MpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy50YXNrID0gbmV3IENvbnRpbnVhdGlvblRhc2sodGhpcy50YXNrLCB0aGlzLmJpbmRWaWV3LCB0aGlzLCBmbGFncyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMudGFzaztcbiAgICB9XG4gICAgYmVmb3JlQXR0YWNoKGZsYWdzKSB7XG4gICAgICAgIGlmICh0aGlzLnRhc2suZG9uZSkge1xuICAgICAgICAgICAgdGhpcy5hdHRhY2hWaWV3KGZsYWdzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudGFzayA9IG5ldyBDb250aW51YXRpb25UYXNrKHRoaXMudGFzaywgdGhpcy5hdHRhY2hWaWV3LCB0aGlzLCBmbGFncyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYmVmb3JlRGV0YWNoKGZsYWdzKSB7XG4gICAgICAgIGlmICh0aGlzLnZpZXcgIT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBpZiAodGhpcy50YXNrLmRvbmUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnZpZXcuZGV0YWNoKGZsYWdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMudGFzayA9IG5ldyBDb250aW51YXRpb25UYXNrKHRoaXMudGFzaywgdGhpcy52aWV3LmRldGFjaCwgdGhpcy52aWV3LCBmbGFncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgYmVmb3JlVW5iaW5kKGZsYWdzKSB7XG4gICAgICAgIHRoaXMubGFzdFN1YmplY3QgPSB2b2lkIDA7XG4gICAgICAgIGlmICh0aGlzLnZpZXcgIT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBpZiAodGhpcy50YXNrLmRvbmUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRhc2sgPSB0aGlzLnZpZXcudW5iaW5kKGZsYWdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMudGFzayA9IG5ldyBDb250aW51YXRpb25UYXNrKHRoaXMudGFzaywgdGhpcy52aWV3LnVuYmluZCwgdGhpcy52aWV3LCBmbGFncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMudGFzaztcbiAgICB9XG4gICAgY2FjaGluZyhmbGFncykge1xuICAgICAgICB0aGlzLnZpZXcgPSB2b2lkIDA7XG4gICAgfVxuICAgIHN1YmplY3RDaGFuZ2VkKG5ld1ZhbHVlLCBwcmV2aW91c1ZhbHVlLCBmbGFncykge1xuICAgICAgICBmbGFncyB8PSB0aGlzLiRjb250cm9sbGVyLmZsYWdzO1xuICAgICAgICBpZiAodGhpcy50YXNrLmRvbmUpIHtcbiAgICAgICAgICAgIHRoaXMudGFzayA9IHRoaXMuY29tcG9zZShuZXdWYWx1ZSwgZmxhZ3MpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy50YXNrID0gbmV3IENvbnRpbnVhdGlvblRhc2sodGhpcy50YXNrLCB0aGlzLmNvbXBvc2UsIHRoaXMsIG5ld1ZhbHVlLCBmbGFncyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29tcG9zZShzdWJqZWN0LCBmbGFncykge1xuICAgICAgICBpZiAodGhpcy5sYXN0U3ViamVjdCA9PT0gc3ViamVjdCkge1xuICAgICAgICAgICAgcmV0dXJuIExpZmVjeWNsZVRhc2suZG9uZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxhc3RTdWJqZWN0ID0gc3ViamVjdDtcbiAgICAgICAgdGhpcy5jb21wb3NpbmcgPSB0cnVlO1xuICAgICAgICBsZXQgdGFzayA9IHRoaXMuZGVhY3RpdmF0ZShmbGFncyk7XG4gICAgICAgIGlmIChzdWJqZWN0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgbGV0IHZpZXdQcm9taXNlO1xuICAgICAgICAgICAgaWYgKHRhc2suZG9uZSkge1xuICAgICAgICAgICAgICAgIHZpZXdQcm9taXNlID0gc3ViamVjdC50aGVuKHMgPT4gdGhpcy5yZXNvbHZlVmlldyhzLCBmbGFncykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmlld1Byb21pc2UgPSB0YXNrLndhaXQoKS50aGVuKCgpID0+IHN1YmplY3QudGhlbihzID0+IHRoaXMucmVzb2x2ZVZpZXcocywgZmxhZ3MpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0YXNrID0gbmV3IFByb21pc2VUYXNrKHZpZXdQcm9taXNlLCB0aGlzLmFjdGl2YXRlLCB0aGlzLCBmbGFncyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB2aWV3ID0gdGhpcy5yZXNvbHZlVmlldyhzdWJqZWN0LCBmbGFncyk7XG4gICAgICAgICAgICBpZiAodGFzay5kb25lKSB7XG4gICAgICAgICAgICAgICAgdGFzayA9IHRoaXMuYWN0aXZhdGUodmlldywgZmxhZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGFzayA9IG5ldyBDb250aW51YXRpb25UYXNrKHRhc2ssIHRoaXMuYWN0aXZhdGUsIHRoaXMsIHZpZXcsIGZsYWdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGFzay5kb25lKSB7XG4gICAgICAgICAgICB0aGlzLm9uQ29tcG9zZWQoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRhc2sgPSBuZXcgQ29udGludWF0aW9uVGFzayh0YXNrLCB0aGlzLm9uQ29tcG9zZWQsIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0YXNrO1xuICAgIH1cbiAgICBkZWFjdGl2YXRlKGZsYWdzKSB7XG4gICAgICAgIGNvbnN0IHZpZXcgPSB0aGlzLnZpZXc7XG4gICAgICAgIGlmICh2aWV3ID09IHZvaWQgMCkge1xuICAgICAgICAgICAgcmV0dXJuIExpZmVjeWNsZVRhc2suZG9uZTtcbiAgICAgICAgfVxuICAgICAgICB2aWV3LmRldGFjaChmbGFncyk7XG4gICAgICAgIHJldHVybiB2aWV3LnVuYmluZChmbGFncyk7XG4gICAgfVxuICAgIGFjdGl2YXRlKHZpZXcsIGZsYWdzKSB7XG4gICAgICAgIHRoaXMudmlldyA9IHZpZXc7XG4gICAgICAgIGlmICh2aWV3ID09IHZvaWQgMCkge1xuICAgICAgICAgICAgcmV0dXJuIExpZmVjeWNsZVRhc2suZG9uZTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgdGFzayA9IHRoaXMuYmluZFZpZXcoZmxhZ3MpO1xuICAgICAgICBpZiAodGFzay5kb25lKSB7XG4gICAgICAgICAgICB0aGlzLmF0dGFjaFZpZXcoZmxhZ3MpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGFzayA9IG5ldyBDb250aW51YXRpb25UYXNrKHRhc2ssIHRoaXMuYXR0YWNoVmlldywgdGhpcywgZmxhZ3MpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0YXNrO1xuICAgIH1cbiAgICBiaW5kVmlldyhmbGFncykge1xuICAgICAgICBpZiAodGhpcy52aWV3ICE9IHZvaWQgMCAmJiAodGhpcy4kY29udHJvbGxlci5zdGF0ZSAmICg1IC8qIGlzQm91bmRPckJpbmRpbmcgKi8pKSA+IDApIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZpZXcuYmluZChmbGFncywgdGhpcy4kY29udHJvbGxlci5zY29wZSwgdGhpcy4kY29udHJvbGxlci5wYXJ0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTGlmZWN5Y2xlVGFzay5kb25lO1xuICAgIH1cbiAgICBhdHRhY2hWaWV3KGZsYWdzKSB7XG4gICAgICAgIGlmICh0aGlzLnZpZXcgIT0gdm9pZCAwICYmICh0aGlzLiRjb250cm9sbGVyLnN0YXRlICYgKDQwIC8qIGlzQXR0YWNoZWRPckF0dGFjaGluZyAqLykpID4gMCkge1xuICAgICAgICAgICAgdGhpcy52aWV3LmF0dGFjaChmbGFncyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25Db21wb3NlZCgpIHtcbiAgICAgICAgdGhpcy5jb21wb3NpbmcgPSBmYWxzZTtcbiAgICB9XG4gICAgcmVzb2x2ZVZpZXcoc3ViamVjdCwgZmxhZ3MpIHtcbiAgICAgICAgY29uc3QgdmlldyA9IHRoaXMucHJvdmlkZVZpZXdGb3Ioc3ViamVjdCwgZmxhZ3MpO1xuICAgICAgICBpZiAodmlldykge1xuICAgICAgICAgICAgdmlldy5ob2xkKHRoaXMuJGNvbnRyb2xsZXIucHJvamVjdG9yLmhvc3QsIDEgLyogaW5zZXJ0QmVmb3JlICovKTtcbiAgICAgICAgICAgIHZpZXcubG9ja1Njb3BlKHRoaXMuJGNvbnRyb2xsZXIuc2NvcGUpO1xuICAgICAgICAgICAgcmV0dXJuIHZpZXc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZvaWQgMDtcbiAgICB9XG4gICAgcHJvdmlkZVZpZXdGb3Ioc3ViamVjdCwgZmxhZ3MpIHtcbiAgICAgICAgaWYgKCFzdWJqZWN0KSB7XG4gICAgICAgICAgICByZXR1cm4gdm9pZCAwO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0NvbnRyb2xsZXIoc3ViamVjdCkpIHsgLy8gSUNvbnRyb2xsZXJcbiAgICAgICAgICAgIHJldHVybiBzdWJqZWN0O1xuICAgICAgICB9XG4gICAgICAgIGlmICgnY3JlYXRlVmlldycgaW4gc3ViamVjdCkgeyAvLyBSZW5kZXJQbGFuXG4gICAgICAgICAgICByZXR1cm4gc3ViamVjdC5jcmVhdGVWaWV3KHRoaXMuJGNvbnRyb2xsZXIuY29udGV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCdjcmVhdGUnIGluIHN1YmplY3QpIHsgLy8gSVZpZXdGYWN0b3J5XG4gICAgICAgICAgICByZXR1cm4gc3ViamVjdC5jcmVhdGUoZmxhZ3MpO1xuICAgICAgICB9XG4gICAgICAgIGlmICgndGVtcGxhdGUnIGluIHN1YmplY3QpIHsgLy8gUmF3IFRlbXBsYXRlIERlZmluaXRpb25cbiAgICAgICAgICAgIGNvbnN0IGRlZmluaXRpb24gPSBDdXN0b21FbGVtZW50RGVmaW5pdGlvbi5nZXRPckNyZWF0ZShzdWJqZWN0KTtcbiAgICAgICAgICAgIHJldHVybiBnZXRSZW5kZXJDb250ZXh0KGRlZmluaXRpb24sIHRoaXMuJGNvbnRyb2xsZXIuY29udGV4dCwgdm9pZCAwKS5nZXRWaWV3RmFjdG9yeSgpLmNyZWF0ZShmbGFncyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ29uc3RydWN0YWJsZSAoQ3VzdG9tIEVsZW1lbnQgQ29uc3RydWN0b3IpXG4gICAgICAgIHJldHVybiBjcmVhdGVFbGVtZW50KHRoaXMuZG9tLCBzdWJqZWN0LCB0aGlzLnByb3BlcnRpZXMsIHRoaXMuJGNvbnRyb2xsZXIucHJvamVjdG9yID09PSB2b2lkIDBcbiAgICAgICAgICAgID8gUExBVEZPUk0uZW1wdHlBcnJheVxuICAgICAgICAgICAgOiB0aGlzLiRjb250cm9sbGVyLnByb2plY3Rvci5jaGlsZHJlbikuY3JlYXRlVmlldyh0aGlzLiRjb250cm9sbGVyLmNvbnRleHQpO1xuICAgIH1cbn07XG5fX2RlY29yYXRlKFtcbiAgICBiaW5kYWJsZSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuXSwgQ29tcG9zZS5wcm90b3R5cGUsIFwic3ViamVjdFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgYmluZGFibGUoeyBtb2RlOiBCaW5kaW5nTW9kZS5mcm9tVmlldyB9KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbl0sIENvbXBvc2UucHJvdG90eXBlLCBcImNvbXBvc2luZ1wiLCB2b2lkIDApO1xuQ29tcG9zZSA9IF9fZGVjb3JhdGUoW1xuICAgIGN1c3RvbUVsZW1lbnQoeyBuYW1lOiAnYXUtY29tcG9zZScsIHRlbXBsYXRlOiBudWxsLCBjb250YWluZXJsZXNzOiB0cnVlIH0pLFxuICAgIF9fcGFyYW0oMCwgSURPTSksXG4gICAgX19wYXJhbSgxLCBJVGFyZ2V0ZWRJbnN0cnVjdGlvbiksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3QsIE9iamVjdF0pXG5dLCBDb21wb3NlKTtcbmV4cG9ydCB7IENvbXBvc2UgfTtcbmZ1bmN0aW9uIGlzQ29udHJvbGxlcihzdWJqZWN0KSB7XG4gICAgcmV0dXJuICdsb2NrU2NvcGUnIGluIHN1YmplY3Q7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb21wb3NlLmpzLm1hcCIsImltcG9ydCB7IF9fZGVjb3JhdGUsIF9fbWV0YWRhdGEsIF9fcGFyYW0gfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IGJpbmRhYmxlLCBjdXN0b21BdHRyaWJ1dGUsIElOb2RlIH0gZnJvbSAnQGF1cmVsaWEvcnVudGltZSc7XG5pbXBvcnQgeyBnZXRDbGFzc2VzVG9BZGQgfSBmcm9tICcuLi9vYnNlcnZhdGlvbi9jbGFzcy1hdHRyaWJ1dGUtYWNjZXNzb3InO1xuZXhwb3J0IGZ1bmN0aW9uIGNzc01vZHVsZXMoLi4uY3NzTW9kdWxlcykge1xuICAgIHJldHVybiBuZXcgQ1NTTW9kdWxlc1Byb2Nlc3NvclJlZ2lzdHJ5KGNzc01vZHVsZXMpO1xufVxuZXhwb3J0IGNsYXNzIENTU01vZHVsZXNQcm9jZXNzb3JSZWdpc3RyeSB7XG4gICAgY29uc3RydWN0b3IoY3NzTW9kdWxlcykge1xuICAgICAgICB0aGlzLmNzc01vZHVsZXMgPSBjc3NNb2R1bGVzO1xuICAgIH1cbiAgICByZWdpc3Rlcihjb250YWluZXIpIHtcbiAgICAgICAgY29uc3QgY2xhc3NMb29rdXAgPSBPYmplY3QuYXNzaWduKHt9LCAuLi50aGlzLmNzc01vZHVsZXMpO1xuICAgICAgICBsZXQgQ2xhc3NDdXN0b21BdHRyaWJ1dGUgPSBjbGFzcyBDbGFzc0N1c3RvbUF0dHJpYnV0ZSB7XG4gICAgICAgICAgICBjb25zdHJ1Y3RvcihlbGVtZW50IC8qIFRPRE8oZmtsZXV2ZXIpOiBmaXggdGhpcyB0eXBlIGFubm90YXRpb24gcmVmbGVjdGlvbiBpc3N1ZSBpbiBBT1QgKi8pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYmVmb3JlQmluZCgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlQ2hhbmdlZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFsdWVDaGFuZ2VkKCkge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy52YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NOYW1lID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTmFtZSA9IGdldENsYXNzZXNUb0FkZCh0aGlzLnZhbHVlKVxuICAgICAgICAgICAgICAgICAgICAubWFwKHggPT4gY2xhc3NMb29rdXBbeF0gfHwgeClcbiAgICAgICAgICAgICAgICAgICAgLmpvaW4oJyAnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgX19kZWNvcmF0ZShbXG4gICAgICAgICAgICBiaW5kYWJsZSxcbiAgICAgICAgICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBTdHJpbmcpXG4gICAgICAgIF0sIENsYXNzQ3VzdG9tQXR0cmlidXRlLnByb3RvdHlwZSwgXCJ2YWx1ZVwiLCB2b2lkIDApO1xuICAgICAgICBDbGFzc0N1c3RvbUF0dHJpYnV0ZSA9IF9fZGVjb3JhdGUoW1xuICAgICAgICAgICAgY3VzdG9tQXR0cmlidXRlKCdjbGFzcycpLFxuICAgICAgICAgICAgX19wYXJhbSgwLCBJTm9kZSksXG4gICAgICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW09iamVjdF0pXG4gICAgICAgIF0sIENsYXNzQ3VzdG9tQXR0cmlidXRlKTtcbiAgICAgICAgY29udGFpbmVyLnJlZ2lzdGVyKENsYXNzQ3VzdG9tQXR0cmlidXRlKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jc3MtbW9kdWxlcy1yZWdpc3RyeS5qcy5tYXAiLCJpbXBvcnQgeyBfX2RlY29yYXRlLCBfX21ldGFkYXRhLCBfX3BhcmFtIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBSZWdpc3RyYXRpb24sIERJIH0gZnJvbSAnQGF1cmVsaWEva2VybmVsJztcbmltcG9ydCB7IElTaGFkb3dET01TdHlsZXMsIElTaGFkb3dET01HbG9iYWxTdHlsZXMsIEFkb3B0ZWRTdHlsZVNoZWV0c1N0eWxlcywgU3R5bGVFbGVtZW50U3R5bGVzIH0gZnJvbSAnLi9zaGFkb3ctZG9tLXN0eWxlcyc7XG5pbXBvcnQgeyBIVE1MRE9NIH0gZnJvbSAnLi4vZG9tJztcbmltcG9ydCB7IElET00gfSBmcm9tICdAYXVyZWxpYS9ydW50aW1lJztcbmV4cG9ydCBmdW5jdGlvbiBzaGFkb3dDU1MoLi4uY3NzKSB7XG4gICAgcmV0dXJuIG5ldyBTaGFkb3dET01SZWdpc3RyeShjc3MpO1xufVxuY29uc3QgZmFjdG9yeUNhY2hlID0gbmV3IFdlYWtNYXAoKTtcbmV4cG9ydCBjb25zdCBJU2hhZG93RE9NU3R5bGVGYWN0b3J5ID0gREkuY3JlYXRlSW50ZXJmYWNlKCdJU2hhZG93RE9NU3R5bGVGYWN0b3J5JylcbiAgICAud2l0aERlZmF1bHQoeCA9PiB4LmNhbGxiYWNrKChoYW5kbGVyLCByZXF1ZXN0b3IsIHJlc29sdmVyKSA9PiB7XG4gICAgbGV0IGZhY3RvcnkgPSBmYWN0b3J5Q2FjaGUuZ2V0KHJlc29sdmVyKTtcbiAgICBpZiAoZmFjdG9yeSA9PT0gdm9pZCAwKSB7XG4gICAgICAgIGZhY3RvcnlDYWNoZS5zZXQocmVzb2x2ZXIsIGZhY3RvcnkgPSBTaGFkb3dET01SZWdpc3RyeS5jcmVhdGVTdHlsZUZhY3RvcnkoaGFuZGxlcikpO1xuICAgIH1cbiAgICByZXR1cm4gZmFjdG9yeTtcbn0pKTtcbmV4cG9ydCBjbGFzcyBTaGFkb3dET01SZWdpc3RyeSB7XG4gICAgY29uc3RydWN0b3IoY3NzKSB7XG4gICAgICAgIHRoaXMuY3NzID0gY3NzO1xuICAgIH1cbiAgICByZWdpc3Rlcihjb250YWluZXIpIHtcbiAgICAgICAgY29uc3Qgc2hhcmVkU3R5bGVzID0gY29udGFpbmVyLmdldChJU2hhZG93RE9NR2xvYmFsU3R5bGVzKTtcbiAgICAgICAgY29uc3QgZmFjdG9yeSA9IGNvbnRhaW5lci5nZXQoSVNoYWRvd0RPTVN0eWxlRmFjdG9yeSk7XG4gICAgICAgIGNvbnRhaW5lci5yZWdpc3RlcihSZWdpc3RyYXRpb24uaW5zdGFuY2UoSVNoYWRvd0RPTVN0eWxlcywgZmFjdG9yeS5jcmVhdGVTdHlsZXModGhpcy5jc3MsIHNoYXJlZFN0eWxlcykpKTtcbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZVN0eWxlRmFjdG9yeShjb250YWluZXIpIHtcbiAgICAgICAgaWYgKEFkb3B0ZWRTdHlsZVNoZWV0c1N0eWxlcy5zdXBwb3J0ZWQoY29udGFpbmVyLmdldChIVE1MRE9NKSkpIHtcbiAgICAgICAgICAgIHJldHVybiBjb250YWluZXIuZ2V0KEFkb3B0ZWRTdHlsZVNoZWV0c1N0eWxlc0ZhY3RvcnkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb250YWluZXIuZ2V0KFN0eWxlRWxlbWVudFN0eWxlc0ZhY3RvcnkpO1xuICAgIH1cbn1cbmxldCBBZG9wdGVkU3R5bGVTaGVldHNTdHlsZXNGYWN0b3J5ID0gY2xhc3MgQWRvcHRlZFN0eWxlU2hlZXRzU3R5bGVzRmFjdG9yeSB7XG4gICAgY29uc3RydWN0b3IoZG9tKSB7XG4gICAgICAgIHRoaXMuZG9tID0gZG9tO1xuICAgICAgICB0aGlzLmNhY2hlID0gbmV3IE1hcCgpO1xuICAgIH1cbiAgICBjcmVhdGVTdHlsZXMobG9jYWxTdHlsZXMsIHNoYXJlZFN0eWxlcykge1xuICAgICAgICByZXR1cm4gbmV3IEFkb3B0ZWRTdHlsZVNoZWV0c1N0eWxlcyh0aGlzLmRvbSwgbG9jYWxTdHlsZXMsIHRoaXMuY2FjaGUsIHNoYXJlZFN0eWxlcyk7XG4gICAgfVxufTtcbkFkb3B0ZWRTdHlsZVNoZWV0c1N0eWxlc0ZhY3RvcnkgPSBfX2RlY29yYXRlKFtcbiAgICBfX3BhcmFtKDAsIElET00pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbSFRNTERPTV0pXG5dLCBBZG9wdGVkU3R5bGVTaGVldHNTdHlsZXNGYWN0b3J5KTtcbmxldCBTdHlsZUVsZW1lbnRTdHlsZXNGYWN0b3J5ID0gY2xhc3MgU3R5bGVFbGVtZW50U3R5bGVzRmFjdG9yeSB7XG4gICAgY29uc3RydWN0b3IoZG9tKSB7XG4gICAgICAgIHRoaXMuZG9tID0gZG9tO1xuICAgIH1cbiAgICBjcmVhdGVTdHlsZXMobG9jYWxTdHlsZXMsIHNoYXJlZFN0eWxlcykge1xuICAgICAgICBpZiAobG9jYWxTdHlsZXMuc29tZSh4ID0+IHR5cGVvZiB4ICE9PSAnc3RyaW5nJykpIHtcbiAgICAgICAgICAgIC8vIFRPRE86IHVzZSByZXBvcnRlclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdTaGFkb3cgRE9NIENTUyBtdXN0IGJlIGEgc3RyaW5nLicpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgU3R5bGVFbGVtZW50U3R5bGVzKHRoaXMuZG9tLCBsb2NhbFN0eWxlcywgc2hhcmVkU3R5bGVzKTtcbiAgICB9XG59O1xuU3R5bGVFbGVtZW50U3R5bGVzRmFjdG9yeSA9IF9fZGVjb3JhdGUoW1xuICAgIF9fcGFyYW0oMCwgSURPTSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtIVE1MRE9NXSlcbl0sIFN0eWxlRWxlbWVudFN0eWxlc0ZhY3RvcnkpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2hhZG93LWRvbS1yZWdpc3RyeS5qcy5tYXAiLCJpbXBvcnQgeyBESSwgUExBVEZPUk0gfSBmcm9tICdAYXVyZWxpYS9rZXJuZWwnO1xuZXhwb3J0IGNvbnN0IG5vb3BTaGFkb3dET01TdHlsZXMgPSBPYmplY3QuZnJlZXplKHtcbiAgICBhcHBseVRvOiBQTEFURk9STS5ub29wXG59KTtcbmV4cG9ydCBjb25zdCBJU2hhZG93RE9NU3R5bGVzID0gREkuY3JlYXRlSW50ZXJmYWNlKCdJU2hhZG93RE9NU3R5bGVzJykubm9EZWZhdWx0KCk7XG5leHBvcnQgY29uc3QgSVNoYWRvd0RPTUdsb2JhbFN0eWxlcyA9IERJLmNyZWF0ZUludGVyZmFjZSgnSVNoYWRvd0RPTUdsb2JhbFN0eWxlcycpXG4gICAgLndpdGhEZWZhdWx0KHggPT4geC5pbnN0YW5jZShub29wU2hhZG93RE9NU3R5bGVzKSk7XG5leHBvcnQgY2xhc3MgQWRvcHRlZFN0eWxlU2hlZXRzU3R5bGVzIHtcbiAgICBjb25zdHJ1Y3Rvcihkb20sIGxvY2FsU3R5bGVzLCBzdHlsZVNoZWV0Q2FjaGUsIHNoYXJlZFN0eWxlcyA9IG51bGwpIHtcbiAgICAgICAgdGhpcy5zaGFyZWRTdHlsZXMgPSBzaGFyZWRTdHlsZXM7XG4gICAgICAgIHRoaXMuc3R5bGVTaGVldHMgPSBsb2NhbFN0eWxlcy5tYXAoeCA9PiB7XG4gICAgICAgICAgICBsZXQgc2hlZXQ7XG4gICAgICAgICAgICBpZiAoeCBpbnN0YW5jZW9mIGRvbS5DU1NTdHlsZVNoZWV0KSB7XG4gICAgICAgICAgICAgICAgc2hlZXQgPSB4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc2hlZXQgPSBzdHlsZVNoZWV0Q2FjaGUuZ2V0KHgpO1xuICAgICAgICAgICAgICAgIGlmICghc2hlZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgc2hlZXQgPSBuZXcgZG9tLkNTU1N0eWxlU2hlZXQoKTtcbiAgICAgICAgICAgICAgICAgICAgc2hlZXQucmVwbGFjZVN5bmMoeCk7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlU2hlZXRDYWNoZS5zZXQoeCwgc2hlZXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzaGVldDtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0YXRpYyBzdXBwb3J0ZWQoZG9tKSB7XG4gICAgICAgIHJldHVybiAnYWRvcHRlZFN0eWxlU2hlZXRzJyBpbiBkb20uU2hhZG93Um9vdC5wcm90b3R5cGU7XG4gICAgfVxuICAgIGFwcGx5VG8oc2hhZG93Um9vdCkge1xuICAgICAgICBpZiAodGhpcy5zaGFyZWRTdHlsZXMgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuc2hhcmVkU3R5bGVzLmFwcGx5VG8oc2hhZG93Um9vdCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gaHR0cHM6Ly93aWNnLmdpdGh1Yi5pby9jb25zdHJ1Y3Qtc3R5bGVzaGVldHMvXG4gICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL3dlYi91cGRhdGVzLzIwMTkvMDIvY29uc3RydWN0YWJsZS1zdHlsZXNoZWV0c1xuICAgICAgICBzaGFkb3dSb290LmFkb3B0ZWRTdHlsZVNoZWV0cyA9IFtcbiAgICAgICAgICAgIC4uLnNoYWRvd1Jvb3QuYWRvcHRlZFN0eWxlU2hlZXRzLFxuICAgICAgICAgICAgLi4udGhpcy5zdHlsZVNoZWV0c1xuICAgICAgICBdO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBTdHlsZUVsZW1lbnRTdHlsZXMge1xuICAgIGNvbnN0cnVjdG9yKGRvbSwgbG9jYWxTdHlsZXMsIHNoYXJlZFN0eWxlcyA9IG51bGwpIHtcbiAgICAgICAgdGhpcy5kb20gPSBkb207XG4gICAgICAgIHRoaXMubG9jYWxTdHlsZXMgPSBsb2NhbFN0eWxlcztcbiAgICAgICAgdGhpcy5zaGFyZWRTdHlsZXMgPSBzaGFyZWRTdHlsZXM7XG4gICAgfVxuICAgIGFwcGx5VG8oc2hhZG93Um9vdCkge1xuICAgICAgICBjb25zdCBzdHlsZXMgPSB0aGlzLmxvY2FsU3R5bGVzO1xuICAgICAgICBjb25zdCBkb20gPSB0aGlzLmRvbTtcbiAgICAgICAgZm9yIChsZXQgaSA9IHN0eWxlcy5sZW5ndGggLSAxOyBpID4gLTE7IC0taSkge1xuICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IGRvbS5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgICAgICAgICAgZWxlbWVudC5pbm5lckhUTUwgPSBzdHlsZXNbaV07XG4gICAgICAgICAgICBzaGFkb3dSb290LnByZXBlbmQoZWxlbWVudCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuc2hhcmVkU3R5bGVzICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLnNoYXJlZFN0eWxlcy5hcHBseVRvKHNoYWRvd1Jvb3QpO1xuICAgICAgICB9XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2hhZG93LWRvbS1zdHlsZXMuanMubWFwIiwiaW1wb3J0IHsgSUNvbnRhaW5lciwgUmVnaXN0cmF0aW9uIH0gZnJvbSAnQGF1cmVsaWEva2VybmVsJztcbmltcG9ydCB7IFN0YXJ0VGFzayB9IGZyb20gJ0BhdXJlbGlhL3J1bnRpbWUnO1xuaW1wb3J0IHsgSVNoYWRvd0RPTUdsb2JhbFN0eWxlcyB9IGZyb20gJy4vc2hhZG93LWRvbS1zdHlsZXMnO1xuaW1wb3J0IHsgSVNoYWRvd0RPTVN0eWxlRmFjdG9yeSB9IGZyb20gJy4vc2hhZG93LWRvbS1yZWdpc3RyeSc7XG5leHBvcnQgY29uc3QgU3R5bGVDb25maWd1cmF0aW9uID0ge1xuICAgIHNoYWRvd0RPTShjb25maWcpIHtcbiAgICAgICAgcmV0dXJuIFN0YXJ0VGFzay53aXRoKElDb250YWluZXIpLmJlZm9yZUNyZWF0ZSgpLmNhbGwoY29udGFpbmVyID0+IHtcbiAgICAgICAgICAgIGlmIChjb25maWcuc2hhcmVkU3R5bGVzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmFjdG9yeSA9IGNvbnRhaW5lci5nZXQoSVNoYWRvd0RPTVN0eWxlRmFjdG9yeSk7XG4gICAgICAgICAgICAgICAgY29udGFpbmVyLnJlZ2lzdGVyKFJlZ2lzdHJhdGlvbi5pbnN0YW5jZShJU2hhZG93RE9NR2xvYmFsU3R5bGVzLCBmYWN0b3J5LmNyZWF0ZVN0eWxlcyhjb25maWcuc2hhcmVkU3R5bGVzLCBudWxsKSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3R5bGUtY29uZmlndXJhdGlvbi5qcy5tYXAiLCJpbXBvcnQgeyBESSwgUmVnaXN0cmF0aW9uLCB9IGZyb20gJ0BhdXJlbGlhL2tlcm5lbCc7XG5pbXBvcnQgeyBJTGlmZWN5Y2xlIH0gZnJvbSAnLi9saWZlY3ljbGUnO1xuaW1wb3J0IHsgQ29udGludWF0aW9uVGFzaywgSVN0YXJ0VGFza01hbmFnZXIsIH0gZnJvbSAnLi9saWZlY3ljbGUtdGFzayc7XG5pbXBvcnQgeyBDb250cm9sbGVyIH0gZnJvbSAnLi90ZW1wbGF0aW5nL2NvbnRyb2xsZXInO1xuZXhwb3J0IGNvbnN0IElBY3RpdmF0b3IgPSBESS5jcmVhdGVJbnRlcmZhY2UoJ0lBY3RpdmF0b3InKS53aXRoRGVmYXVsdCh4ID0+IHguc2luZ2xldG9uKEFjdGl2YXRvcikpO1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IGNsYXNzIEFjdGl2YXRvciB7XG4gICAgY29uc3RydWN0b3IodGFza01hbmFnZXIpIHtcbiAgICAgICAgdGhpcy50YXNrTWFuYWdlciA9IHRhc2tNYW5hZ2VyO1xuICAgIH1cbiAgICBzdGF0aWMgcmVnaXN0ZXIoY29udGFpbmVyKSB7XG4gICAgICAgIHJldHVybiBSZWdpc3RyYXRpb24uc2luZ2xldG9uKElBY3RpdmF0b3IsIHRoaXMpLnJlZ2lzdGVyKGNvbnRhaW5lcik7XG4gICAgfVxuICAgIGFjdGl2YXRlKGhvc3QsIGNvbXBvbmVudCwgY29udGFpbmVyLCBmbGFncyA9IDEwMjQgLyogZnJvbVN0YXJ0VGFzayAqLywgcGFyZW50U2NvcGUpIHtcbiAgICAgICAgZmxhZ3MgPSBmbGFncyA9PT0gdm9pZCAwID8gMCAvKiBub25lICovIDogZmxhZ3M7XG4gICAgICAgIGNvbnN0IG1nciA9IHRoaXMudGFza01hbmFnZXI7XG4gICAgICAgIGxldCB0YXNrID0gbWdyLnJ1bkJlZm9yZVJlbmRlcigpO1xuICAgICAgICBpZiAodGFzay5kb25lKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcihob3N0LCBjb21wb25lbnQsIGNvbnRhaW5lciwgZmxhZ3MpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGFzayA9IG5ldyBDb250aW51YXRpb25UYXNrKHRhc2ssIHRoaXMucmVuZGVyLCB0aGlzLCBob3N0LCBjb21wb25lbnQsIGNvbnRhaW5lciwgZmxhZ3MpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0YXNrLmRvbmUpIHtcbiAgICAgICAgICAgIHRhc2sgPSBtZ3IucnVuQmVmb3JlQmluZCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGFzayA9IG5ldyBDb250aW51YXRpb25UYXNrKHRhc2ssIG1nci5ydW5CZWZvcmVCaW5kLCBtZ3IpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0YXNrLmRvbmUpIHtcbiAgICAgICAgICAgIHRhc2sgPSB0aGlzLmJpbmQoY29tcG9uZW50LCBmbGFncywgcGFyZW50U2NvcGUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGFzayA9IG5ldyBDb250aW51YXRpb25UYXNrKHRhc2ssIHRoaXMuYmluZCwgdGhpcywgY29tcG9uZW50LCBmbGFncywgcGFyZW50U2NvcGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0YXNrLmRvbmUpIHtcbiAgICAgICAgICAgIHRhc2sgPSBtZ3IucnVuQmVmb3JlQXR0YWNoKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0YXNrID0gbmV3IENvbnRpbnVhdGlvblRhc2sodGFzaywgbWdyLnJ1bkJlZm9yZUF0dGFjaCwgbWdyKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGFzay5kb25lKSB7XG4gICAgICAgICAgICB0aGlzLmF0dGFjaChjb21wb25lbnQsIGZsYWdzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRhc2sgPSBuZXcgQ29udGludWF0aW9uVGFzayh0YXNrLCB0aGlzLmF0dGFjaCwgdGhpcywgY29tcG9uZW50LCBmbGFncyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRhc2s7XG4gICAgfVxuICAgIGRlYWN0aXZhdGUoY29tcG9uZW50LCBmbGFncyA9IDIwNDggLyogZnJvbVN0b3BUYXNrICovKSB7XG4gICAgICAgIGNvbnN0IGNvbnRyb2xsZXIgPSBDb250cm9sbGVyLmdldENhY2hlZE9yVGhyb3coY29tcG9uZW50KTtcbiAgICAgICAgY29udHJvbGxlci5kZXRhY2goZmxhZ3MgfCAzMjc2OCAvKiBmcm9tRGV0YWNoICovKTtcbiAgICAgICAgcmV0dXJuIGNvbnRyb2xsZXIudW5iaW5kKGZsYWdzIHwgODE5MiAvKiBmcm9tVW5iaW5kICovKTtcbiAgICB9XG4gICAgcmVuZGVyKGhvc3QsIGNvbXBvbmVudCwgY29udGFpbmVyLCBmbGFncykge1xuICAgICAgICBjb25zdCBsaWZlY3ljbGUgPSBjb250YWluZXIuZ2V0KElMaWZlY3ljbGUpO1xuICAgICAgICBDb250cm9sbGVyLmZvckN1c3RvbUVsZW1lbnQoY29tcG9uZW50LCBsaWZlY3ljbGUsIGhvc3QsIGNvbnRhaW5lciwgdm9pZCAwLCBmbGFncyk7XG4gICAgfVxuICAgIGJpbmQoY29tcG9uZW50LCBmbGFncywgcGFyZW50U2NvcGUpIHtcbiAgICAgICAgcmV0dXJuIENvbnRyb2xsZXIuZ2V0Q2FjaGVkT3JUaHJvdyhjb21wb25lbnQpLmJpbmQoZmxhZ3MgfCA0MDk2IC8qIGZyb21CaW5kICovLCBwYXJlbnRTY29wZSk7XG4gICAgfVxuICAgIGF0dGFjaChjb21wb25lbnQsIGZsYWdzKSB7XG4gICAgICAgIENvbnRyb2xsZXIuZ2V0Q2FjaGVkT3JUaHJvdyhjb21wb25lbnQpLmF0dGFjaChmbGFncyB8IDE2Mzg0IC8qIGZyb21BdHRhY2ggKi8pO1xuICAgIH1cbn1cbkFjdGl2YXRvci5pbmplY3QgPSBbSVN0YXJ0VGFza01hbmFnZXJdO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YWN0aXZhdG9yLmpzLm1hcCIsImltcG9ydCB7IERJLCBQTEFURk9STSwgUmVnaXN0cmF0aW9uIH0gZnJvbSAnQGF1cmVsaWEva2VybmVsJztcbmltcG9ydCB7IElBY3RpdmF0b3IgfSBmcm9tICcuL2FjdGl2YXRvcic7XG5pbXBvcnQgeyBJTm9kZSB9IGZyb20gJy4vZG9tJztcbmltcG9ydCB7IElMaWZlY3ljbGUsIH0gZnJvbSAnLi9saWZlY3ljbGUnO1xuaW1wb3J0IHsgQ29udGludWF0aW9uVGFzaywgSVN0YXJ0VGFza01hbmFnZXIsIExpZmVjeWNsZVRhc2ssIH0gZnJvbSAnLi9saWZlY3ljbGUtdGFzayc7XG5pbXBvcnQgeyBDdXN0b21FbGVtZW50IH0gZnJvbSAnLi9yZXNvdXJjZXMvY3VzdG9tLWVsZW1lbnQnO1xuaW1wb3J0IHsgQ29udHJvbGxlciB9IGZyb20gJy4vdGVtcGxhdGluZy9jb250cm9sbGVyJztcbmV4cG9ydCBjbGFzcyBDb21wb3NpdGlvblJvb3Qge1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZywgY29udGFpbmVyKSB7XG4gICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgICAgICBpZiAoY29uZmlnLmhvc3QgIT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBpZiAoY29udGFpbmVyLmhhcyhJTm9kZSwgZmFsc2UpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXIuY3JlYXRlQ2hpbGQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgUmVnaXN0cmF0aW9uLmluc3RhbmNlKElOb2RlLCBjb25maWcuaG9zdCkucmVnaXN0ZXIodGhpcy5jb250YWluZXIpO1xuICAgICAgICAgICAgdGhpcy5ob3N0ID0gY29uZmlnLmhvc3Q7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY29udGFpbmVyLmhhcyhJTm9kZSwgdHJ1ZSkpIHtcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xuICAgICAgICAgICAgdGhpcy5ob3N0ID0gY29udGFpbmVyLmdldChJTm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE5vIGhvc3QgZWxlbWVudCBmb3VuZC5gKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0cmF0ZWd5ID0gY29uZmlnLnN0cmF0ZWd5ICE9IHZvaWQgMCA/IGNvbmZpZy5zdHJhdGVneSA6IDEgLyogZ2V0dGVyU2V0dGVyICovO1xuICAgICAgICBjb25zdCBpbml0aWFsaXplciA9IHRoaXMuY29udGFpbmVyLmdldChJRE9NSW5pdGlhbGl6ZXIpO1xuICAgICAgICB0aGlzLmRvbSA9IGluaXRpYWxpemVyLmluaXRpYWxpemUoY29uZmlnKTtcbiAgICAgICAgdGhpcy5saWZlY3ljbGUgPSB0aGlzLmNvbnRhaW5lci5nZXQoSUxpZmVjeWNsZSk7XG4gICAgICAgIHRoaXMuYWN0aXZhdG9yID0gdGhpcy5jb250YWluZXIuZ2V0KElBY3RpdmF0b3IpO1xuICAgICAgICBjb25zdCB0YXNrTWFuYWdlciA9IHRoaXMuY29udGFpbmVyLmdldChJU3RhcnRUYXNrTWFuYWdlcik7XG4gICAgICAgIGNvbnN0IGJlZm9yZUNyZWF0ZVRhc2sgPSB0YXNrTWFuYWdlci5ydW5CZWZvcmVDcmVhdGUoKTtcbiAgICAgICAgaWYgKGJlZm9yZUNyZWF0ZVRhc2suZG9uZSkge1xuICAgICAgICAgICAgdGhpcy50YXNrID0gTGlmZWN5Y2xlVGFzay5kb25lO1xuICAgICAgICAgICAgdGhpcy5jcmVhdGUoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudGFzayA9IG5ldyBDb250aW51YXRpb25UYXNrKGJlZm9yZUNyZWF0ZVRhc2ssIHRoaXMuY3JlYXRlLCB0aGlzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhY3RpdmF0ZShhbnRlY2VkZW50KSB7XG4gICAgICAgIGNvbnN0IHsgdGFzaywgaG9zdCwgdmlld01vZGVsLCBjb250YWluZXIsIGFjdGl2YXRvciwgc3RyYXRlZ3kgfSA9IHRoaXM7XG4gICAgICAgIGNvbnN0IGZsYWdzID0gc3RyYXRlZ3kgfCAxMDI0IC8qIGZyb21TdGFydFRhc2sgKi87XG4gICAgICAgIGlmICh2aWV3TW9kZWwgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuY3JlYXRlVGFzayA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVUYXNrID0gbmV3IENvbnRpbnVhdGlvblRhc2sodGFzaywgdGhpcy5hY3RpdmF0ZSwgdGhpcywgYW50ZWNlZGVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVUYXNrO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0YXNrLmRvbmUpIHtcbiAgICAgICAgICAgIGlmIChhbnRlY2VkZW50ID09IHZvaWQgMCB8fCBhbnRlY2VkZW50LmRvbmUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRhc2sgPSBhY3RpdmF0b3IuYWN0aXZhdGUoaG9zdCwgdmlld01vZGVsLCBjb250YWluZXIsIGZsYWdzLCB2b2lkIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy50YXNrID0gbmV3IENvbnRpbnVhdGlvblRhc2soYW50ZWNlZGVudCwgYWN0aXZhdG9yLmFjdGl2YXRlLCBhY3RpdmF0b3IsIGhvc3QsIHZpZXdNb2RlbCwgY29udGFpbmVyLCBmbGFncywgdm9pZCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmIChhbnRlY2VkZW50ID09IHZvaWQgMCB8fCBhbnRlY2VkZW50LmRvbmUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRhc2sgPSBuZXcgQ29udGludWF0aW9uVGFzayh0YXNrLCBhY3RpdmF0b3IuYWN0aXZhdGUsIGFjdGl2YXRvciwgaG9zdCwgdmlld01vZGVsLCBjb250YWluZXIsIGZsYWdzLCB2b2lkIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY29tYmluZWRBbnRlY2VkZW50ID0gbmV3IENvbnRpbnVhdGlvblRhc2sodGFzaywgYW50ZWNlZGVudC53YWl0LCBhbnRlY2VkZW50KTtcbiAgICAgICAgICAgICAgICB0aGlzLnRhc2sgPSBuZXcgQ29udGludWF0aW9uVGFzayhjb21iaW5lZEFudGVjZWRlbnQsIGFjdGl2YXRvci5hY3RpdmF0ZSwgYWN0aXZhdG9yLCBob3N0LCB2aWV3TW9kZWwsIGNvbnRhaW5lciwgZmxhZ3MsIHZvaWQgMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMudGFzaztcbiAgICB9XG4gICAgZGVhY3RpdmF0ZShhbnRlY2VkZW50KSB7XG4gICAgICAgIGNvbnN0IHsgdGFzaywgdmlld01vZGVsLCBhY3RpdmF0b3IsIHN0cmF0ZWd5IH0gPSB0aGlzO1xuICAgICAgICBjb25zdCBmbGFncyA9IHN0cmF0ZWd5IHwgMjA0OCAvKiBmcm9tU3RvcFRhc2sgKi87XG4gICAgICAgIGlmICh2aWV3TW9kZWwgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuY3JlYXRlVGFzayA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVUYXNrID0gbmV3IENvbnRpbnVhdGlvblRhc2sodGFzaywgdGhpcy5kZWFjdGl2YXRlLCB0aGlzLCBhbnRlY2VkZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZVRhc2s7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRhc2suZG9uZSkge1xuICAgICAgICAgICAgaWYgKGFudGVjZWRlbnQgPT0gdm9pZCAwIHx8IGFudGVjZWRlbnQuZG9uZSkge1xuICAgICAgICAgICAgICAgIHRoaXMudGFzayA9IGFjdGl2YXRvci5kZWFjdGl2YXRlKHZpZXdNb2RlbCwgZmxhZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy50YXNrID0gbmV3IENvbnRpbnVhdGlvblRhc2soYW50ZWNlZGVudCwgYWN0aXZhdG9yLmRlYWN0aXZhdGUsIGFjdGl2YXRvciwgdmlld01vZGVsLCBmbGFncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoYW50ZWNlZGVudCA9PSB2b2lkIDAgfHwgYW50ZWNlZGVudC5kb25lKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50YXNrID0gbmV3IENvbnRpbnVhdGlvblRhc2sodGFzaywgYWN0aXZhdG9yLmRlYWN0aXZhdGUsIGFjdGl2YXRvciwgdmlld01vZGVsLCBmbGFncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb21iaW5lZEFudGVjZWRlbnQgPSBuZXcgQ29udGludWF0aW9uVGFzayh0YXNrLCBhbnRlY2VkZW50LndhaXQsIGFudGVjZWRlbnQpO1xuICAgICAgICAgICAgICAgIHRoaXMudGFzayA9IG5ldyBDb250aW51YXRpb25UYXNrKGNvbWJpbmVkQW50ZWNlZGVudCwgYWN0aXZhdG9yLmRlYWN0aXZhdGUsIGFjdGl2YXRvciwgdmlld01vZGVsLCBmbGFncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMudGFzaztcbiAgICB9XG4gICAgY3JlYXRlKCkge1xuICAgICAgICBjb25zdCBjb25maWcgPSB0aGlzLmNvbmZpZztcbiAgICAgICAgY29uc3QgaW5zdGFuY2UgPSB0aGlzLnZpZXdNb2RlbCA9IEN1c3RvbUVsZW1lbnQuaXNUeXBlKGNvbmZpZy5jb21wb25lbnQpXG4gICAgICAgICAgICA/IHRoaXMuY29udGFpbmVyLmdldChjb25maWcuY29tcG9uZW50KVxuICAgICAgICAgICAgOiBjb25maWcuY29tcG9uZW50O1xuICAgICAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmNvbnRhaW5lcjtcbiAgICAgICAgY29uc3QgbGlmZWN5Y2xlID0gY29udGFpbmVyLmdldChJTGlmZWN5Y2xlKTtcbiAgICAgICAgdGhpcy5jb250cm9sbGVyID0gQ29udHJvbGxlci5mb3JDdXN0b21FbGVtZW50KGluc3RhbmNlLCBsaWZlY3ljbGUsIHRoaXMuaG9zdCwgY29udGFpbmVyLCB2b2lkIDAsIHRoaXMuc3RyYXRlZ3kpO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBBdXJlbGlhIHtcbiAgICBjb25zdHJ1Y3Rvcihjb250YWluZXIgPSBESS5jcmVhdGVDb250YWluZXIoKSkge1xuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgICAgICAgdGhpcy50YXNrID0gTGlmZWN5Y2xlVGFzay5kb25lO1xuICAgICAgICB0aGlzLl9pc1J1bm5pbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5faXNTdGFydGluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9pc1N0b3BwaW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX3Jvb3QgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMubmV4dCA9ICh2b2lkIDApO1xuICAgICAgICBSZWdpc3RyYXRpb24uaW5zdGFuY2UoQXVyZWxpYSwgdGhpcykucmVnaXN0ZXIoY29udGFpbmVyKTtcbiAgICB9XG4gICAgZ2V0IGlzUnVubmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzUnVubmluZztcbiAgICB9XG4gICAgZ2V0IGlzU3RhcnRpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pc1N0YXJ0aW5nO1xuICAgIH1cbiAgICBnZXQgaXNTdG9wcGluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzU3RvcHBpbmc7XG4gICAgfVxuICAgIGdldCByb290KCkge1xuICAgICAgICBpZiAodGhpcy5fcm9vdCA9PSB2b2lkIDApIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm5leHQgPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGByb290IGlzIG5vdCBkZWZpbmVkYCk7IC8vIFRPRE86IGNyZWF0ZSBlcnJvciBjb2RlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5uZXh0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9yb290O1xuICAgIH1cbiAgICByZWdpc3RlciguLi5wYXJhbXMpIHtcbiAgICAgICAgdGhpcy5jb250YWluZXIucmVnaXN0ZXIoLi4ucGFyYW1zKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGFwcChjb25maWcpIHtcbiAgICAgICAgdGhpcy5uZXh0ID0gbmV3IENvbXBvc2l0aW9uUm9vdChjb25maWcsIHRoaXMuY29udGFpbmVyKTtcbiAgICAgICAgaWYgKHRoaXMuaXNSdW5uaW5nKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0KCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHN0YXJ0KHJvb3QgPSB0aGlzLm5leHQpIHtcbiAgICAgICAgaWYgKHJvb3QgPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZXJlIGlzIG5vIGNvbXBvc2l0aW9uIHJvb3RgKTsgLy8gVE9ETzogY3JlYXRlIGVycm9yIGNvZGVcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0b3Aocm9vdCk7XG4gICAgICAgIGlmICh0aGlzLnRhc2suZG9uZSkge1xuICAgICAgICAgICAgdGhpcy5vbkJlZm9yZVN0YXJ0KHJvb3QpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy50YXNrID0gbmV3IENvbnRpbnVhdGlvblRhc2sodGhpcy50YXNrLCB0aGlzLm9uQmVmb3JlU3RhcnQsIHRoaXMsIHJvb3QpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudGFzayA9IHRoaXMucm9vdC5hY3RpdmF0ZSh0aGlzLnRhc2spO1xuICAgICAgICBpZiAodGhpcy50YXNrLmRvbmUpIHtcbiAgICAgICAgICAgIHRoaXMudGFzayA9IHRoaXMub25BZnRlclN0YXJ0KHJvb3QpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy50YXNrID0gbmV3IENvbnRpbnVhdGlvblRhc2sodGhpcy50YXNrLCB0aGlzLm9uQWZ0ZXJTdGFydCwgdGhpcywgcm9vdCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMudGFzaztcbiAgICB9XG4gICAgc3RvcChyb290ID0gdGhpcy5fcm9vdCkge1xuICAgICAgICBpZiAodGhpcy5faXNSdW5uaW5nICYmIHJvb3QgIT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBpZiAodGhpcy50YXNrLmRvbmUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uQmVmb3JlU3RvcChyb290KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMudGFzayA9IG5ldyBDb250aW51YXRpb25UYXNrKHRoaXMudGFzaywgdGhpcy5vbkJlZm9yZVN0b3AsIHRoaXMsIHJvb3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy50YXNrID0gcm9vdC5kZWFjdGl2YXRlKHRoaXMudGFzayk7XG4gICAgICAgICAgICBpZiAodGhpcy50YXNrLmRvbmUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRhc2sgPSB0aGlzLm9uQWZ0ZXJTdG9wKHJvb3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy50YXNrID0gbmV3IENvbnRpbnVhdGlvblRhc2sodGhpcy50YXNrLCB0aGlzLm9uQWZ0ZXJTdG9wLCB0aGlzLCByb290KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy50YXNrO1xuICAgIH1cbiAgICB3YWl0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy50YXNrLndhaXQoKTtcbiAgICB9XG4gICAgb25CZWZvcmVTdGFydChyb290KSB7XG4gICAgICAgIFJlZmxlY3Quc2V0KHJvb3QuaG9zdCwgJyRhdXJlbGlhJywgdGhpcyk7XG4gICAgICAgIHRoaXMuX3Jvb3QgPSByb290O1xuICAgICAgICB0aGlzLl9pc1N0YXJ0aW5nID0gdHJ1ZTtcbiAgICB9XG4gICAgb25BZnRlclN0YXJ0KHJvb3QpIHtcbiAgICAgICAgdGhpcy5faXNSdW5uaW5nID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5faXNTdGFydGluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQocm9vdCwgJ2F1cmVsaWEtY29tcG9zZWQnLCByb290LmRvbSk7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChyb290LCAnYXUtc3RhcnRlZCcsIHJvb3QuaG9zdCk7XG4gICAgICAgIHJldHVybiBMaWZlY3ljbGVUYXNrLmRvbmU7XG4gICAgfVxuICAgIG9uQmVmb3JlU3RvcChyb290KSB7XG4gICAgICAgIHRoaXMuX2lzUnVubmluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9pc1N0b3BwaW5nID0gdHJ1ZTtcbiAgICB9XG4gICAgb25BZnRlclN0b3Aocm9vdCkge1xuICAgICAgICBSZWZsZWN0LmRlbGV0ZVByb3BlcnR5KHJvb3QuaG9zdCwgJyRhdXJlbGlhJyk7XG4gICAgICAgIHRoaXMuX3Jvb3QgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMuX2lzU3RvcHBpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KHJvb3QsICdhdS1zdG9wcGVkJywgcm9vdC5ob3N0KTtcbiAgICAgICAgcmV0dXJuIExpZmVjeWNsZVRhc2suZG9uZTtcbiAgICB9XG4gICAgZGlzcGF0Y2hFdmVudChyb290LCBuYW1lLCB0YXJnZXQpIHtcbiAgICAgICAgdGFyZ2V0ID0gJ2Rpc3BhdGNoRXZlbnQnIGluIHRhcmdldCA/IHRhcmdldCA6IHJvb3QuZG9tO1xuICAgICAgICB0YXJnZXQuZGlzcGF0Y2hFdmVudChyb290LmRvbS5jcmVhdGVDdXN0b21FdmVudChuYW1lLCB7IGRldGFpbDogdGhpcywgYnViYmxlczogdHJ1ZSwgY2FuY2VsYWJsZTogdHJ1ZSB9KSk7XG4gICAgfVxufVxuUExBVEZPUk0uZ2xvYmFsLkF1cmVsaWEgPSBBdXJlbGlhO1xuZXhwb3J0IGNvbnN0IElET01Jbml0aWFsaXplciA9IERJLmNyZWF0ZUludGVyZmFjZSgnSURPTUluaXRpYWxpemVyJykubm9EZWZhdWx0KCk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hdXJlbGlhLmpzLm1hcCIsImltcG9ydCB7IFBMQVRGT1JNLCBSZXBvcnRlciwgaXNOdW1iZXJPckJpZ0ludCwgaXNTdHJpbmdPckRhdGUsIH0gZnJvbSAnQGF1cmVsaWEva2VybmVsJztcbmltcG9ydCB7IEJpbmRpbmdDb250ZXh0IH0gZnJvbSAnLi4vb2JzZXJ2YXRpb24vYmluZGluZy1jb250ZXh0JztcbmltcG9ydCB7IFByb3h5T2JzZXJ2ZXIgfSBmcm9tICcuLi9vYnNlcnZhdGlvbi9wcm94eS1vYnNlcnZlcic7XG5pbXBvcnQgeyBJU2lnbmFsZXIgfSBmcm9tICcuLi9vYnNlcnZhdGlvbi9zaWduYWxlcic7XG5pbXBvcnQgeyBCaW5kaW5nQmVoYXZpb3IsIEJpbmRpbmdCZWhhdmlvckZhY3RvcnksIH0gZnJvbSAnLi4vcmVzb3VyY2VzL2JpbmRpbmctYmVoYXZpb3InO1xuaW1wb3J0IHsgVmFsdWVDb252ZXJ0ZXIsIH0gZnJvbSAnLi4vcmVzb3VyY2VzL3ZhbHVlLWNvbnZlcnRlcic7XG5leHBvcnQgZnVuY3Rpb24gY29ubmVjdHMoZXhwcikge1xuICAgIHJldHVybiAoZXhwci4ka2luZCAmIDMyIC8qIENvbm5lY3RzICovKSA9PT0gMzIgLyogQ29ubmVjdHMgKi87XG59XG5leHBvcnQgZnVuY3Rpb24gb2JzZXJ2ZXMoZXhwcikge1xuICAgIHJldHVybiAoZXhwci4ka2luZCAmIDY0IC8qIE9ic2VydmVzICovKSA9PT0gNjQgLyogT2JzZXJ2ZXMgKi87XG59XG5leHBvcnQgZnVuY3Rpb24gY2FsbHNGdW5jdGlvbihleHByKSB7XG4gICAgcmV0dXJuIChleHByLiRraW5kICYgMTI4IC8qIENhbGxzRnVuY3Rpb24gKi8pID09PSAxMjggLyogQ2FsbHNGdW5jdGlvbiAqLztcbn1cbmV4cG9ydCBmdW5jdGlvbiBoYXNBbmNlc3RvcihleHByKSB7XG4gICAgcmV0dXJuIChleHByLiRraW5kICYgMjU2IC8qIEhhc0FuY2VzdG9yICovKSA9PT0gMjU2IC8qIEhhc0FuY2VzdG9yICovO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzQXNzaWduYWJsZShleHByKSB7XG4gICAgcmV0dXJuIChleHByLiRraW5kICYgODE5MiAvKiBJc0Fzc2lnbmFibGUgKi8pID09PSA4MTkyIC8qIElzQXNzaWduYWJsZSAqLztcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc0xlZnRIYW5kU2lkZShleHByKSB7XG4gICAgcmV0dXJuIChleHByLiRraW5kICYgMTAyNCAvKiBJc0xlZnRIYW5kU2lkZSAqLykgPT09IDEwMjQgLyogSXNMZWZ0SGFuZFNpZGUgKi87XG59XG5leHBvcnQgZnVuY3Rpb24gaXNQcmltYXJ5KGV4cHIpIHtcbiAgICByZXR1cm4gKGV4cHIuJGtpbmQgJiA1MTIgLyogSXNQcmltYXJ5ICovKSA9PT0gNTEyIC8qIElzUHJpbWFyeSAqLztcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc1Jlc291cmNlKGV4cHIpIHtcbiAgICByZXR1cm4gKGV4cHIuJGtpbmQgJiAzMjc2OCAvKiBJc1Jlc291cmNlICovKSA9PT0gMzI3NjggLyogSXNSZXNvdXJjZSAqLztcbn1cbmV4cG9ydCBmdW5jdGlvbiBoYXNCaW5kKGV4cHIpIHtcbiAgICByZXR1cm4gKGV4cHIuJGtpbmQgJiAyMDQ4IC8qIEhhc0JpbmQgKi8pID09PSAyMDQ4IC8qIEhhc0JpbmQgKi87XG59XG5leHBvcnQgZnVuY3Rpb24gaGFzVW5iaW5kKGV4cHIpIHtcbiAgICByZXR1cm4gKGV4cHIuJGtpbmQgJiA0MDk2IC8qIEhhc1VuYmluZCAqLykgPT09IDQwOTYgLyogSGFzVW5iaW5kICovO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzTGl0ZXJhbChleHByKSB7XG4gICAgcmV0dXJuIChleHByLiRraW5kICYgMTYzODQgLyogSXNMaXRlcmFsICovKSA9PT0gMTYzODQgLyogSXNMaXRlcmFsICovO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGFyZVB1cmVMaXRlcmFscyhleHByZXNzaW9ucykge1xuICAgIGlmIChleHByZXNzaW9ucyA9PT0gdm9pZCAwIHx8IGV4cHJlc3Npb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBleHByZXNzaW9ucy5sZW5ndGg7ICsraSkge1xuICAgICAgICBpZiAoIWlzUHVyZUxpdGVyYWwoZXhwcmVzc2lvbnNbaV0pKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNQdXJlTGl0ZXJhbChleHByKSB7XG4gICAgaWYgKGlzTGl0ZXJhbChleHByKSkge1xuICAgICAgICBzd2l0Y2ggKGV4cHIuJGtpbmQpIHtcbiAgICAgICAgICAgIGNhc2UgMTc5NTUgLyogQXJyYXlMaXRlcmFsICovOlxuICAgICAgICAgICAgICAgIHJldHVybiBhcmVQdXJlTGl0ZXJhbHMoZXhwci5lbGVtZW50cyk7XG4gICAgICAgICAgICBjYXNlIDE3OTU2IC8qIE9iamVjdExpdGVyYWwgKi86XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFyZVB1cmVMaXRlcmFscyhleHByLnZhbHVlcyk7XG4gICAgICAgICAgICBjYXNlIDE3OTU4IC8qIFRlbXBsYXRlICovOlxuICAgICAgICAgICAgICAgIHJldHVybiBhcmVQdXJlTGl0ZXJhbHMoZXhwci5leHByZXNzaW9ucyk7XG4gICAgICAgICAgICBjYXNlIDE3OTI1IC8qIFByaW1pdGl2ZUxpdGVyYWwgKi86XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxudmFyIFJ1bnRpbWVFcnJvcjtcbihmdW5jdGlvbiAoUnVudGltZUVycm9yKSB7XG4gICAgUnVudGltZUVycm9yW1J1bnRpbWVFcnJvcltcIk5vTG9jYXRvclwiXSA9IDIwMl0gPSBcIk5vTG9jYXRvclwiO1xuICAgIFJ1bnRpbWVFcnJvcltSdW50aW1lRXJyb3JbXCJOb0JlaGF2aW9yRm91bmRcIl0gPSAyMDNdID0gXCJOb0JlaGF2aW9yRm91bmRcIjtcbiAgICBSdW50aW1lRXJyb3JbUnVudGltZUVycm9yW1wiQmVoYXZpb3JBbHJlYWR5QXBwbGllZFwiXSA9IDIwNF0gPSBcIkJlaGF2aW9yQWxyZWFkeUFwcGxpZWRcIjtcbiAgICBSdW50aW1lRXJyb3JbUnVudGltZUVycm9yW1wiTm9Db252ZXJ0ZXJGb3VuZFwiXSA9IDIwNV0gPSBcIk5vQ29udmVydGVyRm91bmRcIjtcbiAgICBSdW50aW1lRXJyb3JbUnVudGltZUVycm9yW1wiTm9CaW5kaW5nXCJdID0gMjA2XSA9IFwiTm9CaW5kaW5nXCI7XG4gICAgUnVudGltZUVycm9yW1J1bnRpbWVFcnJvcltcIk5vdEFGdW5jdGlvblwiXSA9IDIwN10gPSBcIk5vdEFGdW5jdGlvblwiO1xuICAgIFJ1bnRpbWVFcnJvcltSdW50aW1lRXJyb3JbXCJVbmtub3duT3BlcmF0b3JcIl0gPSAyMDhdID0gXCJVbmtub3duT3BlcmF0b3JcIjtcbiAgICBSdW50aW1lRXJyb3JbUnVudGltZUVycm9yW1wiTmlsU2NvcGVcIl0gPSAyNTBdID0gXCJOaWxTY29wZVwiO1xufSkoUnVudGltZUVycm9yIHx8IChSdW50aW1lRXJyb3IgPSB7fSkpO1xuZXhwb3J0IGNsYXNzIEN1c3RvbUV4cHJlc3Npb24ge1xuICAgIGNvbnN0cnVjdG9yKHZhbHVlKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICB9XG4gICAgZXZhbHVhdGUoZmxhZ3MsIHNjb3BlLCBsb2NhdG9yLCBwYXJ0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZhbHVlO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBCaW5kaW5nQmVoYXZpb3JFeHByZXNzaW9uIHtcbiAgICBjb25zdHJ1Y3RvcihleHByZXNzaW9uLCBuYW1lLCBhcmdzKSB7XG4gICAgICAgIHRoaXMuZXhwcmVzc2lvbiA9IGV4cHJlc3Npb247XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMuYXJncyA9IGFyZ3M7XG4gICAgICAgIHRoaXMuJGtpbmQgPSAzODk2MiAvKiBCaW5kaW5nQmVoYXZpb3IgKi87XG4gICAgICAgIHRoaXMuYmVoYXZpb3JLZXkgPSBCaW5kaW5nQmVoYXZpb3Iua2V5RnJvbShuYW1lKTtcbiAgICB9XG4gICAgZXZhbHVhdGUoZmxhZ3MsIHNjb3BlLCBsb2NhdG9yLCBwYXJ0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmV4cHJlc3Npb24uZXZhbHVhdGUoZmxhZ3MsIHNjb3BlLCBsb2NhdG9yLCBwYXJ0KTtcbiAgICB9XG4gICAgYXNzaWduKGZsYWdzLCBzY29wZSwgbG9jYXRvciwgdmFsdWUsIHBhcnQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXhwcmVzc2lvbi5hc3NpZ24oZmxhZ3MsIHNjb3BlLCBsb2NhdG9yLCB2YWx1ZSwgcGFydCk7XG4gICAgfVxuICAgIGNvbm5lY3QoZmxhZ3MsIHNjb3BlLCBiaW5kaW5nLCBwYXJ0KSB7XG4gICAgICAgIHRoaXMuZXhwcmVzc2lvbi5jb25uZWN0KGZsYWdzLCBzY29wZSwgYmluZGluZywgcGFydCk7XG4gICAgfVxuICAgIGJpbmQoZmxhZ3MsIHNjb3BlLCBiaW5kaW5nKSB7XG4gICAgICAgIGlmIChzY29wZSA9PSBudWxsKSB7XG4gICAgICAgICAgICB0aHJvdyBSZXBvcnRlci5lcnJvcigyNTAgLyogTmlsU2NvcGUgKi8sIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghYmluZGluZykge1xuICAgICAgICAgICAgdGhyb3cgUmVwb3J0ZXIuZXJyb3IoMjA2IC8qIE5vQmluZGluZyAqLywgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbG9jYXRvciA9IGJpbmRpbmcubG9jYXRvcjtcbiAgICAgICAgaWYgKCFsb2NhdG9yKSB7XG4gICAgICAgICAgICB0aHJvdyBSZXBvcnRlci5lcnJvcigyMDIgLyogTm9Mb2NhdG9yICovLCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaGFzQmluZCh0aGlzLmV4cHJlc3Npb24pKSB7XG4gICAgICAgICAgICB0aGlzLmV4cHJlc3Npb24uYmluZChmbGFncywgc2NvcGUsIGJpbmRpbmcpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGJlaGF2aW9yS2V5ID0gdGhpcy5iZWhhdmlvcktleTtcbiAgICAgICAgY29uc3QgYmVoYXZpb3IgPSBsb2NhdG9yLmdldChiZWhhdmlvcktleSk7XG4gICAgICAgIGlmICghYmVoYXZpb3IpIHtcbiAgICAgICAgICAgIHRocm93IFJlcG9ydGVyLmVycm9yKDIwMyAvKiBOb0JlaGF2aW9yRm91bmQgKi8sIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghKGJlaGF2aW9yIGluc3RhbmNlb2YgQmluZGluZ0JlaGF2aW9yRmFjdG9yeSkpIHtcbiAgICAgICAgICAgIGlmIChiaW5kaW5nW2JlaGF2aW9yS2V5XSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgYmluZGluZ1tiZWhhdmlvcktleV0gPSBiZWhhdmlvcjtcbiAgICAgICAgICAgICAgICBiZWhhdmlvci5iaW5kLmNhbGwoYmVoYXZpb3IsIGZsYWdzLCBzY29wZSwgYmluZGluZywgLi4uZXZhbExpc3QoZmxhZ3MsIHNjb3BlLCBsb2NhdG9yLCB0aGlzLmFyZ3MpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIFJlcG9ydGVyLndyaXRlKDIwNCAvKiBCZWhhdmlvckFscmVhZHlBcHBsaWVkICovLCB0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICB1bmJpbmQoZmxhZ3MsIHNjb3BlLCBiaW5kaW5nKSB7XG4gICAgICAgIGNvbnN0IGJlaGF2aW9yS2V5ID0gdGhpcy5iZWhhdmlvcktleTtcbiAgICAgICAgaWYgKGJpbmRpbmdbYmVoYXZpb3JLZXldICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgIGJpbmRpbmdbYmVoYXZpb3JLZXldLnVuYmluZChmbGFncywgc2NvcGUsIGJpbmRpbmcpO1xuICAgICAgICAgICAgYmluZGluZ1tiZWhhdmlvcktleV0gPSB2b2lkIDA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhhc1VuYmluZCh0aGlzLmV4cHJlc3Npb24pKSB7XG4gICAgICAgICAgICB0aGlzLmV4cHJlc3Npb24udW5iaW5kKGZsYWdzLCBzY29wZSwgYmluZGluZyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYWNjZXB0KHZpc2l0b3IpIHtcbiAgICAgICAgcmV0dXJuIHZpc2l0b3IudmlzaXRCaW5kaW5nQmVoYXZpb3IodGhpcyk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFZhbHVlQ29udmVydGVyRXhwcmVzc2lvbiB7XG4gICAgY29uc3RydWN0b3IoZXhwcmVzc2lvbiwgbmFtZSwgYXJncykge1xuICAgICAgICB0aGlzLmV4cHJlc3Npb24gPSBleHByZXNzaW9uO1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLmFyZ3MgPSBhcmdzO1xuICAgICAgICB0aGlzLiRraW5kID0gMzY5MTMgLyogVmFsdWVDb252ZXJ0ZXIgKi87XG4gICAgICAgIHRoaXMuY29udmVydGVyS2V5ID0gVmFsdWVDb252ZXJ0ZXIua2V5RnJvbShuYW1lKTtcbiAgICB9XG4gICAgZXZhbHVhdGUoZmxhZ3MsIHNjb3BlLCBsb2NhdG9yLCBwYXJ0KSB7XG4gICAgICAgIGlmICghbG9jYXRvcikge1xuICAgICAgICAgICAgdGhyb3cgUmVwb3J0ZXIuZXJyb3IoMjAyIC8qIE5vTG9jYXRvciAqLywgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29udmVydGVyID0gbG9jYXRvci5nZXQodGhpcy5jb252ZXJ0ZXJLZXkpO1xuICAgICAgICBpZiAoIWNvbnZlcnRlcikge1xuICAgICAgICAgICAgdGhyb3cgUmVwb3J0ZXIuZXJyb3IoMjA1IC8qIE5vQ29udmVydGVyRm91bmQgKi8sIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICgndG9WaWV3JyBpbiBjb252ZXJ0ZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IGFyZ3MgPSB0aGlzLmFyZ3M7XG4gICAgICAgICAgICBjb25zdCBsZW4gPSBhcmdzLmxlbmd0aDtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IEFycmF5KGxlbiArIDEpO1xuICAgICAgICAgICAgcmVzdWx0WzBdID0gdGhpcy5leHByZXNzaW9uLmV2YWx1YXRlKGZsYWdzLCBzY29wZSwgbG9jYXRvciwgcGFydCk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0W2kgKyAxXSA9IGFyZ3NbaV0uZXZhbHVhdGUoZmxhZ3MsIHNjb3BlLCBsb2NhdG9yLCBwYXJ0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjb252ZXJ0ZXIudG9WaWV3LmNhbGwoY29udmVydGVyLCAuLi5yZXN1bHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmV4cHJlc3Npb24uZXZhbHVhdGUoZmxhZ3MsIHNjb3BlLCBsb2NhdG9yLCBwYXJ0KTtcbiAgICB9XG4gICAgYXNzaWduKGZsYWdzLCBzY29wZSwgbG9jYXRvciwgdmFsdWUsIHBhcnQpIHtcbiAgICAgICAgaWYgKCFsb2NhdG9yKSB7XG4gICAgICAgICAgICB0aHJvdyBSZXBvcnRlci5lcnJvcigyMDIgLyogTm9Mb2NhdG9yICovLCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb252ZXJ0ZXIgPSBsb2NhdG9yLmdldCh0aGlzLmNvbnZlcnRlcktleSk7XG4gICAgICAgIGlmICghY29udmVydGVyKSB7XG4gICAgICAgICAgICB0aHJvdyBSZXBvcnRlci5lcnJvcigyMDUgLyogTm9Db252ZXJ0ZXJGb3VuZCAqLywgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCdmcm9tVmlldycgaW4gY29udmVydGVyKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IGNvbnZlcnRlci5mcm9tVmlldy5jYWxsKGNvbnZlcnRlciwgdmFsdWUsIC4uLihldmFsTGlzdChmbGFncywgc2NvcGUsIGxvY2F0b3IsIHRoaXMuYXJncykpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5leHByZXNzaW9uLmFzc2lnbihmbGFncywgc2NvcGUsIGxvY2F0b3IsIHZhbHVlLCBwYXJ0KTtcbiAgICB9XG4gICAgY29ubmVjdChmbGFncywgc2NvcGUsIGJpbmRpbmcsIHBhcnQpIHtcbiAgICAgICAgaWYgKHNjb3BlID09IG51bGwpIHtcbiAgICAgICAgICAgIHRocm93IFJlcG9ydGVyLmVycm9yKDI1MCAvKiBOaWxTY29wZSAqLywgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFiaW5kaW5nKSB7XG4gICAgICAgICAgICB0aHJvdyBSZXBvcnRlci5lcnJvcigyMDYgLyogTm9CaW5kaW5nICovLCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsb2NhdG9yID0gYmluZGluZy5sb2NhdG9yO1xuICAgICAgICBpZiAoIWxvY2F0b3IpIHtcbiAgICAgICAgICAgIHRocm93IFJlcG9ydGVyLmVycm9yKDIwMiAvKiBOb0xvY2F0b3IgKi8sIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZXhwcmVzc2lvbi5jb25uZWN0KGZsYWdzLCBzY29wZSwgYmluZGluZywgcGFydCk7XG4gICAgICAgIGNvbnN0IGFyZ3MgPSB0aGlzLmFyZ3M7XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IGFyZ3MubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgYXJnc1tpXS5jb25uZWN0KGZsYWdzLCBzY29wZSwgYmluZGluZywgcGFydCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29udmVydGVyID0gbG9jYXRvci5nZXQodGhpcy5jb252ZXJ0ZXJLZXkpO1xuICAgICAgICBpZiAoIWNvbnZlcnRlcikge1xuICAgICAgICAgICAgdGhyb3cgUmVwb3J0ZXIuZXJyb3IoMjA1IC8qIE5vQ29udmVydGVyRm91bmQgKi8sIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNpZ25hbHMgPSBjb252ZXJ0ZXIuc2lnbmFscztcbiAgICAgICAgaWYgKHNpZ25hbHMgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNpZ25hbGVyID0gbG9jYXRvci5nZXQoSVNpZ25hbGVyKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGlpID0gc2lnbmFscy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICBzaWduYWxlci5hZGRTaWduYWxMaXN0ZW5lcihzaWduYWxzW2ldLCBiaW5kaW5nKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1bmJpbmQoZmxhZ3MsIHNjb3BlLCBiaW5kaW5nKSB7XG4gICAgICAgIGNvbnN0IGxvY2F0b3IgPSBiaW5kaW5nLmxvY2F0b3I7XG4gICAgICAgIGNvbnN0IGNvbnZlcnRlciA9IGxvY2F0b3IuZ2V0KHRoaXMuY29udmVydGVyS2V5KTtcbiAgICAgICAgY29uc3Qgc2lnbmFscyA9IGNvbnZlcnRlci5zaWduYWxzO1xuICAgICAgICBpZiAoc2lnbmFscyA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2lnbmFsZXIgPSBsb2NhdG9yLmdldChJU2lnbmFsZXIpO1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBzaWduYWxzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIHNpZ25hbGVyLnJlbW92ZVNpZ25hbExpc3RlbmVyKHNpZ25hbHNbaV0sIGJpbmRpbmcpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFjY2VwdCh2aXNpdG9yKSB7XG4gICAgICAgIHJldHVybiB2aXNpdG9yLnZpc2l0VmFsdWVDb252ZXJ0ZXIodGhpcyk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIEFzc2lnbkV4cHJlc3Npb24ge1xuICAgIGNvbnN0cnVjdG9yKHRhcmdldCwgdmFsdWUpIHtcbiAgICAgICAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7XG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy4ka2luZCA9IDgyMDggLyogQXNzaWduICovO1xuICAgIH1cbiAgICBldmFsdWF0ZShmbGFncywgc2NvcGUsIGxvY2F0b3IsIHBhcnQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGFyZ2V0LmFzc2lnbihmbGFncywgc2NvcGUsIGxvY2F0b3IsIHRoaXMudmFsdWUuZXZhbHVhdGUoZmxhZ3MsIHNjb3BlLCBsb2NhdG9yKSwgcGFydCk7XG4gICAgfVxuICAgIGNvbm5lY3QoZmxhZ3MsIHNjb3BlLCBiaW5kaW5nLCBwYXJ0KSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYXNzaWduKGZsYWdzLCBzY29wZSwgbG9jYXRvciwgdmFsdWUsIHBhcnQpIHtcbiAgICAgICAgdGhpcy52YWx1ZS5hc3NpZ24oZmxhZ3MsIHNjb3BlLCBsb2NhdG9yLCB2YWx1ZSwgcGFydCk7XG4gICAgICAgIHJldHVybiB0aGlzLnRhcmdldC5hc3NpZ24oZmxhZ3MsIHNjb3BlLCBsb2NhdG9yLCB2YWx1ZSwgcGFydCk7XG4gICAgfVxuICAgIGFjY2VwdCh2aXNpdG9yKSB7XG4gICAgICAgIHJldHVybiB2aXNpdG9yLnZpc2l0QXNzaWduKHRoaXMpO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBDb25kaXRpb25hbEV4cHJlc3Npb24ge1xuICAgIGNvbnN0cnVjdG9yKGNvbmRpdGlvbiwgeWVzLCBubykge1xuICAgICAgICB0aGlzLmNvbmRpdGlvbiA9IGNvbmRpdGlvbjtcbiAgICAgICAgdGhpcy55ZXMgPSB5ZXM7XG4gICAgICAgIHRoaXMubm8gPSBubztcbiAgICAgICAgdGhpcy4ka2luZCA9IDYzIC8qIENvbmRpdGlvbmFsICovO1xuICAgIH1cbiAgICBldmFsdWF0ZShmbGFncywgc2NvcGUsIGxvY2F0b3IsIHBhcnQpIHtcbiAgICAgICAgcmV0dXJuICghIXRoaXMuY29uZGl0aW9uLmV2YWx1YXRlKGZsYWdzLCBzY29wZSwgbG9jYXRvciwgcGFydCkpXG4gICAgICAgICAgICA/IHRoaXMueWVzLmV2YWx1YXRlKGZsYWdzLCBzY29wZSwgbG9jYXRvciwgcGFydClcbiAgICAgICAgICAgIDogdGhpcy5uby5ldmFsdWF0ZShmbGFncywgc2NvcGUsIGxvY2F0b3IsIHBhcnQpO1xuICAgIH1cbiAgICBhc3NpZ24oZmxhZ3MsIHNjb3BlLCBsb2NhdG9yLCBvYmosIHBhcnQpIHtcbiAgICAgICAgcmV0dXJuIHZvaWQgMDtcbiAgICB9XG4gICAgY29ubmVjdChmbGFncywgc2NvcGUsIGJpbmRpbmcsIHBhcnQpIHtcbiAgICAgICAgY29uc3QgY29uZGl0aW9uID0gdGhpcy5jb25kaXRpb247XG4gICAgICAgIGlmIChjb25kaXRpb24uZXZhbHVhdGUoZmxhZ3MsIHNjb3BlLCBudWxsLCBwYXJ0KSkge1xuICAgICAgICAgICAgdGhpcy5jb25kaXRpb24uY29ubmVjdChmbGFncywgc2NvcGUsIGJpbmRpbmcsIHBhcnQpO1xuICAgICAgICAgICAgdGhpcy55ZXMuY29ubmVjdChmbGFncywgc2NvcGUsIGJpbmRpbmcsIHBhcnQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jb25kaXRpb24uY29ubmVjdChmbGFncywgc2NvcGUsIGJpbmRpbmcsIHBhcnQpO1xuICAgICAgICAgICAgdGhpcy5uby5jb25uZWN0KGZsYWdzLCBzY29wZSwgYmluZGluZywgcGFydCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYWNjZXB0KHZpc2l0b3IpIHtcbiAgICAgICAgcmV0dXJuIHZpc2l0b3IudmlzaXRDb25kaXRpb25hbCh0aGlzKTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQWNjZXNzVGhpc0V4cHJlc3Npb24ge1xuICAgIGNvbnN0cnVjdG9yKGFuY2VzdG9yID0gMCkge1xuICAgICAgICB0aGlzLmFuY2VzdG9yID0gYW5jZXN0b3I7XG4gICAgICAgIHRoaXMuJGtpbmQgPSAxNzkzIC8qIEFjY2Vzc1RoaXMgKi87XG4gICAgfVxuICAgIGV2YWx1YXRlKGZsYWdzLCBzY29wZSwgbG9jYXRvciwgcGFydCkge1xuICAgICAgICBpZiAoc2NvcGUgPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhyb3cgUmVwb3J0ZXIuZXJyb3IoMjUwIC8qIE5pbFNjb3BlICovLCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKGZsYWdzICYgNjcxMDg4NjQgLyogYWxsb3dQYXJlbnRTY29wZVRyYXZlcnNhbCAqLykgPiAwKSB7XG4gICAgICAgICAgICBsZXQgcGFyZW50ID0gc2NvcGUucGFyZW50U2NvcGU7XG4gICAgICAgICAgICB3aGlsZSAocGFyZW50ICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFwYXJlbnQuc2NvcGVQYXJ0cy5pbmNsdWRlcyhwYXJ0KSkge1xuICAgICAgICAgICAgICAgICAgICBwYXJlbnQgPSBwYXJlbnQucGFyZW50U2NvcGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHBhcmVudCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgTm8gdGFyZ2V0IHNjb3BlIGNvbGQgYmUgZm91bmQgZm9yIHBhcnQgXCIke3BhcnR9XCJgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsZXQgb2MgPSBzY29wZS5vdmVycmlkZUNvbnRleHQ7XG4gICAgICAgIGxldCBpID0gdGhpcy5hbmNlc3RvcjtcbiAgICAgICAgd2hpbGUgKGktLSAmJiBvYykge1xuICAgICAgICAgICAgb2MgPSBvYy5wYXJlbnRPdmVycmlkZUNvbnRleHQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGkgPCAxICYmIG9jID8gb2MuYmluZGluZ0NvbnRleHQgOiB2b2lkIDA7XG4gICAgfVxuICAgIGFzc2lnbihmbGFncywgc2NvcGUsIGxvY2F0b3IsIG9iaiwgcGFydCkge1xuICAgICAgICByZXR1cm4gdm9pZCAwO1xuICAgIH1cbiAgICBjb25uZWN0KGZsYWdzLCBzY29wZSwgYmluZGluZywgcGFydCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGFjY2VwdCh2aXNpdG9yKSB7XG4gICAgICAgIHJldHVybiB2aXNpdG9yLnZpc2l0QWNjZXNzVGhpcyh0aGlzKTtcbiAgICB9XG59XG5BY2Nlc3NUaGlzRXhwcmVzc2lvbi4kdGhpcyA9IG5ldyBBY2Nlc3NUaGlzRXhwcmVzc2lvbigwKTtcbkFjY2Vzc1RoaXNFeHByZXNzaW9uLiRwYXJlbnQgPSBuZXcgQWNjZXNzVGhpc0V4cHJlc3Npb24oMSk7XG5leHBvcnQgY2xhc3MgQWNjZXNzU2NvcGVFeHByZXNzaW9uIHtcbiAgICBjb25zdHJ1Y3RvcihuYW1lLCBhbmNlc3RvciA9IDApIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5hbmNlc3RvciA9IGFuY2VzdG9yO1xuICAgICAgICB0aGlzLiRraW5kID0gMTAwODIgLyogQWNjZXNzU2NvcGUgKi87XG4gICAgfVxuICAgIGV2YWx1YXRlKGZsYWdzLCBzY29wZSwgbG9jYXRvciwgcGFydCkge1xuICAgICAgICBjb25zdCBvYmogPSBCaW5kaW5nQ29udGV4dC5nZXQoc2NvcGUsIHRoaXMubmFtZSwgdGhpcy5hbmNlc3RvciwgZmxhZ3MsIHBhcnQpO1xuICAgICAgICBjb25zdCBldmFsdWF0ZWRWYWx1ZSA9IG9ialt0aGlzLm5hbWVdO1xuICAgICAgICBpZiAoZmxhZ3MgJiA0IC8qIGlzU3RyaWN0QmluZGluZ1N0cmF0ZWd5ICovKSB7XG4gICAgICAgICAgICByZXR1cm4gZXZhbHVhdGVkVmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGV2YWx1YXRlZFZhbHVlID09IG51bGwgPyAnJyA6IGV2YWx1YXRlZFZhbHVlO1xuICAgIH1cbiAgICBhc3NpZ24oZmxhZ3MsIHNjb3BlLCBsb2NhdG9yLCB2YWx1ZSwgcGFydCkge1xuICAgICAgICBjb25zdCBvYmogPSBCaW5kaW5nQ29udGV4dC5nZXQoc2NvcGUsIHRoaXMubmFtZSwgdGhpcy5hbmNlc3RvciwgZmxhZ3MsIHBhcnQpO1xuICAgICAgICBpZiAob2JqIGluc3RhbmNlb2YgT2JqZWN0KSB7XG4gICAgICAgICAgICBpZiAob2JqLiRvYnNlcnZlcnMgIT09IHZvaWQgMCAmJiBvYmouJG9ic2VydmVyc1t0aGlzLm5hbWVdICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICBvYmouJG9ic2VydmVyc1t0aGlzLm5hbWVdLnNldFZhbHVlKHZhbHVlLCBmbGFncyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9ialt0aGlzLm5hbWVdID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZvaWQgMDtcbiAgICB9XG4gICAgY29ubmVjdChmbGFncywgc2NvcGUsIGJpbmRpbmcsIHBhcnQpIHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IEJpbmRpbmdDb250ZXh0LmdldChzY29wZSwgdGhpcy5uYW1lLCB0aGlzLmFuY2VzdG9yLCBmbGFncywgcGFydCk7XG4gICAgICAgIGJpbmRpbmcub2JzZXJ2ZVByb3BlcnR5KGZsYWdzLCBjb250ZXh0LCB0aGlzLm5hbWUpO1xuICAgIH1cbiAgICBhY2NlcHQodmlzaXRvcikge1xuICAgICAgICByZXR1cm4gdmlzaXRvci52aXNpdEFjY2Vzc1Njb3BlKHRoaXMpO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBBY2Nlc3NNZW1iZXJFeHByZXNzaW9uIHtcbiAgICBjb25zdHJ1Y3RvcihvYmplY3QsIG5hbWUpIHtcbiAgICAgICAgdGhpcy5vYmplY3QgPSBvYmplY3Q7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMuJGtpbmQgPSA5MzIzIC8qIEFjY2Vzc01lbWJlciAqLztcbiAgICB9XG4gICAgZXZhbHVhdGUoZmxhZ3MsIHNjb3BlLCBsb2NhdG9yLCBwYXJ0KSB7XG4gICAgICAgIGNvbnN0IGluc3RhbmNlID0gdGhpcy5vYmplY3QuZXZhbHVhdGUoZmxhZ3MsIHNjb3BlLCBsb2NhdG9yLCBwYXJ0KTtcbiAgICAgICAgaWYgKGZsYWdzICYgNCAvKiBpc1N0cmljdEJpbmRpbmdTdHJhdGVneSAqLykge1xuICAgICAgICAgICAgcmV0dXJuIGluc3RhbmNlID09IG51bGwgPyBpbnN0YW5jZSA6IGluc3RhbmNlW3RoaXMubmFtZV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGluc3RhbmNlID8gaW5zdGFuY2VbdGhpcy5uYW1lXSA6ICcnO1xuICAgIH1cbiAgICBhc3NpZ24oZmxhZ3MsIHNjb3BlLCBsb2NhdG9yLCB2YWx1ZSwgcGFydCkge1xuICAgICAgICBjb25zdCBvYmogPSB0aGlzLm9iamVjdC5ldmFsdWF0ZShmbGFncywgc2NvcGUsIGxvY2F0b3IsIHBhcnQpO1xuICAgICAgICBpZiAob2JqIGluc3RhbmNlb2YgT2JqZWN0KSB7XG4gICAgICAgICAgICBpZiAob2JqLiRvYnNlcnZlcnMgIT09IHZvaWQgMCAmJiBvYmouJG9ic2VydmVyc1t0aGlzLm5hbWVdICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICBvYmouJG9ic2VydmVyc1t0aGlzLm5hbWVdLnNldFZhbHVlKHZhbHVlLCBmbGFncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBvYmpbdGhpcy5uYW1lXSA9IHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5vYmplY3QuYXNzaWduKGZsYWdzLCBzY29wZSwgbG9jYXRvciwgeyBbdGhpcy5uYW1lXTogdmFsdWUgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBjb25uZWN0KGZsYWdzLCBzY29wZSwgYmluZGluZywgcGFydCkge1xuICAgICAgICBjb25zdCBvYmogPSB0aGlzLm9iamVjdC5ldmFsdWF0ZShmbGFncywgc2NvcGUsIG51bGwsIHBhcnQpO1xuICAgICAgICBpZiAoKGZsYWdzICYgMTM0MjE3NzI4IC8qIG9ic2VydmVMZWFmUHJvcGVydGllc09ubHkgKi8pID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLm9iamVjdC5jb25uZWN0KGZsYWdzLCBzY29wZSwgYmluZGluZywgcGFydCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9iaiBpbnN0YW5jZW9mIE9iamVjdCkge1xuICAgICAgICAgICAgYmluZGluZy5vYnNlcnZlUHJvcGVydHkoZmxhZ3MsIG9iaiwgdGhpcy5uYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhY2NlcHQodmlzaXRvcikge1xuICAgICAgICByZXR1cm4gdmlzaXRvci52aXNpdEFjY2Vzc01lbWJlcih0aGlzKTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQWNjZXNzS2V5ZWRFeHByZXNzaW9uIHtcbiAgICBjb25zdHJ1Y3RvcihvYmplY3QsIGtleSkge1xuICAgICAgICB0aGlzLm9iamVjdCA9IG9iamVjdDtcbiAgICAgICAgdGhpcy5rZXkgPSBrZXk7XG4gICAgICAgIHRoaXMuJGtpbmQgPSA5MzI0IC8qIEFjY2Vzc0tleWVkICovO1xuICAgIH1cbiAgICBldmFsdWF0ZShmbGFncywgc2NvcGUsIGxvY2F0b3IsIHBhcnQpIHtcbiAgICAgICAgY29uc3QgaW5zdGFuY2UgPSB0aGlzLm9iamVjdC5ldmFsdWF0ZShmbGFncywgc2NvcGUsIGxvY2F0b3IsIHBhcnQpO1xuICAgICAgICBpZiAoaW5zdGFuY2UgaW5zdGFuY2VvZiBPYmplY3QpIHtcbiAgICAgICAgICAgIGNvbnN0IGtleSA9IHRoaXMua2V5LmV2YWx1YXRlKGZsYWdzLCBzY29wZSwgbG9jYXRvciwgcGFydCk7XG4gICAgICAgICAgICByZXR1cm4gaW5zdGFuY2Vba2V5XTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdm9pZCAwO1xuICAgIH1cbiAgICBhc3NpZ24oZmxhZ3MsIHNjb3BlLCBsb2NhdG9yLCB2YWx1ZSwgcGFydCkge1xuICAgICAgICBjb25zdCBpbnN0YW5jZSA9IHRoaXMub2JqZWN0LmV2YWx1YXRlKGZsYWdzLCBzY29wZSwgbG9jYXRvciwgcGFydCk7XG4gICAgICAgIGNvbnN0IGtleSA9IHRoaXMua2V5LmV2YWx1YXRlKGZsYWdzLCBzY29wZSwgbG9jYXRvciwgcGFydCk7XG4gICAgICAgIHJldHVybiBpbnN0YW5jZVtrZXldID0gdmFsdWU7XG4gICAgfVxuICAgIGNvbm5lY3QoZmxhZ3MsIHNjb3BlLCBiaW5kaW5nLCBwYXJ0KSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHRoaXMub2JqZWN0LmV2YWx1YXRlKGZsYWdzLCBzY29wZSwgbnVsbCwgcGFydCk7XG4gICAgICAgIGlmICgoZmxhZ3MgJiAxMzQyMTc3MjggLyogb2JzZXJ2ZUxlYWZQcm9wZXJ0aWVzT25seSAqLykgPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0LmNvbm5lY3QoZmxhZ3MsIHNjb3BlLCBiaW5kaW5nLCBwYXJ0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob2JqIGluc3RhbmNlb2YgT2JqZWN0KSB7XG4gICAgICAgICAgICB0aGlzLmtleS5jb25uZWN0KGZsYWdzLCBzY29wZSwgYmluZGluZywgcGFydCk7XG4gICAgICAgICAgICBjb25zdCBrZXkgPSB0aGlzLmtleS5ldmFsdWF0ZShmbGFncywgc2NvcGUsIG51bGwsIHBhcnQpO1xuICAgICAgICAgICAgLy8gKG5vdGU6IHN0cmluZyBpbmRleGVycyBiZWhhdmUgdGhlIHNhbWUgd2F5IGFzIG51bWVyaWMgaW5kZXhlcnMgYXMgbG9uZyBhcyB0aGV5IHJlcHJlc2VudCBudW1iZXJzKVxuICAgICAgICAgICAgYmluZGluZy5vYnNlcnZlUHJvcGVydHkoZmxhZ3MsIG9iaiwga2V5KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhY2NlcHQodmlzaXRvcikge1xuICAgICAgICByZXR1cm4gdmlzaXRvci52aXNpdEFjY2Vzc0tleWVkKHRoaXMpO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBDYWxsU2NvcGVFeHByZXNzaW9uIHtcbiAgICBjb25zdHJ1Y3RvcihuYW1lLCBhcmdzLCBhbmNlc3RvciA9IDApIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5hcmdzID0gYXJncztcbiAgICAgICAgdGhpcy5hbmNlc3RvciA9IGFuY2VzdG9yO1xuICAgICAgICB0aGlzLiRraW5kID0gMTQ0OCAvKiBDYWxsU2NvcGUgKi87XG4gICAgfVxuICAgIGV2YWx1YXRlKGZsYWdzLCBzY29wZSwgbG9jYXRvciwgcGFydCkge1xuICAgICAgICBjb25zdCBhcmdzID0gZXZhbExpc3QoZmxhZ3MsIHNjb3BlLCBsb2NhdG9yLCB0aGlzLmFyZ3MsIHBhcnQpO1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gQmluZGluZ0NvbnRleHQuZ2V0KHNjb3BlLCB0aGlzLm5hbWUsIHRoaXMuYW5jZXN0b3IsIGZsYWdzLCBwYXJ0KTtcbiAgICAgICAgY29uc3QgZnVuYyA9IGdldEZ1bmN0aW9uKGZsYWdzLCBjb250ZXh0LCB0aGlzLm5hbWUpO1xuICAgICAgICBpZiAoZnVuYykge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZvaWQgMDtcbiAgICB9XG4gICAgYXNzaWduKGZsYWdzLCBzY29wZSwgbG9jYXRvciwgb2JqLCBwYXJ0KSB7XG4gICAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgfVxuICAgIGNvbm5lY3QoZmxhZ3MsIHNjb3BlLCBiaW5kaW5nLCBwYXJ0KSB7XG4gICAgICAgIGNvbnN0IGFyZ3MgPSB0aGlzLmFyZ3M7XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IGFyZ3MubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgYXJnc1tpXS5jb25uZWN0KGZsYWdzLCBzY29wZSwgYmluZGluZywgcGFydCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYWNjZXB0KHZpc2l0b3IpIHtcbiAgICAgICAgcmV0dXJuIHZpc2l0b3IudmlzaXRDYWxsU2NvcGUodGhpcyk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIENhbGxNZW1iZXJFeHByZXNzaW9uIHtcbiAgICBjb25zdHJ1Y3RvcihvYmplY3QsIG5hbWUsIGFyZ3MpIHtcbiAgICAgICAgdGhpcy5vYmplY3QgPSBvYmplY3Q7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMuYXJncyA9IGFyZ3M7XG4gICAgICAgIHRoaXMuJGtpbmQgPSAxMTYxIC8qIENhbGxNZW1iZXIgKi87XG4gICAgfVxuICAgIGV2YWx1YXRlKGZsYWdzLCBzY29wZSwgbG9jYXRvciwgcGFydCkge1xuICAgICAgICBjb25zdCBpbnN0YW5jZSA9IHRoaXMub2JqZWN0LmV2YWx1YXRlKGZsYWdzLCBzY29wZSwgbG9jYXRvciwgcGFydCk7XG4gICAgICAgIGNvbnN0IGFyZ3MgPSBldmFsTGlzdChmbGFncywgc2NvcGUsIGxvY2F0b3IsIHRoaXMuYXJncywgcGFydCk7XG4gICAgICAgIGNvbnN0IGZ1bmMgPSBnZXRGdW5jdGlvbihmbGFncywgaW5zdGFuY2UsIHRoaXMubmFtZSk7XG4gICAgICAgIGlmIChmdW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuYy5hcHBseShpbnN0YW5jZSwgYXJncyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZvaWQgMDtcbiAgICB9XG4gICAgYXNzaWduKGZsYWdzLCBzY29wZSwgbG9jYXRvciwgb2JqLCBwYXJ0KSB7XG4gICAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgfVxuICAgIGNvbm5lY3QoZmxhZ3MsIHNjb3BlLCBiaW5kaW5nLCBwYXJ0KSB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHRoaXMub2JqZWN0LmV2YWx1YXRlKGZsYWdzLCBzY29wZSwgbnVsbCwgcGFydCk7XG4gICAgICAgIGlmICgoZmxhZ3MgJiAxMzQyMTc3MjggLyogb2JzZXJ2ZUxlYWZQcm9wZXJ0aWVzT25seSAqLykgPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0LmNvbm5lY3QoZmxhZ3MsIHNjb3BlLCBiaW5kaW5nLCBwYXJ0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZ2V0RnVuY3Rpb24oZmxhZ3MgJiB+MjA5NzE1MiAvKiBtdXN0RXZhbHVhdGUgKi8sIG9iaiwgdGhpcy5uYW1lKSkge1xuICAgICAgICAgICAgY29uc3QgYXJncyA9IHRoaXMuYXJncztcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IGFyZ3MubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgICAgIGFyZ3NbaV0uY29ubmVjdChmbGFncywgc2NvcGUsIGJpbmRpbmcsIHBhcnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGFjY2VwdCh2aXNpdG9yKSB7XG4gICAgICAgIHJldHVybiB2aXNpdG9yLnZpc2l0Q2FsbE1lbWJlcih0aGlzKTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQ2FsbEZ1bmN0aW9uRXhwcmVzc2lvbiB7XG4gICAgY29uc3RydWN0b3IoZnVuYywgYXJncykge1xuICAgICAgICB0aGlzLmZ1bmMgPSBmdW5jO1xuICAgICAgICB0aGlzLmFyZ3MgPSBhcmdzO1xuICAgICAgICB0aGlzLiRraW5kID0gMTE2MiAvKiBDYWxsRnVuY3Rpb24gKi87XG4gICAgfVxuICAgIGV2YWx1YXRlKGZsYWdzLCBzY29wZSwgbG9jYXRvciwgcGFydCkge1xuICAgICAgICBjb25zdCBmdW5jID0gdGhpcy5mdW5jLmV2YWx1YXRlKGZsYWdzLCBzY29wZSwgbG9jYXRvciwgcGFydCk7XG4gICAgICAgIGlmICh0eXBlb2YgZnVuYyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmMoLi4uZXZhbExpc3QoZmxhZ3MsIHNjb3BlLCBsb2NhdG9yLCB0aGlzLmFyZ3MsIHBhcnQpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIShmbGFncyAmIDIwOTcxNTIgLyogbXVzdEV2YWx1YXRlICovKSAmJiAoZnVuYyA9PSBudWxsKSkge1xuICAgICAgICAgICAgcmV0dXJuIHZvaWQgMDtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBSZXBvcnRlci5lcnJvcigyMDcgLyogTm90QUZ1bmN0aW9uICovLCB0aGlzKTtcbiAgICB9XG4gICAgYXNzaWduKGZsYWdzLCBzY29wZSwgbG9jYXRvciwgb2JqLCBwYXJ0KSB7XG4gICAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgfVxuICAgIGNvbm5lY3QoZmxhZ3MsIHNjb3BlLCBiaW5kaW5nLCBwYXJ0KSB7XG4gICAgICAgIGNvbnN0IGZ1bmMgPSB0aGlzLmZ1bmMuZXZhbHVhdGUoZmxhZ3MsIHNjb3BlLCBudWxsLCBwYXJ0KTtcbiAgICAgICAgdGhpcy5mdW5jLmNvbm5lY3QoZmxhZ3MsIHNjb3BlLCBiaW5kaW5nLCBwYXJ0KTtcbiAgICAgICAgaWYgKHR5cGVvZiBmdW5jID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjb25zdCBhcmdzID0gdGhpcy5hcmdzO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGlpID0gYXJncy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICAgICAgYXJnc1tpXS5jb25uZWN0KGZsYWdzLCBzY29wZSwgYmluZGluZywgcGFydCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgYWNjZXB0KHZpc2l0b3IpIHtcbiAgICAgICAgcmV0dXJuIHZpc2l0b3IudmlzaXRDYWxsRnVuY3Rpb24odGhpcyk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIEJpbmFyeUV4cHJlc3Npb24ge1xuICAgIGNvbnN0cnVjdG9yKG9wZXJhdGlvbiwgbGVmdCwgcmlnaHQpIHtcbiAgICAgICAgdGhpcy5vcGVyYXRpb24gPSBvcGVyYXRpb247XG4gICAgICAgIHRoaXMubGVmdCA9IGxlZnQ7XG4gICAgICAgIHRoaXMucmlnaHQgPSByaWdodDtcbiAgICAgICAgdGhpcy4ka2luZCA9IDQ2IC8qIEJpbmFyeSAqLztcbiAgICAgICAgLy8gd2hhdCB3ZSdyZSBkb2luZyBoZXJlIGlzIGVmZmVjdGl2ZWx5IG1vdmluZyB0aGUgbGFyZ2Ugc3dpdGNoIHN0YXRlbWVudCBmcm9tIGV2YWx1YXRlIHRvIHRoZSBjb25zdHJ1Y3RvclxuICAgICAgICAvLyBzbyB0aGF0IHRoZSBjaGVjayBvbmx5IG5lZWRzIHRvIGJlIGRvbmUgb25jZSwgYW5kIGV2YWx1YXRlICh3aGljaCBpcyBjYWxsZWQgbWFueSB0aW1lcykgd2lsbCBoYXZlIGEgbG90IGxlc3NcbiAgICAgICAgLy8gd29yayB0byBkbzsgd2UgY2FuIGRvIHRoaXMgYmVjYXVzZSB0aGUgb3BlcmF0aW9uIGNhbid0IGNoYW5nZSBhZnRlciBpdCdzIHBhcnNlZFxuICAgICAgICB0aGlzLmV2YWx1YXRlID0gdGhpc1tvcGVyYXRpb25dO1xuICAgIH1cbiAgICBldmFsdWF0ZShmbGFncywgc2NvcGUsIGxvY2F0b3IsIHBhcnQpIHtcbiAgICAgICAgdGhyb3cgUmVwb3J0ZXIuZXJyb3IoMjA4IC8qIFVua25vd25PcGVyYXRvciAqLywgdGhpcyk7XG4gICAgfVxuICAgIGFzc2lnbihmbGFncywgc2NvcGUsIGxvY2F0b3IsIG9iaiwgcGFydCkge1xuICAgICAgICByZXR1cm4gdm9pZCAwO1xuICAgIH1cbiAgICBjb25uZWN0KGZsYWdzLCBzY29wZSwgYmluZGluZywgcGFydCkge1xuICAgICAgICB0aGlzLmxlZnQuY29ubmVjdChmbGFncywgc2NvcGUsIGJpbmRpbmcsIHBhcnQpO1xuICAgICAgICB0aGlzLnJpZ2h0LmNvbm5lY3QoZmxhZ3MsIHNjb3BlLCBiaW5kaW5nLCBwYXJ0KTtcbiAgICB9XG4gICAgWycmJiddKGYsIHMsIGwsIHApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGVmdC5ldmFsdWF0ZShmLCBzLCBsLCBwKSAmJiB0aGlzLnJpZ2h0LmV2YWx1YXRlKGYsIHMsIGwsIHApO1xuICAgIH1cbiAgICBbJ3x8J10oZiwgcywgbCwgcCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sZWZ0LmV2YWx1YXRlKGYsIHMsIGwsIHApIHx8IHRoaXMucmlnaHQuZXZhbHVhdGUoZiwgcywgbCwgcCk7XG4gICAgfVxuICAgIFsnPT0nXShmLCBzLCBsLCBwKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBlcWVxZXFcbiAgICAgICAgcmV0dXJuIHRoaXMubGVmdC5ldmFsdWF0ZShmLCBzLCBsLCBwKSA9PSB0aGlzLnJpZ2h0LmV2YWx1YXRlKGYsIHMsIGwsIHApO1xuICAgIH1cbiAgICBbJz09PSddKGYsIHMsIGwsIHApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGVmdC5ldmFsdWF0ZShmLCBzLCBsLCBwKSA9PT0gdGhpcy5yaWdodC5ldmFsdWF0ZShmLCBzLCBsLCBwKTtcbiAgICB9XG4gICAgWychPSddKGYsIHMsIGwsIHApIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGVxZXFlcVxuICAgICAgICByZXR1cm4gdGhpcy5sZWZ0LmV2YWx1YXRlKGYsIHMsIGwsIHApICE9IHRoaXMucmlnaHQuZXZhbHVhdGUoZiwgcywgbCwgcCk7XG4gICAgfVxuICAgIFsnIT09J10oZiwgcywgbCwgcCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sZWZ0LmV2YWx1YXRlKGYsIHMsIGwsIHApICE9PSB0aGlzLnJpZ2h0LmV2YWx1YXRlKGYsIHMsIGwsIHApO1xuICAgIH1cbiAgICBbJ2luc3RhbmNlb2YnXShmLCBzLCBsLCBwKSB7XG4gICAgICAgIGNvbnN0IHJpZ2h0ID0gdGhpcy5yaWdodC5ldmFsdWF0ZShmLCBzLCBsLCBwKTtcbiAgICAgICAgaWYgKHR5cGVvZiByaWdodCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubGVmdC5ldmFsdWF0ZShmLCBzLCBsLCBwKSBpbnN0YW5jZW9mIHJpZ2h0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgWydpbiddKGYsIHMsIGwsIHApIHtcbiAgICAgICAgY29uc3QgcmlnaHQgPSB0aGlzLnJpZ2h0LmV2YWx1YXRlKGYsIHMsIGwsIHApO1xuICAgICAgICBpZiAocmlnaHQgaW5zdGFuY2VvZiBPYmplY3QpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxlZnQuZXZhbHVhdGUoZiwgcywgbCwgcCkgaW4gcmlnaHQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvLyBub3RlOiBhdXRvQ29udmVydEFkZCAoYW5kIHRoZSBudWxsIGNoZWNrKSBpcyByZW1vdmVkIGJlY2F1c2UgdGhlIGRlZmF1bHQgc3BlYyBiZWhhdmlvciBpcyBhbHJlYWR5IGxhcmdlbHkgc2ltaWxhclxuICAgIC8vIGFuZCB3aGVyZSBpdCBpc24ndCwgeW91IGtpbmQgb2Ygd2FudCBpdCB0byBiZWhhdmUgbGlrZSB0aGUgc3BlYyBhbnl3YXkgKGUuZy4gcmV0dXJuIE5hTiB3aGVuIGFkZGluZyBhIG51bWJlciB0byB1bmRlZmluZWQpXG4gICAgLy8gdGhpcyBtYWtlcyBidWdzIGluIHVzZXIgY29kZSBlYXNpZXIgdG8gdHJhY2sgZG93biBmb3IgZW5kIHVzZXJzXG4gICAgLy8gYWxzbywgc2tpcHBpbmcgdGhlc2UgY2hlY2tzIGFuZCBsZWF2aW5nIGl0IHRvIHRoZSBydW50aW1lIGlzIGEgbmljZSBsaXR0bGUgcGVyZiBib29zdCBhbmQgc2ltcGxpZmllcyBvdXIgY29kZVxuICAgIFsnKyddKGYsIHMsIGwsIHApIHtcbiAgICAgICAgY29uc3QgbGVmdCA9IHRoaXMubGVmdC5ldmFsdWF0ZShmLCBzLCBsLCBwKTtcbiAgICAgICAgY29uc3QgcmlnaHQgPSB0aGlzLnJpZ2h0LmV2YWx1YXRlKGYsIHMsIGwsIHApO1xuICAgICAgICBpZiAoKGYgJiA0IC8qIGlzU3RyaWN0QmluZGluZ1N0cmF0ZWd5ICovKSA+IDApIHtcbiAgICAgICAgICAgIHJldHVybiBsZWZ0ICsgcmlnaHQ7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9zdHJpY3QtYm9vbGVhbi1leHByZXNzaW9uc1xuICAgICAgICBpZiAoIWxlZnQgfHwgIXJpZ2h0KSB7XG4gICAgICAgICAgICBpZiAoaXNOdW1iZXJPckJpZ0ludChsZWZ0KSB8fCBpc051bWJlck9yQmlnSW50KHJpZ2h0KSkge1xuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvc3RyaWN0LWJvb2xlYW4tZXhwcmVzc2lvbnMsIEB0eXBlc2NyaXB0LWVzbGludC9uby11bm5lY2Vzc2FyeS1jb25kaXRpb25cbiAgICAgICAgICAgICAgICByZXR1cm4gKGxlZnQgfHwgMCkgKyAocmlnaHQgfHwgMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNTdHJpbmdPckRhdGUobGVmdCkgfHwgaXNTdHJpbmdPckRhdGUocmlnaHQpKSB7XG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9zdHJpY3QtYm9vbGVhbi1leHByZXNzaW9ucywgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVubmVjZXNzYXJ5LWNvbmRpdGlvblxuICAgICAgICAgICAgICAgIHJldHVybiAobGVmdCB8fCAnJykgKyAocmlnaHQgfHwgJycpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBsZWZ0ICsgcmlnaHQ7XG4gICAgfVxuICAgIFsnLSddKGYsIHMsIGwsIHApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGVmdC5ldmFsdWF0ZShmLCBzLCBsLCBwKSAtIHRoaXMucmlnaHQuZXZhbHVhdGUoZiwgcywgbCwgcCk7XG4gICAgfVxuICAgIFsnKiddKGYsIHMsIGwsIHApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGVmdC5ldmFsdWF0ZShmLCBzLCBsLCBwKSAqIHRoaXMucmlnaHQuZXZhbHVhdGUoZiwgcywgbCwgcCk7XG4gICAgfVxuICAgIFsnLyddKGYsIHMsIGwsIHApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGVmdC5ldmFsdWF0ZShmLCBzLCBsLCBwKSAvIHRoaXMucmlnaHQuZXZhbHVhdGUoZiwgcywgbCwgcCk7XG4gICAgfVxuICAgIFsnJSddKGYsIHMsIGwsIHApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGVmdC5ldmFsdWF0ZShmLCBzLCBsLCBwKSAlIHRoaXMucmlnaHQuZXZhbHVhdGUoZiwgcywgbCwgcCk7XG4gICAgfVxuICAgIFsnPCddKGYsIHMsIGwsIHApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGVmdC5ldmFsdWF0ZShmLCBzLCBsLCBwKSA8IHRoaXMucmlnaHQuZXZhbHVhdGUoZiwgcywgbCwgcCk7XG4gICAgfVxuICAgIFsnPiddKGYsIHMsIGwsIHApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGVmdC5ldmFsdWF0ZShmLCBzLCBsLCBwKSA+IHRoaXMucmlnaHQuZXZhbHVhdGUoZiwgcywgbCwgcCk7XG4gICAgfVxuICAgIFsnPD0nXShmLCBzLCBsLCBwKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxlZnQuZXZhbHVhdGUoZiwgcywgbCwgcCkgPD0gdGhpcy5yaWdodC5ldmFsdWF0ZShmLCBzLCBsLCBwKTtcbiAgICB9XG4gICAgWyc+PSddKGYsIHMsIGwsIHApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGVmdC5ldmFsdWF0ZShmLCBzLCBsLCBwKSA+PSB0aGlzLnJpZ2h0LmV2YWx1YXRlKGYsIHMsIGwsIHApO1xuICAgIH1cbiAgICBhY2NlcHQodmlzaXRvcikge1xuICAgICAgICByZXR1cm4gdmlzaXRvci52aXNpdEJpbmFyeSh0aGlzKTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgVW5hcnlFeHByZXNzaW9uIHtcbiAgICBjb25zdHJ1Y3RvcihvcGVyYXRpb24sIGV4cHJlc3Npb24pIHtcbiAgICAgICAgdGhpcy5vcGVyYXRpb24gPSBvcGVyYXRpb247XG4gICAgICAgIHRoaXMuZXhwcmVzc2lvbiA9IGV4cHJlc3Npb247XG4gICAgICAgIHRoaXMuJGtpbmQgPSAzOSAvKiBVbmFyeSAqLztcbiAgICAgICAgLy8gc2VlIEJpbmFyeSAod2UncmUgZG9pbmcgdGhlIHNhbWUgdGhpbmcgaGVyZSlcbiAgICAgICAgdGhpcy5ldmFsdWF0ZSA9IHRoaXNbb3BlcmF0aW9uXTtcbiAgICB9XG4gICAgZXZhbHVhdGUoZmxhZ3MsIHNjb3BlLCBsb2NhdG9yLCBwYXJ0KSB7XG4gICAgICAgIHRocm93IFJlcG9ydGVyLmVycm9yKDIwOCAvKiBVbmtub3duT3BlcmF0b3IgKi8sIHRoaXMpO1xuICAgIH1cbiAgICBhc3NpZ24oZmxhZ3MsIHNjb3BlLCBsb2NhdG9yLCBvYmosIHBhcnQpIHtcbiAgICAgICAgcmV0dXJuIHZvaWQgMDtcbiAgICB9XG4gICAgY29ubmVjdChmbGFncywgc2NvcGUsIGJpbmRpbmcsIHBhcnQpIHtcbiAgICAgICAgdGhpcy5leHByZXNzaW9uLmNvbm5lY3QoZmxhZ3MsIHNjb3BlLCBiaW5kaW5nLCBwYXJ0KTtcbiAgICB9XG4gICAgWyd2b2lkJ10oZiwgcywgbCwgcCkge1xuICAgICAgICByZXR1cm4gdm9pZCB0aGlzLmV4cHJlc3Npb24uZXZhbHVhdGUoZiwgcywgbCwgcCk7XG4gICAgfVxuICAgIFsndHlwZW9mJ10oZiwgcywgbCwgcCkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHRoaXMuZXhwcmVzc2lvbi5ldmFsdWF0ZShmIHwgNCAvKiBpc1N0cmljdEJpbmRpbmdTdHJhdGVneSAqLywgcywgbCwgcCk7XG4gICAgfVxuICAgIFsnISddKGYsIHMsIGwsIHApIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLmV4cHJlc3Npb24uZXZhbHVhdGUoZiwgcywgbCwgcCk7XG4gICAgfVxuICAgIFsnLSddKGYsIHMsIGwsIHApIHtcbiAgICAgICAgcmV0dXJuIC10aGlzLmV4cHJlc3Npb24uZXZhbHVhdGUoZiwgcywgbCwgcCk7XG4gICAgfVxuICAgIFsnKyddKGYsIHMsIGwsIHApIHtcbiAgICAgICAgcmV0dXJuICt0aGlzLmV4cHJlc3Npb24uZXZhbHVhdGUoZiwgcywgbCwgcCk7XG4gICAgfVxuICAgIGFjY2VwdCh2aXNpdG9yKSB7XG4gICAgICAgIHJldHVybiB2aXNpdG9yLnZpc2l0VW5hcnkodGhpcyk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFByaW1pdGl2ZUxpdGVyYWxFeHByZXNzaW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih2YWx1ZSkge1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICAgIHRoaXMuJGtpbmQgPSAxNzkyNSAvKiBQcmltaXRpdmVMaXRlcmFsICovO1xuICAgIH1cbiAgICBldmFsdWF0ZShmbGFncywgc2NvcGUsIGxvY2F0b3IsIHBhcnQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWU7XG4gICAgfVxuICAgIGFzc2lnbihmbGFncywgc2NvcGUsIGxvY2F0b3IsIG9iaiwgcGFydCkge1xuICAgICAgICByZXR1cm4gdm9pZCAwO1xuICAgIH1cbiAgICBjb25uZWN0KGZsYWdzLCBzY29wZSwgYmluZGluZywgcGFydCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGFjY2VwdCh2aXNpdG9yKSB7XG4gICAgICAgIHJldHVybiB2aXNpdG9yLnZpc2l0UHJpbWl0aXZlTGl0ZXJhbCh0aGlzKTtcbiAgICB9XG59XG5QcmltaXRpdmVMaXRlcmFsRXhwcmVzc2lvbi4kdW5kZWZpbmVkID0gbmV3IFByaW1pdGl2ZUxpdGVyYWxFeHByZXNzaW9uKHZvaWQgMCk7XG5QcmltaXRpdmVMaXRlcmFsRXhwcmVzc2lvbi4kbnVsbCA9IG5ldyBQcmltaXRpdmVMaXRlcmFsRXhwcmVzc2lvbihudWxsKTtcblByaW1pdGl2ZUxpdGVyYWxFeHByZXNzaW9uLiR0cnVlID0gbmV3IFByaW1pdGl2ZUxpdGVyYWxFeHByZXNzaW9uKHRydWUpO1xuUHJpbWl0aXZlTGl0ZXJhbEV4cHJlc3Npb24uJGZhbHNlID0gbmV3IFByaW1pdGl2ZUxpdGVyYWxFeHByZXNzaW9uKGZhbHNlKTtcblByaW1pdGl2ZUxpdGVyYWxFeHByZXNzaW9uLiRlbXB0eSA9IG5ldyBQcmltaXRpdmVMaXRlcmFsRXhwcmVzc2lvbignJyk7XG5leHBvcnQgY2xhc3MgSHRtbExpdGVyYWxFeHByZXNzaW9uIHtcbiAgICBjb25zdHJ1Y3RvcihwYXJ0cykge1xuICAgICAgICB0aGlzLnBhcnRzID0gcGFydHM7XG4gICAgICAgIHRoaXMuJGtpbmQgPSA1MSAvKiBIdG1sTGl0ZXJhbCAqLztcbiAgICB9XG4gICAgZXZhbHVhdGUoZmxhZ3MsIHNjb3BlLCBsb2NhdG9yLCBwYXJ0KSB7XG4gICAgICAgIGNvbnN0IGVsZW1lbnRzID0gdGhpcy5wYXJ0cztcbiAgICAgICAgbGV0IHJlc3VsdCA9ICcnO1xuICAgICAgICBsZXQgdmFsdWU7XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IGVsZW1lbnRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIHZhbHVlID0gZWxlbWVudHNbaV0uZXZhbHVhdGUoZmxhZ3MsIHNjb3BlLCBsb2NhdG9yLCBwYXJ0KTtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXN1bHQgKz0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgYXNzaWduKGZsYWdzLCBzY29wZSwgbG9jYXRvciwgb2JqLCBwYXJ0KSB7XG4gICAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgfVxuICAgIGNvbm5lY3QoZmxhZ3MsIHNjb3BlLCBiaW5kaW5nLCBwYXJ0KSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IHRoaXMucGFydHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgdGhpcy5wYXJ0c1tpXS5jb25uZWN0KGZsYWdzLCBzY29wZSwgYmluZGluZywgcGFydCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYWNjZXB0KHZpc2l0b3IpIHtcbiAgICAgICAgcmV0dXJuIHZpc2l0b3IudmlzaXRIdG1sTGl0ZXJhbCh0aGlzKTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQXJyYXlMaXRlcmFsRXhwcmVzc2lvbiB7XG4gICAgY29uc3RydWN0b3IoZWxlbWVudHMpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50cyA9IGVsZW1lbnRzO1xuICAgICAgICB0aGlzLiRraW5kID0gMTc5NTUgLyogQXJyYXlMaXRlcmFsICovO1xuICAgIH1cbiAgICBldmFsdWF0ZShmbGFncywgc2NvcGUsIGxvY2F0b3IsIHBhcnQpIHtcbiAgICAgICAgY29uc3QgZWxlbWVudHMgPSB0aGlzLmVsZW1lbnRzO1xuICAgICAgICBjb25zdCBsZW5ndGggPSBlbGVtZW50cy5sZW5ndGg7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IEFycmF5KGxlbmd0aCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHJlc3VsdFtpXSA9IGVsZW1lbnRzW2ldLmV2YWx1YXRlKGZsYWdzLCBzY29wZSwgbG9jYXRvciwgcGFydCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgYXNzaWduKGZsYWdzLCBzY29wZSwgbG9jYXRvciwgb2JqLCBwYXJ0KSB7XG4gICAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgfVxuICAgIGNvbm5lY3QoZmxhZ3MsIHNjb3BlLCBiaW5kaW5nLCBwYXJ0KSB7XG4gICAgICAgIGNvbnN0IGVsZW1lbnRzID0gdGhpcy5lbGVtZW50cztcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGlpID0gZWxlbWVudHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgZWxlbWVudHNbaV0uY29ubmVjdChmbGFncywgc2NvcGUsIGJpbmRpbmcsIHBhcnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFjY2VwdCh2aXNpdG9yKSB7XG4gICAgICAgIHJldHVybiB2aXNpdG9yLnZpc2l0QXJyYXlMaXRlcmFsKHRoaXMpO1xuICAgIH1cbn1cbkFycmF5TGl0ZXJhbEV4cHJlc3Npb24uJGVtcHR5ID0gbmV3IEFycmF5TGl0ZXJhbEV4cHJlc3Npb24oUExBVEZPUk0uZW1wdHlBcnJheSk7XG5leHBvcnQgY2xhc3MgT2JqZWN0TGl0ZXJhbEV4cHJlc3Npb24ge1xuICAgIGNvbnN0cnVjdG9yKGtleXMsIHZhbHVlcykge1xuICAgICAgICB0aGlzLmtleXMgPSBrZXlzO1xuICAgICAgICB0aGlzLnZhbHVlcyA9IHZhbHVlcztcbiAgICAgICAgdGhpcy4ka2luZCA9IDE3OTU2IC8qIE9iamVjdExpdGVyYWwgKi87XG4gICAgfVxuICAgIGV2YWx1YXRlKGZsYWdzLCBzY29wZSwgbG9jYXRvciwgcGFydCkge1xuICAgICAgICBjb25zdCBpbnN0YW5jZSA9IHt9O1xuICAgICAgICBjb25zdCBrZXlzID0gdGhpcy5rZXlzO1xuICAgICAgICBjb25zdCB2YWx1ZXMgPSB0aGlzLnZhbHVlcztcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGlpID0ga2V5cy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICBpbnN0YW5jZVtrZXlzW2ldXSA9IHZhbHVlc1tpXS5ldmFsdWF0ZShmbGFncywgc2NvcGUsIGxvY2F0b3IsIHBhcnQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbnN0YW5jZTtcbiAgICB9XG4gICAgYXNzaWduKGZsYWdzLCBzY29wZSwgbG9jYXRvciwgb2JqLCBwYXJ0KSB7XG4gICAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgfVxuICAgIGNvbm5lY3QoZmxhZ3MsIHNjb3BlLCBiaW5kaW5nLCBwYXJ0KSB7XG4gICAgICAgIGNvbnN0IGtleXMgPSB0aGlzLmtleXM7XG4gICAgICAgIGNvbnN0IHZhbHVlcyA9IHRoaXMudmFsdWVzO1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBrZXlzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIHZhbHVlc1tpXS5jb25uZWN0KGZsYWdzLCBzY29wZSwgYmluZGluZywgcGFydCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYWNjZXB0KHZpc2l0b3IpIHtcbiAgICAgICAgcmV0dXJuIHZpc2l0b3IudmlzaXRPYmplY3RMaXRlcmFsKHRoaXMpO1xuICAgIH1cbn1cbk9iamVjdExpdGVyYWxFeHByZXNzaW9uLiRlbXB0eSA9IG5ldyBPYmplY3RMaXRlcmFsRXhwcmVzc2lvbihQTEFURk9STS5lbXB0eUFycmF5LCBQTEFURk9STS5lbXB0eUFycmF5KTtcbmV4cG9ydCBjbGFzcyBUZW1wbGF0ZUV4cHJlc3Npb24ge1xuICAgIGNvbnN0cnVjdG9yKGNvb2tlZCwgZXhwcmVzc2lvbnMgPSBQTEFURk9STS5lbXB0eUFycmF5KSB7XG4gICAgICAgIHRoaXMuY29va2VkID0gY29va2VkO1xuICAgICAgICB0aGlzLmV4cHJlc3Npb25zID0gZXhwcmVzc2lvbnM7XG4gICAgICAgIHRoaXMuJGtpbmQgPSAxNzk1OCAvKiBUZW1wbGF0ZSAqLztcbiAgICB9XG4gICAgZXZhbHVhdGUoZmxhZ3MsIHNjb3BlLCBsb2NhdG9yLCBwYXJ0KSB7XG4gICAgICAgIGNvbnN0IGV4cHJlc3Npb25zID0gdGhpcy5leHByZXNzaW9ucztcbiAgICAgICAgY29uc3QgY29va2VkID0gdGhpcy5jb29rZWQ7XG4gICAgICAgIGxldCByZXN1bHQgPSBjb29rZWRbMF07XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IGV4cHJlc3Npb25zLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIHJlc3VsdCArPSBleHByZXNzaW9uc1tpXS5ldmFsdWF0ZShmbGFncywgc2NvcGUsIGxvY2F0b3IsIHBhcnQpO1xuICAgICAgICAgICAgcmVzdWx0ICs9IGNvb2tlZFtpICsgMV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgYXNzaWduKGZsYWdzLCBzY29wZSwgbG9jYXRvciwgb2JqLCBwYXJ0KSB7XG4gICAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgfVxuICAgIGNvbm5lY3QoZmxhZ3MsIHNjb3BlLCBiaW5kaW5nLCBwYXJ0KSB7XG4gICAgICAgIGNvbnN0IGV4cHJlc3Npb25zID0gdGhpcy5leHByZXNzaW9ucztcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGlpID0gZXhwcmVzc2lvbnMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgZXhwcmVzc2lvbnNbaV0uY29ubmVjdChmbGFncywgc2NvcGUsIGJpbmRpbmcsIHBhcnQpO1xuICAgICAgICAgICAgaSsrO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFjY2VwdCh2aXNpdG9yKSB7XG4gICAgICAgIHJldHVybiB2aXNpdG9yLnZpc2l0VGVtcGxhdGUodGhpcyk7XG4gICAgfVxufVxuVGVtcGxhdGVFeHByZXNzaW9uLiRlbXB0eSA9IG5ldyBUZW1wbGF0ZUV4cHJlc3Npb24oWycnXSk7XG5leHBvcnQgY2xhc3MgVGFnZ2VkVGVtcGxhdGVFeHByZXNzaW9uIHtcbiAgICBjb25zdHJ1Y3Rvcihjb29rZWQsIHJhdywgZnVuYywgZXhwcmVzc2lvbnMgPSBQTEFURk9STS5lbXB0eUFycmF5KSB7XG4gICAgICAgIHRoaXMuY29va2VkID0gY29va2VkO1xuICAgICAgICB0aGlzLmZ1bmMgPSBmdW5jO1xuICAgICAgICB0aGlzLmV4cHJlc3Npb25zID0gZXhwcmVzc2lvbnM7XG4gICAgICAgIHRoaXMuJGtpbmQgPSAxMTk3IC8qIFRhZ2dlZFRlbXBsYXRlICovO1xuICAgICAgICBjb29rZWQucmF3ID0gcmF3O1xuICAgIH1cbiAgICBldmFsdWF0ZShmbGFncywgc2NvcGUsIGxvY2F0b3IsIHBhcnQpIHtcbiAgICAgICAgY29uc3QgZXhwcmVzc2lvbnMgPSB0aGlzLmV4cHJlc3Npb25zO1xuICAgICAgICBjb25zdCBsZW4gPSBleHByZXNzaW9ucy5sZW5ndGg7XG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSBBcnJheShsZW4pO1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBsZW47IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICByZXN1bHRzW2ldID0gZXhwcmVzc2lvbnNbaV0uZXZhbHVhdGUoZmxhZ3MsIHNjb3BlLCBsb2NhdG9yLCBwYXJ0KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBmdW5jID0gdGhpcy5mdW5jLmV2YWx1YXRlKGZsYWdzLCBzY29wZSwgbG9jYXRvciwgcGFydCk7XG4gICAgICAgIGlmICh0eXBlb2YgZnVuYyAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhyb3cgUmVwb3J0ZXIuZXJyb3IoMjA3IC8qIE5vdEFGdW5jdGlvbiAqLywgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZ1bmModGhpcy5jb29rZWQsIC4uLnJlc3VsdHMpO1xuICAgIH1cbiAgICBhc3NpZ24oZmxhZ3MsIHNjb3BlLCBsb2NhdG9yLCBvYmosIHBhcnQpIHtcbiAgICAgICAgcmV0dXJuIHZvaWQgMDtcbiAgICB9XG4gICAgY29ubmVjdChmbGFncywgc2NvcGUsIGJpbmRpbmcsIHBhcnQpIHtcbiAgICAgICAgY29uc3QgZXhwcmVzc2lvbnMgPSB0aGlzLmV4cHJlc3Npb25zO1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBleHByZXNzaW9ucy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICBleHByZXNzaW9uc1tpXS5jb25uZWN0KGZsYWdzLCBzY29wZSwgYmluZGluZyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mdW5jLmNvbm5lY3QoZmxhZ3MsIHNjb3BlLCBiaW5kaW5nKTtcbiAgICB9XG4gICAgYWNjZXB0KHZpc2l0b3IpIHtcbiAgICAgICAgcmV0dXJuIHZpc2l0b3IudmlzaXRUYWdnZWRUZW1wbGF0ZSh0aGlzKTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQXJyYXlCaW5kaW5nUGF0dGVybiB7XG4gICAgLy8gV2UnbGwgZWl0aGVyIGhhdmUgZWxlbWVudHMsIG9yIGtleXMrdmFsdWVzLCBidXQgbmV2ZXIgYWxsIDNcbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50cykge1xuICAgICAgICB0aGlzLmVsZW1lbnRzID0gZWxlbWVudHM7XG4gICAgICAgIHRoaXMuJGtpbmQgPSA2NTU1NiAvKiBBcnJheUJpbmRpbmdQYXR0ZXJuICovO1xuICAgIH1cbiAgICBldmFsdWF0ZShmbGFncywgc2NvcGUsIGxvY2F0b3IsIHBhcnQpIHtcbiAgICAgICAgLy8gVE9ET1xuICAgICAgICByZXR1cm4gdm9pZCAwO1xuICAgIH1cbiAgICBhc3NpZ24oZmxhZ3MsIHNjb3BlLCBsb2NhdG9yLCBvYmosIHBhcnQpIHtcbiAgICAgICAgLy8gVE9ET1xuICAgICAgICByZXR1cm4gdm9pZCAwO1xuICAgIH1cbiAgICBjb25uZWN0KGZsYWdzLCBzY29wZSwgYmluZGluZywgcGFydCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGFjY2VwdCh2aXNpdG9yKSB7XG4gICAgICAgIHJldHVybiB2aXNpdG9yLnZpc2l0QXJyYXlCaW5kaW5nUGF0dGVybih0aGlzKTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgT2JqZWN0QmluZGluZ1BhdHRlcm4ge1xuICAgIC8vIFdlJ2xsIGVpdGhlciBoYXZlIGVsZW1lbnRzLCBvciBrZXlzK3ZhbHVlcywgYnV0IG5ldmVyIGFsbCAzXG4gICAgY29uc3RydWN0b3Ioa2V5cywgdmFsdWVzKSB7XG4gICAgICAgIHRoaXMua2V5cyA9IGtleXM7XG4gICAgICAgIHRoaXMudmFsdWVzID0gdmFsdWVzO1xuICAgICAgICB0aGlzLiRraW5kID0gNjU1NTcgLyogT2JqZWN0QmluZGluZ1BhdHRlcm4gKi87XG4gICAgfVxuICAgIGV2YWx1YXRlKGZsYWdzLCBzY29wZSwgbG9jYXRvciwgcGFydCkge1xuICAgICAgICAvLyBUT0RPXG4gICAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgfVxuICAgIGFzc2lnbihmbGFncywgc2NvcGUsIGxvY2F0b3IsIG9iaiwgcGFydCkge1xuICAgICAgICAvLyBUT0RPXG4gICAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgfVxuICAgIGNvbm5lY3QoZmxhZ3MsIHNjb3BlLCBiaW5kaW5nLCBwYXJ0KSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYWNjZXB0KHZpc2l0b3IpIHtcbiAgICAgICAgcmV0dXJuIHZpc2l0b3IudmlzaXRPYmplY3RCaW5kaW5nUGF0dGVybih0aGlzKTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQmluZGluZ0lkZW50aWZpZXIge1xuICAgIGNvbnN0cnVjdG9yKG5hbWUpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy4ka2luZCA9IDY1NTU4IC8qIEJpbmRpbmdJZGVudGlmaWVyICovO1xuICAgIH1cbiAgICBldmFsdWF0ZShmbGFncywgc2NvcGUsIGxvY2F0b3IsIHBhcnQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubmFtZTtcbiAgICB9XG4gICAgY29ubmVjdChmbGFncywgc2NvcGUsIGJpbmRpbmcsIHBhcnQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhY2NlcHQodmlzaXRvcikge1xuICAgICAgICByZXR1cm4gdmlzaXRvci52aXNpdEJpbmRpbmdJZGVudGlmaWVyKHRoaXMpO1xuICAgIH1cbn1cbmNvbnN0IHRvU3RyaW5nVGFnID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcbi8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLWl0ZXJhdGlvbi1zdGF0ZW1lbnRzXG4vLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy1mb3ItaW4tYW5kLWZvci1vZi1zdGF0ZW1lbnRzXG5leHBvcnQgY2xhc3MgRm9yT2ZTdGF0ZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKGRlY2xhcmF0aW9uLCBpdGVyYWJsZSkge1xuICAgICAgICB0aGlzLmRlY2xhcmF0aW9uID0gZGVjbGFyYXRpb247XG4gICAgICAgIHRoaXMuaXRlcmFibGUgPSBpdGVyYWJsZTtcbiAgICAgICAgdGhpcy4ka2luZCA9IDYxOTkgLyogRm9yT2ZTdGF0ZW1lbnQgKi87XG4gICAgfVxuICAgIGV2YWx1YXRlKGZsYWdzLCBzY29wZSwgbG9jYXRvciwgcGFydCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pdGVyYWJsZS5ldmFsdWF0ZShmbGFncywgc2NvcGUsIGxvY2F0b3IsIHBhcnQpO1xuICAgIH1cbiAgICBhc3NpZ24oZmxhZ3MsIHNjb3BlLCBsb2NhdG9yLCBvYmosIHBhcnQpIHtcbiAgICAgICAgcmV0dXJuIHZvaWQgMDtcbiAgICB9XG4gICAgY291bnQoZmxhZ3MsIHJlc3VsdCkge1xuICAgICAgICBzd2l0Y2ggKHRvU3RyaW5nVGFnLmNhbGwocmVzdWx0KSkge1xuICAgICAgICAgICAgY2FzZSAnW29iamVjdCBBcnJheV0nOiByZXR1cm4gcmVzdWx0Lmxlbmd0aDtcbiAgICAgICAgICAgIGNhc2UgJ1tvYmplY3QgTWFwXSc6IHJldHVybiByZXN1bHQuc2l6ZTtcbiAgICAgICAgICAgIGNhc2UgJ1tvYmplY3QgU2V0XSc6IHJldHVybiByZXN1bHQuc2l6ZTtcbiAgICAgICAgICAgIGNhc2UgJ1tvYmplY3QgTnVtYmVyXSc6IHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICBjYXNlICdbb2JqZWN0IE51bGxdJzogcmV0dXJuIDA7XG4gICAgICAgICAgICBjYXNlICdbb2JqZWN0IFVuZGVmaW5lZF0nOiByZXR1cm4gMDtcbiAgICAgICAgICAgIGRlZmF1bHQ6IHRocm93IFJlcG9ydGVyLmVycm9yKDApOyAvLyBUT0RPOiBTZXQgZXJyb3IgY29kZVxuICAgICAgICB9XG4gICAgfVxuICAgIGl0ZXJhdGUoZmxhZ3MsIHJlc3VsdCwgZnVuYykge1xuICAgICAgICBzd2l0Y2ggKHRvU3RyaW5nVGFnLmNhbGwocmVzdWx0KSkge1xuICAgICAgICAgICAgY2FzZSAnW29iamVjdCBBcnJheV0nOiByZXR1cm4gJGFycmF5KGZsYWdzIHwgODM4ODYwOCAvKiBpc09yaWdpbmFsQXJyYXkgKi8sIHJlc3VsdCwgZnVuYyk7XG4gICAgICAgICAgICBjYXNlICdbb2JqZWN0IE1hcF0nOiByZXR1cm4gJG1hcChmbGFncyB8IDgzODg2MDggLyogaXNPcmlnaW5hbEFycmF5ICovLCByZXN1bHQsIGZ1bmMpO1xuICAgICAgICAgICAgY2FzZSAnW29iamVjdCBTZXRdJzogcmV0dXJuICRzZXQoZmxhZ3MgfCA4Mzg4NjA4IC8qIGlzT3JpZ2luYWxBcnJheSAqLywgcmVzdWx0LCBmdW5jKTtcbiAgICAgICAgICAgIGNhc2UgJ1tvYmplY3QgTnVtYmVyXSc6IHJldHVybiAkbnVtYmVyKGZsYWdzIHwgODM4ODYwOCAvKiBpc09yaWdpbmFsQXJyYXkgKi8sIHJlc3VsdCwgZnVuYyk7XG4gICAgICAgICAgICBjYXNlICdbb2JqZWN0IE51bGxdJzogcmV0dXJuO1xuICAgICAgICAgICAgY2FzZSAnW29iamVjdCBVbmRlZmluZWRdJzogcmV0dXJuO1xuICAgICAgICAgICAgZGVmYXVsdDogdGhyb3cgUmVwb3J0ZXIuZXJyb3IoMCk7IC8vIFRPRE86IFNldCBlcnJvciBjb2RlXG4gICAgICAgIH1cbiAgICB9XG4gICAgY29ubmVjdChmbGFncywgc2NvcGUsIGJpbmRpbmcsIHBhcnQpIHtcbiAgICAgICAgdGhpcy5kZWNsYXJhdGlvbi5jb25uZWN0KGZsYWdzLCBzY29wZSwgYmluZGluZywgcGFydCk7XG4gICAgICAgIHRoaXMuaXRlcmFibGUuY29ubmVjdChmbGFncywgc2NvcGUsIGJpbmRpbmcsIHBhcnQpO1xuICAgIH1cbiAgICBiaW5kKGZsYWdzLCBzY29wZSwgYmluZGluZykge1xuICAgICAgICBpZiAoaGFzQmluZCh0aGlzLml0ZXJhYmxlKSkge1xuICAgICAgICAgICAgdGhpcy5pdGVyYWJsZS5iaW5kKGZsYWdzLCBzY29wZSwgYmluZGluZyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdW5iaW5kKGZsYWdzLCBzY29wZSwgYmluZGluZykge1xuICAgICAgICBpZiAoaGFzVW5iaW5kKHRoaXMuaXRlcmFibGUpKSB7XG4gICAgICAgICAgICB0aGlzLml0ZXJhYmxlLnVuYmluZChmbGFncywgc2NvcGUsIGJpbmRpbmcpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFjY2VwdCh2aXNpdG9yKSB7XG4gICAgICAgIHJldHVybiB2aXNpdG9yLnZpc2l0Rm9yT2ZTdGF0ZW1lbnQodGhpcyk7XG4gICAgfVxufVxuLypcbiogTm90ZTogdGhpcyBpbXBsZW1lbnRhdGlvbiBpcyBmYXIgc2ltcGxlciB0aGFuIHRoZSBvbmUgaW4gdkN1cnJlbnQgYW5kIG1pZ2h0IGJlIG1pc3NpbmcgaW1wb3J0YW50IHN0dWZmIChub3Qgc3VyZSB5ZXQpXG4qIHNvIHdoaWxlIHRoaXMgaW1wbGVtZW50YXRpb24gaXMgaWRlbnRpY2FsIHRvIFRlbXBsYXRlIGFuZCB3ZSBjb3VsZCByZXVzZSB0aGF0IG9uZSwgd2UgZG9uJ3Qgd2FudCB0byBsb2NrIG91dHNlbHZlcyBpbiB0byBwb3RlbnRpYWxseSB0aGUgd3JvbmcgYWJzdHJhY3Rpb25cbiogYnV0IHRoaXMgY2xhc3MgbWlnaHQgYmUgYSBjYW5kaWRhdGUgZm9yIHJlbW92YWwgaWYgaXQgdHVybnMgb3V0IGl0IGRvZXMgcHJvdmlkZSBhbGwgd2UgbmVlZFxuKi9cbmV4cG9ydCBjbGFzcyBJbnRlcnBvbGF0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihwYXJ0cywgZXhwcmVzc2lvbnMgPSBQTEFURk9STS5lbXB0eUFycmF5KSB7XG4gICAgICAgIHRoaXMucGFydHMgPSBwYXJ0cztcbiAgICAgICAgdGhpcy5leHByZXNzaW9ucyA9IGV4cHJlc3Npb25zO1xuICAgICAgICB0aGlzLiRraW5kID0gMjQgLyogSW50ZXJwb2xhdGlvbiAqLztcbiAgICAgICAgdGhpcy5pc011bHRpID0gZXhwcmVzc2lvbnMubGVuZ3RoID4gMTtcbiAgICAgICAgdGhpcy5maXJzdEV4cHJlc3Npb24gPSBleHByZXNzaW9uc1swXTtcbiAgICB9XG4gICAgZXZhbHVhdGUoZmxhZ3MsIHNjb3BlLCBsb2NhdG9yLCBwYXJ0KSB7XG4gICAgICAgIGlmICh0aGlzLmlzTXVsdGkpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4cHJlc3Npb25zID0gdGhpcy5leHByZXNzaW9ucztcbiAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gdGhpcy5wYXJ0cztcbiAgICAgICAgICAgIGxldCByZXN1bHQgPSBwYXJ0c1swXTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IGV4cHJlc3Npb25zLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgKz0gZXhwcmVzc2lvbnNbaV0uZXZhbHVhdGUoZmxhZ3MsIHNjb3BlLCBsb2NhdG9yLCBwYXJ0KTtcbiAgICAgICAgICAgICAgICByZXN1bHQgKz0gcGFydHNbaSArIDFdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gdGhpcy5wYXJ0cztcbiAgICAgICAgICAgIHJldHVybiBgJHtwYXJ0c1swXX0ke3RoaXMuZmlyc3RFeHByZXNzaW9uLmV2YWx1YXRlKGZsYWdzLCBzY29wZSwgbG9jYXRvciwgcGFydCl9JHtwYXJ0c1sxXX1gO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzc2lnbihmbGFncywgc2NvcGUsIGxvY2F0b3IsIG9iaiwgcGFydCkge1xuICAgICAgICByZXR1cm4gdm9pZCAwO1xuICAgIH1cbiAgICBjb25uZWN0KGZsYWdzLCBzY29wZSwgYmluZGluZywgcGFydCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGFjY2VwdCh2aXNpdG9yKSB7XG4gICAgICAgIHJldHVybiB2aXNpdG9yLnZpc2l0SW50ZXJwb2xhdGlvbih0aGlzKTtcbiAgICB9XG59XG4vLy8gRXZhbHVhdGUgdGhlIFtsaXN0XSBpbiBjb250ZXh0IG9mIHRoZSBbc2NvcGVdLlxuZnVuY3Rpb24gZXZhbExpc3QoZmxhZ3MsIHNjb3BlLCBsb2NhdG9yLCBsaXN0LCBwYXJ0KSB7XG4gICAgY29uc3QgbGVuID0gbGlzdC5sZW5ndGg7XG4gICAgY29uc3QgcmVzdWx0ID0gQXJyYXkobGVuKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgIHJlc3VsdFtpXSA9IGxpc3RbaV0uZXZhbHVhdGUoZmxhZ3MsIHNjb3BlLCBsb2NhdG9yLCBwYXJ0KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIGdldEZ1bmN0aW9uKGZsYWdzLCBvYmosIG5hbWUpIHtcbiAgICBjb25zdCBmdW5jID0gb2JqID09IG51bGwgPyBudWxsIDogb2JqW25hbWVdO1xuICAgIGlmICh0eXBlb2YgZnVuYyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gZnVuYztcbiAgICB9XG4gICAgaWYgKCEoZmxhZ3MgJiAyMDk3MTUyIC8qIG11c3RFdmFsdWF0ZSAqLykgJiYgZnVuYyA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICB0aHJvdyBSZXBvcnRlci5lcnJvcigyMDcgLyogTm90QUZ1bmN0aW9uICovLCBvYmosIG5hbWUsIGZ1bmMpO1xufVxuY29uc3QgcHJveHlBbmRPcmlnaW5hbEFycmF5ID0gMiAvKiBwcm94eVN0cmF0ZWd5ICovIHwgODM4ODYwOCAvKiBpc09yaWdpbmFsQXJyYXkgKi87XG5mdW5jdGlvbiAkYXJyYXkoZmxhZ3MsIHJlc3VsdCwgZnVuYykge1xuICAgIGlmICgoZmxhZ3MgJiBwcm94eUFuZE9yaWdpbmFsQXJyYXkpID09PSBwcm94eUFuZE9yaWdpbmFsQXJyYXkpIHtcbiAgICAgICAgLy8gSWYgd2UncmUgaW4gcHJveHkgbW9kZSwgYW5kIHRoZSBhcnJheSBpcyB0aGUgb3JpZ2luYWwgXCJpdGVtc1wiIChhbmQgbm90IGFuIGFycmF5IHdlIGNyZWF0ZWQgaGVyZSB0byBpdGVyYXRlIG92ZXIgZS5nLiBhIHNldClcbiAgICAgICAgLy8gdGhlbiByZXBsYWNlIGFsbCBpdGVtcyAod2hpY2ggYXJlIE9iamVjdHMpIHdpdGggcHJveGllcyBzbyB0aGVpciBwcm9wZXJ0aWVzIGFyZSBvYnNlcnZlZCBpbiB0aGUgc291cmNlIHZpZXcgbW9kZWwgZXZlbiBpZiBub1xuICAgICAgICAvLyBvYnNlcnZlcnMgYXJlIGV4cGxpY2l0bHkgY3JlYXRlZFxuICAgICAgICBjb25zdCByYXdBcnJheSA9IFByb3h5T2JzZXJ2ZXIuZ2V0UmF3SWZQcm94eShyZXN1bHQpO1xuICAgICAgICBjb25zdCBsZW4gPSByYXdBcnJheS5sZW5ndGg7XG4gICAgICAgIGxldCBpdGVtO1xuICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgIGZvciAoOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAgICAgIGl0ZW0gPSByYXdBcnJheVtpXTtcbiAgICAgICAgICAgIGlmIChpdGVtIGluc3RhbmNlb2YgT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgaXRlbSA9IHJhd0FycmF5W2ldID0gUHJveHlPYnNlcnZlci5nZXRPckNyZWF0ZShpdGVtKS5wcm94eTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZ1bmMocmF3QXJyYXksIGksIGl0ZW0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgaWkgPSByZXN1bHQubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgZnVuYyhyZXN1bHQsIGksIHJlc3VsdFtpXSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiAkbWFwKGZsYWdzLCByZXN1bHQsIGZ1bmMpIHtcbiAgICBjb25zdCBhcnIgPSBBcnJheShyZXN1bHQuc2l6ZSk7XG4gICAgbGV0IGkgPSAtMTtcbiAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIHJlc3VsdC5lbnRyaWVzKCkpIHtcbiAgICAgICAgYXJyWysraV0gPSBlbnRyeTtcbiAgICB9XG4gICAgJGFycmF5KGZsYWdzICYgfjgzODg2MDggLyogaXNPcmlnaW5hbEFycmF5ICovLCBhcnIsIGZ1bmMpO1xufVxuZnVuY3Rpb24gJHNldChmbGFncywgcmVzdWx0LCBmdW5jKSB7XG4gICAgY29uc3QgYXJyID0gQXJyYXkocmVzdWx0LnNpemUpO1xuICAgIGxldCBpID0gLTE7XG4gICAgZm9yIChjb25zdCBrZXkgb2YgcmVzdWx0LmtleXMoKSkge1xuICAgICAgICBhcnJbKytpXSA9IGtleTtcbiAgICB9XG4gICAgJGFycmF5KGZsYWdzICYgfjgzODg2MDggLyogaXNPcmlnaW5hbEFycmF5ICovLCBhcnIsIGZ1bmMpO1xufVxuZnVuY3Rpb24gJG51bWJlcihmbGFncywgcmVzdWx0LCBmdW5jKSB7XG4gICAgY29uc3QgYXJyID0gQXJyYXkocmVzdWx0KTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlc3VsdDsgKytpKSB7XG4gICAgICAgIGFycltpXSA9IGk7XG4gICAgfVxuICAgICRhcnJheShmbGFncyAmIH44Mzg4NjA4IC8qIGlzT3JpZ2luYWxBcnJheSAqLywgYXJyLCBmdW5jKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFzdC5qcy5tYXAiLCJpbXBvcnQgeyBoYXNCaW5kLCBoYXNVbmJpbmQsIH0gZnJvbSAnLi9hc3QnO1xuZXhwb3J0IGNsYXNzIENhbGxCaW5kaW5nIHtcbiAgICBjb25zdHJ1Y3Rvcihzb3VyY2VFeHByZXNzaW9uLCB0YXJnZXQsIHRhcmdldFByb3BlcnR5LCBvYnNlcnZlckxvY2F0b3IsIGxvY2F0b3IpIHtcbiAgICAgICAgdGhpcy5zb3VyY2VFeHByZXNzaW9uID0gc291cmNlRXhwcmVzc2lvbjtcbiAgICAgICAgdGhpcy5sb2NhdG9yID0gbG9jYXRvcjtcbiAgICAgICAgdGhpcy5pbnRlcmNlcHRvciA9IHRoaXM7XG4gICAgICAgIHRoaXMuJHN0YXRlID0gMCAvKiBub25lICovO1xuICAgICAgICB0aGlzLnRhcmdldE9ic2VydmVyID0gb2JzZXJ2ZXJMb2NhdG9yLmdldE9ic2VydmVyKDAgLyogbm9uZSAqLywgdGFyZ2V0LCB0YXJnZXRQcm9wZXJ0eSk7XG4gICAgfVxuICAgIGNhbGxTb3VyY2UoYXJncykge1xuICAgICAgICBjb25zdCBvdmVycmlkZUNvbnRleHQgPSB0aGlzLiRzY29wZS5vdmVycmlkZUNvbnRleHQ7XG4gICAgICAgIE9iamVjdC5hc3NpZ24ob3ZlcnJpZGVDb250ZXh0LCBhcmdzKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5zb3VyY2VFeHByZXNzaW9uLmV2YWx1YXRlKDIwOTcxNTIgLyogbXVzdEV2YWx1YXRlICovLCB0aGlzLiRzY29wZSwgdGhpcy5sb2NhdG9yLCB0aGlzLnBhcnQpO1xuICAgICAgICBmb3IgKGNvbnN0IHByb3AgaW4gYXJncykge1xuICAgICAgICAgICAgUmVmbGVjdC5kZWxldGVQcm9wZXJ0eShvdmVycmlkZUNvbnRleHQsIHByb3ApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgICRiaW5kKGZsYWdzLCBzY29wZSwgcGFydCkge1xuICAgICAgICBpZiAodGhpcy4kc3RhdGUgJiA0IC8qIGlzQm91bmQgKi8pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLiRzY29wZSA9PT0gc2NvcGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmludGVyY2VwdG9yLiR1bmJpbmQoZmxhZ3MgfCA0MDk2IC8qIGZyb21CaW5kICovKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBhZGQgaXNCaW5kaW5nIGZsYWdcbiAgICAgICAgdGhpcy4kc3RhdGUgfD0gMSAvKiBpc0JpbmRpbmcgKi87XG4gICAgICAgIHRoaXMuJHNjb3BlID0gc2NvcGU7XG4gICAgICAgIHRoaXMucGFydCA9IHBhcnQ7XG4gICAgICAgIGlmIChoYXNCaW5kKHRoaXMuc291cmNlRXhwcmVzc2lvbikpIHtcbiAgICAgICAgICAgIHRoaXMuc291cmNlRXhwcmVzc2lvbi5iaW5kKGZsYWdzLCBzY29wZSwgdGhpcy5pbnRlcmNlcHRvcik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50YXJnZXRPYnNlcnZlci5zZXRWYWx1ZSgoJGFyZ3MpID0+IHRoaXMuaW50ZXJjZXB0b3IuY2FsbFNvdXJjZSgkYXJncyksIGZsYWdzKTtcbiAgICAgICAgLy8gYWRkIGlzQm91bmQgZmxhZyBhbmQgcmVtb3ZlIGlzQmluZGluZyBmbGFnXG4gICAgICAgIHRoaXMuJHN0YXRlIHw9IDQgLyogaXNCb3VuZCAqLztcbiAgICAgICAgdGhpcy4kc3RhdGUgJj0gfjEgLyogaXNCaW5kaW5nICovO1xuICAgIH1cbiAgICAkdW5iaW5kKGZsYWdzKSB7XG4gICAgICAgIGlmICghKHRoaXMuJHN0YXRlICYgNCAvKiBpc0JvdW5kICovKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIGFkZCBpc1VuYmluZGluZyBmbGFnXG4gICAgICAgIHRoaXMuJHN0YXRlIHw9IDIgLyogaXNVbmJpbmRpbmcgKi87XG4gICAgICAgIGlmIChoYXNVbmJpbmQodGhpcy5zb3VyY2VFeHByZXNzaW9uKSkge1xuICAgICAgICAgICAgdGhpcy5zb3VyY2VFeHByZXNzaW9uLnVuYmluZChmbGFncywgdGhpcy4kc2NvcGUsIHRoaXMuaW50ZXJjZXB0b3IpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuJHNjb3BlID0gdm9pZCAwO1xuICAgICAgICB0aGlzLnRhcmdldE9ic2VydmVyLnNldFZhbHVlKG51bGwsIGZsYWdzKTtcbiAgICAgICAgLy8gcmVtb3ZlIGlzQm91bmQgYW5kIGlzVW5iaW5kaW5nIGZsYWdzXG4gICAgICAgIHRoaXMuJHN0YXRlICY9IH4oNCAvKiBpc0JvdW5kICovIHwgMiAvKiBpc1VuYmluZGluZyAqLyk7XG4gICAgfVxuICAgIG9ic2VydmVQcm9wZXJ0eShmbGFncywgb2JqLCBwcm9wZXJ0eU5hbWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBoYW5kbGVDaGFuZ2UobmV3VmFsdWUsIHByZXZpb3VzVmFsdWUsIGZsYWdzKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jYWxsLWJpbmRpbmcuanMubWFwIiwiLy8gVE9ETzogYWRkIGNvbm5lY3QtcXVldWUgKG9yIHNvbWV0aGluZyBzaW1pbGFyKSBiYWNrIGluIHdoZW4gZXZlcnl0aGluZyBlbHNlIGlzIHdvcmtpbmcsIHRvIGltcHJvdmUgc3RhcnR1cCB0aW1lXG5jb25zdCBzbGljZSA9IEFycmF5LnByb3RvdHlwZS5zbGljZTtcbmNvbnN0IHNsb3ROYW1lcyA9IFtdO1xuY29uc3QgdmVyc2lvblNsb3ROYW1lcyA9IFtdO1xubGV0IGxhc3RTbG90ID0gLTE7XG5mdW5jdGlvbiBlbnN1cmVFbm91Z2hTbG90TmFtZXMoY3VycmVudFNsb3QpIHtcbiAgICBpZiAoY3VycmVudFNsb3QgPT09IGxhc3RTbG90KSB7XG4gICAgICAgIGxhc3RTbG90ICs9IDU7XG4gICAgICAgIGNvbnN0IGlpID0gc2xvdE5hbWVzLmxlbmd0aCA9IHZlcnNpb25TbG90TmFtZXMubGVuZ3RoID0gbGFzdFNsb3QgKyAxO1xuICAgICAgICBmb3IgKGxldCBpID0gY3VycmVudFNsb3QgKyAxOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgc2xvdE5hbWVzW2ldID0gYF9vYnNlcnZlciR7aX1gO1xuICAgICAgICAgICAgdmVyc2lvblNsb3ROYW1lc1tpXSA9IGBfb2JzZXJ2ZXJWZXJzaW9uJHtpfWA7XG4gICAgICAgIH1cbiAgICB9XG59XG5lbnN1cmVFbm91Z2hTbG90TmFtZXMoLTEpO1xuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZE9ic2VydmVyKG9ic2VydmVyKSB7XG4gICAgLy8gZmluZCB0aGUgb2JzZXJ2ZXIuXG4gICAgY29uc3Qgb2JzZXJ2ZXJTbG90cyA9IHRoaXMub2JzZXJ2ZXJTbG90cyA9PSBudWxsID8gMCA6IHRoaXMub2JzZXJ2ZXJTbG90cztcbiAgICBsZXQgaSA9IG9ic2VydmVyU2xvdHM7XG4gICAgd2hpbGUgKGktLSAmJiB0aGlzW3Nsb3ROYW1lc1tpXV0gIT09IG9ic2VydmVyKVxuICAgICAgICA7XG4gICAgLy8gaWYgd2UgYXJlIG5vdCBhbHJlYWR5IG9ic2VydmluZywgcHV0IHRoZSBvYnNlcnZlciBpbiBhbiBvcGVuIHNsb3QgYW5kIHN1YnNjcmliZS5cbiAgICBpZiAoaSA9PT0gLTEpIHtcbiAgICAgICAgaSA9IDA7XG4gICAgICAgIHdoaWxlICh0aGlzW3Nsb3ROYW1lc1tpXV0pIHtcbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgfVxuICAgICAgICB0aGlzW3Nsb3ROYW1lc1tpXV0gPSBvYnNlcnZlcjtcbiAgICAgICAgb2JzZXJ2ZXIuc3Vic2NyaWJlKHRoaXMpO1xuICAgICAgICBvYnNlcnZlclt0aGlzLmlkXSB8PSAxNiAvKiB1cGRhdGVUYXJnZXRJbnN0YW5jZSAqLztcbiAgICAgICAgLy8gaW5jcmVtZW50IHRoZSBzbG90IGNvdW50LlxuICAgICAgICBpZiAoaSA9PT0gb2JzZXJ2ZXJTbG90cykge1xuICAgICAgICAgICAgdGhpcy5vYnNlcnZlclNsb3RzID0gaSArIDE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gc2V0IHRoZSBcInZlcnNpb25cIiB3aGVuIHRoZSBvYnNlcnZlciB3YXMgdXNlZC5cbiAgICBpZiAodGhpcy52ZXJzaW9uID09IG51bGwpIHtcbiAgICAgICAgdGhpcy52ZXJzaW9uID0gMDtcbiAgICB9XG4gICAgdGhpc1t2ZXJzaW9uU2xvdE5hbWVzW2ldXSA9IHRoaXMudmVyc2lvbjtcbiAgICBlbnN1cmVFbm91Z2hTbG90TmFtZXMoaSk7XG59XG4vKiogQGludGVybmFsICovXG5leHBvcnQgZnVuY3Rpb24gb2JzZXJ2ZVByb3BlcnR5KGZsYWdzLCBvYmosIHByb3BlcnR5TmFtZSkge1xuICAgIGNvbnN0IG9ic2VydmVyID0gdGhpcy5vYnNlcnZlckxvY2F0b3IuZ2V0T2JzZXJ2ZXIoZmxhZ3MsIG9iaiwgcHJvcGVydHlOYW1lKTtcbiAgICAvKiBOb3RlOiB3ZSBuZWVkIHRvIGNhc3QgaGVyZSBiZWNhdXNlIHdlIGNhbiBpbmRlZWQgZ2V0IGFuIGFjY2Vzc29yIGluc3RlYWQgb2YgYW4gb2JzZXJ2ZXIsXG4gICAgICogIGluIHdoaWNoIGNhc2UgdGhlIGNhbGwgdG8gb2JzZXJ2ZXIuc3Vic2NyaWJlIHdpbGwgdGhyb3cuIEl0J3Mgbm90IHZlcnkgY2xlYW4gYW5kIHdlIGNhbiBzb2x2ZSB0aGlzIGluIDIgd2F5czpcbiAgICAgKiAgMS4gRmFpbCBlYXJsaWVyOiBvbmx5IGxldCB0aGUgbG9jYXRvciByZXNvbHZlIG9ic2VydmVycyBmcm9tIC5nZXRPYnNlcnZlciwgYW5kIHRocm93IGlmIG5vIGJyYW5jaGVzIGFyZSBsZWZ0IChlLmcuIGl0IHdvdWxkIG90aGVyd2lzZSByZXR1cm4gYW4gYWNjZXNzb3IpXG4gICAgICogIDIuIEZhaWwgc2lsZW50bHkgKHdpdGhvdXQgdGhyb3dpbmcpOiBnaXZlIGFsbCBhY2Nlc3NvcnMgYSBuby1vcCBzdWJzY3JpYmUgbWV0aG9kXG4gICAgICpcbiAgICAgKiBXZSdsbCBwcm9iYWJseSB3YW50IHRvIGltcGxlbWVudCBzb21lIGdsb2JhbCBjb25maWd1cmF0aW9uIChsaWtlIGEgXCJzdHJpY3RcIiB0b2dnbGUpIHNvIHVzZXJzIGNhbiBwaWNrIGJldHdlZW4gZW5mb3JjZWQgY29ycmVjdG5lc3MgdnMuIGVhc2Utb2YtdXNlXG4gICAgICovXG4gICAgdGhpcy5hZGRPYnNlcnZlcihvYnNlcnZlcik7XG59XG4vKiogQGludGVybmFsICovXG5leHBvcnQgZnVuY3Rpb24gdW5vYnNlcnZlKGFsbCkge1xuICAgIGNvbnN0IHNsb3RzID0gdGhpcy5vYnNlcnZlclNsb3RzO1xuICAgIGxldCBzbG90TmFtZTtcbiAgICBsZXQgb2JzZXJ2ZXI7XG4gICAgaWYgKGFsbCA9PT0gdHJ1ZSkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNsb3RzOyArK2kpIHtcbiAgICAgICAgICAgIHNsb3ROYW1lID0gc2xvdE5hbWVzW2ldO1xuICAgICAgICAgICAgb2JzZXJ2ZXIgPSB0aGlzW3Nsb3ROYW1lXTtcbiAgICAgICAgICAgIGlmIChvYnNlcnZlciAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpc1tzbG90TmFtZV0gPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgb2JzZXJ2ZXIudW5zdWJzY3JpYmUodGhpcyk7XG4gICAgICAgICAgICAgICAgb2JzZXJ2ZXJbdGhpcy5pZF0gJj0gfjE2IC8qIHVwZGF0ZVRhcmdldEluc3RhbmNlICovO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCB2ZXJzaW9uID0gdGhpcy52ZXJzaW9uO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNsb3RzOyArK2kpIHtcbiAgICAgICAgICAgIGlmICh0aGlzW3ZlcnNpb25TbG90TmFtZXNbaV1dICE9PSB2ZXJzaW9uKSB7XG4gICAgICAgICAgICAgICAgc2xvdE5hbWUgPSBzbG90TmFtZXNbaV07XG4gICAgICAgICAgICAgICAgb2JzZXJ2ZXIgPSB0aGlzW3Nsb3ROYW1lXTtcbiAgICAgICAgICAgICAgICBpZiAob2JzZXJ2ZXIgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzW3Nsb3ROYW1lXSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIudW5zdWJzY3JpYmUodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIG9ic2VydmVyW3RoaXMuaWRdICY9IH4xNiAvKiB1cGRhdGVUYXJnZXRJbnN0YW5jZSAqLztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBjb25uZWN0YWJsZURlY29yYXRvcih0YXJnZXQpIHtcbiAgICBjb25zdCBwcm90byA9IHRhcmdldC5wcm90b3R5cGU7XG4gICAgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocHJvdG8sICdvYnNlcnZlUHJvcGVydHknKSlcbiAgICAgICAgcHJvdG8ub2JzZXJ2ZVByb3BlcnR5ID0gb2JzZXJ2ZVByb3BlcnR5O1xuICAgIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHByb3RvLCAndW5vYnNlcnZlJykpXG4gICAgICAgIHByb3RvLnVub2JzZXJ2ZSA9IHVub2JzZXJ2ZTtcbiAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChwcm90bywgJ2FkZE9ic2VydmVyJykpXG4gICAgICAgIHByb3RvLmFkZE9ic2VydmVyID0gYWRkT2JzZXJ2ZXI7XG4gICAgcmV0dXJuIHRhcmdldDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjb25uZWN0YWJsZSh0YXJnZXQpIHtcbiAgICByZXR1cm4gdGFyZ2V0ID09IG51bGwgPyBjb25uZWN0YWJsZURlY29yYXRvciA6IGNvbm5lY3RhYmxlRGVjb3JhdG9yKHRhcmdldCk7XG59XG5sZXQgdmFsdWUgPSAwO1xuY29ubmVjdGFibGUuYXNzaWduSWRUbyA9IChpbnN0YW5jZSkgPT4ge1xuICAgIGluc3RhbmNlLmlkID0gKyt2YWx1ZTtcbn07XG4vLyBAY29ubmVjdGFibGVcbmV4cG9ydCBjbGFzcyBCaW5kaW5nTWVkaWF0b3Ige1xuICAgIGNvbnN0cnVjdG9yKGtleSwgYmluZGluZywgb2JzZXJ2ZXJMb2NhdG9yLCBsb2NhdG9yKSB7XG4gICAgICAgIHRoaXMua2V5ID0ga2V5O1xuICAgICAgICB0aGlzLmJpbmRpbmcgPSBiaW5kaW5nO1xuICAgICAgICB0aGlzLm9ic2VydmVyTG9jYXRvciA9IG9ic2VydmVyTG9jYXRvcjtcbiAgICAgICAgdGhpcy5sb2NhdG9yID0gbG9jYXRvcjtcbiAgICAgICAgdGhpcy5vYnNlcnZlUHJvcGVydHkgPSBvYnNlcnZlUHJvcGVydHk7XG4gICAgICAgIHRoaXMudW5vYnNlcnZlID0gdW5vYnNlcnZlO1xuICAgICAgICB0aGlzLmFkZE9ic2VydmVyID0gYWRkT2JzZXJ2ZXI7XG4gICAgICAgIGNvbm5lY3RhYmxlLmFzc2lnbklkVG8odGhpcyk7XG4gICAgfVxuICAgICRiaW5kKGZsYWdzLCBzY29wZSwgcGFydCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01ldGhvZCBub3QgaW1wbGVtZW50ZWQuJyk7XG4gICAgfVxuICAgICR1bmJpbmQoZmxhZ3MpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNZXRob2Qgbm90IGltcGxlbWVudGVkLicpO1xuICAgIH1cbiAgICBoYW5kbGVDaGFuZ2UobmV3VmFsdWUsIHByZXZpb3VzVmFsdWUsIGZsYWdzKSB7XG4gICAgICAgIHRoaXMuYmluZGluZ1t0aGlzLmtleV0obmV3VmFsdWUsIHByZXZpb3VzVmFsdWUsIGZsYWdzKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb25uZWN0YWJsZS5qcy5tYXAiLCJpbXBvcnQgeyBESSwgUExBVEZPUk0sIFJlcG9ydGVyLCB9IGZyb20gJ0BhdXJlbGlhL2tlcm5lbCc7XG5pbXBvcnQgeyBBY2Nlc3NNZW1iZXJFeHByZXNzaW9uLCBBY2Nlc3NTY29wZUV4cHJlc3Npb24sIENhbGxNZW1iZXJFeHByZXNzaW9uLCBDYWxsU2NvcGVFeHByZXNzaW9uLCBQcmltaXRpdmVMaXRlcmFsRXhwcmVzc2lvbiwgfSBmcm9tICcuL2FzdCc7XG5leHBvcnQgY29uc3QgSUV4cHJlc3Npb25QYXJzZXIgPSBESS5jcmVhdGVJbnRlcmZhY2UoJ0lFeHByZXNzaW9uUGFyc2VyJykud2l0aERlZmF1bHQoeCA9PiB4LnNpbmdsZXRvbihFeHByZXNzaW9uUGFyc2VyKSk7XG4vKiogQGludGVybmFsICovXG5leHBvcnQgY2xhc3MgRXhwcmVzc2lvblBhcnNlciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuZXhwcmVzc2lvbkxvb2t1cCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgIHRoaXMuZm9yT2ZMb29rdXAgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICB0aGlzLmludGVycG9sYXRpb25Mb29rdXAgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIH1cbiAgICBwYXJzZShleHByZXNzaW9uLCBiaW5kaW5nVHlwZSkge1xuICAgICAgICBzd2l0Y2ggKGJpbmRpbmdUeXBlKSB7XG4gICAgICAgICAgICBjYXNlIDIwNDggLyogSW50ZXJwb2xhdGlvbiAqLzoge1xuICAgICAgICAgICAgICAgIGxldCBmb3VuZCA9IHRoaXMuaW50ZXJwb2xhdGlvbkxvb2t1cFtleHByZXNzaW9uXTtcbiAgICAgICAgICAgICAgICBpZiAoZm91bmQgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgICAgICBmb3VuZCA9IHRoaXMuaW50ZXJwb2xhdGlvbkxvb2t1cFtleHByZXNzaW9uXSA9IHRoaXMucGFyc2VDb3JlKGV4cHJlc3Npb24sIGJpbmRpbmdUeXBlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZvdW5kO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSA1MzkgLyogRm9yQ29tbWFuZCAqLzoge1xuICAgICAgICAgICAgICAgIGxldCBmb3VuZCA9IHRoaXMuZm9yT2ZMb29rdXBbZXhwcmVzc2lvbl07XG4gICAgICAgICAgICAgICAgaWYgKGZvdW5kID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0aGlzLmZvck9mTG9va3VwW2V4cHJlc3Npb25dID0gdGhpcy5wYXJzZUNvcmUoZXhwcmVzc2lvbiwgYmluZGluZ1R5cGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZm91bmQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICAgICAgLy8gQWxsb3cgZW1wdHkgc3RyaW5ncyBmb3Igbm9ybWFsIGJpbmRpbmdzIGFuZCB0aG9zZSB0aGF0IGFyZSBlbXB0eSBieSBkZWZhdWx0IChzdWNoIGFzIGEgY3VzdG9tIGF0dHJpYnV0ZSB3aXRob3V0IGFuIGVxdWFscyBzaWduKVxuICAgICAgICAgICAgICAgIC8vIEJ1dCBkb24ndCBjYWNoZSBpdCwgYmVjYXVzZSBlbXB0eSBzdHJpbmdzIGFyZSBhbHdheXMgaW52YWxpZCBmb3IgYW55IG90aGVyIHR5cGUgb2YgYmluZGluZ1xuICAgICAgICAgICAgICAgIGlmIChleHByZXNzaW9uLmxlbmd0aCA9PT0gMCAmJiAoYmluZGluZ1R5cGUgJiAoNTMgLyogQmluZENvbW1hbmQgKi8gfCA0OSAvKiBPbmVUaW1lQ29tbWFuZCAqLyB8IDUwIC8qIFRvVmlld0NvbW1hbmQgKi8pKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJpbWl0aXZlTGl0ZXJhbEV4cHJlc3Npb24uJGVtcHR5O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgZm91bmQgPSB0aGlzLmV4cHJlc3Npb25Mb29rdXBbZXhwcmVzc2lvbl07XG4gICAgICAgICAgICAgICAgaWYgKGZvdW5kID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0aGlzLmV4cHJlc3Npb25Mb29rdXBbZXhwcmVzc2lvbl0gPSB0aGlzLnBhcnNlQ29yZShleHByZXNzaW9uLCBiaW5kaW5nVHlwZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBmb3VuZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjYWNoZShleHByZXNzaW9ucykge1xuICAgICAgICBjb25zdCB7IGZvck9mTG9va3VwLCBleHByZXNzaW9uTG9va3VwLCBpbnRlcnBvbGF0aW9uTG9va3VwIH0gPSB0aGlzO1xuICAgICAgICBmb3IgKGNvbnN0IGV4cHJlc3Npb24gaW4gZXhwcmVzc2lvbnMpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4cHIgPSBleHByZXNzaW9uc1tleHByZXNzaW9uXTtcbiAgICAgICAgICAgIHN3aXRjaCAoZXhwci4ka2luZCkge1xuICAgICAgICAgICAgICAgIGNhc2UgMjQgLyogSW50ZXJwb2xhdGlvbiAqLzpcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJwb2xhdGlvbkxvb2t1cFtleHByZXNzaW9uXSA9IGV4cHI7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNjE5OSAvKiBGb3JPZlN0YXRlbWVudCAqLzpcbiAgICAgICAgICAgICAgICAgICAgZm9yT2ZMb29rdXBbZXhwcmVzc2lvbl0gPSBleHByO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBleHByZXNzaW9uTG9va3VwW2V4cHJlc3Npb25dID0gZXhwcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBwYXJzZUNvcmUoZXhwcmVzc2lvbiwgYmluZGluZ1R5cGUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gZXhwcmVzc2lvbi5zcGxpdCgnLicpO1xuICAgICAgICAgICAgY29uc3QgZmlyc3RQYXJ0ID0gcGFydHNbMF07XG4gICAgICAgICAgICBsZXQgY3VycmVudDtcbiAgICAgICAgICAgIGlmIChmaXJzdFBhcnQuZW5kc1dpdGgoJygpJykpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50ID0gbmV3IENhbGxTY29wZUV4cHJlc3Npb24oZmlyc3RQYXJ0LnJlcGxhY2UoJygpJywgJycpLCBQTEFURk9STS5lbXB0eUFycmF5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGN1cnJlbnQgPSBuZXcgQWNjZXNzU2NvcGVFeHByZXNzaW9uKHBhcnRzWzBdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBpbmRleCA9IDE7XG4gICAgICAgICAgICB3aGlsZSAoaW5kZXggPCBwYXJ0cy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50UGFydCA9IHBhcnRzW2luZGV4XTtcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudFBhcnQuZW5kc1dpdGgoJygpJykpIHtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudCA9IG5ldyBDYWxsTWVtYmVyRXhwcmVzc2lvbihjdXJyZW50LCBjdXJyZW50UGFydC5yZXBsYWNlKCcoKScsICcnKSwgUExBVEZPUk0uZW1wdHlBcnJheSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50ID0gbmV3IEFjY2Vzc01lbWJlckV4cHJlc3Npb24oY3VycmVudCwgcGFydHNbaW5kZXhdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaW5kZXgrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjdXJyZW50O1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJvdyBSZXBvcnRlci5lcnJvcigzLCBlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9pbmRlbnQgKi9cbmV4cG9ydCB2YXIgQmluZGluZ1R5cGU7XG4oZnVuY3Rpb24gKEJpbmRpbmdUeXBlKSB7XG4gICAgQmluZGluZ1R5cGVbQmluZGluZ1R5cGVbXCJOb25lXCJdID0gMF0gPSBcIk5vbmVcIjtcbiAgICBCaW5kaW5nVHlwZVtCaW5kaW5nVHlwZVtcIklnbm9yZUN1c3RvbUF0dHJcIl0gPSA0MDk2XSA9IFwiSWdub3JlQ3VzdG9tQXR0clwiO1xuICAgIEJpbmRpbmdUeXBlW0JpbmRpbmdUeXBlW1wiSW50ZXJwb2xhdGlvblwiXSA9IDIwNDhdID0gXCJJbnRlcnBvbGF0aW9uXCI7XG4gICAgQmluZGluZ1R5cGVbQmluZGluZ1R5cGVbXCJJc1JlZlwiXSA9IDUzNzZdID0gXCJJc1JlZlwiO1xuICAgIEJpbmRpbmdUeXBlW0JpbmRpbmdUeXBlW1wiSXNJdGVyYXRvclwiXSA9IDUxMl0gPSBcIklzSXRlcmF0b3JcIjtcbiAgICBCaW5kaW5nVHlwZVtCaW5kaW5nVHlwZVtcIklzQ3VzdG9tXCJdID0gMjU2XSA9IFwiSXNDdXN0b21cIjtcbiAgICBCaW5kaW5nVHlwZVtCaW5kaW5nVHlwZVtcIklzRnVuY3Rpb25cIl0gPSAxMjhdID0gXCJJc0Z1bmN0aW9uXCI7XG4gICAgQmluZGluZ1R5cGVbQmluZGluZ1R5cGVbXCJJc0V2ZW50XCJdID0gNjRdID0gXCJJc0V2ZW50XCI7XG4gICAgQmluZGluZ1R5cGVbQmluZGluZ1R5cGVbXCJJc1Byb3BlcnR5XCJdID0gMzJdID0gXCJJc1Byb3BlcnR5XCI7XG4gICAgQmluZGluZ1R5cGVbQmluZGluZ1R5cGVbXCJJc0NvbW1hbmRcIl0gPSAxNl0gPSBcIklzQ29tbWFuZFwiO1xuICAgIEJpbmRpbmdUeXBlW0JpbmRpbmdUeXBlW1wiSXNQcm9wZXJ0eUNvbW1hbmRcIl0gPSA0OF0gPSBcIklzUHJvcGVydHlDb21tYW5kXCI7XG4gICAgQmluZGluZ1R5cGVbQmluZGluZ1R5cGVbXCJJc0V2ZW50Q29tbWFuZFwiXSA9IDgwXSA9IFwiSXNFdmVudENvbW1hbmRcIjtcbiAgICBCaW5kaW5nVHlwZVtCaW5kaW5nVHlwZVtcIkRlbGVnYXRpb25TdHJhdGVneURlbHRhXCJdID0gNl0gPSBcIkRlbGVnYXRpb25TdHJhdGVneURlbHRhXCI7XG4gICAgQmluZGluZ1R5cGVbQmluZGluZ1R5cGVbXCJDb21tYW5kXCJdID0gMTVdID0gXCJDb21tYW5kXCI7XG4gICAgQmluZGluZ1R5cGVbQmluZGluZ1R5cGVbXCJPbmVUaW1lQ29tbWFuZFwiXSA9IDQ5XSA9IFwiT25lVGltZUNvbW1hbmRcIjtcbiAgICBCaW5kaW5nVHlwZVtCaW5kaW5nVHlwZVtcIlRvVmlld0NvbW1hbmRcIl0gPSA1MF0gPSBcIlRvVmlld0NvbW1hbmRcIjtcbiAgICBCaW5kaW5nVHlwZVtCaW5kaW5nVHlwZVtcIkZyb21WaWV3Q29tbWFuZFwiXSA9IDUxXSA9IFwiRnJvbVZpZXdDb21tYW5kXCI7XG4gICAgQmluZGluZ1R5cGVbQmluZGluZ1R5cGVbXCJUd29XYXlDb21tYW5kXCJdID0gNTJdID0gXCJUd29XYXlDb21tYW5kXCI7XG4gICAgQmluZGluZ1R5cGVbQmluZGluZ1R5cGVbXCJCaW5kQ29tbWFuZFwiXSA9IDUzXSA9IFwiQmluZENvbW1hbmRcIjtcbiAgICBCaW5kaW5nVHlwZVtCaW5kaW5nVHlwZVtcIlRyaWdnZXJDb21tYW5kXCJdID0gNDE4Ml0gPSBcIlRyaWdnZXJDb21tYW5kXCI7XG4gICAgQmluZGluZ1R5cGVbQmluZGluZ1R5cGVbXCJDYXB0dXJlQ29tbWFuZFwiXSA9IDQxODNdID0gXCJDYXB0dXJlQ29tbWFuZFwiO1xuICAgIEJpbmRpbmdUeXBlW0JpbmRpbmdUeXBlW1wiRGVsZWdhdGVDb21tYW5kXCJdID0gNDE4NF0gPSBcIkRlbGVnYXRlQ29tbWFuZFwiO1xuICAgIEJpbmRpbmdUeXBlW0JpbmRpbmdUeXBlW1wiQ2FsbENvbW1hbmRcIl0gPSAxNTNdID0gXCJDYWxsQ29tbWFuZFwiO1xuICAgIEJpbmRpbmdUeXBlW0JpbmRpbmdUeXBlW1wiT3B0aW9uc0NvbW1hbmRcIl0gPSAyNl0gPSBcIk9wdGlvbnNDb21tYW5kXCI7XG4gICAgQmluZGluZ1R5cGVbQmluZGluZ1R5cGVbXCJGb3JDb21tYW5kXCJdID0gNTM5XSA9IFwiRm9yQ29tbWFuZFwiO1xuICAgIEJpbmRpbmdUeXBlW0JpbmRpbmdUeXBlW1wiQ3VzdG9tQ29tbWFuZFwiXSA9IDI4NF0gPSBcIkN1c3RvbUNvbW1hbmRcIjtcbn0pKEJpbmRpbmdUeXBlIHx8IChCaW5kaW5nVHlwZSA9IHt9KSk7XG4vKiBlc2xpbnQtZW5hYmxlIEB0eXBlc2NyaXB0LWVzbGludC9pbmRlbnQgKi9cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWV4cHJlc3Npb24tcGFyc2VyLmpzLm1hcCIsImltcG9ydCB7IF9fZGVjb3JhdGUsIF9fbWV0YWRhdGEgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IElTZXJ2aWNlTG9jYXRvciB9IGZyb20gJ0BhdXJlbGlhL2tlcm5lbCc7XG5pbXBvcnQgeyBCaW5kaW5nTW9kZSwgfSBmcm9tICcuLi9mbGFncyc7XG5pbXBvcnQgeyBJT2JzZXJ2ZXJMb2NhdG9yIH0gZnJvbSAnLi4vb2JzZXJ2YXRpb24vb2JzZXJ2ZXItbG9jYXRvcic7XG5pbXBvcnQgeyBjb25uZWN0YWJsZSwgfSBmcm9tICcuL2Nvbm5lY3RhYmxlJztcbmNvbnN0IHsgdG9WaWV3LCBvbmVUaW1lIH0gPSBCaW5kaW5nTW9kZTtcbmV4cG9ydCBjbGFzcyBNdWx0aUludGVycG9sYXRpb25CaW5kaW5nIHtcbiAgICBjb25zdHJ1Y3RvcihvYnNlcnZlckxvY2F0b3IsIGludGVycG9sYXRpb24sIHRhcmdldCwgdGFyZ2V0UHJvcGVydHksIG1vZGUsIGxvY2F0b3IpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlckxvY2F0b3IgPSBvYnNlcnZlckxvY2F0b3I7XG4gICAgICAgIHRoaXMuaW50ZXJwb2xhdGlvbiA9IGludGVycG9sYXRpb247XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xuICAgICAgICB0aGlzLnRhcmdldFByb3BlcnR5ID0gdGFyZ2V0UHJvcGVydHk7XG4gICAgICAgIHRoaXMubW9kZSA9IG1vZGU7XG4gICAgICAgIHRoaXMubG9jYXRvciA9IGxvY2F0b3I7XG4gICAgICAgIHRoaXMuaW50ZXJjZXB0b3IgPSB0aGlzO1xuICAgICAgICB0aGlzLiRzdGF0ZSA9IDAgLyogbm9uZSAqLztcbiAgICAgICAgdGhpcy4kc2NvcGUgPSB2b2lkIDA7XG4gICAgICAgIC8vIE5vdGU6IHRoZSBjaGlsZCBleHByZXNzaW9ucyBvZiBhbiBJbnRlcnBvbGF0aW9uIGV4cHJlc3Npb24gYXJlIGZ1bGwgQXVyZWxpYSBleHByZXNzaW9ucywgbWVhbmluZyB0aGV5IG1heSBpbmNsdWRlXG4gICAgICAgIC8vIHZhbHVlIGNvbnZlcnRlcnMgYW5kIGJpbmRpbmcgYmVoYXZpb3JzLlxuICAgICAgICAvLyBFYWNoIGV4cHJlc3Npb24gcmVwcmVzZW50cyBvbmUgJHtpbnRlcnBvbGF0aW9ufSwgYW5kIGZvciBlYWNoIHdlIGNyZWF0ZSBhIGNoaWxkIFRleHRCaW5kaW5nIHVubGVzcyB0aGVyZSBpcyBvbmx5IG9uZSxcbiAgICAgICAgLy8gaW4gd2hpY2ggY2FzZSB0aGUgcmVuZGVyZXIgd2lsbCBjcmVhdGUgdGhlIFRleHRCaW5kaW5nIGRpcmVjdGx5XG4gICAgICAgIGNvbnN0IGV4cHJlc3Npb25zID0gaW50ZXJwb2xhdGlvbi5leHByZXNzaW9ucztcbiAgICAgICAgY29uc3QgcGFydHMgPSB0aGlzLnBhcnRzID0gQXJyYXkoZXhwcmVzc2lvbnMubGVuZ3RoKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGlpID0gZXhwcmVzc2lvbnMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgcGFydHNbaV0gPSBuZXcgSW50ZXJwb2xhdGlvbkJpbmRpbmcoZXhwcmVzc2lvbnNbaV0sIGludGVycG9sYXRpb24sIHRhcmdldCwgdGFyZ2V0UHJvcGVydHksIG1vZGUsIG9ic2VydmVyTG9jYXRvciwgbG9jYXRvciwgaSA9PT0gMCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgO1xuICAgICRiaW5kKGZsYWdzLCBzY29wZSwgcGFydCkge1xuICAgICAgICBpZiAodGhpcy4kc3RhdGUgJiA0IC8qIGlzQm91bmQgKi8pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLiRzY29wZSA9PT0gc2NvcGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmludGVyY2VwdG9yLiR1bmJpbmQoZmxhZ3MpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuJHN0YXRlIHw9IDQgLyogaXNCb3VuZCAqLztcbiAgICAgICAgdGhpcy4kc2NvcGUgPSBzY29wZTtcbiAgICAgICAgdGhpcy5wYXJ0ID0gcGFydDtcbiAgICAgICAgY29uc3QgcGFydHMgPSB0aGlzLnBhcnRzO1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBwYXJ0cy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICBwYXJ0c1tpXS5pbnRlcmNlcHRvci4kYmluZChmbGFncywgc2NvcGUsIHBhcnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgICR1bmJpbmQoZmxhZ3MpIHtcbiAgICAgICAgaWYgKCEodGhpcy4kc3RhdGUgJiA0IC8qIGlzQm91bmQgKi8pKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4kc3RhdGUgJj0gfjQgLyogaXNCb3VuZCAqLztcbiAgICAgICAgdGhpcy4kc2NvcGUgPSB2b2lkIDA7XG4gICAgICAgIGNvbnN0IHBhcnRzID0gdGhpcy5wYXJ0cztcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGlpID0gcGFydHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgcGFydHNbaV0uaW50ZXJjZXB0b3IuJHVuYmluZChmbGFncyk7XG4gICAgICAgIH1cbiAgICB9XG59XG5sZXQgSW50ZXJwb2xhdGlvbkJpbmRpbmcgPSBjbGFzcyBJbnRlcnBvbGF0aW9uQmluZGluZyB7XG4gICAgY29uc3RydWN0b3Ioc291cmNlRXhwcmVzc2lvbiwgaW50ZXJwb2xhdGlvbiwgdGFyZ2V0LCB0YXJnZXRQcm9wZXJ0eSwgbW9kZSwgb2JzZXJ2ZXJMb2NhdG9yLCBsb2NhdG9yLCBpc0ZpcnN0KSB7XG4gICAgICAgIHRoaXMuc291cmNlRXhwcmVzc2lvbiA9IHNvdXJjZUV4cHJlc3Npb247XG4gICAgICAgIHRoaXMuaW50ZXJwb2xhdGlvbiA9IGludGVycG9sYXRpb247XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xuICAgICAgICB0aGlzLnRhcmdldFByb3BlcnR5ID0gdGFyZ2V0UHJvcGVydHk7XG4gICAgICAgIHRoaXMubW9kZSA9IG1vZGU7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJMb2NhdG9yID0gb2JzZXJ2ZXJMb2NhdG9yO1xuICAgICAgICB0aGlzLmxvY2F0b3IgPSBsb2NhdG9yO1xuICAgICAgICB0aGlzLmlzRmlyc3QgPSBpc0ZpcnN0O1xuICAgICAgICB0aGlzLmludGVyY2VwdG9yID0gdGhpcztcbiAgICAgICAgdGhpcy4kc3RhdGUgPSAwIC8qIG5vbmUgKi87XG4gICAgICAgIGNvbm5lY3RhYmxlLmFzc2lnbklkVG8odGhpcyk7XG4gICAgICAgIHRoaXMudGFyZ2V0T2JzZXJ2ZXIgPSBvYnNlcnZlckxvY2F0b3IuZ2V0QWNjZXNzb3IoMCAvKiBub25lICovLCB0YXJnZXQsIHRhcmdldFByb3BlcnR5KTtcbiAgICB9XG4gICAgdXBkYXRlVGFyZ2V0KHZhbHVlLCBmbGFncykge1xuICAgICAgICB0aGlzLnRhcmdldE9ic2VydmVyLnNldFZhbHVlKHZhbHVlLCBmbGFncyB8IDE2IC8qIHVwZGF0ZVRhcmdldEluc3RhbmNlICovKTtcbiAgICB9XG4gICAgaGFuZGxlQ2hhbmdlKF9uZXdWYWx1ZSwgX3ByZXZpb3VzVmFsdWUsIGZsYWdzKSB7XG4gICAgICAgIGlmICghKHRoaXMuJHN0YXRlICYgNCAvKiBpc0JvdW5kICovKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHByZXZpb3VzVmFsdWUgPSB0aGlzLnRhcmdldE9ic2VydmVyLmdldFZhbHVlKCk7XG4gICAgICAgIGNvbnN0IG5ld1ZhbHVlID0gdGhpcy5pbnRlcnBvbGF0aW9uLmV2YWx1YXRlKGZsYWdzLCB0aGlzLiRzY29wZSwgdGhpcy5sb2NhdG9yLCB0aGlzLnBhcnQpO1xuICAgICAgICBpZiAobmV3VmFsdWUgIT09IHByZXZpb3VzVmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuaW50ZXJjZXB0b3IudXBkYXRlVGFyZ2V0KG5ld1ZhbHVlLCBmbGFncyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCh0aGlzLm1vZGUgJiBvbmVUaW1lKSA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy52ZXJzaW9uKys7XG4gICAgICAgICAgICB0aGlzLnNvdXJjZUV4cHJlc3Npb24uY29ubmVjdChmbGFncywgdGhpcy4kc2NvcGUsIHRoaXMuaW50ZXJjZXB0b3IsIHRoaXMucGFydCk7XG4gICAgICAgICAgICB0aGlzLmludGVyY2VwdG9yLnVub2JzZXJ2ZShmYWxzZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgJGJpbmQoZmxhZ3MsIHNjb3BlLCBwYXJ0KSB7XG4gICAgICAgIGlmICh0aGlzLiRzdGF0ZSAmIDQgLyogaXNCb3VuZCAqLykge1xuICAgICAgICAgICAgaWYgKHRoaXMuJHNjb3BlID09PSBzY29wZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaW50ZXJjZXB0b3IuJHVuYmluZChmbGFncyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4kc3RhdGUgfD0gNCAvKiBpc0JvdW5kICovO1xuICAgICAgICB0aGlzLiRzY29wZSA9IHNjb3BlO1xuICAgICAgICB0aGlzLnBhcnQgPSBwYXJ0O1xuICAgICAgICBjb25zdCBzb3VyY2VFeHByZXNzaW9uID0gdGhpcy5zb3VyY2VFeHByZXNzaW9uO1xuICAgICAgICBpZiAoc291cmNlRXhwcmVzc2lvbi5iaW5kKSB7XG4gICAgICAgICAgICBzb3VyY2VFeHByZXNzaW9uLmJpbmQoZmxhZ3MsIHNjb3BlLCB0aGlzLmludGVyY2VwdG9yKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5tb2RlICE9PSBCaW5kaW5nTW9kZS5vbmVUaW1lICYmIHRoaXMudGFyZ2V0T2JzZXJ2ZXIuYmluZCkge1xuICAgICAgICAgICAgdGhpcy50YXJnZXRPYnNlcnZlci5iaW5kKGZsYWdzKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBzaW5jZSB0aGUgaW50ZXJwb2xhdGlvbiBhbHJlYWR5IGdldHMgdGhlIHdob2xlIHZhbHVlLCB3ZSBvbmx5IG5lZWQgdG8gbGV0IHRoZSBmaXJzdFxuICAgICAgICAvLyB0ZXh0IGJpbmRpbmcgZG8gdGhlIHVwZGF0ZSBpZiB0aGVyZSBhcmUgbXVsdGlwbGVcbiAgICAgICAgaWYgKHRoaXMuaXNGaXJzdCkge1xuICAgICAgICAgICAgdGhpcy5pbnRlcmNlcHRvci51cGRhdGVUYXJnZXQodGhpcy5pbnRlcnBvbGF0aW9uLmV2YWx1YXRlKGZsYWdzLCBzY29wZSwgdGhpcy5sb2NhdG9yLCBwYXJ0KSwgZmxhZ3MpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm1vZGUgJiB0b1ZpZXcpIHtcbiAgICAgICAgICAgIHNvdXJjZUV4cHJlc3Npb24uY29ubmVjdChmbGFncywgc2NvcGUsIHRoaXMuaW50ZXJjZXB0b3IsIHBhcnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgICR1bmJpbmQoZmxhZ3MpIHtcbiAgICAgICAgaWYgKCEodGhpcy4kc3RhdGUgJiA0IC8qIGlzQm91bmQgKi8pKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4kc3RhdGUgJj0gfjQgLyogaXNCb3VuZCAqLztcbiAgICAgICAgY29uc3Qgc291cmNlRXhwcmVzc2lvbiA9IHRoaXMuc291cmNlRXhwcmVzc2lvbjtcbiAgICAgICAgaWYgKHNvdXJjZUV4cHJlc3Npb24udW5iaW5kKSB7XG4gICAgICAgICAgICBzb3VyY2VFeHByZXNzaW9uLnVuYmluZChmbGFncywgdGhpcy4kc2NvcGUsIHRoaXMuaW50ZXJjZXB0b3IpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnRhcmdldE9ic2VydmVyLnVuYmluZCkge1xuICAgICAgICAgICAgdGhpcy50YXJnZXRPYnNlcnZlci51bmJpbmQoZmxhZ3MpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuJHNjb3BlID0gdm9pZCAwO1xuICAgICAgICB0aGlzLmludGVyY2VwdG9yLnVub2JzZXJ2ZSh0cnVlKTtcbiAgICB9XG59O1xuSW50ZXJwb2xhdGlvbkJpbmRpbmcgPSBfX2RlY29yYXRlKFtcbiAgICBjb25uZWN0YWJsZSgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0LCBPYmplY3QsIE9iamVjdCwgU3RyaW5nLCBOdW1iZXIsIE9iamVjdCwgT2JqZWN0LCBCb29sZWFuXSlcbl0sIEludGVycG9sYXRpb25CaW5kaW5nKTtcbmV4cG9ydCB7IEludGVycG9sYXRpb25CaW5kaW5nIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbnRlcnBvbGF0aW9uLWJpbmRpbmcuanMubWFwIiwiaW1wb3J0IHsgX19kZWNvcmF0ZSwgX19tZXRhZGF0YSB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgSVNlcnZpY2VMb2NhdG9yLCBSZXBvcnRlciwgfSBmcm9tICdAYXVyZWxpYS9rZXJuZWwnO1xuaW1wb3J0IHsgSUxpZmVjeWNsZSwgfSBmcm9tICcuLi9saWZlY3ljbGUnO1xuaW1wb3J0IHsgSU9ic2VydmVyTG9jYXRvciB9IGZyb20gJy4uL29ic2VydmF0aW9uL29ic2VydmVyLWxvY2F0b3InO1xuaW1wb3J0IHsgY29ubmVjdGFibGUsIH0gZnJvbSAnLi9jb25uZWN0YWJsZSc7XG5sZXQgTGV0QmluZGluZyA9IGNsYXNzIExldEJpbmRpbmcge1xuICAgIGNvbnN0cnVjdG9yKHNvdXJjZUV4cHJlc3Npb24sIHRhcmdldFByb3BlcnR5LCBvYnNlcnZlckxvY2F0b3IsIGxvY2F0b3IsIHRvQmluZGluZ0NvbnRleHQgPSBmYWxzZSkge1xuICAgICAgICB0aGlzLnNvdXJjZUV4cHJlc3Npb24gPSBzb3VyY2VFeHByZXNzaW9uO1xuICAgICAgICB0aGlzLnRhcmdldFByb3BlcnR5ID0gdGFyZ2V0UHJvcGVydHk7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJMb2NhdG9yID0gb2JzZXJ2ZXJMb2NhdG9yO1xuICAgICAgICB0aGlzLmxvY2F0b3IgPSBsb2NhdG9yO1xuICAgICAgICB0aGlzLnRvQmluZGluZ0NvbnRleHQgPSB0b0JpbmRpbmdDb250ZXh0O1xuICAgICAgICB0aGlzLmludGVyY2VwdG9yID0gdGhpcztcbiAgICAgICAgdGhpcy4kc3RhdGUgPSAwIC8qIG5vbmUgKi87XG4gICAgICAgIHRoaXMuJHNjb3BlID0gdm9pZCAwO1xuICAgICAgICB0aGlzLnRhcmdldCA9IG51bGw7XG4gICAgICAgIGNvbm5lY3RhYmxlLmFzc2lnbklkVG8odGhpcyk7XG4gICAgICAgIHRoaXMuJGxpZmVjeWNsZSA9IGxvY2F0b3IuZ2V0KElMaWZlY3ljbGUpO1xuICAgIH1cbiAgICBoYW5kbGVDaGFuZ2UoX25ld1ZhbHVlLCBfcHJldmlvdXNWYWx1ZSwgZmxhZ3MpIHtcbiAgICAgICAgaWYgKCEodGhpcy4kc3RhdGUgJiA0IC8qIGlzQm91bmQgKi8pKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZsYWdzICYgMTYgLyogdXBkYXRlVGFyZ2V0SW5zdGFuY2UgKi8pIHtcbiAgICAgICAgICAgIGNvbnN0IHsgdGFyZ2V0LCB0YXJnZXRQcm9wZXJ0eSB9ID0gdGhpcztcbiAgICAgICAgICAgIGNvbnN0IHByZXZpb3VzVmFsdWUgPSB0YXJnZXRbdGFyZ2V0UHJvcGVydHldO1xuICAgICAgICAgICAgY29uc3QgbmV3VmFsdWUgPSB0aGlzLnNvdXJjZUV4cHJlc3Npb24uZXZhbHVhdGUoZmxhZ3MsIHRoaXMuJHNjb3BlLCB0aGlzLmxvY2F0b3IsIHRoaXMucGFydCk7XG4gICAgICAgICAgICBpZiAobmV3VmFsdWUgIT09IHByZXZpb3VzVmFsdWUpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXRbdGFyZ2V0UHJvcGVydHldID0gbmV3VmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgUmVwb3J0ZXIuZXJyb3IoMTUsIGZsYWdzKTtcbiAgICB9XG4gICAgJGJpbmQoZmxhZ3MsIHNjb3BlLCBwYXJ0KSB7XG4gICAgICAgIGlmICh0aGlzLiRzdGF0ZSAmIDQgLyogaXNCb3VuZCAqLykge1xuICAgICAgICAgICAgaWYgKHRoaXMuJHNjb3BlID09PSBzY29wZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaW50ZXJjZXB0b3IuJHVuYmluZChmbGFncyB8IDQwOTYgLyogZnJvbUJpbmQgKi8pO1xuICAgICAgICB9XG4gICAgICAgIC8vIGFkZCBpc0JpbmRpbmcgZmxhZ1xuICAgICAgICB0aGlzLiRzdGF0ZSB8PSAxIC8qIGlzQmluZGluZyAqLztcbiAgICAgICAgdGhpcy4kc2NvcGUgPSBzY29wZTtcbiAgICAgICAgdGhpcy5wYXJ0ID0gcGFydDtcbiAgICAgICAgdGhpcy50YXJnZXQgPSAodGhpcy50b0JpbmRpbmdDb250ZXh0ID8gc2NvcGUuYmluZGluZ0NvbnRleHQgOiBzY29wZS5vdmVycmlkZUNvbnRleHQpO1xuICAgICAgICBjb25zdCBzb3VyY2VFeHByZXNzaW9uID0gdGhpcy5zb3VyY2VFeHByZXNzaW9uO1xuICAgICAgICBpZiAoc291cmNlRXhwcmVzc2lvbi5iaW5kKSB7XG4gICAgICAgICAgICBzb3VyY2VFeHByZXNzaW9uLmJpbmQoZmxhZ3MsIHNjb3BlLCB0aGlzLmludGVyY2VwdG9yKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBzb3VyY2VFeHByZXNzaW9uIG1pZ2h0IGhhdmUgYmVlbiBjaGFuZ2VkIGR1cmluZyBiaW5kXG4gICAgICAgIHRoaXMudGFyZ2V0W3RoaXMudGFyZ2V0UHJvcGVydHldID0gdGhpcy5zb3VyY2VFeHByZXNzaW9uLmV2YWx1YXRlKGZsYWdzIHwgNDA5NiAvKiBmcm9tQmluZCAqLywgc2NvcGUsIHRoaXMubG9jYXRvciwgcGFydCk7XG4gICAgICAgIHRoaXMuc291cmNlRXhwcmVzc2lvbi5jb25uZWN0KGZsYWdzLCBzY29wZSwgdGhpcy5pbnRlcmNlcHRvciwgcGFydCk7XG4gICAgICAgIC8vIGFkZCBpc0JvdW5kIGZsYWcgYW5kIHJlbW92ZSBpc0JpbmRpbmcgZmxhZ1xuICAgICAgICB0aGlzLiRzdGF0ZSB8PSA0IC8qIGlzQm91bmQgKi87XG4gICAgICAgIHRoaXMuJHN0YXRlICY9IH4xIC8qIGlzQmluZGluZyAqLztcbiAgICB9XG4gICAgJHVuYmluZChmbGFncykge1xuICAgICAgICBpZiAoISh0aGlzLiRzdGF0ZSAmIDQgLyogaXNCb3VuZCAqLykpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBhZGQgaXNVbmJpbmRpbmcgZmxhZ1xuICAgICAgICB0aGlzLiRzdGF0ZSB8PSAyIC8qIGlzVW5iaW5kaW5nICovO1xuICAgICAgICBjb25zdCBzb3VyY2VFeHByZXNzaW9uID0gdGhpcy5zb3VyY2VFeHByZXNzaW9uO1xuICAgICAgICBpZiAoc291cmNlRXhwcmVzc2lvbi51bmJpbmQpIHtcbiAgICAgICAgICAgIHNvdXJjZUV4cHJlc3Npb24udW5iaW5kKGZsYWdzLCB0aGlzLiRzY29wZSwgdGhpcy5pbnRlcmNlcHRvcik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4kc2NvcGUgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMuaW50ZXJjZXB0b3IudW5vYnNlcnZlKHRydWUpO1xuICAgICAgICAvLyByZW1vdmUgaXNCb3VuZCBhbmQgaXNVbmJpbmRpbmcgZmxhZ3NcbiAgICAgICAgdGhpcy4kc3RhdGUgJj0gfig0IC8qIGlzQm91bmQgKi8gfCAyIC8qIGlzVW5iaW5kaW5nICovKTtcbiAgICB9XG59O1xuTGV0QmluZGluZyA9IF9fZGVjb3JhdGUoW1xuICAgIGNvbm5lY3RhYmxlKCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3QsIFN0cmluZywgT2JqZWN0LCBPYmplY3QsIEJvb2xlYW5dKVxuXSwgTGV0QmluZGluZyk7XG5leHBvcnQgeyBMZXRCaW5kaW5nIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1sZXQtYmluZGluZy5qcy5tYXAiLCJpbXBvcnQgeyBfX2RlY29yYXRlLCBfX21ldGFkYXRhIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBJU2VydmljZUxvY2F0b3IsIFJlcG9ydGVyLCB9IGZyb20gJ0BhdXJlbGlhL2tlcm5lbCc7XG5pbXBvcnQgeyBCaW5kaW5nTW9kZSwgfSBmcm9tICcuLi9mbGFncyc7XG5pbXBvcnQgeyBJTGlmZWN5Y2xlIH0gZnJvbSAnLi4vbGlmZWN5Y2xlJztcbmltcG9ydCB7IElPYnNlcnZlckxvY2F0b3IgfSBmcm9tICcuLi9vYnNlcnZhdGlvbi9vYnNlcnZlci1sb2NhdG9yJztcbmltcG9ydCB7IGhhc0JpbmQsIGhhc1VuYmluZCwgfSBmcm9tICcuL2FzdCc7XG5pbXBvcnQgeyBjb25uZWN0YWJsZSwgfSBmcm9tICcuL2Nvbm5lY3RhYmxlJztcbi8vIEJpbmRpbmdNb2RlIGlzIG5vdCBhIGNvbnN0IGVudW0gKGFuZCB0aGVyZWZvcmUgbm90IGlubGluZWQpLCBzbyBhc3NpZ25pbmcgdGhlbSB0byBhIHZhcmlhYmxlIHRvIHNhdmUgYSBtZW1iZXIgYWNjZXNzb3IgaXMgYSBtaW5vciBwZXJmIHR3ZWFrXG5jb25zdCB7IG9uZVRpbWUsIHRvVmlldywgZnJvbVZpZXcgfSA9IEJpbmRpbmdNb2RlO1xuLy8gcHJlLWNvbWJpbmluZyBmbGFncyBmb3IgYml0d2lzZSBjaGVja3MgaXMgYSBtaW5vciBwZXJmIHR3ZWFrXG5jb25zdCB0b1ZpZXdPck9uZVRpbWUgPSB0b1ZpZXcgfCBvbmVUaW1lO1xubGV0IFByb3BlcnR5QmluZGluZyA9IGNsYXNzIFByb3BlcnR5QmluZGluZyB7XG4gICAgY29uc3RydWN0b3Ioc291cmNlRXhwcmVzc2lvbiwgdGFyZ2V0LCB0YXJnZXRQcm9wZXJ0eSwgbW9kZSwgb2JzZXJ2ZXJMb2NhdG9yLCBsb2NhdG9yKSB7XG4gICAgICAgIHRoaXMuc291cmNlRXhwcmVzc2lvbiA9IHNvdXJjZUV4cHJlc3Npb247XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xuICAgICAgICB0aGlzLnRhcmdldFByb3BlcnR5ID0gdGFyZ2V0UHJvcGVydHk7XG4gICAgICAgIHRoaXMubW9kZSA9IG1vZGU7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJMb2NhdG9yID0gb2JzZXJ2ZXJMb2NhdG9yO1xuICAgICAgICB0aGlzLmxvY2F0b3IgPSBsb2NhdG9yO1xuICAgICAgICB0aGlzLmludGVyY2VwdG9yID0gdGhpcztcbiAgICAgICAgdGhpcy4kc3RhdGUgPSAwIC8qIG5vbmUgKi87XG4gICAgICAgIHRoaXMuJHNjb3BlID0gdm9pZCAwO1xuICAgICAgICB0aGlzLnRhcmdldE9ic2VydmVyID0gdm9pZCAwO1xuICAgICAgICB0aGlzLnBlcnNpc3RlbnRGbGFncyA9IDAgLyogbm9uZSAqLztcbiAgICAgICAgY29ubmVjdGFibGUuYXNzaWduSWRUbyh0aGlzKTtcbiAgICAgICAgdGhpcy4kbGlmZWN5Y2xlID0gbG9jYXRvci5nZXQoSUxpZmVjeWNsZSk7XG4gICAgfVxuICAgIDtcbiAgICB1cGRhdGVUYXJnZXQodmFsdWUsIGZsYWdzKSB7XG4gICAgICAgIGZsYWdzIHw9IHRoaXMucGVyc2lzdGVudEZsYWdzO1xuICAgICAgICB0aGlzLnRhcmdldE9ic2VydmVyLnNldFZhbHVlKHZhbHVlLCBmbGFncyk7XG4gICAgfVxuICAgIHVwZGF0ZVNvdXJjZSh2YWx1ZSwgZmxhZ3MpIHtcbiAgICAgICAgZmxhZ3MgfD0gdGhpcy5wZXJzaXN0ZW50RmxhZ3M7XG4gICAgICAgIHRoaXMuc291cmNlRXhwcmVzc2lvbi5hc3NpZ24oZmxhZ3MsIHRoaXMuJHNjb3BlLCB0aGlzLmxvY2F0b3IsIHZhbHVlLCB0aGlzLnBhcnQpO1xuICAgIH1cbiAgICBoYW5kbGVDaGFuZ2UobmV3VmFsdWUsIF9wcmV2aW91c1ZhbHVlLCBmbGFncykge1xuICAgICAgICBpZiAoKHRoaXMuJHN0YXRlICYgNCAvKiBpc0JvdW5kICovKSA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGZsYWdzIHw9IHRoaXMucGVyc2lzdGVudEZsYWdzO1xuICAgICAgICBpZiAoKGZsYWdzICYgMTYgLyogdXBkYXRlVGFyZ2V0SW5zdGFuY2UgKi8pID4gMCkge1xuICAgICAgICAgICAgY29uc3QgcHJldmlvdXNWYWx1ZSA9IHRoaXMudGFyZ2V0T2JzZXJ2ZXIuZ2V0VmFsdWUoKTtcbiAgICAgICAgICAgIC8vIGlmIHRoZSBvbmx5IG9ic2VydmFibGUgaXMgYW4gQWNjZXNzU2NvcGUgdGhlbiB3ZSBjYW4gYXNzdW1lIHRoZSBwYXNzZWQtaW4gbmV3VmFsdWUgaXMgdGhlIGNvcnJlY3QgYW5kIGxhdGVzdCB2YWx1ZVxuICAgICAgICAgICAgaWYgKHRoaXMuc291cmNlRXhwcmVzc2lvbi4ka2luZCAhPT0gMTAwODIgLyogQWNjZXNzU2NvcGUgKi8gfHwgdGhpcy5vYnNlcnZlclNsb3RzID4gMSkge1xuICAgICAgICAgICAgICAgIG5ld1ZhbHVlID0gdGhpcy5zb3VyY2VFeHByZXNzaW9uLmV2YWx1YXRlKGZsYWdzLCB0aGlzLiRzY29wZSwgdGhpcy5sb2NhdG9yLCB0aGlzLnBhcnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG5ld1ZhbHVlICE9PSBwcmV2aW91c1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnRlcmNlcHRvci51cGRhdGVUYXJnZXQobmV3VmFsdWUsIGZsYWdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgodGhpcy5tb2RlICYgb25lVGltZSkgPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLnZlcnNpb24rKztcbiAgICAgICAgICAgICAgICB0aGlzLnNvdXJjZUV4cHJlc3Npb24uY29ubmVjdChmbGFncywgdGhpcy4kc2NvcGUsIHRoaXMuaW50ZXJjZXB0b3IsIHRoaXMucGFydCk7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnRlcmNlcHRvci51bm9ic2VydmUoZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICgoZmxhZ3MgJiAzMiAvKiB1cGRhdGVTb3VyY2VFeHByZXNzaW9uICovKSA+IDApIHtcbiAgICAgICAgICAgIGlmIChuZXdWYWx1ZSAhPT0gdGhpcy5zb3VyY2VFeHByZXNzaW9uLmV2YWx1YXRlKGZsYWdzLCB0aGlzLiRzY29wZSwgdGhpcy5sb2NhdG9yLCB0aGlzLnBhcnQpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnRlcmNlcHRvci51cGRhdGVTb3VyY2UobmV3VmFsdWUsIGZsYWdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBSZXBvcnRlci5lcnJvcigxNSwgZmxhZ3MpO1xuICAgIH1cbiAgICAkYmluZChmbGFncywgc2NvcGUsIHBhcnQpIHtcbiAgICAgICAgaWYgKHRoaXMuJHN0YXRlICYgNCAvKiBpc0JvdW5kICovKSB7XG4gICAgICAgICAgICBpZiAodGhpcy4kc2NvcGUgPT09IHNjb3BlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pbnRlcmNlcHRvci4kdW5iaW5kKGZsYWdzIHwgNDA5NiAvKiBmcm9tQmluZCAqLyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gYWRkIGlzQmluZGluZyBmbGFnXG4gICAgICAgIHRoaXMuJHN0YXRlIHw9IDEgLyogaXNCaW5kaW5nICovO1xuICAgICAgICAvLyBGb3JjZSBwcm9wZXJ0eSBiaW5kaW5nIHRvIGFsd2F5cyBiZSBzdHJpY3RcbiAgICAgICAgZmxhZ3MgfD0gNCAvKiBpc1N0cmljdEJpbmRpbmdTdHJhdGVneSAqLztcbiAgICAgICAgLy8gU3RvcmUgZmxhZ3Mgd2hpY2ggd2UgY2FuIG9ubHkgcmVjZWl2ZSBkdXJpbmcgJGJpbmQgYW5kIG5lZWQgdG8gcGFzcyBvblxuICAgICAgICAvLyB0byB0aGUgQVNUIGR1cmluZyBldmFsdWF0ZS9jb25uZWN0L2Fzc2lnblxuICAgICAgICB0aGlzLnBlcnNpc3RlbnRGbGFncyA9IGZsYWdzICYgMjA4MDM3NDc5OSAvKiBwZXJzaXN0ZW50QmluZGluZ0ZsYWdzICovO1xuICAgICAgICB0aGlzLiRzY29wZSA9IHNjb3BlO1xuICAgICAgICB0aGlzLnBhcnQgPSBwYXJ0O1xuICAgICAgICBsZXQgc291cmNlRXhwcmVzc2lvbiA9IHRoaXMuc291cmNlRXhwcmVzc2lvbjtcbiAgICAgICAgaWYgKGhhc0JpbmQoc291cmNlRXhwcmVzc2lvbikpIHtcbiAgICAgICAgICAgIHNvdXJjZUV4cHJlc3Npb24uYmluZChmbGFncywgc2NvcGUsIHRoaXMuaW50ZXJjZXB0b3IpO1xuICAgICAgICB9XG4gICAgICAgIGxldCB0YXJnZXRPYnNlcnZlciA9IHRoaXMudGFyZ2V0T2JzZXJ2ZXI7XG4gICAgICAgIGlmICghdGFyZ2V0T2JzZXJ2ZXIpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm1vZGUgJiBmcm9tVmlldykge1xuICAgICAgICAgICAgICAgIHRhcmdldE9ic2VydmVyID0gdGhpcy50YXJnZXRPYnNlcnZlciA9IHRoaXMub2JzZXJ2ZXJMb2NhdG9yLmdldE9ic2VydmVyKGZsYWdzLCB0aGlzLnRhcmdldCwgdGhpcy50YXJnZXRQcm9wZXJ0eSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0YXJnZXRPYnNlcnZlciA9IHRoaXMudGFyZ2V0T2JzZXJ2ZXIgPSB0aGlzLm9ic2VydmVyTG9jYXRvci5nZXRBY2Nlc3NvcihmbGFncywgdGhpcy50YXJnZXQsIHRoaXMudGFyZ2V0UHJvcGVydHkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm1vZGUgIT09IEJpbmRpbmdNb2RlLm9uZVRpbWUgJiYgdGFyZ2V0T2JzZXJ2ZXIuYmluZCkge1xuICAgICAgICAgICAgdGFyZ2V0T2JzZXJ2ZXIuYmluZChmbGFncyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZHVyaW5nIGJpbmQsIGJpbmRpbmcgYmVoYXZpb3IgbWlnaHQgaGF2ZSBjaGFuZ2VkIHNvdXJjZUV4cHJlc3Npb25cbiAgICAgICAgc291cmNlRXhwcmVzc2lvbiA9IHRoaXMuc291cmNlRXhwcmVzc2lvbjtcbiAgICAgICAgaWYgKHRoaXMubW9kZSAmIHRvVmlld09yT25lVGltZSkge1xuICAgICAgICAgICAgdGhpcy5pbnRlcmNlcHRvci51cGRhdGVUYXJnZXQoc291cmNlRXhwcmVzc2lvbi5ldmFsdWF0ZShmbGFncywgc2NvcGUsIHRoaXMubG9jYXRvciwgcGFydCksIGZsYWdzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5tb2RlICYgdG9WaWV3KSB7XG4gICAgICAgICAgICBzb3VyY2VFeHByZXNzaW9uLmNvbm5lY3QoZmxhZ3MsIHNjb3BlLCB0aGlzLmludGVyY2VwdG9yLCBwYXJ0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5tb2RlICYgZnJvbVZpZXcpIHtcbiAgICAgICAgICAgIHRhcmdldE9ic2VydmVyLnN1YnNjcmliZSh0aGlzLmludGVyY2VwdG9yKTtcbiAgICAgICAgICAgIGlmICgodGhpcy5tb2RlICYgdG9WaWV3KSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaW50ZXJjZXB0b3IudXBkYXRlU291cmNlKHRhcmdldE9ic2VydmVyLmdldFZhbHVlKCksIGZsYWdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRhcmdldE9ic2VydmVyW3RoaXMuaWRdIHw9IDMyIC8qIHVwZGF0ZVNvdXJjZUV4cHJlc3Npb24gKi87XG4gICAgICAgIH1cbiAgICAgICAgLy8gYWRkIGlzQm91bmQgZmxhZyBhbmQgcmVtb3ZlIGlzQmluZGluZyBmbGFnXG4gICAgICAgIHRoaXMuJHN0YXRlIHw9IDQgLyogaXNCb3VuZCAqLztcbiAgICAgICAgdGhpcy4kc3RhdGUgJj0gfjEgLyogaXNCaW5kaW5nICovO1xuICAgIH1cbiAgICAkdW5iaW5kKGZsYWdzKSB7XG4gICAgICAgIGlmICghKHRoaXMuJHN0YXRlICYgNCAvKiBpc0JvdW5kICovKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIGFkZCBpc1VuYmluZGluZyBmbGFnXG4gICAgICAgIHRoaXMuJHN0YXRlIHw9IDIgLyogaXNVbmJpbmRpbmcgKi87XG4gICAgICAgIC8vIGNsZWFyIHBlcnNpc3RlbnQgZmxhZ3NcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW50RmxhZ3MgPSAwIC8qIG5vbmUgKi87XG4gICAgICAgIGlmIChoYXNVbmJpbmQodGhpcy5zb3VyY2VFeHByZXNzaW9uKSkge1xuICAgICAgICAgICAgdGhpcy5zb3VyY2VFeHByZXNzaW9uLnVuYmluZChmbGFncywgdGhpcy4kc2NvcGUsIHRoaXMuaW50ZXJjZXB0b3IpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuJHNjb3BlID0gdm9pZCAwO1xuICAgICAgICBpZiAodGhpcy50YXJnZXRPYnNlcnZlci51bmJpbmQpIHtcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0T2JzZXJ2ZXIudW5iaW5kKGZsYWdzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy50YXJnZXRPYnNlcnZlci51bnN1YnNjcmliZSkge1xuICAgICAgICAgICAgdGhpcy50YXJnZXRPYnNlcnZlci51bnN1YnNjcmliZSh0aGlzLmludGVyY2VwdG9yKTtcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0T2JzZXJ2ZXJbdGhpcy5pZF0gJj0gfjMyIC8qIHVwZGF0ZVNvdXJjZUV4cHJlc3Npb24gKi87XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pbnRlcmNlcHRvci51bm9ic2VydmUodHJ1ZSk7XG4gICAgICAgIC8vIHJlbW92ZSBpc0JvdW5kIGFuZCBpc1VuYmluZGluZyBmbGFnc1xuICAgICAgICB0aGlzLiRzdGF0ZSAmPSB+KDQgLyogaXNCb3VuZCAqLyB8IDIgLyogaXNVbmJpbmRpbmcgKi8pO1xuICAgIH1cbn07XG5Qcm9wZXJ0eUJpbmRpbmcgPSBfX2RlY29yYXRlKFtcbiAgICBjb25uZWN0YWJsZSgpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0LCBPYmplY3QsIFN0cmluZywgTnVtYmVyLCBPYmplY3QsIE9iamVjdF0pXG5dLCBQcm9wZXJ0eUJpbmRpbmcpO1xuZXhwb3J0IHsgUHJvcGVydHlCaW5kaW5nIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wcm9wZXJ0eS1iaW5kaW5nLmpzLm1hcCIsImltcG9ydCB7IGhhc0JpbmQsIGhhc1VuYmluZCwgfSBmcm9tICcuL2FzdCc7XG5leHBvcnQgY2xhc3MgUmVmQmluZGluZyB7XG4gICAgY29uc3RydWN0b3Ioc291cmNlRXhwcmVzc2lvbiwgdGFyZ2V0LCBsb2NhdG9yKSB7XG4gICAgICAgIHRoaXMuc291cmNlRXhwcmVzc2lvbiA9IHNvdXJjZUV4cHJlc3Npb247XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xuICAgICAgICB0aGlzLmxvY2F0b3IgPSBsb2NhdG9yO1xuICAgICAgICB0aGlzLmludGVyY2VwdG9yID0gdGhpcztcbiAgICAgICAgdGhpcy4kc3RhdGUgPSAwIC8qIG5vbmUgKi87XG4gICAgICAgIHRoaXMuJHNjb3BlID0gdm9pZCAwO1xuICAgIH1cbiAgICAkYmluZChmbGFncywgc2NvcGUsIHBhcnQpIHtcbiAgICAgICAgaWYgKHRoaXMuJHN0YXRlICYgNCAvKiBpc0JvdW5kICovKSB7XG4gICAgICAgICAgICBpZiAodGhpcy4kc2NvcGUgPT09IHNjb3BlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pbnRlcmNlcHRvci4kdW5iaW5kKGZsYWdzIHwgNDA5NiAvKiBmcm9tQmluZCAqLyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gYWRkIGlzQmluZGluZyBmbGFnXG4gICAgICAgIHRoaXMuJHN0YXRlIHw9IDEgLyogaXNCaW5kaW5nICovO1xuICAgICAgICB0aGlzLiRzY29wZSA9IHNjb3BlO1xuICAgICAgICB0aGlzLnBhcnQgPSBwYXJ0O1xuICAgICAgICBpZiAoaGFzQmluZCh0aGlzLnNvdXJjZUV4cHJlc3Npb24pKSB7XG4gICAgICAgICAgICB0aGlzLnNvdXJjZUV4cHJlc3Npb24uYmluZChmbGFncywgc2NvcGUsIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc291cmNlRXhwcmVzc2lvbi5hc3NpZ24oZmxhZ3MgfCAzMiAvKiB1cGRhdGVTb3VyY2VFeHByZXNzaW9uICovLCB0aGlzLiRzY29wZSwgdGhpcy5sb2NhdG9yLCB0aGlzLnRhcmdldCwgcGFydCk7XG4gICAgICAgIC8vIGFkZCBpc0JvdW5kIGZsYWcgYW5kIHJlbW92ZSBpc0JpbmRpbmcgZmxhZ1xuICAgICAgICB0aGlzLiRzdGF0ZSB8PSA0IC8qIGlzQm91bmQgKi87XG4gICAgICAgIHRoaXMuJHN0YXRlICY9IH4xIC8qIGlzQmluZGluZyAqLztcbiAgICB9XG4gICAgJHVuYmluZChmbGFncykge1xuICAgICAgICBpZiAoISh0aGlzLiRzdGF0ZSAmIDQgLyogaXNCb3VuZCAqLykpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBhZGQgaXNVbmJpbmRpbmcgZmxhZ1xuICAgICAgICB0aGlzLiRzdGF0ZSB8PSAyIC8qIGlzVW5iaW5kaW5nICovO1xuICAgICAgICBsZXQgc291cmNlRXhwcmVzc2lvbiA9IHRoaXMuc291cmNlRXhwcmVzc2lvbjtcbiAgICAgICAgaWYgKHNvdXJjZUV4cHJlc3Npb24uZXZhbHVhdGUoZmxhZ3MsIHRoaXMuJHNjb3BlLCB0aGlzLmxvY2F0b3IsIHRoaXMucGFydCkgPT09IHRoaXMudGFyZ2V0KSB7XG4gICAgICAgICAgICBzb3VyY2VFeHByZXNzaW9uLmFzc2lnbihmbGFncywgdGhpcy4kc2NvcGUsIHRoaXMubG9jYXRvciwgbnVsbCwgdGhpcy5wYXJ0KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBzb3VyY2UgZXhwcmVzc2lvbiBtaWdodCBoYXZlIGJlZW4gbW9kaWZpZWQgZHVycmluZyBhc3NpZ24sIHZpYSBhIEJCXG4gICAgICAgIHNvdXJjZUV4cHJlc3Npb24gPSB0aGlzLnNvdXJjZUV4cHJlc3Npb247XG4gICAgICAgIGlmIChoYXNVbmJpbmQoc291cmNlRXhwcmVzc2lvbikpIHtcbiAgICAgICAgICAgIHNvdXJjZUV4cHJlc3Npb24udW5iaW5kKGZsYWdzLCB0aGlzLiRzY29wZSwgdGhpcy5pbnRlcmNlcHRvcik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4kc2NvcGUgPSB2b2lkIDA7XG4gICAgICAgIC8vIHJlbW92ZSBpc0JvdW5kIGFuZCBpc1VuYmluZGluZyBmbGFnc1xuICAgICAgICB0aGlzLiRzdGF0ZSAmPSB+KDQgLyogaXNCb3VuZCAqLyB8IDIgLyogaXNVbmJpbmRpbmcgKi8pO1xuICAgIH1cbiAgICBvYnNlcnZlUHJvcGVydHkoZmxhZ3MsIG9iaiwgcHJvcGVydHlOYW1lKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaGFuZGxlQ2hhbmdlKG5ld1ZhbHVlLCBwcmV2aW91c1ZhbHVlLCBmbGFncykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVmLWJpbmRpbmcuanMubWFwIiwiaW1wb3J0IHsgREkgfSBmcm9tICdAYXVyZWxpYS9rZXJuZWwnO1xuaW1wb3J0IHsgTGlmZWN5Y2xlIH0gZnJvbSAnLi9saWZlY3ljbGUnO1xuaW1wb3J0IHsgU3RhcnRUYXNrTWFuYWdlciB9IGZyb20gJy4vbGlmZWN5Y2xlLXRhc2snO1xuaW1wb3J0IHsgT2JzZXJ2ZXJMb2NhdG9yIH0gZnJvbSAnLi9vYnNlcnZhdGlvbi9vYnNlcnZlci1sb2NhdG9yJztcbmltcG9ydCB7IENhbGxCaW5kaW5nUmVuZGVyZXIsIEN1c3RvbUF0dHJpYnV0ZVJlbmRlcmVyLCBDdXN0b21FbGVtZW50UmVuZGVyZXIsIEludGVycG9sYXRpb25CaW5kaW5nUmVuZGVyZXIsIEl0ZXJhdG9yQmluZGluZ1JlbmRlcmVyLCBMZXRFbGVtZW50UmVuZGVyZXIsIFByb3BlcnR5QmluZGluZ1JlbmRlcmVyLCBSZWZCaW5kaW5nUmVuZGVyZXIsIFJlbmRlcmVyLCBTZXRQcm9wZXJ0eVJlbmRlcmVyLCBUZW1wbGF0ZUNvbnRyb2xsZXJSZW5kZXJlciB9IGZyb20gJy4vcmVuZGVyZXInO1xuaW1wb3J0IHsgRnJvbVZpZXdCaW5kaW5nQmVoYXZpb3IsIE9uZVRpbWVCaW5kaW5nQmVoYXZpb3IsIFRvVmlld0JpbmRpbmdCZWhhdmlvciwgVHdvV2F5QmluZGluZ0JlaGF2aW9yIH0gZnJvbSAnLi9yZXNvdXJjZXMvYmluZGluZy1iZWhhdmlvcnMvYmluZGluZy1tb2RlJztcbmltcG9ydCB7IERlYm91bmNlQmluZGluZ0JlaGF2aW9yIH0gZnJvbSAnLi9yZXNvdXJjZXMvYmluZGluZy1iZWhhdmlvcnMvZGVib3VuY2UnO1xuaW1wb3J0IHsgU2lnbmFsQmluZGluZ0JlaGF2aW9yIH0gZnJvbSAnLi9yZXNvdXJjZXMvYmluZGluZy1iZWhhdmlvcnMvc2lnbmFscyc7XG5pbXBvcnQgeyBUaHJvdHRsZUJpbmRpbmdCZWhhdmlvciB9IGZyb20gJy4vcmVzb3VyY2VzL2JpbmRpbmctYmVoYXZpb3JzL3Rocm90dGxlJztcbmltcG9ydCB7IEZyZXF1ZW50TXV0YXRpb25zLCBJbmZyZXF1ZW50TXV0YXRpb25zLCBPYnNlcnZlU2hhbGxvdyB9IGZyb20gJy4vcmVzb3VyY2VzL2N1c3RvbS1hdHRyaWJ1dGVzL2ZsYWdzJztcbmltcG9ydCB7IEVsc2UsIElmIH0gZnJvbSAnLi9yZXNvdXJjZXMvY3VzdG9tLWF0dHJpYnV0ZXMvaWYnO1xuaW1wb3J0IHsgUmVwZWF0IH0gZnJvbSAnLi9yZXNvdXJjZXMvY3VzdG9tLWF0dHJpYnV0ZXMvcmVwZWF0JztcbmltcG9ydCB7IFJlcGxhY2VhYmxlIH0gZnJvbSAnLi9yZXNvdXJjZXMvY3VzdG9tLWF0dHJpYnV0ZXMvcmVwbGFjZWFibGUnO1xuaW1wb3J0IHsgV2l0aCB9IGZyb20gJy4vcmVzb3VyY2VzL2N1c3RvbS1hdHRyaWJ1dGVzL3dpdGgnO1xuaW1wb3J0IHsgU2FuaXRpemVWYWx1ZUNvbnZlcnRlciB9IGZyb20gJy4vcmVzb3VyY2VzL3ZhbHVlLWNvbnZlcnRlcnMvc2FuaXRpemUnO1xuaW1wb3J0IHsgVmlld1ZhbHVlQ29udmVydGVyIH0gZnJvbSAnLi9yZXNvdXJjZXMvdmFsdWUtY29udmVydGVycy92aWV3JztcbmltcG9ydCB7IFZpZXdMb2NhdG9yIH0gZnJvbSAnLi90ZW1wbGF0aW5nL3ZpZXcnO1xuaW1wb3J0IHsgTm93IH0gZnJvbSAnQGF1cmVsaWEvc2NoZWR1bGVyJztcbmV4cG9ydCBjb25zdCBJT2JzZXJ2ZXJMb2NhdG9yUmVnaXN0cmF0aW9uID0gT2JzZXJ2ZXJMb2NhdG9yO1xuZXhwb3J0IGNvbnN0IElMaWZlY3ljbGVSZWdpc3RyYXRpb24gPSBMaWZlY3ljbGU7XG5leHBvcnQgY29uc3QgSVJlbmRlcmVyUmVnaXN0cmF0aW9uID0gUmVuZGVyZXI7XG5leHBvcnQgY29uc3QgSVN0YXJ0VGFza01hbmFnZXJSZWdpc3RyYXRpb24gPSBTdGFydFRhc2tNYW5hZ2VyO1xuZXhwb3J0IGNvbnN0IElWaWV3TG9jYXRvclJlZ2lzdHJhdGlvbiA9IFZpZXdMb2NhdG9yO1xuLyoqXG4gKiBEZWZhdWx0IGltcGxlbWVudGF0aW9ucyBmb3IgdGhlIGZvbGxvd2luZyBpbnRlcmZhY2VzOlxuICogLSBgSU9ic2VydmVyTG9jYXRvcmBcbiAqIC0gYElMaWZlY3ljbGVgXG4gKiAtIGBJUmVuZGVyZXJgXG4gKiAtIGBJU3RhcnRUYXNrTWFuYWdlcmBcbiAqIC0gYElWaWV3TG9jYXRvcmBcbiAqIC0gYElDbG9ja1JlZ2lzdHJhdGlvbmBcbiAqIC0gYElTY2hlZHVsZXJSZWdpc3RyYXRpb25gXG4gKi9cbmV4cG9ydCBjb25zdCBEZWZhdWx0Q29tcG9uZW50cyA9IFtcbiAgICBJT2JzZXJ2ZXJMb2NhdG9yUmVnaXN0cmF0aW9uLFxuICAgIElMaWZlY3ljbGVSZWdpc3RyYXRpb24sXG4gICAgSVJlbmRlcmVyUmVnaXN0cmF0aW9uLFxuICAgIElTdGFydFRhc2tNYW5hZ2VyUmVnaXN0cmF0aW9uLFxuICAgIElWaWV3TG9jYXRvclJlZ2lzdHJhdGlvbixcbiAgICBOb3csXG5dO1xuZXhwb3J0IGNvbnN0IEZyZXF1ZW50TXV0YXRpb25zUmVnaXN0cmF0aW9uID0gRnJlcXVlbnRNdXRhdGlvbnM7XG5leHBvcnQgY29uc3QgSW5mcmVxdWVudE11dGF0aW9uc1JlZ2lzdHJhdGlvbiA9IEluZnJlcXVlbnRNdXRhdGlvbnM7XG5leHBvcnQgY29uc3QgT2JzZXJ2ZVNoYWxsb3dSZWdpc3RyYXRpb24gPSBPYnNlcnZlU2hhbGxvdztcbmV4cG9ydCBjb25zdCBJZlJlZ2lzdHJhdGlvbiA9IElmO1xuZXhwb3J0IGNvbnN0IEVsc2VSZWdpc3RyYXRpb24gPSBFbHNlO1xuZXhwb3J0IGNvbnN0IFJlcGVhdFJlZ2lzdHJhdGlvbiA9IFJlcGVhdDtcbmV4cG9ydCBjb25zdCBSZXBsYWNlYWJsZVJlZ2lzdHJhdGlvbiA9IFJlcGxhY2VhYmxlO1xuZXhwb3J0IGNvbnN0IFdpdGhSZWdpc3RyYXRpb24gPSBXaXRoO1xuZXhwb3J0IGNvbnN0IFNhbml0aXplVmFsdWVDb252ZXJ0ZXJSZWdpc3RyYXRpb24gPSBTYW5pdGl6ZVZhbHVlQ29udmVydGVyO1xuZXhwb3J0IGNvbnN0IFZpZXdWYWx1ZUNvbnZlcnRlclJlZ2lzdHJhdGlvbiA9IFZpZXdWYWx1ZUNvbnZlcnRlcjtcbmV4cG9ydCBjb25zdCBEZWJvdW5jZUJpbmRpbmdCZWhhdmlvclJlZ2lzdHJhdGlvbiA9IERlYm91bmNlQmluZGluZ0JlaGF2aW9yO1xuZXhwb3J0IGNvbnN0IE9uZVRpbWVCaW5kaW5nQmVoYXZpb3JSZWdpc3RyYXRpb24gPSBPbmVUaW1lQmluZGluZ0JlaGF2aW9yO1xuZXhwb3J0IGNvbnN0IFRvVmlld0JpbmRpbmdCZWhhdmlvclJlZ2lzdHJhdGlvbiA9IFRvVmlld0JpbmRpbmdCZWhhdmlvcjtcbmV4cG9ydCBjb25zdCBGcm9tVmlld0JpbmRpbmdCZWhhdmlvclJlZ2lzdHJhdGlvbiA9IEZyb21WaWV3QmluZGluZ0JlaGF2aW9yO1xuZXhwb3J0IGNvbnN0IFNpZ25hbEJpbmRpbmdCZWhhdmlvclJlZ2lzdHJhdGlvbiA9IFNpZ25hbEJpbmRpbmdCZWhhdmlvcjtcbmV4cG9ydCBjb25zdCBUaHJvdHRsZUJpbmRpbmdCZWhhdmlvclJlZ2lzdHJhdGlvbiA9IFRocm90dGxlQmluZGluZ0JlaGF2aW9yO1xuZXhwb3J0IGNvbnN0IFR3b1dheUJpbmRpbmdCZWhhdmlvclJlZ2lzdHJhdGlvbiA9IFR3b1dheUJpbmRpbmdCZWhhdmlvcjtcbi8qKlxuICogRGVmYXVsdCByZXNvdXJjZXM6XG4gKiAtIFRlbXBsYXRlIGNvbnRyb2xsZXJzIChgaWZgL2BlbHNlYCwgYHJlcGVhdGAsIGByZXBsYWNlYWJsZWAsIGB3aXRoYClcbiAqIC0gVmFsdWUgQ29udmVydGVycyAoYHNhbml0aXplYClcbiAqIC0gQmluZGluZyBCZWhhdmlvcnMgKGBvbmVUaW1lYCwgYHRvVmlld2AsIGBmcm9tVmlld2AsIGB0d29XYXlgLCBgc2lnbmFsYCwgYGRlYm91bmNlYCwgYHRocm90dGxlYClcbiAqL1xuZXhwb3J0IGNvbnN0IERlZmF1bHRSZXNvdXJjZXMgPSBbXG4gICAgRnJlcXVlbnRNdXRhdGlvbnNSZWdpc3RyYXRpb24sXG4gICAgSW5mcmVxdWVudE11dGF0aW9uc1JlZ2lzdHJhdGlvbixcbiAgICBPYnNlcnZlU2hhbGxvd1JlZ2lzdHJhdGlvbixcbiAgICBJZlJlZ2lzdHJhdGlvbixcbiAgICBFbHNlUmVnaXN0cmF0aW9uLFxuICAgIFJlcGVhdFJlZ2lzdHJhdGlvbixcbiAgICBSZXBsYWNlYWJsZVJlZ2lzdHJhdGlvbixcbiAgICBXaXRoUmVnaXN0cmF0aW9uLFxuICAgIFNhbml0aXplVmFsdWVDb252ZXJ0ZXJSZWdpc3RyYXRpb24sXG4gICAgVmlld1ZhbHVlQ29udmVydGVyUmVnaXN0cmF0aW9uLFxuICAgIERlYm91bmNlQmluZGluZ0JlaGF2aW9yUmVnaXN0cmF0aW9uLFxuICAgIE9uZVRpbWVCaW5kaW5nQmVoYXZpb3JSZWdpc3RyYXRpb24sXG4gICAgVG9WaWV3QmluZGluZ0JlaGF2aW9yUmVnaXN0cmF0aW9uLFxuICAgIEZyb21WaWV3QmluZGluZ0JlaGF2aW9yUmVnaXN0cmF0aW9uLFxuICAgIFNpZ25hbEJpbmRpbmdCZWhhdmlvclJlZ2lzdHJhdGlvbixcbiAgICBUaHJvdHRsZUJpbmRpbmdCZWhhdmlvclJlZ2lzdHJhdGlvbixcbiAgICBUd29XYXlCaW5kaW5nQmVoYXZpb3JSZWdpc3RyYXRpb25cbl07XG5leHBvcnQgY29uc3QgQ2FsbEJpbmRpbmdSZW5kZXJlclJlZ2lzdHJhdGlvbiA9IENhbGxCaW5kaW5nUmVuZGVyZXI7XG5leHBvcnQgY29uc3QgQ3VzdG9tQXR0cmlidXRlUmVuZGVyZXJSZWdpc3RyYXRpb24gPSBDdXN0b21BdHRyaWJ1dGVSZW5kZXJlcjtcbmV4cG9ydCBjb25zdCBDdXN0b21FbGVtZW50UmVuZGVyZXJSZWdpc3RyYXRpb24gPSBDdXN0b21FbGVtZW50UmVuZGVyZXI7XG5leHBvcnQgY29uc3QgSW50ZXJwb2xhdGlvbkJpbmRpbmdSZW5kZXJlclJlZ2lzdHJhdGlvbiA9IEludGVycG9sYXRpb25CaW5kaW5nUmVuZGVyZXI7XG5leHBvcnQgY29uc3QgSXRlcmF0b3JCaW5kaW5nUmVuZGVyZXJSZWdpc3RyYXRpb24gPSBJdGVyYXRvckJpbmRpbmdSZW5kZXJlcjtcbmV4cG9ydCBjb25zdCBMZXRFbGVtZW50UmVuZGVyZXJSZWdpc3RyYXRpb24gPSBMZXRFbGVtZW50UmVuZGVyZXI7XG5leHBvcnQgY29uc3QgUHJvcGVydHlCaW5kaW5nUmVuZGVyZXJSZWdpc3RyYXRpb24gPSBQcm9wZXJ0eUJpbmRpbmdSZW5kZXJlcjtcbmV4cG9ydCBjb25zdCBSZWZCaW5kaW5nUmVuZGVyZXJSZWdpc3RyYXRpb24gPSBSZWZCaW5kaW5nUmVuZGVyZXI7XG5leHBvcnQgY29uc3QgU2V0UHJvcGVydHlSZW5kZXJlclJlZ2lzdHJhdGlvbiA9IFNldFByb3BlcnR5UmVuZGVyZXI7XG5leHBvcnQgY29uc3QgVGVtcGxhdGVDb250cm9sbGVyUmVuZGVyZXJSZWdpc3RyYXRpb24gPSBUZW1wbGF0ZUNvbnRyb2xsZXJSZW5kZXJlcjtcbi8qKlxuICogRGVmYXVsdCByZW5kZXJlcnMgZm9yOlxuICogLSBQcm9wZXJ0eUJpbmRpbmc6IGBiaW5kYCwgYG9uZS10aW1lYCwgYHRvLXZpZXdgLCBgZnJvbS12aWV3YCwgYHR3by13YXlgXG4gKiAtIEl0ZXJhdG9yQmluZGluZzogYGZvcmBcbiAqIC0gQ2FsbEJpbmRpbmc6IGBjYWxsYFxuICogLSBSZWZCaW5kaW5nOiBgcmVmYFxuICogLSBJbnRlcnBvbGF0aW9uQmluZGluZzogYCR7fWBcbiAqIC0gU2V0UHJvcGVydHlcbiAqIC0gYGN1c3RvbUVsZW1lbnRgIGh5ZHJhdGlvblxuICogLSBgY3VzdG9tQXR0cmlidXRlYCBoeWRyYXRpb25cbiAqIC0gYHRlbXBsYXRlQ29udHJvbGxlcmAgaHlkcmF0aW9uXG4gKiAtIGBsZXRgIGVsZW1lbnQgaHlkcmF0aW9uXG4gKi9cbmV4cG9ydCBjb25zdCBEZWZhdWx0UmVuZGVyZXJzID0gW1xuICAgIFByb3BlcnR5QmluZGluZ1JlbmRlcmVyUmVnaXN0cmF0aW9uLFxuICAgIEl0ZXJhdG9yQmluZGluZ1JlbmRlcmVyUmVnaXN0cmF0aW9uLFxuICAgIENhbGxCaW5kaW5nUmVuZGVyZXJSZWdpc3RyYXRpb24sXG4gICAgUmVmQmluZGluZ1JlbmRlcmVyUmVnaXN0cmF0aW9uLFxuICAgIEludGVycG9sYXRpb25CaW5kaW5nUmVuZGVyZXJSZWdpc3RyYXRpb24sXG4gICAgU2V0UHJvcGVydHlSZW5kZXJlclJlZ2lzdHJhdGlvbixcbiAgICBDdXN0b21FbGVtZW50UmVuZGVyZXJSZWdpc3RyYXRpb24sXG4gICAgQ3VzdG9tQXR0cmlidXRlUmVuZGVyZXJSZWdpc3RyYXRpb24sXG4gICAgVGVtcGxhdGVDb250cm9sbGVyUmVuZGVyZXJSZWdpc3RyYXRpb24sXG4gICAgTGV0RWxlbWVudFJlbmRlcmVyUmVnaXN0cmF0aW9uXG5dO1xuLyoqXG4gKiBBIERJIGNvbmZpZ3VyYXRpb24gb2JqZWN0IGNvbnRhaW5pbmcgZW52aXJvbm1lbnQvcnVudGltZS1hZ25vc3RpYyByZWdpc3RyYXRpb25zOlxuICogLSBgRGVmYXVsdENvbXBvbmVudHNgXG4gKiAtIGBEZWZhdWx0UmVzb3VyY2VzYFxuICogLSBgRGVmYXVsdFJlbmRlcmVyc2BcbiAqL1xuZXhwb3J0IGNvbnN0IFJ1bnRpbWVDb25maWd1cmF0aW9uID0ge1xuICAgIC8qKlxuICAgICAqIEFwcGx5IHRoaXMgY29uZmlndXJhdGlvbiB0byB0aGUgcHJvdmlkZWQgY29udGFpbmVyLlxuICAgICAqL1xuICAgIHJlZ2lzdGVyKGNvbnRhaW5lcikge1xuICAgICAgICByZXR1cm4gY29udGFpbmVyLnJlZ2lzdGVyKC4uLkRlZmF1bHRDb21wb25lbnRzLCAuLi5EZWZhdWx0UmVzb3VyY2VzLCAuLi5EZWZhdWx0UmVuZGVyZXJzKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyBjb250YWluZXIgd2l0aCB0aGlzIGNvbmZpZ3VyYXRpb24gYXBwbGllZCB0byBpdC5cbiAgICAgKi9cbiAgICBjcmVhdGVDb250YWluZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlZ2lzdGVyKERJLmNyZWF0ZUNvbnRhaW5lcigpKTtcbiAgICB9XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29uZmlndXJhdGlvbi5qcy5tYXAiLCJpbXBvcnQgeyBESSwgUmVnaXN0cmF0aW9uLCBNZXRhZGF0YSwgUHJvdG9jb2wsIH0gZnJvbSAnQGF1cmVsaWEva2VybmVsJztcbi8qKlxuICogVGFyZ2V0ZWRJbnN0cnVjdGlvblR5cGUgZW51bSB2YWx1ZXMgYmVjb21lIHRoZSBwcm9wZXJ0eSBuYW1lcyBmb3IgdGhlIGFzc29jaWF0ZWQgcmVuZGVyZXJzIHdoZW4gdGhleSBhcmUgaW5qZWN0ZWRcbiAqIGludG8gdGhlIGBSZW5kZXJlcmAuXG4gKlxuICogQWRkaXRpb25hbCBpbnN0cnVjdGlvbiB0eXBlcyBjYW4gYmUgYWRkZWQgYXMgbG9uZyBhcyB0aGV5IGFyZSAyIGNoYXJhY3RlcnMgbG9uZyBhbmQgZG8gbm90IGNsYXNoIHdpdGggZXhpc3Rpbmcgb25lcy5cbiAqXG4gKiBCeSBjb252ZW50aW9uLCB0aGUgaW5zdHJ1Y3Rpb24gdHlwZXMgZm9yIGEgcGFydGljdWxhciBydW50aW1lIHN0YXJ0IHdpdGggdGhlIHNhbWUgZmlyc3QgbGV0dGVyLCBhbmQgdGhlIHNlY29uZCBsZXR0ZXJcbiAqIHN0YXJ0cyBjb3VudGluZyBmcm9tIGxldHRlciBgYWAuIFRoZSBzdGFuZGFyZCBydW50aW1lIGluc3RydWN0aW9uIHR5cGVzIGFsbCBzdGFydCB3aXRoIHRoZSBsZXR0ZXIgYHJgLlxuICovXG5leHBvcnQgdmFyIFRhcmdldGVkSW5zdHJ1Y3Rpb25UeXBlO1xuKGZ1bmN0aW9uIChUYXJnZXRlZEluc3RydWN0aW9uVHlwZSkge1xuICAgIFRhcmdldGVkSW5zdHJ1Y3Rpb25UeXBlW1wiaHlkcmF0ZUVsZW1lbnRcIl0gPSBcInJhXCI7XG4gICAgVGFyZ2V0ZWRJbnN0cnVjdGlvblR5cGVbXCJoeWRyYXRlQXR0cmlidXRlXCJdID0gXCJyYlwiO1xuICAgIFRhcmdldGVkSW5zdHJ1Y3Rpb25UeXBlW1wiaHlkcmF0ZVRlbXBsYXRlQ29udHJvbGxlclwiXSA9IFwicmNcIjtcbiAgICBUYXJnZXRlZEluc3RydWN0aW9uVHlwZVtcImh5ZHJhdGVMZXRFbGVtZW50XCJdID0gXCJyZFwiO1xuICAgIFRhcmdldGVkSW5zdHJ1Y3Rpb25UeXBlW1wic2V0UHJvcGVydHlcIl0gPSBcInJlXCI7XG4gICAgVGFyZ2V0ZWRJbnN0cnVjdGlvblR5cGVbXCJpbnRlcnBvbGF0aW9uXCJdID0gXCJyZlwiO1xuICAgIFRhcmdldGVkSW5zdHJ1Y3Rpb25UeXBlW1wicHJvcGVydHlCaW5kaW5nXCJdID0gXCJyZ1wiO1xuICAgIFRhcmdldGVkSW5zdHJ1Y3Rpb25UeXBlW1wiY2FsbEJpbmRpbmdcIl0gPSBcInJoXCI7XG4gICAgVGFyZ2V0ZWRJbnN0cnVjdGlvblR5cGVbXCJsZXRCaW5kaW5nXCJdID0gXCJyaVwiO1xuICAgIFRhcmdldGVkSW5zdHJ1Y3Rpb25UeXBlW1wicmVmQmluZGluZ1wiXSA9IFwicmpcIjtcbiAgICBUYXJnZXRlZEluc3RydWN0aW9uVHlwZVtcIml0ZXJhdG9yQmluZGluZ1wiXSA9IFwicmtcIjtcbn0pKFRhcmdldGVkSW5zdHJ1Y3Rpb25UeXBlIHx8IChUYXJnZXRlZEluc3RydWN0aW9uVHlwZSA9IHt9KSk7XG5jb25zdCBwYXJlbnRQYXJ0c093blBhcnRzTG9va3VwID0gbmV3IFdlYWtNYXAoKTtcbi8qKlxuICogRWZmaWNpZW50bHkgbWVyZ2UgcGFydHMsIHBlcmZvcm1pbmcgdGhlIG1pbmltYWwgYW1vdW50IG9mIHdvcmsgLyB1c2luZyB0aGUgbWluaW1hbCBhbW91bnQgb2YgbWVtb3J5LlxuICpcbiAqIElmIGVpdGhlciBvZiB0aGUgdHdvIHBhcnQgcmVjb3JkcyBpcyB1bmRlZmluZWQsIHRoZSBvdGhlciB3aWxsIHNpbXBseSBiZSByZXR1cm5lZC5cbiAqXG4gKiBJZiBib3RoIGFyZSB1bmRlZmluZWQsIHVuZGVmaW5lZCB3aWxsIGJlIHJldHVybmVkLlxuICpcbiAqIElmIG5laXRoZXIgYXJlIHVuZGVmaW5lZCwgYSBuZXcgb2JqZWN0IHdpbGwgYmUgcmV0dXJuZWQgd2hlcmUgcGFydHMgb2YgdGhlIHNlY29uZCB2YWx1ZSB3aWxsIGJlIHdyaXR0ZW4gbGFzdCAoYW5kIHRodXMgbWF5IG92ZXJ3cml0ZSBkdXBsaWNhdGUgbmFtZWQgcGFydHMpLlxuICpcbiAqIFRoaXMgZnVuY3Rpb24gaXMgaWRlbXBvdGVudCB2aWEgYSBXZWFrTWFwIGNhY2hlOiByZXN1bHRzIGFyZSBjYWNoZWQgYW5kIGlmIHRoZSBzYW1lIHR3byB2YXJpYWJsZXMgYXJlIHByb3ZpZGVkIGFnYWluLCB0aGUgc2FtZSBvYmplY3Qgd2lsbCBiZSByZXR1cm5lZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlUGFydHMocGFyZW50UGFydHMsIG93blBhcnRzKSB7XG4gICAgaWYgKHBhcmVudFBhcnRzID09PSBvd25QYXJ0cykge1xuICAgICAgICByZXR1cm4gcGFyZW50UGFydHM7XG4gICAgfVxuICAgIGlmIChwYXJlbnRQYXJ0cyA9PT0gdm9pZCAwKSB7XG4gICAgICAgIHJldHVybiBvd25QYXJ0cztcbiAgICB9XG4gICAgaWYgKG93blBhcnRzID09PSB2b2lkIDApIHtcbiAgICAgICAgcmV0dXJuIHBhcmVudFBhcnRzO1xuICAgIH1cbiAgICBsZXQgb3duUGFydHNMb29rdXAgPSBwYXJlbnRQYXJ0c093blBhcnRzTG9va3VwLmdldChwYXJlbnRQYXJ0cyk7XG4gICAgaWYgKG93blBhcnRzTG9va3VwID09PSB2b2lkIDApIHtcbiAgICAgICAgcGFyZW50UGFydHNPd25QYXJ0c0xvb2t1cC5zZXQocGFyZW50UGFydHMsIG93blBhcnRzTG9va3VwID0gbmV3IFdlYWtNYXAoKSk7XG4gICAgfVxuICAgIGxldCBtZXJnZWRQYXJ0cyA9IG93blBhcnRzTG9va3VwLmdldChvd25QYXJ0cyk7XG4gICAgaWYgKG1lcmdlZFBhcnRzID09PSB2b2lkIDApIHtcbiAgICAgICAgb3duUGFydHNMb29rdXAuc2V0KG93blBhcnRzLCBtZXJnZWRQYXJ0cyA9IHtcbiAgICAgICAgICAgIC4uLnBhcmVudFBhcnRzLFxuICAgICAgICAgICAgLi4ub3duUGFydHMsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gbWVyZ2VkUGFydHM7XG59XG5leHBvcnQgY29uc3QgSVRhcmdldGVkSW5zdHJ1Y3Rpb24gPSBESS5jcmVhdGVJbnRlcmZhY2UoJ0lUYXJnZXRlZEluc3RydWN0aW9uJykubm9EZWZhdWx0KCk7XG5leHBvcnQgZnVuY3Rpb24gaXNUYXJnZXRlZEluc3RydWN0aW9uKHZhbHVlKSB7XG4gICAgY29uc3QgdHlwZSA9IHZhbHVlLnR5cGU7XG4gICAgcmV0dXJuIHR5cGVvZiB0eXBlID09PSAnc3RyaW5nJyAmJiB0eXBlLmxlbmd0aCA9PT0gMjtcbn1cbmV4cG9ydCBjbGFzcyBIb29rc0RlZmluaXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKHRhcmdldCkge1xuICAgICAgICB0aGlzLmhhc0NyZWF0ZSA9ICdjcmVhdGUnIGluIHRhcmdldDtcbiAgICAgICAgdGhpcy5oYXNCZWZvcmVDb21waWxlID0gJ2JlZm9yZUNvbXBpbGUnIGluIHRhcmdldDtcbiAgICAgICAgdGhpcy5oYXNBZnRlckNvbXBpbGUgPSAnYWZ0ZXJDb21waWxlJyBpbiB0YXJnZXQ7XG4gICAgICAgIHRoaXMuaGFzQWZ0ZXJDb21waWxlQ2hpbGRyZW4gPSAnYWZ0ZXJDb21waWxlQ2hpbGRyZW4nIGluIHRhcmdldDtcbiAgICAgICAgdGhpcy5oYXNCZWZvcmVCaW5kID0gJ2JlZm9yZUJpbmQnIGluIHRhcmdldDtcbiAgICAgICAgdGhpcy5oYXNBZnRlckJpbmQgPSAnYWZ0ZXJCaW5kJyBpbiB0YXJnZXQ7XG4gICAgICAgIHRoaXMuaGFzQmVmb3JlVW5iaW5kID0gJ2JlZm9yZVVuYmluZCcgaW4gdGFyZ2V0O1xuICAgICAgICB0aGlzLmhhc0FmdGVyVW5iaW5kID0gJ2FmdGVyVW5iaW5kJyBpbiB0YXJnZXQ7XG4gICAgICAgIHRoaXMuaGFzQmVmb3JlQXR0YWNoID0gJ2JlZm9yZUF0dGFjaCcgaW4gdGFyZ2V0O1xuICAgICAgICB0aGlzLmhhc0FmdGVyQXR0YWNoID0gJ2FmdGVyQXR0YWNoJyBpbiB0YXJnZXQ7XG4gICAgICAgIHRoaXMuaGFzQmVmb3JlRGV0YWNoID0gJ2JlZm9yZURldGFjaCcgaW4gdGFyZ2V0O1xuICAgICAgICB0aGlzLmhhc0FmdGVyRGV0YWNoID0gJ2FmdGVyRGV0YWNoJyBpbiB0YXJnZXQ7XG4gICAgICAgIHRoaXMuaGFzQ2FjaGluZyA9ICdjYWNoaW5nJyBpbiB0YXJnZXQ7XG4gICAgfVxufVxuSG9va3NEZWZpbml0aW9uLm5vbmUgPSBuZXcgSG9va3NEZWZpbml0aW9uKHt9KTtcbmV4cG9ydCBmdW5jdGlvbiBhbGlhcyguLi5hbGlhc2VzKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgICAgY29uc3Qga2V5ID0gUHJvdG9jb2wuYW5ub3RhdGlvbi5rZXlGb3IoJ2FsaWFzZXMnKTtcbiAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBNZXRhZGF0YS5nZXRPd24oa2V5LCB0YXJnZXQpO1xuICAgICAgICBpZiAoZXhpc3RpbmcgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgTWV0YWRhdGEuZGVmaW5lKGtleSwgYWxpYXNlcywgdGFyZ2V0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGV4aXN0aW5nLnB1c2goLi4uYWxpYXNlcyk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyQWxpYXNlcyhhbGlhc2VzLCByZXNvdXJjZSwga2V5LCBjb250YWluZXIpIHtcbiAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBhbGlhc2VzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgUmVnaXN0cmF0aW9uLmFsaWFzVG8oa2V5LCByZXNvdXJjZS5rZXlGcm9tKGFsaWFzZXNbaV0pKS5yZWdpc3Rlcihjb250YWluZXIpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlZmluaXRpb25zLmpzLm1hcCIsImltcG9ydCB7IERJLCBQTEFURk9STSwgUmVwb3J0ZXIsIH0gZnJvbSAnQGF1cmVsaWEva2VybmVsJztcbmV4cG9ydCBjb25zdCBJTm9kZSA9IERJLmNyZWF0ZUludGVyZmFjZSgnSU5vZGUnKS5ub0RlZmF1bHQoKTtcbmV4cG9ydCBjb25zdCBJUmVuZGVyTG9jYXRpb24gPSBESS5jcmVhdGVJbnRlcmZhY2UoJ0lSZW5kZXJMb2NhdGlvbicpLm5vRGVmYXVsdCgpO1xuZXhwb3J0IGNvbnN0IElET00gPSBESS5jcmVhdGVJbnRlcmZhY2UoJ0lET00nKS5ub0RlZmF1bHQoKTtcbmNvbnN0IG5pID0gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICB0aHJvdyBSZXBvcnRlci5lcnJvcigxMDAwKTsgLy8gVE9ETzogY3JlYXRlIGVycm9yIGNvZGUgKG5vdCBpbXBsZW1lbnRlZCBleGNlcHRpb24pXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbn07IC8vIHRoaXMgZnVuY3Rpb24gZG9lc24ndCBuZWVkIHR5cGluZyBiZWNhdXNlIGl0IGlzIG5ldmVyIGRpcmVjdGx5IGNhbGxlZFxuY29uc3QgbmlET00gPSB7XG4gICAgYWRkRXZlbnRMaXN0ZW5lcjogbmksXG4gICAgYXBwZW5kQ2hpbGQ6IG5pLFxuICAgIGNsb25lTm9kZTogbmksXG4gICAgY29udmVydFRvUmVuZGVyTG9jYXRpb246IG5pLFxuICAgIGNyZWF0ZURvY3VtZW50RnJhZ21lbnQ6IG5pLFxuICAgIGNyZWF0ZU5vZGVTZXF1ZW5jZTogbmksXG4gICAgY3JlYXRlRWxlbWVudDogbmksXG4gICAgY3JlYXRlQ3VzdG9tRXZlbnQ6IG5pLFxuICAgIGRpc3BhdGNoRXZlbnQ6IG5pLFxuICAgIGNyZWF0ZU5vZGVPYnNlcnZlcjogbmksXG4gICAgY3JlYXRlVGVtcGxhdGU6IG5pLFxuICAgIGNyZWF0ZVRleHROb2RlOiBuaSxcbiAgICBnZXRFZmZlY3RpdmVQYXJlbnROb2RlOiBuaSxcbiAgICBzZXRFZmZlY3RpdmVQYXJlbnROb2RlOiBuaSxcbiAgICBpbnNlcnRCZWZvcmU6IG5pLFxuICAgIGlzTWFya2VyOiBuaSxcbiAgICBpc05vZGVJbnN0YW5jZTogbmksXG4gICAgaXNSZW5kZXJMb2NhdGlvbjogbmksXG4gICAgbWFrZVRhcmdldDogbmksXG4gICAgcmVnaXN0ZXJFbGVtZW50UmVzb2x2ZXI6IG5pLFxuICAgIHJlbW92ZTogbmksXG4gICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcjogbmksXG4gICAgc2V0QXR0cmlidXRlOiBuaVxufTtcbmV4cG9ydCBjb25zdCBET00gPSB7XG4gICAgLi4ubmlET00sXG4gICAgc2NoZWR1bGVyOiAodm9pZCAwKSxcbiAgICBnZXQgaXNJbml0aWFsaXplZCgpIHtcbiAgICAgICAgcmV0dXJuIFJlZmxlY3QuZ2V0KHRoaXMsICckaW5pdGlhbGl6ZWQnKSA9PT0gdHJ1ZTtcbiAgICB9LFxuICAgIGluaXRpYWxpemUoZG9tKSB7XG4gICAgICAgIGlmICh0aGlzLmlzSW5pdGlhbGl6ZWQpIHtcbiAgICAgICAgICAgIHRocm93IFJlcG9ydGVyLmVycm9yKDEwMDEpOyAvLyBUT0RPOiBjcmVhdGUgZXJyb3IgY29kZSAoYWxyZWFkeSBpbml0aWFsaXplZCwgY2hlY2sgaXNJbml0aWFsaXplZCBwcm9wZXJ0eSBhbmQgY2FsbCBkZXN0cm95KCkgaWYgeW91IHdhbnQgdG8gYXNzaWduIGEgZGlmZmVyZW50IGRvbSlcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkZXNjcmlwdG9ycyA9IHt9O1xuICAgICAgICBjb25zdCBwcm90b3MgPSBbZG9tXTtcbiAgICAgICAgbGV0IHByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKGRvbSk7XG4gICAgICAgIHdoaWxlIChwcm90byAmJiBwcm90byAhPT0gT2JqZWN0LnByb3RvdHlwZSkge1xuICAgICAgICAgICAgcHJvdG9zLnVuc2hpZnQocHJvdG8pO1xuICAgICAgICAgICAgcHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YocHJvdG8pO1xuICAgICAgICB9XG4gICAgICAgIGZvciAocHJvdG8gb2YgcHJvdG9zKSB7XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKGRlc2NyaXB0b3JzLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhwcm90bykpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGtleXMgPSBbXTtcbiAgICAgICAgbGV0IGtleTtcbiAgICAgICAgbGV0IGRlc2NyaXB0b3I7XG4gICAgICAgIGZvciAoa2V5IGluIGRlc2NyaXB0b3JzKSB7XG4gICAgICAgICAgICBkZXNjcmlwdG9yID0gZGVzY3JpcHRvcnNba2V5XTtcbiAgICAgICAgICAgIGlmIChkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSAmJiBkZXNjcmlwdG9yLndyaXRhYmxlKSB7XG4gICAgICAgICAgICAgICAgUmVmbGVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBrZXksIGRlc2NyaXB0b3IpO1xuICAgICAgICAgICAgICAgIGtleXMucHVzaChrZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFJlZmxlY3Quc2V0KHRoaXMsICckZG9tS2V5cycsIGtleXMpO1xuICAgICAgICBSZWZsZWN0LnNldCh0aGlzLCAnJGluaXRpYWxpemVkJywgdHJ1ZSk7XG4gICAgfSxcbiAgICBkZXN0cm95KCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNJbml0aWFsaXplZCkge1xuICAgICAgICAgICAgdGhyb3cgUmVwb3J0ZXIuZXJyb3IoMTAwMik7IC8vIFRPRE86IGNyZWF0ZSBlcnJvciBjb2RlIChhbHJlYWR5IGRlc3Ryb3llZClcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBrZXlzID0gUmVmbGVjdC5nZXQodGhpcywgJyRkb21LZXlzJyk7XG4gICAgICAgIGtleXMuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICAgICAgUmVmbGVjdC5kZWxldGVQcm9wZXJ0eSh0aGlzLCBrZXkpO1xuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLCBuaURPTSk7XG4gICAgICAgIFJlZmxlY3Quc2V0KHRoaXMsICckZG9tS2V5cycsIFBMQVRGT1JNLmVtcHR5QXJyYXkpO1xuICAgICAgICBSZWZsZWN0LnNldCh0aGlzLCAnJGluaXRpYWxpemVkJywgZmFsc2UpO1xuICAgIH1cbn07XG4vLyBUaGlzIGlzIGFuIGltcGxlbWVudGF0aW9uIG9mIElOb2RlU2VxdWVuY2UgdGhhdCByZXByZXNlbnRzIFwibm8gRE9NXCIgdG8gcmVuZGVyLlxuLy8gSXQncyB1c2VkIGluIHZhcmlvdXMgcGxhY2VzIHRvIGF2b2lkIG51bGwgYW5kIHRvIGVuY29kZVxuLy8gdGhlIGV4cGxpY2l0IGlkZWEgb2YgXCJubyB2aWV3XCIuXG5jb25zdCBlbXB0eVNlcXVlbmNlID0ge1xuICAgIGlzTW91bnRlZDogZmFsc2UsXG4gICAgaXNMaW5rZWQ6IGZhbHNlLFxuICAgIG5leHQ6IHZvaWQgMCxcbiAgICBjaGlsZE5vZGVzOiBQTEFURk9STS5lbXB0eUFycmF5LFxuICAgIGZpcnN0Q2hpbGQ6IG51bGwsXG4gICAgbGFzdENoaWxkOiBudWxsLFxuICAgIGZpbmRUYXJnZXRzKCkgeyByZXR1cm4gUExBVEZPUk0uZW1wdHlBcnJheTsgfSxcbiAgICBpbnNlcnRCZWZvcmUocmVmTm9kZSkgeyB9LFxuICAgIGFwcGVuZFRvKHBhcmVudCkgeyB9LFxuICAgIHJlbW92ZSgpIHsgfSxcbiAgICBhZGRUb0xpbmtlZCgpIHsgfSxcbiAgICB1bmxpbmsoKSB7IH0sXG4gICAgbGluayhuZXh0KSB7IH0sXG59O1xuZXhwb3J0IGNvbnN0IE5vZGVTZXF1ZW5jZSA9IHtcbiAgICBlbXB0eTogZW1wdHlTZXF1ZW5jZVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRvbS5qcy5tYXAiLCIvKlxuKiBOb3RlOiB0aGUgb25lVGltZSBiaW5kaW5nIG5vdyBoYXMgYSBub24temVybyB2YWx1ZSBmb3IgMiByZWFzb25zOlxuKiAgLSBwbGF5cyBuaWNlciB3aXRoIGJpdHdpc2Ugb3BlcmF0aW9ucyAobW9yZSBjb25zaXN0ZW50IGNvZGUsIG1vcmUgZXhwbGljaXQgc2V0dGluZ3MpXG4qICAtIGFsbG93cyBmb3IgcG90ZW50aWFsbHkgaGF2aW5nIHNvbWV0aGluZyBsaWtlIEJpbmRpbmdNb2RlLm9uZVRpbWUgfCBCaW5kaW5nTW9kZS5mcm9tVmlldywgd2hlcmUgYW4gaW5pdGlhbCB2YWx1ZSBpcyBzZXQgb25jZSB0byB0aGUgdmlldyBidXQgdXBkYXRlcyBmcm9tIHRoZSB2aWV3IGFsc28gcHJvcGFnYXRlIGJhY2sgdG8gdGhlIHZpZXcgbW9kZWxcbipcbiogRnVydGhlcm1vcmUsIHRoZSBcImRlZmF1bHRcIiBtb2RlIHdvdWxkIGJlIGZvciBzaW1wbGUgXCIuYmluZFwiIGV4cHJlc3Npb25zIHRvIG1ha2UgaXQgZXhwbGljaXQgZm9yIG91ciBsb2dpYyB0aGF0IHRoZSBkZWZhdWx0IGlzIGJlaW5nIHVzZWQuXG4qIFRoaXMgZXNzZW50aWFsbHkgYWRkcyBleHRyYSBpbmZvcm1hdGlvbiB3aGljaCBiaW5kaW5nIGNvdWxkIHVzZSB0byBkbyBzbWFydGVyIHRoaW5ncyBhbmQgYWxsb3dzIGJpbmRpbmdCZWhhdmlvcnMgdGhhdCBhZGQgYSBtb2RlIGluc3RlYWQgb2Ygc2ltcGx5IG92ZXJ3cml0aW5nIGl0XG4qL1xuZXhwb3J0IHZhciBCaW5kaW5nTW9kZTtcbihmdW5jdGlvbiAoQmluZGluZ01vZGUpIHtcbiAgICBCaW5kaW5nTW9kZVtCaW5kaW5nTW9kZVtcIm9uZVRpbWVcIl0gPSAxXSA9IFwib25lVGltZVwiO1xuICAgIEJpbmRpbmdNb2RlW0JpbmRpbmdNb2RlW1widG9WaWV3XCJdID0gMl0gPSBcInRvVmlld1wiO1xuICAgIEJpbmRpbmdNb2RlW0JpbmRpbmdNb2RlW1wiZnJvbVZpZXdcIl0gPSA0XSA9IFwiZnJvbVZpZXdcIjtcbiAgICBCaW5kaW5nTW9kZVtCaW5kaW5nTW9kZVtcInR3b1dheVwiXSA9IDZdID0gXCJ0d29XYXlcIjtcbiAgICBCaW5kaW5nTW9kZVtCaW5kaW5nTW9kZVtcImRlZmF1bHRcIl0gPSA4XSA9IFwiZGVmYXVsdFwiO1xufSkoQmluZGluZ01vZGUgfHwgKEJpbmRpbmdNb2RlID0ge30pKTtcbmV4cG9ydCB2YXIgQmluZGluZ1N0cmF0ZWd5O1xuKGZ1bmN0aW9uIChCaW5kaW5nU3RyYXRlZ3kpIHtcbiAgICAvKipcbiAgICAgKiBDb25maWd1cmVzIGFsbCBjb21wb25lbnRzIFwiYmVsb3dcIiB0aGlzIG9uZSB0byBvcGVyYXRlIGluIGdldHRlclNldHRlciBiaW5kaW5nIG1vZGUuXG4gICAgICogVGhpcyBpcyB0aGUgZGVmYXVsdDsgaWYgbm8gc3RyYXRlZ3kgaXMgc3BlY2lmaWVkLCB0aGlzIG9uZSBpcyBpbXBsaWVkLlxuICAgICAqXG4gICAgICogVGhpcyBzdHJhdGVneSBpcyB0aGUgbW9zdCBjb21wYXRpYmxlLCBjb252ZW5pZW50IGFuZCBoYXMgdGhlIGJlc3QgcGVyZm9ybWFuY2Ugb24gZnJlcXVlbnRseSB1cGRhdGVkIGJpbmRpbmdzIG9uIGNvbXBvbmVudHMgdGhhdCBhcmUgaW5mcmVxdWVudGx5IHJlcGxhY2VkLlxuICAgICAqIEhvd2V2ZXIsIGl0IGFsc28gY29uc3VtZXMgdGhlIG1vc3QgcmVzb3VyY2VzIG9uIGluaXRpYWxpemF0aW9uLlxuICAgICAqL1xuICAgIEJpbmRpbmdTdHJhdGVneVtCaW5kaW5nU3RyYXRlZ3lbXCJnZXR0ZXJTZXR0ZXJcIl0gPSAxXSA9IFwiZ2V0dGVyU2V0dGVyXCI7XG4gICAgLyoqXG4gICAgICogQ29uZmlndXJlcyBhbGwgY29tcG9uZW50cyBcImJlbG93XCIgdGhpcyBvbmUgdG8gb3BlcmF0ZSBpbiBwcm94eSBiaW5kaW5nIG1vZGUuXG4gICAgICogTm8gZ2V0dGVycy9zZXR0ZXJzIGFyZSBjcmVhdGVkLlxuICAgICAqXG4gICAgICogVGhpcyBzdHJhdGVneSBjb25zdW1lcyBzaWduaWZpY2FudGx5IGZld2VyIHJlc291cmNlcyB0aGFuIGBnZXR0ZXJTZXR0ZXJgIG9uIGluaXRpYWxpemF0aW9uIGFuZCBoYXMgdGhlIGJlc3QgcGVyZm9ybWFuY2Ugb24gaW5mcmVxdWVudGx5IHVwZGF0ZWQgYmluZGluZ3Mgb25cbiAgICAgKiBjb21wb25lbnRzIHRoYXQgYXJlIGZyZXF1ZW50bHkgcmVwbGFjZWQuXG4gICAgICogSG93ZXZlciwgaXQgY29uc3VtZXMgbW9yZSByZXNvdXJjZXMgb24gdXBkYXRlcy5cbiAgICAgKi9cbiAgICBCaW5kaW5nU3RyYXRlZ3lbQmluZGluZ1N0cmF0ZWd5W1wicHJveGllc1wiXSA9IDJdID0gXCJwcm94aWVzXCI7XG59KShCaW5kaW5nU3RyYXRlZ3kgfHwgKEJpbmRpbmdTdHJhdGVneSA9IHt9KSk7XG5jb25zdCBtYW5kYXRvcnlTdHJhdGVneSA9IDEgLyogZ2V0dGVyU2V0dGVyICovIHwgMiAvKiBwcm94aWVzICovO1xuZXhwb3J0IGZ1bmN0aW9uIGVuc3VyZVZhbGlkU3RyYXRlZ3koc3RyYXRlZ3kpIHtcbiAgICBpZiAoKHN0cmF0ZWd5ICYgbWFuZGF0b3J5U3RyYXRlZ3kpID09PSAwKSB7XG4gICAgICAgIC8vIFRPRE86IHByb2JhYmx5IHdhbnQgdG8gdmFsaWRhdGUgdGhhdCB1c2VyIGlzbid0IHRyeWluZyB0byBtaXggZ2V0dGVyU2V0dGVyL3Byb3h5XG4gICAgICAgIC8vIFRPRE86IGFsc28gbmVlZCB0byBtYWtlIHN1cmUgdGhhdCBzdHJhdGVneSBjYW4gYmUgY2hhbmdlZCBhd2F5IGZyb20gcHJveGllcyBpbnNpZGUgdGhlIGNvbXBvbmVudCB0cmVlIChub3QgaGVyZSB0aG91Z2gsIGJ1dCBqdXN0IG1ha2luZyBhIG5vdGUpXG4gICAgICAgIHJldHVybiBzdHJhdGVneSB8IDEgLyogZ2V0dGVyU2V0dGVyICovO1xuICAgIH1cbiAgICByZXR1cm4gc3RyYXRlZ3k7XG59XG5leHBvcnQgdmFyIFN0YXRlO1xuKGZ1bmN0aW9uIChTdGF0ZSkge1xuICAgIFN0YXRlW1N0YXRlW1wibm9uZVwiXSA9IDBdID0gXCJub25lXCI7XG4gICAgU3RhdGVbU3RhdGVbXCJpc0JpbmRpbmdcIl0gPSAxXSA9IFwiaXNCaW5kaW5nXCI7XG4gICAgU3RhdGVbU3RhdGVbXCJpc1VuYmluZGluZ1wiXSA9IDJdID0gXCJpc1VuYmluZGluZ1wiO1xuICAgIFN0YXRlW1N0YXRlW1wiaXNCb3VuZFwiXSA9IDRdID0gXCJpc0JvdW5kXCI7XG4gICAgU3RhdGVbU3RhdGVbXCJpc0JvdW5kT3JCaW5kaW5nXCJdID0gNV0gPSBcImlzQm91bmRPckJpbmRpbmdcIjtcbiAgICBTdGF0ZVtTdGF0ZVtcImlzQm91bmRPclVuYmluZGluZ1wiXSA9IDZdID0gXCJpc0JvdW5kT3JVbmJpbmRpbmdcIjtcbiAgICBTdGF0ZVtTdGF0ZVtcImlzQXR0YWNoaW5nXCJdID0gOF0gPSBcImlzQXR0YWNoaW5nXCI7XG4gICAgU3RhdGVbU3RhdGVbXCJpc0RldGFjaGluZ1wiXSA9IDE2XSA9IFwiaXNEZXRhY2hpbmdcIjtcbiAgICBTdGF0ZVtTdGF0ZVtcImlzQXR0YWNoZWRcIl0gPSAzMl0gPSBcImlzQXR0YWNoZWRcIjtcbiAgICBTdGF0ZVtTdGF0ZVtcImlzQXR0YWNoZWRPckF0dGFjaGluZ1wiXSA9IDQwXSA9IFwiaXNBdHRhY2hlZE9yQXR0YWNoaW5nXCI7XG4gICAgU3RhdGVbU3RhdGVbXCJpc0F0dGFjaGVkT3JEZXRhY2hpbmdcIl0gPSA0OF0gPSBcImlzQXR0YWNoZWRPckRldGFjaGluZ1wiO1xuICAgIFN0YXRlW1N0YXRlW1wiaXNNb3VudGVkXCJdID0gNjRdID0gXCJpc01vdW50ZWRcIjtcbiAgICBTdGF0ZVtTdGF0ZVtcImhhc0xvY2tlZFNjb3BlXCJdID0gMjU2XSA9IFwiaGFzTG9ja2VkU2NvcGVcIjtcbiAgICBTdGF0ZVtTdGF0ZVtcImNhbkJlQ2FjaGVkXCJdID0gNTEyXSA9IFwiY2FuQmVDYWNoZWRcIjtcbn0pKFN0YXRlIHx8IChTdGF0ZSA9IHt9KSk7XG5leHBvcnQgdmFyIExpZmVjeWNsZUZsYWdzO1xuKGZ1bmN0aW9uIChMaWZlY3ljbGVGbGFncykge1xuICAgIExpZmVjeWNsZUZsYWdzW0xpZmVjeWNsZUZsYWdzW1wibm9uZVwiXSA9IDBdID0gXCJub25lXCI7XG4gICAgLy8gQml0bWFzayBmb3IgZmxhZ3MgdGhhdCBuZWVkIHRvIGJlIHN0b3JlZCBvbiBhIGJpbmRpbmcgZHVyaW5nICRiaW5kIGZvciBtdXRhdGlvblxuICAgIC8vIGNhbGxiYWNrcyBvdXRzaWRlIG9mICRiaW5kXG4gICAgTGlmZWN5Y2xlRmxhZ3NbTGlmZWN5Y2xlRmxhZ3NbXCJwZXJzaXN0ZW50QmluZGluZ0ZsYWdzXCJdID0gMjA4MDM3NDc5OV0gPSBcInBlcnNpc3RlbnRCaW5kaW5nRmxhZ3NcIjtcbiAgICBMaWZlY3ljbGVGbGFnc1tMaWZlY3ljbGVGbGFnc1tcImFsbG93UGFyZW50U2NvcGVUcmF2ZXJzYWxcIl0gPSA2NzEwODg2NF0gPSBcImFsbG93UGFyZW50U2NvcGVUcmF2ZXJzYWxcIjtcbiAgICBMaWZlY3ljbGVGbGFnc1tMaWZlY3ljbGVGbGFnc1tcIm9ic2VydmVMZWFmUHJvcGVydGllc09ubHlcIl0gPSAxMzQyMTc3MjhdID0gXCJvYnNlcnZlTGVhZlByb3BlcnRpZXNPbmx5XCI7XG4gICAgTGlmZWN5Y2xlRmxhZ3NbTGlmZWN5Y2xlRmxhZ3NbXCJ0YXJnZXRPYnNlcnZlckZsYWdzXCJdID0gODA1MzA2MzgzXSA9IFwidGFyZ2V0T2JzZXJ2ZXJGbGFnc1wiO1xuICAgIExpZmVjeWNsZUZsYWdzW0xpZmVjeWNsZUZsYWdzW1wibm9UYXJnZXRPYnNlcnZlclF1ZXVlXCJdID0gMjY4NDM1NDU2XSA9IFwibm9UYXJnZXRPYnNlcnZlclF1ZXVlXCI7XG4gICAgTGlmZWN5Y2xlRmxhZ3NbTGlmZWN5Y2xlRmxhZ3NbXCJwZXJzaXN0ZW50VGFyZ2V0T2JzZXJ2ZXJRdWV1ZVwiXSA9IDUzNjg3MDkxMl0gPSBcInBlcnNpc3RlbnRUYXJnZXRPYnNlcnZlclF1ZXVlXCI7XG4gICAgTGlmZWN5Y2xlRmxhZ3NbTGlmZWN5Y2xlRmxhZ3NbXCJzZWNvbmRhcnlFeHByZXNzaW9uXCJdID0gMTA3Mzc0MTgyNF0gPSBcInNlY29uZGFyeUV4cHJlc3Npb25cIjtcbiAgICBMaWZlY3ljbGVGbGFnc1tMaWZlY3ljbGVGbGFnc1tcImJpbmRpbmdTdHJhdGVneVwiXSA9IDE1XSA9IFwiYmluZGluZ1N0cmF0ZWd5XCI7XG4gICAgTGlmZWN5Y2xlRmxhZ3NbTGlmZWN5Y2xlRmxhZ3NbXCJnZXR0ZXJTZXR0ZXJTdHJhdGVneVwiXSA9IDFdID0gXCJnZXR0ZXJTZXR0ZXJTdHJhdGVneVwiO1xuICAgIExpZmVjeWNsZUZsYWdzW0xpZmVjeWNsZUZsYWdzW1wicHJveHlTdHJhdGVneVwiXSA9IDJdID0gXCJwcm94eVN0cmF0ZWd5XCI7XG4gICAgTGlmZWN5Y2xlRmxhZ3NbTGlmZWN5Y2xlRmxhZ3NbXCJpc1N0cmljdEJpbmRpbmdTdHJhdGVneVwiXSA9IDRdID0gXCJpc1N0cmljdEJpbmRpbmdTdHJhdGVneVwiO1xuICAgIExpZmVjeWNsZUZsYWdzW0xpZmVjeWNsZUZsYWdzW1widXBkYXRlXCJdID0gNDhdID0gXCJ1cGRhdGVcIjtcbiAgICBMaWZlY3ljbGVGbGFnc1tMaWZlY3ljbGVGbGFnc1tcInVwZGF0ZVRhcmdldEluc3RhbmNlXCJdID0gMTZdID0gXCJ1cGRhdGVUYXJnZXRJbnN0YW5jZVwiO1xuICAgIExpZmVjeWNsZUZsYWdzW0xpZmVjeWNsZUZsYWdzW1widXBkYXRlU291cmNlRXhwcmVzc2lvblwiXSA9IDMyXSA9IFwidXBkYXRlU291cmNlRXhwcmVzc2lvblwiO1xuICAgIExpZmVjeWNsZUZsYWdzW0xpZmVjeWNsZUZsYWdzW1wiZnJvbVwiXSA9IDUyNDIyNF0gPSBcImZyb21cIjtcbiAgICBMaWZlY3ljbGVGbGFnc1tMaWZlY3ljbGVGbGFnc1tcImZyb21GbHVzaFwiXSA9IDk2MF0gPSBcImZyb21GbHVzaFwiO1xuICAgIExpZmVjeWNsZUZsYWdzW0xpZmVjeWNsZUZsYWdzW1wiZnJvbUFzeW5jRmx1c2hcIl0gPSA2NF0gPSBcImZyb21Bc3luY0ZsdXNoXCI7XG4gICAgTGlmZWN5Y2xlRmxhZ3NbTGlmZWN5Y2xlRmxhZ3NbXCJmcm9tU3luY0ZsdXNoXCJdID0gMTI4XSA9IFwiZnJvbVN5bmNGbHVzaFwiO1xuICAgIExpZmVjeWNsZUZsYWdzW0xpZmVjeWNsZUZsYWdzW1wiZnJvbVRpY2tcIl0gPSAyNTZdID0gXCJmcm9tVGlja1wiO1xuICAgIExpZmVjeWNsZUZsYWdzW0xpZmVjeWNsZUZsYWdzW1wiZnJvbUJhdGNoXCJdID0gNTEyXSA9IFwiZnJvbUJhdGNoXCI7XG4gICAgTGlmZWN5Y2xlRmxhZ3NbTGlmZWN5Y2xlRmxhZ3NbXCJmcm9tU3RhcnRUYXNrXCJdID0gMTAyNF0gPSBcImZyb21TdGFydFRhc2tcIjtcbiAgICBMaWZlY3ljbGVGbGFnc1tMaWZlY3ljbGVGbGFnc1tcImZyb21TdG9wVGFza1wiXSA9IDIwNDhdID0gXCJmcm9tU3RvcFRhc2tcIjtcbiAgICBMaWZlY3ljbGVGbGFnc1tMaWZlY3ljbGVGbGFnc1tcImZyb21CaW5kXCJdID0gNDA5Nl0gPSBcImZyb21CaW5kXCI7XG4gICAgTGlmZWN5Y2xlRmxhZ3NbTGlmZWN5Y2xlRmxhZ3NbXCJmcm9tVW5iaW5kXCJdID0gODE5Ml0gPSBcImZyb21VbmJpbmRcIjtcbiAgICBMaWZlY3ljbGVGbGFnc1tMaWZlY3ljbGVGbGFnc1tcImZyb21BdHRhY2hcIl0gPSAxNjM4NF0gPSBcImZyb21BdHRhY2hcIjtcbiAgICBMaWZlY3ljbGVGbGFnc1tMaWZlY3ljbGVGbGFnc1tcImZyb21EZXRhY2hcIl0gPSAzMjc2OF0gPSBcImZyb21EZXRhY2hcIjtcbiAgICBMaWZlY3ljbGVGbGFnc1tMaWZlY3ljbGVGbGFnc1tcImZyb21DYWNoZVwiXSA9IDY1NTM2XSA9IFwiZnJvbUNhY2hlXCI7XG4gICAgTGlmZWN5Y2xlRmxhZ3NbTGlmZWN5Y2xlRmxhZ3NbXCJmcm9tRE9NRXZlbnRcIl0gPSAxMzEwNzJdID0gXCJmcm9tRE9NRXZlbnRcIjtcbiAgICBMaWZlY3ljbGVGbGFnc1tMaWZlY3ljbGVGbGFnc1tcImZyb21MaWZlY3ljbGVUYXNrXCJdID0gMjYyMTQ0XSA9IFwiZnJvbUxpZmVjeWNsZVRhc2tcIjtcbiAgICBMaWZlY3ljbGVGbGFnc1tMaWZlY3ljbGVGbGFnc1tcImFsbG93UHVibGlzaFJvdW5kdHJpcFwiXSA9IDUyNDI4OF0gPSBcImFsbG93UHVibGlzaFJvdW5kdHJpcFwiO1xuICAgIExpZmVjeWNsZUZsYWdzW0xpZmVjeWNsZUZsYWdzW1wiaXNQdWJsaXNoaW5nXCJdID0gMTA0ODU3Nl0gPSBcImlzUHVibGlzaGluZ1wiO1xuICAgIExpZmVjeWNsZUZsYWdzW0xpZmVjeWNsZUZsYWdzW1wibXVzdEV2YWx1YXRlXCJdID0gMjA5NzE1Ml0gPSBcIm11c3RFdmFsdWF0ZVwiO1xuICAgIExpZmVjeWNsZUZsYWdzW0xpZmVjeWNsZUZsYWdzW1wiaXNUcmF2ZXJzaW5nUGFyZW50U2NvcGVcIl0gPSA0MTk0MzA0XSA9IFwiaXNUcmF2ZXJzaW5nUGFyZW50U2NvcGVcIjtcbiAgICBMaWZlY3ljbGVGbGFnc1tMaWZlY3ljbGVGbGFnc1tcImlzT3JpZ2luYWxBcnJheVwiXSA9IDgzODg2MDhdID0gXCJpc09yaWdpbmFsQXJyYXlcIjtcbiAgICBMaWZlY3ljbGVGbGFnc1tMaWZlY3ljbGVGbGFnc1tcImlzQ29sbGVjdGlvbk11dGF0aW9uXCJdID0gMTY3NzcyMTZdID0gXCJpc0NvbGxlY3Rpb25NdXRhdGlvblwiO1xuICAgIExpZmVjeWNsZUZsYWdzW0xpZmVjeWNsZUZsYWdzW1wicmVvcmRlck5vZGVzXCJdID0gMzM1NTQ0MzJdID0gXCJyZW9yZGVyTm9kZXNcIjtcbn0pKExpZmVjeWNsZUZsYWdzIHx8IChMaWZlY3ljbGVGbGFncyA9IHt9KSk7XG5leHBvcnQgdmFyIEV4cHJlc3Npb25LaW5kO1xuKGZ1bmN0aW9uIChFeHByZXNzaW9uS2luZCkge1xuICAgIEV4cHJlc3Npb25LaW5kW0V4cHJlc3Npb25LaW5kW1wiQ29ubmVjdHNcIl0gPSAzMl0gPSBcIkNvbm5lY3RzXCI7XG4gICAgRXhwcmVzc2lvbktpbmRbRXhwcmVzc2lvbktpbmRbXCJPYnNlcnZlc1wiXSA9IDY0XSA9IFwiT2JzZXJ2ZXNcIjtcbiAgICBFeHByZXNzaW9uS2luZFtFeHByZXNzaW9uS2luZFtcIkNhbGxzRnVuY3Rpb25cIl0gPSAxMjhdID0gXCJDYWxsc0Z1bmN0aW9uXCI7XG4gICAgRXhwcmVzc2lvbktpbmRbRXhwcmVzc2lvbktpbmRbXCJIYXNBbmNlc3RvclwiXSA9IDI1Nl0gPSBcIkhhc0FuY2VzdG9yXCI7XG4gICAgRXhwcmVzc2lvbktpbmRbRXhwcmVzc2lvbktpbmRbXCJJc1ByaW1hcnlcIl0gPSA1MTJdID0gXCJJc1ByaW1hcnlcIjtcbiAgICBFeHByZXNzaW9uS2luZFtFeHByZXNzaW9uS2luZFtcIklzTGVmdEhhbmRTaWRlXCJdID0gMTAyNF0gPSBcIklzTGVmdEhhbmRTaWRlXCI7XG4gICAgRXhwcmVzc2lvbktpbmRbRXhwcmVzc2lvbktpbmRbXCJIYXNCaW5kXCJdID0gMjA0OF0gPSBcIkhhc0JpbmRcIjtcbiAgICBFeHByZXNzaW9uS2luZFtFeHByZXNzaW9uS2luZFtcIkhhc1VuYmluZFwiXSA9IDQwOTZdID0gXCJIYXNVbmJpbmRcIjtcbiAgICBFeHByZXNzaW9uS2luZFtFeHByZXNzaW9uS2luZFtcIklzQXNzaWduYWJsZVwiXSA9IDgxOTJdID0gXCJJc0Fzc2lnbmFibGVcIjtcbiAgICBFeHByZXNzaW9uS2luZFtFeHByZXNzaW9uS2luZFtcIklzTGl0ZXJhbFwiXSA9IDE2Mzg0XSA9IFwiSXNMaXRlcmFsXCI7XG4gICAgRXhwcmVzc2lvbktpbmRbRXhwcmVzc2lvbktpbmRbXCJJc1Jlc291cmNlXCJdID0gMzI3NjhdID0gXCJJc1Jlc291cmNlXCI7XG4gICAgRXhwcmVzc2lvbktpbmRbRXhwcmVzc2lvbktpbmRbXCJJc0ZvckRlY2xhcmF0aW9uXCJdID0gNjU1MzZdID0gXCJJc0ZvckRlY2xhcmF0aW9uXCI7XG4gICAgRXhwcmVzc2lvbktpbmRbRXhwcmVzc2lvbktpbmRbXCJUeXBlXCJdID0gMzFdID0gXCJUeXBlXCI7XG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgRXhwcmVzc2lvbktpbmRbRXhwcmVzc2lvbktpbmRbXCJBY2Nlc3NUaGlzXCJdID0gMTc5M10gPSBcIkFjY2Vzc1RoaXNcIjtcbiAgICBFeHByZXNzaW9uS2luZFtFeHByZXNzaW9uS2luZFtcIkFjY2Vzc1Njb3BlXCJdID0gMTAwODJdID0gXCJBY2Nlc3NTY29wZVwiO1xuICAgIEV4cHJlc3Npb25LaW5kW0V4cHJlc3Npb25LaW5kW1wiQXJyYXlMaXRlcmFsXCJdID0gMTc5NTVdID0gXCJBcnJheUxpdGVyYWxcIjtcbiAgICBFeHByZXNzaW9uS2luZFtFeHByZXNzaW9uS2luZFtcIk9iamVjdExpdGVyYWxcIl0gPSAxNzk1Nl0gPSBcIk9iamVjdExpdGVyYWxcIjtcbiAgICBFeHByZXNzaW9uS2luZFtFeHByZXNzaW9uS2luZFtcIlByaW1pdGl2ZUxpdGVyYWxcIl0gPSAxNzkyNV0gPSBcIlByaW1pdGl2ZUxpdGVyYWxcIjtcbiAgICBFeHByZXNzaW9uS2luZFtFeHByZXNzaW9uS2luZFtcIlRlbXBsYXRlXCJdID0gMTc5NThdID0gXCJUZW1wbGF0ZVwiO1xuICAgIEV4cHJlc3Npb25LaW5kW0V4cHJlc3Npb25LaW5kW1wiVW5hcnlcIl0gPSAzOV0gPSBcIlVuYXJ5XCI7XG4gICAgRXhwcmVzc2lvbktpbmRbRXhwcmVzc2lvbktpbmRbXCJDYWxsU2NvcGVcIl0gPSAxNDQ4XSA9IFwiQ2FsbFNjb3BlXCI7XG4gICAgRXhwcmVzc2lvbktpbmRbRXhwcmVzc2lvbktpbmRbXCJDYWxsTWVtYmVyXCJdID0gMTE2MV0gPSBcIkNhbGxNZW1iZXJcIjtcbiAgICBFeHByZXNzaW9uS2luZFtFeHByZXNzaW9uS2luZFtcIkNhbGxGdW5jdGlvblwiXSA9IDExNjJdID0gXCJDYWxsRnVuY3Rpb25cIjtcbiAgICBFeHByZXNzaW9uS2luZFtFeHByZXNzaW9uS2luZFtcIkFjY2Vzc01lbWJlclwiXSA9IDkzMjNdID0gXCJBY2Nlc3NNZW1iZXJcIjtcbiAgICBFeHByZXNzaW9uS2luZFtFeHByZXNzaW9uS2luZFtcIkFjY2Vzc0tleWVkXCJdID0gOTMyNF0gPSBcIkFjY2Vzc0tleWVkXCI7XG4gICAgRXhwcmVzc2lvbktpbmRbRXhwcmVzc2lvbktpbmRbXCJUYWdnZWRUZW1wbGF0ZVwiXSA9IDExOTddID0gXCJUYWdnZWRUZW1wbGF0ZVwiO1xuICAgIEV4cHJlc3Npb25LaW5kW0V4cHJlc3Npb25LaW5kW1wiQmluYXJ5XCJdID0gNDZdID0gXCJCaW5hcnlcIjtcbiAgICBFeHByZXNzaW9uS2luZFtFeHByZXNzaW9uS2luZFtcIkNvbmRpdGlvbmFsXCJdID0gNjNdID0gXCJDb25kaXRpb25hbFwiO1xuICAgIEV4cHJlc3Npb25LaW5kW0V4cHJlc3Npb25LaW5kW1wiQXNzaWduXCJdID0gODIwOF0gPSBcIkFzc2lnblwiO1xuICAgIEV4cHJlc3Npb25LaW5kW0V4cHJlc3Npb25LaW5kW1wiVmFsdWVDb252ZXJ0ZXJcIl0gPSAzNjkxM10gPSBcIlZhbHVlQ29udmVydGVyXCI7XG4gICAgRXhwcmVzc2lvbktpbmRbRXhwcmVzc2lvbktpbmRbXCJCaW5kaW5nQmVoYXZpb3JcIl0gPSAzODk2Ml0gPSBcIkJpbmRpbmdCZWhhdmlvclwiO1xuICAgIEV4cHJlc3Npb25LaW5kW0V4cHJlc3Npb25LaW5kW1wiSHRtbExpdGVyYWxcIl0gPSA1MV0gPSBcIkh0bWxMaXRlcmFsXCI7XG4gICAgRXhwcmVzc2lvbktpbmRbRXhwcmVzc2lvbktpbmRbXCJBcnJheUJpbmRpbmdQYXR0ZXJuXCJdID0gNjU1NTZdID0gXCJBcnJheUJpbmRpbmdQYXR0ZXJuXCI7XG4gICAgRXhwcmVzc2lvbktpbmRbRXhwcmVzc2lvbktpbmRbXCJPYmplY3RCaW5kaW5nUGF0dGVyblwiXSA9IDY1NTU3XSA9IFwiT2JqZWN0QmluZGluZ1BhdHRlcm5cIjtcbiAgICBFeHByZXNzaW9uS2luZFtFeHByZXNzaW9uS2luZFtcIkJpbmRpbmdJZGVudGlmaWVyXCJdID0gNjU1NThdID0gXCJCaW5kaW5nSWRlbnRpZmllclwiO1xuICAgIEV4cHJlc3Npb25LaW5kW0V4cHJlc3Npb25LaW5kW1wiRm9yT2ZTdGF0ZW1lbnRcIl0gPSA2MTk5XSA9IFwiRm9yT2ZTdGF0ZW1lbnRcIjtcbiAgICBFeHByZXNzaW9uS2luZFtFeHByZXNzaW9uS2luZFtcIkludGVycG9sYXRpb25cIl0gPSAyNF0gPSBcIkludGVycG9sYXRpb25cIjsgLy9cbn0pKEV4cHJlc3Npb25LaW5kIHx8IChFeHByZXNzaW9uS2luZCA9IHt9KSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1mbGFncy5qcy5tYXAiLCJleHBvcnQgeyBDYWxsRnVuY3Rpb25FeHByZXNzaW9uLCBjb25uZWN0cywgb2JzZXJ2ZXMsIGNhbGxzRnVuY3Rpb24sIGhhc0FuY2VzdG9yLCBpc0Fzc2lnbmFibGUsIGlzTGVmdEhhbmRTaWRlLCBpc1ByaW1hcnksIGlzUmVzb3VyY2UsIGhhc0JpbmQsIGhhc1VuYmluZCwgaXNMaXRlcmFsLCBhcmVQdXJlTGl0ZXJhbHMsIGlzUHVyZUxpdGVyYWwsIEN1c3RvbUV4cHJlc3Npb24sIEJpbmRpbmdCZWhhdmlvckV4cHJlc3Npb24sIFZhbHVlQ29udmVydGVyRXhwcmVzc2lvbiwgQXNzaWduRXhwcmVzc2lvbiwgQ29uZGl0aW9uYWxFeHByZXNzaW9uLCBBY2Nlc3NUaGlzRXhwcmVzc2lvbiwgQWNjZXNzU2NvcGVFeHByZXNzaW9uLCBBY2Nlc3NNZW1iZXJFeHByZXNzaW9uLCBBY2Nlc3NLZXllZEV4cHJlc3Npb24sIENhbGxTY29wZUV4cHJlc3Npb24sIENhbGxNZW1iZXJFeHByZXNzaW9uLCBCaW5hcnlFeHByZXNzaW9uLCBVbmFyeUV4cHJlc3Npb24sIFByaW1pdGl2ZUxpdGVyYWxFeHByZXNzaW9uLCBIdG1sTGl0ZXJhbEV4cHJlc3Npb24sIEFycmF5TGl0ZXJhbEV4cHJlc3Npb24sIE9iamVjdExpdGVyYWxFeHByZXNzaW9uLCBUZW1wbGF0ZUV4cHJlc3Npb24sIFRhZ2dlZFRlbXBsYXRlRXhwcmVzc2lvbiwgQXJyYXlCaW5kaW5nUGF0dGVybiwgT2JqZWN0QmluZGluZ1BhdHRlcm4sIEJpbmRpbmdJZGVudGlmaWVyLCBGb3JPZlN0YXRlbWVudCwgSW50ZXJwb2xhdGlvbiB9IGZyb20gJy4vYmluZGluZy9hc3QnO1xuZXhwb3J0IHsgUHJvcGVydHlCaW5kaW5nIH0gZnJvbSAnLi9iaW5kaW5nL3Byb3BlcnR5LWJpbmRpbmcnO1xuZXhwb3J0IHsgQ2FsbEJpbmRpbmcgfSBmcm9tICcuL2JpbmRpbmcvY2FsbC1iaW5kaW5nJztcbmV4cG9ydCB7IGNvbm5lY3RhYmxlLCBCaW5kaW5nTWVkaWF0b3IgfSBmcm9tICcuL2JpbmRpbmcvY29ubmVjdGFibGUnO1xuZXhwb3J0IHsgSUV4cHJlc3Npb25QYXJzZXIsIEJpbmRpbmdUeXBlIH0gZnJvbSAnLi9iaW5kaW5nL2V4cHJlc3Npb24tcGFyc2VyJztcbmV4cG9ydCB7IE11bHRpSW50ZXJwb2xhdGlvbkJpbmRpbmcsIEludGVycG9sYXRpb25CaW5kaW5nIH0gZnJvbSAnLi9iaW5kaW5nL2ludGVycG9sYXRpb24tYmluZGluZyc7XG5leHBvcnQgeyBMZXRCaW5kaW5nIH0gZnJvbSAnLi9iaW5kaW5nL2xldC1iaW5kaW5nJztcbmV4cG9ydCB7IFJlZkJpbmRpbmcgfSBmcm9tICcuL2JpbmRpbmcvcmVmLWJpbmRpbmcnO1xuZXhwb3J0IHsgQXJyYXlPYnNlcnZlciwgQXJyYXlJbmRleE9ic2VydmVyLCBlbmFibGVBcnJheU9ic2VydmF0aW9uLCBkaXNhYmxlQXJyYXlPYnNlcnZhdGlvbiwgYXBwbHlNdXRhdGlvbnNUb0luZGljZXMsIHN5bmNocm9uaXplSW5kaWNlcywgfSBmcm9tICcuL29ic2VydmF0aW9uL2FycmF5LW9ic2VydmVyJztcbmV4cG9ydCB7IE1hcE9ic2VydmVyLCBlbmFibGVNYXBPYnNlcnZhdGlvbiwgZGlzYWJsZU1hcE9ic2VydmF0aW9uIH0gZnJvbSAnLi9vYnNlcnZhdGlvbi9tYXAtb2JzZXJ2ZXInO1xuZXhwb3J0IHsgU2V0T2JzZXJ2ZXIsIGVuYWJsZVNldE9ic2VydmF0aW9uLCBkaXNhYmxlU2V0T2JzZXJ2YXRpb24gfSBmcm9tICcuL29ic2VydmF0aW9uL3NldC1vYnNlcnZlcic7XG5leHBvcnQgeyBCaW5kaW5nQ29udGV4dCwgU2NvcGUsIE92ZXJyaWRlQ29udGV4dCB9IGZyb20gJy4vb2JzZXJ2YXRpb24vYmluZGluZy1jb250ZXh0JztcbmV4cG9ydCB7IENvbGxlY3Rpb25MZW5ndGhPYnNlcnZlciwgfSBmcm9tICcuL29ic2VydmF0aW9uL2NvbGxlY3Rpb24tbGVuZ3RoLW9ic2VydmVyJztcbmV4cG9ydCB7IENvbGxlY3Rpb25TaXplT2JzZXJ2ZXIsIH0gZnJvbSAnLi9vYnNlcnZhdGlvbi9jb2xsZWN0aW9uLXNpemUtb2JzZXJ2ZXInO1xuZXhwb3J0IHsgY29tcHV0ZWQsIGNyZWF0ZUNvbXB1dGVkT2JzZXJ2ZXIsIEN1c3RvbVNldHRlck9ic2VydmVyLCBHZXR0ZXJPYnNlcnZlciB9IGZyb20gJy4vb2JzZXJ2YXRpb24vY29tcHV0ZWQtb2JzZXJ2ZXInO1xuZXhwb3J0IHsgSURpcnR5Q2hlY2tlciwgRGlydHlDaGVja1Byb3BlcnR5LCBEaXJ0eUNoZWNrU2V0dGluZ3MgfSBmcm9tICcuL29ic2VydmF0aW9uL2RpcnR5LWNoZWNrZXInO1xuZXhwb3J0IHsgSU9ic2VydmVyTG9jYXRvciwgSVRhcmdldE9ic2VydmVyTG9jYXRvciwgSVRhcmdldEFjY2Vzc29yTG9jYXRvciwgZ2V0Q29sbGVjdGlvbk9ic2VydmVyLCBPYnNlcnZlckxvY2F0b3IgfSBmcm9tICcuL29ic2VydmF0aW9uL29ic2VydmVyLWxvY2F0b3InO1xuZXhwb3J0IHsgUHJpbWl0aXZlT2JzZXJ2ZXIgfSBmcm9tICcuL29ic2VydmF0aW9uL3ByaW1pdGl2ZS1vYnNlcnZlcic7XG5leHBvcnQgeyBQcm9wZXJ0eUFjY2Vzc29yIH0gZnJvbSAnLi9vYnNlcnZhdGlvbi9wcm9wZXJ0eS1hY2Nlc3Nvcic7XG5leHBvcnQgeyBQcm94eU9ic2VydmVyIH0gZnJvbSAnLi9vYnNlcnZhdGlvbi9wcm94eS1vYnNlcnZlcic7XG5leHBvcnQgeyBCaW5kYWJsZU9ic2VydmVyIH0gZnJvbSAnLi9vYnNlcnZhdGlvbi9iaW5kYWJsZS1vYnNlcnZlcic7XG5leHBvcnQgeyBTZXR0ZXJPYnNlcnZlciB9IGZyb20gJy4vb2JzZXJ2YXRpb24vc2V0dGVyLW9ic2VydmVyJztcbmV4cG9ydCB7IElTaWduYWxlciB9IGZyb20gJy4vb2JzZXJ2YXRpb24vc2lnbmFsZXInO1xuZXhwb3J0IHsgc3Vic2NyaWJlckNvbGxlY3Rpb24sIGNvbGxlY3Rpb25TdWJzY3JpYmVyQ29sbGVjdGlvbiwgcHJveHlTdWJzY3JpYmVyQ29sbGVjdGlvbiwgfSBmcm9tICcuL29ic2VydmF0aW9uL3N1YnNjcmliZXItY29sbGVjdGlvbic7XG5leHBvcnQgeyBiaW5kaW5nQmVoYXZpb3IsIEJpbmRpbmdCZWhhdmlvciwgQmluZGluZ0JlaGF2aW9yRGVmaW5pdGlvbiwgQmluZGluZ0ludGVyY2VwdG9yIH0gZnJvbSAnLi9yZXNvdXJjZXMvYmluZGluZy1iZWhhdmlvcic7XG5leHBvcnQgeyBCaW5kaW5nTW9kZUJlaGF2aW9yLCBPbmVUaW1lQmluZGluZ0JlaGF2aW9yLCBUb1ZpZXdCaW5kaW5nQmVoYXZpb3IsIEZyb21WaWV3QmluZGluZ0JlaGF2aW9yLCBUd29XYXlCaW5kaW5nQmVoYXZpb3IgfSBmcm9tICcuL3Jlc291cmNlcy9iaW5kaW5nLWJlaGF2aW9ycy9iaW5kaW5nLW1vZGUnO1xuZXhwb3J0IHsgRGVib3VuY2VCaW5kaW5nQmVoYXZpb3IgfSBmcm9tICcuL3Jlc291cmNlcy9iaW5kaW5nLWJlaGF2aW9ycy9kZWJvdW5jZSc7XG5leHBvcnQgeyBTaWduYWxCaW5kaW5nQmVoYXZpb3IgfSBmcm9tICcuL3Jlc291cmNlcy9iaW5kaW5nLWJlaGF2aW9ycy9zaWduYWxzJztcbmV4cG9ydCB7IFRocm90dGxlQmluZGluZ0JlaGF2aW9yIH0gZnJvbSAnLi9yZXNvdXJjZXMvYmluZGluZy1iZWhhdmlvcnMvdGhyb3R0bGUnO1xuZXhwb3J0IHsgY3VzdG9tQXR0cmlidXRlLCBDdXN0b21BdHRyaWJ1dGUsIEN1c3RvbUF0dHJpYnV0ZURlZmluaXRpb24sIHRlbXBsYXRlQ29udHJvbGxlciwgfSBmcm9tICcuL3Jlc291cmNlcy9jdXN0b20tYXR0cmlidXRlJztcbmV4cG9ydCB7IEZyZXF1ZW50TXV0YXRpb25zLCBJbmZyZXF1ZW50TXV0YXRpb25zLCBPYnNlcnZlU2hhbGxvdywgfSBmcm9tICcuL3Jlc291cmNlcy9jdXN0b20tYXR0cmlidXRlcy9mbGFncyc7XG5leHBvcnQgeyBJZiwgRWxzZSB9IGZyb20gJy4vcmVzb3VyY2VzL2N1c3RvbS1hdHRyaWJ1dGVzL2lmJztcbmV4cG9ydCB7IFJlcGVhdCB9IGZyb20gJy4vcmVzb3VyY2VzL2N1c3RvbS1hdHRyaWJ1dGVzL3JlcGVhdCc7XG5leHBvcnQgeyBSZXBsYWNlYWJsZSB9IGZyb20gJy4vcmVzb3VyY2VzL2N1c3RvbS1hdHRyaWJ1dGVzL3JlcGxhY2VhYmxlJztcbmV4cG9ydCB7IFdpdGggfSBmcm9tICcuL3Jlc291cmNlcy9jdXN0b20tYXR0cmlidXRlcy93aXRoJztcbmV4cG9ydCB7IGNvbnRhaW5lcmxlc3MsIGN1c3RvbUVsZW1lbnQsIEN1c3RvbUVsZW1lbnQsIEN1c3RvbUVsZW1lbnREZWZpbml0aW9uLCBJUHJvamVjdG9yTG9jYXRvciwgdXNlU2hhZG93RE9NIH0gZnJvbSAnLi9yZXNvdXJjZXMvY3VzdG9tLWVsZW1lbnQnO1xuZXhwb3J0IHsgVmFsdWVDb252ZXJ0ZXIsIFZhbHVlQ29udmVydGVyRGVmaW5pdGlvbiwgdmFsdWVDb252ZXJ0ZXIsIH0gZnJvbSAnLi9yZXNvdXJjZXMvdmFsdWUtY29udmVydGVyJztcbmV4cG9ydCB7IElTYW5pdGl6ZXIsIFNhbml0aXplVmFsdWVDb252ZXJ0ZXIgfSBmcm9tICcuL3Jlc291cmNlcy92YWx1ZS1jb252ZXJ0ZXJzL3Nhbml0aXplJztcbmV4cG9ydCB7IFZpZXdWYWx1ZUNvbnZlcnRlciB9IGZyb20gJy4vcmVzb3VyY2VzL3ZhbHVlLWNvbnZlcnRlcnMvdmlldyc7XG5leHBvcnQgeyBOb3csIElTY2hlZHVsZXIsIFRhc2ssIFRhc2tBYm9ydEVycm9yLCBUYXNrUXVldWUsIFRhc2tRdWV1ZVByaW9yaXR5LCB9IGZyb20gJ0BhdXJlbGlhL3NjaGVkdWxlcic7XG5leHBvcnQgeyBiaW5kYWJsZSwgQmluZGFibGVEZWZpbml0aW9uLCBCaW5kYWJsZSwgfSBmcm9tICcuL3RlbXBsYXRpbmcvYmluZGFibGUnO1xuZXhwb3J0IHsgQ2hpbGRyZW5EZWZpbml0aW9uLCBDaGlsZHJlbiwgY2hpbGRyZW4sIENoaWxkcmVuT2JzZXJ2ZXIsIH0gZnJvbSAnLi90ZW1wbGF0aW5nL2NoaWxkcmVuJztcbi8vIFRoZXNlIGV4cG9ydHMgYXJlIHRlbXBvcmFyeSB1bnRpbCB3ZSBoYXZlIGEgcHJvcGVyIHdheSB0byB1bml0IHRlc3QgdGhlbVxuZXhwb3J0IHsgQ29udHJvbGxlciwgfSBmcm9tICcuL3RlbXBsYXRpbmcvY29udHJvbGxlcic7XG5leHBvcnQgeyBWaWV3RmFjdG9yeSwgSVZpZXdMb2NhdG9yLCBWaWV3TG9jYXRvciwgdmlldywgVmlld3MsIH0gZnJvbSAnLi90ZW1wbGF0aW5nL3ZpZXcnO1xuZXhwb3J0IHsgQXVyZWxpYSwgSURPTUluaXRpYWxpemVyLCBDb21wb3NpdGlvblJvb3QsIH0gZnJvbSAnLi9hdXJlbGlhJztcbmV4cG9ydCB7IElmUmVnaXN0cmF0aW9uLCBFbHNlUmVnaXN0cmF0aW9uLCBSZXBlYXRSZWdpc3RyYXRpb24sIFJlcGxhY2VhYmxlUmVnaXN0cmF0aW9uLCBXaXRoUmVnaXN0cmF0aW9uLCBTYW5pdGl6ZVZhbHVlQ29udmVydGVyUmVnaXN0cmF0aW9uLCBEZWJvdW5jZUJpbmRpbmdCZWhhdmlvclJlZ2lzdHJhdGlvbiwgT25lVGltZUJpbmRpbmdCZWhhdmlvclJlZ2lzdHJhdGlvbiwgVG9WaWV3QmluZGluZ0JlaGF2aW9yUmVnaXN0cmF0aW9uLCBGcm9tVmlld0JpbmRpbmdCZWhhdmlvclJlZ2lzdHJhdGlvbiwgU2lnbmFsQmluZGluZ0JlaGF2aW9yUmVnaXN0cmF0aW9uLCBUaHJvdHRsZUJpbmRpbmdCZWhhdmlvclJlZ2lzdHJhdGlvbiwgVHdvV2F5QmluZGluZ0JlaGF2aW9yUmVnaXN0cmF0aW9uLCBSZWZCaW5kaW5nUmVuZGVyZXJSZWdpc3RyYXRpb24sIENhbGxCaW5kaW5nUmVuZGVyZXJSZWdpc3RyYXRpb24sIEN1c3RvbUF0dHJpYnV0ZVJlbmRlcmVyUmVnaXN0cmF0aW9uLCBDdXN0b21FbGVtZW50UmVuZGVyZXJSZWdpc3RyYXRpb24sIEludGVycG9sYXRpb25CaW5kaW5nUmVuZGVyZXJSZWdpc3RyYXRpb24sIEl0ZXJhdG9yQmluZGluZ1JlbmRlcmVyUmVnaXN0cmF0aW9uLCBMZXRFbGVtZW50UmVuZGVyZXJSZWdpc3RyYXRpb24sIFByb3BlcnR5QmluZGluZ1JlbmRlcmVyUmVnaXN0cmF0aW9uLCBTZXRQcm9wZXJ0eVJlbmRlcmVyUmVnaXN0cmF0aW9uLCBUZW1wbGF0ZUNvbnRyb2xsZXJSZW5kZXJlclJlZ2lzdHJhdGlvbiwgRGVmYXVsdFJlc291cmNlcywgSU9ic2VydmVyTG9jYXRvclJlZ2lzdHJhdGlvbiwgSUxpZmVjeWNsZVJlZ2lzdHJhdGlvbiwgSVJlbmRlcmVyUmVnaXN0cmF0aW9uLCBSdW50aW1lQ29uZmlndXJhdGlvbiB9IGZyb20gJy4vY29uZmlndXJhdGlvbic7XG5leHBvcnQgeyBIb29rc0RlZmluaXRpb24sIGlzVGFyZ2V0ZWRJbnN0cnVjdGlvbiwgSVRhcmdldGVkSW5zdHJ1Y3Rpb24sIFRhcmdldGVkSW5zdHJ1Y3Rpb25UeXBlLCBhbGlhcywgcmVnaXN0ZXJBbGlhc2VzIH0gZnJvbSAnLi9kZWZpbml0aW9ucyc7XG5leHBvcnQgeyBET00sIElOb2RlLCBJUmVuZGVyTG9jYXRpb24sIElET00sIE5vZGVTZXF1ZW5jZSB9IGZyb20gJy4vZG9tJztcbmV4cG9ydCB7IEJpbmRpbmdNb2RlLCBCaW5kaW5nU3RyYXRlZ3ksIEV4cHJlc3Npb25LaW5kLCBMaWZlY3ljbGVGbGFncywgU3RhdGUgfSBmcm9tICcuL2ZsYWdzJztcbmV4cG9ydCB7IENhbGxCaW5kaW5nSW5zdHJ1Y3Rpb24sIEZyb21WaWV3QmluZGluZ0luc3RydWN0aW9uLCBIeWRyYXRlQXR0cmlidXRlSW5zdHJ1Y3Rpb24sIEh5ZHJhdGVFbGVtZW50SW5zdHJ1Y3Rpb24sIEh5ZHJhdGVUZW1wbGF0ZUNvbnRyb2xsZXIsIEludGVycG9sYXRpb25JbnN0cnVjdGlvbiwgSXRlcmF0b3JCaW5kaW5nSW5zdHJ1Y3Rpb24sIExldEJpbmRpbmdJbnN0cnVjdGlvbiwgTGV0RWxlbWVudEluc3RydWN0aW9uLCBPbmVUaW1lQmluZGluZ0luc3RydWN0aW9uLCBSZWZCaW5kaW5nSW5zdHJ1Y3Rpb24sIFNldFByb3BlcnR5SW5zdHJ1Y3Rpb24sIFRvVmlld0JpbmRpbmdJbnN0cnVjdGlvbiwgVHdvV2F5QmluZGluZ0luc3RydWN0aW9uIH0gZnJvbSAnLi9pbnN0cnVjdGlvbnMnO1xuZXhwb3J0IHsgVmlld01vZGVsS2luZCwgSUxpZmVjeWNsZSwgSUNvbnRyb2xsZXIsIElWaWV3RmFjdG9yeSwgTW91bnRTdHJhdGVneSwgfSBmcm9tICcuL2xpZmVjeWNsZSc7XG5leHBvcnQgeyBnZXRSZW5kZXJDb250ZXh0LCBpc1JlbmRlckNvbnRleHQsIH0gZnJvbSAnLi90ZW1wbGF0aW5nL3JlbmRlci1jb250ZXh0JztcbmV4cG9ydCB7IEFnZ3JlZ2F0ZUNvbnRpbnVhdGlvblRhc2ssIFRlcm1pbmFsVGFzaywgQWdncmVnYXRlVGVybWluYWxUYXNrLCBDb250aW51YXRpb25UYXNrLCBMaWZlY3ljbGVUYXNrLCBQcm9taXNlVGFzaywgVGFza1Nsb3QsIFN0YXJ0VGFzaywgSVN0YXJ0VGFzaywgSVN0YXJ0VGFza01hbmFnZXIsIFByb3ZpZGVyVGFzaywgfSBmcm9tICcuL2xpZmVjeWNsZS10YXNrJztcbmV4cG9ydCB7IENvbGxlY3Rpb25LaW5kLCBEZWxlZ2F0aW9uU3RyYXRlZ3ksIGlzSW5kZXhNYXAsIGNvcHlJbmRleE1hcCwgY2xvbmVJbmRleE1hcCwgY3JlYXRlSW5kZXhNYXAsIH0gZnJvbSAnLi9vYnNlcnZhdGlvbic7XG5leHBvcnQgeyBhcHBseUJpbmRpbmdCZWhhdmlvciwgSUluc3RydWN0aW9uUmVuZGVyZXIsIElSZW5kZXJlciwgSVRlbXBsYXRlQ29tcGlsZXIsIGluc3RydWN0aW9uUmVuZGVyZXIsIGVuc3VyZUV4cHJlc3Npb24sIH0gZnJvbSAnLi9yZW5kZXJlcic7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiLCJpbXBvcnQgeyBCaW5kaW5nTW9kZSB9IGZyb20gJy4vZmxhZ3MnO1xuZXhwb3J0IGNsYXNzIEludGVycG9sYXRpb25JbnN0cnVjdGlvbiB7XG4gICAgY29uc3RydWN0b3IoZnJvbSwgdG8pIHtcbiAgICAgICAgdGhpcy5mcm9tID0gZnJvbTtcbiAgICAgICAgdGhpcy50byA9IHRvO1xuICAgICAgICB0aGlzLnR5cGUgPSBcInJmXCIgLyogaW50ZXJwb2xhdGlvbiAqLztcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgT25lVGltZUJpbmRpbmdJbnN0cnVjdGlvbiB7XG4gICAgY29uc3RydWN0b3IoZnJvbSwgdG8pIHtcbiAgICAgICAgdGhpcy5mcm9tID0gZnJvbTtcbiAgICAgICAgdGhpcy50byA9IHRvO1xuICAgICAgICB0aGlzLnR5cGUgPSBcInJnXCIgLyogcHJvcGVydHlCaW5kaW5nICovO1xuICAgICAgICB0aGlzLm1vZGUgPSBCaW5kaW5nTW9kZS5vbmVUaW1lO1xuICAgICAgICB0aGlzLm9uZVRpbWUgPSB0cnVlO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBUb1ZpZXdCaW5kaW5nSW5zdHJ1Y3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKGZyb20sIHRvKSB7XG4gICAgICAgIHRoaXMuZnJvbSA9IGZyb207XG4gICAgICAgIHRoaXMudG8gPSB0bztcbiAgICAgICAgdGhpcy50eXBlID0gXCJyZ1wiIC8qIHByb3BlcnR5QmluZGluZyAqLztcbiAgICAgICAgdGhpcy5tb2RlID0gQmluZGluZ01vZGUudG9WaWV3O1xuICAgICAgICB0aGlzLm9uZVRpbWUgPSBmYWxzZTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgRnJvbVZpZXdCaW5kaW5nSW5zdHJ1Y3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKGZyb20sIHRvKSB7XG4gICAgICAgIHRoaXMuZnJvbSA9IGZyb207XG4gICAgICAgIHRoaXMudG8gPSB0bztcbiAgICAgICAgdGhpcy50eXBlID0gXCJyZ1wiIC8qIHByb3BlcnR5QmluZGluZyAqLztcbiAgICAgICAgdGhpcy5tb2RlID0gQmluZGluZ01vZGUuZnJvbVZpZXc7XG4gICAgICAgIHRoaXMub25lVGltZSA9IGZhbHNlO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBUd29XYXlCaW5kaW5nSW5zdHJ1Y3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKGZyb20sIHRvKSB7XG4gICAgICAgIHRoaXMuZnJvbSA9IGZyb207XG4gICAgICAgIHRoaXMudG8gPSB0bztcbiAgICAgICAgdGhpcy50eXBlID0gXCJyZ1wiIC8qIHByb3BlcnR5QmluZGluZyAqLztcbiAgICAgICAgdGhpcy5tb2RlID0gQmluZGluZ01vZGUudHdvV2F5O1xuICAgICAgICB0aGlzLm9uZVRpbWUgPSBmYWxzZTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgSXRlcmF0b3JCaW5kaW5nSW5zdHJ1Y3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKGZyb20sIHRvKSB7XG4gICAgICAgIHRoaXMuZnJvbSA9IGZyb207XG4gICAgICAgIHRoaXMudG8gPSB0bztcbiAgICAgICAgdGhpcy50eXBlID0gXCJya1wiIC8qIGl0ZXJhdG9yQmluZGluZyAqLztcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQ2FsbEJpbmRpbmdJbnN0cnVjdGlvbiB7XG4gICAgY29uc3RydWN0b3IoZnJvbSwgdG8pIHtcbiAgICAgICAgdGhpcy5mcm9tID0gZnJvbTtcbiAgICAgICAgdGhpcy50byA9IHRvO1xuICAgICAgICB0aGlzLnR5cGUgPSBcInJoXCIgLyogY2FsbEJpbmRpbmcgKi87XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFJlZkJpbmRpbmdJbnN0cnVjdGlvbiB7XG4gICAgY29uc3RydWN0b3IoZnJvbSwgdG8pIHtcbiAgICAgICAgdGhpcy5mcm9tID0gZnJvbTtcbiAgICAgICAgdGhpcy50byA9IHRvO1xuICAgICAgICB0aGlzLnR5cGUgPSBcInJqXCIgLyogcmVmQmluZGluZyAqLztcbiAgICAgICAgdGhpcy50eXBlID0gXCJyalwiIC8qIHJlZkJpbmRpbmcgKi87XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFNldFByb3BlcnR5SW5zdHJ1Y3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKHZhbHVlLCB0bykge1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICAgIHRoaXMudG8gPSB0bztcbiAgICAgICAgdGhpcy50eXBlID0gXCJyZVwiIC8qIHNldFByb3BlcnR5ICovO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBIeWRyYXRlRWxlbWVudEluc3RydWN0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihyZXMsIGluc3RydWN0aW9ucywgcGFydHMpIHtcbiAgICAgICAgdGhpcy5yZXMgPSByZXM7XG4gICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25zID0gaW5zdHJ1Y3Rpb25zO1xuICAgICAgICB0aGlzLnBhcnRzID0gcGFydHM7XG4gICAgICAgIHRoaXMudHlwZSA9IFwicmFcIiAvKiBoeWRyYXRlRWxlbWVudCAqLztcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgSHlkcmF0ZUF0dHJpYnV0ZUluc3RydWN0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihyZXMsIGluc3RydWN0aW9ucykge1xuICAgICAgICB0aGlzLnJlcyA9IHJlcztcbiAgICAgICAgdGhpcy5pbnN0cnVjdGlvbnMgPSBpbnN0cnVjdGlvbnM7XG4gICAgICAgIHRoaXMudHlwZSA9IFwicmJcIiAvKiBoeWRyYXRlQXR0cmlidXRlICovO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBIeWRyYXRlVGVtcGxhdGVDb250cm9sbGVyIHtcbiAgICBjb25zdHJ1Y3RvcihkZWYsIHJlcywgaW5zdHJ1Y3Rpb25zLCBsaW5rLCBwYXJ0cykge1xuICAgICAgICB0aGlzLmRlZiA9IGRlZjtcbiAgICAgICAgdGhpcy5yZXMgPSByZXM7XG4gICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25zID0gaW5zdHJ1Y3Rpb25zO1xuICAgICAgICB0aGlzLmxpbmsgPSBsaW5rO1xuICAgICAgICB0aGlzLnBhcnRzID0gcGFydHM7XG4gICAgICAgIHRoaXMudHlwZSA9IFwicmNcIiAvKiBoeWRyYXRlVGVtcGxhdGVDb250cm9sbGVyICovO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBMZXRFbGVtZW50SW5zdHJ1Y3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKGluc3RydWN0aW9ucywgdG9CaW5kaW5nQ29udGV4dCkge1xuICAgICAgICB0aGlzLmluc3RydWN0aW9ucyA9IGluc3RydWN0aW9ucztcbiAgICAgICAgdGhpcy50b0JpbmRpbmdDb250ZXh0ID0gdG9CaW5kaW5nQ29udGV4dDtcbiAgICAgICAgdGhpcy50eXBlID0gXCJyZFwiIC8qIGh5ZHJhdGVMZXRFbGVtZW50ICovO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBMZXRCaW5kaW5nSW5zdHJ1Y3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKGZyb20sIHRvKSB7XG4gICAgICAgIHRoaXMuZnJvbSA9IGZyb207XG4gICAgICAgIHRoaXMudG8gPSB0bztcbiAgICAgICAgdGhpcy50eXBlID0gXCJyaVwiIC8qIGxldEJpbmRpbmcgKi87XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5zdHJ1Y3Rpb25zLmpzLm1hcCIsImltcG9ydCB7IF9fZGVjb3JhdGUsIF9fbWV0YWRhdGEsIF9fcGFyYW0gfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IERJLCBJU2VydmljZUxvY2F0b3IsIFJlZ2lzdHJhdGlvbiwgfSBmcm9tICdAYXVyZWxpYS9rZXJuZWwnO1xuZXhwb3J0IGNvbnN0IExpZmVjeWNsZVRhc2sgPSB7XG4gICAgZG9uZToge1xuICAgICAgICBkb25lOiB0cnVlLFxuICAgICAgICBjYW5DYW5jZWwoKSB7IHJldHVybiBmYWxzZTsgfSxcbiAgICAgICAgY2FuY2VsKCkgeyByZXR1cm47IH0sXG4gICAgICAgIHdhaXQoKSB7IHJldHVybiBQcm9taXNlLnJlc29sdmUoKTsgfVxuICAgIH1cbn07XG5leHBvcnQgdmFyIFRhc2tTbG90O1xuKGZ1bmN0aW9uIChUYXNrU2xvdCkge1xuICAgIFRhc2tTbG90W1Rhc2tTbG90W1wiYmVmb3JlQ3JlYXRlXCJdID0gMF0gPSBcImJlZm9yZUNyZWF0ZVwiO1xuICAgIFRhc2tTbG90W1Rhc2tTbG90W1wiYmVmb3JlUmVuZGVyXCJdID0gMV0gPSBcImJlZm9yZVJlbmRlclwiO1xuICAgIFRhc2tTbG90W1Rhc2tTbG90W1wiYmVmb3JlQmluZFwiXSA9IDJdID0gXCJiZWZvcmVCaW5kXCI7XG4gICAgVGFza1Nsb3RbVGFza1Nsb3RbXCJiZWZvcmVBdHRhY2hcIl0gPSAzXSA9IFwiYmVmb3JlQXR0YWNoXCI7XG59KShUYXNrU2xvdCB8fCAoVGFza1Nsb3QgPSB7fSkpO1xuZXhwb3J0IGNvbnN0IElTdGFydFRhc2sgPSBESS5jcmVhdGVJbnRlcmZhY2UoJ0lTdGFydFRhc2snKS5ub0RlZmF1bHQoKTtcbnZhciBUYXNrVHlwZTtcbihmdW5jdGlvbiAoVGFza1R5cGUpIHtcbiAgICBUYXNrVHlwZVtUYXNrVHlwZVtcIndpdGhcIl0gPSAwXSA9IFwid2l0aFwiO1xuICAgIFRhc2tUeXBlW1Rhc2tUeXBlW1wiZnJvbVwiXSA9IDFdID0gXCJmcm9tXCI7XG59KShUYXNrVHlwZSB8fCAoVGFza1R5cGUgPSB7fSkpO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9jbGFzcy1uYW1lLWNhc2luZ1xuZXhwb3J0IGNvbnN0IFN0YXJ0VGFzayA9IGNsYXNzICRTdGFydFRhc2sge1xuICAgIGNvbnN0cnVjdG9yKHR5cGUpIHtcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICAgICAgdGhpcy5fc2xvdCA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5fcHJvbWlzZU9yVGFzayA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5fY29udGFpbmVyID0gdm9pZCAwO1xuICAgICAgICB0aGlzLl9rZXkgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMuX2NhbGxiYWNrID0gdm9pZCAwO1xuICAgICAgICB0aGlzLl90YXNrID0gdm9pZCAwO1xuICAgIH1cbiAgICBnZXQgc2xvdCgpIHtcbiAgICAgICAgaWYgKHRoaXMuX3Nsb3QgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdTdGFydFRhc2suc2xvdCBpcyBub3Qgc2V0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX3Nsb3Q7XG4gICAgfVxuICAgIGdldCBwcm9taXNlT3JUYXNrKCkge1xuICAgICAgICBpZiAodGhpcy5fcHJvbWlzZU9yVGFzayA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1N0YXJ0VGFzay5wcm9taXNlT3JUYXNrIGlzIG5vdCBzZXQnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fcHJvbWlzZU9yVGFzaztcbiAgICB9XG4gICAgZ2V0IGNvbnRhaW5lcigpIHtcbiAgICAgICAgaWYgKHRoaXMuX2NvbnRhaW5lciA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1N0YXJ0VGFzay5jb250YWluZXIgaXMgbm90IHNldCcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9jb250YWluZXI7XG4gICAgfVxuICAgIGdldCBrZXkoKSB7XG4gICAgICAgIGlmICh0aGlzLl9rZXkgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdTdGFydFRhc2sua2V5IGlzIG5vdCBzZXQnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fa2V5O1xuICAgIH1cbiAgICBnZXQgY2FsbGJhY2soKSB7XG4gICAgICAgIGlmICh0aGlzLl9jYWxsYmFjayA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1N0YXJ0VGFzay5jYWxsYmFjayBpcyBub3Qgc2V0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhbGxiYWNrO1xuICAgIH1cbiAgICBnZXQgdGFzaygpIHtcbiAgICAgICAgaWYgKHRoaXMuX3Rhc2sgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdTdGFydFRhc2sudGFzayBpcyBub3Qgc2V0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX3Rhc2s7XG4gICAgfVxuICAgIHN0YXRpYyB3aXRoKGtleSkge1xuICAgICAgICBjb25zdCB0YXNrID0gbmV3ICRTdGFydFRhc2soMCAvKiB3aXRoICovKTtcbiAgICAgICAgdGFzay5fa2V5ID0ga2V5O1xuICAgICAgICByZXR1cm4gdGFzaztcbiAgICB9XG4gICAgc3RhdGljIGZyb20ocHJvbWlzZU9yVGFzaykge1xuICAgICAgICBjb25zdCB0YXNrID0gbmV3ICRTdGFydFRhc2soMSAvKiBmcm9tICovKTtcbiAgICAgICAgdGFzay5fcHJvbWlzZU9yVGFzayA9IHByb21pc2VPclRhc2s7XG4gICAgICAgIHJldHVybiB0YXNrO1xuICAgIH1cbiAgICBiZWZvcmVDcmVhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmF0KDAgLyogYmVmb3JlQ3JlYXRlICovKTtcbiAgICB9XG4gICAgYmVmb3JlUmVuZGVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hdCgxIC8qIGJlZm9yZVJlbmRlciAqLyk7XG4gICAgfVxuICAgIGJlZm9yZUJpbmQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmF0KDIgLyogYmVmb3JlQmluZCAqLyk7XG4gICAgfVxuICAgIGJlZm9yZUF0dGFjaCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXQoMyAvKiBiZWZvcmVBdHRhY2ggKi8pO1xuICAgIH1cbiAgICBhdChzbG90KSB7XG4gICAgICAgIHRoaXMuX3Nsb3QgPSBzbG90O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgY2FsbChmbikge1xuICAgICAgICB0aGlzLl9jYWxsYmFjayA9IGZuO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgcmVnaXN0ZXIoY29udGFpbmVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jb250YWluZXIgPSBjb250YWluZXIucmVnaXN0ZXIoUmVnaXN0cmF0aW9uLmluc3RhbmNlKElTdGFydFRhc2ssIHRoaXMpKTtcbiAgICB9XG4gICAgcmVzb2x2ZVRhc2soKSB7XG4gICAgICAgIGlmICh0aGlzLl90YXNrID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy50eXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwIC8qIHdpdGggKi86XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3Rhc2sgPSBuZXcgUHJvdmlkZXJUYXNrKHRoaXMuY29udGFpbmVyLCB0aGlzLmtleSwgdGhpcy5jYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMSAvKiBmcm9tICovOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLl90YXNrID0gbmV3IFRlcm1pbmFsVGFzayh0aGlzLnByb21pc2VPclRhc2spO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy50YXNrO1xuICAgIH1cbn07XG5leHBvcnQgY29uc3QgSVN0YXJ0VGFza01hbmFnZXIgPSBESS5jcmVhdGVJbnRlcmZhY2UoJ0lTdGFydFRhc2tNYW5hZ2VyJykubm9EZWZhdWx0KCk7XG5sZXQgU3RhcnRUYXNrTWFuYWdlciA9IGNsYXNzIFN0YXJ0VGFza01hbmFnZXIge1xuICAgIGNvbnN0cnVjdG9yKGxvY2F0b3IpIHtcbiAgICAgICAgdGhpcy5sb2NhdG9yID0gbG9jYXRvcjtcbiAgICB9XG4gICAgc3RhdGljIHJlZ2lzdGVyKGNvbnRhaW5lcikge1xuICAgICAgICByZXR1cm4gUmVnaXN0cmF0aW9uLnNpbmdsZXRvbihJU3RhcnRUYXNrTWFuYWdlciwgdGhpcykucmVnaXN0ZXIoY29udGFpbmVyKTtcbiAgICB9XG4gICAgcnVuQmVmb3JlQ3JlYXRlKGxvY2F0b3IgPSB0aGlzLmxvY2F0b3IpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucnVuKDAgLyogYmVmb3JlQ3JlYXRlICovLCBsb2NhdG9yKTtcbiAgICB9XG4gICAgcnVuQmVmb3JlUmVuZGVyKGxvY2F0b3IgPSB0aGlzLmxvY2F0b3IpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucnVuKDEgLyogYmVmb3JlUmVuZGVyICovLCBsb2NhdG9yKTtcbiAgICB9XG4gICAgcnVuQmVmb3JlQmluZChsb2NhdG9yID0gdGhpcy5sb2NhdG9yKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJ1bigyIC8qIGJlZm9yZUJpbmQgKi8sIGxvY2F0b3IpO1xuICAgIH1cbiAgICBydW5CZWZvcmVBdHRhY2gobG9jYXRvciA9IHRoaXMubG9jYXRvcikge1xuICAgICAgICByZXR1cm4gdGhpcy5ydW4oMyAvKiBiZWZvcmVBdHRhY2ggKi8sIGxvY2F0b3IpO1xuICAgIH1cbiAgICBydW4oc2xvdCwgbG9jYXRvciA9IHRoaXMubG9jYXRvcikge1xuICAgICAgICBjb25zdCB0YXNrcyA9IGxvY2F0b3IuZ2V0QWxsKElTdGFydFRhc2spXG4gICAgICAgICAgICAuZmlsdGVyKHN0YXJ0VGFzayA9PiBzdGFydFRhc2suc2xvdCA9PT0gc2xvdClcbiAgICAgICAgICAgIC5tYXAoc3RhcnRUYXNrID0+IHN0YXJ0VGFzay5yZXNvbHZlVGFzaygpKVxuICAgICAgICAgICAgLmZpbHRlcih0YXNrID0+ICF0YXNrLmRvbmUpO1xuICAgICAgICBpZiAodGFza3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gTGlmZWN5Y2xlVGFzay5kb25lO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgQWdncmVnYXRlVGVybWluYWxUYXNrKHRhc2tzKTtcbiAgICB9XG59O1xuU3RhcnRUYXNrTWFuYWdlciA9IF9fZGVjb3JhdGUoW1xuICAgIF9fcGFyYW0oMCwgSVNlcnZpY2VMb2NhdG9yKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW09iamVjdF0pXG5dLCBTdGFydFRhc2tNYW5hZ2VyKTtcbmV4cG9ydCB7IFN0YXJ0VGFza01hbmFnZXIgfTtcbmV4cG9ydCBjbGFzcyBQcm9taXNlVGFzayB7XG4gICAgY29uc3RydWN0b3IocHJvbWlzZSwgbmV4dCwgY29udGV4dCwgLi4uYXJncykge1xuICAgICAgICB0aGlzLmRvbmUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5oYXNTdGFydGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaXNDYW5jZWxsZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcm9taXNlID0gcHJvbWlzZS50aGVuKHZhbHVlID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzQ2FuY2VsbGVkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5oYXNTdGFydGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmIChuZXh0ICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV4dFJlc3VsdCA9IG5leHQuY2FsbChjb250ZXh0LCB2YWx1ZSwgLi4uYXJncyk7XG4gICAgICAgICAgICAgICAgaWYgKG5leHRSZXN1bHQgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRvbmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV4dFByb21pc2UgPSBuZXh0UmVzdWx0LnRoZW4gaW5zdGFuY2VvZiBGdW5jdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgPyBuZXh0UmVzdWx0XG4gICAgICAgICAgICAgICAgICAgICAgICA6IG5leHRSZXN1bHQud2FpdCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV4dFByb21pc2UudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRvbmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjYW5DYW5jZWwoKSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5oYXNTdGFydGVkO1xuICAgIH1cbiAgICBjYW5jZWwoKSB7XG4gICAgICAgIGlmICh0aGlzLmNhbkNhbmNlbCgpKSB7XG4gICAgICAgICAgICB0aGlzLmlzQ2FuY2VsbGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB3YWl0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9taXNlO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBQcm92aWRlclRhc2sge1xuICAgIGNvbnN0cnVjdG9yKGNvbnRhaW5lciwga2V5LCBjYWxsYmFjaykge1xuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgICAgICAgdGhpcy5rZXkgPSBrZXk7XG4gICAgICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICAgICAgdGhpcy5kb25lID0gZmFsc2U7XG4gICAgfVxuICAgIGNhbkNhbmNlbCgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjYW5jZWwoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgd2FpdCgpIHtcbiAgICAgICAgaWYgKHRoaXMucHJvbWlzZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBjb25zdCBpbnN0YW5jZSA9IHRoaXMuY29udGFpbmVyLmdldCh0aGlzLmtleSk7XG4gICAgICAgICAgICBjb25zdCBtYXliZVByb21pc2VPclRhc2sgPSB0aGlzLmNhbGxiYWNrLmNhbGwodm9pZCAwLCBpbnN0YW5jZSk7XG4gICAgICAgICAgICB0aGlzLnByb21pc2UgPSBtYXliZVByb21pc2VPclRhc2sgPT09IHZvaWQgMFxuICAgICAgICAgICAgICAgID8gUHJvbWlzZS5yZXNvbHZlKClcbiAgICAgICAgICAgICAgICA6IG1heWJlUHJvbWlzZU9yVGFzay50aGVuIGluc3RhbmNlb2YgRnVuY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgPyBtYXliZVByb21pc2VPclRhc2tcbiAgICAgICAgICAgICAgICAgICAgOiBtYXliZVByb21pc2VPclRhc2sud2FpdCgpO1xuICAgICAgICAgICAgdGhpcy5wcm9taXNlID0gdGhpcy5wcm9taXNlLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuZG9uZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXIgPSAodm9pZCAwKTtcbiAgICAgICAgICAgICAgICB0aGlzLmtleSA9ICh2b2lkIDApO1xuICAgICAgICAgICAgICAgIHRoaXMuY2FsbGJhY2sgPSAodm9pZCAwKTtcbiAgICAgICAgICAgIH0pLmNhdGNoKGUgPT4geyB0aHJvdyBlOyB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5wcm9taXNlO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBDb250aW51YXRpb25UYXNrIHtcbiAgICBjb25zdHJ1Y3RvcihhbnRlY2VkZW50LCBuZXh0LCBjb250ZXh0LCAuLi5hcmdzKSB7XG4gICAgICAgIHRoaXMuZG9uZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmhhc1N0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5pc0NhbmNlbGxlZCA9IGZhbHNlO1xuICAgICAgICBjb25zdCBwcm9taXNlID0gYW50ZWNlZGVudC50aGVuIGluc3RhbmNlb2YgRnVuY3Rpb25cbiAgICAgICAgICAgID8gYW50ZWNlZGVudFxuICAgICAgICAgICAgOiBhbnRlY2VkZW50LndhaXQoKTtcbiAgICAgICAgdGhpcy5wcm9taXNlID0gcHJvbWlzZS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzQ2FuY2VsbGVkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5oYXNTdGFydGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGNvbnN0IG5leHRSZXN1bHQgPSBuZXh0LmNhbGwoY29udGV4dCwgLi4uYXJncyk7XG4gICAgICAgICAgICBpZiAobmV4dFJlc3VsdCA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kb25lID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5leHRQcm9taXNlID0gbmV4dFJlc3VsdC50aGVuIGluc3RhbmNlb2YgRnVuY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgPyBuZXh0UmVzdWx0XG4gICAgICAgICAgICAgICAgICAgIDogbmV4dFJlc3VsdC53YWl0KCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5leHRQcm9taXNlLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRvbmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2FuQ2FuY2VsKCkge1xuICAgICAgICByZXR1cm4gIXRoaXMuaGFzU3RhcnRlZDtcbiAgICB9XG4gICAgY2FuY2VsKCkge1xuICAgICAgICBpZiAodGhpcy5jYW5DYW5jZWwoKSkge1xuICAgICAgICAgICAgdGhpcy5pc0NhbmNlbGxlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgd2FpdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvbWlzZTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgVGVybWluYWxUYXNrIHtcbiAgICBjb25zdHJ1Y3RvcihhbnRlY2VkZW50KSB7XG4gICAgICAgIHRoaXMuZG9uZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLnByb21pc2UgPSBhbnRlY2VkZW50LnRoZW4gaW5zdGFuY2VvZiBGdW5jdGlvblxuICAgICAgICAgICAgPyBhbnRlY2VkZW50XG4gICAgICAgICAgICA6IGFudGVjZWRlbnQud2FpdCgpO1xuICAgICAgICB0aGlzLnByb21pc2UudGhlbigoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmRvbmUgPSB0cnVlO1xuICAgICAgICB9KS5jYXRjaChlID0+IHsgdGhyb3cgZTsgfSk7XG4gICAgfVxuICAgIGNhbkNhbmNlbCgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjYW5jZWwoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgd2FpdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvbWlzZTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQWdncmVnYXRlQ29udGludWF0aW9uVGFzayB7XG4gICAgY29uc3RydWN0b3IoYW50ZWNlZGVudHMsIG5leHQsIGNvbnRleHQsIC4uLmFyZ3MpIHtcbiAgICAgICAgdGhpcy5kb25lID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaGFzU3RhcnRlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmlzQ2FuY2VsbGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHJvbWlzZSA9IFByb21pc2UuYWxsKGFudGVjZWRlbnRzLm1hcCh0ID0+IHQud2FpdCgpKSkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0NhbmNlbGxlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaGFzU3RhcnRlZCA9IHRydWU7XG4gICAgICAgICAgICBjb25zdCBuZXh0UmVzdWx0ID0gbmV4dC5jYWxsKGNvbnRleHQsIC4uLmFyZ3MpO1xuICAgICAgICAgICAgaWYgKG5leHRSZXN1bHQgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZG9uZSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV4dFJlc3VsdC53YWl0KCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZG9uZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjYW5DYW5jZWwoKSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5oYXNTdGFydGVkO1xuICAgIH1cbiAgICBjYW5jZWwoKSB7XG4gICAgICAgIGlmICh0aGlzLmNhbkNhbmNlbCgpKSB7XG4gICAgICAgICAgICB0aGlzLmlzQ2FuY2VsbGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB3YWl0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9taXNlO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBBZ2dyZWdhdGVUZXJtaW5hbFRhc2sge1xuICAgIGNvbnN0cnVjdG9yKGFudGVjZWRlbnRzKSB7XG4gICAgICAgIHRoaXMuZG9uZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLnByb21pc2UgPSBQcm9taXNlLmFsbChhbnRlY2VkZW50cy5tYXAodCA9PiB0LndhaXQoKSkpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5kb25lID0gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNhbkNhbmNlbCgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjYW5jZWwoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgd2FpdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvbWlzZTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gaGFzQXN5bmNXb3JrKHZhbHVlKSB7XG4gICAgcmV0dXJuICEodmFsdWUgPT09IHZvaWQgMCB8fCB2YWx1ZS5kb25lID09PSB0cnVlKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWxpZmVjeWNsZS10YXNrLmpzLm1hcCIsImltcG9ydCB7IF9fZGVjb3JhdGUsIF9fbWV0YWRhdGEsIF9fcGFyYW0gfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IERJLCBSZWdpc3RyYXRpb24sIH0gZnJvbSAnQGF1cmVsaWEva2VybmVsJztcbmV4cG9ydCB2YXIgVmlld01vZGVsS2luZDtcbihmdW5jdGlvbiAoVmlld01vZGVsS2luZCkge1xuICAgIFZpZXdNb2RlbEtpbmRbVmlld01vZGVsS2luZFtcImN1c3RvbUVsZW1lbnRcIl0gPSAwXSA9IFwiY3VzdG9tRWxlbWVudFwiO1xuICAgIFZpZXdNb2RlbEtpbmRbVmlld01vZGVsS2luZFtcImN1c3RvbUF0dHJpYnV0ZVwiXSA9IDFdID0gXCJjdXN0b21BdHRyaWJ1dGVcIjtcbiAgICBWaWV3TW9kZWxLaW5kW1ZpZXdNb2RlbEtpbmRbXCJzeW50aGV0aWNcIl0gPSAyXSA9IFwic3ludGhldGljXCI7XG59KShWaWV3TW9kZWxLaW5kIHx8IChWaWV3TW9kZWxLaW5kID0ge30pKTtcbmV4cG9ydCBjb25zdCBJQ29udHJvbGxlciA9IERJLmNyZWF0ZUludGVyZmFjZSgnSUNvbnRyb2xsZXInKS5ub0RlZmF1bHQoKTtcbi8qKlxuICogRGVzY3JpYmluZyBjaGFyYWN0ZXJpc3RpY3Mgb2YgYSBtb3VudGluZyBvcGVyYXRpb24gYSBjb250cm9sbGVyIHdpbGwgcGVyZm9ybVxuICovXG5leHBvcnQgdmFyIE1vdW50U3RyYXRlZ3k7XG4oZnVuY3Rpb24gKE1vdW50U3RyYXRlZ3kpIHtcbiAgICBNb3VudFN0cmF0ZWd5W01vdW50U3RyYXRlZ3lbXCJpbnNlcnRCZWZvcmVcIl0gPSAxXSA9IFwiaW5zZXJ0QmVmb3JlXCI7XG4gICAgTW91bnRTdHJhdGVneVtNb3VudFN0cmF0ZWd5W1wiYXBwZW5kXCJdID0gMl0gPSBcImFwcGVuZFwiO1xufSkoTW91bnRTdHJhdGVneSB8fCAoTW91bnRTdHJhdGVneSA9IHt9KSk7XG5leHBvcnQgY29uc3QgSVZpZXdGYWN0b3J5ID0gREkuY3JlYXRlSW50ZXJmYWNlKCdJVmlld0ZhY3RvcnknKS5ub0RlZmF1bHQoKTtcbmV4cG9ydCBjb25zdCBJTGlmZWN5Y2xlID0gREkuY3JlYXRlSW50ZXJmYWNlKCdJTGlmZWN5Y2xlJykud2l0aERlZmF1bHQoeCA9PiB4LnNpbmdsZXRvbihMaWZlY3ljbGUpKTtcbmxldCBCb3VuZFF1ZXVlID0gY2xhc3MgQm91bmRRdWV1ZSB7XG4gICAgY29uc3RydWN0b3IobGlmZWN5Y2xlKSB7XG4gICAgICAgIHRoaXMubGlmZWN5Y2xlID0gbGlmZWN5Y2xlO1xuICAgICAgICB0aGlzLmRlcHRoID0gMDtcbiAgICAgICAgdGhpcy5oZWFkID0gdm9pZCAwO1xuICAgICAgICB0aGlzLnRhaWwgPSB2b2lkIDA7XG4gICAgfVxuICAgIGJlZ2luKCkge1xuICAgICAgICArK3RoaXMuZGVwdGg7XG4gICAgfVxuICAgIGVuZChmbGFncykge1xuICAgICAgICBpZiAoZmxhZ3MgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgZmxhZ3MgPSAwIC8qIG5vbmUgKi87XG4gICAgICAgIH1cbiAgICAgICAgaWYgKC0tdGhpcy5kZXB0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5wcm9jZXNzKGZsYWdzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpbmxpbmUoZm4sIGZsYWdzKSB7XG4gICAgICAgIHRoaXMuYmVnaW4oKTtcbiAgICAgICAgZm4oKTtcbiAgICAgICAgdGhpcy5lbmQoZmxhZ3MpO1xuICAgIH1cbiAgICBhZGQoY29udHJvbGxlcikge1xuICAgICAgICBpZiAodGhpcy5oZWFkID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIHRoaXMuaGVhZCA9IGNvbnRyb2xsZXI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb250cm9sbGVyLnByZXZCb3VuZCA9IHRoaXMudGFpbDtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG4gICAgICAgICAgICB0aGlzLnRhaWwubmV4dEJvdW5kID0gY29udHJvbGxlcjsgLy8gaW1wbGllZCBieSBib3VuZEhlYWQgbm90IGJlaW5nIHVuZGVmaW5lZFxuICAgICAgICB9XG4gICAgICAgIHRoaXMudGFpbCA9IGNvbnRyb2xsZXI7XG4gICAgfVxuICAgIHJlbW92ZShjb250cm9sbGVyKSB7XG4gICAgICAgIGlmIChjb250cm9sbGVyLnByZXZCb3VuZCAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBjb250cm9sbGVyLnByZXZCb3VuZC5uZXh0Qm91bmQgPSBjb250cm9sbGVyLm5leHRCb3VuZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29udHJvbGxlci5uZXh0Qm91bmQgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgY29udHJvbGxlci5uZXh0Qm91bmQucHJldkJvdW5kID0gY29udHJvbGxlci5wcmV2Qm91bmQ7XG4gICAgICAgIH1cbiAgICAgICAgY29udHJvbGxlci5wcmV2Qm91bmQgPSB2b2lkIDA7XG4gICAgICAgIGNvbnRyb2xsZXIubmV4dEJvdW5kID0gdm9pZCAwO1xuICAgICAgICBpZiAodGhpcy50YWlsID09PSBjb250cm9sbGVyKSB7XG4gICAgICAgICAgICB0aGlzLnRhaWwgPSBjb250cm9sbGVyLnByZXZCb3VuZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5oZWFkID09PSBjb250cm9sbGVyKSB7XG4gICAgICAgICAgICB0aGlzLmhlYWQgPSBjb250cm9sbGVyLm5leHRCb3VuZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBwcm9jZXNzKGZsYWdzKSB7XG4gICAgICAgIHdoaWxlICh0aGlzLmhlYWQgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgbGV0IGN1ciA9IHRoaXMuaGVhZDtcbiAgICAgICAgICAgIHRoaXMuaGVhZCA9IHRoaXMudGFpbCA9IHZvaWQgMDtcbiAgICAgICAgICAgIGxldCBuZXh0O1xuICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgIGN1ci5hZnRlckJpbmQoZmxhZ3MpO1xuICAgICAgICAgICAgICAgIG5leHQgPSBjdXIubmV4dEJvdW5kO1xuICAgICAgICAgICAgICAgIGN1ci5uZXh0Qm91bmQgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgY3VyLnByZXZCb3VuZCA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvblxuICAgICAgICAgICAgICAgIGN1ciA9IG5leHQ7IC8vIHdlJ3JlIGNoZWNraW5nIGl0IGZvciB1bmRlZmluZWQgdGhlIG5leHQgbGluZVxuICAgICAgICAgICAgfSB3aGlsZSAoY3VyICE9PSB2b2lkIDApO1xuICAgICAgICB9XG4gICAgfVxufTtcbkJvdW5kUXVldWUgPSBfX2RlY29yYXRlKFtcbiAgICBfX3BhcmFtKDAsIElMaWZlY3ljbGUpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0XSlcbl0sIEJvdW5kUXVldWUpO1xuZXhwb3J0IHsgQm91bmRRdWV1ZSB9O1xubGV0IFVuYm91bmRRdWV1ZSA9IGNsYXNzIFVuYm91bmRRdWV1ZSB7XG4gICAgY29uc3RydWN0b3IobGlmZWN5Y2xlKSB7XG4gICAgICAgIHRoaXMubGlmZWN5Y2xlID0gbGlmZWN5Y2xlO1xuICAgICAgICB0aGlzLmRlcHRoID0gMDtcbiAgICAgICAgdGhpcy5oZWFkID0gdm9pZCAwO1xuICAgICAgICB0aGlzLnRhaWwgPSB2b2lkIDA7XG4gICAgfVxuICAgIGJlZ2luKCkge1xuICAgICAgICArK3RoaXMuZGVwdGg7XG4gICAgfVxuICAgIGVuZChmbGFncykge1xuICAgICAgICBpZiAoZmxhZ3MgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgZmxhZ3MgPSAwIC8qIG5vbmUgKi87XG4gICAgICAgIH1cbiAgICAgICAgaWYgKC0tdGhpcy5kZXB0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5wcm9jZXNzKGZsYWdzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpbmxpbmUoZm4sIGZsYWdzKSB7XG4gICAgICAgIHRoaXMuYmVnaW4oKTtcbiAgICAgICAgZm4oKTtcbiAgICAgICAgdGhpcy5lbmQoZmxhZ3MpO1xuICAgIH1cbiAgICBhZGQoY29udHJvbGxlcikge1xuICAgICAgICBpZiAodGhpcy5oZWFkID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIHRoaXMuaGVhZCA9IGNvbnRyb2xsZXI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb250cm9sbGVyLnByZXZVbmJvdW5kID0gdGhpcy50YWlsO1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgICAgICAgICAgIHRoaXMudGFpbC5uZXh0VW5ib3VuZCA9IGNvbnRyb2xsZXI7IC8vIGltcGxpZWQgYnkgdW5ib3VuZEhlYWQgbm90IGJlaW5nIHVuZGVmaW5lZFxuICAgICAgICB9XG4gICAgICAgIHRoaXMudGFpbCA9IGNvbnRyb2xsZXI7XG4gICAgfVxuICAgIHJlbW92ZShjb250cm9sbGVyKSB7XG4gICAgICAgIGlmIChjb250cm9sbGVyLnByZXZVbmJvdW5kICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIucHJldlVuYm91bmQubmV4dFVuYm91bmQgPSBjb250cm9sbGVyLm5leHRVbmJvdW5kO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb250cm9sbGVyLm5leHRVbmJvdW5kICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIubmV4dFVuYm91bmQucHJldlVuYm91bmQgPSBjb250cm9sbGVyLnByZXZVbmJvdW5kO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRyb2xsZXIucHJldlVuYm91bmQgPSB2b2lkIDA7XG4gICAgICAgIGNvbnRyb2xsZXIubmV4dFVuYm91bmQgPSB2b2lkIDA7XG4gICAgICAgIGlmICh0aGlzLnRhaWwgPT09IGNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgIHRoaXMudGFpbCA9IGNvbnRyb2xsZXIucHJldlVuYm91bmQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaGVhZCA9PT0gY29udHJvbGxlcikge1xuICAgICAgICAgICAgdGhpcy5oZWFkID0gY29udHJvbGxlci5uZXh0VW5ib3VuZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBwcm9jZXNzKGZsYWdzKSB7XG4gICAgICAgIHdoaWxlICh0aGlzLmhlYWQgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgbGV0IGN1ciA9IHRoaXMuaGVhZDtcbiAgICAgICAgICAgIHRoaXMuaGVhZCA9IHRoaXMudGFpbCA9IHZvaWQgMDtcbiAgICAgICAgICAgIGxldCBuZXh0O1xuICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgIGN1ci5hZnRlclVuYmluZChmbGFncyk7XG4gICAgICAgICAgICAgICAgbmV4dCA9IGN1ci5uZXh0VW5ib3VuZDtcbiAgICAgICAgICAgICAgICBjdXIubmV4dFVuYm91bmQgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgY3VyLnByZXZVbmJvdW5kID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG4gICAgICAgICAgICAgICAgY3VyID0gbmV4dDsgLy8gd2UncmUgY2hlY2tpbmcgaXQgZm9yIHVuZGVmaW5lZCB0aGUgbmV4dCBsaW5lXG4gICAgICAgICAgICB9IHdoaWxlIChjdXIgIT09IHZvaWQgMCk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuVW5ib3VuZFF1ZXVlID0gX19kZWNvcmF0ZShbXG4gICAgX19wYXJhbSgwLCBJTGlmZWN5Y2xlKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW09iamVjdF0pXG5dLCBVbmJvdW5kUXVldWUpO1xuZXhwb3J0IHsgVW5ib3VuZFF1ZXVlIH07XG5sZXQgQXR0YWNoZWRRdWV1ZSA9IGNsYXNzIEF0dGFjaGVkUXVldWUge1xuICAgIGNvbnN0cnVjdG9yKGxpZmVjeWNsZSkge1xuICAgICAgICB0aGlzLmxpZmVjeWNsZSA9IGxpZmVjeWNsZTtcbiAgICAgICAgdGhpcy5kZXB0aCA9IDA7XG4gICAgICAgIHRoaXMuaGVhZCA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy50YWlsID0gdm9pZCAwO1xuICAgIH1cbiAgICBiZWdpbigpIHtcbiAgICAgICAgKyt0aGlzLmRlcHRoO1xuICAgIH1cbiAgICBlbmQoZmxhZ3MpIHtcbiAgICAgICAgaWYgKGZsYWdzID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIGZsYWdzID0gMCAvKiBub25lICovO1xuICAgICAgICB9XG4gICAgICAgIGlmICgtLXRoaXMuZGVwdGggPT09IDApIHtcbiAgICAgICAgICAgIC8vIHRlbXBvcmFyeSwgdW50aWwgZXZlcnl0aGluZyBlbHNlIHdvcmtzIGFuZCB3ZSdyZSByZWFkeSBmb3IgaW50ZWdyYXRpbmcgbW91bnQvdW5tb3VudCBpbiB0aGUgUkFGIHF1ZXVlXG4gICAgICAgICAgICB0aGlzLmxpZmVjeWNsZS5tb3VudC5wcm9jZXNzKGZsYWdzKTtcbiAgICAgICAgICAgIHRoaXMucHJvY2VzcyhmbGFncyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaW5saW5lKGZuLCBmbGFncykge1xuICAgICAgICB0aGlzLmJlZ2luKCk7XG4gICAgICAgIGZuKCk7XG4gICAgICAgIHRoaXMuZW5kKGZsYWdzKTtcbiAgICB9XG4gICAgYWRkKGNvbnRyb2xsZXIpIHtcbiAgICAgICAgaWYgKHRoaXMuaGVhZCA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICB0aGlzLmhlYWQgPSBjb250cm9sbGVyO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29udHJvbGxlci5wcmV2QXR0YWNoZWQgPSB0aGlzLnRhaWw7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvblxuICAgICAgICAgICAgdGhpcy50YWlsLm5leHRBdHRhY2hlZCA9IGNvbnRyb2xsZXI7IC8vIGltcGxpZWQgYnkgYXR0YWNoZWRIZWFkIG5vdCBiZWluZyB1bmRlZmluZWRcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRhaWwgPSBjb250cm9sbGVyO1xuICAgIH1cbiAgICByZW1vdmUoY29udHJvbGxlcikge1xuICAgICAgICBpZiAoY29udHJvbGxlci5wcmV2QXR0YWNoZWQgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgY29udHJvbGxlci5wcmV2QXR0YWNoZWQubmV4dEF0dGFjaGVkID0gY29udHJvbGxlci5uZXh0QXR0YWNoZWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbnRyb2xsZXIubmV4dEF0dGFjaGVkICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIubmV4dEF0dGFjaGVkLnByZXZBdHRhY2hlZCA9IGNvbnRyb2xsZXIucHJldkF0dGFjaGVkO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRyb2xsZXIucHJldkF0dGFjaGVkID0gdm9pZCAwO1xuICAgICAgICBjb250cm9sbGVyLm5leHRBdHRhY2hlZCA9IHZvaWQgMDtcbiAgICAgICAgaWYgKHRoaXMudGFpbCA9PT0gY29udHJvbGxlcikge1xuICAgICAgICAgICAgdGhpcy50YWlsID0gY29udHJvbGxlci5wcmV2QXR0YWNoZWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaGVhZCA9PT0gY29udHJvbGxlcikge1xuICAgICAgICAgICAgdGhpcy5oZWFkID0gY29udHJvbGxlci5uZXh0QXR0YWNoZWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcHJvY2VzcyhmbGFncykge1xuICAgICAgICB3aGlsZSAodGhpcy5oZWFkICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgIGxldCBjdXIgPSB0aGlzLmhlYWQ7XG4gICAgICAgICAgICB0aGlzLmhlYWQgPSB0aGlzLnRhaWwgPSB2b2lkIDA7XG4gICAgICAgICAgICBsZXQgbmV4dDtcbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICBjdXIuYWZ0ZXJBdHRhY2goZmxhZ3MpO1xuICAgICAgICAgICAgICAgIG5leHQgPSBjdXIubmV4dEF0dGFjaGVkO1xuICAgICAgICAgICAgICAgIGN1ci5uZXh0QXR0YWNoZWQgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgY3VyLnByZXZBdHRhY2hlZCA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvblxuICAgICAgICAgICAgICAgIGN1ciA9IG5leHQ7IC8vIHdlJ3JlIGNoZWNraW5nIGl0IGZvciB1bmRlZmluZWQgdGhlIG5leHQgbGluZVxuICAgICAgICAgICAgfSB3aGlsZSAoY3VyICE9PSB2b2lkIDApO1xuICAgICAgICB9XG4gICAgfVxufTtcbkF0dGFjaGVkUXVldWUgPSBfX2RlY29yYXRlKFtcbiAgICBfX3BhcmFtKDAsIElMaWZlY3ljbGUpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0XSlcbl0sIEF0dGFjaGVkUXVldWUpO1xuZXhwb3J0IHsgQXR0YWNoZWRRdWV1ZSB9O1xubGV0IERldGFjaGVkUXVldWUgPSBjbGFzcyBEZXRhY2hlZFF1ZXVlIHtcbiAgICBjb25zdHJ1Y3RvcihsaWZlY3ljbGUpIHtcbiAgICAgICAgdGhpcy5saWZlY3ljbGUgPSBsaWZlY3ljbGU7XG4gICAgICAgIHRoaXMuZGVwdGggPSAwO1xuICAgICAgICB0aGlzLmhlYWQgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMudGFpbCA9IHZvaWQgMDtcbiAgICB9XG4gICAgYmVnaW4oKSB7XG4gICAgICAgICsrdGhpcy5kZXB0aDtcbiAgICB9XG4gICAgZW5kKGZsYWdzKSB7XG4gICAgICAgIGlmIChmbGFncyA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBmbGFncyA9IDAgLyogbm9uZSAqLztcbiAgICAgICAgfVxuICAgICAgICBpZiAoLS10aGlzLmRlcHRoID09PSAwKSB7XG4gICAgICAgICAgICAvLyB0ZW1wb3JhcnksIHVudGlsIGV2ZXJ5dGhpbmcgZWxzZSB3b3JrcyBhbmQgd2UncmUgcmVhZHkgZm9yIGludGVncmF0aW5nIG1vdW50L3VubW91bnQgaW4gdGhlIFJBRiBxdWV1ZVxuICAgICAgICAgICAgdGhpcy5saWZlY3ljbGUudW5tb3VudC5wcm9jZXNzKGZsYWdzKTtcbiAgICAgICAgICAgIHRoaXMucHJvY2VzcyhmbGFncyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaW5saW5lKGZuLCBmbGFncykge1xuICAgICAgICB0aGlzLmJlZ2luKCk7XG4gICAgICAgIGZuKCk7XG4gICAgICAgIHRoaXMuZW5kKGZsYWdzKTtcbiAgICB9XG4gICAgYWRkKGNvbnRyb2xsZXIpIHtcbiAgICAgICAgaWYgKHRoaXMuaGVhZCA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICB0aGlzLmhlYWQgPSBjb250cm9sbGVyO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29udHJvbGxlci5wcmV2RGV0YWNoZWQgPSB0aGlzLnRhaWw7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvblxuICAgICAgICAgICAgdGhpcy50YWlsLm5leHREZXRhY2hlZCA9IGNvbnRyb2xsZXI7IC8vIGltcGxpZWQgYnkgZGV0YWNoZWRIZWFkIG5vdCBiZWluZyB1bmRlZmluZWRcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRhaWwgPSBjb250cm9sbGVyO1xuICAgIH1cbiAgICByZW1vdmUoY29udHJvbGxlcikge1xuICAgICAgICBpZiAoY29udHJvbGxlci5wcmV2RGV0YWNoZWQgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgY29udHJvbGxlci5wcmV2RGV0YWNoZWQubmV4dERldGFjaGVkID0gY29udHJvbGxlci5uZXh0RGV0YWNoZWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbnRyb2xsZXIubmV4dERldGFjaGVkICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIubmV4dERldGFjaGVkLnByZXZEZXRhY2hlZCA9IGNvbnRyb2xsZXIucHJldkRldGFjaGVkO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRyb2xsZXIucHJldkRldGFjaGVkID0gdm9pZCAwO1xuICAgICAgICBjb250cm9sbGVyLm5leHREZXRhY2hlZCA9IHZvaWQgMDtcbiAgICAgICAgaWYgKHRoaXMudGFpbCA9PT0gY29udHJvbGxlcikge1xuICAgICAgICAgICAgdGhpcy50YWlsID0gY29udHJvbGxlci5wcmV2RGV0YWNoZWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaGVhZCA9PT0gY29udHJvbGxlcikge1xuICAgICAgICAgICAgdGhpcy5oZWFkID0gY29udHJvbGxlci5uZXh0RGV0YWNoZWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcHJvY2VzcyhmbGFncykge1xuICAgICAgICB3aGlsZSAodGhpcy5oZWFkICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgIGxldCBjdXIgPSB0aGlzLmhlYWQ7XG4gICAgICAgICAgICB0aGlzLmhlYWQgPSB0aGlzLnRhaWwgPSB2b2lkIDA7XG4gICAgICAgICAgICBsZXQgbmV4dDtcbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICBjdXIuYWZ0ZXJEZXRhY2goZmxhZ3MpO1xuICAgICAgICAgICAgICAgIG5leHQgPSBjdXIubmV4dERldGFjaGVkO1xuICAgICAgICAgICAgICAgIGN1ci5uZXh0RGV0YWNoZWQgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgY3VyLnByZXZEZXRhY2hlZCA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvblxuICAgICAgICAgICAgICAgIGN1ciA9IG5leHQ7IC8vIHdlJ3JlIGNoZWNraW5nIGl0IGZvciB1bmRlZmluZWQgdGhlIG5leHQgbGluZVxuICAgICAgICAgICAgfSB3aGlsZSAoY3VyICE9PSB2b2lkIDApO1xuICAgICAgICB9XG4gICAgfVxufTtcbkRldGFjaGVkUXVldWUgPSBfX2RlY29yYXRlKFtcbiAgICBfX3BhcmFtKDAsIElMaWZlY3ljbGUpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0XSlcbl0sIERldGFjaGVkUXVldWUpO1xuZXhwb3J0IHsgRGV0YWNoZWRRdWV1ZSB9O1xubGV0IE1vdW50UXVldWUgPSBjbGFzcyBNb3VudFF1ZXVlIHtcbiAgICBjb25zdHJ1Y3RvcihsaWZlY3ljbGUpIHtcbiAgICAgICAgdGhpcy5saWZlY3ljbGUgPSBsaWZlY3ljbGU7XG4gICAgICAgIHRoaXMuZGVwdGggPSAwO1xuICAgICAgICB0aGlzLmhlYWQgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMudGFpbCA9IHZvaWQgMDtcbiAgICB9XG4gICAgYWRkKGNvbnRyb2xsZXIpIHtcbiAgICAgICAgaWYgKHRoaXMuaGVhZCA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICB0aGlzLmhlYWQgPSBjb250cm9sbGVyO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29udHJvbGxlci5wcmV2TW91bnQgPSB0aGlzLnRhaWw7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvblxuICAgICAgICAgICAgdGhpcy50YWlsLm5leHRNb3VudCA9IGNvbnRyb2xsZXI7IC8vIGltcGxpZWQgYnkgbW91bnRIZWFkIG5vdCBiZWluZyB1bmRlZmluZWRcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRhaWwgPSBjb250cm9sbGVyO1xuICAgIH1cbiAgICByZW1vdmUoY29udHJvbGxlcikge1xuICAgICAgICBpZiAoY29udHJvbGxlci5wcmV2TW91bnQgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgY29udHJvbGxlci5wcmV2TW91bnQubmV4dE1vdW50ID0gY29udHJvbGxlci5uZXh0TW91bnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbnRyb2xsZXIubmV4dE1vdW50ICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXIubmV4dE1vdW50LnByZXZNb3VudCA9IGNvbnRyb2xsZXIucHJldk1vdW50O1xuICAgICAgICB9XG4gICAgICAgIGNvbnRyb2xsZXIucHJldk1vdW50ID0gdm9pZCAwO1xuICAgICAgICBjb250cm9sbGVyLm5leHRNb3VudCA9IHZvaWQgMDtcbiAgICAgICAgaWYgKHRoaXMudGFpbCA9PT0gY29udHJvbGxlcikge1xuICAgICAgICAgICAgdGhpcy50YWlsID0gY29udHJvbGxlci5wcmV2TW91bnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaGVhZCA9PT0gY29udHJvbGxlcikge1xuICAgICAgICAgICAgdGhpcy5oZWFkID0gY29udHJvbGxlci5uZXh0TW91bnQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcHJvY2VzcyhmbGFncykge1xuICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgIHdoaWxlICh0aGlzLmhlYWQgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgbGV0IGN1ciA9IHRoaXMuaGVhZDtcbiAgICAgICAgICAgIHRoaXMuaGVhZCA9IHRoaXMudGFpbCA9IHZvaWQgMDtcbiAgICAgICAgICAgIGxldCBuZXh0O1xuICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgICsraTtcbiAgICAgICAgICAgICAgICBjdXIubW91bnQoZmxhZ3MpO1xuICAgICAgICAgICAgICAgIG5leHQgPSBjdXIubmV4dE1vdW50O1xuICAgICAgICAgICAgICAgIGN1ci5uZXh0TW91bnQgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgY3VyLnByZXZNb3VudCA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvblxuICAgICAgICAgICAgICAgIGN1ciA9IG5leHQ7IC8vIHdlJ3JlIGNoZWNraW5nIGl0IGZvciB1bmRlZmluZWQgdGhlIG5leHQgbGluZVxuICAgICAgICAgICAgfSB3aGlsZSAoY3VyICE9PSB2b2lkIDApO1xuICAgICAgICB9XG4gICAgfVxufTtcbk1vdW50UXVldWUgPSBfX2RlY29yYXRlKFtcbiAgICBfX3BhcmFtKDAsIElMaWZlY3ljbGUpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0XSlcbl0sIE1vdW50UXVldWUpO1xuZXhwb3J0IHsgTW91bnRRdWV1ZSB9O1xubGV0IFVubW91bnRRdWV1ZSA9IGNsYXNzIFVubW91bnRRdWV1ZSB7XG4gICAgY29uc3RydWN0b3IobGlmZWN5Y2xlKSB7XG4gICAgICAgIHRoaXMubGlmZWN5Y2xlID0gbGlmZWN5Y2xlO1xuICAgICAgICB0aGlzLmhlYWQgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMudGFpbCA9IHZvaWQgMDtcbiAgICB9XG4gICAgYWRkKGNvbnRyb2xsZXIpIHtcbiAgICAgICAgaWYgKHRoaXMuaGVhZCA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICB0aGlzLmhlYWQgPSBjb250cm9sbGVyO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29udHJvbGxlci5wcmV2VW5tb3VudCA9IHRoaXMudGFpbDtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG4gICAgICAgICAgICB0aGlzLnRhaWwubmV4dFVubW91bnQgPSBjb250cm9sbGVyOyAvLyBpbXBsaWVkIGJ5IHVubW91bnRIZWFkIG5vdCBiZWluZyB1bmRlZmluZWRcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRhaWwgPSBjb250cm9sbGVyO1xuICAgIH1cbiAgICByZW1vdmUoY29udHJvbGxlcikge1xuICAgICAgICBpZiAoY29udHJvbGxlci5wcmV2VW5tb3VudCAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBjb250cm9sbGVyLnByZXZVbm1vdW50Lm5leHRVbm1vdW50ID0gY29udHJvbGxlci5uZXh0VW5tb3VudDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29udHJvbGxlci5uZXh0VW5tb3VudCAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBjb250cm9sbGVyLm5leHRVbm1vdW50LnByZXZVbm1vdW50ID0gY29udHJvbGxlci5wcmV2VW5tb3VudDtcbiAgICAgICAgfVxuICAgICAgICBjb250cm9sbGVyLnByZXZVbm1vdW50ID0gdm9pZCAwO1xuICAgICAgICBjb250cm9sbGVyLm5leHRVbm1vdW50ID0gdm9pZCAwO1xuICAgICAgICBpZiAodGhpcy50YWlsID09PSBjb250cm9sbGVyKSB7XG4gICAgICAgICAgICB0aGlzLnRhaWwgPSBjb250cm9sbGVyLnByZXZVbm1vdW50O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmhlYWQgPT09IGNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgIHRoaXMuaGVhZCA9IGNvbnRyb2xsZXIubmV4dFVubW91bnQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcHJvY2VzcyhmbGFncykge1xuICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgIHdoaWxlICh0aGlzLmhlYWQgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgbGV0IGN1ciA9IHRoaXMuaGVhZDtcbiAgICAgICAgICAgIHRoaXMuaGVhZCA9IHRoaXMudGFpbCA9IHZvaWQgMDtcbiAgICAgICAgICAgIGxldCBuZXh0O1xuICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgICsraTtcbiAgICAgICAgICAgICAgICBjdXIudW5tb3VudChmbGFncyk7XG4gICAgICAgICAgICAgICAgbmV4dCA9IGN1ci5uZXh0VW5tb3VudDtcbiAgICAgICAgICAgICAgICBjdXIubmV4dFVubW91bnQgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgY3VyLnByZXZVbm1vdW50ID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG4gICAgICAgICAgICAgICAgY3VyID0gbmV4dDsgLy8gd2UncmUgY2hlY2tpbmcgaXQgZm9yIHVuZGVmaW5lZCB0aGUgbmV4dCBsaW5lXG4gICAgICAgICAgICB9IHdoaWxlIChjdXIgIT09IHZvaWQgMCk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuVW5tb3VudFF1ZXVlID0gX19kZWNvcmF0ZShbXG4gICAgX19wYXJhbSgwLCBJTGlmZWN5Y2xlKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW09iamVjdF0pXG5dLCBVbm1vdW50UXVldWUpO1xuZXhwb3J0IHsgVW5tb3VudFF1ZXVlIH07XG5sZXQgQmF0Y2hRdWV1ZSA9IGNsYXNzIEJhdGNoUXVldWUge1xuICAgIGNvbnN0cnVjdG9yKGxpZmVjeWNsZSkge1xuICAgICAgICB0aGlzLmxpZmVjeWNsZSA9IGxpZmVjeWNsZTtcbiAgICAgICAgdGhpcy5xdWV1ZSA9IFtdO1xuICAgICAgICB0aGlzLmRlcHRoID0gMDtcbiAgICB9XG4gICAgYmVnaW4oKSB7XG4gICAgICAgICsrdGhpcy5kZXB0aDtcbiAgICB9XG4gICAgZW5kKGZsYWdzKSB7XG4gICAgICAgIGlmIChmbGFncyA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBmbGFncyA9IDAgLyogbm9uZSAqLztcbiAgICAgICAgfVxuICAgICAgICBpZiAoLS10aGlzLmRlcHRoID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLnByb2Nlc3MoZmxhZ3MpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlubGluZShmbiwgZmxhZ3MpIHtcbiAgICAgICAgdGhpcy5iZWdpbigpO1xuICAgICAgICBmbigpO1xuICAgICAgICB0aGlzLmVuZChmbGFncyk7XG4gICAgfVxuICAgIGFkZChyZXF1ZXN0b3IpIHtcbiAgICAgICAgdGhpcy5xdWV1ZS5wdXNoKHJlcXVlc3Rvcik7XG4gICAgfVxuICAgIHJlbW92ZShyZXF1ZXN0b3IpIHtcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLnF1ZXVlLmluZGV4T2YocmVxdWVzdG9yKTtcbiAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgIHRoaXMucXVldWUuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBwcm9jZXNzKGZsYWdzKSB7XG4gICAgICAgIGZsYWdzIHw9IDUxMiAvKiBmcm9tQmF0Y2ggKi87XG4gICAgICAgIHdoaWxlICh0aGlzLnF1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGJhdGNoID0gdGhpcy5xdWV1ZS5zbGljZSgpO1xuICAgICAgICAgICAgdGhpcy5xdWV1ZSA9IFtdO1xuICAgICAgICAgICAgY29uc3QgeyBsZW5ndGggfSA9IGJhdGNoO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgIGJhdGNoW2ldLmZsdXNoQmF0Y2goZmxhZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufTtcbkJhdGNoUXVldWUgPSBfX2RlY29yYXRlKFtcbiAgICBfX3BhcmFtKDAsIElMaWZlY3ljbGUpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0XSlcbl0sIEJhdGNoUXVldWUpO1xuZXhwb3J0IHsgQmF0Y2hRdWV1ZSB9O1xuZXhwb3J0IGNsYXNzIExpZmVjeWNsZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuYmF0Y2ggPSBuZXcgQmF0Y2hRdWV1ZSh0aGlzKTtcbiAgICAgICAgdGhpcy5tb3VudCA9IG5ldyBNb3VudFF1ZXVlKHRoaXMpO1xuICAgICAgICB0aGlzLnVubW91bnQgPSBuZXcgVW5tb3VudFF1ZXVlKHRoaXMpO1xuICAgICAgICB0aGlzLmFmdGVyQmluZCA9IG5ldyBCb3VuZFF1ZXVlKHRoaXMpO1xuICAgICAgICB0aGlzLmFmdGVyVW5iaW5kID0gbmV3IFVuYm91bmRRdWV1ZSh0aGlzKTtcbiAgICAgICAgdGhpcy5hZnRlckF0dGFjaCA9IG5ldyBBdHRhY2hlZFF1ZXVlKHRoaXMpO1xuICAgICAgICB0aGlzLmFmdGVyRGV0YWNoID0gbmV3IERldGFjaGVkUXVldWUodGhpcyk7XG4gICAgfVxuICAgIHN0YXRpYyByZWdpc3Rlcihjb250YWluZXIpIHtcbiAgICAgICAgcmV0dXJuIFJlZ2lzdHJhdGlvbi5zaW5nbGV0b24oSUxpZmVjeWNsZSwgdGhpcykucmVnaXN0ZXIoY29udGFpbmVyKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1saWZlY3ljbGUuanMubWFwIiwiLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IHZhciBTdWJzY3JpYmVyRmxhZ3M7XG4oZnVuY3Rpb24gKFN1YnNjcmliZXJGbGFncykge1xuICAgIFN1YnNjcmliZXJGbGFnc1tTdWJzY3JpYmVyRmxhZ3NbXCJOb25lXCJdID0gMF0gPSBcIk5vbmVcIjtcbiAgICBTdWJzY3JpYmVyRmxhZ3NbU3Vic2NyaWJlckZsYWdzW1wiU3Vic2NyaWJlcjBcIl0gPSAxXSA9IFwiU3Vic2NyaWJlcjBcIjtcbiAgICBTdWJzY3JpYmVyRmxhZ3NbU3Vic2NyaWJlckZsYWdzW1wiU3Vic2NyaWJlcjFcIl0gPSAyXSA9IFwiU3Vic2NyaWJlcjFcIjtcbiAgICBTdWJzY3JpYmVyRmxhZ3NbU3Vic2NyaWJlckZsYWdzW1wiU3Vic2NyaWJlcjJcIl0gPSA0XSA9IFwiU3Vic2NyaWJlcjJcIjtcbiAgICBTdWJzY3JpYmVyRmxhZ3NbU3Vic2NyaWJlckZsYWdzW1wiU3Vic2NyaWJlcnNSZXN0XCJdID0gOF0gPSBcIlN1YnNjcmliZXJzUmVzdFwiO1xuICAgIFN1YnNjcmliZXJGbGFnc1tTdWJzY3JpYmVyRmxhZ3NbXCJBbnlcIl0gPSAxNV0gPSBcIkFueVwiO1xufSkoU3Vic2NyaWJlckZsYWdzIHx8IChTdWJzY3JpYmVyRmxhZ3MgPSB7fSkpO1xuZXhwb3J0IHZhciBEZWxlZ2F0aW9uU3RyYXRlZ3k7XG4oZnVuY3Rpb24gKERlbGVnYXRpb25TdHJhdGVneSkge1xuICAgIERlbGVnYXRpb25TdHJhdGVneVtEZWxlZ2F0aW9uU3RyYXRlZ3lbXCJub25lXCJdID0gMF0gPSBcIm5vbmVcIjtcbiAgICBEZWxlZ2F0aW9uU3RyYXRlZ3lbRGVsZWdhdGlvblN0cmF0ZWd5W1wiY2FwdHVyaW5nXCJdID0gMV0gPSBcImNhcHR1cmluZ1wiO1xuICAgIERlbGVnYXRpb25TdHJhdGVneVtEZWxlZ2F0aW9uU3RyYXRlZ3lbXCJidWJibGluZ1wiXSA9IDJdID0gXCJidWJibGluZ1wiO1xufSkoRGVsZWdhdGlvblN0cmF0ZWd5IHx8IChEZWxlZ2F0aW9uU3RyYXRlZ3kgPSB7fSkpO1xuZXhwb3J0IHZhciBDb2xsZWN0aW9uS2luZDtcbihmdW5jdGlvbiAoQ29sbGVjdGlvbktpbmQpIHtcbiAgICBDb2xsZWN0aW9uS2luZFtDb2xsZWN0aW9uS2luZFtcImluZGV4ZWRcIl0gPSA4XSA9IFwiaW5kZXhlZFwiO1xuICAgIENvbGxlY3Rpb25LaW5kW0NvbGxlY3Rpb25LaW5kW1wia2V5ZWRcIl0gPSA0XSA9IFwia2V5ZWRcIjtcbiAgICBDb2xsZWN0aW9uS2luZFtDb2xsZWN0aW9uS2luZFtcImFycmF5XCJdID0gOV0gPSBcImFycmF5XCI7XG4gICAgQ29sbGVjdGlvbktpbmRbQ29sbGVjdGlvbktpbmRbXCJtYXBcIl0gPSA2XSA9IFwibWFwXCI7XG4gICAgQ29sbGVjdGlvbktpbmRbQ29sbGVjdGlvbktpbmRbXCJzZXRcIl0gPSA3XSA9IFwic2V0XCI7XG59KShDb2xsZWN0aW9uS2luZCB8fCAoQ29sbGVjdGlvbktpbmQgPSB7fSkpO1xuZXhwb3J0IGZ1bmN0aW9uIGNvcHlJbmRleE1hcChleGlzdGluZywgZGVsZXRlZEl0ZW1zKSB7XG4gICAgY29uc3QgeyBsZW5ndGggfSA9IGV4aXN0aW5nO1xuICAgIGNvbnN0IGFyciA9IEFycmF5KGxlbmd0aCk7XG4gICAgbGV0IGkgPSAwO1xuICAgIHdoaWxlIChpIDwgbGVuZ3RoKSB7XG4gICAgICAgIGFycltpXSA9IGV4aXN0aW5nW2ldO1xuICAgICAgICArK2k7XG4gICAgfVxuICAgIGlmIChkZWxldGVkSXRlbXMgIT09IHZvaWQgMCkge1xuICAgICAgICBhcnIuZGVsZXRlZEl0ZW1zID0gZGVsZXRlZEl0ZW1zLnNsaWNlKDApO1xuICAgIH1cbiAgICBlbHNlIGlmIChleGlzdGluZy5kZWxldGVkSXRlbXMgIT09IHZvaWQgMCkge1xuICAgICAgICBhcnIuZGVsZXRlZEl0ZW1zID0gZXhpc3RpbmcuZGVsZXRlZEl0ZW1zLnNsaWNlKDApO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgYXJyLmRlbGV0ZWRJdGVtcyA9IFtdO1xuICAgIH1cbiAgICBhcnIuaXNJbmRleE1hcCA9IHRydWU7XG4gICAgcmV0dXJuIGFycjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVJbmRleE1hcChsZW5ndGggPSAwKSB7XG4gICAgY29uc3QgYXJyID0gQXJyYXkobGVuZ3RoKTtcbiAgICBsZXQgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCBsZW5ndGgpIHtcbiAgICAgICAgYXJyW2ldID0gaSsrO1xuICAgIH1cbiAgICBhcnIuZGVsZXRlZEl0ZW1zID0gW107XG4gICAgYXJyLmlzSW5kZXhNYXAgPSB0cnVlO1xuICAgIHJldHVybiBhcnI7XG59XG5leHBvcnQgZnVuY3Rpb24gY2xvbmVJbmRleE1hcChpbmRleE1hcCkge1xuICAgIGNvbnN0IGNsb25lID0gaW5kZXhNYXAuc2xpY2UoKTtcbiAgICBjbG9uZS5kZWxldGVkSXRlbXMgPSBpbmRleE1hcC5kZWxldGVkSXRlbXMuc2xpY2UoKTtcbiAgICBjbG9uZS5pc0luZGV4TWFwID0gdHJ1ZTtcbiAgICByZXR1cm4gY2xvbmU7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNJbmRleE1hcCh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIEFycmF5ICYmIHZhbHVlLmlzSW5kZXhNYXAgPT09IHRydWU7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vYnNlcnZhdGlvbi5qcy5tYXAiLCJpbXBvcnQgeyBfX2RlY29yYXRlLCBfX21ldGFkYXRhIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBJTGlmZWN5Y2xlIH0gZnJvbSAnLi4vbGlmZWN5Y2xlJztcbmltcG9ydCB7IGNyZWF0ZUluZGV4TWFwIH0gZnJvbSAnLi4vb2JzZXJ2YXRpb24nO1xuaW1wb3J0IHsgQ29sbGVjdGlvbkxlbmd0aE9ic2VydmVyIH0gZnJvbSAnLi9jb2xsZWN0aW9uLWxlbmd0aC1vYnNlcnZlcic7XG5pbXBvcnQgeyBjb2xsZWN0aW9uU3Vic2NyaWJlckNvbGxlY3Rpb24sIHN1YnNjcmliZXJDb2xsZWN0aW9uIH0gZnJvbSAnLi9zdWJzY3JpYmVyLWNvbGxlY3Rpb24nO1xuY29uc3Qgb2JzZXJ2ZXJMb29rdXAgPSBuZXcgV2Vha01hcCgpO1xuLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtc29ydGNvbXBhcmVcbmZ1bmN0aW9uIHNvcnRDb21wYXJlKHgsIHkpIHtcbiAgICBpZiAoeCA9PT0geSkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgeCA9IHggPT09IG51bGwgPyAnbnVsbCcgOiB4LnRvU3RyaW5nKCk7XG4gICAgeSA9IHkgPT09IG51bGwgPyAnbnVsbCcgOiB5LnRvU3RyaW5nKCk7XG4gICAgcmV0dXJuIHggPCB5ID8gLTEgOiAxO1xufVxuZnVuY3Rpb24gcHJlU29ydENvbXBhcmUoeCwgeSkge1xuICAgIGlmICh4ID09PSB2b2lkIDApIHtcbiAgICAgICAgaWYgKHkgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoeSA9PT0gdm9pZCAwKSB7XG4gICAgICAgIHJldHVybiAtMTtcbiAgICB9XG4gICAgcmV0dXJuIDA7XG59XG5mdW5jdGlvbiBpbnNlcnRpb25Tb3J0KGFyciwgaW5kZXhNYXAsIGZyb20sIHRvLCBjb21wYXJlRm4pIHtcbiAgICBsZXQgdmVsZW1lbnQsIGllbGVtZW50LCB2dG1wLCBpdG1wLCBvcmRlcjtcbiAgICBsZXQgaSwgajtcbiAgICBmb3IgKGkgPSBmcm9tICsgMTsgaSA8IHRvOyBpKyspIHtcbiAgICAgICAgdmVsZW1lbnQgPSBhcnJbaV07XG4gICAgICAgIGllbGVtZW50ID0gaW5kZXhNYXBbaV07XG4gICAgICAgIGZvciAoaiA9IGkgLSAxOyBqID49IGZyb207IGotLSkge1xuICAgICAgICAgICAgdnRtcCA9IGFycltqXTtcbiAgICAgICAgICAgIGl0bXAgPSBpbmRleE1hcFtqXTtcbiAgICAgICAgICAgIG9yZGVyID0gY29tcGFyZUZuKHZ0bXAsIHZlbGVtZW50KTtcbiAgICAgICAgICAgIGlmIChvcmRlciA+IDApIHtcbiAgICAgICAgICAgICAgICBhcnJbaiArIDFdID0gdnRtcDtcbiAgICAgICAgICAgICAgICBpbmRleE1hcFtqICsgMV0gPSBpdG1wO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYXJyW2ogKyAxXSA9IHZlbGVtZW50O1xuICAgICAgICBpbmRleE1hcFtqICsgMV0gPSBpZWxlbWVudDtcbiAgICB9XG59XG5mdW5jdGlvbiBxdWlja1NvcnQoYXJyLCBpbmRleE1hcCwgZnJvbSwgdG8sIGNvbXBhcmVGbikge1xuICAgIGxldCB0aGlyZEluZGV4ID0gMCwgaSA9IDA7XG4gICAgbGV0IHYwLCB2MSwgdjI7XG4gICAgbGV0IGkwLCBpMSwgaTI7XG4gICAgbGV0IGMwMSwgYzAyLCBjMTI7XG4gICAgbGV0IHZ0bXAsIGl0bXA7XG4gICAgbGV0IHZwaXZvdCwgaXBpdm90LCBsb3dFbmQsIGhpZ2hTdGFydDtcbiAgICBsZXQgdmVsZW1lbnQsIGllbGVtZW50LCBvcmRlciwgdnRvcEVsZW1lbnQ7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnN0YW50LWNvbmRpdGlvblxuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIGlmICh0byAtIGZyb20gPD0gMTApIHtcbiAgICAgICAgICAgIGluc2VydGlvblNvcnQoYXJyLCBpbmRleE1hcCwgZnJvbSwgdG8sIGNvbXBhcmVGbik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcmRJbmRleCA9IGZyb20gKyAoKHRvIC0gZnJvbSkgPj4gMSk7XG4gICAgICAgIHYwID0gYXJyW2Zyb21dO1xuICAgICAgICBpMCA9IGluZGV4TWFwW2Zyb21dO1xuICAgICAgICB2MSA9IGFyclt0byAtIDFdO1xuICAgICAgICBpMSA9IGluZGV4TWFwW3RvIC0gMV07XG4gICAgICAgIHYyID0gYXJyW3RoaXJkSW5kZXhdO1xuICAgICAgICBpMiA9IGluZGV4TWFwW3RoaXJkSW5kZXhdO1xuICAgICAgICBjMDEgPSBjb21wYXJlRm4odjAsIHYxKTtcbiAgICAgICAgaWYgKGMwMSA+IDApIHtcbiAgICAgICAgICAgIHZ0bXAgPSB2MDtcbiAgICAgICAgICAgIGl0bXAgPSBpMDtcbiAgICAgICAgICAgIHYwID0gdjE7XG4gICAgICAgICAgICBpMCA9IGkxO1xuICAgICAgICAgICAgdjEgPSB2dG1wO1xuICAgICAgICAgICAgaTEgPSBpdG1wO1xuICAgICAgICB9XG4gICAgICAgIGMwMiA9IGNvbXBhcmVGbih2MCwgdjIpO1xuICAgICAgICBpZiAoYzAyID49IDApIHtcbiAgICAgICAgICAgIHZ0bXAgPSB2MDtcbiAgICAgICAgICAgIGl0bXAgPSBpMDtcbiAgICAgICAgICAgIHYwID0gdjI7XG4gICAgICAgICAgICBpMCA9IGkyO1xuICAgICAgICAgICAgdjIgPSB2MTtcbiAgICAgICAgICAgIGkyID0gaTE7XG4gICAgICAgICAgICB2MSA9IHZ0bXA7XG4gICAgICAgICAgICBpMSA9IGl0bXA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjMTIgPSBjb21wYXJlRm4odjEsIHYyKTtcbiAgICAgICAgICAgIGlmIChjMTIgPiAwKSB7XG4gICAgICAgICAgICAgICAgdnRtcCA9IHYxO1xuICAgICAgICAgICAgICAgIGl0bXAgPSBpMTtcbiAgICAgICAgICAgICAgICB2MSA9IHYyO1xuICAgICAgICAgICAgICAgIGkxID0gaTI7XG4gICAgICAgICAgICAgICAgdjIgPSB2dG1wO1xuICAgICAgICAgICAgICAgIGkyID0gaXRtcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBhcnJbZnJvbV0gPSB2MDtcbiAgICAgICAgaW5kZXhNYXBbZnJvbV0gPSBpMDtcbiAgICAgICAgYXJyW3RvIC0gMV0gPSB2MjtcbiAgICAgICAgaW5kZXhNYXBbdG8gLSAxXSA9IGkyO1xuICAgICAgICB2cGl2b3QgPSB2MTtcbiAgICAgICAgaXBpdm90ID0gaTE7XG4gICAgICAgIGxvd0VuZCA9IGZyb20gKyAxO1xuICAgICAgICBoaWdoU3RhcnQgPSB0byAtIDE7XG4gICAgICAgIGFyclt0aGlyZEluZGV4XSA9IGFycltsb3dFbmRdO1xuICAgICAgICBpbmRleE1hcFt0aGlyZEluZGV4XSA9IGluZGV4TWFwW2xvd0VuZF07XG4gICAgICAgIGFycltsb3dFbmRdID0gdnBpdm90O1xuICAgICAgICBpbmRleE1hcFtsb3dFbmRdID0gaXBpdm90O1xuICAgICAgICBwYXJ0aXRpb246IGZvciAoaSA9IGxvd0VuZCArIDE7IGkgPCBoaWdoU3RhcnQ7IGkrKykge1xuICAgICAgICAgICAgdmVsZW1lbnQgPSBhcnJbaV07XG4gICAgICAgICAgICBpZWxlbWVudCA9IGluZGV4TWFwW2ldO1xuICAgICAgICAgICAgb3JkZXIgPSBjb21wYXJlRm4odmVsZW1lbnQsIHZwaXZvdCk7XG4gICAgICAgICAgICBpZiAob3JkZXIgPCAwKSB7XG4gICAgICAgICAgICAgICAgYXJyW2ldID0gYXJyW2xvd0VuZF07XG4gICAgICAgICAgICAgICAgaW5kZXhNYXBbaV0gPSBpbmRleE1hcFtsb3dFbmRdO1xuICAgICAgICAgICAgICAgIGFycltsb3dFbmRdID0gdmVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgaW5kZXhNYXBbbG93RW5kXSA9IGllbGVtZW50O1xuICAgICAgICAgICAgICAgIGxvd0VuZCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAob3JkZXIgPiAwKSB7XG4gICAgICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgICAgICBoaWdoU3RhcnQtLTtcbiAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGVxZXFlcVxuICAgICAgICAgICAgICAgICAgICBpZiAoaGlnaFN0YXJ0ID09IGkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrIHBhcnRpdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2dG9wRWxlbWVudCA9IGFycltoaWdoU3RhcnRdO1xuICAgICAgICAgICAgICAgICAgICBvcmRlciA9IGNvbXBhcmVGbih2dG9wRWxlbWVudCwgdnBpdm90KTtcbiAgICAgICAgICAgICAgICB9IHdoaWxlIChvcmRlciA+IDApO1xuICAgICAgICAgICAgICAgIGFycltpXSA9IGFycltoaWdoU3RhcnRdO1xuICAgICAgICAgICAgICAgIGluZGV4TWFwW2ldID0gaW5kZXhNYXBbaGlnaFN0YXJ0XTtcbiAgICAgICAgICAgICAgICBhcnJbaGlnaFN0YXJ0XSA9IHZlbGVtZW50O1xuICAgICAgICAgICAgICAgIGluZGV4TWFwW2hpZ2hTdGFydF0gPSBpZWxlbWVudDtcbiAgICAgICAgICAgICAgICBpZiAob3JkZXIgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHZlbGVtZW50ID0gYXJyW2ldO1xuICAgICAgICAgICAgICAgICAgICBpZWxlbWVudCA9IGluZGV4TWFwW2ldO1xuICAgICAgICAgICAgICAgICAgICBhcnJbaV0gPSBhcnJbbG93RW5kXTtcbiAgICAgICAgICAgICAgICAgICAgaW5kZXhNYXBbaV0gPSBpbmRleE1hcFtsb3dFbmRdO1xuICAgICAgICAgICAgICAgICAgICBhcnJbbG93RW5kXSA9IHZlbGVtZW50O1xuICAgICAgICAgICAgICAgICAgICBpbmRleE1hcFtsb3dFbmRdID0gaWVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgIGxvd0VuZCsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodG8gLSBoaWdoU3RhcnQgPCBsb3dFbmQgLSBmcm9tKSB7XG4gICAgICAgICAgICBxdWlja1NvcnQoYXJyLCBpbmRleE1hcCwgaGlnaFN0YXJ0LCB0bywgY29tcGFyZUZuKTtcbiAgICAgICAgICAgIHRvID0gbG93RW5kO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcXVpY2tTb3J0KGFyciwgaW5kZXhNYXAsIGZyb20sIGxvd0VuZCwgY29tcGFyZUZuKTtcbiAgICAgICAgICAgIGZyb20gPSBoaWdoU3RhcnQ7XG4gICAgICAgIH1cbiAgICB9XG59XG5jb25zdCBwcm90byA9IEFycmF5LnByb3RvdHlwZTtcbmNvbnN0ICRwdXNoID0gcHJvdG8ucHVzaDtcbmNvbnN0ICR1bnNoaWZ0ID0gcHJvdG8udW5zaGlmdDtcbmNvbnN0ICRwb3AgPSBwcm90by5wb3A7XG5jb25zdCAkc2hpZnQgPSBwcm90by5zaGlmdDtcbmNvbnN0ICRzcGxpY2UgPSBwcm90by5zcGxpY2U7XG5jb25zdCAkcmV2ZXJzZSA9IHByb3RvLnJldmVyc2U7XG5jb25zdCAkc29ydCA9IHByb3RvLnNvcnQ7XG5jb25zdCBuYXRpdmUgPSB7IHB1c2g6ICRwdXNoLCB1bnNoaWZ0OiAkdW5zaGlmdCwgcG9wOiAkcG9wLCBzaGlmdDogJHNoaWZ0LCBzcGxpY2U6ICRzcGxpY2UsIHJldmVyc2U6ICRyZXZlcnNlLCBzb3J0OiAkc29ydCB9O1xuY29uc3QgbWV0aG9kcyA9IFsncHVzaCcsICd1bnNoaWZ0JywgJ3BvcCcsICdzaGlmdCcsICdzcGxpY2UnLCAncmV2ZXJzZScsICdzb3J0J107XG5jb25zdCBvYnNlcnZlID0ge1xuICAgIC8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLWFycmF5LnByb3RvdHlwZS5wdXNoXG4gICAgcHVzaDogZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgbGV0ICR0aGlzID0gdGhpcztcbiAgICAgICAgaWYgKCR0aGlzLiRyYXcgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgJHRoaXMgPSAkdGhpcy4kcmF3O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG8gPSBvYnNlcnZlckxvb2t1cC5nZXQoJHRoaXMpO1xuICAgICAgICBpZiAobyA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICByZXR1cm4gJHB1c2guYXBwbHkoJHRoaXMsIGFyZ3MpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGxlbiA9ICR0aGlzLmxlbmd0aDtcbiAgICAgICAgY29uc3QgYXJnQ291bnQgPSBhcmdzLmxlbmd0aDtcbiAgICAgICAgaWYgKGFyZ0NvdW50ID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gbGVuO1xuICAgICAgICB9XG4gICAgICAgICR0aGlzLmxlbmd0aCA9IG8uaW5kZXhNYXAubGVuZ3RoID0gbGVuICsgYXJnQ291bnQ7XG4gICAgICAgIGxldCBpID0gbGVuO1xuICAgICAgICB3aGlsZSAoaSA8ICR0aGlzLmxlbmd0aCkge1xuICAgICAgICAgICAgJHRoaXNbaV0gPSBhcmdzW2kgLSBsZW5dO1xuICAgICAgICAgICAgby5pbmRleE1hcFtpXSA9IC0yO1xuICAgICAgICAgICAgaSsrO1xuICAgICAgICB9XG4gICAgICAgIG8ubm90aWZ5KCk7XG4gICAgICAgIHJldHVybiAkdGhpcy5sZW5ndGg7XG4gICAgfSxcbiAgICAvLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy1hcnJheS5wcm90b3R5cGUudW5zaGlmdFxuICAgIHVuc2hpZnQ6IGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgIGxldCAkdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICgkdGhpcy4kcmF3ICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgICR0aGlzID0gJHRoaXMuJHJhdztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBvID0gb2JzZXJ2ZXJMb29rdXAuZ2V0KCR0aGlzKTtcbiAgICAgICAgaWYgKG8gPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgcmV0dXJuICR1bnNoaWZ0LmFwcGx5KCR0aGlzLCBhcmdzKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhcmdDb3VudCA9IGFyZ3MubGVuZ3RoO1xuICAgICAgICBjb25zdCBpbnNlcnRzID0gbmV3IEFycmF5KGFyZ0NvdW50KTtcbiAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICB3aGlsZSAoaSA8IGFyZ0NvdW50KSB7XG4gICAgICAgICAgICBpbnNlcnRzW2krK10gPSAtMjtcbiAgICAgICAgfVxuICAgICAgICAkdW5zaGlmdC5hcHBseShvLmluZGV4TWFwLCBpbnNlcnRzKTtcbiAgICAgICAgY29uc3QgbGVuID0gJHVuc2hpZnQuYXBwbHkoJHRoaXMsIGFyZ3MpO1xuICAgICAgICBvLm5vdGlmeSgpO1xuICAgICAgICByZXR1cm4gbGVuO1xuICAgIH0sXG4gICAgLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtYXJyYXkucHJvdG90eXBlLnBvcFxuICAgIHBvcDogZnVuY3Rpb24gKCkge1xuICAgICAgICBsZXQgJHRoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoJHRoaXMuJHJhdyAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAkdGhpcyA9ICR0aGlzLiRyYXc7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbyA9IG9ic2VydmVyTG9va3VwLmdldCgkdGhpcyk7XG4gICAgICAgIGlmIChvID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIHJldHVybiAkcG9wLmNhbGwoJHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGluZGV4TWFwID0gby5pbmRleE1hcDtcbiAgICAgICAgY29uc3QgZWxlbWVudCA9ICRwb3AuY2FsbCgkdGhpcyk7XG4gICAgICAgIC8vIG9ubHkgbWFyayBpbmRpY2VzIGFzIGRlbGV0ZWQgaWYgdGhleSBhY3R1YWxseSBleGlzdGVkIGluIHRoZSBvcmlnaW5hbCBhcnJheVxuICAgICAgICBjb25zdCBpbmRleCA9IGluZGV4TWFwLmxlbmd0aCAtIDE7XG4gICAgICAgIGlmIChpbmRleE1hcFtpbmRleF0gPiAtMSkge1xuICAgICAgICAgICAgaW5kZXhNYXAuZGVsZXRlZEl0ZW1zLnB1c2goaW5kZXhNYXBbaW5kZXhdKTtcbiAgICAgICAgfVxuICAgICAgICAkcG9wLmNhbGwoaW5kZXhNYXApO1xuICAgICAgICBvLm5vdGlmeSgpO1xuICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICB9LFxuICAgIC8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLWFycmF5LnByb3RvdHlwZS5zaGlmdFxuICAgIHNoaWZ0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGxldCAkdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICgkdGhpcy4kcmF3ICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgICR0aGlzID0gJHRoaXMuJHJhdztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBvID0gb2JzZXJ2ZXJMb29rdXAuZ2V0KCR0aGlzKTtcbiAgICAgICAgaWYgKG8gPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgcmV0dXJuICRzaGlmdC5jYWxsKCR0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpbmRleE1hcCA9IG8uaW5kZXhNYXA7XG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSAkc2hpZnQuY2FsbCgkdGhpcyk7XG4gICAgICAgIC8vIG9ubHkgbWFyayBpbmRpY2VzIGFzIGRlbGV0ZWQgaWYgdGhleSBhY3R1YWxseSBleGlzdGVkIGluIHRoZSBvcmlnaW5hbCBhcnJheVxuICAgICAgICBpZiAoaW5kZXhNYXBbMF0gPiAtMSkge1xuICAgICAgICAgICAgaW5kZXhNYXAuZGVsZXRlZEl0ZW1zLnB1c2goaW5kZXhNYXBbMF0pO1xuICAgICAgICB9XG4gICAgICAgICRzaGlmdC5jYWxsKGluZGV4TWFwKTtcbiAgICAgICAgby5ub3RpZnkoKTtcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgfSxcbiAgICAvLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy1hcnJheS5wcm90b3R5cGUuc3BsaWNlXG4gICAgc3BsaWNlOiBmdW5jdGlvbiAoLi4uYXJncykge1xuICAgICAgICBjb25zdCBzdGFydCA9IGFyZ3NbMF07XG4gICAgICAgIGNvbnN0IGRlbGV0ZUNvdW50ID0gYXJnc1sxXTtcbiAgICAgICAgbGV0ICR0aGlzID0gdGhpcztcbiAgICAgICAgaWYgKCR0aGlzLiRyYXcgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgJHRoaXMgPSAkdGhpcy4kcmF3O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG8gPSBvYnNlcnZlckxvb2t1cC5nZXQoJHRoaXMpO1xuICAgICAgICBpZiAobyA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICByZXR1cm4gJHNwbGljZS5hcHBseSgkdGhpcywgYXJncyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbGVuID0gdGhpcy5sZW5ndGg7XG4gICAgICAgIGNvbnN0IHJlbGF0aXZlU3RhcnQgPSBzdGFydCB8IDA7XG4gICAgICAgIGNvbnN0IGFjdHVhbFN0YXJ0ID0gcmVsYXRpdmVTdGFydCA8IDAgPyBNYXRoLm1heCgobGVuICsgcmVsYXRpdmVTdGFydCksIDApIDogTWF0aC5taW4ocmVsYXRpdmVTdGFydCwgbGVuKTtcbiAgICAgICAgY29uc3QgaW5kZXhNYXAgPSBvLmluZGV4TWFwO1xuICAgICAgICBjb25zdCBhcmdDb3VudCA9IGFyZ3MubGVuZ3RoO1xuICAgICAgICBjb25zdCBhY3R1YWxEZWxldGVDb3VudCA9IGFyZ0NvdW50ID09PSAwID8gMCA6IGFyZ0NvdW50ID09PSAxID8gbGVuIC0gYWN0dWFsU3RhcnQgOiBkZWxldGVDb3VudDtcbiAgICAgICAgaWYgKGFjdHVhbERlbGV0ZUNvdW50ID4gMCkge1xuICAgICAgICAgICAgbGV0IGkgPSBhY3R1YWxTdGFydDtcbiAgICAgICAgICAgIGNvbnN0IHRvID0gaSArIGFjdHVhbERlbGV0ZUNvdW50O1xuICAgICAgICAgICAgd2hpbGUgKGkgPCB0bykge1xuICAgICAgICAgICAgICAgIGlmIChpbmRleE1hcFtpXSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGluZGV4TWFwLmRlbGV0ZWRJdGVtcy5wdXNoKGluZGV4TWFwW2ldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChhcmdDb3VudCA+IDIpIHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1Db3VudCA9IGFyZ0NvdW50IC0gMjtcbiAgICAgICAgICAgIGNvbnN0IGluc2VydHMgPSBuZXcgQXJyYXkoaXRlbUNvdW50KTtcbiAgICAgICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgICAgIHdoaWxlIChpIDwgaXRlbUNvdW50KSB7XG4gICAgICAgICAgICAgICAgaW5zZXJ0c1tpKytdID0gLTI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkc3BsaWNlLmNhbGwoaW5kZXhNYXAsIHN0YXJ0LCBkZWxldGVDb3VudCwgLi4uaW5zZXJ0cyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAkc3BsaWNlLmFwcGx5KGluZGV4TWFwLCBhcmdzKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkZWxldGVkID0gJHNwbGljZS5hcHBseSgkdGhpcywgYXJncyk7XG4gICAgICAgIG8ubm90aWZ5KCk7XG4gICAgICAgIHJldHVybiBkZWxldGVkO1xuICAgIH0sXG4gICAgLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtYXJyYXkucHJvdG90eXBlLnJldmVyc2VcbiAgICByZXZlcnNlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGxldCAkdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICgkdGhpcy4kcmF3ICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgICR0aGlzID0gJHRoaXMuJHJhdztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBvID0gb2JzZXJ2ZXJMb29rdXAuZ2V0KCR0aGlzKTtcbiAgICAgICAgaWYgKG8gPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgJHJldmVyc2UuY2FsbCgkdGhpcyk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsZW4gPSAkdGhpcy5sZW5ndGg7XG4gICAgICAgIGNvbnN0IG1pZGRsZSA9IChsZW4gLyAyKSB8IDA7XG4gICAgICAgIGxldCBsb3dlciA9IDA7XG4gICAgICAgIHdoaWxlIChsb3dlciAhPT0gbWlkZGxlKSB7XG4gICAgICAgICAgICBjb25zdCB1cHBlciA9IGxlbiAtIGxvd2VyIC0gMTtcbiAgICAgICAgICAgIGNvbnN0IGxvd2VyVmFsdWUgPSAkdGhpc1tsb3dlcl07XG4gICAgICAgICAgICBjb25zdCBsb3dlckluZGV4ID0gby5pbmRleE1hcFtsb3dlcl07XG4gICAgICAgICAgICBjb25zdCB1cHBlclZhbHVlID0gJHRoaXNbdXBwZXJdO1xuICAgICAgICAgICAgY29uc3QgdXBwZXJJbmRleCA9IG8uaW5kZXhNYXBbdXBwZXJdO1xuICAgICAgICAgICAgJHRoaXNbbG93ZXJdID0gdXBwZXJWYWx1ZTtcbiAgICAgICAgICAgIG8uaW5kZXhNYXBbbG93ZXJdID0gdXBwZXJJbmRleDtcbiAgICAgICAgICAgICR0aGlzW3VwcGVyXSA9IGxvd2VyVmFsdWU7XG4gICAgICAgICAgICBvLmluZGV4TWFwW3VwcGVyXSA9IGxvd2VySW5kZXg7XG4gICAgICAgICAgICBsb3dlcisrO1xuICAgICAgICB9XG4gICAgICAgIG8ubm90aWZ5KCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG4gICAgLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtYXJyYXkucHJvdG90eXBlLnNvcnRcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vdjgvdjgvYmxvYi9tYXN0ZXIvc3JjL2pzL2FycmF5LmpzXG4gICAgc29ydDogZnVuY3Rpb24gKGNvbXBhcmVGbikge1xuICAgICAgICBsZXQgJHRoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoJHRoaXMuJHJhdyAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAkdGhpcyA9ICR0aGlzLiRyYXc7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbyA9IG9ic2VydmVyTG9va3VwLmdldCgkdGhpcyk7XG4gICAgICAgIGlmIChvID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgICRzb3J0LmNhbGwoJHRoaXMsIGNvbXBhcmVGbik7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsZW4gPSAkdGhpcy5sZW5ndGg7XG4gICAgICAgIGlmIChsZW4gPCAyKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICBxdWlja1NvcnQoJHRoaXMsIG8uaW5kZXhNYXAsIDAsIGxlbiwgcHJlU29ydENvbXBhcmUpO1xuICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgIHdoaWxlIChpIDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoJHRoaXNbaV0gPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaSsrO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb21wYXJlRm4gPT09IHZvaWQgMCB8fCB0eXBlb2YgY29tcGFyZUZuICE9PSAnZnVuY3Rpb24nIC8qIHNwZWMgc2F5cyB0aHJvdyBhIFR5cGVFcnJvciwgc2hvdWxkIHdlIGRvIHRoYXQgdG9vPyAqLykge1xuICAgICAgICAgICAgY29tcGFyZUZuID0gc29ydENvbXBhcmU7XG4gICAgICAgIH1cbiAgICAgICAgcXVpY2tTb3J0KCR0aGlzLCBvLmluZGV4TWFwLCAwLCBpLCBjb21wYXJlRm4pO1xuICAgICAgICBvLm5vdGlmeSgpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG59O1xuY29uc3QgZGVzY3JpcHRvclByb3BzID0ge1xuICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxufTtcbmNvbnN0IGRlZiA9IFJlZmxlY3QuZGVmaW5lUHJvcGVydHk7XG5mb3IgKGNvbnN0IG1ldGhvZCBvZiBtZXRob2RzKSB7XG4gICAgZGVmKG9ic2VydmVbbWV0aG9kXSwgJ29ic2VydmluZycsIHsgdmFsdWU6IHRydWUsIHdyaXRhYmxlOiBmYWxzZSwgY29uZmlndXJhYmxlOiBmYWxzZSwgZW51bWVyYWJsZTogZmFsc2UgfSk7XG59XG5sZXQgZW5hYmxlQXJyYXlPYnNlcnZhdGlvbkNhbGxlZCA9IGZhbHNlO1xuZXhwb3J0IGZ1bmN0aW9uIGVuYWJsZUFycmF5T2JzZXJ2YXRpb24oKSB7XG4gICAgZm9yIChjb25zdCBtZXRob2Qgb2YgbWV0aG9kcykge1xuICAgICAgICBpZiAocHJvdG9bbWV0aG9kXS5vYnNlcnZpbmcgIT09IHRydWUpIHtcbiAgICAgICAgICAgIGRlZihwcm90bywgbWV0aG9kLCB7IC4uLmRlc2NyaXB0b3JQcm9wcywgdmFsdWU6IG9ic2VydmVbbWV0aG9kXSB9KTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBkaXNhYmxlQXJyYXlPYnNlcnZhdGlvbigpIHtcbiAgICBmb3IgKGNvbnN0IG1ldGhvZCBvZiBtZXRob2RzKSB7XG4gICAgICAgIGlmIChwcm90b1ttZXRob2RdLm9ic2VydmluZyA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgZGVmKHByb3RvLCBtZXRob2QsIHsgLi4uZGVzY3JpcHRvclByb3BzLCB2YWx1ZTogbmF0aXZlW21ldGhvZF0gfSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5sZXQgQXJyYXlPYnNlcnZlciA9IGNsYXNzIEFycmF5T2JzZXJ2ZXIge1xuICAgIGNvbnN0cnVjdG9yKGZsYWdzLCBsaWZlY3ljbGUsIGFycmF5KSB7XG4gICAgICAgIGlmICghZW5hYmxlQXJyYXlPYnNlcnZhdGlvbkNhbGxlZCkge1xuICAgICAgICAgICAgZW5hYmxlQXJyYXlPYnNlcnZhdGlvbkNhbGxlZCA9IHRydWU7XG4gICAgICAgICAgICBlbmFibGVBcnJheU9ic2VydmF0aW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pbkJhdGNoID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaW5kZXhPYnNlcnZlcnMgPSB7fTtcbiAgICAgICAgdGhpcy5jb2xsZWN0aW9uID0gYXJyYXk7XG4gICAgICAgIHRoaXMucGVyc2lzdGVudEZsYWdzID0gZmxhZ3MgJiAyMDgwMzc0Nzk5IC8qIHBlcnNpc3RlbnRCaW5kaW5nRmxhZ3MgKi87XG4gICAgICAgIHRoaXMuaW5kZXhNYXAgPSBjcmVhdGVJbmRleE1hcChhcnJheS5sZW5ndGgpO1xuICAgICAgICB0aGlzLmxpZmVjeWNsZSA9IGxpZmVjeWNsZTtcbiAgICAgICAgdGhpcy5sZW5ndGhPYnNlcnZlciA9ICh2b2lkIDApO1xuICAgICAgICBvYnNlcnZlckxvb2t1cC5zZXQoYXJyYXksIHRoaXMpO1xuICAgIH1cbiAgICBub3RpZnkoKSB7XG4gICAgICAgIGlmICh0aGlzLmxpZmVjeWNsZS5iYXRjaC5kZXB0aCA+IDApIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pbkJhdGNoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbkJhdGNoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmxpZmVjeWNsZS5iYXRjaC5hZGQodGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmZsdXNoQmF0Y2goMCAvKiBub25lICovKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRMZW5ndGhPYnNlcnZlcigpIHtcbiAgICAgICAgaWYgKHRoaXMubGVuZ3RoT2JzZXJ2ZXIgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgdGhpcy5sZW5ndGhPYnNlcnZlciA9IG5ldyBDb2xsZWN0aW9uTGVuZ3RoT2JzZXJ2ZXIodGhpcy5jb2xsZWN0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5sZW5ndGhPYnNlcnZlcjtcbiAgICB9XG4gICAgZ2V0SW5kZXhPYnNlcnZlcihpbmRleCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRPckNyZWF0ZUluZGV4T2JzZXJ2ZXIoaW5kZXgpO1xuICAgIH1cbiAgICBmbHVzaEJhdGNoKGZsYWdzKSB7XG4gICAgICAgIHRoaXMuaW5CYXRjaCA9IGZhbHNlO1xuICAgICAgICBjb25zdCBpbmRleE1hcCA9IHRoaXMuaW5kZXhNYXA7XG4gICAgICAgIGNvbnN0IGxlbmd0aCA9IHRoaXMuY29sbGVjdGlvbi5sZW5ndGg7XG4gICAgICAgIHRoaXMuaW5kZXhNYXAgPSBjcmVhdGVJbmRleE1hcChsZW5ndGgpO1xuICAgICAgICB0aGlzLmNhbGxDb2xsZWN0aW9uU3Vic2NyaWJlcnMoaW5kZXhNYXAsIDE2IC8qIHVwZGF0ZVRhcmdldEluc3RhbmNlICovIHwgdGhpcy5wZXJzaXN0ZW50RmxhZ3MpO1xuICAgICAgICBpZiAodGhpcy5sZW5ndGhPYnNlcnZlciAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICB0aGlzLmxlbmd0aE9ic2VydmVyLnNldFZhbHVlKGxlbmd0aCwgMTYgLyogdXBkYXRlVGFyZ2V0SW5zdGFuY2UgKi8pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbCB1c2VkIGJ5IGZyaWVuZCBjbGFzcyBBcnJheUluZGV4T2JzZXJ2ZXIgb25seVxuICAgICAqL1xuICAgIGFkZEluZGV4T2JzZXJ2ZXIoaW5kZXhPYnNlcnZlcikge1xuICAgICAgICB0aGlzLmFkZENvbGxlY3Rpb25TdWJzY3JpYmVyKGluZGV4T2JzZXJ2ZXIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWwgdXNlZCBieSBmcmllbmQgY2xhc3MgQXJyYXlJbmRleE9ic2VydmVyIG9ubHlcbiAgICAgKi9cbiAgICByZW1vdmVJbmRleE9ic2VydmVyKGluZGV4T2JzZXJ2ZXIpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVDb2xsZWN0aW9uU3Vic2NyaWJlcihpbmRleE9ic2VydmVyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgZ2V0T3JDcmVhdGVJbmRleE9ic2VydmVyKGluZGV4KSB7XG4gICAgICAgIGNvbnN0IGluZGV4T2JzZXJ2ZXJzID0gdGhpcy5pbmRleE9ic2VydmVycztcbiAgICAgICAgbGV0IG9ic2VydmVyID0gaW5kZXhPYnNlcnZlcnNbaW5kZXhdO1xuICAgICAgICBpZiAob2JzZXJ2ZXIgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgb2JzZXJ2ZXIgPSBpbmRleE9ic2VydmVyc1tpbmRleF0gPSBuZXcgQXJyYXlJbmRleE9ic2VydmVyKHRoaXMsIGluZGV4KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2JzZXJ2ZXI7XG4gICAgfVxufTtcbkFycmF5T2JzZXJ2ZXIgPSBfX2RlY29yYXRlKFtcbiAgICBjb2xsZWN0aW9uU3Vic2NyaWJlckNvbGxlY3Rpb24oKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW051bWJlciwgT2JqZWN0LCBPYmplY3RdKVxuXSwgQXJyYXlPYnNlcnZlcik7XG5leHBvcnQgeyBBcnJheU9ic2VydmVyIH07XG5sZXQgQXJyYXlJbmRleE9ic2VydmVyID0gY2xhc3MgQXJyYXlJbmRleE9ic2VydmVyIHtcbiAgICBjb25zdHJ1Y3Rvcihvd25lciwgaW5kZXgpIHtcbiAgICAgICAgdGhpcy5vd25lciA9IG93bmVyO1xuICAgICAgICB0aGlzLmluZGV4ID0gaW5kZXg7XG4gICAgICAgIHRoaXMuc3Vic2NyaWJlckNvdW50ID0gMDtcbiAgICAgICAgdGhpcy5jdXJyZW50VmFsdWUgPSB0aGlzLmdldFZhbHVlKCk7XG4gICAgfVxuICAgIGdldFZhbHVlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vd25lci5jb2xsZWN0aW9uW3RoaXMuaW5kZXhdO1xuICAgIH1cbiAgICBzZXRWYWx1ZShuZXdWYWx1ZSwgZmxhZ3MpIHtcbiAgICAgICAgaWYgKG5ld1ZhbHVlID09PSB0aGlzLmdldFZhbHVlKCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhcnJheU9ic2VydmVyID0gdGhpcy5vd25lcjtcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmluZGV4O1xuICAgICAgICBjb25zdCBpbmRleE1hcCA9IGFycmF5T2JzZXJ2ZXIuaW5kZXhNYXA7XG4gICAgICAgIGlmIChpbmRleE1hcFtpbmRleF0gPiAtMSkge1xuICAgICAgICAgICAgaW5kZXhNYXAuZGVsZXRlZEl0ZW1zLnB1c2goaW5kZXhNYXBbaW5kZXhdKTtcbiAgICAgICAgfVxuICAgICAgICBpbmRleE1hcFtpbmRleF0gPSAtMjtcbiAgICAgICAgLy8gZG8gbm90IG5lZWQgdG8gdXBkYXRlIGN1cnJlbnQgdmFsdWUgaGVyZVxuICAgICAgICAvLyBhcyBpdCB3aWxsIGJlIHVwZGF0ZWQgaW5zaWRlIGhhbmRsZSBjb2xsZWN0aW9uIGNoYW5nZVxuICAgICAgICBhcnJheU9ic2VydmVyLmNvbGxlY3Rpb25baW5kZXhdID0gbmV3VmFsdWU7XG4gICAgICAgIGFycmF5T2JzZXJ2ZXIubm90aWZ5KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZyb20gaW50ZXJmYWNlIGBJQ29sbGVjdGlvblN1YnNjcmliZXJgXG4gICAgICovXG4gICAgaGFuZGxlQ29sbGVjdGlvbkNoYW5nZShpbmRleE1hcCwgZmxhZ3MpIHtcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmluZGV4O1xuICAgICAgICBjb25zdCBub0NoYW5nZSA9IGluZGV4TWFwW2luZGV4XSA9PT0gaW5kZXg7XG4gICAgICAgIGlmIChub0NoYW5nZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHByZXZWYWx1ZSA9IHRoaXMuY3VycmVudFZhbHVlO1xuICAgICAgICBjb25zdCBjdXJyVmFsdWUgPSB0aGlzLmN1cnJlbnRWYWx1ZSA9IHRoaXMuZ2V0VmFsdWUoKTtcbiAgICAgICAgLy8gaG1tXG4gICAgICAgIGlmIChwcmV2VmFsdWUgIT09IGN1cnJWYWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5jYWxsU3Vic2NyaWJlcnMoY3VyclZhbHVlLCBwcmV2VmFsdWUsIGZsYWdzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdWJzY3JpYmUoc3Vic2NyaWJlcikge1xuICAgICAgICBpZiAodGhpcy5hZGRTdWJzY3JpYmVyKHN1YnNjcmliZXIpICYmICsrdGhpcy5zdWJzY3JpYmVyQ291bnQgPT09IDEpIHtcbiAgICAgICAgICAgIHRoaXMub3duZXIuYWRkSW5kZXhPYnNlcnZlcih0aGlzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1bnN1YnNjcmliZShzdWJzY3JpYmVyKSB7XG4gICAgICAgIGlmICh0aGlzLnJlbW92ZVN1YnNjcmliZXIoc3Vic2NyaWJlcikgJiYgLS10aGlzLnN1YnNjcmliZXJDb3VudCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5vd25lci5yZW1vdmVJbmRleE9ic2VydmVyKHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxufTtcbkFycmF5SW5kZXhPYnNlcnZlciA9IF9fZGVjb3JhdGUoW1xuICAgIHN1YnNjcmliZXJDb2xsZWN0aW9uKCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtBcnJheU9ic2VydmVyLCBOdW1iZXJdKVxuXSwgQXJyYXlJbmRleE9ic2VydmVyKTtcbmV4cG9ydCB7IEFycmF5SW5kZXhPYnNlcnZlciB9O1xuZXhwb3J0IGZ1bmN0aW9uIGdldEFycmF5T2JzZXJ2ZXIoZmxhZ3MsIGxpZmVjeWNsZSwgYXJyYXkpIHtcbiAgICBjb25zdCBvYnNlcnZlciA9IG9ic2VydmVyTG9va3VwLmdldChhcnJheSk7XG4gICAgaWYgKG9ic2VydmVyID09PSB2b2lkIDApIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBcnJheU9ic2VydmVyKGZsYWdzLCBsaWZlY3ljbGUsIGFycmF5KTtcbiAgICB9XG4gICAgcmV0dXJuIG9ic2VydmVyO1xufVxuLyoqXG4gKiBBcHBsaWVzIG9mZnNldHMgdG8gdGhlIG5vbi1uZWdhdGl2ZSBpbmRpY2VzIGluIHRoZSBJbmRleE1hcFxuICogYmFzZWQgb24gYWRkZWQgYW5kIGRlbGV0ZWQgaXRlbXMgcmVsYXRpdmUgdG8gdGhvc2UgaW5kaWNlcy5cbiAqXG4gKiBlLmcuIHR1cm4gYFstMiwgMCwgMV1gIGludG8gYFstMiwgMSwgMl1gLCBhbGxvd2luZyB0aGUgdmFsdWVzIGF0IHRoZSBpbmRpY2VzIHRvIGJlXG4gKiB1c2VkIGZvciBzb3J0aW5nL3Jlb3JkZXJpbmcgaXRlbXMgaWYgbmVlZGVkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcHBseU11dGF0aW9uc1RvSW5kaWNlcyhpbmRleE1hcCkge1xuICAgIGxldCBvZmZzZXQgPSAwO1xuICAgIGxldCBqID0gMDtcbiAgICBjb25zdCBsZW4gPSBpbmRleE1hcC5sZW5ndGg7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgICAgICB3aGlsZSAoaW5kZXhNYXAuZGVsZXRlZEl0ZW1zW2pdIDw9IGkgLSBvZmZzZXQpIHtcbiAgICAgICAgICAgICsrajtcbiAgICAgICAgICAgIC0tb2Zmc2V0O1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmRleE1hcFtpXSA9PT0gLTIpIHtcbiAgICAgICAgICAgICsrb2Zmc2V0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaW5kZXhNYXBbaV0gKz0gb2Zmc2V0O1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBBZnRlciBgYXBwbHlNdXRhdGlvbnNUb0luZGljZXNgLCB0aGlzIGZ1bmN0aW9uIGNhbiBiZSB1c2VkIHRvIHJlb3JkZXIgaXRlbXMgaW4gYSBkZXJpdmVkXG4gKiBhcnJheSAoZS5nLiAgdGhlIGl0ZW1zIGluIHRoZSBgdmlld3NgIGluIHRoZSByZXBlYXRlciBhcmUgZGVyaXZlZCBmcm9tIHRoZSBgaXRlbXNgIHByb3BlcnR5KVxuICovXG5leHBvcnQgZnVuY3Rpb24gc3luY2hyb25pemVJbmRpY2VzKGl0ZW1zLCBpbmRleE1hcCkge1xuICAgIGNvbnN0IGNvcHkgPSBpdGVtcy5zbGljZSgpO1xuICAgIGNvbnN0IGxlbiA9IGluZGV4TWFwLmxlbmd0aDtcbiAgICBsZXQgdG8gPSAwO1xuICAgIGxldCBmcm9tID0gMDtcbiAgICB3aGlsZSAodG8gPCBsZW4pIHtcbiAgICAgICAgZnJvbSA9IGluZGV4TWFwW3RvXTtcbiAgICAgICAgaWYgKGZyb20gIT09IC0yKSB7XG4gICAgICAgICAgICBpdGVtc1t0b10gPSBjb3B5W2Zyb21dO1xuICAgICAgICB9XG4gICAgICAgICsrdG87XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXJyYXktb2JzZXJ2ZXIuanMubWFwIiwidmFyIEJpbmRhYmxlT2JzZXJ2ZXJfMTtcbmltcG9ydCB7IF9fZGVjb3JhdGUsIF9fbWV0YWRhdGEgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IFJlcG9ydGVyLCBQTEFURk9STSB9IGZyb20gJ0BhdXJlbGlhL2tlcm5lbCc7XG5pbXBvcnQgeyBJTGlmZWN5Y2xlIH0gZnJvbSAnLi4vbGlmZWN5Y2xlJztcbmltcG9ydCB7IFByb3h5T2JzZXJ2ZXIgfSBmcm9tICcuL3Byb3h5LW9ic2VydmVyJztcbmltcG9ydCB7IHN1YnNjcmliZXJDb2xsZWN0aW9uIH0gZnJvbSAnLi9zdWJzY3JpYmVyLWNvbGxlY3Rpb24nO1xubGV0IEJpbmRhYmxlT2JzZXJ2ZXIgPSBCaW5kYWJsZU9ic2VydmVyXzEgPSBjbGFzcyBCaW5kYWJsZU9ic2VydmVyIHtcbiAgICBjb25zdHJ1Y3RvcihsaWZlY3ljbGUsIGZsYWdzLCBvYmosIHByb3BlcnR5S2V5LCBjYk5hbWUsICRzZXQpIHtcbiAgICAgICAgdGhpcy5saWZlY3ljbGUgPSBsaWZlY3ljbGU7XG4gICAgICAgIHRoaXMub2JqID0gb2JqO1xuICAgICAgICB0aGlzLnByb3BlcnR5S2V5ID0gcHJvcGVydHlLZXk7XG4gICAgICAgIHRoaXMuJHNldCA9ICRzZXQ7XG4gICAgICAgIHRoaXMuY3VycmVudFZhbHVlID0gdm9pZCAwO1xuICAgICAgICB0aGlzLm9sZFZhbHVlID0gdm9pZCAwO1xuICAgICAgICB0aGlzLmluQmF0Y2ggPSBmYWxzZTtcbiAgICAgICAgbGV0IGlzUHJveHkgPSBmYWxzZTtcbiAgICAgICAgaWYgKFByb3h5T2JzZXJ2ZXIuaXNQcm94eShvYmopKSB7XG4gICAgICAgICAgICBpc1Byb3h5ID0gdHJ1ZTtcbiAgICAgICAgICAgIG9iai4kb2JzZXJ2ZXIuc3Vic2NyaWJlKHRoaXMsIHByb3BlcnR5S2V5KTtcbiAgICAgICAgICAgIHRoaXMub2JqID0gb2JqLiRyYXc7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jYWxsYmFjayA9IHRoaXMub2JqW2NiTmFtZV07XG4gICAgICAgIGNvbnN0IHByb3BlcnR5Q2hhbmdlZENhbGxiYWNrID0gdGhpcy5wcm9wZXJ0eUNoYW5nZWRDYWxsYmFjayA9IHRoaXMub2JqLnByb3BlcnR5Q2hhbmdlZDtcbiAgICAgICAgY29uc3QgaGFzUHJvcGVydHlDaGFuZ2VkQ2FsbGJhY2sgPSB0aGlzLmhhc1Byb3BlcnR5Q2hhbmdlZENhbGxiYWNrID0gdHlwZW9mIHByb3BlcnR5Q2hhbmdlZENhbGxiYWNrID09PSAnZnVuY3Rpb24nO1xuICAgICAgICBjb25zdCBzaG91bGRJbnRlcmNlcHRTZXQgPSB0aGlzLnNob3VsZEludGVyY2VwdFNldCA9ICRzZXQgIT09IFBMQVRGT1JNLm5vb3A7XG4gICAgICAgIC8vIHdoZW4gdXNlciBkZWNsYXJlIEBiaW5kYWJsZSh7IHNldCB9KVxuICAgICAgICAvLyBpdCdzIGV4cGVjdGVkIHRvIHdvcmsgZnJvbSB0aGUgc3RhcnQsXG4gICAgICAgIC8vIHJlZ2FyZGxlc3Mgd2hlcmUgdGhlIGFzc2lnbm1lbnQgY29tZXMgZnJvbTogZWl0aGVyIGRpcmVjdCB2aWV3IG1vZGVsIGFzc2lnbm1lbnQgb3IgZnJvbSBiaW5kaW5nIGR1cmluZyByZW5kZXJcbiAgICAgICAgLy8gc28gaWYgZWl0aGVyIGdldHRlci9zZXR0ZXIgY29uZmlnIGlzIHByZXNlbnQsIGFsdGVyIHRoZSBhY2Nlc3NvciBzdHJhaWdodCBhd2FpdFxuICAgICAgICBpZiAodGhpcy5jYWxsYmFjayA9PT0gdm9pZCAwICYmICFoYXNQcm9wZXJ0eUNoYW5nZWRDYWxsYmFjayAmJiAhc2hvdWxkSW50ZXJjZXB0U2V0KSB7XG4gICAgICAgICAgICB0aGlzLm9ic2VydmluZyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5vYnNlcnZpbmcgPSB0cnVlO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudFZhbHVlID0gb2JqW3Byb3BlcnR5S2V5XTtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFZhbHVlID0gc2hvdWxkSW50ZXJjZXB0U2V0ICYmIGN1cnJlbnRWYWx1ZSAhPT0gdm9pZCAwXG4gICAgICAgICAgICAgICAgPyAkc2V0KGN1cnJlbnRWYWx1ZSlcbiAgICAgICAgICAgICAgICA6IGN1cnJlbnRWYWx1ZTtcbiAgICAgICAgICAgIGlmICghaXNQcm94eSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlR2V0dGVyU2V0dGVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wZXJzaXN0ZW50RmxhZ3MgPSBmbGFncyAmIDIwODAzNzQ3OTkgLyogcGVyc2lzdGVudEJpbmRpbmdGbGFncyAqLztcbiAgICB9XG4gICAgaGFuZGxlQ2hhbmdlKG5ld1ZhbHVlLCBvbGRWYWx1ZSwgZmxhZ3MpIHtcbiAgICAgICAgdGhpcy5zZXRWYWx1ZShuZXdWYWx1ZSwgZmxhZ3MpO1xuICAgIH1cbiAgICBnZXRWYWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudFZhbHVlO1xuICAgIH1cbiAgICBzZXRWYWx1ZShuZXdWYWx1ZSwgZmxhZ3MpIHtcbiAgICAgICAgaWYgKHRoaXMuc2hvdWxkSW50ZXJjZXB0U2V0KSB7XG4gICAgICAgICAgICBuZXdWYWx1ZSA9IHRoaXMuJHNldChuZXdWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMub2JzZXJ2aW5nKSB7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50VmFsdWUgPSB0aGlzLmN1cnJlbnRWYWx1ZTtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjb21wYXQvY29tcGF0XG4gICAgICAgICAgICBpZiAoT2JqZWN0LmlzKG5ld1ZhbHVlLCBjdXJyZW50VmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jdXJyZW50VmFsdWUgPSBuZXdWYWx1ZTtcbiAgICAgICAgICAgIGlmICh0aGlzLmxpZmVjeWNsZS5iYXRjaC5kZXB0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2FsbFN1YnNjcmliZXJzKG5ld1ZhbHVlLCBjdXJyZW50VmFsdWUsIHRoaXMucGVyc2lzdGVudEZsYWdzIHwgZmxhZ3MpO1xuICAgICAgICAgICAgICAgIGlmICgoZmxhZ3MgJiA0MDk2IC8qIGZyb21CaW5kICovKSA9PT0gMCB8fCAoZmxhZ3MgJiAzMiAvKiB1cGRhdGVTb3VyY2VFeHByZXNzaW9uICovKSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FsbGJhY2sgPSB0aGlzLmNhbGxiYWNrO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2sgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2suY2FsbCh0aGlzLm9iaiwgbmV3VmFsdWUsIGN1cnJlbnRWYWx1ZSwgdGhpcy5wZXJzaXN0ZW50RmxhZ3MgfCBmbGFncyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaGFzUHJvcGVydHlDaGFuZ2VkQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5uZWNlc3NhcnktdHlwZS1hc3NlcnRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcGVydHlDaGFuZ2VkQ2FsbGJhY2suY2FsbCh0aGlzLm9iaiwgdGhpcy5wcm9wZXJ0eUtleSwgbmV3VmFsdWUsIGN1cnJlbnRWYWx1ZSwgdGhpcy5wZXJzaXN0ZW50RmxhZ3MgfCBmbGFncyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICghdGhpcy5pbkJhdGNoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbkJhdGNoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLm9sZFZhbHVlID0gY3VycmVudFZhbHVlO1xuICAgICAgICAgICAgICAgIHRoaXMubGlmZWN5Y2xlLmJhdGNoLmFkZCh0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIFNlZSBTZXR0ZXJPYnNlcnZlci5zZXRWYWx1ZSBmb3IgZXhwbGFuYXRpb25cbiAgICAgICAgICAgIHRoaXMub2JqW3RoaXMucHJvcGVydHlLZXldID0gbmV3VmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3Vic2NyaWJlKHN1YnNjcmliZXIpIHtcbiAgICAgICAgaWYgKHRoaXMub2JzZXJ2aW5nID09PSBmYWxzZSkge1xuICAgICAgICAgICAgdGhpcy5vYnNlcnZpbmcgPSB0cnVlO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudFZhbHVlID0gdGhpcy5vYmpbdGhpcy5wcm9wZXJ0eUtleV07XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRWYWx1ZSA9IHRoaXMuc2hvdWxkSW50ZXJjZXB0U2V0XG4gICAgICAgICAgICAgICAgPyB0aGlzLiRzZXQoY3VycmVudFZhbHVlKVxuICAgICAgICAgICAgICAgIDogY3VycmVudFZhbHVlO1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVHZXR0ZXJTZXR0ZXIoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFkZFN1YnNjcmliZXIoc3Vic2NyaWJlcik7XG4gICAgfVxuICAgIGNyZWF0ZUdldHRlclNldHRlcigpIHtcbiAgICAgICAgaWYgKCFSZWZsZWN0LmRlZmluZVByb3BlcnR5KHRoaXMub2JqLCB0aGlzLnByb3BlcnR5S2V5LCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgZ2V0OiAoKSA9PiB0aGlzLmN1cnJlbnRWYWx1ZSxcbiAgICAgICAgICAgIHNldDogKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRWYWx1ZSh2YWx1ZSwgMCAvKiBub25lICovKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpIHtcbiAgICAgICAgICAgIFJlcG9ydGVyLndyaXRlKDEsIHRoaXMucHJvcGVydHlLZXksIHRoaXMub2JqKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5CaW5kYWJsZU9ic2VydmVyID0gQmluZGFibGVPYnNlcnZlcl8xID0gX19kZWNvcmF0ZShbXG4gICAgc3Vic2NyaWJlckNvbGxlY3Rpb24oKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW09iamVjdCwgTnVtYmVyLCBPYmplY3QsIFN0cmluZywgU3RyaW5nLCBGdW5jdGlvbl0pXG5dLCBCaW5kYWJsZU9ic2VydmVyKTtcbmV4cG9ydCB7IEJpbmRhYmxlT2JzZXJ2ZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJpbmRhYmxlLW9ic2VydmVyLmpzLm1hcCIsImltcG9ydCB7IFBMQVRGT1JNLCBSZXBvcnRlciB9IGZyb20gJ0BhdXJlbGlhL2tlcm5lbCc7XG5pbXBvcnQgeyBQcm94eU9ic2VydmVyIH0gZnJvbSAnLi9wcm94eS1vYnNlcnZlcic7XG5pbXBvcnQgeyBTZXR0ZXJPYnNlcnZlciB9IGZyb20gJy4vc2V0dGVyLW9ic2VydmVyJztcbnZhciBSdW50aW1lRXJyb3I7XG4oZnVuY3Rpb24gKFJ1bnRpbWVFcnJvcikge1xuICAgIFJ1bnRpbWVFcnJvcltSdW50aW1lRXJyb3JbXCJOaWxTY29wZVwiXSA9IDI1MF0gPSBcIk5pbFNjb3BlXCI7XG4gICAgUnVudGltZUVycm9yW1J1bnRpbWVFcnJvcltcIk5pbE92ZXJyaWRlQ29udGV4dFwiXSA9IDI1Ml0gPSBcIk5pbE92ZXJyaWRlQ29udGV4dFwiO1xuICAgIFJ1bnRpbWVFcnJvcltSdW50aW1lRXJyb3JbXCJOaWxQYXJlbnRTY29wZVwiXSA9IDI1M10gPSBcIk5pbFBhcmVudFNjb3BlXCI7XG59KShSdW50aW1lRXJyb3IgfHwgKFJ1bnRpbWVFcnJvciA9IHt9KSk7XG5jb25zdCBtYXJrZXIgPSBPYmplY3QuZnJlZXplKHt9KTtcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCBjbGFzcyBJbnRlcm5hbE9ic2VydmVyc0xvb2t1cCB7XG4gICAgZ2V0T3JDcmVhdGUobGlmZWN5Y2xlLCBmbGFncywgb2JqLCBrZXkpIHtcbiAgICAgICAgaWYgKHRoaXNba2V5XSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICB0aGlzW2tleV0gPSBuZXcgU2V0dGVyT2JzZXJ2ZXIobGlmZWN5Y2xlLCBmbGFncywgb2JqLCBrZXkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzW2tleV07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIEJpbmRpbmdDb250ZXh0IHtcbiAgICBjb25zdHJ1Y3RvcihrZXlPck9iaiwgdmFsdWUpIHtcbiAgICAgICAgdGhpcy4kc3ludGhldGljID0gdHJ1ZTtcbiAgICAgICAgaWYgKGtleU9yT2JqICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgLy8gaWYgdmFsdWUgaXMgZGVmaW5lZCB0aGVuIGl0J3MganVzdCBhIHByb3BlcnR5IGFuZCBhIHZhbHVlIHRvIGluaXRpYWxpemUgd2l0aFxuICAgICAgICAgICAgICAgIHRoaXNba2V5T3JPYmpdID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBjYW4gZWl0aGVyIGJlIHNvbWUgcmFuZG9tIG9iamVjdCBvciBhbm90aGVyIGJpbmRpbmdDb250ZXh0IHRvIGNsb25lIGZyb21cbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHByb3AgaW4ga2V5T3JPYmopIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChrZXlPck9iaiwgcHJvcCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNbcHJvcF0gPSBrZXlPck9ialtwcm9wXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgY3JlYXRlKGZsYWdzLCBrZXlPck9iaiwgdmFsdWUpIHtcbiAgICAgICAgY29uc3QgYmMgPSBuZXcgQmluZGluZ0NvbnRleHQoa2V5T3JPYmosIHZhbHVlKTtcbiAgICAgICAgaWYgKGZsYWdzICYgMiAvKiBwcm94eVN0cmF0ZWd5ICovKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJveHlPYnNlcnZlci5nZXRPckNyZWF0ZShiYykucHJveHk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGJjO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0KHNjb3BlLCBuYW1lLCBhbmNlc3RvciwgZmxhZ3MsIHBhcnQpIHtcbiAgICAgICAgaWYgKHNjb3BlID09IG51bGwpIHtcbiAgICAgICAgICAgIHRocm93IFJlcG9ydGVyLmVycm9yKDI1MCAvKiBOaWxTY29wZSAqLyk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG92ZXJyaWRlQ29udGV4dCA9IHNjb3BlLm92ZXJyaWRlQ29udGV4dDtcbiAgICAgICAgaWYgKGFuY2VzdG9yID4gMCkge1xuICAgICAgICAgICAgLy8ganVtcCB1cCB0aGUgcmVxdWlyZWQgbnVtYmVyIG9mIGFuY2VzdG9yIGNvbnRleHRzIChlZyAkcGFyZW50LiRwYXJlbnQgcmVxdWlyZXMgdHdvIGp1bXBzKVxuICAgICAgICAgICAgd2hpbGUgKGFuY2VzdG9yID4gMCkge1xuICAgICAgICAgICAgICAgIGlmIChvdmVycmlkZUNvbnRleHQucGFyZW50T3ZlcnJpZGVDb250ZXh0ID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZvaWQgMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYW5jZXN0b3ItLTtcbiAgICAgICAgICAgICAgICBvdmVycmlkZUNvbnRleHQgPSBvdmVycmlkZUNvbnRleHQucGFyZW50T3ZlcnJpZGVDb250ZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5hbWUgaW4gb3ZlcnJpZGVDb250ZXh0ID8gb3ZlcnJpZGVDb250ZXh0IDogb3ZlcnJpZGVDb250ZXh0LmJpbmRpbmdDb250ZXh0O1xuICAgICAgICB9XG4gICAgICAgIC8vIHRyYXZlcnNlIHRoZSBjb250ZXh0IGFuZCBpdCdzIGFuY2VzdG9ycywgc2VhcmNoaW5nIGZvciBhIGNvbnRleHQgdGhhdCBoYXMgdGhlIG5hbWUuXG4gICAgICAgIHdoaWxlIChvdmVycmlkZUNvbnRleHQgJiYgIShuYW1lIGluIG92ZXJyaWRlQ29udGV4dCkgJiYgIShvdmVycmlkZUNvbnRleHQuYmluZGluZ0NvbnRleHQgJiYgbmFtZSBpbiBvdmVycmlkZUNvbnRleHQuYmluZGluZ0NvbnRleHQpKSB7XG4gICAgICAgICAgICBvdmVycmlkZUNvbnRleHQgPSBvdmVycmlkZUNvbnRleHQucGFyZW50T3ZlcnJpZGVDb250ZXh0O1xuICAgICAgICB9XG4gICAgICAgIGlmIChvdmVycmlkZUNvbnRleHQpIHtcbiAgICAgICAgICAgIC8vIHdlIGxvY2F0ZWQgYSBjb250ZXh0IHdpdGggdGhlIHByb3BlcnR5LiAgcmV0dXJuIGl0LlxuICAgICAgICAgICAgcmV0dXJuIG5hbWUgaW4gb3ZlcnJpZGVDb250ZXh0ID8gb3ZlcnJpZGVDb250ZXh0IDogb3ZlcnJpZGVDb250ZXh0LmJpbmRpbmdDb250ZXh0O1xuICAgICAgICB9XG4gICAgICAgIC8vIHRoZSBuYW1lIHdhc24ndCBmb3VuZC4gc2VlIGlmIHBhcmVudCBzY29wZSB0cmF2ZXJzYWwgaXMgYWxsb3dlZCBhbmQgaWYgc28sIHRyeSB0aGF0XG4gICAgICAgIGlmICgoZmxhZ3MgJiA2NzEwODg2NCAvKiBhbGxvd1BhcmVudFNjb3BlVHJhdmVyc2FsICovKSA+IDApIHtcbiAgICAgICAgICAgIGxldCBwYXJlbnQgPSBzY29wZS5wYXJlbnRTY29wZTtcbiAgICAgICAgICAgIHdoaWxlIChwYXJlbnQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpZiAocGFyZW50LnNjb3BlUGFydHMuaW5jbHVkZXMocGFydCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5nZXQocGFyZW50LCBuYW1lLCBhbmNlc3RvciwgZmxhZ3NcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVuc2V0IHRoZSBmbGFnOyBvbmx5IGFsbG93IG9uZSBsZXZlbCBvZiBzY29wZSBib3VuZGFyeSB0cmF2ZXJzYWxcbiAgICAgICAgICAgICAgICAgICAgICAgICYgfjY3MTA4ODY0IC8qIGFsbG93UGFyZW50U2NvcGVUcmF2ZXJzYWwgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRlbGwgdGhlIHNjb3BlIHRvIHJldHVybiBudWxsIGlmIHRoZSBuYW1lIGNvdWxkIG5vdCBiZSBmb3VuZFxuICAgICAgICAgICAgICAgICAgICAgICAgfCA0MTk0MzA0IC8qIGlzVHJhdmVyc2luZ1BhcmVudFNjb3BlICovKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gbWFya2VyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2NvcGUuYmluZGluZ0NvbnRleHQgfHwgc2NvcGUub3ZlcnJpZGVDb250ZXh0O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50ID0gcGFyZW50LnBhcmVudFNjb3BlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwYXJlbnQgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE5vIHRhcmdldCBzY29wZSBjb3VsZCBiZSBmb3VuZCBmb3IgcGFydCBcIiR7cGFydH1cImApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIHN0aWxsIG5vdGhpbmcgZm91bmQuIHJldHVybiB0aGUgcm9vdCBiaW5kaW5nIGNvbnRleHQgKG9yIG51bGxcbiAgICAgICAgLy8gaWYgdGhpcyBpcyBhIHBhcmVudCBzY29wZSB0cmF2ZXJzYWwsIHRvIGVuc3VyZSB3ZSBmYWxsIGJhY2sgdG8gdGhlXG4gICAgICAgIC8vIGNvcnJlY3QgbGV2ZWwpXG4gICAgICAgIGlmIChmbGFncyAmIDQxOTQzMDQgLyogaXNUcmF2ZXJzaW5nUGFyZW50U2NvcGUgKi8pIHtcbiAgICAgICAgICAgIHJldHVybiBtYXJrZXI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNjb3BlLmJpbmRpbmdDb250ZXh0IHx8IHNjb3BlLm92ZXJyaWRlQ29udGV4dDtcbiAgICB9XG4gICAgZ2V0T2JzZXJ2ZXJzKGZsYWdzKSB7XG4gICAgICAgIGlmICh0aGlzLiRvYnNlcnZlcnMgPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy4kb2JzZXJ2ZXJzID0gbmV3IEludGVybmFsT2JzZXJ2ZXJzTG9va3VwKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuJG9ic2VydmVycztcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgU2NvcGUge1xuICAgIGNvbnN0cnVjdG9yKHBhcmVudFNjb3BlLCBiaW5kaW5nQ29udGV4dCwgb3ZlcnJpZGVDb250ZXh0KSB7XG4gICAgICAgIHRoaXMucGFyZW50U2NvcGUgPSBwYXJlbnRTY29wZTtcbiAgICAgICAgdGhpcy5zY29wZVBhcnRzID0gUExBVEZPUk0uZW1wdHlBcnJheTtcbiAgICAgICAgdGhpcy5iaW5kaW5nQ29udGV4dCA9IGJpbmRpbmdDb250ZXh0O1xuICAgICAgICB0aGlzLm92ZXJyaWRlQ29udGV4dCA9IG92ZXJyaWRlQ29udGV4dDtcbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZShmbGFncywgYmMsIG9jKSB7XG4gICAgICAgIHJldHVybiBuZXcgU2NvcGUobnVsbCwgYmMsIG9jID09IG51bGwgPyBPdmVycmlkZUNvbnRleHQuY3JlYXRlKGZsYWdzLCBiYywgb2MpIDogb2MpO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbU92ZXJyaWRlKGZsYWdzLCBvYykge1xuICAgICAgICBpZiAob2MgPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhyb3cgUmVwb3J0ZXIuZXJyb3IoMjUyIC8qIE5pbE92ZXJyaWRlQ29udGV4dCAqLyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBTY29wZShudWxsLCBvYy5iaW5kaW5nQ29udGV4dCwgb2MpO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbVBhcmVudChmbGFncywgcHMsIGJjKSB7XG4gICAgICAgIGlmIChwcyA9PSBudWxsKSB7XG4gICAgICAgICAgICB0aHJvdyBSZXBvcnRlci5lcnJvcigyNTMgLyogTmlsUGFyZW50U2NvcGUgKi8pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgU2NvcGUocHMsIGJjLCBPdmVycmlkZUNvbnRleHQuY3JlYXRlKGZsYWdzLCBiYywgcHMub3ZlcnJpZGVDb250ZXh0KSk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIE92ZXJyaWRlQ29udGV4dCB7XG4gICAgY29uc3RydWN0b3IoYmluZGluZ0NvbnRleHQsIHBhcmVudE92ZXJyaWRlQ29udGV4dCkge1xuICAgICAgICB0aGlzLiRzeW50aGV0aWMgPSB0cnVlO1xuICAgICAgICB0aGlzLmJpbmRpbmdDb250ZXh0ID0gYmluZGluZ0NvbnRleHQ7XG4gICAgICAgIHRoaXMucGFyZW50T3ZlcnJpZGVDb250ZXh0ID0gcGFyZW50T3ZlcnJpZGVDb250ZXh0O1xuICAgIH1cbiAgICBzdGF0aWMgY3JlYXRlKGZsYWdzLCBiYywgcG9jKSB7XG4gICAgICAgIHJldHVybiBuZXcgT3ZlcnJpZGVDb250ZXh0KGJjLCBwb2MgPT09IHZvaWQgMCA/IG51bGwgOiBwb2MpO1xuICAgIH1cbiAgICBnZXRPYnNlcnZlcnMoKSB7XG4gICAgICAgIGlmICh0aGlzLiRvYnNlcnZlcnMgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgdGhpcy4kb2JzZXJ2ZXJzID0gbmV3IEludGVybmFsT2JzZXJ2ZXJzTG9va3VwKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuJG9ic2VydmVycztcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1iaW5kaW5nLWNvbnRleHQuanMubWFwIiwiaW1wb3J0IHsgX19kZWNvcmF0ZSwgX19tZXRhZGF0YSB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgc3Vic2NyaWJlckNvbGxlY3Rpb24gfSBmcm9tICcuL3N1YnNjcmliZXItY29sbGVjdGlvbic7XG5sZXQgQ29sbGVjdGlvbkxlbmd0aE9ic2VydmVyID0gY2xhc3MgQ29sbGVjdGlvbkxlbmd0aE9ic2VydmVyIHtcbiAgICBjb25zdHJ1Y3RvcihvYmopIHtcbiAgICAgICAgdGhpcy5vYmogPSBvYmo7XG4gICAgICAgIHRoaXMuY3VycmVudFZhbHVlID0gb2JqLmxlbmd0aDtcbiAgICB9XG4gICAgZ2V0VmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9iai5sZW5ndGg7XG4gICAgfVxuICAgIHNldFZhbHVlKG5ld1ZhbHVlLCBmbGFncykge1xuICAgICAgICBjb25zdCB7IGN1cnJlbnRWYWx1ZSB9ID0gdGhpcztcbiAgICAgICAgaWYgKG5ld1ZhbHVlICE9PSBjdXJyZW50VmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFZhbHVlID0gbmV3VmFsdWU7XG4gICAgICAgICAgICB0aGlzLmNhbGxTdWJzY3JpYmVycyhuZXdWYWx1ZSwgY3VycmVudFZhbHVlLCBmbGFncyB8IDE2IC8qIHVwZGF0ZVRhcmdldEluc3RhbmNlICovKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5Db2xsZWN0aW9uTGVuZ3RoT2JzZXJ2ZXIgPSBfX2RlY29yYXRlKFtcbiAgICBzdWJzY3JpYmVyQ29sbGVjdGlvbigpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbQXJyYXldKVxuXSwgQ29sbGVjdGlvbkxlbmd0aE9ic2VydmVyKTtcbmV4cG9ydCB7IENvbGxlY3Rpb25MZW5ndGhPYnNlcnZlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29sbGVjdGlvbi1sZW5ndGgtb2JzZXJ2ZXIuanMubWFwIiwiaW1wb3J0IHsgX19kZWNvcmF0ZSwgX19tZXRhZGF0YSB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgc3Vic2NyaWJlckNvbGxlY3Rpb24gfSBmcm9tICcuL3N1YnNjcmliZXItY29sbGVjdGlvbic7XG5sZXQgQ29sbGVjdGlvblNpemVPYnNlcnZlciA9IGNsYXNzIENvbGxlY3Rpb25TaXplT2JzZXJ2ZXIge1xuICAgIGNvbnN0cnVjdG9yKG9iaikge1xuICAgICAgICB0aGlzLm9iaiA9IG9iajtcbiAgICAgICAgdGhpcy5jdXJyZW50VmFsdWUgPSBvYmouc2l6ZTtcbiAgICB9XG4gICAgZ2V0VmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9iai5zaXplO1xuICAgIH1cbiAgICBzZXRWYWx1ZShuZXdWYWx1ZSwgZmxhZ3MpIHtcbiAgICAgICAgY29uc3QgeyBjdXJyZW50VmFsdWUgfSA9IHRoaXM7XG4gICAgICAgIGlmIChuZXdWYWx1ZSAhPT0gY3VycmVudFZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRWYWx1ZSA9IG5ld1ZhbHVlO1xuICAgICAgICAgICAgdGhpcy5jYWxsU3Vic2NyaWJlcnMobmV3VmFsdWUsIGN1cnJlbnRWYWx1ZSwgZmxhZ3MgfCAxNiAvKiB1cGRhdGVUYXJnZXRJbnN0YW5jZSAqLyk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuQ29sbGVjdGlvblNpemVPYnNlcnZlciA9IF9fZGVjb3JhdGUoW1xuICAgIHN1YnNjcmliZXJDb2xsZWN0aW9uKCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3RdKVxuXSwgQ29sbGVjdGlvblNpemVPYnNlcnZlcik7XG5leHBvcnQgeyBDb2xsZWN0aW9uU2l6ZU9ic2VydmVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb2xsZWN0aW9uLXNpemUtb2JzZXJ2ZXIuanMubWFwIiwiaW1wb3J0IHsgX19kZWNvcmF0ZSwgX19tZXRhZGF0YSB9IGZyb20gXCJ0c2xpYlwiO1xuLyogZXNsaW50LWRpc2FibGUgZXFlcWVxLCBjb21wYXQvY29tcGF0ICovXG5pbXBvcnQgeyBQTEFURk9STSwgUmVwb3J0ZXIsIGlzQXJyYXlJbmRleCB9IGZyb20gJ0BhdXJlbGlhL2tlcm5lbCc7XG5pbXBvcnQgeyBJT2JzZXJ2ZXJMb2NhdG9yIH0gZnJvbSAnLi9vYnNlcnZlci1sb2NhdG9yJztcbmltcG9ydCB7IHN1YnNjcmliZXJDb2xsZWN0aW9uIH0gZnJvbSAnLi9zdWJzY3JpYmVyLWNvbGxlY3Rpb24nO1xuZXhwb3J0IGZ1bmN0aW9uIGNvbXB1dGVkKGNvbmZpZykge1xuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSAnY29tcHV0ZWQnIHByb3BlcnR5IGRlZmluZWQgb24gcHJvdG90eXBlIG5lZWRzIHRvIGJlIG5vbi1lbnVtZXJhYmxlIHRvIHByZXZlbnQgZ2V0dGluZyB0aGlzIGluIGxvb3BzLFxuICAgICAgICAgKiBpdGVyYXRpbmcgb3ZlciBvYmplY3QgcHJvcGVydGllcywgc3VjaCBhcyBmb3IuLmluLlxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGUgJ3ZhbHVlJyBvZiB0aGUgcHJvcGVydHkgc2hvdWxkIG5vdCBoYXZlIGFueSBwcm90b3R5cGUuIE90aGVyd2lzZSBpZiBieSBtaXN0YWtlIHRoZSB0YXJnZXQgcGFzc2VkXG4gICAgICAgICAqIGhlcmUgaXMgYE9iamVjdGAsIHRoZW4gd2UgYXJlIGluIHNvdXAuIEJlY2F1c2UgdGhlbiBldmVyeSBpbnN0YW5jZSBvZiBgT2JqZWN0YCB3aWxsIGhhdmUgdGhlIGBjb21wdXRlZGBcbiAgICAgICAgICogcHJvcGVydHksIGluY2x1ZGluZyB0aGUgYHZhbHVlYCAoaW4gdGhlIGRlc2NyaXB0b3Igb2YgdGhlIHByb3BlcnR5KSwgd2hlbiBhc3NpZ25lZCBge31gLiBUaGlzIG1pZ2h0XG4gICAgICAgICAqIGxlYWQgdG8gaW5maW5pdGUgcmVjdXJzaW9uIGZvciB0aGUgY2FzZXMgYXMgbWVudGlvbmVkIGFib3ZlLlxuICAgICAgICAgKi9cbiAgICAgICAgaWYgKHRhcmdldC5jb21wdXRlZCA9PSBudWxsKSB7XG4gICAgICAgICAgICBSZWZsZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgJ2NvbXB1dGVkJywge1xuICAgICAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogT2JqZWN0LmNyZWF0ZShudWxsKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bm5lY2Vzc2FyeS10eXBlLWFzc2VydGlvblxuICAgICAgICB0YXJnZXQuY29tcHV0ZWRba2V5XSA9IGNvbmZpZztcbiAgICB9O1xufVxuY29uc3QgY29tcHV0ZWRPdmVycmlkZURlZmF1bHRzID0geyBzdGF0aWM6IGZhbHNlLCB2b2xhdGlsZTogZmFsc2UgfTtcbi8qIEBpbnRlcm5hbCAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUNvbXB1dGVkT2JzZXJ2ZXIoZmxhZ3MsIG9ic2VydmVyTG9jYXRvciwgZGlydHlDaGVja2VyLCBsaWZlY3ljbGUsIGluc3RhbmNlLCBwcm9wZXJ0eU5hbWUsIGRlc2NyaXB0b3IpIHtcbiAgICBpZiAoZGVzY3JpcHRvci5jb25maWd1cmFibGUgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiBkaXJ0eUNoZWNrZXIuY3JlYXRlUHJvcGVydHkoaW5zdGFuY2UsIHByb3BlcnR5TmFtZSk7XG4gICAgfVxuICAgIGlmIChkZXNjcmlwdG9yLmdldCAhPSBudWxsKSB7XG4gICAgICAgIGNvbnN0IHsgY29uc3RydWN0b3I6IHsgcHJvdG90eXBlOiB7IGNvbXB1dGVkOiBnaXZlbk92ZXJyaWRlcyB9IH0gfSA9IGluc3RhbmNlO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L3N0cmljdC1ib29sZWFuLWV4cHJlc3Npb25zLCBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5uZWNlc3NhcnktdHlwZS1hc3NlcnRpb25cbiAgICAgICAgY29uc3Qgb3ZlcnJpZGVzID0gZ2l2ZW5PdmVycmlkZXMgJiYgZ2l2ZW5PdmVycmlkZXNbcHJvcGVydHlOYW1lXSB8fCBjb21wdXRlZE92ZXJyaWRlRGVmYXVsdHM7XG4gICAgICAgIGlmIChkZXNjcmlwdG9yLnNldCAhPSBudWxsKSB7XG4gICAgICAgICAgICBpZiAob3ZlcnJpZGVzLnZvbGF0aWxlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBHZXR0ZXJPYnNlcnZlcihmbGFncywgb3ZlcnJpZGVzLCBpbnN0YW5jZSwgcHJvcGVydHlOYW1lLCBkZXNjcmlwdG9yLCBvYnNlcnZlckxvY2F0b3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBDdXN0b21TZXR0ZXJPYnNlcnZlcihpbnN0YW5jZSwgcHJvcGVydHlOYW1lLCBkZXNjcmlwdG9yKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IEdldHRlck9ic2VydmVyKGZsYWdzLCBvdmVycmlkZXMsIGluc3RhbmNlLCBwcm9wZXJ0eU5hbWUsIGRlc2NyaXB0b3IsIG9ic2VydmVyTG9jYXRvcik7XG4gICAgfVxuICAgIHRocm93IFJlcG9ydGVyLmVycm9yKDE4LCBwcm9wZXJ0eU5hbWUpO1xufVxuLy8gVXNlZCB3aGVuIHRoZSBnZXR0ZXIgaXMgZGVwZW5kZW50IHNvbGVseSBvbiBjaGFuZ2VzIHRoYXQgaGFwcGVuIHdpdGhpbiB0aGUgc2V0dGVyLlxubGV0IEN1c3RvbVNldHRlck9ic2VydmVyID0gY2xhc3MgQ3VzdG9tU2V0dGVyT2JzZXJ2ZXIge1xuICAgIGNvbnN0cnVjdG9yKG9iaiwgcHJvcGVydHlLZXksIGRlc2NyaXB0b3IpIHtcbiAgICAgICAgdGhpcy5vYmogPSBvYmo7XG4gICAgICAgIHRoaXMucHJvcGVydHlLZXkgPSBwcm9wZXJ0eUtleTtcbiAgICAgICAgdGhpcy5kZXNjcmlwdG9yID0gZGVzY3JpcHRvcjtcbiAgICAgICAgdGhpcy5jdXJyZW50VmFsdWUgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMub2xkVmFsdWUgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMub2JzZXJ2aW5nID0gZmFsc2U7XG4gICAgfVxuICAgIHNldFZhbHVlKG5ld1ZhbHVlKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uLCBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5uZWNlc3NhcnktdHlwZS1hc3NlcnRpb25cbiAgICAgICAgdGhpcy5kZXNjcmlwdG9yLnNldC5jYWxsKHRoaXMub2JqLCBuZXdWYWx1ZSk7IC8vIE5vbi1udWxsIGlzIGltcGxpZWQgYmVjYXVzZSBkZXNjcmlwdG9ycyB3aXRob3V0IHNldHRlcnMgd29uJ3QgZW5kIHVwIGhlcmVcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFZhbHVlICE9PSBuZXdWYWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5vbGRWYWx1ZSA9IHRoaXMuY3VycmVudFZhbHVlO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50VmFsdWUgPSBuZXdWYWx1ZTtcbiAgICAgICAgICAgIHRoaXMuY2FsbFN1YnNjcmliZXJzKG5ld1ZhbHVlLCB0aGlzLm9sZFZhbHVlLCAxNiAvKiB1cGRhdGVUYXJnZXRJbnN0YW5jZSAqLyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3Vic2NyaWJlKHN1YnNjcmliZXIpIHtcbiAgICAgICAgaWYgKCF0aGlzLm9ic2VydmluZykge1xuICAgICAgICAgICAgdGhpcy5jb252ZXJ0UHJvcGVydHkoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFkZFN1YnNjcmliZXIoc3Vic2NyaWJlcik7XG4gICAgfVxuICAgIHVuc3Vic2NyaWJlKHN1YnNjcmliZXIpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVTdWJzY3JpYmVyKHN1YnNjcmliZXIpO1xuICAgIH1cbiAgICBjb252ZXJ0UHJvcGVydHkoKSB7XG4gICAgICAgIHRoaXMub2JzZXJ2aW5nID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5jdXJyZW50VmFsdWUgPSB0aGlzLm9ialt0aGlzLnByb3BlcnR5S2V5XTtcbiAgICAgICAgY29uc3Qgc2V0ID0gKG5ld1ZhbHVlKSA9PiB7IHRoaXMuc2V0VmFsdWUobmV3VmFsdWUpOyB9O1xuICAgICAgICBSZWZsZWN0LmRlZmluZVByb3BlcnR5KHRoaXMub2JqLCB0aGlzLnByb3BlcnR5S2V5LCB7IHNldCwgZ2V0OiB0aGlzLmRlc2NyaXB0b3IuZ2V0IH0pO1xuICAgIH1cbn07XG5DdXN0b21TZXR0ZXJPYnNlcnZlciA9IF9fZGVjb3JhdGUoW1xuICAgIHN1YnNjcmliZXJDb2xsZWN0aW9uKCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3QsIFN0cmluZywgT2JqZWN0XSlcbl0sIEN1c3RvbVNldHRlck9ic2VydmVyKTtcbmV4cG9ydCB7IEN1c3RvbVNldHRlck9ic2VydmVyIH07XG4vLyBVc2VkIHdoZW4gdGhlcmUgaXMgbm8gc2V0dGVyLCBhbmQgdGhlIGdldHRlciBpcyBkZXBlbmRlbnQgb24gb3RoZXIgcHJvcGVydGllcyBvZiB0aGUgb2JqZWN0O1xuLy8gVXNlZCB3aGVuIHRoZXJlIGlzIGEgc2V0dGVyIGJ1dCB0aGUgdmFsdWUgb2YgdGhlIGdldHRlciBjYW4gY2hhbmdlIGJhc2VkIG9uIHByb3BlcnRpZXMgc2V0IG91dHNpZGUgb2YgdGhlIHNldHRlci5cbmxldCBHZXR0ZXJPYnNlcnZlciA9IGNsYXNzIEdldHRlck9ic2VydmVyIHtcbiAgICBjb25zdHJ1Y3RvcihmbGFncywgb3ZlcnJpZGVzLCBvYmosIHByb3BlcnR5S2V5LCBkZXNjcmlwdG9yLCBvYnNlcnZlckxvY2F0b3IpIHtcbiAgICAgICAgdGhpcy5vdmVycmlkZXMgPSBvdmVycmlkZXM7XG4gICAgICAgIHRoaXMub2JqID0gb2JqO1xuICAgICAgICB0aGlzLnByb3BlcnR5S2V5ID0gcHJvcGVydHlLZXk7XG4gICAgICAgIHRoaXMuZGVzY3JpcHRvciA9IGRlc2NyaXB0b3I7XG4gICAgICAgIHRoaXMuY3VycmVudFZhbHVlID0gdm9pZCAwO1xuICAgICAgICB0aGlzLm9sZFZhbHVlID0gdm9pZCAwO1xuICAgICAgICB0aGlzLnByb3BlcnR5RGVwcyA9IFtdO1xuICAgICAgICB0aGlzLmNvbGxlY3Rpb25EZXBzID0gW107XG4gICAgICAgIHRoaXMuc3Vic2NyaWJlckNvdW50ID0gMDtcbiAgICAgICAgdGhpcy5pc0NvbGxlY3RpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wcm94eSA9IG5ldyBQcm94eShvYmosIGNyZWF0ZUdldHRlclRyYXBzKGZsYWdzLCBvYnNlcnZlckxvY2F0b3IsIHRoaXMpKTtcbiAgICAgICAgY29uc3QgZ2V0ID0gKCkgPT4gdGhpcy5nZXRWYWx1ZSgpO1xuICAgICAgICBSZWZsZWN0LmRlZmluZVByb3BlcnR5KG9iaiwgcHJvcGVydHlLZXksIHsgZ2V0LCBzZXQ6IGRlc2NyaXB0b3Iuc2V0IH0pO1xuICAgIH1cbiAgICBhZGRQcm9wZXJ0eURlcChzdWJzY3JpYmFibGUpIHtcbiAgICAgICAgaWYgKCF0aGlzLnByb3BlcnR5RGVwcy5pbmNsdWRlcyhzdWJzY3JpYmFibGUpKSB7XG4gICAgICAgICAgICB0aGlzLnByb3BlcnR5RGVwcy5wdXNoKHN1YnNjcmliYWJsZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYWRkQ29sbGVjdGlvbkRlcChzdWJzY3JpYmFibGUpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNvbGxlY3Rpb25EZXBzLmluY2x1ZGVzKHN1YnNjcmliYWJsZSkpIHtcbiAgICAgICAgICAgIHRoaXMuY29sbGVjdGlvbkRlcHMucHVzaChzdWJzY3JpYmFibGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldFZhbHVlKCkge1xuICAgICAgICBpZiAodGhpcy5zdWJzY3JpYmVyQ291bnQgPiAwIHx8IHRoaXMuaXNDb2xsZWN0aW5nKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvblxuICAgICAgICAgICAgdGhpcy5jdXJyZW50VmFsdWUgPSBSZWZsZWN0LmFwcGx5KHRoaXMuZGVzY3JpcHRvci5nZXQsIHRoaXMucHJveHksIFBMQVRGT1JNLmVtcHR5QXJyYXkpOyAvLyBOb24tbnVsbCBpcyBpbXBsaWVkIGJlY2F1c2UgZGVzY3JpcHRvcnMgd2l0aG91dCBnZXR0ZXJzIHdvbid0IGVuZCB1cCBoZXJlXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvblxuICAgICAgICAgICAgdGhpcy5jdXJyZW50VmFsdWUgPSBSZWZsZWN0LmFwcGx5KHRoaXMuZGVzY3JpcHRvci5nZXQsIHRoaXMub2JqLCBQTEFURk9STS5lbXB0eUFycmF5KTsgLy8gTm9uLW51bGwgaXMgaW1wbGllZCBiZWNhdXNlIGRlc2NyaXB0b3JzIHdpdGhvdXQgZ2V0dGVycyB3b24ndCBlbmQgdXAgaGVyZVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRWYWx1ZTtcbiAgICB9XG4gICAgc3Vic2NyaWJlKHN1YnNjcmliZXIpIHtcbiAgICAgICAgdGhpcy5hZGRTdWJzY3JpYmVyKHN1YnNjcmliZXIpO1xuICAgICAgICBpZiAoKyt0aGlzLnN1YnNjcmliZXJDb3VudCA9PT0gMSkge1xuICAgICAgICAgICAgdGhpcy5nZXRWYWx1ZUFuZENvbGxlY3REZXBlbmRlbmNpZXModHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdW5zdWJzY3JpYmUoc3Vic2NyaWJlcikge1xuICAgICAgICB0aGlzLnJlbW92ZVN1YnNjcmliZXIoc3Vic2NyaWJlcik7XG4gICAgICAgIGlmICgtLXRoaXMuc3Vic2NyaWJlckNvdW50ID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlQWxsRGVwZW5kZW5jaWVzKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFuZGxlQ2hhbmdlKCkge1xuICAgICAgICBjb25zdCBvbGRWYWx1ZSA9IHRoaXMuY3VycmVudFZhbHVlO1xuICAgICAgICBjb25zdCBuZXdWYWx1ZSA9IHRoaXMuZ2V0VmFsdWVBbmRDb2xsZWN0RGVwZW5kZW5jaWVzKGZhbHNlKTtcbiAgICAgICAgaWYgKG9sZFZhbHVlICE9PSBuZXdWYWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5jYWxsU3Vic2NyaWJlcnMobmV3VmFsdWUsIG9sZFZhbHVlLCAxNiAvKiB1cGRhdGVUYXJnZXRJbnN0YW5jZSAqLyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFuZGxlQ29sbGVjdGlvbkNoYW5nZSgpIHtcbiAgICAgICAgY29uc3Qgb2xkVmFsdWUgPSB0aGlzLmN1cnJlbnRWYWx1ZTtcbiAgICAgICAgY29uc3QgbmV3VmFsdWUgPSB0aGlzLmdldFZhbHVlQW5kQ29sbGVjdERlcGVuZGVuY2llcyhmYWxzZSk7XG4gICAgICAgIGlmIChvbGRWYWx1ZSAhPT0gbmV3VmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuY2FsbFN1YnNjcmliZXJzKG5ld1ZhbHVlLCBvbGRWYWx1ZSwgMTYgLyogdXBkYXRlVGFyZ2V0SW5zdGFuY2UgKi8pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldFZhbHVlQW5kQ29sbGVjdERlcGVuZGVuY2llcyhyZXF1aXJlQ29sbGVjdCkge1xuICAgICAgICBjb25zdCBkeW5hbWljRGVwZW5kZW5jaWVzID0gIXRoaXMub3ZlcnJpZGVzLnN0YXRpYyB8fCByZXF1aXJlQ29sbGVjdDtcbiAgICAgICAgaWYgKGR5bmFtaWNEZXBlbmRlbmNpZXMpIHtcbiAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmVBbGxEZXBlbmRlbmNpZXMoKTtcbiAgICAgICAgICAgIHRoaXMuaXNDb2xsZWN0aW5nID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmN1cnJlbnRWYWx1ZSA9IHRoaXMuZ2V0VmFsdWUoKTtcbiAgICAgICAgaWYgKGR5bmFtaWNEZXBlbmRlbmNpZXMpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcGVydHlEZXBzLmZvckVhY2goeCA9PiB7IHguc3Vic2NyaWJlKHRoaXMpOyB9KTtcbiAgICAgICAgICAgIHRoaXMuY29sbGVjdGlvbkRlcHMuZm9yRWFjaCh4ID0+IHsgeC5zdWJzY3JpYmVUb0NvbGxlY3Rpb24odGhpcyk7IH0pO1xuICAgICAgICAgICAgdGhpcy5pc0NvbGxlY3RpbmcgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50VmFsdWU7XG4gICAgfVxuICAgIGRvTm90Q29sbGVjdCh0YXJnZXQsIGtleSwgcmVjZWl2ZXIpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLmlzQ29sbGVjdGluZ1xuICAgICAgICAgICAgfHwga2V5ID09PSAnJG9ic2VydmVycydcbiAgICAgICAgICAgIHx8IGtleSA9PT0gJyRzeW50aGV0aWMnXG4gICAgICAgICAgICB8fCBrZXkgPT09ICdjb25zdHJ1Y3Rvcic7XG4gICAgfVxuICAgIHVuc3Vic2NyaWJlQWxsRGVwZW5kZW5jaWVzKCkge1xuICAgICAgICB0aGlzLnByb3BlcnR5RGVwcy5mb3JFYWNoKHggPT4geyB4LnVuc3Vic2NyaWJlKHRoaXMpOyB9KTtcbiAgICAgICAgdGhpcy5wcm9wZXJ0eURlcHMubGVuZ3RoID0gMDtcbiAgICAgICAgdGhpcy5jb2xsZWN0aW9uRGVwcy5mb3JFYWNoKHggPT4geyB4LnVuc3Vic2NyaWJlRnJvbUNvbGxlY3Rpb24odGhpcyk7IH0pO1xuICAgICAgICB0aGlzLmNvbGxlY3Rpb25EZXBzLmxlbmd0aCA9IDA7XG4gICAgfVxufTtcbkdldHRlck9ic2VydmVyID0gX19kZWNvcmF0ZShbXG4gICAgc3Vic2NyaWJlckNvbGxlY3Rpb24oKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW051bWJlciwgT2JqZWN0LCBPYmplY3QsIFN0cmluZywgT2JqZWN0LCBPYmplY3RdKVxuXSwgR2V0dGVyT2JzZXJ2ZXIpO1xuZXhwb3J0IHsgR2V0dGVyT2JzZXJ2ZXIgfTtcbmNvbnN0IHRvU3RyaW5nVGFnID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcbi8qKlxuICogX0BwYXJhbSBvYnNlcnZlciBUaGUgb3duaW5nIG9ic2VydmVyIG9mIGN1cnJlbnQgZXZhbHVhdGlvbiwgd2lsbCBzdWJzY3JpYmUgdG8gYWxsIG9ic2VydmVycyBjcmVhdGVkIHZpYSBwcm94eVxuICovXG5mdW5jdGlvbiBjcmVhdGVHZXR0ZXJUcmFwcyhmbGFncywgb2JzZXJ2ZXJMb2NhdG9yLCBvYnNlcnZlcikge1xuICAgIHJldHVybiB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKHRhcmdldCwga2V5LCByZWNlaXZlcikge1xuICAgICAgICAgICAgaWYgKG9ic2VydmVyLmRvTm90Q29sbGVjdCh0YXJnZXQsIGtleSwgcmVjZWl2ZXIpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFJlZmxlY3QuZ2V0KHRhcmdldCwga2V5LCByZWNlaXZlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBUaGUgbGVuZ3RoIGFuZCBpdGVyYXRvciBwcm9wZXJ0aWVzIG5lZWQgdG8gYmUgaW52b2tlZCBvbiB0aGUgb3JpZ2luYWwgb2JqZWN0XG4gICAgICAgICAgICAvLyAoZm9yIE1hcCBhbmQgU2V0IGF0IGxlYXN0KSBvciB0aGV5IHdpbGwgdGhyb3cuXG4gICAgICAgICAgICBzd2l0Y2ggKHRvU3RyaW5nVGFnLmNhbGwodGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ1tvYmplY3QgQXJyYXldJzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKGtleSA9PT0gJ2xlbmd0aCcgfHwgaXNBcnJheUluZGV4KGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLmFkZENvbGxlY3Rpb25EZXAob2JzZXJ2ZXJMb2NhdG9yLmdldEFycmF5T2JzZXJ2ZXIoZmxhZ3MsIHRhcmdldCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByb3h5T3JWYWx1ZShmbGFncywgdGFyZ2V0LCBrZXksIG9ic2VydmVyTG9jYXRvciwgb2JzZXJ2ZXIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ1tvYmplY3QgTWFwXSc6XG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXkgPT09ICdzaXplJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIuYWRkQ29sbGVjdGlvbkRlcChvYnNlcnZlckxvY2F0b3IuZ2V0TWFwT2JzZXJ2ZXIoZmxhZ3MsIHRhcmdldCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJlZmxlY3QuZ2V0KHRhcmdldCwga2V5LCB0YXJnZXQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ1tvYmplY3QgU2V0XSc6XG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXkgPT09ICdzaXplJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIuYWRkQ29sbGVjdGlvbkRlcChvYnNlcnZlckxvY2F0b3IuZ2V0U2V0T2JzZXJ2ZXIoZmxhZ3MsIHRhcmdldCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJlZmxlY3QuZ2V0KHRhcmdldCwga2V5LCB0YXJnZXQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb2JzZXJ2ZXIuYWRkUHJvcGVydHlEZXAob2JzZXJ2ZXJMb2NhdG9yLmdldE9ic2VydmVyKGZsYWdzLCB0YXJnZXQsIGtleSkpO1xuICAgICAgICAgICAgcmV0dXJuIHByb3h5T3JWYWx1ZShmbGFncywgdGFyZ2V0LCBrZXksIG9ic2VydmVyTG9jYXRvciwgb2JzZXJ2ZXIpO1xuICAgICAgICB9XG4gICAgfTtcbn1cbi8qKlxuICogX0BwYXJhbSBvYnNlcnZlciBUaGUgb3duaW5nIG9ic2VydmVyIG9mIGN1cnJlbnQgZXZhbHVhdGlvbiwgd2lsbCBzdWJzY3JpYmUgdG8gYWxsIG9ic2VydmVycyBjcmVhdGVkIHZpYSBwcm94eVxuICovXG5mdW5jdGlvbiBwcm94eU9yVmFsdWUoZmxhZ3MsIHRhcmdldCwga2V5LCBvYnNlcnZlckxvY2F0b3IsIG9ic2VydmVyKSB7XG4gICAgY29uc3QgdmFsdWUgPSBSZWZsZWN0LmdldCh0YXJnZXQsIGtleSwgdGFyZ2V0KTtcbiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnb2JqZWN0JyB8fCB0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicgfHwgdmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFByb3h5KHZhbHVlLCBjcmVhdGVHZXR0ZXJUcmFwcyhmbGFncywgb2JzZXJ2ZXJMb2NhdG9yLCBvYnNlcnZlcikpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29tcHV0ZWQtb2JzZXJ2ZXIuanMubWFwIiwiaW1wb3J0IHsgX19kZWNvcmF0ZSwgX19tZXRhZGF0YSwgX19wYXJhbSB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgREksIFJlcG9ydGVyIH0gZnJvbSAnQGF1cmVsaWEva2VybmVsJztcbmltcG9ydCB7IHN1YnNjcmliZXJDb2xsZWN0aW9uIH0gZnJvbSAnLi9zdWJzY3JpYmVyLWNvbGxlY3Rpb24nO1xuaW1wb3J0IHsgSVNjaGVkdWxlciB9IGZyb20gJ0BhdXJlbGlhL3NjaGVkdWxlcic7XG5leHBvcnQgY29uc3QgSURpcnR5Q2hlY2tlciA9IERJLmNyZWF0ZUludGVyZmFjZSgnSURpcnR5Q2hlY2tlcicpLndpdGhEZWZhdWx0KHggPT4geC5zaW5nbGV0b24oRGlydHlDaGVja2VyKSk7XG5leHBvcnQgY29uc3QgRGlydHlDaGVja1NldHRpbmdzID0ge1xuICAgIC8qKlxuICAgICAqIERlZmF1bHQ6IGA2YFxuICAgICAqXG4gICAgICogQWRqdXN0IHRoZSBnbG9iYWwgZGlydHkgY2hlY2sgZnJlcXVlbmN5LlxuICAgICAqIE1lYXN1cmVzIGluIFwiZnJhbWVzIHBlciBjaGVja1wiLCBzdWNoIHRoYXQgKGdpdmVuIGFuIEZQUyBvZiA2MCk6XG4gICAgICogLSBBIHZhbHVlIG9mIDEgd2lsbCByZXN1bHQgaW4gNjAgZGlydHkgY2hlY2tzIHBlciBzZWNvbmRcbiAgICAgKiAtIEEgdmFsdWUgb2YgNiB3aWxsIHJlc3VsdCBpbiAxMCBkaXJ0eSBjaGVja3MgcGVyIHNlY29uZFxuICAgICAqL1xuICAgIGZyYW1lc1BlckNoZWNrOiA2LFxuICAgIC8qKlxuICAgICAqIERlZmF1bHQ6IGBmYWxzZWBcbiAgICAgKlxuICAgICAqIERpc2FibGUgZGlydHktY2hlY2tpbmcgZW50aXJlbHkuIFByb3BlcnRpZXMgdGhhdCBjYW5ub3QgYmUgb2JzZXJ2ZWQgd2l0aG91dCBkaXJ0eSBjaGVja2luZ1xuICAgICAqIG9yIGFuIGFkYXB0ZXIsIHdpbGwgc2ltcGx5IG5vdCBiZSBvYnNlcnZlZC5cbiAgICAgKi9cbiAgICBkaXNhYmxlZDogZmFsc2UsXG4gICAgLyoqXG4gICAgICogRGVmYXVsdDogYHRydWVgXG4gICAgICpcbiAgICAgKiBMb2cgYSB3YXJuaW5nIG1lc3NhZ2UgdG8gdGhlIGNvbnNvbGUgaWYgYSBwcm9wZXJ0eSBpcyBiZWluZyBkaXJ0eS1jaGVja2VkLlxuICAgICAqL1xuICAgIHdhcm46IHRydWUsXG4gICAgLyoqXG4gICAgICogRGVmYXVsdDogYGZhbHNlYFxuICAgICAqXG4gICAgICogVGhyb3cgYW4gZXJyb3IgaWYgYSBwcm9wZXJ0eSBpcyBiZWluZyBkaXJ0eS1jaGVja2VkLlxuICAgICAqL1xuICAgIHRocm93OiBmYWxzZSxcbiAgICAvKipcbiAgICAgKiBSZXNldHMgYWxsIGRpcnR5IGNoZWNraW5nIHNldHRpbmdzIHRvIHRoZSBmcmFtZXdvcmsncyBkZWZhdWx0cy5cbiAgICAgKi9cbiAgICByZXNldFRvRGVmYXVsdCgpIHtcbiAgICAgICAgdGhpcy5mcmFtZXNQZXJDaGVjayA9IDY7XG4gICAgICAgIHRoaXMuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy53YXJuID0gdHJ1ZTtcbiAgICAgICAgdGhpcy50aHJvdyA9IGZhbHNlO1xuICAgIH1cbn07XG4vKiogQGludGVybmFsICovXG5sZXQgRGlydHlDaGVja2VyID0gY2xhc3MgRGlydHlDaGVja2VyIHtcbiAgICBjb25zdHJ1Y3RvcihzY2hlZHVsZXIpIHtcbiAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICAgIHRoaXMudHJhY2tlZCA9IFtdO1xuICAgICAgICB0aGlzLnRhc2sgPSBudWxsO1xuICAgICAgICB0aGlzLmVsYXBzZWRGcmFtZXMgPSAwO1xuICAgIH1cbiAgICBjcmVhdGVQcm9wZXJ0eShvYmosIHByb3BlcnR5TmFtZSkge1xuICAgICAgICBpZiAoRGlydHlDaGVja1NldHRpbmdzLnRocm93KSB7XG4gICAgICAgICAgICB0aHJvdyBSZXBvcnRlci5lcnJvcig4MDAsIHByb3BlcnR5TmFtZSk7IC8vIFRPRE86IGNyZWF0ZS9vcmdhbml6ZSBlcnJvciBjb2RlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKERpcnR5Q2hlY2tTZXR0aW5ncy53YXJuKSB7XG4gICAgICAgICAgICBSZXBvcnRlci53cml0ZSg4MDEsIHByb3BlcnR5TmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBEaXJ0eUNoZWNrUHJvcGVydHkodGhpcywgb2JqLCBwcm9wZXJ0eU5hbWUpO1xuICAgIH1cbiAgICBhZGRQcm9wZXJ0eShwcm9wZXJ0eSkge1xuICAgICAgICB0aGlzLnRyYWNrZWQucHVzaChwcm9wZXJ0eSk7XG4gICAgICAgIGlmICh0aGlzLnRyYWNrZWQubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICB0aGlzLnRhc2sgPSB0aGlzLnNjaGVkdWxlci5xdWV1ZVJlbmRlclRhc2soKCkgPT4gdGhpcy5jaGVjaygpLCB7IHBlcnNpc3RlbnQ6IHRydWUgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVtb3ZlUHJvcGVydHkocHJvcGVydHkpIHtcbiAgICAgICAgdGhpcy50cmFja2VkLnNwbGljZSh0aGlzLnRyYWNrZWQuaW5kZXhPZihwcm9wZXJ0eSksIDEpO1xuICAgICAgICBpZiAodGhpcy50cmFja2VkLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy50YXNrLmNhbmNlbCgpO1xuICAgICAgICAgICAgdGhpcy50YXNrID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjaGVjayhkZWx0YSkge1xuICAgICAgICBpZiAoRGlydHlDaGVja1NldHRpbmdzLmRpc2FibGVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCsrdGhpcy5lbGFwc2VkRnJhbWVzIDwgRGlydHlDaGVja1NldHRpbmdzLmZyYW1lc1BlckNoZWNrKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbGFwc2VkRnJhbWVzID0gMDtcbiAgICAgICAgY29uc3QgdHJhY2tlZCA9IHRoaXMudHJhY2tlZDtcbiAgICAgICAgY29uc3QgbGVuID0gdHJhY2tlZC5sZW5ndGg7XG4gICAgICAgIGxldCBjdXJyZW50O1xuICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgIGZvciAoOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAgICAgIGN1cnJlbnQgPSB0cmFja2VkW2ldO1xuICAgICAgICAgICAgaWYgKGN1cnJlbnQuaXNEaXJ0eSgpKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudC5mbHVzaCgyNTYgLyogZnJvbVRpY2sgKi8pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufTtcbkRpcnR5Q2hlY2tlciA9IF9fZGVjb3JhdGUoW1xuICAgIF9fcGFyYW0oMCwgSVNjaGVkdWxlciksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3RdKVxuXSwgRGlydHlDaGVja2VyKTtcbmV4cG9ydCB7IERpcnR5Q2hlY2tlciB9O1xubGV0IERpcnR5Q2hlY2tQcm9wZXJ0eSA9IGNsYXNzIERpcnR5Q2hlY2tQcm9wZXJ0eSB7XG4gICAgY29uc3RydWN0b3IoZGlydHlDaGVja2VyLCBvYmosIHByb3BlcnR5S2V5KSB7XG4gICAgICAgIHRoaXMuZGlydHlDaGVja2VyID0gZGlydHlDaGVja2VyO1xuICAgICAgICB0aGlzLm9iaiA9IG9iajtcbiAgICAgICAgdGhpcy5wcm9wZXJ0eUtleSA9IHByb3BlcnR5S2V5O1xuICAgIH1cbiAgICBpc0RpcnR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vbGRWYWx1ZSAhPT0gdGhpcy5vYmpbdGhpcy5wcm9wZXJ0eUtleV07XG4gICAgfVxuICAgIGZsdXNoKGZsYWdzKSB7XG4gICAgICAgIGNvbnN0IG9sZFZhbHVlID0gdGhpcy5vbGRWYWx1ZTtcbiAgICAgICAgY29uc3QgbmV3VmFsdWUgPSB0aGlzLm9ialt0aGlzLnByb3BlcnR5S2V5XTtcbiAgICAgICAgdGhpcy5jYWxsU3Vic2NyaWJlcnMobmV3VmFsdWUsIG9sZFZhbHVlLCBmbGFncyB8IDE2IC8qIHVwZGF0ZVRhcmdldEluc3RhbmNlICovKTtcbiAgICAgICAgdGhpcy5vbGRWYWx1ZSA9IG5ld1ZhbHVlO1xuICAgIH1cbiAgICBzdWJzY3JpYmUoc3Vic2NyaWJlcikge1xuICAgICAgICBpZiAoIXRoaXMuaGFzU3Vic2NyaWJlcnMoKSkge1xuICAgICAgICAgICAgdGhpcy5vbGRWYWx1ZSA9IHRoaXMub2JqW3RoaXMucHJvcGVydHlLZXldO1xuICAgICAgICAgICAgdGhpcy5kaXJ0eUNoZWNrZXIuYWRkUHJvcGVydHkodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hZGRTdWJzY3JpYmVyKHN1YnNjcmliZXIpO1xuICAgIH1cbiAgICB1bnN1YnNjcmliZShzdWJzY3JpYmVyKSB7XG4gICAgICAgIGlmICh0aGlzLnJlbW92ZVN1YnNjcmliZXIoc3Vic2NyaWJlcikgJiYgIXRoaXMuaGFzU3Vic2NyaWJlcnMoKSkge1xuICAgICAgICAgICAgdGhpcy5kaXJ0eUNoZWNrZXIucmVtb3ZlUHJvcGVydHkodGhpcyk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuRGlydHlDaGVja1Byb3BlcnR5ID0gX19kZWNvcmF0ZShbXG4gICAgc3Vic2NyaWJlckNvbGxlY3Rpb24oKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW09iamVjdCwgT2JqZWN0LCBTdHJpbmddKVxuXSwgRGlydHlDaGVja1Byb3BlcnR5KTtcbmV4cG9ydCB7IERpcnR5Q2hlY2tQcm9wZXJ0eSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGlydHktY2hlY2tlci5qcy5tYXAiLCJpbXBvcnQgeyBfX2RlY29yYXRlLCBfX21ldGFkYXRhIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBJTGlmZWN5Y2xlIH0gZnJvbSAnLi4vbGlmZWN5Y2xlJztcbmltcG9ydCB7IGNyZWF0ZUluZGV4TWFwIH0gZnJvbSAnLi4vb2JzZXJ2YXRpb24nO1xuaW1wb3J0IHsgQ29sbGVjdGlvblNpemVPYnNlcnZlciB9IGZyb20gJy4vY29sbGVjdGlvbi1zaXplLW9ic2VydmVyJztcbmltcG9ydCB7IGNvbGxlY3Rpb25TdWJzY3JpYmVyQ29sbGVjdGlvbiB9IGZyb20gJy4vc3Vic2NyaWJlci1jb2xsZWN0aW9uJztcbmNvbnN0IG9ic2VydmVyTG9va3VwID0gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IHByb3RvID0gTWFwLnByb3RvdHlwZTtcbmNvbnN0ICRzZXQgPSBwcm90by5zZXQ7XG5jb25zdCAkY2xlYXIgPSBwcm90by5jbGVhcjtcbmNvbnN0ICRkZWxldGUgPSBwcm90by5kZWxldGU7XG5jb25zdCBuYXRpdmUgPSB7IHNldDogJHNldCwgY2xlYXI6ICRjbGVhciwgZGVsZXRlOiAkZGVsZXRlIH07XG5jb25zdCBtZXRob2RzID0gWydzZXQnLCAnY2xlYXInLCAnZGVsZXRlJ107XG4vLyBub3RlOiB3ZSBjYW4ndCByZWFsbHkgZG8gbXVjaCB3aXRoIE1hcCBkdWUgdG8gdGhlIGludGVybmFsIGRhdGEgc3RydWN0dXJlIG5vdCBiZWluZyBhY2Nlc3NpYmxlIHNvIHdlJ3JlIGp1c3QgdXNpbmcgdGhlIG5hdGl2ZSBjYWxsc1xuLy8gZm9ydHVuYXRlbHksIG1hcC9kZWxldGUvY2xlYXIgYXJlIGVhc3kgdG8gcmVjb25zdHJ1Y3QgZm9yIHRoZSBpbmRleE1hcFxuY29uc3Qgb2JzZXJ2ZSA9IHtcbiAgICAvLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy1tYXAucHJvdG90eXBlLm1hcFxuICAgIHNldDogZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgICAgbGV0ICR0aGlzID0gdGhpcztcbiAgICAgICAgaWYgKCR0aGlzLiRyYXcgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgJHRoaXMgPSAkdGhpcy4kcmF3O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG8gPSBvYnNlcnZlckxvb2t1cC5nZXQoJHRoaXMpO1xuICAgICAgICBpZiAobyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAkc2V0LmNhbGwoJHRoaXMsIGtleSwgdmFsdWUpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgb2xkVmFsdWUgPSAkdGhpcy5nZXQoa2V5KTtcbiAgICAgICAgY29uc3Qgb2xkU2l6ZSA9ICR0aGlzLnNpemU7XG4gICAgICAgICRzZXQuY2FsbCgkdGhpcywga2V5LCB2YWx1ZSk7XG4gICAgICAgIGNvbnN0IG5ld1NpemUgPSAkdGhpcy5zaXplO1xuICAgICAgICBpZiAobmV3U2l6ZSA9PT0gb2xkU2l6ZSkge1xuICAgICAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiAkdGhpcy5lbnRyaWVzKCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoZW50cnlbMF0gPT09IGtleSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZW50cnlbMV0gIT09IG9sZFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvLmluZGV4TWFwLmRlbGV0ZWRJdGVtcy5wdXNoKG8uaW5kZXhNYXBbaV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgby5pbmRleE1hcFtpXSA9IC0yO1xuICAgICAgICAgICAgICAgICAgICAgICAgby5ub3RpZnkoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgby5pbmRleE1hcFtvbGRTaXplXSA9IC0yO1xuICAgICAgICBvLm5vdGlmeSgpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuICAgIC8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLW1hcC5wcm90b3R5cGUuY2xlYXJcbiAgICBjbGVhcjogZnVuY3Rpb24gKCkge1xuICAgICAgICBsZXQgJHRoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoJHRoaXMuJHJhdyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAkdGhpcyA9ICR0aGlzLiRyYXc7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbyA9IG9ic2VydmVyTG9va3VwLmdldCgkdGhpcyk7XG4gICAgICAgIGlmIChvID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiAkY2xlYXIuY2FsbCgkdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2l6ZSA9ICR0aGlzLnNpemU7XG4gICAgICAgIGlmIChzaXplID4gMCkge1xuICAgICAgICAgICAgY29uc3QgaW5kZXhNYXAgPSBvLmluZGV4TWFwO1xuICAgICAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiAkdGhpcy5rZXlzKCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXhNYXBbaV0gPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICBpbmRleE1hcC5kZWxldGVkSXRlbXMucHVzaChpbmRleE1hcFtpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICRjbGVhci5jYWxsKCR0aGlzKTtcbiAgICAgICAgICAgIGluZGV4TWFwLmxlbmd0aCA9IDA7XG4gICAgICAgICAgICBvLm5vdGlmeSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfSxcbiAgICAvLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy1tYXAucHJvdG90eXBlLmRlbGV0ZVxuICAgIGRlbGV0ZTogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGxldCAkdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICgkdGhpcy4kcmF3ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICR0aGlzID0gJHRoaXMuJHJhdztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBvID0gb2JzZXJ2ZXJMb29rdXAuZ2V0KCR0aGlzKTtcbiAgICAgICAgaWYgKG8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuICRkZWxldGUuY2FsbCgkdGhpcywgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNpemUgPSAkdGhpcy5zaXplO1xuICAgICAgICBpZiAoc2l6ZSA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgY29uc3QgaW5kZXhNYXAgPSBvLmluZGV4TWFwO1xuICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mICR0aGlzLmtleXMoKSkge1xuICAgICAgICAgICAgaWYgKGVudHJ5ID09PSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmIChpbmRleE1hcFtpXSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGluZGV4TWFwLmRlbGV0ZWRJdGVtcy5wdXNoKGluZGV4TWFwW2ldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaW5kZXhNYXAuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlbGV0ZVJlc3VsdCA9ICRkZWxldGUuY2FsbCgkdGhpcywgdmFsdWUpO1xuICAgICAgICAgICAgICAgIGlmIChkZWxldGVSZXN1bHQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgby5ub3RpZnkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlbGV0ZVJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICsraTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufTtcbmNvbnN0IGRlc2NyaXB0b3JQcm9wcyA9IHtcbiAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICBjb25maWd1cmFibGU6IHRydWVcbn07XG5jb25zdCBkZWYgPSBSZWZsZWN0LmRlZmluZVByb3BlcnR5O1xuZm9yIChjb25zdCBtZXRob2Qgb2YgbWV0aG9kcykge1xuICAgIGRlZihvYnNlcnZlW21ldGhvZF0sICdvYnNlcnZpbmcnLCB7IHZhbHVlOiB0cnVlLCB3cml0YWJsZTogZmFsc2UsIGNvbmZpZ3VyYWJsZTogZmFsc2UsIGVudW1lcmFibGU6IGZhbHNlIH0pO1xufVxubGV0IGVuYWJsZU1hcE9ic2VydmF0aW9uQ2FsbGVkID0gZmFsc2U7XG5leHBvcnQgZnVuY3Rpb24gZW5hYmxlTWFwT2JzZXJ2YXRpb24oKSB7XG4gICAgZm9yIChjb25zdCBtZXRob2Qgb2YgbWV0aG9kcykge1xuICAgICAgICBpZiAocHJvdG9bbWV0aG9kXS5vYnNlcnZpbmcgIT09IHRydWUpIHtcbiAgICAgICAgICAgIGRlZihwcm90bywgbWV0aG9kLCB7IC4uLmRlc2NyaXB0b3JQcm9wcywgdmFsdWU6IG9ic2VydmVbbWV0aG9kXSB9KTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBkaXNhYmxlTWFwT2JzZXJ2YXRpb24oKSB7XG4gICAgZm9yIChjb25zdCBtZXRob2Qgb2YgbWV0aG9kcykge1xuICAgICAgICBpZiAocHJvdG9bbWV0aG9kXS5vYnNlcnZpbmcgPT09IHRydWUpIHtcbiAgICAgICAgICAgIGRlZihwcm90bywgbWV0aG9kLCB7IC4uLmRlc2NyaXB0b3JQcm9wcywgdmFsdWU6IG5hdGl2ZVttZXRob2RdIH0pO1xuICAgICAgICB9XG4gICAgfVxufVxuY29uc3Qgc2xpY2UgPSBBcnJheS5wcm90b3R5cGUuc2xpY2U7XG5sZXQgTWFwT2JzZXJ2ZXIgPSBjbGFzcyBNYXBPYnNlcnZlciB7XG4gICAgY29uc3RydWN0b3IoZmxhZ3MsIGxpZmVjeWNsZSwgbWFwKSB7XG4gICAgICAgIGlmICghZW5hYmxlTWFwT2JzZXJ2YXRpb25DYWxsZWQpIHtcbiAgICAgICAgICAgIGVuYWJsZU1hcE9ic2VydmF0aW9uQ2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGVuYWJsZU1hcE9ic2VydmF0aW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pbkJhdGNoID0gZmFsc2U7XG4gICAgICAgIHRoaXMuY29sbGVjdGlvbiA9IG1hcDtcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW50RmxhZ3MgPSBmbGFncyAmIDIwODAzNzQ3OTkgLyogcGVyc2lzdGVudEJpbmRpbmdGbGFncyAqLztcbiAgICAgICAgdGhpcy5pbmRleE1hcCA9IGNyZWF0ZUluZGV4TWFwKG1hcC5zaXplKTtcbiAgICAgICAgdGhpcy5saWZlY3ljbGUgPSBsaWZlY3ljbGU7XG4gICAgICAgIHRoaXMubGVuZ3RoT2JzZXJ2ZXIgPSAodm9pZCAwKTtcbiAgICAgICAgb2JzZXJ2ZXJMb29rdXAuc2V0KG1hcCwgdGhpcyk7XG4gICAgfVxuICAgIG5vdGlmeSgpIHtcbiAgICAgICAgaWYgKHRoaXMubGlmZWN5Y2xlLmJhdGNoLmRlcHRoID4gMCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmluQmF0Y2gpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmluQmF0Y2ggPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMubGlmZWN5Y2xlLmJhdGNoLmFkZCh0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZmx1c2hCYXRjaCgwIC8qIG5vbmUgKi8pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldExlbmd0aE9ic2VydmVyKCkge1xuICAgICAgICBpZiAodGhpcy5sZW5ndGhPYnNlcnZlciA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICB0aGlzLmxlbmd0aE9ic2VydmVyID0gbmV3IENvbGxlY3Rpb25TaXplT2JzZXJ2ZXIodGhpcy5jb2xsZWN0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5sZW5ndGhPYnNlcnZlcjtcbiAgICB9XG4gICAgZ2V0SW5kZXhPYnNlcnZlcihpbmRleCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01hcCBpbmRleCBvYnNlcnZhdGlvbiBub3Qgc3VwcG9ydGVkJyk7XG4gICAgfVxuICAgIGZsdXNoQmF0Y2goZmxhZ3MpIHtcbiAgICAgICAgdGhpcy5pbkJhdGNoID0gZmFsc2U7XG4gICAgICAgIGNvbnN0IHsgaW5kZXhNYXAsIGNvbGxlY3Rpb24gfSA9IHRoaXM7XG4gICAgICAgIGNvbnN0IHsgc2l6ZSB9ID0gY29sbGVjdGlvbjtcbiAgICAgICAgdGhpcy5pbmRleE1hcCA9IGNyZWF0ZUluZGV4TWFwKHNpemUpO1xuICAgICAgICB0aGlzLmNhbGxDb2xsZWN0aW9uU3Vic2NyaWJlcnMoaW5kZXhNYXAsIDE2IC8qIHVwZGF0ZVRhcmdldEluc3RhbmNlICovIHwgdGhpcy5wZXJzaXN0ZW50RmxhZ3MpO1xuICAgICAgICBpZiAodGhpcy5sZW5ndGhPYnNlcnZlciAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICB0aGlzLmxlbmd0aE9ic2VydmVyLnNldFZhbHVlKHNpemUsIDE2IC8qIHVwZGF0ZVRhcmdldEluc3RhbmNlICovKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5NYXBPYnNlcnZlciA9IF9fZGVjb3JhdGUoW1xuICAgIGNvbGxlY3Rpb25TdWJzY3JpYmVyQ29sbGVjdGlvbigpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbTnVtYmVyLCBPYmplY3QsIE9iamVjdF0pXG5dLCBNYXBPYnNlcnZlcik7XG5leHBvcnQgeyBNYXBPYnNlcnZlciB9O1xuZXhwb3J0IGZ1bmN0aW9uIGdldE1hcE9ic2VydmVyKGZsYWdzLCBsaWZlY3ljbGUsIG1hcCkge1xuICAgIGNvbnN0IG9ic2VydmVyID0gb2JzZXJ2ZXJMb29rdXAuZ2V0KG1hcCk7XG4gICAgaWYgKG9ic2VydmVyID09PSB2b2lkIDApIHtcbiAgICAgICAgcmV0dXJuIG5ldyBNYXBPYnNlcnZlcihmbGFncywgbGlmZWN5Y2xlLCBtYXApO1xuICAgIH1cbiAgICByZXR1cm4gb2JzZXJ2ZXI7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tYXAtb2JzZXJ2ZXIuanMubWFwIiwiaW1wb3J0IHsgX19kZWNvcmF0ZSwgX19tZXRhZGF0YSwgX19wYXJhbSB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgREksIFJlZ2lzdHJhdGlvbiwgUmVwb3J0ZXIsIGlzQXJyYXlJbmRleCwgfSBmcm9tICdAYXVyZWxpYS9rZXJuZWwnO1xuaW1wb3J0IHsgSUxpZmVjeWNsZSB9IGZyb20gJy4uL2xpZmVjeWNsZSc7XG5pbXBvcnQgeyBnZXRBcnJheU9ic2VydmVyIH0gZnJvbSAnLi9hcnJheS1vYnNlcnZlcic7XG5pbXBvcnQgeyBjcmVhdGVDb21wdXRlZE9ic2VydmVyIH0gZnJvbSAnLi9jb21wdXRlZC1vYnNlcnZlcic7XG5pbXBvcnQgeyBJRGlydHlDaGVja2VyIH0gZnJvbSAnLi9kaXJ0eS1jaGVja2VyJztcbmltcG9ydCB7IGdldE1hcE9ic2VydmVyIH0gZnJvbSAnLi9tYXAtb2JzZXJ2ZXInO1xuaW1wb3J0IHsgUHJpbWl0aXZlT2JzZXJ2ZXIgfSBmcm9tICcuL3ByaW1pdGl2ZS1vYnNlcnZlcic7XG5pbXBvcnQgeyBQcm9wZXJ0eUFjY2Vzc29yIH0gZnJvbSAnLi9wcm9wZXJ0eS1hY2Nlc3Nvcic7XG5pbXBvcnQgeyBQcm94eU9ic2VydmVyIH0gZnJvbSAnLi9wcm94eS1vYnNlcnZlcic7XG5pbXBvcnQgeyBnZXRTZXRPYnNlcnZlciB9IGZyb20gJy4vc2V0LW9ic2VydmVyJztcbmltcG9ydCB7IFNldHRlck9ic2VydmVyIH0gZnJvbSAnLi9zZXR0ZXItb2JzZXJ2ZXInO1xuaW1wb3J0IHsgSVNjaGVkdWxlciB9IGZyb20gJ0BhdXJlbGlhL3NjaGVkdWxlcic7XG5jb25zdCB0b1N0cmluZ1RhZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG5leHBvcnQgY29uc3QgSU9ic2VydmVyTG9jYXRvciA9IERJLmNyZWF0ZUludGVyZmFjZSgnSU9ic2VydmVyTG9jYXRvcicpLm5vRGVmYXVsdCgpO1xuZXhwb3J0IGNvbnN0IElUYXJnZXRPYnNlcnZlckxvY2F0b3IgPSBESS5jcmVhdGVJbnRlcmZhY2UoJ0lUYXJnZXRPYnNlcnZlckxvY2F0b3InKS5ub0RlZmF1bHQoKTtcbmV4cG9ydCBjb25zdCBJVGFyZ2V0QWNjZXNzb3JMb2NhdG9yID0gREkuY3JlYXRlSW50ZXJmYWNlKCdJVGFyZ2V0QWNjZXNzb3JMb2NhdG9yJykubm9EZWZhdWx0KCk7XG5mdW5jdGlvbiBnZXRQcm9wZXJ0eURlc2NyaXB0b3Ioc3ViamVjdCwgbmFtZSkge1xuICAgIGxldCBwZCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc3ViamVjdCwgbmFtZSk7XG4gICAgbGV0IHByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHN1YmplY3QpO1xuICAgIHdoaWxlIChwZCA9PSBudWxsICYmIHByb3RvICE9IG51bGwpIHtcbiAgICAgICAgcGQgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHByb3RvLCBuYW1lKTtcbiAgICAgICAgcHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YocHJvdG8pO1xuICAgIH1cbiAgICByZXR1cm4gcGQ7XG59XG4vKiogQGludGVybmFsICovXG5sZXQgT2JzZXJ2ZXJMb2NhdG9yID0gY2xhc3MgT2JzZXJ2ZXJMb2NhdG9yIHtcbiAgICBjb25zdHJ1Y3RvcihsaWZlY3ljbGUsIHNjaGVkdWxlciwgZGlydHlDaGVja2VyLCB0YXJnZXRPYnNlcnZlckxvY2F0b3IsIHRhcmdldEFjY2Vzc29yTG9jYXRvcikge1xuICAgICAgICB0aGlzLmxpZmVjeWNsZSA9IGxpZmVjeWNsZTtcbiAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICAgIHRoaXMuZGlydHlDaGVja2VyID0gZGlydHlDaGVja2VyO1xuICAgICAgICB0aGlzLnRhcmdldE9ic2VydmVyTG9jYXRvciA9IHRhcmdldE9ic2VydmVyTG9jYXRvcjtcbiAgICAgICAgdGhpcy50YXJnZXRBY2Nlc3NvckxvY2F0b3IgPSB0YXJnZXRBY2Nlc3NvckxvY2F0b3I7XG4gICAgICAgIHRoaXMuYWRhcHRlcnMgPSBbXTtcbiAgICB9XG4gICAgc3RhdGljIHJlZ2lzdGVyKGNvbnRhaW5lcikge1xuICAgICAgICByZXR1cm4gUmVnaXN0cmF0aW9uLnNpbmdsZXRvbihJT2JzZXJ2ZXJMb2NhdG9yLCB0aGlzKS5yZWdpc3Rlcihjb250YWluZXIpO1xuICAgIH1cbiAgICBnZXRPYnNlcnZlcihmbGFncywgb2JqLCBwcm9wZXJ0eU5hbWUpIHtcbiAgICAgICAgaWYgKGZsYWdzICYgMiAvKiBwcm94eVN0cmF0ZWd5ICovICYmIHR5cGVvZiBvYmogPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJveHlPYnNlcnZlci5nZXRPckNyZWF0ZShvYmosIHByb3BlcnR5TmFtZSk7IC8vIFRPRE86IGZpeCB0eXBpbmdzIChhbmQgZW5zdXJlIHByb3BlciBjb250cmFjdHMgb2ZjKVxuICAgICAgICB9XG4gICAgICAgIGlmIChpc0JpbmRpbmdDb250ZXh0KG9iaikpIHtcbiAgICAgICAgICAgIHJldHVybiBvYmouZ2V0T2JzZXJ2ZXJzKGZsYWdzKS5nZXRPckNyZWF0ZSh0aGlzLmxpZmVjeWNsZSwgZmxhZ3MsIG9iaiwgcHJvcGVydHlOYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgb2JzZXJ2ZXJzTG9va3VwID0gb2JqLiRvYnNlcnZlcnM7XG4gICAgICAgIGlmIChvYnNlcnZlcnNMb29rdXAgJiYgcHJvcGVydHlOYW1lIGluIG9ic2VydmVyc0xvb2t1cCkge1xuICAgICAgICAgICAgcmV0dXJuIG9ic2VydmVyc0xvb2t1cFtwcm9wZXJ0eU5hbWVdO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG9ic2VydmVyID0gdGhpcy5jcmVhdGVQcm9wZXJ0eU9ic2VydmVyKGZsYWdzLCBvYmosIHByb3BlcnR5TmFtZSk7XG4gICAgICAgIGlmICghb2JzZXJ2ZXIuZG9Ob3RDYWNoZSkge1xuICAgICAgICAgICAgaWYgKG9ic2VydmVyc0xvb2t1cCA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgb2JzZXJ2ZXJzTG9va3VwID0gdGhpcy5nZXRPckNyZWF0ZU9ic2VydmVyc0xvb2t1cChvYmopO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb2JzZXJ2ZXJzTG9va3VwW3Byb3BlcnR5TmFtZV0gPSBvYnNlcnZlcjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2JzZXJ2ZXI7XG4gICAgfVxuICAgIGFkZEFkYXB0ZXIoYWRhcHRlcikge1xuICAgICAgICB0aGlzLmFkYXB0ZXJzLnB1c2goYWRhcHRlcik7XG4gICAgfVxuICAgIGdldEFjY2Vzc29yKGZsYWdzLCBvYmosIHByb3BlcnR5TmFtZSkge1xuICAgICAgICBpZiAodGhpcy50YXJnZXRBY2Nlc3NvckxvY2F0b3IuaGFuZGxlcyhmbGFncywgb2JqKSkge1xuICAgICAgICAgICAgaWYgKHRoaXMudGFyZ2V0T2JzZXJ2ZXJMb2NhdG9yLm92ZXJyaWRlc0FjY2Vzc29yKGZsYWdzLCBvYmosIHByb3BlcnR5TmFtZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRPYnNlcnZlcihmbGFncywgb2JqLCBwcm9wZXJ0eU5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudGFyZ2V0QWNjZXNzb3JMb2NhdG9yLmdldEFjY2Vzc29yKGZsYWdzLCB0aGlzLnNjaGVkdWxlciwgdGhpcy5saWZlY3ljbGUsIG9iaiwgcHJvcGVydHlOYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZmxhZ3MgJiAyIC8qIHByb3h5U3RyYXRlZ3kgKi8pIHtcbiAgICAgICAgICAgIHJldHVybiBQcm94eU9ic2VydmVyLmdldE9yQ3JlYXRlKG9iaiwgcHJvcGVydHlOYW1lKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFByb3BlcnR5QWNjZXNzb3Iob2JqLCBwcm9wZXJ0eU5hbWUpO1xuICAgIH1cbiAgICBnZXRBcnJheU9ic2VydmVyKGZsYWdzLCBvYnNlcnZlZEFycmF5KSB7XG4gICAgICAgIHJldHVybiBnZXRBcnJheU9ic2VydmVyKGZsYWdzLCB0aGlzLmxpZmVjeWNsZSwgb2JzZXJ2ZWRBcnJheSk7XG4gICAgfVxuICAgIGdldE1hcE9ic2VydmVyKGZsYWdzLCBvYnNlcnZlZE1hcCkge1xuICAgICAgICByZXR1cm4gZ2V0TWFwT2JzZXJ2ZXIoZmxhZ3MsIHRoaXMubGlmZWN5Y2xlLCBvYnNlcnZlZE1hcCk7XG4gICAgfVxuICAgIGdldFNldE9ic2VydmVyKGZsYWdzLCBvYnNlcnZlZFNldCkge1xuICAgICAgICByZXR1cm4gZ2V0U2V0T2JzZXJ2ZXIoZmxhZ3MsIHRoaXMubGlmZWN5Y2xlLCBvYnNlcnZlZFNldCk7XG4gICAgfVxuICAgIGdldE9yQ3JlYXRlT2JzZXJ2ZXJzTG9va3VwKG9iaikge1xuICAgICAgICByZXR1cm4gb2JqLiRvYnNlcnZlcnMgfHwgdGhpcy5jcmVhdGVPYnNlcnZlcnNMb29rdXAob2JqKTtcbiAgICB9XG4gICAgY3JlYXRlT2JzZXJ2ZXJzTG9va3VwKG9iaikge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IHt9O1xuICAgICAgICBpZiAoIVJlZmxlY3QuZGVmaW5lUHJvcGVydHkob2JqLCAnJG9ic2VydmVycycsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZVxuICAgICAgICB9KSkge1xuICAgICAgICAgICAgUmVwb3J0ZXIud3JpdGUoMCwgb2JqKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIGdldEFkYXB0ZXJPYnNlcnZlcihmbGFncywgb2JqLCBwcm9wZXJ0eU5hbWUsIGRlc2NyaXB0b3IpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGlpID0gdGhpcy5hZGFwdGVycy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBhZGFwdGVyID0gdGhpcy5hZGFwdGVyc1tpXTtcbiAgICAgICAgICAgIGNvbnN0IG9ic2VydmVyID0gYWRhcHRlci5nZXRPYnNlcnZlcihmbGFncywgb2JqLCBwcm9wZXJ0eU5hbWUsIGRlc2NyaXB0b3IpO1xuICAgICAgICAgICAgaWYgKG9ic2VydmVyICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JzZXJ2ZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNyZWF0ZVByb3BlcnR5T2JzZXJ2ZXIoZmxhZ3MsIG9iaiwgcHJvcGVydHlOYW1lKSB7XG4gICAgICAgIGlmICghKG9iaiBpbnN0YW5jZW9mIE9iamVjdCkpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJpbWl0aXZlT2JzZXJ2ZXIob2JqLCBwcm9wZXJ0eU5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBpc05vZGUgPSBmYWxzZTtcbiAgICAgICAgaWYgKHRoaXMudGFyZ2V0T2JzZXJ2ZXJMb2NhdG9yLmhhbmRsZXMoZmxhZ3MsIG9iaikpIHtcbiAgICAgICAgICAgIGNvbnN0IG9ic2VydmVyID0gdGhpcy50YXJnZXRPYnNlcnZlckxvY2F0b3IuZ2V0T2JzZXJ2ZXIoZmxhZ3MsIHRoaXMuc2NoZWR1bGVyLCB0aGlzLmxpZmVjeWNsZSwgdGhpcywgb2JqLCBwcm9wZXJ0eU5hbWUpO1xuICAgICAgICAgICAgaWYgKG9ic2VydmVyICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JzZXJ2ZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpc05vZGUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRhZyA9IHRvU3RyaW5nVGFnLmNhbGwob2JqKTtcbiAgICAgICAgc3dpdGNoICh0YWcpIHtcbiAgICAgICAgICAgIGNhc2UgJ1tvYmplY3QgQXJyYXldJzpcbiAgICAgICAgICAgICAgICBpZiAocHJvcGVydHlOYW1lID09PSAnbGVuZ3RoJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRBcnJheU9ic2VydmVyKGZsYWdzLCBvYmopLmdldExlbmd0aE9ic2VydmVyKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGlzIG51bWVyIG9ubHkgcmV0dXJucyB0cnVlIGZvciBpbnRlZ2VyXG4gICAgICAgICAgICAgICAgaWYgKGlzQXJyYXlJbmRleChwcm9wZXJ0eU5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEFycmF5T2JzZXJ2ZXIoZmxhZ3MsIG9iaikuZ2V0SW5kZXhPYnNlcnZlcihOdW1iZXIocHJvcGVydHlOYW1lKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnW29iamVjdCBNYXBdJzpcbiAgICAgICAgICAgICAgICBpZiAocHJvcGVydHlOYW1lID09PSAnc2l6ZScpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TWFwT2JzZXJ2ZXIoZmxhZ3MsIG9iaikuZ2V0TGVuZ3RoT2JzZXJ2ZXIoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdbb2JqZWN0IFNldF0nOlxuICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0eU5hbWUgPT09ICdzaXplJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRTZXRPYnNlcnZlcihmbGFncywgb2JqKS5nZXRMZW5ndGhPYnNlcnZlcigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkZXNjcmlwdG9yID0gZ2V0UHJvcGVydHlEZXNjcmlwdG9yKG9iaiwgcHJvcGVydHlOYW1lKTtcbiAgICAgICAgaWYgKGRlc2NyaXB0b3IgIT0gbnVsbCAmJiAoZGVzY3JpcHRvci5nZXQgIT0gbnVsbCB8fCBkZXNjcmlwdG9yLnNldCAhPSBudWxsKSkge1xuICAgICAgICAgICAgaWYgKGRlc2NyaXB0b3IuZ2V0ICE9IG51bGwgJiYgZGVzY3JpcHRvci5nZXQuZ2V0T2JzZXJ2ZXIgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBkZXNjcmlwdG9yLmdldC5nZXRPYnNlcnZlcihvYmopO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gYXR0ZW1wdCB0byB1c2UgYW4gYWRhcHRlciBiZWZvcmUgcmVzb3J0aW5nIHRvIGRpcnR5IGNoZWNraW5nLlxuICAgICAgICAgICAgY29uc3QgYWRhcHRlck9ic2VydmVyID0gdGhpcy5nZXRBZGFwdGVyT2JzZXJ2ZXIoZmxhZ3MsIG9iaiwgcHJvcGVydHlOYW1lLCBkZXNjcmlwdG9yKTtcbiAgICAgICAgICAgIGlmIChhZGFwdGVyT2JzZXJ2ZXIgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBhZGFwdGVyT2JzZXJ2ZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNOb2RlKSB7XG4gICAgICAgICAgICAgICAgLy8gVE9ETzogdXNlIE11dGF0aW9uT2JzZXJ2ZXJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kaXJ0eUNoZWNrZXIuY3JlYXRlUHJvcGVydHkob2JqLCBwcm9wZXJ0eU5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZUNvbXB1dGVkT2JzZXJ2ZXIoZmxhZ3MsIHRoaXMsIHRoaXMuZGlydHlDaGVja2VyLCB0aGlzLmxpZmVjeWNsZSwgb2JqLCBwcm9wZXJ0eU5hbWUsIGRlc2NyaXB0b3IpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgU2V0dGVyT2JzZXJ2ZXIodGhpcy5saWZlY3ljbGUsIGZsYWdzLCBvYmosIHByb3BlcnR5TmFtZSk7XG4gICAgfVxufTtcbk9ic2VydmVyTG9jYXRvciA9IF9fZGVjb3JhdGUoW1xuICAgIF9fcGFyYW0oMCwgSUxpZmVjeWNsZSksXG4gICAgX19wYXJhbSgxLCBJU2NoZWR1bGVyKSxcbiAgICBfX3BhcmFtKDIsIElEaXJ0eUNoZWNrZXIpLFxuICAgIF9fcGFyYW0oMywgSVRhcmdldE9ic2VydmVyTG9jYXRvciksXG4gICAgX19wYXJhbSg0LCBJVGFyZ2V0QWNjZXNzb3JMb2NhdG9yKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW09iamVjdCwgT2JqZWN0LCBPYmplY3QsIE9iamVjdCwgT2JqZWN0XSlcbl0sIE9ic2VydmVyTG9jYXRvcik7XG5leHBvcnQgeyBPYnNlcnZlckxvY2F0b3IgfTtcbmV4cG9ydCBmdW5jdGlvbiBnZXRDb2xsZWN0aW9uT2JzZXJ2ZXIoZmxhZ3MsIGxpZmVjeWNsZSwgY29sbGVjdGlvbikge1xuICAgIC8vIElmIHRoZSBjb2xsZWN0aW9uIGlzIHdyYXBwZWQgYnkgYSBwcm94eSB0aGVuIGAkb2JzZXJ2ZXJgIHdpbGwgcmV0dXJuIHRoZSBwcm94eSBvYnNlcnZlciBpbnN0ZWFkIG9mIHRoZSBjb2xsZWN0aW9uIG9ic2VydmVyLCB3aGljaCBpcyBub3Qgd2hhdCB3ZSB3YW50XG4gICAgLy8gd2hlbiB3ZSBhc2sgZm9yIGdldENvbGxlY3Rpb25PYnNlcnZlclxuICAgIGNvbnN0IHJhd0NvbGxlY3Rpb24gPSBjb2xsZWN0aW9uIGluc3RhbmNlb2YgT2JqZWN0ID8gUHJveHlPYnNlcnZlci5nZXRSYXdJZlByb3h5KGNvbGxlY3Rpb24pIDogY29sbGVjdGlvbjtcbiAgICBzd2l0Y2ggKHRvU3RyaW5nVGFnLmNhbGwoY29sbGVjdGlvbikpIHtcbiAgICAgICAgY2FzZSAnW29iamVjdCBBcnJheV0nOlxuICAgICAgICAgICAgcmV0dXJuIGdldEFycmF5T2JzZXJ2ZXIoZmxhZ3MsIGxpZmVjeWNsZSwgcmF3Q29sbGVjdGlvbik7XG4gICAgICAgIGNhc2UgJ1tvYmplY3QgTWFwXSc6XG4gICAgICAgICAgICByZXR1cm4gZ2V0TWFwT2JzZXJ2ZXIoZmxhZ3MsIGxpZmVjeWNsZSwgcmF3Q29sbGVjdGlvbik7XG4gICAgICAgIGNhc2UgJ1tvYmplY3QgU2V0XSc6XG4gICAgICAgICAgICByZXR1cm4gZ2V0U2V0T2JzZXJ2ZXIoZmxhZ3MsIGxpZmVjeWNsZSwgcmF3Q29sbGVjdGlvbik7XG4gICAgfVxuICAgIHJldHVybiB2b2lkIDA7XG59XG5mdW5jdGlvbiBpc0JpbmRpbmdDb250ZXh0KG9iaikge1xuICAgIHJldHVybiBvYmouJHN5bnRoZXRpYyA9PT0gdHJ1ZTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9ic2VydmVyLWxvY2F0b3IuanMubWFwIiwiaW1wb3J0IHsgUExBVEZPUk0gfSBmcm9tICdAYXVyZWxpYS9rZXJuZWwnO1xuY29uc3Qgc2xpY2UgPSBBcnJheS5wcm90b3R5cGUuc2xpY2U7XG5jb25zdCBub29wID0gUExBVEZPUk0ubm9vcDtcbi8vIG5vdGU6IHN0cmluZy5sZW5ndGggaXMgdGhlIG9ubHkgcHJvcGVydHkgb2YgYW55IHByaW1pdGl2ZSB0aGF0IGlzIG5vdCBhIGZ1bmN0aW9uLFxuLy8gc28gd2UgY2FuIGhhcmR3aXJlIGl0IHRvIHRoYXQgYW5kIHNpbXBseSByZXR1cm4gdW5kZWZpbmVkIGZvciBhbnl0aGluZyBlbHNlXG4vLyBub3RlIzI6IGEgbW9kaWZpZWQgcHJpbWl0aXZlIGNvbnN0cnVjdG9yIHByb3RvdHlwZSB3b3VsZCBub3Qgd29yayAoYW5kIHJlYWxseSwgaXQgc2hvdWxkbid0Li4pXG5leHBvcnQgY2xhc3MgUHJpbWl0aXZlT2JzZXJ2ZXIge1xuICAgIGNvbnN0cnVjdG9yKG9iaiwgcHJvcGVydHlLZXkpIHtcbiAgICAgICAgdGhpcy5kb05vdENhY2hlID0gdHJ1ZTtcbiAgICAgICAgLy8gd2UgZG9uJ3QgbmVlZCB0byBzdG9yZSBwcm9wZXJ0eU5hbWUgYmVjYXVzZSBvbmx5ICdsZW5ndGgnIGNhbiByZXR1cm4gYSB1c2VmdWwgdmFsdWVcbiAgICAgICAgaWYgKHByb3BlcnR5S2V5ID09PSAnbGVuZ3RoJykge1xuICAgICAgICAgICAgLy8gZGVsaWJlcmF0ZWx5IG5vdCBjaGVja2luZyBmb3IgdHlwZW9mIHN0cmluZyBhcyB1c2VycyBwcm9iYWJseSBzdGlsbCB3YW50IHRvIGtub3cgdmlhIGFuIGVycm9yIHRoYXQgdGhlaXIgc3RyaW5nIGlzIHVuZGVmaW5lZFxuICAgICAgICAgICAgdGhpcy5vYmogPSBvYmo7XG4gICAgICAgICAgICB0aGlzLmdldFZhbHVlID0gdGhpcy5nZXRTdHJpbmdMZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmdldFZhbHVlID0gdGhpcy5yZXR1cm5VbmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0U3RyaW5nTGVuZ3RoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vYmoubGVuZ3RoO1xuICAgIH1cbiAgICByZXR1cm5VbmRlZmluZWQoKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxufVxuUHJpbWl0aXZlT2JzZXJ2ZXIucHJvdG90eXBlLnNldFZhbHVlID0gbm9vcDtcblByaW1pdGl2ZU9ic2VydmVyLnByb3RvdHlwZS5zdWJzY3JpYmUgPSBub29wO1xuUHJpbWl0aXZlT2JzZXJ2ZXIucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gbm9vcDtcblByaW1pdGl2ZU9ic2VydmVyLnByb3RvdHlwZS5kaXNwb3NlID0gbm9vcDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXByaW1pdGl2ZS1vYnNlcnZlci5qcy5tYXAiLCJleHBvcnQgY2xhc3MgUHJvcGVydHlBY2Nlc3NvciB7XG4gICAgY29uc3RydWN0b3Iob2JqLCBwcm9wZXJ0eUtleSkge1xuICAgICAgICB0aGlzLm9iaiA9IG9iajtcbiAgICAgICAgdGhpcy5wcm9wZXJ0eUtleSA9IHByb3BlcnR5S2V5O1xuICAgICAgICBpZiAob2JqLiRvYnNlcnZlcnMgIT09IHZvaWQgMFxuICAgICAgICAgICAgJiYgb2JqLiRvYnNlcnZlcnNbcHJvcGVydHlLZXldICE9PSB2b2lkIDBcbiAgICAgICAgICAgICYmIG9iai4kb2JzZXJ2ZXJzW3Byb3BlcnR5S2V5XS5zZXRWYWx1ZSAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICB0aGlzLnNldFZhbHVlID0gdGhpcy5zZXRWYWx1ZURpcmVjdDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRWYWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub2JqW3RoaXMucHJvcGVydHlLZXldO1xuICAgIH1cbiAgICBzZXRWYWx1ZSh2YWx1ZSwgZmxhZ3MpIHtcbiAgICAgICAgdGhpcy5vYmpbdGhpcy5wcm9wZXJ0eUtleV0gPSB2YWx1ZTtcbiAgICB9XG4gICAgc2V0VmFsdWVEaXJlY3QodmFsdWUsIGZsYWdzKSB7XG4gICAgICAgIHRoaXMub2JqLiRvYnNlcnZlcnNbdGhpcy5wcm9wZXJ0eUtleV0uc2V0VmFsdWUodmFsdWUsIGZsYWdzKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wcm9wZXJ0eS1hY2Nlc3Nvci5qcy5tYXAiLCJ2YXIgUHJveHlPYnNlcnZlcl8xO1xuaW1wb3J0IHsgX19kZWNvcmF0ZSwgX19tZXRhZGF0YSB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgUExBVEZPUk0gfSBmcm9tICdAYXVyZWxpYS9rZXJuZWwnO1xuaW1wb3J0IHsgcHJveHlTdWJzY3JpYmVyQ29sbGVjdGlvbiwgc3Vic2NyaWJlckNvbGxlY3Rpb24gfSBmcm9tICcuL3N1YnNjcmliZXItY29sbGVjdGlvbic7XG5jb25zdCBsb29rdXAgPSBuZXcgV2Vha01hcCgpO1xubGV0IFByb3h5U3Vic2NyaWJlckNvbGxlY3Rpb24gPSBjbGFzcyBQcm94eVN1YnNjcmliZXJDb2xsZWN0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcihwcm94eSwgcmF3LCBrZXkpIHtcbiAgICAgICAgdGhpcy5wcm94eSA9IHByb3h5O1xuICAgICAgICB0aGlzLnJhdyA9IHJhdztcbiAgICAgICAgdGhpcy5rZXkgPSBrZXk7XG4gICAgICAgIHRoaXMuaW5CYXRjaCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnN1YnNjcmliZSA9IHRoaXMuYWRkU3Vic2NyaWJlcjtcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZSA9IHRoaXMucmVtb3ZlU3Vic2NyaWJlcjtcbiAgICAgICAgaWYgKHJhd1trZXldIGluc3RhbmNlb2YgT2JqZWN0KSB7IC8vIEVuc3VyZSB3ZSBvYnNlcnZlIGFycmF5IGluZGljZXMgYW5kIG5ld2x5IGNyZWF0ZWQgb2JqZWN0IHByb3BlcnRpZXNcbiAgICAgICAgICAgIHJhd1trZXldID0gUHJveHlPYnNlcnZlci5nZXRPckNyZWF0ZShyYXdba2V5XSkucHJveHk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0VmFsdWUodmFsdWUsIGZsYWdzKSB7XG4gICAgICAgIGNvbnN0IG9sZFZhbHVlID0gdGhpcy5yYXdbdGhpcy5rZXldO1xuICAgICAgICBpZiAob2xkVmFsdWUgIT09IHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLnJhd1t0aGlzLmtleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgIHRoaXMuY2FsbFN1YnNjcmliZXJzKHZhbHVlLCBvbGRWYWx1ZSwgZmxhZ3MgfCAyIC8qIHByb3h5U3RyYXRlZ3kgKi8gfCAxNiAvKiB1cGRhdGVUYXJnZXRJbnN0YW5jZSAqLyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0VmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhd1t0aGlzLmtleV07XG4gICAgfVxuICAgIGZsdXNoQmF0Y2goZmxhZ3MpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbn07XG5Qcm94eVN1YnNjcmliZXJDb2xsZWN0aW9uID0gX19kZWNvcmF0ZShbXG4gICAgc3Vic2NyaWJlckNvbGxlY3Rpb24oKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW09iamVjdCwgT2JqZWN0LCBPYmplY3RdKVxuXSwgUHJveHlTdWJzY3JpYmVyQ29sbGVjdGlvbik7XG5leHBvcnQgeyBQcm94eVN1YnNjcmliZXJDb2xsZWN0aW9uIH07XG5sZXQgUHJveHlPYnNlcnZlciA9IFByb3h5T2JzZXJ2ZXJfMSA9IGNsYXNzIFByb3h5T2JzZXJ2ZXIge1xuICAgIGNvbnN0cnVjdG9yKG9iaikge1xuICAgICAgICB0aGlzLnJhdyA9IG9iajtcbiAgICAgICAgdGhpcy5wcm94eSA9IG5ldyBQcm94eShvYmosIHRoaXMpO1xuICAgICAgICBsb29rdXAuc2V0KG9iaiwgdGhpcy5wcm94eSk7XG4gICAgICAgIHRoaXMuc3Vic2NyaWJlcnMgPSB7fTtcbiAgICB9XG4gICAgc3RhdGljIGdldFByb3h5T3JTZWxmKG9iaikge1xuICAgICAgICBpZiAob2JqLiRyYXcgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgY29uc3QgcHJveHkgPSBsb29rdXAuZ2V0KG9iaik7XG4gICAgICAgICAgICBpZiAocHJveHkgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBvYmo7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcHJveHk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9XG4gICAgc3RhdGljIGdldFJhd0lmUHJveHkob2JqKSB7XG4gICAgICAgIGNvbnN0IHJhdyA9IG9iai4kcmF3O1xuICAgICAgICBpZiAocmF3ID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIHJldHVybiBvYmo7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJhdztcbiAgICB9XG4gICAgc3RhdGljIGdldE9yQ3JlYXRlKG9iaiwga2V5KSB7XG4gICAgICAgIGxldCBwcm94eU9ic2VydmVyO1xuICAgICAgICBpZiAob2JqLiRyYXcgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgY29uc3QgcHJveHkgPSBsb29rdXAuZ2V0KG9iaik7XG4gICAgICAgICAgICBpZiAocHJveHkgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgIHByb3h5T2JzZXJ2ZXIgPSBuZXcgUHJveHlPYnNlcnZlcl8xKG9iaik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBwcm94eU9ic2VydmVyID0gcHJveHkuJG9ic2VydmVyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcHJveHlPYnNlcnZlciA9IG9iai4kb2JzZXJ2ZXI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGtleSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICByZXR1cm4gcHJveHlPYnNlcnZlcjtcbiAgICAgICAgfVxuICAgICAgICBsZXQgc3Vic2NyaWJlcnMgPSBwcm94eU9ic2VydmVyLnN1YnNjcmliZXJzW2tleV07XG4gICAgICAgIGlmIChzdWJzY3JpYmVycyA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBjb25zdCByYXcgPSB0aGlzLmdldFJhd0lmUHJveHkob2JqKTtcbiAgICAgICAgICAgIGNvbnN0IHByb3h5ID0gcHJveHlPYnNlcnZlci5wcm94eTtcbiAgICAgICAgICAgIHN1YnNjcmliZXJzID0gcHJveHlPYnNlcnZlci5zdWJzY3JpYmVyc1trZXldID0gbmV3IFByb3h5U3Vic2NyaWJlckNvbGxlY3Rpb24ocHJveHksIHJhdywga2V5KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3Vic2NyaWJlcnM7XG4gICAgfVxuICAgIHN0YXRpYyBpc1Byb3h5KG9iaikge1xuICAgICAgICByZXR1cm4gb2JqLiRyYXcgIT09IHZvaWQgMDtcbiAgICB9XG4gICAgZ2V0KHRhcmdldCwgcCwgcmVjZWl2ZXIpIHtcbiAgICAgICAgaWYgKHAgPT09ICckb2JzZXJ2ZXInKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICBpZiAocCA9PT0gJyRyYXcnKSB7XG4gICAgICAgICAgICByZXR1cm4gdGFyZ2V0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0YXJnZXRbcF07XG4gICAgfVxuICAgIHNldCh0YXJnZXQsIHAsIHZhbHVlLCByZWNlaXZlcikge1xuICAgICAgICBjb25zdCBvbGRWYWx1ZSA9IHRhcmdldFtwXTtcbiAgICAgICAgaWYgKG9sZFZhbHVlICE9PSB2YWx1ZSkge1xuICAgICAgICAgICAgdGFyZ2V0W3BdID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLmNhbGxQcm9wZXJ0eVN1YnNjcmliZXJzKHZhbHVlLCBvbGRWYWx1ZSwgcCk7XG4gICAgICAgICAgICB0aGlzLmNhbGxQcm94eVN1YnNjcmliZXJzKHAsIHZhbHVlLCBvbGRWYWx1ZSwgMiAvKiBwcm94eVN0cmF0ZWd5ICovIHwgMTYgLyogdXBkYXRlVGFyZ2V0SW5zdGFuY2UgKi8pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBkZWxldGVQcm9wZXJ0eSh0YXJnZXQsIHApIHtcbiAgICAgICAgY29uc3Qgb2xkVmFsdWUgPSB0YXJnZXRbcF07XG4gICAgICAgIGlmIChSZWZsZWN0LmRlbGV0ZVByb3BlcnR5KHRhcmdldCwgcCkpIHtcbiAgICAgICAgICAgIGlmIChvbGRWYWx1ZSAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jYWxsUHJvcGVydHlTdWJzY3JpYmVycyh1bmRlZmluZWQsIG9sZFZhbHVlLCBwKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbGxQcm94eVN1YnNjcmliZXJzKHAsIHVuZGVmaW5lZCwgb2xkVmFsdWUsIDIgLyogcHJveHlTdHJhdGVneSAqLyB8IDE2IC8qIHVwZGF0ZVRhcmdldEluc3RhbmNlICovKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBwLCBhdHRyaWJ1dGVzKSB7XG4gICAgICAgIGNvbnN0IG9sZFZhbHVlID0gdGFyZ2V0W3BdO1xuICAgICAgICBpZiAoUmVmbGVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIHAsIGF0dHJpYnV0ZXMpKSB7XG4gICAgICAgICAgICBpZiAoYXR0cmlidXRlcy52YWx1ZSAhPT0gb2xkVmFsdWUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbGxQcm9wZXJ0eVN1YnNjcmliZXJzKGF0dHJpYnV0ZXMudmFsdWUsIG9sZFZhbHVlLCBwKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbGxQcm94eVN1YnNjcmliZXJzKHAsIGF0dHJpYnV0ZXMudmFsdWUsIG9sZFZhbHVlLCAyIC8qIHByb3h5U3RyYXRlZ3kgKi8gfCAxNiAvKiB1cGRhdGVUYXJnZXRJbnN0YW5jZSAqLyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGFwcGx5KHRhcmdldCwgdGhpc0FyZywgYXJnQXJyYXkgPSBQTEFURk9STS5lbXB0eUFycmF5KSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXR5cGVzXG4gICAgICAgIHJldHVybiBSZWZsZWN0LmFwcGx5KHRhcmdldCwgdGFyZ2V0LCBhcmdBcnJheSk7IC8vIFJlZmxlY3QgQVBJIGRpY3RhdGVzIHRoaXNcbiAgICB9XG4gICAgc3Vic2NyaWJlKHN1YnNjcmliZXIsIGtleSkge1xuICAgICAgICBpZiAoa2V5ID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIHRoaXMuYWRkUHJveHlTdWJzY3JpYmVyKHN1YnNjcmliZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGV0IHN1YnNjcmliZXJzID0gdGhpcy5zdWJzY3JpYmVyc1trZXldO1xuICAgICAgICAgICAgaWYgKHN1YnNjcmliZXJzID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICBzdWJzY3JpYmVycyA9IHRoaXMuc3Vic2NyaWJlcnNba2V5XSA9IG5ldyBQcm94eVN1YnNjcmliZXJDb2xsZWN0aW9uKHRoaXMucHJveHksIHRoaXMucmF3LCBrZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3Vic2NyaWJlcnMuYWRkU3Vic2NyaWJlcihzdWJzY3JpYmVyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1bnN1YnNjcmliZShzdWJzY3JpYmVyLCBrZXkpIHtcbiAgICAgICAgaWYgKGtleSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZVByb3h5U3Vic2NyaWJlcihzdWJzY3JpYmVyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHN1YnNjcmliZXJzID0gdGhpcy5zdWJzY3JpYmVyc1trZXldO1xuICAgICAgICAgICAgaWYgKHN1YnNjcmliZXJzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBzdWJzY3JpYmVycy5yZW1vdmVTdWJzY3JpYmVyKHN1YnNjcmliZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNhbGxQcm9wZXJ0eVN1YnNjcmliZXJzKG5ld1ZhbHVlLCBvbGRWYWx1ZSwga2V5KSB7XG4gICAgICAgIGNvbnN0IHN1YnNjcmliZXJzID0gdGhpcy5zdWJzY3JpYmVyc1trZXldO1xuICAgICAgICBpZiAoc3Vic2NyaWJlcnMgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgc3Vic2NyaWJlcnMuY2FsbFN1YnNjcmliZXJzKG5ld1ZhbHVlLCBvbGRWYWx1ZSwgMiAvKiBwcm94eVN0cmF0ZWd5ICovIHwgMTYgLyogdXBkYXRlVGFyZ2V0SW5zdGFuY2UgKi8pO1xuICAgICAgICB9XG4gICAgfVxufTtcblByb3h5T2JzZXJ2ZXIgPSBQcm94eU9ic2VydmVyXzEgPSBfX2RlY29yYXRlKFtcbiAgICBwcm94eVN1YnNjcmliZXJDb2xsZWN0aW9uKCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3RdKVxuXSwgUHJveHlPYnNlcnZlcik7XG5leHBvcnQgeyBQcm94eU9ic2VydmVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wcm94eS1vYnNlcnZlci5qcy5tYXAiLCJpbXBvcnQgeyBfX2RlY29yYXRlLCBfX21ldGFkYXRhIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBJTGlmZWN5Y2xlIH0gZnJvbSAnLi4vbGlmZWN5Y2xlJztcbmltcG9ydCB7IGNyZWF0ZUluZGV4TWFwIH0gZnJvbSAnLi4vb2JzZXJ2YXRpb24nO1xuaW1wb3J0IHsgQ29sbGVjdGlvblNpemVPYnNlcnZlciB9IGZyb20gJy4vY29sbGVjdGlvbi1zaXplLW9ic2VydmVyJztcbmltcG9ydCB7IGNvbGxlY3Rpb25TdWJzY3JpYmVyQ29sbGVjdGlvbiB9IGZyb20gJy4vc3Vic2NyaWJlci1jb2xsZWN0aW9uJztcbmNvbnN0IG9ic2VydmVyTG9va3VwID0gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IHByb3RvID0gU2V0LnByb3RvdHlwZTtcbmNvbnN0ICRhZGQgPSBwcm90by5hZGQ7XG5jb25zdCAkY2xlYXIgPSBwcm90by5jbGVhcjtcbmNvbnN0ICRkZWxldGUgPSBwcm90by5kZWxldGU7XG5jb25zdCBuYXRpdmUgPSB7IGFkZDogJGFkZCwgY2xlYXI6ICRjbGVhciwgZGVsZXRlOiAkZGVsZXRlIH07XG5jb25zdCBtZXRob2RzID0gWydhZGQnLCAnY2xlYXInLCAnZGVsZXRlJ107XG4vLyBub3RlOiB3ZSBjYW4ndCByZWFsbHkgZG8gbXVjaCB3aXRoIFNldCBkdWUgdG8gdGhlIGludGVybmFsIGRhdGEgc3RydWN0dXJlIG5vdCBiZWluZyBhY2Nlc3NpYmxlIHNvIHdlJ3JlIGp1c3QgdXNpbmcgdGhlIG5hdGl2ZSBjYWxsc1xuLy8gZm9ydHVuYXRlbHksIGFkZC9kZWxldGUvY2xlYXIgYXJlIGVhc3kgdG8gcmVjb25zdHJ1Y3QgZm9yIHRoZSBpbmRleE1hcFxuY29uc3Qgb2JzZXJ2ZSA9IHtcbiAgICAvLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy1zZXQucHJvdG90eXBlLmFkZFxuICAgIGFkZDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGxldCAkdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICgkdGhpcy4kcmF3ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICR0aGlzID0gJHRoaXMuJHJhdztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBvID0gb2JzZXJ2ZXJMb29rdXAuZ2V0KCR0aGlzKTtcbiAgICAgICAgaWYgKG8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgJGFkZC5jYWxsKCR0aGlzLCB2YWx1ZSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBvbGRTaXplID0gJHRoaXMuc2l6ZTtcbiAgICAgICAgJGFkZC5jYWxsKCR0aGlzLCB2YWx1ZSk7XG4gICAgICAgIGNvbnN0IG5ld1NpemUgPSAkdGhpcy5zaXplO1xuICAgICAgICBpZiAobmV3U2l6ZSA9PT0gb2xkU2l6ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgby5pbmRleE1hcFtvbGRTaXplXSA9IC0yO1xuICAgICAgICBvLm5vdGlmeSgpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuICAgIC8vIGh0dHBzOi8vdGMzOS5naXRodWIuaW8vZWNtYTI2Mi8jc2VjLXNldC5wcm90b3R5cGUuY2xlYXJcbiAgICBjbGVhcjogZnVuY3Rpb24gKCkge1xuICAgICAgICBsZXQgJHRoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoJHRoaXMuJHJhdyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAkdGhpcyA9ICR0aGlzLiRyYXc7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbyA9IG9ic2VydmVyTG9va3VwLmdldCgkdGhpcyk7XG4gICAgICAgIGlmIChvID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiAkY2xlYXIuY2FsbCgkdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2l6ZSA9ICR0aGlzLnNpemU7XG4gICAgICAgIGlmIChzaXplID4gMCkge1xuICAgICAgICAgICAgY29uc3QgaW5kZXhNYXAgPSBvLmluZGV4TWFwO1xuICAgICAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiAkdGhpcy5rZXlzKCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXhNYXBbaV0gPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICBpbmRleE1hcC5kZWxldGVkSXRlbXMucHVzaChpbmRleE1hcFtpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICRjbGVhci5jYWxsKCR0aGlzKTtcbiAgICAgICAgICAgIGluZGV4TWFwLmxlbmd0aCA9IDA7XG4gICAgICAgICAgICBvLm5vdGlmeSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfSxcbiAgICAvLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy1zZXQucHJvdG90eXBlLmRlbGV0ZVxuICAgIGRlbGV0ZTogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGxldCAkdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICgkdGhpcy4kcmF3ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICR0aGlzID0gJHRoaXMuJHJhdztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBvID0gb2JzZXJ2ZXJMb29rdXAuZ2V0KCR0aGlzKTtcbiAgICAgICAgaWYgKG8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuICRkZWxldGUuY2FsbCgkdGhpcywgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNpemUgPSAkdGhpcy5zaXplO1xuICAgICAgICBpZiAoc2l6ZSA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgY29uc3QgaW5kZXhNYXAgPSBvLmluZGV4TWFwO1xuICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mICR0aGlzLmtleXMoKSkge1xuICAgICAgICAgICAgaWYgKGVudHJ5ID09PSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmIChpbmRleE1hcFtpXSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGluZGV4TWFwLmRlbGV0ZWRJdGVtcy5wdXNoKGluZGV4TWFwW2ldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaW5kZXhNYXAuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlbGV0ZVJlc3VsdCA9ICRkZWxldGUuY2FsbCgkdGhpcywgdmFsdWUpO1xuICAgICAgICAgICAgICAgIGlmIChkZWxldGVSZXN1bHQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgby5ub3RpZnkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlbGV0ZVJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufTtcbmNvbnN0IGRlc2NyaXB0b3JQcm9wcyA9IHtcbiAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICBjb25maWd1cmFibGU6IHRydWVcbn07XG5jb25zdCBkZWYgPSBSZWZsZWN0LmRlZmluZVByb3BlcnR5O1xuZm9yIChjb25zdCBtZXRob2Qgb2YgbWV0aG9kcykge1xuICAgIGRlZihvYnNlcnZlW21ldGhvZF0sICdvYnNlcnZpbmcnLCB7IHZhbHVlOiB0cnVlLCB3cml0YWJsZTogZmFsc2UsIGNvbmZpZ3VyYWJsZTogZmFsc2UsIGVudW1lcmFibGU6IGZhbHNlIH0pO1xufVxubGV0IGVuYWJsZVNldE9ic2VydmF0aW9uQ2FsbGVkID0gZmFsc2U7XG5leHBvcnQgZnVuY3Rpb24gZW5hYmxlU2V0T2JzZXJ2YXRpb24oKSB7XG4gICAgZm9yIChjb25zdCBtZXRob2Qgb2YgbWV0aG9kcykge1xuICAgICAgICBpZiAocHJvdG9bbWV0aG9kXS5vYnNlcnZpbmcgIT09IHRydWUpIHtcbiAgICAgICAgICAgIGRlZihwcm90bywgbWV0aG9kLCB7IC4uLmRlc2NyaXB0b3JQcm9wcywgdmFsdWU6IG9ic2VydmVbbWV0aG9kXSB9KTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBkaXNhYmxlU2V0T2JzZXJ2YXRpb24oKSB7XG4gICAgZm9yIChjb25zdCBtZXRob2Qgb2YgbWV0aG9kcykge1xuICAgICAgICBpZiAocHJvdG9bbWV0aG9kXS5vYnNlcnZpbmcgPT09IHRydWUpIHtcbiAgICAgICAgICAgIGRlZihwcm90bywgbWV0aG9kLCB7IC4uLmRlc2NyaXB0b3JQcm9wcywgdmFsdWU6IG5hdGl2ZVttZXRob2RdIH0pO1xuICAgICAgICB9XG4gICAgfVxufVxuY29uc3Qgc2xpY2UgPSBBcnJheS5wcm90b3R5cGUuc2xpY2U7XG5sZXQgU2V0T2JzZXJ2ZXIgPSBjbGFzcyBTZXRPYnNlcnZlciB7XG4gICAgY29uc3RydWN0b3IoZmxhZ3MsIGxpZmVjeWNsZSwgb2JzZXJ2ZWRTZXQpIHtcbiAgICAgICAgaWYgKCFlbmFibGVTZXRPYnNlcnZhdGlvbkNhbGxlZCkge1xuICAgICAgICAgICAgZW5hYmxlU2V0T2JzZXJ2YXRpb25DYWxsZWQgPSB0cnVlO1xuICAgICAgICAgICAgZW5hYmxlU2V0T2JzZXJ2YXRpb24oKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmluQmF0Y2ggPSBmYWxzZTtcbiAgICAgICAgdGhpcy5jb2xsZWN0aW9uID0gb2JzZXJ2ZWRTZXQ7XG4gICAgICAgIHRoaXMucGVyc2lzdGVudEZsYWdzID0gZmxhZ3MgJiAyMDgwMzc0Nzk5IC8qIHBlcnNpc3RlbnRCaW5kaW5nRmxhZ3MgKi87XG4gICAgICAgIHRoaXMuaW5kZXhNYXAgPSBjcmVhdGVJbmRleE1hcChvYnNlcnZlZFNldC5zaXplKTtcbiAgICAgICAgdGhpcy5saWZlY3ljbGUgPSBsaWZlY3ljbGU7XG4gICAgICAgIHRoaXMubGVuZ3RoT2JzZXJ2ZXIgPSAodm9pZCAwKTtcbiAgICAgICAgb2JzZXJ2ZXJMb29rdXAuc2V0KG9ic2VydmVkU2V0LCB0aGlzKTtcbiAgICB9XG4gICAgbm90aWZ5KCkge1xuICAgICAgICBpZiAodGhpcy5saWZlY3ljbGUuYmF0Y2guZGVwdGggPiAwKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaW5CYXRjaCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaW5CYXRjaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5saWZlY3ljbGUuYmF0Y2guYWRkKHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5mbHVzaEJhdGNoKDAgLyogbm9uZSAqLyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0TGVuZ3RoT2JzZXJ2ZXIoKSB7XG4gICAgICAgIGlmICh0aGlzLmxlbmd0aE9ic2VydmVyID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIHRoaXMubGVuZ3RoT2JzZXJ2ZXIgPSBuZXcgQ29sbGVjdGlvblNpemVPYnNlcnZlcih0aGlzLmNvbGxlY3Rpb24pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmxlbmd0aE9ic2VydmVyO1xuICAgIH1cbiAgICBnZXRJbmRleE9ic2VydmVyKGluZGV4KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignU2V0IGluZGV4IG9ic2VydmF0aW9uIG5vdCBzdXBwb3J0ZWQnKTtcbiAgICB9XG4gICAgZmx1c2hCYXRjaChmbGFncykge1xuICAgICAgICB0aGlzLmluQmF0Y2ggPSBmYWxzZTtcbiAgICAgICAgY29uc3QgeyBpbmRleE1hcCwgY29sbGVjdGlvbiB9ID0gdGhpcztcbiAgICAgICAgY29uc3QgeyBzaXplIH0gPSBjb2xsZWN0aW9uO1xuICAgICAgICB0aGlzLmluZGV4TWFwID0gY3JlYXRlSW5kZXhNYXAoc2l6ZSk7XG4gICAgICAgIHRoaXMuY2FsbENvbGxlY3Rpb25TdWJzY3JpYmVycyhpbmRleE1hcCwgMTYgLyogdXBkYXRlVGFyZ2V0SW5zdGFuY2UgKi8gfCB0aGlzLnBlcnNpc3RlbnRGbGFncyk7XG4gICAgICAgIGlmICh0aGlzLmxlbmd0aE9ic2VydmVyICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgIHRoaXMubGVuZ3RoT2JzZXJ2ZXIuc2V0VmFsdWUoc2l6ZSwgMTYgLyogdXBkYXRlVGFyZ2V0SW5zdGFuY2UgKi8pO1xuICAgICAgICB9XG4gICAgfVxufTtcblNldE9ic2VydmVyID0gX19kZWNvcmF0ZShbXG4gICAgY29sbGVjdGlvblN1YnNjcmliZXJDb2xsZWN0aW9uKCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtOdW1iZXIsIE9iamVjdCwgT2JqZWN0XSlcbl0sIFNldE9ic2VydmVyKTtcbmV4cG9ydCB7IFNldE9ic2VydmVyIH07XG5leHBvcnQgZnVuY3Rpb24gZ2V0U2V0T2JzZXJ2ZXIoZmxhZ3MsIGxpZmVjeWNsZSwgb2JzZXJ2ZWRTZXQpIHtcbiAgICBjb25zdCBvYnNlcnZlciA9IG9ic2VydmVyTG9va3VwLmdldChvYnNlcnZlZFNldCk7XG4gICAgaWYgKG9ic2VydmVyID09PSB2b2lkIDApIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTZXRPYnNlcnZlcihmbGFncywgbGlmZWN5Y2xlLCBvYnNlcnZlZFNldCk7XG4gICAgfVxuICAgIHJldHVybiBvYnNlcnZlcjtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNldC1vYnNlcnZlci5qcy5tYXAiLCJpbXBvcnQgeyBfX2RlY29yYXRlLCBfX21ldGFkYXRhIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBSZXBvcnRlciB9IGZyb20gJ0BhdXJlbGlhL2tlcm5lbCc7XG5pbXBvcnQgeyBJTGlmZWN5Y2xlIH0gZnJvbSAnLi4vbGlmZWN5Y2xlJztcbmltcG9ydCB7IHN1YnNjcmliZXJDb2xsZWN0aW9uIH0gZnJvbSAnLi9zdWJzY3JpYmVyLWNvbGxlY3Rpb24nO1xuLyoqXG4gKiBPYnNlcnZlciBmb3IgdGhlIG11dGF0aW9uIG9mIG9iamVjdCBwcm9wZXJ0eSB2YWx1ZSBlbXBsb3lpbmcgZ2V0dGVyLXNldHRlciBzdHJhdGVneS5cbiAqIFRoaXMgaXMgdXNlZCBmb3Igb2JzZXJ2aW5nIG9iamVjdCBwcm9wZXJ0aWVzIHRoYXQgaGFzIG5vIGRlY29yYXRvci5cbiAqL1xubGV0IFNldHRlck9ic2VydmVyID0gY2xhc3MgU2V0dGVyT2JzZXJ2ZXIge1xuICAgIGNvbnN0cnVjdG9yKGxpZmVjeWNsZSwgZmxhZ3MsIG9iaiwgcHJvcGVydHlLZXkpIHtcbiAgICAgICAgdGhpcy5saWZlY3ljbGUgPSBsaWZlY3ljbGU7XG4gICAgICAgIHRoaXMub2JqID0gb2JqO1xuICAgICAgICB0aGlzLnByb3BlcnR5S2V5ID0gcHJvcGVydHlLZXk7XG4gICAgICAgIHRoaXMuY3VycmVudFZhbHVlID0gdm9pZCAwO1xuICAgICAgICB0aGlzLm9sZFZhbHVlID0gdm9pZCAwO1xuICAgICAgICB0aGlzLmluQmF0Y2ggPSBmYWxzZTtcbiAgICAgICAgdGhpcy5vYnNlcnZpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW50RmxhZ3MgPSBmbGFncyAmIDIwODAzNzQ3OTkgLyogcGVyc2lzdGVudEJpbmRpbmdGbGFncyAqLztcbiAgICB9XG4gICAgZ2V0VmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRWYWx1ZTtcbiAgICB9XG4gICAgc2V0VmFsdWUobmV3VmFsdWUsIGZsYWdzKSB7XG4gICAgICAgIGlmICh0aGlzLm9ic2VydmluZykge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudFZhbHVlID0gdGhpcy5jdXJyZW50VmFsdWU7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRWYWx1ZSA9IG5ld1ZhbHVlO1xuICAgICAgICAgICAgaWYgKHRoaXMubGlmZWN5Y2xlLmJhdGNoLmRlcHRoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jYWxsU3Vic2NyaWJlcnMobmV3VmFsdWUsIGN1cnJlbnRWYWx1ZSwgdGhpcy5wZXJzaXN0ZW50RmxhZ3MgfCBmbGFncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICghdGhpcy5pbkJhdGNoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbkJhdGNoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLm9sZFZhbHVlID0gY3VycmVudFZhbHVlO1xuICAgICAgICAgICAgICAgIHRoaXMubGlmZWN5Y2xlLmJhdGNoLmFkZCh0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIElmIHN1YnNjcmliZSgpIGhhcyBiZWVuIGNhbGxlZCwgdGhlIHRhcmdldCBwcm9wZXJ0eSBkZXNjcmlwdG9yIGlzIHJlcGxhY2VkIGJ5IHRoZXNlIGdldHRlci9zZXR0ZXIgbWV0aG9kcyxcbiAgICAgICAgICAgIC8vIHNvIGNhbGxpbmcgb2JqW3Byb3BlcnR5S2V5XSB3aWxsIGFjdHVhbGx5IHJldHVybiB0aGlzLmN1cnJlbnRWYWx1ZS5cbiAgICAgICAgICAgIC8vIEhvd2V2ZXIsIGlmIHN1YnNjcmliZSgpIHdhcyBub3QgeWV0IGNhbGxlZCAoaW5kaWNhdGVkIGJ5ICF0aGlzLm9ic2VydmluZyksIHRoZSB0YXJnZXQgZGVzY3JpcHRvclxuICAgICAgICAgICAgLy8gaXMgdW5tb2RpZmllZCBhbmQgd2UgbmVlZCB0byBleHBsaWNpdGx5IHNldCB0aGUgcHJvcGVydHkgdmFsdWUuXG4gICAgICAgICAgICAvLyBUaGlzIHdpbGwgaGFwcGVuIGluIG9uZS10aW1lLCB0by12aWV3IGFuZCB0d28td2F5IGJpbmRpbmdzIGR1cmluZyAkYmluZCwgbWVhbmluZyB0aGF0IHRoZSAkYmluZCB3aWxsIG5vdCBhY3R1YWxseSB1cGRhdGUgdGhlIHRhcmdldCB2YWx1ZS5cbiAgICAgICAgICAgIC8vIFRoaXMgd2Fzbid0IHZpc2libGUgaW4gdkN1cnJlbnQgZHVlIHRvIGNvbm5lY3QtcXVldWUgYWx3YXlzIGRvaW5nIGEgZGVsYXllZCB1cGRhdGUsIHNvIGluIG1hbnkgY2FzZXMgaXQgZGlkbid0IG1hdHRlciB3aGV0aGVyICRiaW5kIHVwZGF0ZWQgdGhlIHRhcmdldCBvciBub3QuXG4gICAgICAgICAgICB0aGlzLm9ialt0aGlzLnByb3BlcnR5S2V5XSA9IG5ld1ZhbHVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZsdXNoQmF0Y2goZmxhZ3MpIHtcbiAgICAgICAgdGhpcy5pbkJhdGNoID0gZmFsc2U7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRWYWx1ZSA9IHRoaXMuY3VycmVudFZhbHVlO1xuICAgICAgICBjb25zdCBvbGRWYWx1ZSA9IHRoaXMub2xkVmFsdWU7XG4gICAgICAgIHRoaXMub2xkVmFsdWUgPSBjdXJyZW50VmFsdWU7XG4gICAgICAgIHRoaXMuY2FsbFN1YnNjcmliZXJzKGN1cnJlbnRWYWx1ZSwgb2xkVmFsdWUsIHRoaXMucGVyc2lzdGVudEZsYWdzIHwgZmxhZ3MpO1xuICAgIH1cbiAgICBzdWJzY3JpYmUoc3Vic2NyaWJlcikge1xuICAgICAgICBpZiAodGhpcy5vYnNlcnZpbmcgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICB0aGlzLm9ic2VydmluZyA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRWYWx1ZSA9IHRoaXMub2JqW3RoaXMucHJvcGVydHlLZXldO1xuICAgICAgICAgICAgaWYgKCFSZWZsZWN0LmRlZmluZVByb3BlcnR5KHRoaXMub2JqLCB0aGlzLnByb3BlcnR5S2V5LCB7XG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgZ2V0OiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFZhbHVlKCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzZXQ6IHZhbHVlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRWYWx1ZSh2YWx1ZSwgMCAvKiBub25lICovKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSkpIHtcbiAgICAgICAgICAgICAgICBSZXBvcnRlci53cml0ZSgxLCB0aGlzLnByb3BlcnR5S2V5LCB0aGlzLm9iaik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hZGRTdWJzY3JpYmVyKHN1YnNjcmliZXIpO1xuICAgIH1cbn07XG5TZXR0ZXJPYnNlcnZlciA9IF9fZGVjb3JhdGUoW1xuICAgIHN1YnNjcmliZXJDb2xsZWN0aW9uKCksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3QsIE51bWJlciwgT2JqZWN0LCBTdHJpbmddKVxuXSwgU2V0dGVyT2JzZXJ2ZXIpO1xuZXhwb3J0IHsgU2V0dGVyT2JzZXJ2ZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNldHRlci1vYnNlcnZlci5qcy5tYXAiLCJpbXBvcnQgeyBESSB9IGZyb20gJ0BhdXJlbGlhL2tlcm5lbCc7XG5leHBvcnQgY29uc3QgSVNpZ25hbGVyID0gREkuY3JlYXRlSW50ZXJmYWNlKCdJU2lnbmFsZXInKS53aXRoRGVmYXVsdCh4ID0+IHguc2luZ2xldG9uKFNpZ25hbGVyKSk7XG4vKiogQGludGVybmFsICovXG5leHBvcnQgY2xhc3MgU2lnbmFsZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnNpZ25hbHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIH1cbiAgICBkaXNwYXRjaFNpZ25hbChuYW1lLCBmbGFncykge1xuICAgICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLnNpZ25hbHNbbmFtZV07XG4gICAgICAgIGlmIChsaXN0ZW5lcnMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgbGlzdGVuZXIgb2YgbGlzdGVuZXJzLmtleXMoKSkge1xuICAgICAgICAgICAgbGlzdGVuZXIuaGFuZGxlQ2hhbmdlKHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBmbGFncyB8IDE2IC8qIHVwZGF0ZVRhcmdldEluc3RhbmNlICovKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhZGRTaWduYWxMaXN0ZW5lcihuYW1lLCBsaXN0ZW5lcikge1xuICAgICAgICBjb25zdCBzaWduYWxzID0gdGhpcy5zaWduYWxzO1xuICAgICAgICBjb25zdCBsaXN0ZW5lcnMgPSBzaWduYWxzW25hbWVdO1xuICAgICAgICBpZiAobGlzdGVuZXJzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHNpZ25hbHNbbmFtZV0gPSBuZXcgU2V0KFtsaXN0ZW5lcl0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGlzdGVuZXJzLmFkZChsaXN0ZW5lcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVtb3ZlU2lnbmFsTGlzdGVuZXIobmFtZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5zaWduYWxzW25hbWVdO1xuICAgICAgICBpZiAobGlzdGVuZXJzKSB7XG4gICAgICAgICAgICBsaXN0ZW5lcnMuZGVsZXRlKGxpc3RlbmVyKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNpZ25hbGVyLmpzLm1hcCIsIi8vIFRPRE86IHNlZSBpZiB3ZSBjYW4gZGUtZHVwbGljYXRlIHRoZXNlIDMgZGVjb3JhdG9ycyBhbmQgdGhlaXIgZnVuY3Rpb25zIHdpdGhvdXQga2lsbGluZyBwZXJmb3JtYW5jZSBvciByZWFkYWJpbGl0eVxuZXhwb3J0IGZ1bmN0aW9uIHN1YnNjcmliZXJDb2xsZWN0aW9uKCkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXR5cGVzXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgICAgY29uc3QgcHJvdG8gPSB0YXJnZXQucHJvdG90eXBlO1xuICAgICAgICBwcm90by5fc3Vic2NyaWJlckZsYWdzID0gMCAvKiBOb25lICovO1xuICAgICAgICBwcm90by5hZGRTdWJzY3JpYmVyID0gYWRkU3Vic2NyaWJlcjtcbiAgICAgICAgcHJvdG8ucmVtb3ZlU3Vic2NyaWJlciA9IHJlbW92ZVN1YnNjcmliZXI7XG4gICAgICAgIHByb3RvLmhhc1N1YnNjcmliZXIgPSBoYXNTdWJzY3JpYmVyO1xuICAgICAgICBwcm90by5oYXNTdWJzY3JpYmVycyA9IGhhc1N1YnNjcmliZXJzO1xuICAgICAgICBwcm90by5jYWxsU3Vic2NyaWJlcnMgPSBjYWxsU3Vic2NyaWJlcnM7XG4gICAgICAgIGlmIChwcm90by5zdWJzY3JpYmUgPT09IHZvaWQgMClcbiAgICAgICAgICAgIHByb3RvLnN1YnNjcmliZSA9IGFkZFN1YnNjcmliZXI7XG4gICAgICAgIGlmIChwcm90by51bnN1YnNjcmliZSA9PT0gdm9pZCAwKVxuICAgICAgICAgICAgcHJvdG8udW5zdWJzY3JpYmUgPSByZW1vdmVTdWJzY3JpYmVyO1xuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gcHJveHlTdWJzY3JpYmVyQ29sbGVjdGlvbigpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10eXBlc1xuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgICAgIGNvbnN0IHByb3RvID0gdGFyZ2V0LnByb3RvdHlwZTtcbiAgICAgICAgcHJvdG8uX3Byb3h5U3Vic2NyaWJlckZsYWdzID0gMCAvKiBOb25lICovO1xuICAgICAgICBwcm90by5hZGRQcm94eVN1YnNjcmliZXIgPSBhZGRQcm94eVN1YnNjcmliZXI7XG4gICAgICAgIHByb3RvLnJlbW92ZVByb3h5U3Vic2NyaWJlciA9IHJlbW92ZVByb3h5U3Vic2NyaWJlcjtcbiAgICAgICAgcHJvdG8uaGFzUHJveHlTdWJzY3JpYmVyID0gaGFzUHJveHlTdWJzY3JpYmVyO1xuICAgICAgICBwcm90by5oYXNQcm94eVN1YnNjcmliZXJzID0gaGFzUHJveHlTdWJzY3JpYmVycztcbiAgICAgICAgcHJvdG8uY2FsbFByb3h5U3Vic2NyaWJlcnMgPSBjYWxsUHJveHlTdWJzY3JpYmVycztcbiAgICAgICAgaWYgKHByb3RvLnN1YnNjcmliZVRvUHJveHkgPT09IHZvaWQgMClcbiAgICAgICAgICAgIHByb3RvLnN1YnNjcmliZVRvUHJveHkgPSBhZGRQcm94eVN1YnNjcmliZXI7XG4gICAgICAgIGlmIChwcm90by51bnN1YnNjcmliZUZyb21Qcm94eSA9PT0gdm9pZCAwKVxuICAgICAgICAgICAgcHJvdG8udW5zdWJzY3JpYmVGcm9tUHJveHkgPSByZW1vdmVQcm94eVN1YnNjcmliZXI7XG4gICAgfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjb2xsZWN0aW9uU3Vic2NyaWJlckNvbGxlY3Rpb24oKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHlwZXNcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICBjb25zdCBwcm90byA9IHRhcmdldC5wcm90b3R5cGU7XG4gICAgICAgIHByb3RvLl9jb2xsZWN0aW9uU3Vic2NyaWJlckZsYWdzID0gMCAvKiBOb25lICovO1xuICAgICAgICBwcm90by5hZGRDb2xsZWN0aW9uU3Vic2NyaWJlciA9IGFkZENvbGxlY3Rpb25TdWJzY3JpYmVyO1xuICAgICAgICBwcm90by5yZW1vdmVDb2xsZWN0aW9uU3Vic2NyaWJlciA9IHJlbW92ZUNvbGxlY3Rpb25TdWJzY3JpYmVyO1xuICAgICAgICBwcm90by5oYXNDb2xsZWN0aW9uU3Vic2NyaWJlciA9IGhhc0NvbGxlY3Rpb25TdWJzY3JpYmVyO1xuICAgICAgICBwcm90by5oYXNDb2xsZWN0aW9uU3Vic2NyaWJlcnMgPSBoYXNDb2xsZWN0aW9uU3Vic2NyaWJlcnM7XG4gICAgICAgIHByb3RvLmNhbGxDb2xsZWN0aW9uU3Vic2NyaWJlcnMgPSBjYWxsQ29sbGVjdGlvblN1YnNjcmliZXJzO1xuICAgICAgICBpZiAocHJvdG8uc3Vic2NyaWJlVG9Db2xsZWN0aW9uID09PSB2b2lkIDApXG4gICAgICAgICAgICBwcm90by5zdWJzY3JpYmVUb0NvbGxlY3Rpb24gPSBhZGRDb2xsZWN0aW9uU3Vic2NyaWJlcjtcbiAgICAgICAgaWYgKHByb3RvLnVuc3Vic2NyaWJlRnJvbUNvbGxlY3Rpb24gPT09IHZvaWQgMClcbiAgICAgICAgICAgIHByb3RvLnVuc3Vic2NyaWJlRnJvbUNvbGxlY3Rpb24gPSByZW1vdmVDb2xsZWN0aW9uU3Vic2NyaWJlcjtcbiAgICB9O1xufVxuZnVuY3Rpb24gYWRkU3Vic2NyaWJlcihzdWJzY3JpYmVyKSB7XG4gICAgaWYgKHRoaXMuaGFzU3Vic2NyaWJlcihzdWJzY3JpYmVyKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IHN1YnNjcmliZXJGbGFncyA9IHRoaXMuX3N1YnNjcmliZXJGbGFncztcbiAgICBpZiAoKHN1YnNjcmliZXJGbGFncyAmIDEgLyogU3Vic2NyaWJlcjAgKi8pID09PSAwKSB7XG4gICAgICAgIHRoaXMuX3N1YnNjcmliZXIwID0gc3Vic2NyaWJlcjtcbiAgICAgICAgdGhpcy5fc3Vic2NyaWJlckZsYWdzIHw9IDEgLyogU3Vic2NyaWJlcjAgKi87XG4gICAgfVxuICAgIGVsc2UgaWYgKChzdWJzY3JpYmVyRmxhZ3MgJiAyIC8qIFN1YnNjcmliZXIxICovKSA9PT0gMCkge1xuICAgICAgICB0aGlzLl9zdWJzY3JpYmVyMSA9IHN1YnNjcmliZXI7XG4gICAgICAgIHRoaXMuX3N1YnNjcmliZXJGbGFncyB8PSAyIC8qIFN1YnNjcmliZXIxICovO1xuICAgIH1cbiAgICBlbHNlIGlmICgoc3Vic2NyaWJlckZsYWdzICYgNCAvKiBTdWJzY3JpYmVyMiAqLykgPT09IDApIHtcbiAgICAgICAgdGhpcy5fc3Vic2NyaWJlcjIgPSBzdWJzY3JpYmVyO1xuICAgICAgICB0aGlzLl9zdWJzY3JpYmVyRmxhZ3MgfD0gNCAvKiBTdWJzY3JpYmVyMiAqLztcbiAgICB9XG4gICAgZWxzZSBpZiAoKHN1YnNjcmliZXJGbGFncyAmIDggLyogU3Vic2NyaWJlcnNSZXN0ICovKSA9PT0gMCkge1xuICAgICAgICB0aGlzLl9zdWJzY3JpYmVyc1Jlc3QgPSBbc3Vic2NyaWJlcl07XG4gICAgICAgIHRoaXMuX3N1YnNjcmliZXJGbGFncyB8PSA4IC8qIFN1YnNjcmliZXJzUmVzdCAqLztcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG4gICAgICAgIHRoaXMuX3N1YnNjcmliZXJzUmVzdC5wdXNoKHN1YnNjcmliZXIpOyAvLyBOb24tbnVsbCBpcyBpbXBsaWVkIGJ5IGVsc2UgYnJhbmNoIG9mIChzdWJzY3JpYmVyRmxhZ3MgJiBTRi5TdWJzY3JpYmVyc1Jlc3QpID09PSAwXG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuZnVuY3Rpb24gYWRkUHJveHlTdWJzY3JpYmVyKHN1YnNjcmliZXIpIHtcbiAgICBpZiAodGhpcy5oYXNQcm94eVN1YnNjcmliZXIoc3Vic2NyaWJlcikpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCBzdWJzY3JpYmVyRmxhZ3MgPSB0aGlzLl9wcm94eVN1YnNjcmliZXJGbGFncztcbiAgICBpZiAoKHN1YnNjcmliZXJGbGFncyAmIDEgLyogU3Vic2NyaWJlcjAgKi8pID09PSAwKSB7XG4gICAgICAgIHRoaXMuX3Byb3h5U3Vic2NyaWJlcjAgPSBzdWJzY3JpYmVyO1xuICAgICAgICB0aGlzLl9wcm94eVN1YnNjcmliZXJGbGFncyB8PSAxIC8qIFN1YnNjcmliZXIwICovO1xuICAgIH1cbiAgICBlbHNlIGlmICgoc3Vic2NyaWJlckZsYWdzICYgMiAvKiBTdWJzY3JpYmVyMSAqLykgPT09IDApIHtcbiAgICAgICAgdGhpcy5fcHJveHlTdWJzY3JpYmVyMSA9IHN1YnNjcmliZXI7XG4gICAgICAgIHRoaXMuX3Byb3h5U3Vic2NyaWJlckZsYWdzIHw9IDIgLyogU3Vic2NyaWJlcjEgKi87XG4gICAgfVxuICAgIGVsc2UgaWYgKChzdWJzY3JpYmVyRmxhZ3MgJiA0IC8qIFN1YnNjcmliZXIyICovKSA9PT0gMCkge1xuICAgICAgICB0aGlzLl9wcm94eVN1YnNjcmliZXIyID0gc3Vic2NyaWJlcjtcbiAgICAgICAgdGhpcy5fcHJveHlTdWJzY3JpYmVyRmxhZ3MgfD0gNCAvKiBTdWJzY3JpYmVyMiAqLztcbiAgICB9XG4gICAgZWxzZSBpZiAoKHN1YnNjcmliZXJGbGFncyAmIDggLyogU3Vic2NyaWJlcnNSZXN0ICovKSA9PT0gMCkge1xuICAgICAgICB0aGlzLl9wcm94eVN1YnNjcmliZXJzUmVzdCA9IFtzdWJzY3JpYmVyXTtcbiAgICAgICAgdGhpcy5fcHJveHlTdWJzY3JpYmVyRmxhZ3MgfD0gOCAvKiBTdWJzY3JpYmVyc1Jlc3QgKi87XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvblxuICAgICAgICB0aGlzLl9wcm94eVN1YnNjcmliZXJzUmVzdC5wdXNoKHN1YnNjcmliZXIpOyAvLyBOb24tbnVsbCBpcyBpbXBsaWVkIGJ5IGVsc2UgYnJhbmNoIG9mIChzdWJzY3JpYmVyRmxhZ3MgJiBTRi5TdWJzY3JpYmVyc1Jlc3QpID09PSAwXG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuZnVuY3Rpb24gYWRkQ29sbGVjdGlvblN1YnNjcmliZXIoc3Vic2NyaWJlcikge1xuICAgIGlmICh0aGlzLmhhc0NvbGxlY3Rpb25TdWJzY3JpYmVyKHN1YnNjcmliZXIpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3Qgc3Vic2NyaWJlckZsYWdzID0gdGhpcy5fY29sbGVjdGlvblN1YnNjcmliZXJGbGFncztcbiAgICBpZiAoKHN1YnNjcmliZXJGbGFncyAmIDEgLyogU3Vic2NyaWJlcjAgKi8pID09PSAwKSB7XG4gICAgICAgIHRoaXMuX2NvbGxlY3Rpb25TdWJzY3JpYmVyMCA9IHN1YnNjcmliZXI7XG4gICAgICAgIHRoaXMuX2NvbGxlY3Rpb25TdWJzY3JpYmVyRmxhZ3MgfD0gMSAvKiBTdWJzY3JpYmVyMCAqLztcbiAgICB9XG4gICAgZWxzZSBpZiAoKHN1YnNjcmliZXJGbGFncyAmIDIgLyogU3Vic2NyaWJlcjEgKi8pID09PSAwKSB7XG4gICAgICAgIHRoaXMuX2NvbGxlY3Rpb25TdWJzY3JpYmVyMSA9IHN1YnNjcmliZXI7XG4gICAgICAgIHRoaXMuX2NvbGxlY3Rpb25TdWJzY3JpYmVyRmxhZ3MgfD0gMiAvKiBTdWJzY3JpYmVyMSAqLztcbiAgICB9XG4gICAgZWxzZSBpZiAoKHN1YnNjcmliZXJGbGFncyAmIDQgLyogU3Vic2NyaWJlcjIgKi8pID09PSAwKSB7XG4gICAgICAgIHRoaXMuX2NvbGxlY3Rpb25TdWJzY3JpYmVyMiA9IHN1YnNjcmliZXI7XG4gICAgICAgIHRoaXMuX2NvbGxlY3Rpb25TdWJzY3JpYmVyRmxhZ3MgfD0gNCAvKiBTdWJzY3JpYmVyMiAqLztcbiAgICB9XG4gICAgZWxzZSBpZiAoKHN1YnNjcmliZXJGbGFncyAmIDggLyogU3Vic2NyaWJlcnNSZXN0ICovKSA9PT0gMCkge1xuICAgICAgICB0aGlzLl9jb2xsZWN0aW9uU3Vic2NyaWJlcnNSZXN0ID0gW3N1YnNjcmliZXJdO1xuICAgICAgICB0aGlzLl9jb2xsZWN0aW9uU3Vic2NyaWJlckZsYWdzIHw9IDggLyogU3Vic2NyaWJlcnNSZXN0ICovO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgICAgICAgdGhpcy5fY29sbGVjdGlvblN1YnNjcmliZXJzUmVzdC5wdXNoKHN1YnNjcmliZXIpOyAvLyBOb24tbnVsbCBpcyBpbXBsaWVkIGJ5IGVsc2UgYnJhbmNoIG9mIChzdWJzY3JpYmVyRmxhZ3MgJiBTRi5TdWJzY3JpYmVyc1Jlc3QpID09PSAwXG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuZnVuY3Rpb24gcmVtb3ZlU3Vic2NyaWJlcihzdWJzY3JpYmVyKSB7XG4gICAgY29uc3Qgc3Vic2NyaWJlckZsYWdzID0gdGhpcy5fc3Vic2NyaWJlckZsYWdzO1xuICAgIGlmICgoc3Vic2NyaWJlckZsYWdzICYgMSAvKiBTdWJzY3JpYmVyMCAqLykgPiAwICYmIHRoaXMuX3N1YnNjcmliZXIwID09PSBzdWJzY3JpYmVyKSB7XG4gICAgICAgIHRoaXMuX3N1YnNjcmliZXIwID0gdm9pZCAwO1xuICAgICAgICB0aGlzLl9zdWJzY3JpYmVyRmxhZ3MgPSAodGhpcy5fc3Vic2NyaWJlckZsYWdzIHwgMSAvKiBTdWJzY3JpYmVyMCAqLykgXiAxIC8qIFN1YnNjcmliZXIwICovO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSBpZiAoKHN1YnNjcmliZXJGbGFncyAmIDIgLyogU3Vic2NyaWJlcjEgKi8pID4gMCAmJiB0aGlzLl9zdWJzY3JpYmVyMSA9PT0gc3Vic2NyaWJlcikge1xuICAgICAgICB0aGlzLl9zdWJzY3JpYmVyMSA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5fc3Vic2NyaWJlckZsYWdzID0gKHRoaXMuX3N1YnNjcmliZXJGbGFncyB8IDIgLyogU3Vic2NyaWJlcjEgKi8pIF4gMiAvKiBTdWJzY3JpYmVyMSAqLztcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGVsc2UgaWYgKChzdWJzY3JpYmVyRmxhZ3MgJiA0IC8qIFN1YnNjcmliZXIyICovKSA+IDAgJiYgdGhpcy5fc3Vic2NyaWJlcjIgPT09IHN1YnNjcmliZXIpIHtcbiAgICAgICAgdGhpcy5fc3Vic2NyaWJlcjIgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMuX3N1YnNjcmliZXJGbGFncyA9ICh0aGlzLl9zdWJzY3JpYmVyRmxhZ3MgfCA0IC8qIFN1YnNjcmliZXIyICovKSBeIDQgLyogU3Vic2NyaWJlcjIgKi87XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBlbHNlIGlmICgoc3Vic2NyaWJlckZsYWdzICYgOCAvKiBTdWJzY3JpYmVyc1Jlc3QgKi8pID4gMCkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvblxuICAgICAgICBjb25zdCBzdWJzY3JpYmVycyA9IHRoaXMuX3N1YnNjcmliZXJzUmVzdDsgLy8gTm9uLW51bGwgaXMgaW1wbGllZCBieSAoc3Vic2NyaWJlckZsYWdzICYgU0YuU3Vic2NyaWJlcnNSZXN0KSA+IDBcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGlpID0gc3Vic2NyaWJlcnMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgaWYgKHN1YnNjcmliZXJzW2ldID09PSBzdWJzY3JpYmVyKSB7XG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlcnMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgIGlmIChpaSA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zdWJzY3JpYmVyRmxhZ3MgPSAodGhpcy5fc3Vic2NyaWJlckZsYWdzIHwgOCAvKiBTdWJzY3JpYmVyc1Jlc3QgKi8pIF4gOCAvKiBTdWJzY3JpYmVyc1Jlc3QgKi87XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIHJlbW92ZVByb3h5U3Vic2NyaWJlcihzdWJzY3JpYmVyKSB7XG4gICAgY29uc3Qgc3Vic2NyaWJlckZsYWdzID0gdGhpcy5fcHJveHlTdWJzY3JpYmVyRmxhZ3M7XG4gICAgaWYgKChzdWJzY3JpYmVyRmxhZ3MgJiAxIC8qIFN1YnNjcmliZXIwICovKSA+IDAgJiYgdGhpcy5fcHJveHlTdWJzY3JpYmVyMCA9PT0gc3Vic2NyaWJlcikge1xuICAgICAgICB0aGlzLl9wcm94eVN1YnNjcmliZXIwID0gdm9pZCAwO1xuICAgICAgICB0aGlzLl9wcm94eVN1YnNjcmliZXJGbGFncyA9ICh0aGlzLl9wcm94eVN1YnNjcmliZXJGbGFncyB8IDEgLyogU3Vic2NyaWJlcjAgKi8pIF4gMSAvKiBTdWJzY3JpYmVyMCAqLztcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGVsc2UgaWYgKChzdWJzY3JpYmVyRmxhZ3MgJiAyIC8qIFN1YnNjcmliZXIxICovKSA+IDAgJiYgdGhpcy5fcHJveHlTdWJzY3JpYmVyMSA9PT0gc3Vic2NyaWJlcikge1xuICAgICAgICB0aGlzLl9wcm94eVN1YnNjcmliZXIxID0gdm9pZCAwO1xuICAgICAgICB0aGlzLl9wcm94eVN1YnNjcmliZXJGbGFncyA9ICh0aGlzLl9wcm94eVN1YnNjcmliZXJGbGFncyB8IDIgLyogU3Vic2NyaWJlcjEgKi8pIF4gMiAvKiBTdWJzY3JpYmVyMSAqLztcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGVsc2UgaWYgKChzdWJzY3JpYmVyRmxhZ3MgJiA0IC8qIFN1YnNjcmliZXIyICovKSA+IDAgJiYgdGhpcy5fcHJveHlTdWJzY3JpYmVyMiA9PT0gc3Vic2NyaWJlcikge1xuICAgICAgICB0aGlzLl9wcm94eVN1YnNjcmliZXIyID0gdm9pZCAwO1xuICAgICAgICB0aGlzLl9wcm94eVN1YnNjcmliZXJGbGFncyA9ICh0aGlzLl9wcm94eVN1YnNjcmliZXJGbGFncyB8IDQgLyogU3Vic2NyaWJlcjIgKi8pIF4gNCAvKiBTdWJzY3JpYmVyMiAqLztcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGVsc2UgaWYgKChzdWJzY3JpYmVyRmxhZ3MgJiA4IC8qIFN1YnNjcmliZXJzUmVzdCAqLykgPiAwKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG4gICAgICAgIGNvbnN0IHN1YnNjcmliZXJzID0gdGhpcy5fcHJveHlTdWJzY3JpYmVyc1Jlc3Q7IC8vIE5vbi1udWxsIGlzIGltcGxpZWQgYnkgKHN1YnNjcmliZXJGbGFncyAmIFNGLlN1YnNjcmliZXJzUmVzdCkgPiAwXG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IHN1YnNjcmliZXJzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIGlmIChzdWJzY3JpYmVyc1tpXSA9PT0gc3Vic2NyaWJlcikge1xuICAgICAgICAgICAgICAgIHN1YnNjcmliZXJzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICBpZiAoaWkgPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fcHJveHlTdWJzY3JpYmVyRmxhZ3MgPSAodGhpcy5fcHJveHlTdWJzY3JpYmVyRmxhZ3MgfCA4IC8qIFN1YnNjcmliZXJzUmVzdCAqLykgXiA4IC8qIFN1YnNjcmliZXJzUmVzdCAqLztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gcmVtb3ZlQ29sbGVjdGlvblN1YnNjcmliZXIoc3Vic2NyaWJlcikge1xuICAgIGNvbnN0IHN1YnNjcmliZXJGbGFncyA9IHRoaXMuX2NvbGxlY3Rpb25TdWJzY3JpYmVyRmxhZ3M7XG4gICAgaWYgKChzdWJzY3JpYmVyRmxhZ3MgJiAxIC8qIFN1YnNjcmliZXIwICovKSA+IDAgJiYgdGhpcy5fY29sbGVjdGlvblN1YnNjcmliZXIwID09PSBzdWJzY3JpYmVyKSB7XG4gICAgICAgIHRoaXMuX2NvbGxlY3Rpb25TdWJzY3JpYmVyMCA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5fY29sbGVjdGlvblN1YnNjcmliZXJGbGFncyA9ICh0aGlzLl9jb2xsZWN0aW9uU3Vic2NyaWJlckZsYWdzIHwgMSAvKiBTdWJzY3JpYmVyMCAqLykgXiAxIC8qIFN1YnNjcmliZXIwICovO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSBpZiAoKHN1YnNjcmliZXJGbGFncyAmIDIgLyogU3Vic2NyaWJlcjEgKi8pID4gMCAmJiB0aGlzLl9jb2xsZWN0aW9uU3Vic2NyaWJlcjEgPT09IHN1YnNjcmliZXIpIHtcbiAgICAgICAgdGhpcy5fY29sbGVjdGlvblN1YnNjcmliZXIxID0gdm9pZCAwO1xuICAgICAgICB0aGlzLl9jb2xsZWN0aW9uU3Vic2NyaWJlckZsYWdzID0gKHRoaXMuX2NvbGxlY3Rpb25TdWJzY3JpYmVyRmxhZ3MgfCAyIC8qIFN1YnNjcmliZXIxICovKSBeIDIgLyogU3Vic2NyaWJlcjEgKi87XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBlbHNlIGlmICgoc3Vic2NyaWJlckZsYWdzICYgNCAvKiBTdWJzY3JpYmVyMiAqLykgPiAwICYmIHRoaXMuX2NvbGxlY3Rpb25TdWJzY3JpYmVyMiA9PT0gc3Vic2NyaWJlcikge1xuICAgICAgICB0aGlzLl9jb2xsZWN0aW9uU3Vic2NyaWJlcjIgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMuX2NvbGxlY3Rpb25TdWJzY3JpYmVyRmxhZ3MgPSAodGhpcy5fY29sbGVjdGlvblN1YnNjcmliZXJGbGFncyB8IDQgLyogU3Vic2NyaWJlcjIgKi8pIF4gNCAvKiBTdWJzY3JpYmVyMiAqLztcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGVsc2UgaWYgKChzdWJzY3JpYmVyRmxhZ3MgJiA4IC8qIFN1YnNjcmliZXJzUmVzdCAqLykgPiAwKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG4gICAgICAgIGNvbnN0IHN1YnNjcmliZXJzID0gdGhpcy5fY29sbGVjdGlvblN1YnNjcmliZXJzUmVzdDsgLy8gTm9uLW51bGwgaXMgaW1wbGllZCBieSAoc3Vic2NyaWJlckZsYWdzICYgU0YuU3Vic2NyaWJlcnNSZXN0KSA+IDBcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGlpID0gc3Vic2NyaWJlcnMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgaWYgKHN1YnNjcmliZXJzW2ldID09PSBzdWJzY3JpYmVyKSB7XG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlcnMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgIGlmIChpaSA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jb2xsZWN0aW9uU3Vic2NyaWJlckZsYWdzID0gKHRoaXMuX2NvbGxlY3Rpb25TdWJzY3JpYmVyRmxhZ3MgfCA4IC8qIFN1YnNjcmliZXJzUmVzdCAqLykgXiA4IC8qIFN1YnNjcmliZXJzUmVzdCAqLztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gaGFzU3Vic2NyaWJlcnMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3N1YnNjcmliZXJGbGFncyAhPT0gMCAvKiBOb25lICovO1xufVxuZnVuY3Rpb24gaGFzUHJveHlTdWJzY3JpYmVycygpIHtcbiAgICByZXR1cm4gdGhpcy5fcHJveHlTdWJzY3JpYmVyRmxhZ3MgIT09IDAgLyogTm9uZSAqLztcbn1cbmZ1bmN0aW9uIGhhc0NvbGxlY3Rpb25TdWJzY3JpYmVycygpIHtcbiAgICByZXR1cm4gdGhpcy5fY29sbGVjdGlvblN1YnNjcmliZXJGbGFncyAhPT0gMCAvKiBOb25lICovO1xufVxuZnVuY3Rpb24gaGFzU3Vic2NyaWJlcihzdWJzY3JpYmVyKSB7XG4gICAgLy8gRmxhZ3MgaGVyZSBpcyBqdXN0IGEgcGVyZiB0d2Vha1xuICAgIC8vIENvbXBhcmVkIHRvIG5vdCB1c2luZyBmbGFncywgaXQncyBhIG1vZGVyYXRlIHNwZWVkLXVwIHdoZW4gdGhpcyBjb2xsZWN0aW9uIGRvZXMgbm90IGhhdmUgdGhlIHN1YnNjcmliZXI7XG4gICAgLy8gYW5kIG1pbm9yIHNsb3ctZG93biB3aGVuIGl0IGRvZXMsIGFuZCB0aGUgZm9ybWVyIGlzIG1vcmUgY29tbW9uIHRoYW4gdGhlIGxhdHRlci5cbiAgICBjb25zdCBzdWJzY3JpYmVyRmxhZ3MgPSB0aGlzLl9zdWJzY3JpYmVyRmxhZ3M7XG4gICAgaWYgKChzdWJzY3JpYmVyRmxhZ3MgJiAxIC8qIFN1YnNjcmliZXIwICovKSA+IDAgJiYgdGhpcy5fc3Vic2NyaWJlcjAgPT09IHN1YnNjcmliZXIpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmICgoc3Vic2NyaWJlckZsYWdzICYgMiAvKiBTdWJzY3JpYmVyMSAqLykgPiAwICYmIHRoaXMuX3N1YnNjcmliZXIxID09PSBzdWJzY3JpYmVyKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoKHN1YnNjcmliZXJGbGFncyAmIDQgLyogU3Vic2NyaWJlcjIgKi8pID4gMCAmJiB0aGlzLl9zdWJzY3JpYmVyMiA9PT0gc3Vic2NyaWJlcikge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKChzdWJzY3JpYmVyRmxhZ3MgJiA4IC8qIFN1YnNjcmliZXJzUmVzdCAqLykgPiAwKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG4gICAgICAgIGNvbnN0IHN1YnNjcmliZXJzID0gdGhpcy5fc3Vic2NyaWJlcnNSZXN0OyAvLyBOb24tbnVsbCBpcyBpbXBsaWVkIGJ5IChzdWJzY3JpYmVyRmxhZ3MgJiBTRi5TdWJzY3JpYmVyc1Jlc3QpID4gMFxuICAgICAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBzdWJzY3JpYmVycy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICBpZiAoc3Vic2NyaWJlcnNbaV0gPT09IHN1YnNjcmliZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBoYXNQcm94eVN1YnNjcmliZXIoc3Vic2NyaWJlcikge1xuICAgIGNvbnN0IHN1YnNjcmliZXJGbGFncyA9IHRoaXMuX3Byb3h5U3Vic2NyaWJlckZsYWdzO1xuICAgIGlmICgoc3Vic2NyaWJlckZsYWdzICYgMSAvKiBTdWJzY3JpYmVyMCAqLykgPiAwICYmIHRoaXMuX3Byb3h5U3Vic2NyaWJlcjAgPT09IHN1YnNjcmliZXIpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmICgoc3Vic2NyaWJlckZsYWdzICYgMiAvKiBTdWJzY3JpYmVyMSAqLykgPiAwICYmIHRoaXMuX3Byb3h5U3Vic2NyaWJlcjEgPT09IHN1YnNjcmliZXIpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmICgoc3Vic2NyaWJlckZsYWdzICYgNCAvKiBTdWJzY3JpYmVyMiAqLykgPiAwICYmIHRoaXMuX3Byb3h5U3Vic2NyaWJlcjIgPT09IHN1YnNjcmliZXIpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmICgoc3Vic2NyaWJlckZsYWdzICYgOCAvKiBTdWJzY3JpYmVyc1Jlc3QgKi8pID4gMCkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvblxuICAgICAgICBjb25zdCBzdWJzY3JpYmVycyA9IHRoaXMuX3Byb3h5U3Vic2NyaWJlcnNSZXN0OyAvLyBOb24tbnVsbCBpcyBpbXBsaWVkIGJ5IChzdWJzY3JpYmVyRmxhZ3MgJiBTRi5TdWJzY3JpYmVyc1Jlc3QpID4gMFxuICAgICAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBzdWJzY3JpYmVycy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICBpZiAoc3Vic2NyaWJlcnNbaV0gPT09IHN1YnNjcmliZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBoYXNDb2xsZWN0aW9uU3Vic2NyaWJlcihzdWJzY3JpYmVyKSB7XG4gICAgY29uc3Qgc3Vic2NyaWJlckZsYWdzID0gdGhpcy5fY29sbGVjdGlvblN1YnNjcmliZXJGbGFncztcbiAgICBpZiAoKHN1YnNjcmliZXJGbGFncyAmIDEgLyogU3Vic2NyaWJlcjAgKi8pID4gMCAmJiB0aGlzLl9jb2xsZWN0aW9uU3Vic2NyaWJlcjAgPT09IHN1YnNjcmliZXIpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmICgoc3Vic2NyaWJlckZsYWdzICYgMiAvKiBTdWJzY3JpYmVyMSAqLykgPiAwICYmIHRoaXMuX2NvbGxlY3Rpb25TdWJzY3JpYmVyMSA9PT0gc3Vic2NyaWJlcikge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKChzdWJzY3JpYmVyRmxhZ3MgJiA0IC8qIFN1YnNjcmliZXIyICovKSA+IDAgJiYgdGhpcy5fY29sbGVjdGlvblN1YnNjcmliZXIyID09PSBzdWJzY3JpYmVyKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoKHN1YnNjcmliZXJGbGFncyAmIDggLyogU3Vic2NyaWJlcnNSZXN0ICovKSA+IDApIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgICAgICAgY29uc3Qgc3Vic2NyaWJlcnMgPSB0aGlzLl9jb2xsZWN0aW9uU3Vic2NyaWJlcnNSZXN0OyAvLyBOb24tbnVsbCBpcyBpbXBsaWVkIGJ5IChzdWJzY3JpYmVyRmxhZ3MgJiBTRi5TdWJzY3JpYmVyc1Jlc3QpID4gMFxuICAgICAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBzdWJzY3JpYmVycy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICBpZiAoc3Vic2NyaWJlcnNbaV0gPT09IHN1YnNjcmliZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBjYWxsU3Vic2NyaWJlcnMobmV3VmFsdWUsIHByZXZpb3VzVmFsdWUsIGZsYWdzKSB7XG4gICAgLyoqXG4gICAgICogTm90ZTogY2hhbmdlIGhhbmRsZXJzIG1heSBoYXZlIHRoZSBzaWRlLWVmZmVjdCBvZiBhZGRpbmcvcmVtb3Zpbmcgc3Vic2NyaWJlcnMgdG8gdGhpcyBjb2xsZWN0aW9uIGR1cmluZyB0aGlzXG4gICAgICogY2FsbFN1YnNjcmliZXJzIGludm9jYXRpb24sIHNvIHdlJ3JlIGNhY2hpbmcgdGhlbSBhbGwgYmVmb3JlIGludm9raW5nIGFueS5cbiAgICAgKiBTdWJzY3JpYmVycyBhZGRlZCBkdXJpbmcgdGhpcyBpbnZvY2F0aW9uIGFyZSBub3QgaW52b2tlZCAoYW5kIHRoZXkgc2hvdWxkbid0IGJlKS5cbiAgICAgKiBTdWJzY3JpYmVycyByZW1vdmVkIGR1cmluZyB0aGlzIGludm9jYXRpb24gd2lsbCBzdGlsbCBiZSBpbnZva2VkIChhbmQgdGhleSBhbHNvIHNob3VsZG4ndCBiZSxcbiAgICAgKiBob3dldmVyIHRoaXMgaXMgYWNjb3VudGVkIGZvciB2aWEgJGlzQm91bmQgYW5kIHNpbWlsYXIgZmxhZ3Mgb24gdGhlIHN1YnNjcmliZXIgb2JqZWN0cylcbiAgICAgKi9cbiAgICBjb25zdCBzdWJzY3JpYmVyMCA9IHRoaXMuX3N1YnNjcmliZXIwO1xuICAgIGNvbnN0IHN1YnNjcmliZXIxID0gdGhpcy5fc3Vic2NyaWJlcjE7XG4gICAgY29uc3Qgc3Vic2NyaWJlcjIgPSB0aGlzLl9zdWJzY3JpYmVyMjtcbiAgICBsZXQgc3Vic2NyaWJlcnMgPSB0aGlzLl9zdWJzY3JpYmVyc1Jlc3Q7XG4gICAgaWYgKHN1YnNjcmliZXJzICE9PSB2b2lkIDApIHtcbiAgICAgICAgc3Vic2NyaWJlcnMgPSBzdWJzY3JpYmVycy5zbGljZSgpO1xuICAgIH1cbiAgICBpZiAoc3Vic2NyaWJlcjAgIT09IHZvaWQgMCkge1xuICAgICAgICBjYWxsU3Vic2NyaWJlcihzdWJzY3JpYmVyMCwgbmV3VmFsdWUsIHByZXZpb3VzVmFsdWUsIGZsYWdzLCBzdWJzY3JpYmVyMC5pZCA9PT0gdm9pZCAwID8gMCA6IHRoaXNbc3Vic2NyaWJlcjAuaWRdKTtcbiAgICB9XG4gICAgaWYgKHN1YnNjcmliZXIxICE9PSB2b2lkIDApIHtcbiAgICAgICAgY2FsbFN1YnNjcmliZXIoc3Vic2NyaWJlcjEsIG5ld1ZhbHVlLCBwcmV2aW91c1ZhbHVlLCBmbGFncywgc3Vic2NyaWJlcjEuaWQgPT09IHZvaWQgMCA/IDAgOiB0aGlzW3N1YnNjcmliZXIxLmlkXSk7XG4gICAgfVxuICAgIGlmIChzdWJzY3JpYmVyMiAhPT0gdm9pZCAwKSB7XG4gICAgICAgIGNhbGxTdWJzY3JpYmVyKHN1YnNjcmliZXIyLCBuZXdWYWx1ZSwgcHJldmlvdXNWYWx1ZSwgZmxhZ3MsIHN1YnNjcmliZXIyLmlkID09PSB2b2lkIDAgPyAwIDogdGhpc1tzdWJzY3JpYmVyMi5pZF0pO1xuICAgIH1cbiAgICBpZiAoc3Vic2NyaWJlcnMgIT09IHZvaWQgMCkge1xuICAgICAgICBjb25zdCB7IGxlbmd0aCB9ID0gc3Vic2NyaWJlcnM7XG4gICAgICAgIGxldCBzdWJzY3JpYmVyO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBzdWJzY3JpYmVyID0gc3Vic2NyaWJlcnNbaV07XG4gICAgICAgICAgICBpZiAoc3Vic2NyaWJlciAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgY2FsbFN1YnNjcmliZXIoc3Vic2NyaWJlciwgbmV3VmFsdWUsIHByZXZpb3VzVmFsdWUsIGZsYWdzLCBzdWJzY3JpYmVyLmlkID09PSB2b2lkIDAgPyAwIDogdGhpc1tzdWJzY3JpYmVyLmlkXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBjYWxsU3Vic2NyaWJlcihzdWJzY3JpYmVyLCBuZXdWYWx1ZSwgcHJldmlvdXNWYWx1ZSwgZmxhZ3MsIG93bkZsYWdzKSB7XG4gICAgc3Vic2NyaWJlci5oYW5kbGVDaGFuZ2UobmV3VmFsdWUsIHByZXZpb3VzVmFsdWUsICgoZmxhZ3MgfCA0OCAvKiB1cGRhdGUgKi8pIF4gNDggLyogdXBkYXRlICovKSB8IG93bkZsYWdzKTtcbn1cbmZ1bmN0aW9uIGNhbGxQcm94eVN1YnNjcmliZXJzKGtleSwgbmV3VmFsdWUsIHByZXZpb3VzVmFsdWUsIGZsYWdzKSB7XG4gICAgY29uc3Qgc3Vic2NyaWJlcjAgPSB0aGlzLl9wcm94eVN1YnNjcmliZXIwO1xuICAgIGNvbnN0IHN1YnNjcmliZXIxID0gdGhpcy5fcHJveHlTdWJzY3JpYmVyMTtcbiAgICBjb25zdCBzdWJzY3JpYmVyMiA9IHRoaXMuX3Byb3h5U3Vic2NyaWJlcjI7XG4gICAgbGV0IHN1YnNjcmliZXJzID0gdGhpcy5fcHJveHlTdWJzY3JpYmVyc1Jlc3Q7XG4gICAgaWYgKHN1YnNjcmliZXJzICE9PSB2b2lkIDApIHtcbiAgICAgICAgc3Vic2NyaWJlcnMgPSBzdWJzY3JpYmVycy5zbGljZSgpO1xuICAgIH1cbiAgICBpZiAoc3Vic2NyaWJlcjAgIT09IHZvaWQgMCkge1xuICAgICAgICBzdWJzY3JpYmVyMC5oYW5kbGVQcm94eUNoYW5nZShrZXksIG5ld1ZhbHVlLCBwcmV2aW91c1ZhbHVlLCBmbGFncyk7XG4gICAgfVxuICAgIGlmIChzdWJzY3JpYmVyMSAhPT0gdm9pZCAwKSB7XG4gICAgICAgIHN1YnNjcmliZXIxLmhhbmRsZVByb3h5Q2hhbmdlKGtleSwgbmV3VmFsdWUsIHByZXZpb3VzVmFsdWUsIGZsYWdzKTtcbiAgICB9XG4gICAgaWYgKHN1YnNjcmliZXIyICE9PSB2b2lkIDApIHtcbiAgICAgICAgc3Vic2NyaWJlcjIuaGFuZGxlUHJveHlDaGFuZ2Uoa2V5LCBuZXdWYWx1ZSwgcHJldmlvdXNWYWx1ZSwgZmxhZ3MpO1xuICAgIH1cbiAgICBpZiAoc3Vic2NyaWJlcnMgIT09IHZvaWQgMCkge1xuICAgICAgICBjb25zdCB7IGxlbmd0aCB9ID0gc3Vic2NyaWJlcnM7XG4gICAgICAgIGxldCBzdWJzY3JpYmVyO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBzdWJzY3JpYmVyID0gc3Vic2NyaWJlcnNbaV07XG4gICAgICAgICAgICBpZiAoc3Vic2NyaWJlciAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlci5oYW5kbGVQcm94eUNoYW5nZShrZXksIG5ld1ZhbHVlLCBwcmV2aW91c1ZhbHVlLCBmbGFncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5mdW5jdGlvbiBjYWxsQ29sbGVjdGlvblN1YnNjcmliZXJzKGluZGV4TWFwLCBmbGFncykge1xuICAgIGNvbnN0IHN1YnNjcmliZXIwID0gdGhpcy5fY29sbGVjdGlvblN1YnNjcmliZXIwO1xuICAgIGNvbnN0IHN1YnNjcmliZXIxID0gdGhpcy5fY29sbGVjdGlvblN1YnNjcmliZXIxO1xuICAgIGNvbnN0IHN1YnNjcmliZXIyID0gdGhpcy5fY29sbGVjdGlvblN1YnNjcmliZXIyO1xuICAgIGxldCBzdWJzY3JpYmVycyA9IHRoaXMuX2NvbGxlY3Rpb25TdWJzY3JpYmVyc1Jlc3Q7XG4gICAgaWYgKHN1YnNjcmliZXJzICE9PSB2b2lkIDApIHtcbiAgICAgICAgc3Vic2NyaWJlcnMgPSBzdWJzY3JpYmVycy5zbGljZSgpO1xuICAgIH1cbiAgICBpZiAoc3Vic2NyaWJlcjAgIT09IHZvaWQgMCkge1xuICAgICAgICBzdWJzY3JpYmVyMC5oYW5kbGVDb2xsZWN0aW9uQ2hhbmdlKGluZGV4TWFwLCBmbGFncyk7XG4gICAgfVxuICAgIGlmIChzdWJzY3JpYmVyMSAhPT0gdm9pZCAwKSB7XG4gICAgICAgIHN1YnNjcmliZXIxLmhhbmRsZUNvbGxlY3Rpb25DaGFuZ2UoaW5kZXhNYXAsIGZsYWdzKTtcbiAgICB9XG4gICAgaWYgKHN1YnNjcmliZXIyICE9PSB2b2lkIDApIHtcbiAgICAgICAgc3Vic2NyaWJlcjIuaGFuZGxlQ29sbGVjdGlvbkNoYW5nZShpbmRleE1hcCwgZmxhZ3MpO1xuICAgIH1cbiAgICBpZiAoc3Vic2NyaWJlcnMgIT09IHZvaWQgMCkge1xuICAgICAgICBjb25zdCB7IGxlbmd0aCB9ID0gc3Vic2NyaWJlcnM7XG4gICAgICAgIGxldCBzdWJzY3JpYmVyO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBzdWJzY3JpYmVyID0gc3Vic2NyaWJlcnNbaV07XG4gICAgICAgICAgICBpZiAoc3Vic2NyaWJlciAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlci5oYW5kbGVDb2xsZWN0aW9uQ2hhbmdlKGluZGV4TWFwLCBmbGFncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zdWJzY3JpYmVyLWNvbGxlY3Rpb24uanMubWFwIiwiaW1wb3J0IHsgX19kZWNvcmF0ZSwgX19tZXRhZGF0YSwgX19wYXJhbSB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgYWxsLCBSZWdpc3RyYXRpb24sIE1ldGFkYXRhLCBESSwgfSBmcm9tICdAYXVyZWxpYS9rZXJuZWwnO1xuaW1wb3J0IHsgQ2FsbEJpbmRpbmcgfSBmcm9tICcuL2JpbmRpbmcvY2FsbC1iaW5kaW5nJztcbmltcG9ydCB7IElFeHByZXNzaW9uUGFyc2VyIH0gZnJvbSAnLi9iaW5kaW5nL2V4cHJlc3Npb24tcGFyc2VyJztcbmltcG9ydCB7IEludGVycG9sYXRpb25CaW5kaW5nLCBNdWx0aUludGVycG9sYXRpb25CaW5kaW5nIH0gZnJvbSAnLi9iaW5kaW5nL2ludGVycG9sYXRpb24tYmluZGluZyc7XG5pbXBvcnQgeyBMZXRCaW5kaW5nIH0gZnJvbSAnLi9iaW5kaW5nL2xldC1iaW5kaW5nJztcbmltcG9ydCB7IFByb3BlcnR5QmluZGluZyB9IGZyb20gJy4vYmluZGluZy9wcm9wZXJ0eS1iaW5kaW5nJztcbmltcG9ydCB7IFJlZkJpbmRpbmcgfSBmcm9tICcuL2JpbmRpbmcvcmVmLWJpbmRpbmcnO1xuaW1wb3J0IHsgbWVyZ2VQYXJ0cyB9IGZyb20gJy4vZGVmaW5pdGlvbnMnO1xuaW1wb3J0IHsgQmluZGluZ01vZGUgfSBmcm9tICcuL2ZsYWdzJztcbmltcG9ydCB7IElMaWZlY3ljbGUsIH0gZnJvbSAnLi9saWZlY3ljbGUnO1xuaW1wb3J0IHsgSU9ic2VydmVyTG9jYXRvciB9IGZyb20gJy4vb2JzZXJ2YXRpb24vb2JzZXJ2ZXItbG9jYXRvcic7XG5pbXBvcnQgeyBDdXN0b21BdHRyaWJ1dGUsIH0gZnJvbSAnLi9yZXNvdXJjZXMvY3VzdG9tLWF0dHJpYnV0ZSc7XG5pbXBvcnQgeyBDdXN0b21FbGVtZW50LCB9IGZyb20gJy4vcmVzb3VyY2VzL2N1c3RvbS1lbGVtZW50JztcbmltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tICcuL3RlbXBsYXRpbmcvY29udHJvbGxlcic7XG5pbXBvcnQgeyBnZXRSZW5kZXJDb250ZXh0IH0gZnJvbSAnLi90ZW1wbGF0aW5nL3JlbmRlci1jb250ZXh0JztcbmltcG9ydCB7IEJpbmRpbmdCZWhhdmlvckV4cHJlc3Npb24gfSBmcm9tICcuL2JpbmRpbmcvYXN0JztcbmltcG9ydCB7IEJpbmRpbmdCZWhhdmlvckZhY3RvcnkgfSBmcm9tICcuL3Jlc291cmNlcy9iaW5kaW5nLWJlaGF2aW9yJztcbmV4cG9ydCBjb25zdCBJVGVtcGxhdGVDb21waWxlciA9IERJLmNyZWF0ZUludGVyZmFjZSgnSVRlbXBsYXRlQ29tcGlsZXInKS5ub0RlZmF1bHQoKTtcbmV4cG9ydCBjb25zdCBJSW5zdHJ1Y3Rpb25SZW5kZXJlciA9IERJLmNyZWF0ZUludGVyZmFjZSgnSUluc3RydWN0aW9uUmVuZGVyZXInKS5ub0RlZmF1bHQoKTtcbmV4cG9ydCBjb25zdCBJUmVuZGVyZXIgPSBESS5jcmVhdGVJbnRlcmZhY2UoJ0lSZW5kZXJlcicpLm5vRGVmYXVsdCgpO1xuZXhwb3J0IGZ1bmN0aW9uIGluc3RydWN0aW9uUmVuZGVyZXIoaW5zdHJ1Y3Rpb25UeXBlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIGRlY29yYXRvcih0YXJnZXQpIHtcbiAgICAgICAgLy8gd3JhcCB0aGUgY29uc3RydWN0b3IgdG8gc2V0IHRoZSBpbnN0cnVjdGlvblR5cGUgdG8gdGhlIGluc3RhbmNlIChmb3IgYmV0dGVyIHBlcmZvcm1hbmNlIHRoYW4gd2hlbiBzZXQgb24gdGhlIHByb3RvdHlwZSlcbiAgICAgICAgY29uc3QgZGVjb3JhdGVkVGFyZ2V0ID0gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgICAgIGNvbnN0IGluc3RhbmNlID0gbmV3IHRhcmdldCguLi5hcmdzKTtcbiAgICAgICAgICAgIGluc3RhbmNlLmluc3RydWN0aW9uVHlwZSA9IGluc3RydWN0aW9uVHlwZTtcbiAgICAgICAgICAgIHJldHVybiBpbnN0YW5jZTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gbWFrZSBzdXJlIHdlIHJlZ2lzdGVyIHRoZSBkZWNvcmF0ZWQgY29uc3RydWN0b3Igd2l0aCBESVxuICAgICAgICBkZWNvcmF0ZWRUYXJnZXQucmVnaXN0ZXIgPSBmdW5jdGlvbiByZWdpc3Rlcihjb250YWluZXIpIHtcbiAgICAgICAgICAgIFJlZ2lzdHJhdGlvbi5zaW5nbGV0b24oSUluc3RydWN0aW9uUmVuZGVyZXIsIGRlY29yYXRlZFRhcmdldCkucmVnaXN0ZXIoY29udGFpbmVyKTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gY29weSBvdmVyIGFueSBtZXRhZGF0YSBzdWNoIGFzIGFubm90YXRpb25zIChzZXQgYnkgcHJlY2VkaW5nIGRlY29yYXRvcnMpIGFzIHdlbGwgYXMgc3RhdGljIHByb3BlcnRpZXMgc2V0IGJ5IHRoZSB1c2VyXG4gICAgICAgIC8vIGFsc28gY29weSB0aGUgbmFtZSwgdG8gYmUgbGVzcyBjb25mdXNpbmcgdG8gdXNlcnMgKHNvIHRoZXkgY2FuIHN0aWxsIHVzZSBjb25zdHJ1Y3Rvci5uYW1lIGZvciB3aGF0ZXZlciByZWFzb24pXG4gICAgICAgIC8vIHRoZSBsZW5ndGggKG51bWJlciBvZiBjdG9yIGFyZ3VtZW50cykgaXMgY29waWVkIGZvciB0aGUgc2FtZSByZWFzb25cbiAgICAgICAgY29uc3QgbWV0YWRhdGFLZXlzID0gTWV0YWRhdGEuZ2V0T3duS2V5cyh0YXJnZXQpO1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBtZXRhZGF0YUtleXMpIHtcbiAgICAgICAgICAgIE1ldGFkYXRhLmRlZmluZShrZXksIE1ldGFkYXRhLmdldE93bihrZXksIHRhcmdldCksIGRlY29yYXRlZFRhcmdldCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgb3duUHJvcGVydGllcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHRhcmdldCk7XG4gICAgICAgIE9iamVjdC5rZXlzKG93blByb3BlcnRpZXMpLmZpbHRlcihwcm9wID0+IHByb3AgIT09ICdwcm90b3R5cGUnKS5mb3JFYWNoKHByb3AgPT4ge1xuICAgICAgICAgICAgUmVmbGVjdC5kZWZpbmVQcm9wZXJ0eShkZWNvcmF0ZWRUYXJnZXQsIHByb3AsIG93blByb3BlcnRpZXNbcHJvcF0pO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGRlY29yYXRlZFRhcmdldDtcbiAgICB9O1xufVxuLyogQGludGVybmFsICovXG5sZXQgUmVuZGVyZXIgPSBjbGFzcyBSZW5kZXJlciB7XG4gICAgY29uc3RydWN0b3IoaW5zdHJ1Y3Rpb25SZW5kZXJlcnMpIHtcbiAgICAgICAgY29uc3QgcmVjb3JkID0gdGhpcy5pbnN0cnVjdGlvblJlbmRlcmVycyA9IHt9O1xuICAgICAgICBpbnN0cnVjdGlvblJlbmRlcmVycy5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICAgICAgLy8gQmluZGluZyB0aGUgZnVuY3Rpb25zIHRvIHRoZSByZW5kZXJlciBpbnN0YW5jZXMgYW5kIGNhbGxpbmcgdGhlIGZ1bmN0aW9ucyBkaXJlY3RseSxcbiAgICAgICAgICAgIC8vIHByZXZlbnRzIHRoZSBgcmVuZGVyYCBjYWxsIHNpdGVzIGZyb20gZ29pbmcgbWVnYW1vcnBoaWMuXG4gICAgICAgICAgICAvLyBDb25zdW1lcyBzbGlnaHRseSBtb3JlIG1lbW9yeSBidXQgc2lnbmlmaWNhbnRseSBsZXNzIENQVS5cbiAgICAgICAgICAgIHJlY29yZFtpdGVtLmluc3RydWN0aW9uVHlwZV0gPSBpdGVtLnJlbmRlci5iaW5kKGl0ZW0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhdGljIHJlZ2lzdGVyKGNvbnRhaW5lcikge1xuICAgICAgICByZXR1cm4gUmVnaXN0cmF0aW9uLnNpbmdsZXRvbihJUmVuZGVyZXIsIHRoaXMpLnJlZ2lzdGVyKGNvbnRhaW5lcik7XG4gICAgfVxuICAgIHJlbmRlcihmbGFncywgY29udGV4dCwgY29udHJvbGxlciwgdGFyZ2V0cywgZGVmaW5pdGlvbiwgaG9zdCwgcGFydHMpIHtcbiAgICAgICAgY29uc3QgdGFyZ2V0SW5zdHJ1Y3Rpb25zID0gZGVmaW5pdGlvbi5pbnN0cnVjdGlvbnM7XG4gICAgICAgIGlmICh0YXJnZXRzLmxlbmd0aCAhPT0gdGFyZ2V0SW5zdHJ1Y3Rpb25zLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUaGUgY29tcGlsZWQgdGVtcGxhdGUgaXMgbm90IGFsaWduZWQgd2l0aCB0aGUgcmVuZGVyIGluc3RydWN0aW9ucy4gVGhlcmUgYXJlICR7dGFyZ2V0cy5sZW5ndGh9IHRhcmdldHMgYW5kICR7dGFyZ2V0SW5zdHJ1Y3Rpb25zLmxlbmd0aH0gaW5zdHJ1Y3Rpb25zLmApO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IHRhcmdldHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJJbnN0cnVjdGlvbnMoXG4gICAgICAgICAgICAvKiBmbGFncyAgICAgICAgKi8gZmxhZ3MsIFxuICAgICAgICAgICAgLyogY29udGV4dCAgICAgICovIGNvbnRleHQsIFxuICAgICAgICAgICAgLyogaW5zdHJ1Y3Rpb25zICovIHRhcmdldEluc3RydWN0aW9uc1tpXSwgXG4gICAgICAgICAgICAvKiBjb250cm9sbGVyICAgKi8gY29udHJvbGxlciwgXG4gICAgICAgICAgICAvKiB0YXJnZXQgICAgICAgKi8gdGFyZ2V0c1tpXSwgXG4gICAgICAgICAgICAvKiBwYXJ0cyAgICAgICAgKi8gcGFydHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChob3N0ICE9PSB2b2lkIDAgJiYgaG9zdCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJJbnN0cnVjdGlvbnMoXG4gICAgICAgICAgICAvKiBmbGFncyAgICAgICAgKi8gZmxhZ3MsIFxuICAgICAgICAgICAgLyogY29udGV4dCAgICAgICovIGNvbnRleHQsIFxuICAgICAgICAgICAgLyogaW5zdHJ1Y3Rpb25zICovIGRlZmluaXRpb24uc3Vycm9nYXRlcywgXG4gICAgICAgICAgICAvKiBjb250cm9sbGVyICAgKi8gY29udHJvbGxlciwgXG4gICAgICAgICAgICAvKiB0YXJnZXQgICAgICAgKi8gaG9zdCwgXG4gICAgICAgICAgICAvKiBwYXJ0cyAgICAgICAgKi8gcGFydHMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlbmRlckluc3RydWN0aW9ucyhmbGFncywgY29udGV4dCwgaW5zdHJ1Y3Rpb25zLCBjb250cm9sbGVyLCB0YXJnZXQsIHBhcnRzKSB7XG4gICAgICAgIGNvbnN0IGluc3RydWN0aW9uUmVuZGVyZXJzID0gdGhpcy5pbnN0cnVjdGlvblJlbmRlcmVycztcbiAgICAgICAgbGV0IGN1cnJlbnQ7XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IGluc3RydWN0aW9ucy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICBjdXJyZW50ID0gaW5zdHJ1Y3Rpb25zW2ldO1xuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25SZW5kZXJlcnNbY3VycmVudC50eXBlXShmbGFncywgY29udGV4dCwgY29udHJvbGxlciwgdGFyZ2V0LCBjdXJyZW50LCBwYXJ0cyk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuUmVuZGVyZXIgPSBfX2RlY29yYXRlKFtcbiAgICBfX3BhcmFtKDAsIGFsbChJSW5zdHJ1Y3Rpb25SZW5kZXJlcikpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbQXJyYXldKVxuXSwgUmVuZGVyZXIpO1xuZXhwb3J0IHsgUmVuZGVyZXIgfTtcbmV4cG9ydCBmdW5jdGlvbiBlbnN1cmVFeHByZXNzaW9uKHBhcnNlciwgc3JjT3JFeHByLCBiaW5kaW5nVHlwZSkge1xuICAgIGlmICh0eXBlb2Ygc3JjT3JFeHByID09PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gcGFyc2VyLnBhcnNlKHNyY09yRXhwciwgYmluZGluZ1R5cGUpO1xuICAgIH1cbiAgICByZXR1cm4gc3JjT3JFeHByO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGdldFRhcmdldChwb3RlbnRpYWxUYXJnZXQpIHtcbiAgICBpZiAocG90ZW50aWFsVGFyZ2V0LmJpbmRpbmdDb250ZXh0ICE9PSB2b2lkIDApIHtcbiAgICAgICAgcmV0dXJuIHBvdGVudGlhbFRhcmdldC5iaW5kaW5nQ29udGV4dDtcbiAgICB9XG4gICAgcmV0dXJuIHBvdGVudGlhbFRhcmdldDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRSZWZUYXJnZXQocmVmSG9zdCwgcmVmVGFyZ2V0TmFtZSkge1xuICAgIGlmIChyZWZUYXJnZXROYW1lID09PSAnZWxlbWVudCcpIHtcbiAgICAgICAgcmV0dXJuIHJlZkhvc3Q7XG4gICAgfVxuICAgIHN3aXRjaCAocmVmVGFyZ2V0TmFtZSkge1xuICAgICAgICBjYXNlICdjb250cm9sbGVyJzpcbiAgICAgICAgICAgIC8vIHRoaXMgbWVhbnMgaXQgc3VwcG9ydHMgcmV0dXJuaW5nIHVuZGVmaW5lZFxuICAgICAgICAgICAgcmV0dXJuIEN1c3RvbUVsZW1lbnQuZm9yKHJlZkhvc3QpO1xuICAgICAgICBjYXNlICd2aWV3JzpcbiAgICAgICAgICAgIC8vIHRvZG86IHJldHVybnMgbm9kZSBzZXF1ZW5jZXMgZm9yIGZ1bj9cbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm90IHN1cHBvcnRlZCBBUEknKTtcbiAgICAgICAgY2FzZSAndmlldy1tb2RlbCc6XG4gICAgICAgICAgICAvLyB0aGlzIG1lYW5zIGl0IHN1cHBvcnRzIHJldHVybmluZyB1bmRlZmluZWRcbiAgICAgICAgICAgIHJldHVybiBDdXN0b21FbGVtZW50LmZvcihyZWZIb3N0KS52aWV3TW9kZWw7XG4gICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgIGNvbnN0IGNhQ29udHJvbGxlciA9IEN1c3RvbUF0dHJpYnV0ZS5mb3IocmVmSG9zdCwgcmVmVGFyZ2V0TmFtZSk7XG4gICAgICAgICAgICBpZiAoY2FDb250cm9sbGVyICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FDb250cm9sbGVyLnZpZXdNb2RlbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGNlQ29udHJvbGxlciA9IEN1c3RvbUVsZW1lbnQuZm9yKHJlZkhvc3QsIHJlZlRhcmdldE5hbWUpO1xuICAgICAgICAgICAgaWYgKGNlQ29udHJvbGxlciA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBdHRlbXB0ZWQgdG8gcmVmZXJlbmNlIFwiJHtyZWZUYXJnZXROYW1lfVwiLCBidXQgaXQgd2FzIG5vdCBmb3VuZCBhbW9uZ3N0IHRoZSB0YXJnZXQncyBBUEkuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY2VDb250cm9sbGVyLnZpZXdNb2RlbDtcbiAgICAgICAgfVxuICAgIH1cbn1cbmxldCBTZXRQcm9wZXJ0eVJlbmRlcmVyID0gXG4vKiogQGludGVybmFsICovXG5jbGFzcyBTZXRQcm9wZXJ0eVJlbmRlcmVyIHtcbiAgICByZW5kZXIoZmxhZ3MsIGNvbnRleHQsIGNvbnRyb2xsZXIsIHRhcmdldCwgaW5zdHJ1Y3Rpb24pIHtcbiAgICAgICAgY29uc3Qgb2JqID0gZ2V0VGFyZ2V0KHRhcmdldCk7XG4gICAgICAgIGlmIChvYmouJG9ic2VydmVycyAhPT0gdm9pZCAwICYmIG9iai4kb2JzZXJ2ZXJzW2luc3RydWN0aW9uLnRvXSAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBvYmouJG9ic2VydmVyc1tpbnN0cnVjdGlvbi50b10uc2V0VmFsdWUoaW5zdHJ1Y3Rpb24udmFsdWUsIDQwOTYgLyogZnJvbUJpbmQgKi8pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb2JqW2luc3RydWN0aW9uLnRvXSA9IGluc3RydWN0aW9uLnZhbHVlO1xuICAgICAgICB9XG4gICAgfVxufTtcblNldFByb3BlcnR5UmVuZGVyZXIgPSBfX2RlY29yYXRlKFtcbiAgICBpbnN0cnVjdGlvblJlbmRlcmVyKFwicmVcIiAvKiBzZXRQcm9wZXJ0eSAqLylcbiAgICAvKiogQGludGVybmFsICovXG5dLCBTZXRQcm9wZXJ0eVJlbmRlcmVyKTtcbmV4cG9ydCB7IFNldFByb3BlcnR5UmVuZGVyZXIgfTtcbmxldCBDdXN0b21FbGVtZW50UmVuZGVyZXIgPSBcbi8qKiBAaW50ZXJuYWwgKi9cbmNsYXNzIEN1c3RvbUVsZW1lbnRSZW5kZXJlciB7XG4gICAgcmVuZGVyKGZsYWdzLCBjb250ZXh0LCBjb250cm9sbGVyLCB0YXJnZXQsIGluc3RydWN0aW9uLCBwYXJ0cykge1xuICAgICAgICBwYXJ0cyA9IG1lcmdlUGFydHMocGFydHMsIGluc3RydWN0aW9uLnBhcnRzKTtcbiAgICAgICAgY29uc3QgZmFjdG9yeSA9IGNvbnRleHQuZ2V0Q29tcG9uZW50RmFjdG9yeShcbiAgICAgICAgLyogcGFyZW50Q29udHJvbGxlciAqLyBjb250cm9sbGVyLCBcbiAgICAgICAgLyogaG9zdCAgICAgICAgICAgICAqLyB0YXJnZXQsIFxuICAgICAgICAvKiBpbnN0cnVjdGlvbiAgICAgICovIGluc3RydWN0aW9uLCBcbiAgICAgICAgLyogdmlld0ZhY3RvcnkgICAgICAqLyB2b2lkIDAsIFxuICAgICAgICAvKiBsb2NhdGlvbiAgICAgICAgICovIHRhcmdldCk7XG4gICAgICAgIGNvbnN0IGtleSA9IEN1c3RvbUVsZW1lbnQua2V5RnJvbShpbnN0cnVjdGlvbi5yZXMpO1xuICAgICAgICBjb25zdCBjb21wb25lbnQgPSBmYWN0b3J5LmNyZWF0ZUNvbXBvbmVudChrZXkpO1xuICAgICAgICBjb25zdCBsaWZlY3ljbGUgPSBjb250ZXh0LmdldChJTGlmZWN5Y2xlKTtcbiAgICAgICAgY29uc3QgY2hpbGRDb250cm9sbGVyID0gQ29udHJvbGxlci5mb3JDdXN0b21FbGVtZW50KFxuICAgICAgICAvKiB2aWV3TW9kZWwgICAgICAgKi8gY29tcG9uZW50LCBcbiAgICAgICAgLyogbGlmZWN5Y2xlICAgICAgICovIGxpZmVjeWNsZSwgXG4gICAgICAgIC8qIGhvc3QgICAgICAgICAgICAqLyB0YXJnZXQsIFxuICAgICAgICAvKiBwYXJlbnRDb250YWluZXIgKi8gY29udGV4dCwgXG4gICAgICAgIC8qIHBhcnRzICAgICAgICAgICAqLyBwYXJ0cywgXG4gICAgICAgIC8qIGZsYWdzICAgICAgICAgICAqLyBmbGFncyk7XG4gICAgICAgIGZsYWdzID0gY2hpbGRDb250cm9sbGVyLmZsYWdzO1xuICAgICAgICBNZXRhZGF0YS5kZWZpbmUoa2V5LCBjaGlsZENvbnRyb2xsZXIsIHRhcmdldCk7XG4gICAgICAgIGNvbnRleHQucmVuZGVySW5zdHJ1Y3Rpb25zKFxuICAgICAgICAvKiBmbGFncyAgICAgICAgKi8gZmxhZ3MsIFxuICAgICAgICAvKiBpbnN0cnVjdGlvbnMgKi8gaW5zdHJ1Y3Rpb24uaW5zdHJ1Y3Rpb25zLCBcbiAgICAgICAgLyogY29udHJvbGxlciAgICovIGNvbnRyb2xsZXIsIFxuICAgICAgICAvKiB0YXJnZXQgICAgICAgKi8gY2hpbGRDb250cm9sbGVyLCBcbiAgICAgICAgLyogcGFydHMgICAgICAgICovIHBhcnRzKTtcbiAgICAgICAgY29udHJvbGxlci5hZGRDb250cm9sbGVyKGNoaWxkQ29udHJvbGxlcik7XG4gICAgICAgIGZhY3RvcnkuZGlzcG9zZSgpO1xuICAgIH1cbn07XG5DdXN0b21FbGVtZW50UmVuZGVyZXIgPSBfX2RlY29yYXRlKFtcbiAgICBpbnN0cnVjdGlvblJlbmRlcmVyKFwicmFcIiAvKiBoeWRyYXRlRWxlbWVudCAqLylcbiAgICAvKiogQGludGVybmFsICovXG5dLCBDdXN0b21FbGVtZW50UmVuZGVyZXIpO1xuZXhwb3J0IHsgQ3VzdG9tRWxlbWVudFJlbmRlcmVyIH07XG5sZXQgQ3VzdG9tQXR0cmlidXRlUmVuZGVyZXIgPSBcbi8qKiBAaW50ZXJuYWwgKi9cbmNsYXNzIEN1c3RvbUF0dHJpYnV0ZVJlbmRlcmVyIHtcbiAgICByZW5kZXIoZmxhZ3MsIGNvbnRleHQsIGNvbnRyb2xsZXIsIHRhcmdldCwgaW5zdHJ1Y3Rpb24sIHBhcnRzKSB7XG4gICAgICAgIGNvbnN0IGZhY3RvcnkgPSBjb250ZXh0LmdldENvbXBvbmVudEZhY3RvcnkoXG4gICAgICAgIC8qIHBhcmVudENvbnRyb2xsZXIgKi8gY29udHJvbGxlciwgXG4gICAgICAgIC8qIGhvc3QgICAgICAgICAgICAgKi8gdGFyZ2V0LCBcbiAgICAgICAgLyogaW5zdHJ1Y3Rpb24gICAgICAqLyBpbnN0cnVjdGlvbiwgXG4gICAgICAgIC8qIHZpZXdGYWN0b3J5ICAgICAgKi8gdm9pZCAwLCBcbiAgICAgICAgLyogbG9jYXRpb24gICAgICAgICAqLyB2b2lkIDApO1xuICAgICAgICBjb25zdCBrZXkgPSBDdXN0b21BdHRyaWJ1dGUua2V5RnJvbShpbnN0cnVjdGlvbi5yZXMpO1xuICAgICAgICBjb25zdCBjb21wb25lbnQgPSBmYWN0b3J5LmNyZWF0ZUNvbXBvbmVudChrZXkpO1xuICAgICAgICBjb25zdCBsaWZlY3ljbGUgPSBjb250ZXh0LmdldChJTGlmZWN5Y2xlKTtcbiAgICAgICAgY29uc3QgY2hpbGRDb250cm9sbGVyID0gQ29udHJvbGxlci5mb3JDdXN0b21BdHRyaWJ1dGUoXG4gICAgICAgIC8qIHZpZXdNb2RlbCAqLyBjb21wb25lbnQsIFxuICAgICAgICAvKiBsaWZlY3ljbGUgKi8gbGlmZWN5Y2xlLCBcbiAgICAgICAgLyogaG9zdCAgICAgICovIHRhcmdldCwgXG4gICAgICAgIC8qIGZsYWdzICAgICAqLyBmbGFncyk7XG4gICAgICAgIE1ldGFkYXRhLmRlZmluZShrZXksIGNoaWxkQ29udHJvbGxlciwgdGFyZ2V0KTtcbiAgICAgICAgY29udGV4dC5yZW5kZXJJbnN0cnVjdGlvbnMoXG4gICAgICAgIC8qIGZsYWdzICAgICAgICAqLyBmbGFncywgXG4gICAgICAgIC8qIGluc3RydWN0aW9ucyAqLyBpbnN0cnVjdGlvbi5pbnN0cnVjdGlvbnMsIFxuICAgICAgICAvKiBjb250cm9sbGVyICAgKi8gY29udHJvbGxlciwgXG4gICAgICAgIC8qIHRhcmdldCAgICAgICAqLyBjaGlsZENvbnRyb2xsZXIsIFxuICAgICAgICAvKiBwYXJ0cyAgICAgICAgKi8gcGFydHMpO1xuICAgICAgICBjb250cm9sbGVyLmFkZENvbnRyb2xsZXIoY2hpbGRDb250cm9sbGVyKTtcbiAgICAgICAgZmFjdG9yeS5kaXNwb3NlKCk7XG4gICAgfVxufTtcbkN1c3RvbUF0dHJpYnV0ZVJlbmRlcmVyID0gX19kZWNvcmF0ZShbXG4gICAgaW5zdHJ1Y3Rpb25SZW5kZXJlcihcInJiXCIgLyogaHlkcmF0ZUF0dHJpYnV0ZSAqLylcbiAgICAvKiogQGludGVybmFsICovXG5dLCBDdXN0b21BdHRyaWJ1dGVSZW5kZXJlcik7XG5leHBvcnQgeyBDdXN0b21BdHRyaWJ1dGVSZW5kZXJlciB9O1xubGV0IFRlbXBsYXRlQ29udHJvbGxlclJlbmRlcmVyID0gXG4vKiogQGludGVybmFsICovXG5jbGFzcyBUZW1wbGF0ZUNvbnRyb2xsZXJSZW5kZXJlciB7XG4gICAgcmVuZGVyKGZsYWdzLCBwYXJlbnRDb250ZXh0LCBjb250cm9sbGVyLCB0YXJnZXQsIGluc3RydWN0aW9uLCBwYXJ0cykge1xuICAgICAgICBwYXJ0cyA9IG1lcmdlUGFydHMocGFydHMsIGluc3RydWN0aW9uLnBhcnRzKTtcbiAgICAgICAgY29uc3Qgdmlld0ZhY3RvcnkgPSBnZXRSZW5kZXJDb250ZXh0KGluc3RydWN0aW9uLmRlZiwgcGFyZW50Q29udGV4dCwgcGFydHMpLmdldFZpZXdGYWN0b3J5KCk7XG4gICAgICAgIGNvbnN0IHJlbmRlckxvY2F0aW9uID0gcGFyZW50Q29udGV4dC5kb20uY29udmVydFRvUmVuZGVyTG9jYXRpb24odGFyZ2V0KTtcbiAgICAgICAgY29uc3QgY29tcG9uZW50RmFjdG9yeSA9IHBhcmVudENvbnRleHQuZ2V0Q29tcG9uZW50RmFjdG9yeShcbiAgICAgICAgLyogcGFyZW50Q29udHJvbGxlciAqLyBjb250cm9sbGVyLCBcbiAgICAgICAgLyogaG9zdCAgICAgICAgICAgICAqLyB0YXJnZXQsIFxuICAgICAgICAvKiBpbnN0cnVjdGlvbiAgICAgICovIGluc3RydWN0aW9uLCBcbiAgICAgICAgLyogdmlld0ZhY3RvcnkgICAgICAqLyB2aWV3RmFjdG9yeSwgXG4gICAgICAgIC8qIGxvY2F0aW9uICAgICAgICAgKi8gcmVuZGVyTG9jYXRpb24pO1xuICAgICAgICBjb25zdCBrZXkgPSBDdXN0b21BdHRyaWJ1dGUua2V5RnJvbShpbnN0cnVjdGlvbi5yZXMpO1xuICAgICAgICBjb25zdCBjb21wb25lbnQgPSBjb21wb25lbnRGYWN0b3J5LmNyZWF0ZUNvbXBvbmVudChrZXkpO1xuICAgICAgICBjb25zdCBsaWZlY3ljbGUgPSBwYXJlbnRDb250ZXh0LmdldChJTGlmZWN5Y2xlKTtcbiAgICAgICAgY29uc3QgY2hpbGRDb250cm9sbGVyID0gQ29udHJvbGxlci5mb3JDdXN0b21BdHRyaWJ1dGUoXG4gICAgICAgIC8qIHZpZXdNb2RlbCAqLyBjb21wb25lbnQsIFxuICAgICAgICAvKiBsaWZlY3ljbGUgKi8gbGlmZWN5Y2xlLCBcbiAgICAgICAgLyogaG9zdCAgICAgICovIHRhcmdldCwgXG4gICAgICAgIC8qIGZsYWdzICAgICAqLyBmbGFncyk7XG4gICAgICAgIE1ldGFkYXRhLmRlZmluZShrZXksIGNoaWxkQ29udHJvbGxlciwgcmVuZGVyTG9jYXRpb24pO1xuICAgICAgICBpZiAoaW5zdHJ1Y3Rpb24ubGluaykge1xuICAgICAgICAgICAgY29uc3QgY29udHJvbGxlcnMgPSBjb250cm9sbGVyLmNvbnRyb2xsZXJzO1xuICAgICAgICAgICAgY29tcG9uZW50LmxpbmsoY29udHJvbGxlcnNbY29udHJvbGxlcnMubGVuZ3RoIC0gMV0pO1xuICAgICAgICB9XG4gICAgICAgIHBhcmVudENvbnRleHQucmVuZGVySW5zdHJ1Y3Rpb25zKFxuICAgICAgICAvKiBmbGFncyAgICAgICAgKi8gZmxhZ3MsIFxuICAgICAgICAvKiBpbnN0cnVjdGlvbnMgKi8gaW5zdHJ1Y3Rpb24uaW5zdHJ1Y3Rpb25zLCBcbiAgICAgICAgLyogY29udHJvbGxlciAgICovIGNvbnRyb2xsZXIsIFxuICAgICAgICAvKiB0YXJnZXQgICAgICAgKi8gY2hpbGRDb250cm9sbGVyLCBcbiAgICAgICAgLyogcGFydHMgICAgICAgICovIHBhcnRzKTtcbiAgICAgICAgY29udHJvbGxlci5hZGRDb250cm9sbGVyKGNoaWxkQ29udHJvbGxlcik7XG4gICAgICAgIGNvbXBvbmVudEZhY3RvcnkuZGlzcG9zZSgpO1xuICAgIH1cbn07XG5UZW1wbGF0ZUNvbnRyb2xsZXJSZW5kZXJlciA9IF9fZGVjb3JhdGUoW1xuICAgIGluc3RydWN0aW9uUmVuZGVyZXIoXCJyY1wiIC8qIGh5ZHJhdGVUZW1wbGF0ZUNvbnRyb2xsZXIgKi8pXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuXSwgVGVtcGxhdGVDb250cm9sbGVyUmVuZGVyZXIpO1xuZXhwb3J0IHsgVGVtcGxhdGVDb250cm9sbGVyUmVuZGVyZXIgfTtcbmxldCBMZXRFbGVtZW50UmVuZGVyZXIgPSBcbi8qKiBAaW50ZXJuYWwgKi9cbmNsYXNzIExldEVsZW1lbnRSZW5kZXJlciB7XG4gICAgY29uc3RydWN0b3IocGFyc2VyLCBvYnNlcnZlckxvY2F0b3IpIHtcbiAgICAgICAgdGhpcy5wYXJzZXIgPSBwYXJzZXI7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJMb2NhdG9yID0gb2JzZXJ2ZXJMb2NhdG9yO1xuICAgIH1cbiAgICByZW5kZXIoZmxhZ3MsIGNvbnRleHQsIGNvbnRyb2xsZXIsIHRhcmdldCwgaW5zdHJ1Y3Rpb24pIHtcbiAgICAgICAgY29udGV4dC5kb20ucmVtb3ZlKHRhcmdldCk7XG4gICAgICAgIGNvbnN0IGNoaWxkSW5zdHJ1Y3Rpb25zID0gaW5zdHJ1Y3Rpb24uaW5zdHJ1Y3Rpb25zO1xuICAgICAgICBjb25zdCB0b0JpbmRpbmdDb250ZXh0ID0gaW5zdHJ1Y3Rpb24udG9CaW5kaW5nQ29udGV4dDtcbiAgICAgICAgbGV0IGNoaWxkSW5zdHJ1Y3Rpb247XG4gICAgICAgIGxldCBleHByO1xuICAgICAgICBsZXQgYmluZGluZztcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGlpID0gY2hpbGRJbnN0cnVjdGlvbnMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgY2hpbGRJbnN0cnVjdGlvbiA9IGNoaWxkSW5zdHJ1Y3Rpb25zW2ldO1xuICAgICAgICAgICAgZXhwciA9IGVuc3VyZUV4cHJlc3Npb24odGhpcy5wYXJzZXIsIGNoaWxkSW5zdHJ1Y3Rpb24uZnJvbSwgNDggLyogSXNQcm9wZXJ0eUNvbW1hbmQgKi8pO1xuICAgICAgICAgICAgYmluZGluZyA9IGFwcGx5QmluZGluZ0JlaGF2aW9yKG5ldyBMZXRCaW5kaW5nKGV4cHIsIGNoaWxkSW5zdHJ1Y3Rpb24udG8sIHRoaXMub2JzZXJ2ZXJMb2NhdG9yLCBjb250ZXh0LCB0b0JpbmRpbmdDb250ZXh0KSwgZXhwciwgY29udGV4dCk7XG4gICAgICAgICAgICBjb250cm9sbGVyLmFkZEJpbmRpbmcoYmluZGluZyk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuTGV0RWxlbWVudFJlbmRlcmVyID0gX19kZWNvcmF0ZShbXG4gICAgaW5zdHJ1Y3Rpb25SZW5kZXJlcihcInJkXCIgLyogaHlkcmF0ZUxldEVsZW1lbnQgKi8pXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgICxcbiAgICBfX3BhcmFtKDAsIElFeHByZXNzaW9uUGFyc2VyKSxcbiAgICBfX3BhcmFtKDEsIElPYnNlcnZlckxvY2F0b3IpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0LCBPYmplY3RdKVxuXSwgTGV0RWxlbWVudFJlbmRlcmVyKTtcbmV4cG9ydCB7IExldEVsZW1lbnRSZW5kZXJlciB9O1xubGV0IENhbGxCaW5kaW5nUmVuZGVyZXIgPSBcbi8qKiBAaW50ZXJuYWwgKi9cbmNsYXNzIENhbGxCaW5kaW5nUmVuZGVyZXIge1xuICAgIGNvbnN0cnVjdG9yKHBhcnNlciwgb2JzZXJ2ZXJMb2NhdG9yKSB7XG4gICAgICAgIHRoaXMucGFyc2VyID0gcGFyc2VyO1xuICAgICAgICB0aGlzLm9ic2VydmVyTG9jYXRvciA9IG9ic2VydmVyTG9jYXRvcjtcbiAgICB9XG4gICAgcmVuZGVyKGZsYWdzLCBjb250ZXh0LCBjb250cm9sbGVyLCB0YXJnZXQsIGluc3RydWN0aW9uKSB7XG4gICAgICAgIGNvbnN0IGV4cHIgPSBlbnN1cmVFeHByZXNzaW9uKHRoaXMucGFyc2VyLCBpbnN0cnVjdGlvbi5mcm9tLCAxNTMgLyogQ2FsbENvbW1hbmQgKi8pO1xuICAgICAgICBjb25zdCBiaW5kaW5nID0gYXBwbHlCaW5kaW5nQmVoYXZpb3IobmV3IENhbGxCaW5kaW5nKGV4cHIsIGdldFRhcmdldCh0YXJnZXQpLCBpbnN0cnVjdGlvbi50bywgdGhpcy5vYnNlcnZlckxvY2F0b3IsIGNvbnRleHQpLCBleHByLCBjb250ZXh0KTtcbiAgICAgICAgY29udHJvbGxlci5hZGRCaW5kaW5nKGJpbmRpbmcpO1xuICAgIH1cbn07XG5DYWxsQmluZGluZ1JlbmRlcmVyID0gX19kZWNvcmF0ZShbXG4gICAgaW5zdHJ1Y3Rpb25SZW5kZXJlcihcInJoXCIgLyogY2FsbEJpbmRpbmcgKi8pXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgICxcbiAgICBfX3BhcmFtKDAsIElFeHByZXNzaW9uUGFyc2VyKSxcbiAgICBfX3BhcmFtKDEsIElPYnNlcnZlckxvY2F0b3IpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0LCBPYmplY3RdKVxuXSwgQ2FsbEJpbmRpbmdSZW5kZXJlcik7XG5leHBvcnQgeyBDYWxsQmluZGluZ1JlbmRlcmVyIH07XG5sZXQgUmVmQmluZGluZ1JlbmRlcmVyID0gXG4vKiogQGludGVybmFsICovXG5jbGFzcyBSZWZCaW5kaW5nUmVuZGVyZXIge1xuICAgIGNvbnN0cnVjdG9yKHBhcnNlcikge1xuICAgICAgICB0aGlzLnBhcnNlciA9IHBhcnNlcjtcbiAgICB9XG4gICAgcmVuZGVyKGZsYWdzLCBjb250ZXh0LCBjb250cm9sbGVyLCB0YXJnZXQsIGluc3RydWN0aW9uKSB7XG4gICAgICAgIGNvbnN0IGV4cHIgPSBlbnN1cmVFeHByZXNzaW9uKHRoaXMucGFyc2VyLCBpbnN0cnVjdGlvbi5mcm9tLCA1Mzc2IC8qIElzUmVmICovKTtcbiAgICAgICAgY29uc3QgYmluZGluZyA9IGFwcGx5QmluZGluZ0JlaGF2aW9yKG5ldyBSZWZCaW5kaW5nKGV4cHIsIGdldFJlZlRhcmdldCh0YXJnZXQsIGluc3RydWN0aW9uLnRvKSwgY29udGV4dCksIGV4cHIsIGNvbnRleHQpO1xuICAgICAgICBjb250cm9sbGVyLmFkZEJpbmRpbmcoYmluZGluZyk7XG4gICAgfVxufTtcblJlZkJpbmRpbmdSZW5kZXJlciA9IF9fZGVjb3JhdGUoW1xuICAgIGluc3RydWN0aW9uUmVuZGVyZXIoXCJyalwiIC8qIHJlZkJpbmRpbmcgKi8pXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgICxcbiAgICBfX3BhcmFtKDAsIElFeHByZXNzaW9uUGFyc2VyKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW09iamVjdF0pXG5dLCBSZWZCaW5kaW5nUmVuZGVyZXIpO1xuZXhwb3J0IHsgUmVmQmluZGluZ1JlbmRlcmVyIH07XG5sZXQgSW50ZXJwb2xhdGlvbkJpbmRpbmdSZW5kZXJlciA9IFxuLyoqIEBpbnRlcm5hbCAqL1xuY2xhc3MgSW50ZXJwb2xhdGlvbkJpbmRpbmdSZW5kZXJlciB7XG4gICAgY29uc3RydWN0b3IocGFyc2VyLCBvYnNlcnZlckxvY2F0b3IpIHtcbiAgICAgICAgdGhpcy5wYXJzZXIgPSBwYXJzZXI7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJMb2NhdG9yID0gb2JzZXJ2ZXJMb2NhdG9yO1xuICAgIH1cbiAgICByZW5kZXIoZmxhZ3MsIGNvbnRleHQsIGNvbnRyb2xsZXIsIHRhcmdldCwgaW5zdHJ1Y3Rpb24pIHtcbiAgICAgICAgbGV0IGJpbmRpbmc7XG4gICAgICAgIGNvbnN0IGV4cHIgPSBlbnN1cmVFeHByZXNzaW9uKHRoaXMucGFyc2VyLCBpbnN0cnVjdGlvbi5mcm9tLCAyMDQ4IC8qIEludGVycG9sYXRpb24gKi8pO1xuICAgICAgICBpZiAoZXhwci5pc011bHRpKSB7XG4gICAgICAgICAgICBiaW5kaW5nID0gYXBwbHlCaW5kaW5nQmVoYXZpb3IobmV3IE11bHRpSW50ZXJwb2xhdGlvbkJpbmRpbmcodGhpcy5vYnNlcnZlckxvY2F0b3IsIGV4cHIsIGdldFRhcmdldCh0YXJnZXQpLCBpbnN0cnVjdGlvbi50bywgQmluZGluZ01vZGUudG9WaWV3LCBjb250ZXh0KSwgZXhwciwgY29udGV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBiaW5kaW5nID0gYXBwbHlCaW5kaW5nQmVoYXZpb3IobmV3IEludGVycG9sYXRpb25CaW5kaW5nKGV4cHIuZmlyc3RFeHByZXNzaW9uLCBleHByLCBnZXRUYXJnZXQodGFyZ2V0KSwgaW5zdHJ1Y3Rpb24udG8sIEJpbmRpbmdNb2RlLnRvVmlldywgdGhpcy5vYnNlcnZlckxvY2F0b3IsIGNvbnRleHQsIHRydWUpLCBleHByLCBjb250ZXh0KTtcbiAgICAgICAgfVxuICAgICAgICBjb250cm9sbGVyLmFkZEJpbmRpbmcoYmluZGluZyk7XG4gICAgfVxufTtcbkludGVycG9sYXRpb25CaW5kaW5nUmVuZGVyZXIgPSBfX2RlY29yYXRlKFtcbiAgICBpbnN0cnVjdGlvblJlbmRlcmVyKFwicmZcIiAvKiBpbnRlcnBvbGF0aW9uICovKVxuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICAsXG4gICAgX19wYXJhbSgwLCBJRXhwcmVzc2lvblBhcnNlciksXG4gICAgX19wYXJhbSgxLCBJT2JzZXJ2ZXJMb2NhdG9yKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW09iamVjdCwgT2JqZWN0XSlcbl0sIEludGVycG9sYXRpb25CaW5kaW5nUmVuZGVyZXIpO1xuZXhwb3J0IHsgSW50ZXJwb2xhdGlvbkJpbmRpbmdSZW5kZXJlciB9O1xubGV0IFByb3BlcnR5QmluZGluZ1JlbmRlcmVyID0gXG4vKiogQGludGVybmFsICovXG5jbGFzcyBQcm9wZXJ0eUJpbmRpbmdSZW5kZXJlciB7XG4gICAgY29uc3RydWN0b3IocGFyc2VyLCBvYnNlcnZlckxvY2F0b3IpIHtcbiAgICAgICAgdGhpcy5wYXJzZXIgPSBwYXJzZXI7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJMb2NhdG9yID0gb2JzZXJ2ZXJMb2NhdG9yO1xuICAgIH1cbiAgICByZW5kZXIoZmxhZ3MsIGNvbnRleHQsIGNvbnRyb2xsZXIsIHRhcmdldCwgaW5zdHJ1Y3Rpb24pIHtcbiAgICAgICAgY29uc3QgZXhwciA9IGVuc3VyZUV4cHJlc3Npb24odGhpcy5wYXJzZXIsIGluc3RydWN0aW9uLmZyb20sIDQ4IC8qIElzUHJvcGVydHlDb21tYW5kICovIHwgaW5zdHJ1Y3Rpb24ubW9kZSk7XG4gICAgICAgIGNvbnN0IGJpbmRpbmcgPSBhcHBseUJpbmRpbmdCZWhhdmlvcihuZXcgUHJvcGVydHlCaW5kaW5nKGV4cHIsIGdldFRhcmdldCh0YXJnZXQpLCBpbnN0cnVjdGlvbi50bywgaW5zdHJ1Y3Rpb24ubW9kZSwgdGhpcy5vYnNlcnZlckxvY2F0b3IsIGNvbnRleHQpLCBleHByLCBjb250ZXh0KTtcbiAgICAgICAgY29udHJvbGxlci5hZGRCaW5kaW5nKGJpbmRpbmcpO1xuICAgIH1cbn07XG5Qcm9wZXJ0eUJpbmRpbmdSZW5kZXJlciA9IF9fZGVjb3JhdGUoW1xuICAgIGluc3RydWN0aW9uUmVuZGVyZXIoXCJyZ1wiIC8qIHByb3BlcnR5QmluZGluZyAqLylcbiAgICAvKiogQGludGVybmFsICovXG4gICAgLFxuICAgIF9fcGFyYW0oMCwgSUV4cHJlc3Npb25QYXJzZXIpLFxuICAgIF9fcGFyYW0oMSwgSU9ic2VydmVyTG9jYXRvciksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3QsIE9iamVjdF0pXG5dLCBQcm9wZXJ0eUJpbmRpbmdSZW5kZXJlcik7XG5leHBvcnQgeyBQcm9wZXJ0eUJpbmRpbmdSZW5kZXJlciB9O1xubGV0IEl0ZXJhdG9yQmluZGluZ1JlbmRlcmVyID0gXG4vKiogQGludGVybmFsICovXG5jbGFzcyBJdGVyYXRvckJpbmRpbmdSZW5kZXJlciB7XG4gICAgY29uc3RydWN0b3IocGFyc2VyLCBvYnNlcnZlckxvY2F0b3IpIHtcbiAgICAgICAgdGhpcy5wYXJzZXIgPSBwYXJzZXI7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJMb2NhdG9yID0gb2JzZXJ2ZXJMb2NhdG9yO1xuICAgIH1cbiAgICByZW5kZXIoZmxhZ3MsIGNvbnRleHQsIGNvbnRyb2xsZXIsIHRhcmdldCwgaW5zdHJ1Y3Rpb24pIHtcbiAgICAgICAgY29uc3QgZXhwciA9IGVuc3VyZUV4cHJlc3Npb24odGhpcy5wYXJzZXIsIGluc3RydWN0aW9uLmZyb20sIDUzOSAvKiBGb3JDb21tYW5kICovKTtcbiAgICAgICAgY29uc3QgYmluZGluZyA9IGFwcGx5QmluZGluZ0JlaGF2aW9yKG5ldyBQcm9wZXJ0eUJpbmRpbmcoZXhwciwgZ2V0VGFyZ2V0KHRhcmdldCksIGluc3RydWN0aW9uLnRvLCBCaW5kaW5nTW9kZS50b1ZpZXcsIHRoaXMub2JzZXJ2ZXJMb2NhdG9yLCBjb250ZXh0KSwgZXhwciwgY29udGV4dCk7XG4gICAgICAgIGNvbnRyb2xsZXIuYWRkQmluZGluZyhiaW5kaW5nKTtcbiAgICB9XG59O1xuSXRlcmF0b3JCaW5kaW5nUmVuZGVyZXIgPSBfX2RlY29yYXRlKFtcbiAgICBpbnN0cnVjdGlvblJlbmRlcmVyKFwicmtcIiAvKiBpdGVyYXRvckJpbmRpbmcgKi8pXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgICxcbiAgICBfX3BhcmFtKDAsIElFeHByZXNzaW9uUGFyc2VyKSxcbiAgICBfX3BhcmFtKDEsIElPYnNlcnZlckxvY2F0b3IpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0LCBPYmplY3RdKVxuXSwgSXRlcmF0b3JCaW5kaW5nUmVuZGVyZXIpO1xuZXhwb3J0IHsgSXRlcmF0b3JCaW5kaW5nUmVuZGVyZXIgfTtcbmxldCBiZWhhdmlvckV4cHJlc3Npb25JbmRleCA9IDA7XG5jb25zdCBiZWhhdmlvckV4cHJlc3Npb25zID0gW107XG5leHBvcnQgZnVuY3Rpb24gYXBwbHlCaW5kaW5nQmVoYXZpb3IoYmluZGluZywgZXhwcmVzc2lvbiwgbG9jYXRvcikge1xuICAgIHdoaWxlIChleHByZXNzaW9uIGluc3RhbmNlb2YgQmluZGluZ0JlaGF2aW9yRXhwcmVzc2lvbikge1xuICAgICAgICBiZWhhdmlvckV4cHJlc3Npb25zW2JlaGF2aW9yRXhwcmVzc2lvbkluZGV4KytdID0gZXhwcmVzc2lvbjtcbiAgICAgICAgZXhwcmVzc2lvbiA9IGV4cHJlc3Npb24uZXhwcmVzc2lvbjtcbiAgICB9XG4gICAgd2hpbGUgKGJlaGF2aW9yRXhwcmVzc2lvbkluZGV4ID4gMCkge1xuICAgICAgICBjb25zdCBiZWhhdmlvckV4cHJlc3Npb24gPSBiZWhhdmlvckV4cHJlc3Npb25zWy0tYmVoYXZpb3JFeHByZXNzaW9uSW5kZXhdO1xuICAgICAgICBjb25zdCBiZWhhdmlvck9yRmFjdG9yeSA9IGxvY2F0b3IuZ2V0KGJlaGF2aW9yRXhwcmVzc2lvbi5iZWhhdmlvcktleSk7XG4gICAgICAgIGlmIChiZWhhdmlvck9yRmFjdG9yeSBpbnN0YW5jZW9mIEJpbmRpbmdCZWhhdmlvckZhY3RvcnkpIHtcbiAgICAgICAgICAgIGJpbmRpbmcgPSBiZWhhdmlvck9yRmFjdG9yeS5jb25zdHJ1Y3QoYmluZGluZywgYmVoYXZpb3JFeHByZXNzaW9uKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBiZWhhdmlvckV4cHJlc3Npb25zLmxlbmd0aCA9IDA7XG4gICAgcmV0dXJuIGJpbmRpbmc7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZW5kZXJlci5qcy5tYXAiLCJpbXBvcnQgeyBfX2RlY29yYXRlLCBfX21ldGFkYXRhIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBSZWdpc3RyYXRpb24sIE1ldGFkYXRhLCBQcm90b2NvbCwgbWVyZ2VBcnJheXMsIGZpcnN0RGVmaW5lZCwgREksIGZyb21Bbm5vdGF0aW9uT3JEZWZpbml0aW9uT3JUeXBlT3JEZWZhdWx0LCB9IGZyb20gJ0BhdXJlbGlhL2tlcm5lbCc7XG5pbXBvcnQgeyByZWdpc3RlckFsaWFzZXMgfSBmcm9tICcuLi9kZWZpbml0aW9ucyc7XG5pbXBvcnQgeyBjb25uZWN0YWJsZSB9IGZyb20gJy4uL2JpbmRpbmcvY29ubmVjdGFibGUnO1xuZXhwb3J0IHZhciBCaW5kaW5nQmVoYXZpb3JTdHJhdGVneTtcbihmdW5jdGlvbiAoQmluZGluZ0JlaGF2aW9yU3RyYXRlZ3kpIHtcbiAgICBCaW5kaW5nQmVoYXZpb3JTdHJhdGVneVtCaW5kaW5nQmVoYXZpb3JTdHJhdGVneVtcInNpbmdsZXRvblwiXSA9IDFdID0gXCJzaW5nbGV0b25cIjtcbiAgICBCaW5kaW5nQmVoYXZpb3JTdHJhdGVneVtCaW5kaW5nQmVoYXZpb3JTdHJhdGVneVtcImludGVyY2VwdG9yXCJdID0gMl0gPSBcImludGVyY2VwdG9yXCI7XG59KShCaW5kaW5nQmVoYXZpb3JTdHJhdGVneSB8fCAoQmluZGluZ0JlaGF2aW9yU3RyYXRlZ3kgPSB7fSkpO1xuZXhwb3J0IGZ1bmN0aW9uIGJpbmRpbmdCZWhhdmlvcihuYW1lT3JEZWYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICByZXR1cm4gQmluZGluZ0JlaGF2aW9yLmRlZmluZShuYW1lT3JEZWYsIHRhcmdldCk7XG4gICAgfTtcbn1cbmV4cG9ydCBjbGFzcyBCaW5kaW5nQmVoYXZpb3JEZWZpbml0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihUeXBlLCBuYW1lLCBhbGlhc2VzLCBrZXksIHN0cmF0ZWd5KSB7XG4gICAgICAgIHRoaXMuVHlwZSA9IFR5cGU7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMuYWxpYXNlcyA9IGFsaWFzZXM7XG4gICAgICAgIHRoaXMua2V5ID0ga2V5O1xuICAgICAgICB0aGlzLnN0cmF0ZWd5ID0gc3RyYXRlZ3k7XG4gICAgfVxuICAgIHN0YXRpYyBjcmVhdGUobmFtZU9yRGVmLCBUeXBlKSB7XG4gICAgICAgIGxldCBuYW1lO1xuICAgICAgICBsZXQgZGVmO1xuICAgICAgICBpZiAodHlwZW9mIG5hbWVPckRlZiA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIG5hbWUgPSBuYW1lT3JEZWY7XG4gICAgICAgICAgICBkZWYgPSB7IG5hbWUgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG5hbWUgPSBuYW1lT3JEZWYubmFtZTtcbiAgICAgICAgICAgIGRlZiA9IG5hbWVPckRlZjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpbmhlcml0c0Zyb21JbnRlcmNlcHRvciA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihUeXBlKSA9PT0gQmluZGluZ0ludGVyY2VwdG9yO1xuICAgICAgICByZXR1cm4gbmV3IEJpbmRpbmdCZWhhdmlvckRlZmluaXRpb24oVHlwZSwgZmlyc3REZWZpbmVkKEJpbmRpbmdCZWhhdmlvci5nZXRBbm5vdGF0aW9uKFR5cGUsICduYW1lJyksIG5hbWUpLCBtZXJnZUFycmF5cyhCaW5kaW5nQmVoYXZpb3IuZ2V0QW5ub3RhdGlvbihUeXBlLCAnYWxpYXNlcycpLCBkZWYuYWxpYXNlcywgVHlwZS5hbGlhc2VzKSwgQmluZGluZ0JlaGF2aW9yLmtleUZyb20obmFtZSksIGZyb21Bbm5vdGF0aW9uT3JEZWZpbml0aW9uT3JUeXBlT3JEZWZhdWx0KCdzdHJhdGVneScsIGRlZiwgVHlwZSwgKCkgPT4gaW5oZXJpdHNGcm9tSW50ZXJjZXB0b3IgPyAyIC8qIGludGVyY2VwdG9yICovIDogMSAvKiBzaW5nbGV0b24gKi8pKTtcbiAgICB9XG4gICAgcmVnaXN0ZXIoY29udGFpbmVyKSB7XG4gICAgICAgIGNvbnN0IHsgVHlwZSwga2V5LCBhbGlhc2VzLCBzdHJhdGVneSB9ID0gdGhpcztcbiAgICAgICAgc3dpdGNoIChzdHJhdGVneSkge1xuICAgICAgICAgICAgY2FzZSAxIC8qIHNpbmdsZXRvbiAqLzpcbiAgICAgICAgICAgICAgICBSZWdpc3RyYXRpb24uc2luZ2xldG9uKGtleSwgVHlwZSkucmVnaXN0ZXIoY29udGFpbmVyKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMiAvKiBpbnRlcmNlcHRvciAqLzpcbiAgICAgICAgICAgICAgICBSZWdpc3RyYXRpb24uaW5zdGFuY2Uoa2V5LCBuZXcgQmluZGluZ0JlaGF2aW9yRmFjdG9yeShjb250YWluZXIsIFR5cGUpKS5yZWdpc3Rlcihjb250YWluZXIpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIFJlZ2lzdHJhdGlvbi5hbGlhc1RvKGtleSwgVHlwZSkucmVnaXN0ZXIoY29udGFpbmVyKTtcbiAgICAgICAgcmVnaXN0ZXJBbGlhc2VzKGFsaWFzZXMsIEJpbmRpbmdCZWhhdmlvciwga2V5LCBjb250YWluZXIpO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBCaW5kaW5nQmVoYXZpb3JGYWN0b3J5IHtcbiAgICBjb25zdHJ1Y3Rvcihjb250YWluZXIsIFR5cGUpIHtcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgICAgIHRoaXMuVHlwZSA9IFR5cGU7XG4gICAgICAgIHRoaXMuZGVwcyA9IERJLmdldERlcGVuZGVuY2llcyhUeXBlKTtcbiAgICB9XG4gICAgY29uc3RydWN0KGJpbmRpbmcsIGV4cHIpIHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5jb250YWluZXI7XG4gICAgICAgIGNvbnN0IGRlcHMgPSB0aGlzLmRlcHM7XG4gICAgICAgIHN3aXRjaCAoZGVwcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IHRoaXMuVHlwZShiaW5kaW5nLCBleHByKTtcbiAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IHRoaXMuVHlwZShjb250YWluZXIuZ2V0KGRlcHNbMF0pLCBiaW5kaW5nLCBleHByKTtcbiAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IHRoaXMuVHlwZShjb250YWluZXIuZ2V0KGRlcHNbMF0pLCBjb250YWluZXIuZ2V0KGRlcHNbMV0pLCBiaW5kaW5nLCBleHByKTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyB0aGlzLlR5cGUoLi4uZGVwcy5tYXAoZCA9PiBjb250YWluZXIuZ2V0KGQpKSwgYmluZGluZywgZXhwcik7XG4gICAgICAgIH1cbiAgICB9XG59XG5sZXQgQmluZGluZ0ludGVyY2VwdG9yID0gY2xhc3MgQmluZGluZ0ludGVyY2VwdG9yIHtcbiAgICBjb25zdHJ1Y3RvcihiaW5kaW5nLCBleHByKSB7XG4gICAgICAgIHRoaXMuYmluZGluZyA9IGJpbmRpbmc7XG4gICAgICAgIHRoaXMuZXhwciA9IGV4cHI7XG4gICAgICAgIHRoaXMuaW50ZXJjZXB0b3IgPSB0aGlzO1xuICAgICAgICBsZXQgaW50ZXJjZXB0b3I7XG4gICAgICAgIHdoaWxlIChiaW5kaW5nLmludGVyY2VwdG9yICE9PSB0aGlzKSB7XG4gICAgICAgICAgICBpbnRlcmNlcHRvciA9IGJpbmRpbmcuaW50ZXJjZXB0b3I7XG4gICAgICAgICAgICBiaW5kaW5nLmludGVyY2VwdG9yID0gdGhpcztcbiAgICAgICAgICAgIGJpbmRpbmcgPSBpbnRlcmNlcHRvcjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJpbmRpbmcuaWQ7XG4gICAgfVxuICAgIGdldCBvYnNlcnZlckxvY2F0b3IoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJpbmRpbmcub2JzZXJ2ZXJMb2NhdG9yO1xuICAgIH1cbiAgICBnZXQgbG9jYXRvcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmluZGluZy5sb2NhdG9yO1xuICAgIH1cbiAgICBnZXQgJHNjb3BlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5iaW5kaW5nLiRzY29wZTtcbiAgICB9XG4gICAgZ2V0IHBhcnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJpbmRpbmcucGFydDtcbiAgICB9XG4gICAgZ2V0ICRzdGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmluZGluZy4kc3RhdGU7XG4gICAgfVxuICAgIHVwZGF0ZVRhcmdldCh2YWx1ZSwgZmxhZ3MpIHtcbiAgICAgICAgdGhpcy5iaW5kaW5nLnVwZGF0ZVRhcmdldCh2YWx1ZSwgZmxhZ3MpO1xuICAgIH1cbiAgICB1cGRhdGVTb3VyY2UodmFsdWUsIGZsYWdzKSB7XG4gICAgICAgIHRoaXMuYmluZGluZy51cGRhdGVTb3VyY2UodmFsdWUsIGZsYWdzKTtcbiAgICB9XG4gICAgY2FsbFNvdXJjZShhcmdzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJpbmRpbmcuY2FsbFNvdXJjZShhcmdzKTtcbiAgICB9XG4gICAgaGFuZGxlQ2hhbmdlKG5ld1ZhbHVlLCBwcmV2aW91c1ZhbHVlLCBmbGFncykge1xuICAgICAgICB0aGlzLmJpbmRpbmcuaGFuZGxlQ2hhbmdlKG5ld1ZhbHVlLCBwcmV2aW91c1ZhbHVlLCBmbGFncyk7XG4gICAgfVxuICAgICRiaW5kKGZsYWdzLCBzY29wZSwgcGFydCkge1xuICAgICAgICB0aGlzLmJpbmRpbmcuJGJpbmQoZmxhZ3MsIHNjb3BlLCBwYXJ0KTtcbiAgICB9XG4gICAgJHVuYmluZChmbGFncykge1xuICAgICAgICB0aGlzLmJpbmRpbmcuJHVuYmluZChmbGFncyk7XG4gICAgfVxufTtcbkJpbmRpbmdJbnRlcmNlcHRvciA9IF9fZGVjb3JhdGUoW1xuICAgIGNvbm5lY3RhYmxlLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0LCBPYmplY3RdKVxuXSwgQmluZGluZ0ludGVyY2VwdG9yKTtcbmV4cG9ydCB7IEJpbmRpbmdJbnRlcmNlcHRvciB9O1xuZXhwb3J0IGNvbnN0IEJpbmRpbmdCZWhhdmlvciA9IHtcbiAgICBuYW1lOiBQcm90b2NvbC5yZXNvdXJjZS5rZXlGb3IoJ2JpbmRpbmctYmVoYXZpb3InKSxcbiAgICBrZXlGcm9tKG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIGAke0JpbmRpbmdCZWhhdmlvci5uYW1lfToke25hbWV9YDtcbiAgICB9LFxuICAgIGlzVHlwZSh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nICYmIE1ldGFkYXRhLmhhc093bihCaW5kaW5nQmVoYXZpb3IubmFtZSwgdmFsdWUpO1xuICAgIH0sXG4gICAgZGVmaW5lKG5hbWVPckRlZiwgVHlwZSkge1xuICAgICAgICBjb25zdCBkZWZpbml0aW9uID0gQmluZGluZ0JlaGF2aW9yRGVmaW5pdGlvbi5jcmVhdGUobmFtZU9yRGVmLCBUeXBlKTtcbiAgICAgICAgTWV0YWRhdGEuZGVmaW5lKEJpbmRpbmdCZWhhdmlvci5uYW1lLCBkZWZpbml0aW9uLCBkZWZpbml0aW9uLlR5cGUpO1xuICAgICAgICBNZXRhZGF0YS5kZWZpbmUoQmluZGluZ0JlaGF2aW9yLm5hbWUsIGRlZmluaXRpb24sIGRlZmluaXRpb24pO1xuICAgICAgICBQcm90b2NvbC5yZXNvdXJjZS5hcHBlbmRUbyhUeXBlLCBCaW5kaW5nQmVoYXZpb3IubmFtZSk7XG4gICAgICAgIHJldHVybiBkZWZpbml0aW9uLlR5cGU7XG4gICAgfSxcbiAgICBnZXREZWZpbml0aW9uKFR5cGUpIHtcbiAgICAgICAgY29uc3QgZGVmID0gTWV0YWRhdGEuZ2V0T3duKEJpbmRpbmdCZWhhdmlvci5uYW1lLCBUeXBlKTtcbiAgICAgICAgaWYgKGRlZiA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE5vIGRlZmluaXRpb24gZm91bmQgZm9yIHR5cGUgJHtUeXBlLm5hbWV9YCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRlZjtcbiAgICB9LFxuICAgIGFubm90YXRlKFR5cGUsIHByb3AsIHZhbHVlKSB7XG4gICAgICAgIE1ldGFkYXRhLmRlZmluZShQcm90b2NvbC5hbm5vdGF0aW9uLmtleUZvcihwcm9wKSwgdmFsdWUsIFR5cGUpO1xuICAgIH0sXG4gICAgZ2V0QW5ub3RhdGlvbihUeXBlLCBwcm9wKSB7XG4gICAgICAgIHJldHVybiBNZXRhZGF0YS5nZXRPd24oUHJvdG9jb2wuYW5ub3RhdGlvbi5rZXlGb3IocHJvcCksIFR5cGUpO1xuICAgIH0sXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YmluZGluZy1iZWhhdmlvci5qcy5tYXAiLCJpbXBvcnQgeyBfX2RlY29yYXRlLCBfX21ldGFkYXRhIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBCaW5kaW5nTW9kZSB9IGZyb20gJy4uLy4uL2ZsYWdzJztcbmltcG9ydCB7IGJpbmRpbmdCZWhhdmlvciB9IGZyb20gJy4uL2JpbmRpbmctYmVoYXZpb3InO1xuZXhwb3J0IGNsYXNzIEJpbmRpbmdNb2RlQmVoYXZpb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1vZGUpIHtcbiAgICAgICAgdGhpcy5tb2RlID0gbW9kZTtcbiAgICAgICAgdGhpcy5vcmlnaW5hbE1vZGVzID0gbmV3IFdlYWtNYXAoKTtcbiAgICB9XG4gICAgYmluZChmbGFncywgc2NvcGUsIGJpbmRpbmcpIHtcbiAgICAgICAgdGhpcy5vcmlnaW5hbE1vZGVzLnNldChiaW5kaW5nLCBiaW5kaW5nLm1vZGUpO1xuICAgICAgICBiaW5kaW5nLm1vZGUgPSB0aGlzLm1vZGU7XG4gICAgfVxuICAgIHVuYmluZChmbGFncywgc2NvcGUsIGJpbmRpbmcpIHtcbiAgICAgICAgYmluZGluZy5tb2RlID0gdGhpcy5vcmlnaW5hbE1vZGVzLmdldChiaW5kaW5nKTtcbiAgICB9XG59XG5sZXQgT25lVGltZUJpbmRpbmdCZWhhdmlvciA9IGNsYXNzIE9uZVRpbWVCaW5kaW5nQmVoYXZpb3IgZXh0ZW5kcyBCaW5kaW5nTW9kZUJlaGF2aW9yIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoQmluZGluZ01vZGUub25lVGltZSk7XG4gICAgfVxufTtcbk9uZVRpbWVCaW5kaW5nQmVoYXZpb3IgPSBfX2RlY29yYXRlKFtcbiAgICBiaW5kaW5nQmVoYXZpb3IoJ29uZVRpbWUnKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG5dLCBPbmVUaW1lQmluZGluZ0JlaGF2aW9yKTtcbmV4cG9ydCB7IE9uZVRpbWVCaW5kaW5nQmVoYXZpb3IgfTtcbmxldCBUb1ZpZXdCaW5kaW5nQmVoYXZpb3IgPSBjbGFzcyBUb1ZpZXdCaW5kaW5nQmVoYXZpb3IgZXh0ZW5kcyBCaW5kaW5nTW9kZUJlaGF2aW9yIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoQmluZGluZ01vZGUudG9WaWV3KTtcbiAgICB9XG59O1xuVG9WaWV3QmluZGluZ0JlaGF2aW9yID0gX19kZWNvcmF0ZShbXG4gICAgYmluZGluZ0JlaGF2aW9yKCd0b1ZpZXcnKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW10pXG5dLCBUb1ZpZXdCaW5kaW5nQmVoYXZpb3IpO1xuZXhwb3J0IHsgVG9WaWV3QmluZGluZ0JlaGF2aW9yIH07XG5sZXQgRnJvbVZpZXdCaW5kaW5nQmVoYXZpb3IgPSBjbGFzcyBGcm9tVmlld0JpbmRpbmdCZWhhdmlvciBleHRlbmRzIEJpbmRpbmdNb2RlQmVoYXZpb3Ige1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcihCaW5kaW5nTW9kZS5mcm9tVmlldyk7XG4gICAgfVxufTtcbkZyb21WaWV3QmluZGluZ0JlaGF2aW9yID0gX19kZWNvcmF0ZShbXG4gICAgYmluZGluZ0JlaGF2aW9yKCdmcm9tVmlldycpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbXSlcbl0sIEZyb21WaWV3QmluZGluZ0JlaGF2aW9yKTtcbmV4cG9ydCB7IEZyb21WaWV3QmluZGluZ0JlaGF2aW9yIH07XG5sZXQgVHdvV2F5QmluZGluZ0JlaGF2aW9yID0gY2xhc3MgVHdvV2F5QmluZGluZ0JlaGF2aW9yIGV4dGVuZHMgQmluZGluZ01vZGVCZWhhdmlvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKEJpbmRpbmdNb2RlLnR3b1dheSk7XG4gICAgfVxufTtcblR3b1dheUJpbmRpbmdCZWhhdmlvciA9IF9fZGVjb3JhdGUoW1xuICAgIGJpbmRpbmdCZWhhdmlvcigndHdvV2F5JyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtdKVxuXSwgVHdvV2F5QmluZGluZ0JlaGF2aW9yKTtcbmV4cG9ydCB7IFR3b1dheUJpbmRpbmdCZWhhdmlvciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YmluZGluZy1tb2RlLmpzLm1hcCIsImltcG9ydCB7IF9fZGVjb3JhdGUsIF9fbWV0YWRhdGEgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IGJpbmRpbmdCZWhhdmlvciwgQmluZGluZ0ludGVyY2VwdG9yIH0gZnJvbSAnLi4vYmluZGluZy1iZWhhdmlvcic7XG5pbXBvcnQgeyBJU2NoZWR1bGVyIH0gZnJvbSAnQGF1cmVsaWEvc2NoZWR1bGVyJztcbmltcG9ydCB7IEJpbmRpbmdCZWhhdmlvckV4cHJlc3Npb24gfSBmcm9tICcuLi8uLi9iaW5kaW5nL2FzdCc7XG5sZXQgRGVib3VuY2VCaW5kaW5nQmVoYXZpb3IgPSBjbGFzcyBEZWJvdW5jZUJpbmRpbmdCZWhhdmlvciBleHRlbmRzIEJpbmRpbmdJbnRlcmNlcHRvciB7XG4gICAgY29uc3RydWN0b3IoYmluZGluZywgZXhwcikge1xuICAgICAgICBzdXBlcihiaW5kaW5nLCBleHByKTtcbiAgICAgICAgdGhpcy5vcHRzID0geyBkZWxheTogMCB9O1xuICAgICAgICB0aGlzLmZpcnN0QXJnID0gbnVsbDtcbiAgICAgICAgdGhpcy50YXNrID0gbnVsbDtcbiAgICAgICAgdGhpcy50YXNrUXVldWUgPSBiaW5kaW5nLmxvY2F0b3IuZ2V0KElTY2hlZHVsZXIpLmdldFBvc3RSZW5kZXJUYXNrUXVldWUoKTtcbiAgICAgICAgaWYgKGV4cHIuYXJncy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB0aGlzLmZpcnN0QXJnID0gZXhwci5hcmdzWzBdO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNhbGxTb3VyY2UoYXJncykge1xuICAgICAgICB0aGlzLnF1ZXVlVGFzaygoKSA9PiB0aGlzLmJpbmRpbmcuY2FsbFNvdXJjZShhcmdzKSk7XG4gICAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgfVxuICAgIGhhbmRsZUNoYW5nZShuZXdWYWx1ZSwgcHJldmlvdXNWYWx1ZSwgZmxhZ3MpIHtcbiAgICAgICAgdGhpcy5xdWV1ZVRhc2soKCkgPT4gdGhpcy5iaW5kaW5nLmhhbmRsZUNoYW5nZShuZXdWYWx1ZSwgcHJldmlvdXNWYWx1ZSwgZmxhZ3MpKTtcbiAgICB9XG4gICAgcXVldWVUYXNrKGNhbGxiYWNrKSB7XG4gICAgICAgIGlmICh0aGlzLnRhc2sgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMudGFzay5jYW5jZWwoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRhc2sgPSB0aGlzLnRhc2tRdWV1ZS5xdWV1ZVRhc2soY2FsbGJhY2ssIHRoaXMub3B0cyk7XG4gICAgfVxuICAgICRiaW5kKGZsYWdzLCBzY29wZSwgcGFydCkge1xuICAgICAgICBpZiAodGhpcy5maXJzdEFyZyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgY29uc3QgZGVsYXkgPSBOdW1iZXIodGhpcy5maXJzdEFyZy5ldmFsdWF0ZShmbGFncywgc2NvcGUsIHRoaXMubG9jYXRvciwgcGFydCkpO1xuICAgICAgICAgICAgaWYgKCFpc05hTihkZWxheSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9wdHMuZGVsYXkgPSBkZWxheTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmJpbmRpbmcuJGJpbmQoZmxhZ3MsIHNjb3BlLCBwYXJ0KTtcbiAgICB9XG59O1xuRGVib3VuY2VCaW5kaW5nQmVoYXZpb3IgPSBfX2RlY29yYXRlKFtcbiAgICBiaW5kaW5nQmVoYXZpb3IoJ2RlYm91bmNlJyksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3QsIEJpbmRpbmdCZWhhdmlvckV4cHJlc3Npb25dKVxuXSwgRGVib3VuY2VCaW5kaW5nQmVoYXZpb3IpO1xuZXhwb3J0IHsgRGVib3VuY2VCaW5kaW5nQmVoYXZpb3IgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlYm91bmNlLmpzLm1hcCIsImltcG9ydCB7IF9fZGVjb3JhdGUsIF9fbWV0YWRhdGEsIF9fcGFyYW0gfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IFJlcG9ydGVyIH0gZnJvbSAnQGF1cmVsaWEva2VybmVsJztcbmltcG9ydCB7IElTaWduYWxlciB9IGZyb20gJy4uLy4uL29ic2VydmF0aW9uL3NpZ25hbGVyJztcbmltcG9ydCB7IGJpbmRpbmdCZWhhdmlvciB9IGZyb20gJy4uL2JpbmRpbmctYmVoYXZpb3InO1xubGV0IFNpZ25hbEJpbmRpbmdCZWhhdmlvciA9IGNsYXNzIFNpZ25hbEJpbmRpbmdCZWhhdmlvciB7XG4gICAgY29uc3RydWN0b3Ioc2lnbmFsZXIpIHtcbiAgICAgICAgdGhpcy5zaWduYWxlciA9IHNpZ25hbGVyO1xuICAgIH1cbiAgICBiaW5kKGZsYWdzLCBzY29wZSwgYmluZGluZywgLi4uYXJncykge1xuICAgICAgICBpZiAoIWJpbmRpbmcudXBkYXRlVGFyZ2V0KSB7XG4gICAgICAgICAgICB0aHJvdyBSZXBvcnRlci5lcnJvcigxMSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDQpIHtcbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBhcmdzWzBdO1xuICAgICAgICAgICAgdGhpcy5zaWduYWxlci5hZGRTaWduYWxMaXN0ZW5lcihuYW1lLCBiaW5kaW5nKTtcbiAgICAgICAgICAgIGJpbmRpbmcuc2lnbmFsID0gbmFtZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChhcmd1bWVudHMubGVuZ3RoID4gNCkge1xuICAgICAgICAgICAgY29uc3QgbmFtZXMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmdzLmxlbmd0aCArIDMsIDMpO1xuICAgICAgICAgICAgbGV0IGkgPSBuYW1lcy5sZW5ndGg7XG4gICAgICAgICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IG5hbWVzW2ldO1xuICAgICAgICAgICAgICAgIHRoaXMuc2lnbmFsZXIuYWRkU2lnbmFsTGlzdGVuZXIobmFtZSwgYmluZGluZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBiaW5kaW5nLnNpZ25hbCA9IG5hbWVzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgUmVwb3J0ZXIuZXJyb3IoMTIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHVuYmluZChmbGFncywgc2NvcGUsIGJpbmRpbmcpIHtcbiAgICAgICAgY29uc3QgbmFtZSA9IGJpbmRpbmcuc2lnbmFsO1xuICAgICAgICBiaW5kaW5nLnNpZ25hbCA9IG51bGw7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5hbWUpKSB7XG4gICAgICAgICAgICBjb25zdCBuYW1lcyA9IG5hbWU7XG4gICAgICAgICAgICBsZXQgaSA9IG5hbWVzLmxlbmd0aDtcbiAgICAgICAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNpZ25hbGVyLnJlbW92ZVNpZ25hbExpc3RlbmVyKG5hbWVzW2ldLCBiaW5kaW5nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2lnbmFsZXIucmVtb3ZlU2lnbmFsTGlzdGVuZXIobmFtZSwgYmluZGluZyk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuU2lnbmFsQmluZGluZ0JlaGF2aW9yID0gX19kZWNvcmF0ZShbXG4gICAgYmluZGluZ0JlaGF2aW9yKCdzaWduYWwnKSxcbiAgICBfX3BhcmFtKDAsIElTaWduYWxlciksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3RdKVxuXSwgU2lnbmFsQmluZGluZ0JlaGF2aW9yKTtcbmV4cG9ydCB7IFNpZ25hbEJpbmRpbmdCZWhhdmlvciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2lnbmFscy5qcy5tYXAiLCJpbXBvcnQgeyBfX2RlY29yYXRlLCBfX21ldGFkYXRhIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBiaW5kaW5nQmVoYXZpb3IsIEJpbmRpbmdJbnRlcmNlcHRvciB9IGZyb20gJy4uL2JpbmRpbmctYmVoYXZpb3InO1xuaW1wb3J0IHsgSVNjaGVkdWxlciwgTm93IH0gZnJvbSAnQGF1cmVsaWEvc2NoZWR1bGVyJztcbmltcG9ydCB7IEJpbmRpbmdCZWhhdmlvckV4cHJlc3Npb24gfSBmcm9tICcuLi8uLi9iaW5kaW5nL2FzdCc7XG5sZXQgVGhyb3R0bGVCaW5kaW5nQmVoYXZpb3IgPSBjbGFzcyBUaHJvdHRsZUJpbmRpbmdCZWhhdmlvciBleHRlbmRzIEJpbmRpbmdJbnRlcmNlcHRvciB7XG4gICAgY29uc3RydWN0b3IoYmluZGluZywgZXhwcikge1xuICAgICAgICBzdXBlcihiaW5kaW5nLCBleHByKTtcbiAgICAgICAgdGhpcy5vcHRzID0geyBkZWxheTogMCB9O1xuICAgICAgICB0aGlzLmZpcnN0QXJnID0gbnVsbDtcbiAgICAgICAgdGhpcy50YXNrID0gbnVsbDtcbiAgICAgICAgdGhpcy5sYXN0Q2FsbCA9IDA7XG4gICAgICAgIHRoaXMudGFza1F1ZXVlID0gYmluZGluZy5sb2NhdG9yLmdldChJU2NoZWR1bGVyKS5nZXRQb3N0UmVuZGVyVGFza1F1ZXVlKCk7XG4gICAgICAgIHRoaXMubm93ID0gYmluZGluZy5sb2NhdG9yLmdldChOb3cpO1xuICAgICAgICBpZiAoZXhwci5hcmdzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuZmlyc3RBcmcgPSBleHByLmFyZ3NbMF07XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2FsbFNvdXJjZShhcmdzKSB7XG4gICAgICAgIHRoaXMucXVldWVUYXNrKCgpID0+IHRoaXMuYmluZGluZy5jYWxsU291cmNlKGFyZ3MpKTtcbiAgICAgICAgcmV0dXJuIHZvaWQgMDtcbiAgICB9XG4gICAgaGFuZGxlQ2hhbmdlKG5ld1ZhbHVlLCBwcmV2aW91c1ZhbHVlLCBmbGFncykge1xuICAgICAgICB0aGlzLnF1ZXVlVGFzaygoKSA9PiB0aGlzLmJpbmRpbmcuaGFuZGxlQ2hhbmdlKG5ld1ZhbHVlLCBwcmV2aW91c1ZhbHVlLCBmbGFncykpO1xuICAgIH1cbiAgICBxdWV1ZVRhc2soY2FsbGJhY2spIHtcbiAgICAgICAgY29uc3Qgb3B0cyA9IHRoaXMub3B0cztcbiAgICAgICAgY29uc3Qgbm93ID0gdGhpcy5ub3c7XG4gICAgICAgIGNvbnN0IG5leHREZWxheSA9IHRoaXMubGFzdENhbGwgKyBvcHRzLmRlbGF5IC0gbm93KCk7XG4gICAgICAgIGlmIChuZXh0RGVsYXkgPiAwKSB7XG4gICAgICAgICAgICBpZiAodGhpcy50YXNrICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50YXNrLmNhbmNlbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3B0cy5kZWxheSA9IG5leHREZWxheTtcbiAgICAgICAgICAgIHRoaXMudGFzayA9IHRoaXMudGFza1F1ZXVlLnF1ZXVlVGFzaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0Q2FsbCA9IG5vdygpO1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICB9LCBvcHRzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubGFzdENhbGwgPSBub3coKTtcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgJGJpbmQoZmxhZ3MsIHNjb3BlLCBwYXJ0KSB7XG4gICAgICAgIGlmICh0aGlzLmZpcnN0QXJnICE9PSBudWxsKSB7XG4gICAgICAgICAgICBjb25zdCBkZWxheSA9IE51bWJlcih0aGlzLmZpcnN0QXJnLmV2YWx1YXRlKGZsYWdzLCBzY29wZSwgdGhpcy5sb2NhdG9yLCBwYXJ0KSk7XG4gICAgICAgICAgICBpZiAoIWlzTmFOKGRlbGF5KSkge1xuICAgICAgICAgICAgICAgIHRoaXMub3B0cy5kZWxheSA9IGRlbGF5O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuYmluZGluZy4kYmluZChmbGFncywgc2NvcGUsIHBhcnQpO1xuICAgIH1cbn07XG5UaHJvdHRsZUJpbmRpbmdCZWhhdmlvciA9IF9fZGVjb3JhdGUoW1xuICAgIGJpbmRpbmdCZWhhdmlvcigndGhyb3R0bGUnKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW09iamVjdCwgQmluZGluZ0JlaGF2aW9yRXhwcmVzc2lvbl0pXG5dLCBUaHJvdHRsZUJpbmRpbmdCZWhhdmlvcik7XG5leHBvcnQgeyBUaHJvdHRsZUJpbmRpbmdCZWhhdmlvciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGhyb3R0bGUuanMubWFwIiwiaW1wb3J0IHsgUmVnaXN0cmF0aW9uLCBQcm90b2NvbCwgTWV0YWRhdGEsIG1lcmdlQXJyYXlzLCBmaXJzdERlZmluZWQsIH0gZnJvbSAnQGF1cmVsaWEva2VybmVsJztcbmltcG9ydCB7IEhvb2tzRGVmaW5pdGlvbiwgcmVnaXN0ZXJBbGlhc2VzLCB9IGZyb20gJy4uL2RlZmluaXRpb25zJztcbmltcG9ydCB7IEJpbmRpbmdNb2RlLCB9IGZyb20gJy4uL2ZsYWdzJztcbmltcG9ydCB7IEJpbmRhYmxlIH0gZnJvbSAnLi4vdGVtcGxhdGluZy9iaW5kYWJsZSc7XG5leHBvcnQgZnVuY3Rpb24gY3VzdG9tQXR0cmlidXRlKG5hbWVPckRlZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgICAgIHJldHVybiBDdXN0b21BdHRyaWJ1dGUuZGVmaW5lKG5hbWVPckRlZiwgdGFyZ2V0KTtcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIHRlbXBsYXRlQ29udHJvbGxlcihuYW1lT3JEZWYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICByZXR1cm4gQ3VzdG9tQXR0cmlidXRlLmRlZmluZSh0eXBlb2YgbmFtZU9yRGVmID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgPyB7IGlzVGVtcGxhdGVDb250cm9sbGVyOiB0cnVlLCBuYW1lOiBuYW1lT3JEZWYgfVxuICAgICAgICAgICAgOiB7IGlzVGVtcGxhdGVDb250cm9sbGVyOiB0cnVlLCAuLi5uYW1lT3JEZWYgfSwgdGFyZ2V0KTtcbiAgICB9O1xufVxuZXhwb3J0IGNsYXNzIEN1c3RvbUF0dHJpYnV0ZURlZmluaXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKFR5cGUsIG5hbWUsIGFsaWFzZXMsIGtleSwgZGVmYXVsdEJpbmRpbmdNb2RlLCBpc1RlbXBsYXRlQ29udHJvbGxlciwgYmluZGFibGVzLCBzdHJhdGVneSwgaG9va3MsIG5vTXVsdGlCaW5kaW5ncykge1xuICAgICAgICB0aGlzLlR5cGUgPSBUeXBlO1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLmFsaWFzZXMgPSBhbGlhc2VzO1xuICAgICAgICB0aGlzLmtleSA9IGtleTtcbiAgICAgICAgdGhpcy5kZWZhdWx0QmluZGluZ01vZGUgPSBkZWZhdWx0QmluZGluZ01vZGU7XG4gICAgICAgIHRoaXMuaXNUZW1wbGF0ZUNvbnRyb2xsZXIgPSBpc1RlbXBsYXRlQ29udHJvbGxlcjtcbiAgICAgICAgdGhpcy5iaW5kYWJsZXMgPSBiaW5kYWJsZXM7XG4gICAgICAgIHRoaXMuc3RyYXRlZ3kgPSBzdHJhdGVneTtcbiAgICAgICAgdGhpcy5ob29rcyA9IGhvb2tzO1xuICAgICAgICB0aGlzLm5vTXVsdGlCaW5kaW5ncyA9IG5vTXVsdGlCaW5kaW5ncztcbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZShuYW1lT3JEZWYsIFR5cGUpIHtcbiAgICAgICAgbGV0IG5hbWU7XG4gICAgICAgIGxldCBkZWY7XG4gICAgICAgIGlmICh0eXBlb2YgbmFtZU9yRGVmID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgbmFtZSA9IG5hbWVPckRlZjtcbiAgICAgICAgICAgIGRlZiA9IHsgbmFtZSB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbmFtZSA9IG5hbWVPckRlZi5uYW1lO1xuICAgICAgICAgICAgZGVmID0gbmFtZU9yRGVmO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgQ3VzdG9tQXR0cmlidXRlRGVmaW5pdGlvbihUeXBlLCBmaXJzdERlZmluZWQoQ3VzdG9tQXR0cmlidXRlLmdldEFubm90YXRpb24oVHlwZSwgJ25hbWUnKSwgbmFtZSksIG1lcmdlQXJyYXlzKEN1c3RvbUF0dHJpYnV0ZS5nZXRBbm5vdGF0aW9uKFR5cGUsICdhbGlhc2VzJyksIGRlZi5hbGlhc2VzLCBUeXBlLmFsaWFzZXMpLCBDdXN0b21BdHRyaWJ1dGUua2V5RnJvbShuYW1lKSwgZmlyc3REZWZpbmVkKEN1c3RvbUF0dHJpYnV0ZS5nZXRBbm5vdGF0aW9uKFR5cGUsICdkZWZhdWx0QmluZGluZ01vZGUnKSwgZGVmLmRlZmF1bHRCaW5kaW5nTW9kZSwgVHlwZS5kZWZhdWx0QmluZGluZ01vZGUsIEJpbmRpbmdNb2RlLnRvVmlldyksIGZpcnN0RGVmaW5lZChDdXN0b21BdHRyaWJ1dGUuZ2V0QW5ub3RhdGlvbihUeXBlLCAnaXNUZW1wbGF0ZUNvbnRyb2xsZXInKSwgZGVmLmlzVGVtcGxhdGVDb250cm9sbGVyLCBUeXBlLmlzVGVtcGxhdGVDb250cm9sbGVyLCBmYWxzZSksIEJpbmRhYmxlLmZyb20oLi4uQmluZGFibGUuZ2V0QWxsKFR5cGUpLCBDdXN0b21BdHRyaWJ1dGUuZ2V0QW5ub3RhdGlvbihUeXBlLCAnYmluZGFibGVzJyksIFR5cGUuYmluZGFibGVzLCBkZWYuYmluZGFibGVzKSwgZmlyc3REZWZpbmVkKEN1c3RvbUF0dHJpYnV0ZS5nZXRBbm5vdGF0aW9uKFR5cGUsICdzdHJhdGVneScpLCBkZWYuc3RyYXRlZ3ksIFR5cGUuc3RyYXRlZ3ksIDEgLyogZ2V0dGVyU2V0dGVyICovKSwgZmlyc3REZWZpbmVkKEN1c3RvbUF0dHJpYnV0ZS5nZXRBbm5vdGF0aW9uKFR5cGUsICdob29rcycpLCBkZWYuaG9va3MsIFR5cGUuaG9va3MsIG5ldyBIb29rc0RlZmluaXRpb24oVHlwZS5wcm90b3R5cGUpKSwgZmlyc3REZWZpbmVkKEN1c3RvbUF0dHJpYnV0ZS5nZXRBbm5vdGF0aW9uKFR5cGUsICdub011bHRpQmluZGluZ3MnKSwgZGVmLm5vTXVsdGlCaW5kaW5ncywgVHlwZS5ub011bHRpQmluZGluZ3MsIGZhbHNlKSk7XG4gICAgfVxuICAgIHJlZ2lzdGVyKGNvbnRhaW5lcikge1xuICAgICAgICBjb25zdCB7IFR5cGUsIGtleSwgYWxpYXNlcyB9ID0gdGhpcztcbiAgICAgICAgUmVnaXN0cmF0aW9uLnRyYW5zaWVudChrZXksIFR5cGUpLnJlZ2lzdGVyKGNvbnRhaW5lcik7XG4gICAgICAgIFJlZ2lzdHJhdGlvbi5hbGlhc1RvKGtleSwgVHlwZSkucmVnaXN0ZXIoY29udGFpbmVyKTtcbiAgICAgICAgcmVnaXN0ZXJBbGlhc2VzKGFsaWFzZXMsIEN1c3RvbUF0dHJpYnV0ZSwga2V5LCBjb250YWluZXIpO1xuICAgIH1cbn1cbmV4cG9ydCBjb25zdCBDdXN0b21BdHRyaWJ1dGUgPSB7XG4gICAgbmFtZTogUHJvdG9jb2wucmVzb3VyY2Uua2V5Rm9yKCdjdXN0b20tYXR0cmlidXRlJyksXG4gICAga2V5RnJvbShuYW1lKSB7XG4gICAgICAgIHJldHVybiBgJHtDdXN0b21BdHRyaWJ1dGUubmFtZX06JHtuYW1lfWA7XG4gICAgfSxcbiAgICBpc1R5cGUodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJyAmJiBNZXRhZGF0YS5oYXNPd24oQ3VzdG9tQXR0cmlidXRlLm5hbWUsIHZhbHVlKTtcbiAgICB9LFxuICAgIGZvcihub2RlLCBuYW1lKSB7XG4gICAgICAgIHJldHVybiBNZXRhZGF0YS5nZXRPd24oQ3VzdG9tQXR0cmlidXRlLmtleUZyb20obmFtZSksIG5vZGUpO1xuICAgIH0sXG4gICAgZGVmaW5lKG5hbWVPckRlZiwgVHlwZSkge1xuICAgICAgICBjb25zdCBkZWZpbml0aW9uID0gQ3VzdG9tQXR0cmlidXRlRGVmaW5pdGlvbi5jcmVhdGUobmFtZU9yRGVmLCBUeXBlKTtcbiAgICAgICAgTWV0YWRhdGEuZGVmaW5lKEN1c3RvbUF0dHJpYnV0ZS5uYW1lLCBkZWZpbml0aW9uLCBkZWZpbml0aW9uLlR5cGUpO1xuICAgICAgICBNZXRhZGF0YS5kZWZpbmUoQ3VzdG9tQXR0cmlidXRlLm5hbWUsIGRlZmluaXRpb24sIGRlZmluaXRpb24pO1xuICAgICAgICBQcm90b2NvbC5yZXNvdXJjZS5hcHBlbmRUbyhUeXBlLCBDdXN0b21BdHRyaWJ1dGUubmFtZSk7XG4gICAgICAgIHJldHVybiBkZWZpbml0aW9uLlR5cGU7XG4gICAgfSxcbiAgICBnZXREZWZpbml0aW9uKFR5cGUpIHtcbiAgICAgICAgY29uc3QgZGVmID0gTWV0YWRhdGEuZ2V0T3duKEN1c3RvbUF0dHJpYnV0ZS5uYW1lLCBUeXBlKTtcbiAgICAgICAgaWYgKGRlZiA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE5vIGRlZmluaXRpb24gZm91bmQgZm9yIHR5cGUgJHtUeXBlLm5hbWV9YCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRlZjtcbiAgICB9LFxuICAgIGFubm90YXRlKFR5cGUsIHByb3AsIHZhbHVlKSB7XG4gICAgICAgIE1ldGFkYXRhLmRlZmluZShQcm90b2NvbC5hbm5vdGF0aW9uLmtleUZvcihwcm9wKSwgdmFsdWUsIFR5cGUpO1xuICAgIH0sXG4gICAgZ2V0QW5ub3RhdGlvbihUeXBlLCBwcm9wKSB7XG4gICAgICAgIHJldHVybiBNZXRhZGF0YS5nZXRPd24oUHJvdG9jb2wuYW5ub3RhdGlvbi5rZXlGb3IocHJvcCksIFR5cGUpO1xuICAgIH0sXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y3VzdG9tLWF0dHJpYnV0ZS5qcy5tYXAiLCJpbXBvcnQgeyBfX2RlY29yYXRlLCBfX21ldGFkYXRhLCBfX3BhcmFtIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBuZXh0SWQgfSBmcm9tICdAYXVyZWxpYS9rZXJuZWwnO1xuaW1wb3J0IHsgSVJlbmRlckxvY2F0aW9uIH0gZnJvbSAnLi4vLi4vZG9tJztcbmltcG9ydCB7IElWaWV3RmFjdG9yeSB9IGZyb20gJy4uLy4uL2xpZmVjeWNsZSc7XG5pbXBvcnQgeyB0ZW1wbGF0ZUNvbnRyb2xsZXIgfSBmcm9tICcuLi9jdXN0b20tYXR0cmlidXRlJztcbmNsYXNzIEZsYWdzVGVtcGxhdGVDb250cm9sbGVyIHtcbiAgICBjb25zdHJ1Y3RvcihmYWN0b3J5LCBsb2NhdGlvbiwgZmxhZ3MpIHtcbiAgICAgICAgdGhpcy5mYWN0b3J5ID0gZmFjdG9yeTtcbiAgICAgICAgdGhpcy5mbGFncyA9IGZsYWdzO1xuICAgICAgICB0aGlzLmlkID0gbmV4dElkKCdhdSRjb21wb25lbnQnKTtcbiAgICAgICAgdGhpcy52aWV3ID0gdGhpcy5mYWN0b3J5LmNyZWF0ZSgpO1xuICAgICAgICB0aGlzLnZpZXcuaG9sZChsb2NhdGlvbiwgMSAvKiBpbnNlcnRCZWZvcmUgKi8pO1xuICAgIH1cbiAgICBiZWZvcmVCaW5kKGZsYWdzKSB7XG4gICAgICAgIHRoaXMudmlldy5wYXJlbnQgPSB0aGlzLiRjb250cm9sbGVyO1xuICAgICAgICByZXR1cm4gdGhpcy52aWV3LmJpbmQoZmxhZ3MgfCB0aGlzLmZsYWdzLCB0aGlzLiRjb250cm9sbGVyLnNjb3BlKTtcbiAgICB9XG4gICAgYmVmb3JlQXR0YWNoKGZsYWdzKSB7XG4gICAgICAgIHRoaXMudmlldy5hdHRhY2goZmxhZ3MpO1xuICAgIH1cbiAgICBiZWZvcmVEZXRhY2goZmxhZ3MpIHtcbiAgICAgICAgdGhpcy52aWV3LmRldGFjaChmbGFncyk7XG4gICAgfVxuICAgIGJlZm9yZVVuYmluZChmbGFncykge1xuICAgICAgICBjb25zdCB0YXNrID0gdGhpcy52aWV3LnVuYmluZChmbGFncyk7XG4gICAgICAgIHRoaXMudmlldy5wYXJlbnQgPSB2b2lkIDA7XG4gICAgICAgIHJldHVybiB0YXNrO1xuICAgIH1cbn1cbmxldCBJbmZyZXF1ZW50TXV0YXRpb25zID0gY2xhc3MgSW5mcmVxdWVudE11dGF0aW9ucyBleHRlbmRzIEZsYWdzVGVtcGxhdGVDb250cm9sbGVyIHtcbiAgICBjb25zdHJ1Y3RvcihmYWN0b3J5LCBsb2NhdGlvbikge1xuICAgICAgICBzdXBlcihmYWN0b3J5LCBsb2NhdGlvbiwgMjY4NDM1NDU2IC8qIG5vVGFyZ2V0T2JzZXJ2ZXJRdWV1ZSAqLyk7XG4gICAgfVxufTtcbkluZnJlcXVlbnRNdXRhdGlvbnMgPSBfX2RlY29yYXRlKFtcbiAgICB0ZW1wbGF0ZUNvbnRyb2xsZXIoJ2luZnJlcXVlbnQtbXV0YXRpb25zJyksXG4gICAgX19wYXJhbSgwLCBJVmlld0ZhY3RvcnkpLCBfX3BhcmFtKDEsIElSZW5kZXJMb2NhdGlvbiksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3QsIE9iamVjdF0pXG5dLCBJbmZyZXF1ZW50TXV0YXRpb25zKTtcbmV4cG9ydCB7IEluZnJlcXVlbnRNdXRhdGlvbnMgfTtcbmxldCBGcmVxdWVudE11dGF0aW9ucyA9IGNsYXNzIEZyZXF1ZW50TXV0YXRpb25zIGV4dGVuZHMgRmxhZ3NUZW1wbGF0ZUNvbnRyb2xsZXIge1xuICAgIGNvbnN0cnVjdG9yKGZhY3RvcnksIGxvY2F0aW9uKSB7XG4gICAgICAgIHN1cGVyKGZhY3RvcnksIGxvY2F0aW9uLCA1MzY4NzA5MTIgLyogcGVyc2lzdGVudFRhcmdldE9ic2VydmVyUXVldWUgKi8pO1xuICAgIH1cbn07XG5GcmVxdWVudE11dGF0aW9ucyA9IF9fZGVjb3JhdGUoW1xuICAgIHRlbXBsYXRlQ29udHJvbGxlcignZnJlcXVlbnQtbXV0YXRpb25zJyksXG4gICAgX19wYXJhbSgwLCBJVmlld0ZhY3RvcnkpLCBfX3BhcmFtKDEsIElSZW5kZXJMb2NhdGlvbiksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3QsIE9iamVjdF0pXG5dLCBGcmVxdWVudE11dGF0aW9ucyk7XG5leHBvcnQgeyBGcmVxdWVudE11dGF0aW9ucyB9O1xubGV0IE9ic2VydmVTaGFsbG93ID0gY2xhc3MgT2JzZXJ2ZVNoYWxsb3cgZXh0ZW5kcyBGbGFnc1RlbXBsYXRlQ29udHJvbGxlciB7XG4gICAgY29uc3RydWN0b3IoZmFjdG9yeSwgbG9jYXRpb24pIHtcbiAgICAgICAgc3VwZXIoZmFjdG9yeSwgbG9jYXRpb24sIDEzNDIxNzcyOCAvKiBvYnNlcnZlTGVhZlByb3BlcnRpZXNPbmx5ICovKTtcbiAgICB9XG59O1xuT2JzZXJ2ZVNoYWxsb3cgPSBfX2RlY29yYXRlKFtcbiAgICB0ZW1wbGF0ZUNvbnRyb2xsZXIoJ29ic2VydmUtc2hhbGxvdycpLFxuICAgIF9fcGFyYW0oMCwgSVZpZXdGYWN0b3J5KSwgX19wYXJhbSgxLCBJUmVuZGVyTG9jYXRpb24pLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0LCBPYmplY3RdKVxuXSwgT2JzZXJ2ZVNoYWxsb3cpO1xuZXhwb3J0IHsgT2JzZXJ2ZVNoYWxsb3cgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZsYWdzLmpzLm1hcCIsImltcG9ydCB7IF9fZGVjb3JhdGUsIF9fbWV0YWRhdGEsIF9fcGFyYW0gfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IG5leHRJZCB9IGZyb20gJ0BhdXJlbGlhL2tlcm5lbCc7XG5pbXBvcnQgeyBJUmVuZGVyTG9jYXRpb24gfSBmcm9tICcuLi8uLi9kb20nO1xuaW1wb3J0IHsgSVZpZXdGYWN0b3J5IH0gZnJvbSAnLi4vLi4vbGlmZWN5Y2xlJztcbmltcG9ydCB7IENvbnRpbnVhdGlvblRhc2ssIExpZmVjeWNsZVRhc2ssIFByb21pc2VUYXNrIH0gZnJvbSAnLi4vLi4vbGlmZWN5Y2xlLXRhc2snO1xuaW1wb3J0IHsgYmluZGFibGUgfSBmcm9tICcuLi8uLi90ZW1wbGF0aW5nL2JpbmRhYmxlJztcbmltcG9ydCB7IHRlbXBsYXRlQ29udHJvbGxlciB9IGZyb20gJy4uL2N1c3RvbS1hdHRyaWJ1dGUnO1xubGV0IElmID0gY2xhc3MgSWYge1xuICAgIGNvbnN0cnVjdG9yKGlmRmFjdG9yeSwgbG9jYXRpb24pIHtcbiAgICAgICAgdGhpcy5pZkZhY3RvcnkgPSBpZkZhY3Rvcnk7XG4gICAgICAgIHRoaXMubG9jYXRpb24gPSBsb2NhdGlvbjtcbiAgICAgICAgdGhpcy5pZCA9IG5leHRJZCgnYXUkY29tcG9uZW50Jyk7XG4gICAgICAgIHRoaXMuZWxzZUZhY3RvcnkgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMuZWxzZVZpZXcgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMuaWZWaWV3ID0gdm9pZCAwO1xuICAgICAgICB0aGlzLnZpZXcgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMudGFzayA9IExpZmVjeWNsZVRhc2suZG9uZTtcbiAgICAgICAgdGhpcy52YWx1ZSA9IGZhbHNlO1xuICAgIH1cbiAgICA7XG4gICAgYmVmb3JlQmluZChmbGFncykge1xuICAgICAgICBpZiAodGhpcy50YXNrLmRvbmUpIHtcbiAgICAgICAgICAgIHRoaXMudGFzayA9IHRoaXMuc3dhcCh0aGlzLnZhbHVlLCBmbGFncyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnRhc2sgPSBuZXcgQ29udGludWF0aW9uVGFzayh0aGlzLnRhc2ssIHRoaXMuc3dhcCwgdGhpcywgdGhpcy52YWx1ZSwgZmxhZ3MpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnRhc2s7XG4gICAgfVxuICAgIGJlZm9yZUF0dGFjaChmbGFncykge1xuICAgICAgICBpZiAodGhpcy50YXNrLmRvbmUpIHtcbiAgICAgICAgICAgIHRoaXMuYXR0YWNoVmlldyhmbGFncyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnRhc2sgPSBuZXcgQ29udGludWF0aW9uVGFzayh0aGlzLnRhc2ssIHRoaXMuYXR0YWNoVmlldywgdGhpcywgZmxhZ3MpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGJlZm9yZURldGFjaChmbGFncykge1xuICAgICAgICBpZiAodGhpcy52aWV3ICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnRhc2suZG9uZSkge1xuICAgICAgICAgICAgICAgIHRoaXMudmlldy5kZXRhY2goZmxhZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy50YXNrID0gbmV3IENvbnRpbnVhdGlvblRhc2sodGhpcy50YXNrLCB0aGlzLnZpZXcuZGV0YWNoLCB0aGlzLnZpZXcsIGZsYWdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy50YXNrO1xuICAgIH1cbiAgICBiZWZvcmVVbmJpbmQoZmxhZ3MpIHtcbiAgICAgICAgaWYgKHRoaXMudmlldyAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBpZiAodGhpcy50YXNrLmRvbmUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRhc2sgPSB0aGlzLnZpZXcudW5iaW5kKGZsYWdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMudGFzayA9IG5ldyBDb250aW51YXRpb25UYXNrKHRoaXMudGFzaywgdGhpcy52aWV3LnVuYmluZCwgdGhpcy52aWV3LCBmbGFncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMudGFzaztcbiAgICB9XG4gICAgY2FjaGluZyhmbGFncykge1xuICAgICAgICBpZiAodGhpcy5pZlZpZXcgIT09IHZvaWQgMCAmJiB0aGlzLmlmVmlldy5yZWxlYXNlKGZsYWdzKSkge1xuICAgICAgICAgICAgdGhpcy5pZlZpZXcgPSB2b2lkIDA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZWxzZVZpZXcgIT09IHZvaWQgMCAmJiB0aGlzLmVsc2VWaWV3LnJlbGVhc2UoZmxhZ3MpKSB7XG4gICAgICAgICAgICB0aGlzLmVsc2VWaWV3ID0gdm9pZCAwO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudmlldyA9IHZvaWQgMDtcbiAgICB9XG4gICAgdmFsdWVDaGFuZ2VkKG5ld1ZhbHVlLCBvbGRWYWx1ZSwgZmxhZ3MpIHtcbiAgICAgICAgaWYgKCh0aGlzLiRjb250cm9sbGVyLnN0YXRlICYgNCAvKiBpc0JvdW5kICovKSA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnRhc2suZG9uZSkge1xuICAgICAgICAgICAgdGhpcy50YXNrID0gdGhpcy5zd2FwKHRoaXMudmFsdWUsIGZsYWdzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudGFzayA9IG5ldyBDb250aW51YXRpb25UYXNrKHRoaXMudGFzaywgdGhpcy5zd2FwLCB0aGlzLCB0aGlzLnZhbHVlLCBmbGFncyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIHVwZGF0ZVZpZXcodmFsdWUsIGZsYWdzKSB7XG4gICAgICAgIGxldCB2aWV3O1xuICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgIHZpZXcgPSB0aGlzLmlmVmlldyA9IHRoaXMuZW5zdXJlVmlldyh0aGlzLmlmVmlldywgdGhpcy5pZkZhY3RvcnksIGZsYWdzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmVsc2VGYWN0b3J5ICE9IHZvaWQgMCkge1xuICAgICAgICAgICAgdmlldyA9IHRoaXMuZWxzZVZpZXcgPSB0aGlzLmVuc3VyZVZpZXcodGhpcy5lbHNlVmlldywgdGhpcy5lbHNlRmFjdG9yeSwgZmxhZ3MpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmlldyA9IHZvaWQgMDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmlldztcbiAgICB9XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIGVuc3VyZVZpZXcodmlldywgZmFjdG9yeSwgZmxhZ3MpIHtcbiAgICAgICAgaWYgKHZpZXcgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgdmlldyA9IGZhY3RvcnkuY3JlYXRlKGZsYWdzKTtcbiAgICAgICAgfVxuICAgICAgICB2aWV3LmhvbGQodGhpcy5sb2NhdGlvbiwgMSAvKiBpbnNlcnRCZWZvcmUgKi8pO1xuICAgICAgICByZXR1cm4gdmlldztcbiAgICB9XG4gICAgc3dhcCh2YWx1ZSwgZmxhZ3MpIHtcbiAgICAgICAgbGV0IHRhc2sgPSBMaWZlY3ljbGVUYXNrLmRvbmU7XG4gICAgICAgIGlmICgodmFsdWUgPT09IHRydWUgJiYgdGhpcy5lbHNlVmlldyAhPT0gdm9pZCAwKVxuICAgICAgICAgICAgfHwgKHZhbHVlICE9PSB0cnVlICYmIHRoaXMuaWZWaWV3ICE9PSB2b2lkIDApKSB7XG4gICAgICAgICAgICB0YXNrID0gdGhpcy5kZWFjdGl2YXRlKGZsYWdzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGFzay5kb25lKSB7XG4gICAgICAgICAgICBjb25zdCB2aWV3ID0gdGhpcy51cGRhdGVWaWV3KHZhbHVlLCBmbGFncyk7XG4gICAgICAgICAgICB0YXNrID0gdGhpcy5hY3RpdmF0ZSh2aWV3LCBmbGFncyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0YXNrID0gbmV3IFByb21pc2VUYXNrKHRhc2sud2FpdCgpLnRoZW4oKCkgPT4gdGhpcy51cGRhdGVWaWV3KHZhbHVlLCBmbGFncykpLCB0aGlzLmFjdGl2YXRlLCB0aGlzLCBmbGFncyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRhc2s7XG4gICAgfVxuICAgIGRlYWN0aXZhdGUoZmxhZ3MpIHtcbiAgICAgICAgY29uc3QgdmlldyA9IHRoaXMudmlldztcbiAgICAgICAgaWYgKHZpZXcgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgcmV0dXJuIExpZmVjeWNsZVRhc2suZG9uZTtcbiAgICAgICAgfVxuICAgICAgICB2aWV3LmRldGFjaChmbGFncyk7IC8vIFRPRE86IGxpbmsgdGhpcyB1cCB3aXRoIHVuYmluZFxuICAgICAgICBjb25zdCB0YXNrID0gdmlldy51bmJpbmQoZmxhZ3MpO1xuICAgICAgICB2aWV3LnBhcmVudCA9IHZvaWQgMDtcbiAgICAgICAgcmV0dXJuIHRhc2s7XG4gICAgfVxuICAgIGFjdGl2YXRlKHZpZXcsIGZsYWdzKSB7XG4gICAgICAgIHRoaXMudmlldyA9IHZpZXc7XG4gICAgICAgIGlmICh2aWV3ID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIHJldHVybiBMaWZlY3ljbGVUYXNrLmRvbmU7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHRhc2sgPSB0aGlzLmJpbmRWaWV3KGZsYWdzKTtcbiAgICAgICAgaWYgKCh0aGlzLiRjb250cm9sbGVyLnN0YXRlICYgMzIgLyogaXNBdHRhY2hlZCAqLykgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiB0YXNrO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0YXNrLmRvbmUpIHtcbiAgICAgICAgICAgIHRoaXMuYXR0YWNoVmlldyhmbGFncyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0YXNrID0gbmV3IENvbnRpbnVhdGlvblRhc2sodGFzaywgdGhpcy5hdHRhY2hWaWV3LCB0aGlzLCBmbGFncyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRhc2s7XG4gICAgfVxuICAgIGJpbmRWaWV3KGZsYWdzKSB7XG4gICAgICAgIGlmICh0aGlzLnZpZXcgIT09IHZvaWQgMCAmJiAodGhpcy4kY29udHJvbGxlci5zdGF0ZSAmIDUgLyogaXNCb3VuZE9yQmluZGluZyAqLykgPiAwKSB7XG4gICAgICAgICAgICB0aGlzLnZpZXcucGFyZW50ID0gdGhpcy4kY29udHJvbGxlcjtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZpZXcuYmluZChmbGFncywgdGhpcy4kY29udHJvbGxlci5zY29wZSwgdGhpcy4kY29udHJvbGxlci5wYXJ0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTGlmZWN5Y2xlVGFzay5kb25lO1xuICAgIH1cbiAgICBhdHRhY2hWaWV3KGZsYWdzKSB7XG4gICAgICAgIGlmICh0aGlzLnZpZXcgIT09IHZvaWQgMCAmJiAodGhpcy4kY29udHJvbGxlci5zdGF0ZSAmIDQwIC8qIGlzQXR0YWNoZWRPckF0dGFjaGluZyAqLykgPiAwKSB7XG4gICAgICAgICAgICB0aGlzLnZpZXcuYXR0YWNoKGZsYWdzKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5fX2RlY29yYXRlKFtcbiAgICBiaW5kYWJsZSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgQm9vbGVhbilcbl0sIElmLnByb3RvdHlwZSwgXCJ2YWx1ZVwiLCB2b2lkIDApO1xuSWYgPSBfX2RlY29yYXRlKFtcbiAgICB0ZW1wbGF0ZUNvbnRyb2xsZXIoJ2lmJyksXG4gICAgX19wYXJhbSgwLCBJVmlld0ZhY3RvcnkpLFxuICAgIF9fcGFyYW0oMSwgSVJlbmRlckxvY2F0aW9uKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW09iamVjdCwgT2JqZWN0XSlcbl0sIElmKTtcbmV4cG9ydCB7IElmIH07XG5sZXQgRWxzZSA9IGNsYXNzIEVsc2Uge1xuICAgIGNvbnN0cnVjdG9yKGZhY3RvcnkpIHtcbiAgICAgICAgdGhpcy5mYWN0b3J5ID0gZmFjdG9yeTtcbiAgICAgICAgdGhpcy5pZCA9IG5leHRJZCgnYXUkY29tcG9uZW50Jyk7XG4gICAgfVxuICAgIGxpbmsoaWZCZWhhdmlvcikge1xuICAgICAgICBpZiAoaWZCZWhhdmlvciBpbnN0YW5jZW9mIElmKSB7XG4gICAgICAgICAgICBpZkJlaGF2aW9yLmVsc2VGYWN0b3J5ID0gdGhpcy5mYWN0b3J5O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGlmQmVoYXZpb3Iudmlld01vZGVsIGluc3RhbmNlb2YgSWYpIHtcbiAgICAgICAgICAgIGlmQmVoYXZpb3Iudmlld01vZGVsLmVsc2VGYWN0b3J5ID0gdGhpcy5mYWN0b3J5O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnN1cHBvcnRlZCBJZkJlaGF2aW9yYCk7IC8vIFRPRE86IGNyZWF0ZSBlcnJvciBjb2RlXG4gICAgICAgIH1cbiAgICB9XG59O1xuRWxzZSA9IF9fZGVjb3JhdGUoW1xuICAgIHRlbXBsYXRlQ29udHJvbGxlcignZWxzZScpLFxuICAgIF9fcGFyYW0oMCwgSVZpZXdGYWN0b3J5KSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW09iamVjdF0pXG5dLCBFbHNlKTtcbmV4cG9ydCB7IEVsc2UgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlmLmpzLm1hcCIsImltcG9ydCB7IF9fZGVjb3JhdGUsIF9fbWV0YWRhdGEsIF9fcGFyYW0gfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IGNvbXBhcmVOdW1iZXIsIG5leHRJZCB9IGZyb20gJ0BhdXJlbGlhL2tlcm5lbCc7XG5pbXBvcnQgeyBJUmVuZGVyTG9jYXRpb24gfSBmcm9tICcuLi8uLi9kb20nO1xuaW1wb3J0IHsgSVZpZXdGYWN0b3J5LCBJQ29udHJvbGxlciB9IGZyb20gJy4uLy4uL2xpZmVjeWNsZSc7XG5pbXBvcnQgeyBBZ2dyZWdhdGVDb250aW51YXRpb25UYXNrLCBDb250aW51YXRpb25UYXNrLCBMaWZlY3ljbGVUYXNrLCB9IGZyb20gJy4uLy4uL2xpZmVjeWNsZS10YXNrJztcbmltcG9ydCB7IGFwcGx5TXV0YXRpb25zVG9JbmRpY2VzLCBzeW5jaHJvbml6ZUluZGljZXMgfSBmcm9tICcuLi8uLi9vYnNlcnZhdGlvbi9hcnJheS1vYnNlcnZlcic7XG5pbXBvcnQgeyBCaW5kaW5nQ29udGV4dCwgU2NvcGUgfSBmcm9tICcuLi8uLi9vYnNlcnZhdGlvbi9iaW5kaW5nLWNvbnRleHQnO1xuaW1wb3J0IHsgZ2V0Q29sbGVjdGlvbk9ic2VydmVyIH0gZnJvbSAnLi4vLi4vb2JzZXJ2YXRpb24vb2JzZXJ2ZXItbG9jYXRvcic7XG5pbXBvcnQgeyBiaW5kYWJsZSB9IGZyb20gJy4uLy4uL3RlbXBsYXRpbmcvYmluZGFibGUnO1xuaW1wb3J0IHsgdGVtcGxhdGVDb250cm9sbGVyIH0gZnJvbSAnLi4vY3VzdG9tLWF0dHJpYnV0ZSc7XG5sZXQgUmVwZWF0ID0gY2xhc3MgUmVwZWF0IHtcbiAgICBjb25zdHJ1Y3Rvcihsb2NhdGlvbiwgcmVuZGVyYWJsZSwgZmFjdG9yeSkge1xuICAgICAgICB0aGlzLmxvY2F0aW9uID0gbG9jYXRpb247XG4gICAgICAgIHRoaXMucmVuZGVyYWJsZSA9IHJlbmRlcmFibGU7XG4gICAgICAgIHRoaXMuZmFjdG9yeSA9IGZhY3Rvcnk7XG4gICAgICAgIHRoaXMuaWQgPSBuZXh0SWQoJ2F1JGNvbXBvbmVudCcpO1xuICAgICAgICB0aGlzLmhhc1BlbmRpbmdJbnN0YW5jZU11dGF0aW9uID0gZmFsc2U7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMudmlld3MgPSBbXTtcbiAgICAgICAgdGhpcy5rZXkgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMudGFzayA9IExpZmVjeWNsZVRhc2suZG9uZTtcbiAgICAgICAgdGhpcy5ub3JtYWxpemVkSXRlbXMgPSB2b2lkIDA7XG4gICAgfVxuICAgIGJlZm9yZUJpbmQoZmxhZ3MpIHtcbiAgICAgICAgdGhpcy5jaGVja0NvbGxlY3Rpb25PYnNlcnZlcihmbGFncyk7XG4gICAgICAgIGNvbnN0IGJpbmRpbmdzID0gdGhpcy5yZW5kZXJhYmxlLmJpbmRpbmdzO1xuICAgICAgICBjb25zdCB7IGxlbmd0aCB9ID0gYmluZGluZ3M7XG4gICAgICAgIGxldCBiaW5kaW5nO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBiaW5kaW5nID0gYmluZGluZ3NbaV07XG4gICAgICAgICAgICBpZiAoYmluZGluZy50YXJnZXQgPT09IHRoaXMgJiYgYmluZGluZy50YXJnZXRQcm9wZXJ0eSA9PT0gJ2l0ZW1zJykge1xuICAgICAgICAgICAgICAgIHRoaXMuZm9yT2YgPSBiaW5kaW5nLnNvdXJjZUV4cHJlc3Npb247XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sb2NhbCA9IHRoaXMuZm9yT2YuZGVjbGFyYXRpb24uZXZhbHVhdGUoZmxhZ3MsIHRoaXMuJGNvbnRyb2xsZXIuc2NvcGUsIG51bGwpO1xuICAgICAgICB0aGlzLm5vcm1hbGl6ZVRvQXJyYXkoZmxhZ3MpO1xuICAgICAgICB0aGlzLnByb2Nlc3NWaWV3c0tleWVkKHZvaWQgMCwgZmxhZ3MpO1xuICAgICAgICByZXR1cm4gdGhpcy50YXNrO1xuICAgIH1cbiAgICBiZWZvcmVBdHRhY2goZmxhZ3MpIHtcbiAgICAgICAgaWYgKHRoaXMudGFzay5kb25lKSB7XG4gICAgICAgICAgICB0aGlzLmF0dGFjaFZpZXdzKHZvaWQgMCwgZmxhZ3MpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy50YXNrID0gbmV3IENvbnRpbnVhdGlvblRhc2sodGhpcy50YXNrLCB0aGlzLmF0dGFjaFZpZXdzLCB0aGlzLCB2b2lkIDAsIGZsYWdzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBiZWZvcmVEZXRhY2goZmxhZ3MpIHtcbiAgICAgICAgaWYgKHRoaXMudGFzay5kb25lKSB7XG4gICAgICAgICAgICB0aGlzLmRldGFjaFZpZXdzQnlSYW5nZSgwLCB0aGlzLnZpZXdzLmxlbmd0aCwgZmxhZ3MpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy50YXNrID0gbmV3IENvbnRpbnVhdGlvblRhc2sodGhpcy50YXNrLCB0aGlzLmRldGFjaFZpZXdzQnlSYW5nZSwgdGhpcywgMCwgdGhpcy52aWV3cy5sZW5ndGgsIGZsYWdzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBiZWZvcmVVbmJpbmQoZmxhZ3MpIHtcbiAgICAgICAgdGhpcy5jaGVja0NvbGxlY3Rpb25PYnNlcnZlcihmbGFncyk7XG4gICAgICAgIGlmICh0aGlzLnRhc2suZG9uZSkge1xuICAgICAgICAgICAgdGhpcy50YXNrID0gdGhpcy51bmJpbmRBbmRSZW1vdmVWaWV3c0J5UmFuZ2UoMCwgdGhpcy52aWV3cy5sZW5ndGgsIGZsYWdzLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnRhc2sgPSBuZXcgQ29udGludWF0aW9uVGFzayh0aGlzLnRhc2ssIHRoaXMudW5iaW5kQW5kUmVtb3ZlVmlld3NCeVJhbmdlLCB0aGlzLCAwLCB0aGlzLnZpZXdzLmxlbmd0aCwgZmxhZ3MsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy50YXNrO1xuICAgIH1cbiAgICAvLyBjYWxsZWQgYnkgU2V0dGVyT2JzZXJ2ZXJcbiAgICBpdGVtc0NoYW5nZWQoZmxhZ3MpIHtcbiAgICAgICAgZmxhZ3MgfD0gdGhpcy4kY29udHJvbGxlci5mbGFncztcbiAgICAgICAgdGhpcy5jaGVja0NvbGxlY3Rpb25PYnNlcnZlcihmbGFncyk7XG4gICAgICAgIGZsYWdzIHw9IDE2IC8qIHVwZGF0ZVRhcmdldEluc3RhbmNlICovO1xuICAgICAgICB0aGlzLm5vcm1hbGl6ZVRvQXJyYXkoZmxhZ3MpO1xuICAgICAgICB0aGlzLnByb2Nlc3NWaWV3c0tleWVkKHZvaWQgMCwgZmxhZ3MpO1xuICAgIH1cbiAgICAvLyBjYWxsZWQgYnkgYSBDb2xsZWN0aW9uT2JzZXJ2ZXJcbiAgICBoYW5kbGVDb2xsZWN0aW9uQ2hhbmdlKGluZGV4TWFwLCBmbGFncykge1xuICAgICAgICBmbGFncyB8PSB0aGlzLiRjb250cm9sbGVyLmZsYWdzO1xuICAgICAgICBmbGFncyB8PSAoOTYwIC8qIGZyb21GbHVzaCAqLyB8IDE2IC8qIHVwZGF0ZVRhcmdldEluc3RhbmNlICovKTtcbiAgICAgICAgdGhpcy5ub3JtYWxpemVUb0FycmF5KGZsYWdzKTtcbiAgICAgICAgdGhpcy5wcm9jZXNzVmlld3NLZXllZChpbmRleE1hcCwgZmxhZ3MpO1xuICAgIH1cbiAgICBwcm9jZXNzVmlld3NLZXllZChpbmRleE1hcCwgZmxhZ3MpIHtcbiAgICAgICAgY29uc3Qgb2xkTGVuZ3RoID0gdGhpcy52aWV3cy5sZW5ndGg7XG4gICAgICAgIGlmIChpbmRleE1hcCA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBpZiAoKHRoaXMuJGNvbnRyb2xsZXIuc3RhdGUgJiA1IC8qIGlzQm91bmRPckJpbmRpbmcgKi8pID4gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGV0YWNoVmlld3NCeVJhbmdlKDAsIG9sZExlbmd0aCwgZmxhZ3MpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnRhc2suZG9uZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhc2sgPSB0aGlzLnVuYmluZEFuZFJlbW92ZVZpZXdzQnlSYW5nZSgwLCBvbGRMZW5ndGgsIGZsYWdzLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhc2sgPSBuZXcgQ29udGludWF0aW9uVGFzayh0aGlzLnRhc2ssIHRoaXMudW5iaW5kQW5kUmVtb3ZlVmlld3NCeVJhbmdlLCB0aGlzLCAwLCBvbGRMZW5ndGgsIGZsYWdzLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnRhc2suZG9uZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhc2sgPSB0aGlzLmNyZWF0ZUFuZEJpbmRBbGxWaWV3cyhmbGFncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhc2sgPSBuZXcgQ29udGludWF0aW9uVGFzayh0aGlzLnRhc2ssIHRoaXMuY3JlYXRlQW5kQmluZEFsbFZpZXdzLCB0aGlzLCBmbGFncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCh0aGlzLiRjb250cm9sbGVyLnN0YXRlICYgNDAgLyogaXNBdHRhY2hlZE9yQXR0YWNoaW5nICovKSA+IDApIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50YXNrLmRvbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hdHRhY2hWaWV3c0tleWVkKGZsYWdzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFzayA9IG5ldyBDb250aW51YXRpb25UYXNrKHRoaXMudGFzaywgdGhpcy5hdHRhY2hWaWV3c0tleWVkLCB0aGlzLCBmbGFncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYXBwbHlNdXRhdGlvbnNUb0luZGljZXMoaW5kZXhNYXApO1xuICAgICAgICAgICAgaWYgKCh0aGlzLiRjb250cm9sbGVyLnN0YXRlICYgNSAvKiBpc0JvdW5kT3JCaW5kaW5nICovKSA+IDApIHtcbiAgICAgICAgICAgICAgICAvLyBmaXJzdCBkZXRhY2grdW5iaW5kKyhyZW1vdmUgZnJvbSBhcnJheSkgdGhlIGRlbGV0ZWQgdmlldyBpbmRpY2VzXG4gICAgICAgICAgICAgICAgaWYgKGluZGV4TWFwLmRlbGV0ZWRJdGVtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGluZGV4TWFwLmRlbGV0ZWRJdGVtcy5zb3J0KGNvbXBhcmVOdW1iZXIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy50YXNrLmRvbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGV0YWNoVmlld3NCeUtleShpbmRleE1hcCwgZmxhZ3MpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50YXNrID0gbmV3IENvbnRpbnVhdGlvblRhc2sodGhpcy50YXNrLCB0aGlzLmRldGFjaFZpZXdzQnlLZXksIHRoaXMsIGluZGV4TWFwLCBmbGFncyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudGFzay5kb25lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRhc2sgPSB0aGlzLnVuYmluZEFuZFJlbW92ZVZpZXdzQnlLZXkoaW5kZXhNYXAsIGZsYWdzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGFzayA9IG5ldyBDb250aW51YXRpb25UYXNrKHRoaXMudGFzaywgdGhpcy51bmJpbmRBbmRSZW1vdmVWaWV3c0J5S2V5LCB0aGlzLCBpbmRleE1hcCwgZmxhZ3MpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIHRoZW4gaW5zZXJ0IG5ldyB2aWV3cyBhdCB0aGUgXCJhZGRlZFwiIGluZGljZXMgdG8gYnJpbmcgdGhlIHZpZXdzIGFycmF5IGluIGFsaWdtZW50IHdpdGggaW5kZXhNYXAgc2l6ZVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnRhc2suZG9uZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhc2sgPSB0aGlzLmNyZWF0ZUFuZEJpbmROZXdWaWV3c0J5S2V5KGluZGV4TWFwLCBmbGFncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhc2sgPSBuZXcgQ29udGludWF0aW9uVGFzayh0aGlzLnRhc2ssIHRoaXMuY3JlYXRlQW5kQmluZE5ld1ZpZXdzQnlLZXksIHRoaXMsIGluZGV4TWFwLCBmbGFncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCh0aGlzLiRjb250cm9sbGVyLnN0YXRlICYgNDAgLyogaXNBdHRhY2hlZE9yQXR0YWNoaW5nICovKSA+IDApIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50YXNrLmRvbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zb3J0Vmlld3NCeUtleShvbGRMZW5ndGgsIGluZGV4TWFwLCBmbGFncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhc2sgPSBuZXcgQ29udGludWF0aW9uVGFzayh0aGlzLnRhc2ssIHRoaXMuc29ydFZpZXdzQnlLZXksIHRoaXMsIG9sZExlbmd0aCwgaW5kZXhNYXAsIGZsYWdzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gdG9kbzogc3Vic2NyaWJlIHRvIGNvbGxlY3Rpb24gZnJvbSBpbm5lciBleHByZXNzaW9uXG4gICAgY2hlY2tDb2xsZWN0aW9uT2JzZXJ2ZXIoZmxhZ3MpIHtcbiAgICAgICAgY29uc3Qgb2xkT2JzZXJ2ZXIgPSB0aGlzLm9ic2VydmVyO1xuICAgICAgICBpZiAoKGZsYWdzICYgODE5MiAvKiBmcm9tVW5iaW5kICovKSkge1xuICAgICAgICAgICAgaWYgKG9sZE9ic2VydmVyICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICBvbGRPYnNlcnZlci51bnN1YnNjcmliZUZyb21Db2xsZWN0aW9uKHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCh0aGlzLiRjb250cm9sbGVyLnN0YXRlICYgNSAvKiBpc0JvdW5kT3JCaW5kaW5nICovKSA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IG5ld09ic2VydmVyID0gdGhpcy5vYnNlcnZlciA9IGdldENvbGxlY3Rpb25PYnNlcnZlcihmbGFncywgdGhpcy4kY29udHJvbGxlci5saWZlY3ljbGUsIHRoaXMuaXRlbXMpO1xuICAgICAgICAgICAgaWYgKG9sZE9ic2VydmVyICE9PSBuZXdPYnNlcnZlciAmJiBvbGRPYnNlcnZlcikge1xuICAgICAgICAgICAgICAgIG9sZE9ic2VydmVyLnVuc3Vic2NyaWJlRnJvbUNvbGxlY3Rpb24odGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobmV3T2JzZXJ2ZXIpIHtcbiAgICAgICAgICAgICAgICBuZXdPYnNlcnZlci5zdWJzY3JpYmVUb0NvbGxlY3Rpb24odGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgbm9ybWFsaXplVG9BcnJheShmbGFncykge1xuICAgICAgICBjb25zdCBpdGVtcyA9IHRoaXMuaXRlbXM7XG4gICAgICAgIGlmIChpdGVtcyBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgICAgICB0aGlzLm5vcm1hbGl6ZWRJdGVtcyA9IGl0ZW1zO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZvck9mID0gdGhpcy5mb3JPZjtcbiAgICAgICAgaWYgKGZvck9mID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBub3JtYWxpemVkSXRlbXMgPSBbXTtcbiAgICAgICAgdGhpcy5mb3JPZi5pdGVyYXRlKGZsYWdzLCBpdGVtcywgKGFyciwgaW5kZXgsIGl0ZW0pID0+IHtcbiAgICAgICAgICAgIG5vcm1hbGl6ZWRJdGVtc1tpbmRleF0gPSBpdGVtO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5ub3JtYWxpemVkSXRlbXMgPSBub3JtYWxpemVkSXRlbXM7XG4gICAgfVxuICAgIGRldGFjaFZpZXdzQnlSYW5nZShpU3RhcnQsIGlFbmQsIGZsYWdzKSB7XG4gICAgICAgIGNvbnN0IHZpZXdzID0gdGhpcy52aWV3cztcbiAgICAgICAgdGhpcy4kY29udHJvbGxlci5saWZlY3ljbGUuYWZ0ZXJEZXRhY2guYmVnaW4oKTtcbiAgICAgICAgbGV0IHZpZXc7XG4gICAgICAgIGZvciAobGV0IGkgPSBpU3RhcnQ7IGkgPCBpRW5kOyArK2kpIHtcbiAgICAgICAgICAgIHZpZXcgPSB2aWV3c1tpXTtcbiAgICAgICAgICAgIHZpZXcucmVsZWFzZShmbGFncyk7XG4gICAgICAgICAgICB2aWV3LmRldGFjaChmbGFncyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4kY29udHJvbGxlci5saWZlY3ljbGUuYWZ0ZXJEZXRhY2guZW5kKGZsYWdzKTtcbiAgICB9XG4gICAgdW5iaW5kQW5kUmVtb3ZlVmlld3NCeVJhbmdlKGlTdGFydCwgaUVuZCwgZmxhZ3MsIGFkanVzdExlbmd0aCkge1xuICAgICAgICBjb25zdCB2aWV3cyA9IHRoaXMudmlld3M7XG4gICAgICAgIGxldCB0YXNrcyA9IHZvaWQgMDtcbiAgICAgICAgbGV0IHRhc2s7XG4gICAgICAgIHRoaXMuJGNvbnRyb2xsZXIubGlmZWN5Y2xlLmFmdGVyVW5iaW5kLmJlZ2luKCk7XG4gICAgICAgIGxldCB2aWV3O1xuICAgICAgICBmb3IgKGxldCBpID0gaVN0YXJ0OyBpIDwgaUVuZDsgKytpKSB7XG4gICAgICAgICAgICB2aWV3ID0gdmlld3NbaV07XG4gICAgICAgICAgICB0YXNrID0gdmlldy51bmJpbmQoZmxhZ3MpO1xuICAgICAgICAgICAgdmlldy5wYXJlbnQgPSB2b2lkIDA7XG4gICAgICAgICAgICBpZiAoIXRhc2suZG9uZSkge1xuICAgICAgICAgICAgICAgIGlmICh0YXNrcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tzID0gW107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRhc2tzLnB1c2godGFzayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFkanVzdExlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy52aWV3cy5sZW5ndGggPSBpU3RhcnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRhc2tzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuJGNvbnRyb2xsZXIubGlmZWN5Y2xlLmFmdGVyVW5iaW5kLmVuZChmbGFncyk7XG4gICAgICAgICAgICByZXR1cm4gTGlmZWN5Y2xlVGFzay5kb25lO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgQWdncmVnYXRlQ29udGludWF0aW9uVGFzayh0YXNrcywgdGhpcy4kY29udHJvbGxlci5saWZlY3ljbGUuYWZ0ZXJVbmJpbmQuZW5kLCB0aGlzLiRjb250cm9sbGVyLmxpZmVjeWNsZS5hZnRlclVuYmluZCwgZmxhZ3MpO1xuICAgIH1cbiAgICBkZXRhY2hWaWV3c0J5S2V5KGluZGV4TWFwLCBmbGFncykge1xuICAgICAgICBjb25zdCB2aWV3cyA9IHRoaXMudmlld3M7XG4gICAgICAgIHRoaXMuJGNvbnRyb2xsZXIubGlmZWN5Y2xlLmFmdGVyRGV0YWNoLmJlZ2luKCk7XG4gICAgICAgIGNvbnN0IGRlbGV0ZWQgPSBpbmRleE1hcC5kZWxldGVkSXRlbXM7XG4gICAgICAgIGNvbnN0IGRlbGV0ZWRMZW4gPSBkZWxldGVkLmxlbmd0aDtcbiAgICAgICAgbGV0IHZpZXc7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGVsZXRlZExlbjsgKytpKSB7XG4gICAgICAgICAgICB2aWV3ID0gdmlld3NbZGVsZXRlZFtpXV07XG4gICAgICAgICAgICB2aWV3LnJlbGVhc2UoZmxhZ3MpO1xuICAgICAgICAgICAgdmlldy5kZXRhY2goZmxhZ3MpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuJGNvbnRyb2xsZXIubGlmZWN5Y2xlLmFmdGVyRGV0YWNoLmVuZChmbGFncyk7XG4gICAgfVxuICAgIHVuYmluZEFuZFJlbW92ZVZpZXdzQnlLZXkoaW5kZXhNYXAsIGZsYWdzKSB7XG4gICAgICAgIGNvbnN0IHZpZXdzID0gdGhpcy52aWV3cztcbiAgICAgICAgbGV0IHRhc2tzID0gdm9pZCAwO1xuICAgICAgICBsZXQgdGFzaztcbiAgICAgICAgdGhpcy4kY29udHJvbGxlci5saWZlY3ljbGUuYWZ0ZXJVbmJpbmQuYmVnaW4oKTtcbiAgICAgICAgY29uc3QgZGVsZXRlZCA9IGluZGV4TWFwLmRlbGV0ZWRJdGVtcztcbiAgICAgICAgY29uc3QgZGVsZXRlZExlbiA9IGRlbGV0ZWQubGVuZ3RoO1xuICAgICAgICBsZXQgdmlldztcbiAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICBmb3IgKDsgaSA8IGRlbGV0ZWRMZW47ICsraSkge1xuICAgICAgICAgICAgdmlldyA9IHZpZXdzW2RlbGV0ZWRbaV1dO1xuICAgICAgICAgICAgdGFzayA9IHZpZXcudW5iaW5kKGZsYWdzKTtcbiAgICAgICAgICAgIHZpZXcucGFyZW50ID0gdm9pZCAwO1xuICAgICAgICAgICAgaWYgKCF0YXNrLmRvbmUpIHtcbiAgICAgICAgICAgICAgICBpZiAodGFza3MgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB0YXNrcyA9IFtdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0YXNrcy5wdXNoKHRhc2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGkgPSAwO1xuICAgICAgICBsZXQgaiA9IDA7XG4gICAgICAgIGZvciAoOyBpIDwgZGVsZXRlZExlbjsgKytpKSB7XG4gICAgICAgICAgICBqID0gZGVsZXRlZFtpXSAtIGk7XG4gICAgICAgICAgICB0aGlzLnZpZXdzLnNwbGljZShqLCAxKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGFza3MgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy4kY29udHJvbGxlci5saWZlY3ljbGUuYWZ0ZXJVbmJpbmQuZW5kKGZsYWdzKTtcbiAgICAgICAgICAgIHJldHVybiBMaWZlY3ljbGVUYXNrLmRvbmU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBBZ2dyZWdhdGVDb250aW51YXRpb25UYXNrKHRhc2tzLCB0aGlzLiRjb250cm9sbGVyLmxpZmVjeWNsZS5hZnRlclVuYmluZC5lbmQsIHRoaXMuJGNvbnRyb2xsZXIubGlmZWN5Y2xlLmFmdGVyVW5iaW5kLCBmbGFncyk7XG4gICAgfVxuICAgIGNyZWF0ZUFuZEJpbmRBbGxWaWV3cyhmbGFncykge1xuICAgICAgICBsZXQgdGFza3MgPSB2b2lkIDA7XG4gICAgICAgIGxldCB0YXNrO1xuICAgICAgICBsZXQgdmlldztcbiAgICAgICAgbGV0IHZpZXdTY29wZTtcbiAgICAgICAgY29uc3QgJGNvbnRyb2xsZXIgPSB0aGlzLiRjb250cm9sbGVyO1xuICAgICAgICBjb25zdCBsaWZlY3ljbGUgPSAkY29udHJvbGxlci5saWZlY3ljbGU7XG4gICAgICAgIGNvbnN0IHBhcmVudFNjb3BlID0gJGNvbnRyb2xsZXIuc2NvcGU7XG4gICAgICAgIGxpZmVjeWNsZS5hZnRlckJpbmQuYmVnaW4oKTtcbiAgICAgICAgY29uc3QgcGFydCA9ICRjb250cm9sbGVyLnBhcnQ7XG4gICAgICAgIGNvbnN0IGZhY3RvcnkgPSB0aGlzLmZhY3Rvcnk7XG4gICAgICAgIGNvbnN0IGxvY2FsID0gdGhpcy5sb2NhbDtcbiAgICAgICAgY29uc3QgaXRlbXMgPSB0aGlzLml0ZW1zO1xuICAgICAgICBjb25zdCBuZXdMZW4gPSB0aGlzLmZvck9mLmNvdW50KGZsYWdzLCBpdGVtcyk7XG4gICAgICAgIGNvbnN0IHZpZXdzID0gdGhpcy52aWV3cyA9IEFycmF5KG5ld0xlbik7XG4gICAgICAgIHRoaXMuZm9yT2YuaXRlcmF0ZShmbGFncywgaXRlbXMsIChhcnIsIGksIGl0ZW0pID0+IHtcbiAgICAgICAgICAgIHZpZXcgPSB2aWV3c1tpXSA9IGZhY3RvcnkuY3JlYXRlKGZsYWdzKTtcbiAgICAgICAgICAgIHZpZXcucGFyZW50ID0gJGNvbnRyb2xsZXI7XG4gICAgICAgICAgICB2aWV3U2NvcGUgPSBTY29wZS5mcm9tUGFyZW50KGZsYWdzLCBwYXJlbnRTY29wZSwgQmluZGluZ0NvbnRleHQuY3JlYXRlKGZsYWdzLCBsb2NhbCwgaXRlbSkpO1xuICAgICAgICAgICAgc2V0Q29udGV4dHVhbFByb3BlcnRpZXModmlld1Njb3BlLm92ZXJyaWRlQ29udGV4dCwgaSwgbmV3TGVuKTtcbiAgICAgICAgICAgIHRhc2sgPSB2aWV3LmJpbmQoZmxhZ3MsIHZpZXdTY29wZSwgcGFydCk7XG4gICAgICAgICAgICBpZiAoIXRhc2suZG9uZSkge1xuICAgICAgICAgICAgICAgIGlmICh0YXNrcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tzID0gW107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRhc2tzLnB1c2godGFzayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodGFza3MgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbGlmZWN5Y2xlLmFmdGVyQmluZC5lbmQoZmxhZ3MpO1xuICAgICAgICAgICAgcmV0dXJuIExpZmVjeWNsZVRhc2suZG9uZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IEFnZ3JlZ2F0ZUNvbnRpbnVhdGlvblRhc2sodGFza3MsIGxpZmVjeWNsZS5hZnRlckJpbmQuZW5kLCBsaWZlY3ljbGUuYWZ0ZXJCaW5kLCBmbGFncyk7XG4gICAgfVxuICAgIGNyZWF0ZUFuZEJpbmROZXdWaWV3c0J5S2V5KGluZGV4TWFwLCBmbGFncykge1xuICAgICAgICBsZXQgdGFza3MgPSB2b2lkIDA7XG4gICAgICAgIGxldCB0YXNrO1xuICAgICAgICBsZXQgdmlldztcbiAgICAgICAgbGV0IHZpZXdTY29wZTtcbiAgICAgICAgY29uc3QgZmFjdG9yeSA9IHRoaXMuZmFjdG9yeTtcbiAgICAgICAgY29uc3Qgdmlld3MgPSB0aGlzLnZpZXdzO1xuICAgICAgICBjb25zdCBsb2NhbCA9IHRoaXMubG9jYWw7XG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRJdGVtcyA9IHRoaXMubm9ybWFsaXplZEl0ZW1zO1xuICAgICAgICBjb25zdCAkY29udHJvbGxlciA9IHRoaXMuJGNvbnRyb2xsZXI7XG4gICAgICAgIGNvbnN0IGxpZmVjeWNsZSA9ICRjb250cm9sbGVyLmxpZmVjeWNsZTtcbiAgICAgICAgY29uc3QgcGFyZW50U2NvcGUgPSAkY29udHJvbGxlci5zY29wZTtcbiAgICAgICAgbGlmZWN5Y2xlLmFmdGVyQmluZC5iZWdpbigpO1xuICAgICAgICBjb25zdCBwYXJ0ID0gJGNvbnRyb2xsZXIucGFydDtcbiAgICAgICAgY29uc3QgbWFwTGVuID0gaW5kZXhNYXAubGVuZ3RoO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1hcExlbjsgKytpKSB7XG4gICAgICAgICAgICBpZiAoaW5kZXhNYXBbaV0gPT09IC0yKSB7XG4gICAgICAgICAgICAgICAgdmlldyA9IGZhY3RvcnkuY3JlYXRlKGZsYWdzKTtcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiB0ZXN0IHdpdGggbWFwL3NldC91bmRlZmluZWQvbnVsbCwgbWFrZSBzdXJlIHdlIGNhbiB1c2Ugc3Ryb25nIHR5cGluZyBoZXJlIGFzIHdlbGwsIGV0Y1xuICAgICAgICAgICAgICAgIHZpZXcucGFyZW50ID0gJGNvbnRyb2xsZXI7XG4gICAgICAgICAgICAgICAgdmlld1Njb3BlID0gU2NvcGUuZnJvbVBhcmVudChmbGFncywgcGFyZW50U2NvcGUsIEJpbmRpbmdDb250ZXh0LmNyZWF0ZShmbGFncywgbG9jYWwsIG5vcm1hbGl6ZWRJdGVtc1tpXSkpO1xuICAgICAgICAgICAgICAgIHNldENvbnRleHR1YWxQcm9wZXJ0aWVzKHZpZXdTY29wZS5vdmVycmlkZUNvbnRleHQsIGksIG1hcExlbik7XG4gICAgICAgICAgICAgICAgLy8gdXBkYXRlIGFsbCB0aGUgcmVzdCBvY1xuICAgICAgICAgICAgICAgIHRhc2sgPSB2aWV3LmJpbmQoZmxhZ3MsIHZpZXdTY29wZSwgcGFydCk7XG4gICAgICAgICAgICAgICAgdmlld3Muc3BsaWNlKGksIDAsIHZpZXcpO1xuICAgICAgICAgICAgICAgIGlmICghdGFzay5kb25lKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0YXNrcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXNrcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRhc2tzLnB1c2godGFzayk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh2aWV3cy5sZW5ndGggIT09IG1hcExlbikge1xuICAgICAgICAgICAgLy8gVE9ETzogY3JlYXRlIGVycm9yIGNvZGUgYW5kIHVzZSByZXBvcnRlciB3aXRoIG1vcmUgaW5mb3JtYXRpdmUgbWVzc2FnZVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGB2aWV3c0xlbj0ke3ZpZXdzLmxlbmd0aH0sIG1hcExlbj0ke21hcExlbn1gKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGFza3MgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbGlmZWN5Y2xlLmFmdGVyQmluZC5lbmQoZmxhZ3MpO1xuICAgICAgICAgICAgcmV0dXJuIExpZmVjeWNsZVRhc2suZG9uZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IEFnZ3JlZ2F0ZUNvbnRpbnVhdGlvblRhc2sodGFza3MsIGxpZmVjeWNsZS5hZnRlckJpbmQuZW5kLCBsaWZlY3ljbGUuYWZ0ZXJCaW5kLCBmbGFncyk7XG4gICAgfVxuICAgIGF0dGFjaFZpZXdzKGluZGV4TWFwLCBmbGFncykge1xuICAgICAgICBsZXQgdmlldztcbiAgICAgICAgY29uc3Qgdmlld3MgPSB0aGlzLnZpZXdzO1xuICAgICAgICBjb25zdCBsb2NhdGlvbiA9IHRoaXMubG9jYXRpb247XG4gICAgICAgIGNvbnN0IGxpZmVjeWNsZSA9IHRoaXMuJGNvbnRyb2xsZXIubGlmZWN5Y2xlO1xuICAgICAgICBsaWZlY3ljbGUuYWZ0ZXJBdHRhY2guYmVnaW4oKTtcbiAgICAgICAgaWYgKGluZGV4TWFwID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IHZpZXdzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgICAgICB2aWV3ID0gdmlld3NbaV07XG4gICAgICAgICAgICAgICAgdmlldy5ob2xkKGxvY2F0aW9uLCAxIC8qIGluc2VydEJlZm9yZSAqLyk7XG4gICAgICAgICAgICAgICAgdmlldy5ub2Rlcy51bmxpbmsoKTtcbiAgICAgICAgICAgICAgICB2aWV3LmF0dGFjaChmbGFncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgaWkgPSB2aWV3cy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4TWFwW2ldICE9PSBpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZpZXcgPSB2aWV3c1tpXTtcbiAgICAgICAgICAgICAgICAgICAgdmlldy5ob2xkKGxvY2F0aW9uLCAxIC8qIGluc2VydEJlZm9yZSAqLyk7XG4gICAgICAgICAgICAgICAgICAgIHZpZXcubm9kZXMudW5saW5rKCk7XG4gICAgICAgICAgICAgICAgICAgIHZpZXcuYXR0YWNoKGZsYWdzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGlmZWN5Y2xlLmFmdGVyQXR0YWNoLmVuZChmbGFncyk7XG4gICAgfVxuICAgIGF0dGFjaFZpZXdzS2V5ZWQoZmxhZ3MpIHtcbiAgICAgICAgbGV0IHZpZXc7XG4gICAgICAgIGNvbnN0IHsgdmlld3MsIGxvY2F0aW9uIH0gPSB0aGlzO1xuICAgICAgICB0aGlzLiRjb250cm9sbGVyLmxpZmVjeWNsZS5hZnRlckF0dGFjaC5iZWdpbigpO1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgaWkgPSB2aWV3cy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICB2aWV3ID0gdmlld3NbaV07XG4gICAgICAgICAgICB2aWV3LmhvbGQobG9jYXRpb24sIDEgLyogaW5zZXJ0QmVmb3JlICovKTtcbiAgICAgICAgICAgIHZpZXcubm9kZXMudW5saW5rKCk7XG4gICAgICAgICAgICB2aWV3LmF0dGFjaChmbGFncyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4kY29udHJvbGxlci5saWZlY3ljbGUuYWZ0ZXJBdHRhY2guZW5kKGZsYWdzKTtcbiAgICB9XG4gICAgc29ydFZpZXdzQnlLZXkob2xkTGVuZ3RoLCBpbmRleE1hcCwgZmxhZ3MpIHtcbiAgICAgICAgLy8gVE9ETzogaW50ZWdyYXRlIHdpdGggdGFza3NcbiAgICAgICAgY29uc3QgbG9jYXRpb24gPSB0aGlzLmxvY2F0aW9uO1xuICAgICAgICBjb25zdCB2aWV3cyA9IHRoaXMudmlld3M7XG4gICAgICAgIGNvbnN0IG5ld0xlbiA9IGluZGV4TWFwLmxlbmd0aDtcbiAgICAgICAgc3luY2hyb25pemVJbmRpY2VzKHZpZXdzLCBpbmRleE1hcCk7XG4gICAgICAgIC8vIHRoaXMgYWxnb3JpdGhtIHJldHJpZXZlcyB0aGUgaW5kaWNlcyBvZiB0aGUgbG9uZ2VzdCBpbmNyZWFzaW5nIHN1YnNlcXVlbmNlIG9mIGl0ZW1zIGluIHRoZSByZXBlYXRlclxuICAgICAgICAvLyB0aGUgaXRlbXMgb24gdGhvc2UgaW5kaWNlcyBhcmUgbm90IG1vdmVkOyB0aGlzIG1pbmltaXplcyB0aGUgbnVtYmVyIG9mIERPTSBvcGVyYXRpb25zIHRoYXQgbmVlZCB0byBiZSBwZXJmb3JtZWRcbiAgICAgICAgY29uc3Qgc2VxID0gbG9uZ2VzdEluY3JlYXNpbmdTdWJzZXF1ZW5jZShpbmRleE1hcCk7XG4gICAgICAgIGNvbnN0IHNlcUxlbiA9IHNlcS5sZW5ndGg7XG4gICAgICAgIHRoaXMuJGNvbnRyb2xsZXIubGlmZWN5Y2xlLmFmdGVyQXR0YWNoLmJlZ2luKCk7XG4gICAgICAgIGZsYWdzIHw9IDMzNTU0NDMyIC8qIHJlb3JkZXJOb2RlcyAqLztcbiAgICAgICAgbGV0IG5leHQ7XG4gICAgICAgIGxldCBqID0gc2VxTGVuIC0gMTtcbiAgICAgICAgbGV0IGkgPSBuZXdMZW4gLSAxO1xuICAgICAgICBsZXQgdmlldztcbiAgICAgICAgZm9yICg7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgICAgICB2aWV3ID0gdmlld3NbaV07XG4gICAgICAgICAgICBpZiAoaW5kZXhNYXBbaV0gPT09IC0yKSB7XG4gICAgICAgICAgICAgICAgc2V0Q29udGV4dHVhbFByb3BlcnRpZXModmlldy5zY29wZS5vdmVycmlkZUNvbnRleHQsIGksIG5ld0xlbik7XG4gICAgICAgICAgICAgICAgdmlldy5ob2xkKGxvY2F0aW9uLCAxIC8qIGluc2VydEJlZm9yZSAqLyk7XG4gICAgICAgICAgICAgICAgdmlldy5hdHRhY2goZmxhZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaiA8IDAgfHwgc2VxTGVuID09PSAxIHx8IGkgIT09IHNlcVtqXSkge1xuICAgICAgICAgICAgICAgIHNldENvbnRleHR1YWxQcm9wZXJ0aWVzKHZpZXcuc2NvcGUub3ZlcnJpZGVDb250ZXh0LCBpLCBuZXdMZW4pO1xuICAgICAgICAgICAgICAgIHZpZXcuYXR0YWNoKGZsYWdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChvbGRMZW5ndGggIT09IG5ld0xlbikge1xuICAgICAgICAgICAgICAgICAgICBzZXRDb250ZXh0dWFsUHJvcGVydGllcyh2aWV3LnNjb3BlLm92ZXJyaWRlQ29udGV4dCwgaSwgbmV3TGVuKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLS1qO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV4dCA9IHZpZXdzW2kgKyAxXTtcbiAgICAgICAgICAgIGlmIChuZXh0ICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICB2aWV3Lm5vZGVzLmxpbmsobmV4dC5ub2Rlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2aWV3Lm5vZGVzLmxpbmsobG9jYXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuJGNvbnRyb2xsZXIubGlmZWN5Y2xlLmFmdGVyQXR0YWNoLmVuZChmbGFncyk7XG4gICAgfVxufTtcbl9fZGVjb3JhdGUoW1xuICAgIGJpbmRhYmxlLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLCBPYmplY3QpXG5dLCBSZXBlYXQucHJvdG90eXBlLCBcIml0ZW1zXCIsIHZvaWQgMCk7XG5SZXBlYXQgPSBfX2RlY29yYXRlKFtcbiAgICB0ZW1wbGF0ZUNvbnRyb2xsZXIoJ3JlcGVhdCcpLFxuICAgIF9fcGFyYW0oMCwgSVJlbmRlckxvY2F0aW9uKSxcbiAgICBfX3BhcmFtKDEsIElDb250cm9sbGVyKSxcbiAgICBfX3BhcmFtKDIsIElWaWV3RmFjdG9yeSksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3QsIE9iamVjdCwgT2JqZWN0XSlcbl0sIFJlcGVhdCk7XG5leHBvcnQgeyBSZXBlYXQgfTtcbmxldCBtYXhMZW4gPSAxNjtcbmxldCBwcmV2SW5kaWNlcyA9IG5ldyBJbnQzMkFycmF5KG1heExlbik7XG5sZXQgdGFpbEluZGljZXMgPSBuZXcgSW50MzJBcnJheShtYXhMZW4pO1xuLy8gQmFzZWQgb24gaW5mZXJubydzIGxpc19hbGdvcml0aG0gQCBodHRwczovL2dpdGh1Yi5jb20vaW5mZXJub2pzL2luZmVybm8vYmxvYi9tYXN0ZXIvcGFja2FnZXMvaW5mZXJuby9zcmMvRE9NL3BhdGNoaW5nLnRzI0w3MzJcbi8vIHdpdGggc29tZSB0d2Vha3MgdG8gbWFrZSBpdCBqdXN0IGEgYml0IGZhc3RlciArIGFjY291bnQgZm9yIEluZGV4TWFwIChhbmQgc29tZSBuYW1lcyBjaGFuZ2VzIGZvciByZWFkYWJpbGl0eSlcbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCBmdW5jdGlvbiBsb25nZXN0SW5jcmVhc2luZ1N1YnNlcXVlbmNlKGluZGV4TWFwKSB7XG4gICAgY29uc3QgbGVuID0gaW5kZXhNYXAubGVuZ3RoO1xuICAgIGlmIChsZW4gPiBtYXhMZW4pIHtcbiAgICAgICAgbWF4TGVuID0gbGVuO1xuICAgICAgICBwcmV2SW5kaWNlcyA9IG5ldyBJbnQzMkFycmF5KGxlbik7XG4gICAgICAgIHRhaWxJbmRpY2VzID0gbmV3IEludDMyQXJyYXkobGVuKTtcbiAgICB9XG4gICAgbGV0IGN1cnNvciA9IDA7XG4gICAgbGV0IGN1ciA9IDA7XG4gICAgbGV0IHByZXYgPSAwO1xuICAgIGxldCBpID0gMDtcbiAgICBsZXQgaiA9IDA7XG4gICAgbGV0IGxvdyA9IDA7XG4gICAgbGV0IGhpZ2ggPSAwO1xuICAgIGxldCBtaWQgPSAwO1xuICAgIGZvciAoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgY3VyID0gaW5kZXhNYXBbaV07XG4gICAgICAgIGlmIChjdXIgIT09IC0yKSB7XG4gICAgICAgICAgICBqID0gcHJldkluZGljZXNbY3Vyc29yXTtcbiAgICAgICAgICAgIHByZXYgPSBpbmRleE1hcFtqXTtcbiAgICAgICAgICAgIGlmIChwcmV2ICE9PSAtMiAmJiBwcmV2IDwgY3VyKSB7XG4gICAgICAgICAgICAgICAgdGFpbEluZGljZXNbaV0gPSBqO1xuICAgICAgICAgICAgICAgIHByZXZJbmRpY2VzWysrY3Vyc29yXSA9IGk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsb3cgPSAwO1xuICAgICAgICAgICAgaGlnaCA9IGN1cnNvcjtcbiAgICAgICAgICAgIHdoaWxlIChsb3cgPCBoaWdoKSB7XG4gICAgICAgICAgICAgICAgbWlkID0gKGxvdyArIGhpZ2gpID4+IDE7XG4gICAgICAgICAgICAgICAgcHJldiA9IGluZGV4TWFwW3ByZXZJbmRpY2VzW21pZF1dO1xuICAgICAgICAgICAgICAgIGlmIChwcmV2ICE9PSAtMiAmJiBwcmV2IDwgY3VyKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvdyA9IG1pZCArIDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBoaWdoID0gbWlkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHByZXYgPSBpbmRleE1hcFtwcmV2SW5kaWNlc1tsb3ddXTtcbiAgICAgICAgICAgIGlmIChjdXIgPCBwcmV2IHx8IHByZXYgPT09IC0yKSB7XG4gICAgICAgICAgICAgICAgaWYgKGxvdyA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGFpbEluZGljZXNbaV0gPSBwcmV2SW5kaWNlc1tsb3cgLSAxXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcHJldkluZGljZXNbbG93XSA9IGk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgaSA9ICsrY3Vyc29yO1xuICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBJbnQzMkFycmF5KGkpO1xuICAgIGN1ciA9IHByZXZJbmRpY2VzW2N1cnNvciAtIDFdO1xuICAgIHdoaWxlIChjdXJzb3ItLSA+IDApIHtcbiAgICAgICAgcmVzdWx0W2N1cnNvcl0gPSBjdXI7XG4gICAgICAgIGN1ciA9IHRhaWxJbmRpY2VzW2N1cl07XG4gICAgfVxuICAgIHdoaWxlIChpLS0gPiAwKVxuICAgICAgICBwcmV2SW5kaWNlc1tpXSA9IDA7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIHNldENvbnRleHR1YWxQcm9wZXJ0aWVzKG9jLCBpbmRleCwgbGVuZ3RoKSB7XG4gICAgY29uc3QgaXNGaXJzdCA9IGluZGV4ID09PSAwO1xuICAgIGNvbnN0IGlzTGFzdCA9IGluZGV4ID09PSBsZW5ndGggLSAxO1xuICAgIGNvbnN0IGlzRXZlbiA9IGluZGV4ICUgMiA9PT0gMDtcbiAgICBvYy4kaW5kZXggPSBpbmRleDtcbiAgICBvYy4kZmlyc3QgPSBpc0ZpcnN0O1xuICAgIG9jLiRsYXN0ID0gaXNMYXN0O1xuICAgIG9jLiRtaWRkbGUgPSAhaXNGaXJzdCAmJiAhaXNMYXN0O1xuICAgIG9jLiRldmVuID0gaXNFdmVuO1xuICAgIG9jLiRvZGQgPSAhaXNFdmVuO1xuICAgIG9jLiRsZW5ndGggPSBsZW5ndGg7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZXBlYXQuanMubWFwIiwiaW1wb3J0IHsgX19kZWNvcmF0ZSwgX19tZXRhZGF0YSwgX19wYXJhbSB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgbmV4dElkIH0gZnJvbSAnQGF1cmVsaWEva2VybmVsJztcbmltcG9ydCB7IElSZW5kZXJMb2NhdGlvbiB9IGZyb20gJy4uLy4uL2RvbSc7XG5pbXBvcnQgeyBJVmlld0ZhY3RvcnkgfSBmcm9tICcuLi8uLi9saWZlY3ljbGUnO1xuaW1wb3J0IHsgdGVtcGxhdGVDb250cm9sbGVyIH0gZnJvbSAnLi4vY3VzdG9tLWF0dHJpYnV0ZSc7XG5sZXQgUmVwbGFjZWFibGUgPSBjbGFzcyBSZXBsYWNlYWJsZSB7XG4gICAgY29uc3RydWN0b3IoZmFjdG9yeSwgbG9jYXRpb24pIHtcbiAgICAgICAgdGhpcy5mYWN0b3J5ID0gZmFjdG9yeTtcbiAgICAgICAgdGhpcy5sb2NhdGlvbiA9IGxvY2F0aW9uO1xuICAgICAgICB0aGlzLmlkID0gbmV4dElkKCdhdSRjb21wb25lbnQnKTtcbiAgICAgICAgdGhpcy52aWV3ID0gdGhpcy5mYWN0b3J5LmNyZWF0ZSgpO1xuICAgICAgICB0aGlzLnZpZXcuaG9sZChsb2NhdGlvbiwgMSAvKiBpbnNlcnRCZWZvcmUgKi8pO1xuICAgIH1cbiAgICBiZWZvcmVCaW5kKGZsYWdzKSB7XG4gICAgICAgIHRoaXMudmlldy5wYXJlbnQgPSB0aGlzLiRjb250cm9sbGVyO1xuICAgICAgICByZXR1cm4gdGhpcy52aWV3LmJpbmQoZmxhZ3MgfCA2NzEwODg2NCAvKiBhbGxvd1BhcmVudFNjb3BlVHJhdmVyc2FsICovLCB0aGlzLiRjb250cm9sbGVyLnNjb3BlLCB0aGlzLmZhY3RvcnkubmFtZSk7XG4gICAgfVxuICAgIGJlZm9yZUF0dGFjaChmbGFncykge1xuICAgICAgICB0aGlzLnZpZXcuYXR0YWNoKGZsYWdzKTtcbiAgICB9XG4gICAgYmVmb3JlRGV0YWNoKGZsYWdzKSB7XG4gICAgICAgIHRoaXMudmlldy5kZXRhY2goZmxhZ3MpO1xuICAgIH1cbiAgICBiZWZvcmVVbmJpbmQoZmxhZ3MpIHtcbiAgICAgICAgY29uc3QgdGFzayA9IHRoaXMudmlldy51bmJpbmQoZmxhZ3MpO1xuICAgICAgICB0aGlzLnZpZXcucGFyZW50ID0gdm9pZCAwO1xuICAgICAgICByZXR1cm4gdGFzaztcbiAgICB9XG59O1xuUmVwbGFjZWFibGUgPSBfX2RlY29yYXRlKFtcbiAgICB0ZW1wbGF0ZUNvbnRyb2xsZXIoJ3JlcGxhY2VhYmxlJyksXG4gICAgX19wYXJhbSgwLCBJVmlld0ZhY3RvcnkpLFxuICAgIF9fcGFyYW0oMSwgSVJlbmRlckxvY2F0aW9uKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW09iamVjdCwgT2JqZWN0XSlcbl0sIFJlcGxhY2VhYmxlKTtcbmV4cG9ydCB7IFJlcGxhY2VhYmxlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZXBsYWNlYWJsZS5qcy5tYXAiLCJpbXBvcnQgeyBfX2RlY29yYXRlLCBfX21ldGFkYXRhLCBfX3BhcmFtIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBuZXh0SWQgfSBmcm9tICdAYXVyZWxpYS9rZXJuZWwnO1xuaW1wb3J0IHsgSVJlbmRlckxvY2F0aW9uIH0gZnJvbSAnLi4vLi4vZG9tJztcbmltcG9ydCB7IElWaWV3RmFjdG9yeSB9IGZyb20gJy4uLy4uL2xpZmVjeWNsZSc7XG5pbXBvcnQgeyB0ZW1wbGF0ZUNvbnRyb2xsZXIgfSBmcm9tICcuLi9jdXN0b20tYXR0cmlidXRlJztcbmltcG9ydCB7IGJpbmRhYmxlIH0gZnJvbSAnLi4vLi4vdGVtcGxhdGluZy9iaW5kYWJsZSc7XG5pbXBvcnQgeyBTY29wZSB9IGZyb20gJy4uLy4uL29ic2VydmF0aW9uL2JpbmRpbmctY29udGV4dCc7XG5sZXQgV2l0aCA9IGNsYXNzIFdpdGgge1xuICAgIGNvbnN0cnVjdG9yKGZhY3RvcnksIGxvY2F0aW9uKSB7XG4gICAgICAgIHRoaXMuZmFjdG9yeSA9IGZhY3Rvcnk7XG4gICAgICAgIHRoaXMubG9jYXRpb24gPSBsb2NhdGlvbjtcbiAgICAgICAgdGhpcy5pZCA9IG5leHRJZCgnYXUkY29tcG9uZW50Jyk7XG4gICAgICAgIHRoaXMuaWQgPSBuZXh0SWQoJ2F1JGNvbXBvbmVudCcpO1xuICAgICAgICB0aGlzLnZpZXcgPSB0aGlzLmZhY3RvcnkuY3JlYXRlKCk7XG4gICAgICAgIHRoaXMudmlldy5ob2xkKGxvY2F0aW9uLCAxIC8qIGluc2VydEJlZm9yZSAqLyk7XG4gICAgfVxuICAgIHZhbHVlQ2hhbmdlZChuZXdWYWx1ZSwgb2xkVmFsdWUsIGZsYWdzKSB7XG4gICAgICAgIGlmICgodGhpcy4kY29udHJvbGxlci5zdGF0ZSAmIDUgLyogaXNCb3VuZE9yQmluZGluZyAqLykgPiAwKSB7XG4gICAgICAgICAgICB0aGlzLmJpbmRDaGlsZCg0MDk2IC8qIGZyb21CaW5kICovKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBiZWZvcmVCaW5kKGZsYWdzKSB7XG4gICAgICAgIHRoaXMudmlldy5wYXJlbnQgPSB0aGlzLiRjb250cm9sbGVyO1xuICAgICAgICB0aGlzLmJpbmRDaGlsZChmbGFncyk7XG4gICAgfVxuICAgIGJlZm9yZUF0dGFjaChmbGFncykge1xuICAgICAgICB0aGlzLnZpZXcuYXR0YWNoKGZsYWdzKTtcbiAgICB9XG4gICAgYmVmb3JlRGV0YWNoKGZsYWdzKSB7XG4gICAgICAgIHRoaXMudmlldy5kZXRhY2goZmxhZ3MpO1xuICAgIH1cbiAgICBiZWZvcmVVbmJpbmQoZmxhZ3MpIHtcbiAgICAgICAgdGhpcy52aWV3LnVuYmluZChmbGFncyk7XG4gICAgICAgIHRoaXMudmlldy5wYXJlbnQgPSB2b2lkIDA7XG4gICAgfVxuICAgIGJpbmRDaGlsZChmbGFncykge1xuICAgICAgICBjb25zdCBzY29wZSA9IFNjb3BlLmZyb21QYXJlbnQoZmxhZ3MsIHRoaXMuJGNvbnRyb2xsZXIuc2NvcGUsIHRoaXMudmFsdWUgPT09IHZvaWQgMCA/IHt9IDogdGhpcy52YWx1ZSk7XG4gICAgICAgIHRoaXMudmlldy5iaW5kKGZsYWdzLCBzY29wZSwgdGhpcy4kY29udHJvbGxlci5wYXJ0KTtcbiAgICB9XG59O1xuX19kZWNvcmF0ZShbXG4gICAgYmluZGFibGUsXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjp0eXBlXCIsIE9iamVjdClcbl0sIFdpdGgucHJvdG90eXBlLCBcInZhbHVlXCIsIHZvaWQgMCk7XG5XaXRoID0gX19kZWNvcmF0ZShbXG4gICAgdGVtcGxhdGVDb250cm9sbGVyKCd3aXRoJyksXG4gICAgX19wYXJhbSgwLCBJVmlld0ZhY3RvcnkpLFxuICAgIF9fcGFyYW0oMSwgSVJlbmRlckxvY2F0aW9uKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW09iamVjdCwgT2JqZWN0XSlcbl0sIFdpdGgpO1xuZXhwb3J0IHsgV2l0aCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9d2l0aC5qcy5tYXAiLCJpbXBvcnQgeyBESSwgUmVnaXN0cmF0aW9uLCBQcm90b2NvbCwgTWV0YWRhdGEsIG1lcmdlQXJyYXlzLCBmcm9tRGVmaW5pdGlvbk9yRGVmYXVsdCwgcGFzY2FsQ2FzZSwgZnJvbUFubm90YXRpb25PclR5cGVPckRlZmF1bHQsIGZyb21Bbm5vdGF0aW9uT3JEZWZpbml0aW9uT3JUeXBlT3JEZWZhdWx0LCB9IGZyb20gJ0BhdXJlbGlhL2tlcm5lbCc7XG5pbXBvcnQgeyByZWdpc3RlckFsaWFzZXMsIEhvb2tzRGVmaW5pdGlvbiwgfSBmcm9tICcuLi9kZWZpbml0aW9ucyc7XG5pbXBvcnQgeyBET00gfSBmcm9tICcuLi9kb20nO1xuaW1wb3J0IHsgQmluZGFibGUgfSBmcm9tICcuLi90ZW1wbGF0aW5nL2JpbmRhYmxlJztcbmltcG9ydCB7IENoaWxkcmVuIH0gZnJvbSAnLi4vdGVtcGxhdGluZy9jaGlsZHJlbic7XG5leHBvcnQgZnVuY3Rpb24gY3VzdG9tRWxlbWVudChuYW1lT3JEZWYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICByZXR1cm4gQ3VzdG9tRWxlbWVudC5kZWZpbmUobmFtZU9yRGVmLCB0YXJnZXQpO1xuICAgIH07XG59XG5leHBvcnQgZnVuY3Rpb24gdXNlU2hhZG93RE9NKHRhcmdldE9yT3B0aW9ucykge1xuICAgIGlmICh0YXJnZXRPck9wdGlvbnMgPT09IHZvaWQgMCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCR0YXJnZXQpIHtcbiAgICAgICAgICAgIEN1c3RvbUVsZW1lbnQuYW5ub3RhdGUoJHRhcmdldCwgJ3NoYWRvd09wdGlvbnMnLCB7IG1vZGU6ICdvcGVuJyB9KTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB0YXJnZXRPck9wdGlvbnMgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgkdGFyZ2V0KSB7XG4gICAgICAgICAgICBDdXN0b21FbGVtZW50LmFubm90YXRlKCR0YXJnZXQsICdzaGFkb3dPcHRpb25zJywgdGFyZ2V0T3JPcHRpb25zKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgQ3VzdG9tRWxlbWVudC5hbm5vdGF0ZSh0YXJnZXRPck9wdGlvbnMsICdzaGFkb3dPcHRpb25zJywgeyBtb2RlOiAnb3BlbicgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gY29udGFpbmVybGVzcyh0YXJnZXQpIHtcbiAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgkdGFyZ2V0KSB7XG4gICAgICAgICAgICBDdXN0b21FbGVtZW50LmFubm90YXRlKCR0YXJnZXQsICdjb250YWluZXJsZXNzJywgdHJ1ZSk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIEN1c3RvbUVsZW1lbnQuYW5ub3RhdGUodGFyZ2V0LCAnY29udGFpbmVybGVzcycsIHRydWUpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHN0cmljdCh0YXJnZXQpIHtcbiAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgkdGFyZ2V0KSB7XG4gICAgICAgICAgICBDdXN0b21FbGVtZW50LmFubm90YXRlKCR0YXJnZXQsICdpc1N0cmljdEJpbmRpbmcnLCB0cnVlKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgQ3VzdG9tRWxlbWVudC5hbm5vdGF0ZSh0YXJnZXQsICdpc1N0cmljdEJpbmRpbmcnLCB0cnVlKTtcbn1cbmNvbnN0IGRlZmluaXRpb25Mb29rdXAgPSBuZXcgV2Vha01hcCgpO1xuZXhwb3J0IGNsYXNzIEN1c3RvbUVsZW1lbnREZWZpbml0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihUeXBlLCBuYW1lLCBhbGlhc2VzLCBrZXksIGNhY2hlLCB0ZW1wbGF0ZSwgaW5zdHJ1Y3Rpb25zLCBkZXBlbmRlbmNpZXMsIGluamVjdGFibGUsIG5lZWRzQ29tcGlsZSwgc3Vycm9nYXRlcywgYmluZGFibGVzLCBjaGlsZHJlbk9ic2VydmVycywgY29udGFpbmVybGVzcywgaXNTdHJpY3RCaW5kaW5nLCBzaGFkb3dPcHRpb25zLCBoYXNTbG90cywgc3RyYXRlZ3ksIGhvb2tzLCBzY29wZVBhcnRzKSB7XG4gICAgICAgIHRoaXMuVHlwZSA9IFR5cGU7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMuYWxpYXNlcyA9IGFsaWFzZXM7XG4gICAgICAgIHRoaXMua2V5ID0ga2V5O1xuICAgICAgICB0aGlzLmNhY2hlID0gY2FjaGU7XG4gICAgICAgIHRoaXMudGVtcGxhdGUgPSB0ZW1wbGF0ZTtcbiAgICAgICAgdGhpcy5pbnN0cnVjdGlvbnMgPSBpbnN0cnVjdGlvbnM7XG4gICAgICAgIHRoaXMuZGVwZW5kZW5jaWVzID0gZGVwZW5kZW5jaWVzO1xuICAgICAgICB0aGlzLmluamVjdGFibGUgPSBpbmplY3RhYmxlO1xuICAgICAgICB0aGlzLm5lZWRzQ29tcGlsZSA9IG5lZWRzQ29tcGlsZTtcbiAgICAgICAgdGhpcy5zdXJyb2dhdGVzID0gc3Vycm9nYXRlcztcbiAgICAgICAgdGhpcy5iaW5kYWJsZXMgPSBiaW5kYWJsZXM7XG4gICAgICAgIHRoaXMuY2hpbGRyZW5PYnNlcnZlcnMgPSBjaGlsZHJlbk9ic2VydmVycztcbiAgICAgICAgdGhpcy5jb250YWluZXJsZXNzID0gY29udGFpbmVybGVzcztcbiAgICAgICAgdGhpcy5pc1N0cmljdEJpbmRpbmcgPSBpc1N0cmljdEJpbmRpbmc7XG4gICAgICAgIHRoaXMuc2hhZG93T3B0aW9ucyA9IHNoYWRvd09wdGlvbnM7XG4gICAgICAgIHRoaXMuaGFzU2xvdHMgPSBoYXNTbG90cztcbiAgICAgICAgdGhpcy5zdHJhdGVneSA9IHN0cmF0ZWd5O1xuICAgICAgICB0aGlzLmhvb2tzID0gaG9va3M7XG4gICAgICAgIHRoaXMuc2NvcGVQYXJ0cyA9IHNjb3BlUGFydHM7XG4gICAgfVxuICAgIHN0YXRpYyBjcmVhdGUobmFtZU9yRGVmLCBUeXBlID0gbnVsbCkge1xuICAgICAgICBpZiAoVHlwZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgY29uc3QgZGVmID0gbmFtZU9yRGVmO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBkZWYgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgY3JlYXRlIGEgY3VzdG9tIGVsZW1lbnQgZGVmaW5pdGlvbiB3aXRoIG9ubHkgYSBuYW1lIGFuZCBubyB0eXBlOiAke25hbWVPckRlZn1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvdW5ib3VuZC1tZXRob2RcbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBmcm9tRGVmaW5pdGlvbk9yRGVmYXVsdCgnbmFtZScsIGRlZiwgQ3VzdG9tRWxlbWVudC5nZW5lcmF0ZU5hbWUpO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBkZWYuVHlwZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIC8vIFRoaXMgbmVlZHMgdG8gYmUgYSBjbG9uZSAoaXQgd2lsbCB1c3VhbGx5IGJlIHRoZSBjb21waWxlciBjYWxsaW5nIHRoaXMgc2lnbmF0dXJlKVxuICAgICAgICAgICAgICAgIC8vIFRPRE86IHdlIG5lZWQgdG8gbWFrZSBzdXJlIGl0J3MgZG9jdW1lbnRlZCB0aGF0IHBhc3NpbmcgaW4gdGhlIHR5cGUgdmlhIHRoZSBkZWZpbml0aW9uICh3aGlsZSBwYXNzaW5nIGluIG51bGxcbiAgICAgICAgICAgICAgICAvLyBhcyB0aGUgXCJUeXBlXCIgcGFyYW1ldGVyKSBlZmZlY3RpdmVseSBza2lwcyB0eXBlIGFuYWx5c2lzLCBzbyBpdCBzaG91bGQgb25seSBiZSB1c2VkIHRoaXMgd2F5IGZvciBjbG9uaW5nIHB1cnBvc2VzLlxuICAgICAgICAgICAgICAgIFR5cGUgPSBkZWYuVHlwZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIFR5cGUgPSBDdXN0b21FbGVtZW50LmdlbmVyYXRlVHlwZShwYXNjYWxDYXNlKG5hbWUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgQ3VzdG9tRWxlbWVudERlZmluaXRpb24oVHlwZSwgbmFtZSwgbWVyZ2VBcnJheXMoZGVmLmFsaWFzZXMpLCBmcm9tRGVmaW5pdGlvbk9yRGVmYXVsdCgna2V5JywgZGVmLCAoKSA9PiBDdXN0b21FbGVtZW50LmtleUZyb20obmFtZSkpLCBmcm9tRGVmaW5pdGlvbk9yRGVmYXVsdCgnY2FjaGUnLCBkZWYsICgpID0+IDApLCBmcm9tRGVmaW5pdGlvbk9yRGVmYXVsdCgndGVtcGxhdGUnLCBkZWYsICgpID0+IG51bGwpLCBtZXJnZUFycmF5cyhkZWYuaW5zdHJ1Y3Rpb25zKSwgbWVyZ2VBcnJheXMoZGVmLmRlcGVuZGVuY2llcyksIGZyb21EZWZpbml0aW9uT3JEZWZhdWx0KCdpbmplY3RhYmxlJywgZGVmLCAoKSA9PiBudWxsKSwgZnJvbURlZmluaXRpb25PckRlZmF1bHQoJ25lZWRzQ29tcGlsZScsIGRlZiwgKCkgPT4gdHJ1ZSksIG1lcmdlQXJyYXlzKGRlZi5zdXJyb2dhdGVzKSwgQmluZGFibGUuZnJvbShkZWYuYmluZGFibGVzKSwgQ2hpbGRyZW4uZnJvbShkZWYuY2hpbGRyZW5PYnNlcnZlcnMpLCBmcm9tRGVmaW5pdGlvbk9yRGVmYXVsdCgnY29udGFpbmVybGVzcycsIGRlZiwgKCkgPT4gZmFsc2UpLCBmcm9tRGVmaW5pdGlvbk9yRGVmYXVsdCgnaXNTdHJpY3RCaW5kaW5nJywgZGVmLCAoKSA9PiBmYWxzZSksIGZyb21EZWZpbml0aW9uT3JEZWZhdWx0KCdzaGFkb3dPcHRpb25zJywgZGVmLCAoKSA9PiBudWxsKSwgZnJvbURlZmluaXRpb25PckRlZmF1bHQoJ2hhc1Nsb3RzJywgZGVmLCAoKSA9PiBmYWxzZSksIGZyb21EZWZpbml0aW9uT3JEZWZhdWx0KCdzdHJhdGVneScsIGRlZiwgKCkgPT4gMSAvKiBnZXR0ZXJTZXR0ZXIgKi8pLCBmcm9tRGVmaW5pdGlvbk9yRGVmYXVsdCgnaG9va3MnLCBkZWYsICgpID0+IEhvb2tzRGVmaW5pdGlvbi5ub25lKSwgbWVyZ2VBcnJheXMoZGVmLnNjb3BlUGFydHMpKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBJZiBhIHR5cGUgaXMgcGFzc2VkIGluLCB3ZSBpZ25vcmUgdGhlIFR5cGUgcHJvcGVydHkgb24gdGhlIGRlZmluaXRpb24gaWYgaXQgZXhpc3RzLlxuICAgICAgICAvLyBUT0RPOiBkb2N1bWVudCB0aGlzIGJlaGF2aW9yXG4gICAgICAgIGlmICh0eXBlb2YgbmFtZU9yRGVmID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBDdXN0b21FbGVtZW50RGVmaW5pdGlvbihUeXBlLCBuYW1lT3JEZWYsIG1lcmdlQXJyYXlzKEN1c3RvbUVsZW1lbnQuZ2V0QW5ub3RhdGlvbihUeXBlLCAnYWxpYXNlcycpLCBUeXBlLmFsaWFzZXMpLCBDdXN0b21FbGVtZW50LmtleUZyb20obmFtZU9yRGVmKSwgZnJvbUFubm90YXRpb25PclR5cGVPckRlZmF1bHQoJ2NhY2hlJywgVHlwZSwgKCkgPT4gMCksIGZyb21Bbm5vdGF0aW9uT3JUeXBlT3JEZWZhdWx0KCd0ZW1wbGF0ZScsIFR5cGUsICgpID0+IG51bGwpLCBtZXJnZUFycmF5cyhDdXN0b21FbGVtZW50LmdldEFubm90YXRpb24oVHlwZSwgJ2luc3RydWN0aW9ucycpLCBUeXBlLmluc3RydWN0aW9ucyksIG1lcmdlQXJyYXlzKEN1c3RvbUVsZW1lbnQuZ2V0QW5ub3RhdGlvbihUeXBlLCAnZGVwZW5kZW5jaWVzJyksIFR5cGUuZGVwZW5kZW5jaWVzKSwgZnJvbUFubm90YXRpb25PclR5cGVPckRlZmF1bHQoJ2luamVjdGFibGUnLCBUeXBlLCAoKSA9PiBudWxsKSwgZnJvbUFubm90YXRpb25PclR5cGVPckRlZmF1bHQoJ25lZWRzQ29tcGlsZScsIFR5cGUsICgpID0+IHRydWUpLCBtZXJnZUFycmF5cyhDdXN0b21FbGVtZW50LmdldEFubm90YXRpb24oVHlwZSwgJ3N1cnJvZ2F0ZXMnKSwgVHlwZS5zdXJyb2dhdGVzKSwgQmluZGFibGUuZnJvbSguLi5CaW5kYWJsZS5nZXRBbGwoVHlwZSksIEN1c3RvbUVsZW1lbnQuZ2V0QW5ub3RhdGlvbihUeXBlLCAnYmluZGFibGVzJyksIFR5cGUuYmluZGFibGVzKSwgQ2hpbGRyZW4uZnJvbSguLi5DaGlsZHJlbi5nZXRBbGwoVHlwZSksIEN1c3RvbUVsZW1lbnQuZ2V0QW5ub3RhdGlvbihUeXBlLCAnY2hpbGRyZW5PYnNlcnZlcnMnKSwgVHlwZS5jaGlsZHJlbk9ic2VydmVycyksIGZyb21Bbm5vdGF0aW9uT3JUeXBlT3JEZWZhdWx0KCdjb250YWluZXJsZXNzJywgVHlwZSwgKCkgPT4gZmFsc2UpLCBmcm9tQW5ub3RhdGlvbk9yVHlwZU9yRGVmYXVsdCgnaXNTdHJpY3RCaW5kaW5nJywgVHlwZSwgKCkgPT4gZmFsc2UpLCBmcm9tQW5ub3RhdGlvbk9yVHlwZU9yRGVmYXVsdCgnc2hhZG93T3B0aW9ucycsIFR5cGUsICgpID0+IG51bGwpLCBmcm9tQW5ub3RhdGlvbk9yVHlwZU9yRGVmYXVsdCgnaGFzU2xvdHMnLCBUeXBlLCAoKSA9PiBmYWxzZSksIGZyb21Bbm5vdGF0aW9uT3JUeXBlT3JEZWZhdWx0KCdzdHJhdGVneScsIFR5cGUsICgpID0+IDEgLyogZ2V0dGVyU2V0dGVyICovKSwgXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVubmVjZXNzYXJ5LXR5cGUtYXNzZXJ0aW9uXG4gICAgICAgICAgICBmcm9tQW5ub3RhdGlvbk9yVHlwZU9yRGVmYXVsdCgnaG9va3MnLCBUeXBlLCAoKSA9PiBuZXcgSG9va3NEZWZpbml0aW9uKFR5cGUucHJvdG90eXBlKSksIG1lcmdlQXJyYXlzKEN1c3RvbUVsZW1lbnQuZ2V0QW5ub3RhdGlvbihUeXBlLCAnc2NvcGVQYXJ0cycpLCBUeXBlLnNjb3BlUGFydHMpKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBUaGlzIGlzIHRoZSB0eXBpY2FsIGRlZmF1bHQgYmVoYXZpb3IsIGUuZy4gZnJvbSByZWd1bGFyIEN1c3RvbUVsZW1lbnQuZGVmaW5lIGludm9jYXRpb25zIG9yIGZyb20gQGN1c3RvbUVsZW1lbnQgZGVjb1xuICAgICAgICAvLyBUaGUgVmlld1ZhbHVlQ29udmVydGVyIGFsc28gdXNlcyB0aGlzIHNpZ25hdHVyZSBhbmQgcGFzc2VzIGluIGEgZGVmaW5pdGlvbiB3aGVyZSBldmVyeXRoaW5nIGV4Y2VwdCBmb3IgdGhlICdob29rcydcbiAgICAgICAgLy8gcHJvcGVydHkgbmVlZHMgdG8gYmUgY29waWVkLiBTbyB3ZSBoYXZlIHRoYXQgZXhjZXB0aW9uIGZvciAnaG9va3MnLCBidXQgd2UgbWF5IG5lZWQgdG8gcmV2aXNpdCB0aGF0IGRlZmF1bHQgYmVoYXZpb3JcbiAgICAgICAgLy8gaWYgdGhpcyB0dXJucyBvdXQgdG8gYmUgdG9vIG9waW5pb25hdGVkLlxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L3VuYm91bmQtbWV0aG9kXG4gICAgICAgIGNvbnN0IG5hbWUgPSBmcm9tRGVmaW5pdGlvbk9yRGVmYXVsdCgnbmFtZScsIG5hbWVPckRlZiwgQ3VzdG9tRWxlbWVudC5nZW5lcmF0ZU5hbWUpO1xuICAgICAgICByZXR1cm4gbmV3IEN1c3RvbUVsZW1lbnREZWZpbml0aW9uKFR5cGUsIG5hbWUsIG1lcmdlQXJyYXlzKEN1c3RvbUVsZW1lbnQuZ2V0QW5ub3RhdGlvbihUeXBlLCAnYWxpYXNlcycpLCBuYW1lT3JEZWYuYWxpYXNlcywgVHlwZS5hbGlhc2VzKSwgQ3VzdG9tRWxlbWVudC5rZXlGcm9tKG5hbWUpLCBmcm9tQW5ub3RhdGlvbk9yRGVmaW5pdGlvbk9yVHlwZU9yRGVmYXVsdCgnY2FjaGUnLCBuYW1lT3JEZWYsIFR5cGUsICgpID0+IDApLCBmcm9tQW5ub3RhdGlvbk9yRGVmaW5pdGlvbk9yVHlwZU9yRGVmYXVsdCgndGVtcGxhdGUnLCBuYW1lT3JEZWYsIFR5cGUsICgpID0+IG51bGwpLCBtZXJnZUFycmF5cyhDdXN0b21FbGVtZW50LmdldEFubm90YXRpb24oVHlwZSwgJ2luc3RydWN0aW9ucycpLCBuYW1lT3JEZWYuaW5zdHJ1Y3Rpb25zLCBUeXBlLmluc3RydWN0aW9ucyksIG1lcmdlQXJyYXlzKEN1c3RvbUVsZW1lbnQuZ2V0QW5ub3RhdGlvbihUeXBlLCAnZGVwZW5kZW5jaWVzJyksIG5hbWVPckRlZi5kZXBlbmRlbmNpZXMsIFR5cGUuZGVwZW5kZW5jaWVzKSwgZnJvbUFubm90YXRpb25PckRlZmluaXRpb25PclR5cGVPckRlZmF1bHQoJ2luamVjdGFibGUnLCBuYW1lT3JEZWYsIFR5cGUsICgpID0+IG51bGwpLCBmcm9tQW5ub3RhdGlvbk9yRGVmaW5pdGlvbk9yVHlwZU9yRGVmYXVsdCgnbmVlZHNDb21waWxlJywgbmFtZU9yRGVmLCBUeXBlLCAoKSA9PiB0cnVlKSwgbWVyZ2VBcnJheXMoQ3VzdG9tRWxlbWVudC5nZXRBbm5vdGF0aW9uKFR5cGUsICdzdXJyb2dhdGVzJyksIG5hbWVPckRlZi5zdXJyb2dhdGVzLCBUeXBlLnN1cnJvZ2F0ZXMpLCBCaW5kYWJsZS5mcm9tKC4uLkJpbmRhYmxlLmdldEFsbChUeXBlKSwgQ3VzdG9tRWxlbWVudC5nZXRBbm5vdGF0aW9uKFR5cGUsICdiaW5kYWJsZXMnKSwgVHlwZS5iaW5kYWJsZXMsIG5hbWVPckRlZi5iaW5kYWJsZXMpLCBDaGlsZHJlbi5mcm9tKC4uLkNoaWxkcmVuLmdldEFsbChUeXBlKSwgQ3VzdG9tRWxlbWVudC5nZXRBbm5vdGF0aW9uKFR5cGUsICdjaGlsZHJlbk9ic2VydmVycycpLCBUeXBlLmNoaWxkcmVuT2JzZXJ2ZXJzLCBuYW1lT3JEZWYuY2hpbGRyZW5PYnNlcnZlcnMpLCBmcm9tQW5ub3RhdGlvbk9yRGVmaW5pdGlvbk9yVHlwZU9yRGVmYXVsdCgnY29udGFpbmVybGVzcycsIG5hbWVPckRlZiwgVHlwZSwgKCkgPT4gZmFsc2UpLCBmcm9tQW5ub3RhdGlvbk9yRGVmaW5pdGlvbk9yVHlwZU9yRGVmYXVsdCgnaXNTdHJpY3RCaW5kaW5nJywgbmFtZU9yRGVmLCBUeXBlLCAoKSA9PiBmYWxzZSksIGZyb21Bbm5vdGF0aW9uT3JEZWZpbml0aW9uT3JUeXBlT3JEZWZhdWx0KCdzaGFkb3dPcHRpb25zJywgbmFtZU9yRGVmLCBUeXBlLCAoKSA9PiBudWxsKSwgZnJvbUFubm90YXRpb25PckRlZmluaXRpb25PclR5cGVPckRlZmF1bHQoJ2hhc1Nsb3RzJywgbmFtZU9yRGVmLCBUeXBlLCAoKSA9PiBmYWxzZSksIGZyb21Bbm5vdGF0aW9uT3JEZWZpbml0aW9uT3JUeXBlT3JEZWZhdWx0KCdzdHJhdGVneScsIG5hbWVPckRlZiwgVHlwZSwgKCkgPT4gMSAvKiBnZXR0ZXJTZXR0ZXIgKi8pLCBcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bm5lY2Vzc2FyeS10eXBlLWFzc2VydGlvblxuICAgICAgICBmcm9tQW5ub3RhdGlvbk9yVHlwZU9yRGVmYXVsdCgnaG9va3MnLCBUeXBlLCAoKSA9PiBuZXcgSG9va3NEZWZpbml0aW9uKFR5cGUucHJvdG90eXBlKSksIG1lcmdlQXJyYXlzKEN1c3RvbUVsZW1lbnQuZ2V0QW5ub3RhdGlvbihUeXBlLCAnc2NvcGVQYXJ0cycpLCBuYW1lT3JEZWYuc2NvcGVQYXJ0cywgVHlwZS5zY29wZVBhcnRzKSk7XG4gICAgfVxuICAgIHN0YXRpYyBnZXRPckNyZWF0ZShwYXJ0aWFsRGVmaW5pdGlvbikge1xuICAgICAgICBpZiAocGFydGlhbERlZmluaXRpb24gaW5zdGFuY2VvZiBDdXN0b21FbGVtZW50RGVmaW5pdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuIHBhcnRpYWxEZWZpbml0aW9uO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkZWZpbml0aW9uTG9va3VwLmhhcyhwYXJ0aWFsRGVmaW5pdGlvbikpIHtcbiAgICAgICAgICAgIHJldHVybiBkZWZpbml0aW9uTG9va3VwLmdldChwYXJ0aWFsRGVmaW5pdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGVmaW5pdGlvbiA9IEN1c3RvbUVsZW1lbnREZWZpbml0aW9uLmNyZWF0ZShwYXJ0aWFsRGVmaW5pdGlvbik7XG4gICAgICAgIGRlZmluaXRpb25Mb29rdXAuc2V0KHBhcnRpYWxEZWZpbml0aW9uLCBkZWZpbml0aW9uKTtcbiAgICAgICAgLy8gTWFrZSBzdXJlIHRoZSBmdWxsIGRlZmluaXRpb24gY2FuIGJlIHJldHJpZXZlZCBmcm9tIGR5bmFtaWNhbGx5IGNyZWF0ZWQgY2xhc3NlcyBhcyB3ZWxsXG4gICAgICAgIE1ldGFkYXRhLmRlZmluZShDdXN0b21FbGVtZW50Lm5hbWUsIGRlZmluaXRpb24sIGRlZmluaXRpb24uVHlwZSk7XG4gICAgICAgIHJldHVybiBkZWZpbml0aW9uO1xuICAgIH1cbiAgICByZWdpc3Rlcihjb250YWluZXIpIHtcbiAgICAgICAgY29uc3QgeyBUeXBlLCBrZXksIGFsaWFzZXMgfSA9IHRoaXM7XG4gICAgICAgIFJlZ2lzdHJhdGlvbi50cmFuc2llbnQoa2V5LCBUeXBlKS5yZWdpc3Rlcihjb250YWluZXIpO1xuICAgICAgICBSZWdpc3RyYXRpb24uYWxpYXNUbyhrZXksIFR5cGUpLnJlZ2lzdGVyKGNvbnRhaW5lcik7XG4gICAgICAgIHJlZ2lzdGVyQWxpYXNlcyhhbGlhc2VzLCBDdXN0b21FbGVtZW50LCBrZXksIGNvbnRhaW5lcik7XG4gICAgfVxufVxuZXhwb3J0IGNvbnN0IEN1c3RvbUVsZW1lbnQgPSB7XG4gICAgbmFtZTogUHJvdG9jb2wucmVzb3VyY2Uua2V5Rm9yKCdjdXN0b20tZWxlbWVudCcpLFxuICAgIGtleUZyb20obmFtZSkge1xuICAgICAgICByZXR1cm4gYCR7Q3VzdG9tRWxlbWVudC5uYW1lfToke25hbWV9YDtcbiAgICB9LFxuICAgIGlzVHlwZSh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nICYmIE1ldGFkYXRhLmhhc093bihDdXN0b21FbGVtZW50Lm5hbWUsIHZhbHVlKTtcbiAgICB9LFxuICAgIGZvcihub2RlLCBuYW1lT3JTZWFyY2hQYXJlbnRzLCBzZWFyY2hQYXJlbnRzKSB7XG4gICAgICAgIGlmIChuYW1lT3JTZWFyY2hQYXJlbnRzID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIHJldHVybiBNZXRhZGF0YS5nZXRPd24oQ3VzdG9tRWxlbWVudC5uYW1lLCBub2RlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIG5hbWVPclNlYXJjaFBhcmVudHMgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBpZiAoc2VhcmNoUGFyZW50cyAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRyb2xsZXIgPSBNZXRhZGF0YS5nZXRPd24oQ3VzdG9tRWxlbWVudC5uYW1lLCBub2RlKTtcbiAgICAgICAgICAgICAgICBpZiAoY29udHJvbGxlciA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAodm9pZCAwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGNvbnRyb2xsZXIuaXMobmFtZU9yU2VhcmNoUGFyZW50cykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRyb2xsZXI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiAodm9pZCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBjdXIgPSBub2RlO1xuICAgICAgICAgICAgd2hpbGUgKGN1ciAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRyb2xsZXIgPSBNZXRhZGF0YS5nZXRPd24oQ3VzdG9tRWxlbWVudC5uYW1lLCBjdXIpO1xuICAgICAgICAgICAgICAgIGlmIChjb250cm9sbGVyICE9PSB2b2lkIDAgJiYgY29udHJvbGxlci5pcyhuYW1lT3JTZWFyY2hQYXJlbnRzKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udHJvbGxlcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY3VyID0gRE9NLmdldEVmZmVjdGl2ZVBhcmVudE5vZGUoY3VyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAodm9pZCAwKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY3VyID0gbm9kZTtcbiAgICAgICAgd2hpbGUgKGN1ciAhPT0gbnVsbCkge1xuICAgICAgICAgICAgY29uc3QgY29udHJvbGxlciA9IE1ldGFkYXRhLmdldE93bihDdXN0b21FbGVtZW50Lm5hbWUsIGN1cik7XG4gICAgICAgICAgICBpZiAoY29udHJvbGxlciAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRyb2xsZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdXIgPSBET00uZ2V0RWZmZWN0aXZlUGFyZW50Tm9kZShjdXIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAodm9pZCAwKTtcbiAgICB9LFxuICAgIGRlZmluZShuYW1lT3JEZWYsIFR5cGUpIHtcbiAgICAgICAgY29uc3QgZGVmaW5pdGlvbiA9IEN1c3RvbUVsZW1lbnREZWZpbml0aW9uLmNyZWF0ZShuYW1lT3JEZWYsIFR5cGUpO1xuICAgICAgICBNZXRhZGF0YS5kZWZpbmUoQ3VzdG9tRWxlbWVudC5uYW1lLCBkZWZpbml0aW9uLCBkZWZpbml0aW9uLlR5cGUpO1xuICAgICAgICBNZXRhZGF0YS5kZWZpbmUoQ3VzdG9tRWxlbWVudC5uYW1lLCBkZWZpbml0aW9uLCBkZWZpbml0aW9uKTtcbiAgICAgICAgUHJvdG9jb2wucmVzb3VyY2UuYXBwZW5kVG8oZGVmaW5pdGlvbi5UeXBlLCBDdXN0b21FbGVtZW50Lm5hbWUpO1xuICAgICAgICByZXR1cm4gZGVmaW5pdGlvbi5UeXBlO1xuICAgIH0sXG4gICAgZ2V0RGVmaW5pdGlvbihUeXBlKSB7XG4gICAgICAgIGNvbnN0IGRlZiA9IE1ldGFkYXRhLmdldE93bihDdXN0b21FbGVtZW50Lm5hbWUsIFR5cGUpO1xuICAgICAgICBpZiAoZGVmID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgTm8gZGVmaW5pdGlvbiBmb3VuZCBmb3IgdHlwZSAke1R5cGUubmFtZX1gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGVmO1xuICAgIH0sXG4gICAgYW5ub3RhdGUoVHlwZSwgcHJvcCwgdmFsdWUpIHtcbiAgICAgICAgTWV0YWRhdGEuZGVmaW5lKFByb3RvY29sLmFubm90YXRpb24ua2V5Rm9yKHByb3ApLCB2YWx1ZSwgVHlwZSk7XG4gICAgfSxcbiAgICBnZXRBbm5vdGF0aW9uKFR5cGUsIHByb3ApIHtcbiAgICAgICAgcmV0dXJuIE1ldGFkYXRhLmdldE93bihQcm90b2NvbC5hbm5vdGF0aW9uLmtleUZvcihwcm9wKSwgVHlwZSk7XG4gICAgfSxcbiAgICBnZW5lcmF0ZU5hbWU6IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGxldCBpZCA9IDA7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gYHVubmFtZWQtJHsrK2lkfWA7XG4gICAgICAgIH07XG4gICAgfSkoKSxcbiAgICBjcmVhdGVJbmplY3RhYmxlKCkge1xuICAgICAgICBjb25zdCAkaW5qZWN0YWJsZSA9IGZ1bmN0aW9uICh0YXJnZXQsIHByb3BlcnR5LCBpbmRleCkge1xuICAgICAgICAgICAgY29uc3QgYW5ub3RhdGlvblBhcmFtdHlwZXMgPSBESS5nZXRPckNyZWF0ZUFubm90YXRpb25QYXJhbVR5cGVzKHRhcmdldCk7XG4gICAgICAgICAgICBhbm5vdGF0aW9uUGFyYW10eXBlc1tpbmRleF0gPSAkaW5qZWN0YWJsZTtcbiAgICAgICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgICAgIH07XG4gICAgICAgICRpbmplY3RhYmxlLnJlZ2lzdGVyID0gZnVuY3Rpb24gKGNvbnRhaW5lcikge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9jb25zaXN0ZW50LXR5cGUtYXNzZXJ0aW9uc1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKGNvbnRhaW5lciwgcmVxdWVzdG9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXF1ZXN0b3IuaGFzKCRpbmplY3RhYmxlLCB0cnVlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcXVlc3Rvci5nZXQoJGluamVjdGFibGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuICRpbmplY3RhYmxlO1xuICAgIH0sXG4gICAgZ2VuZXJhdGVUeXBlOiAoZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zdCBuYW1lRGVzY3JpcHRvciA9IHtcbiAgICAgICAgICAgIHZhbHVlOiAnJyxcbiAgICAgICAgICAgIHdyaXRhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICB9O1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBjb25zdCBkZWZhdWx0UHJvdG8gPSB7fTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChuYW1lLCBwcm90byA9IGRlZmF1bHRQcm90bykge1xuICAgICAgICAgICAgLy8gQW5vbnltb3VzIGNsYXNzIGVuc3VyZXMgdGhhdCBtaW5pZmljYXRpb24gY2Fubm90IGNhdXNlIHVuaW50ZW5kZWQgc2lkZS1lZmZlY3RzLCBhbmQga2VlcHMgdGhlIGNsYXNzXG4gICAgICAgICAgICAvLyBsb29raW5nIHNpbWlsYXJseSBmcm9tIHRoZSBvdXRzaWRlICh3aGVuIGluc3BlY3RlZCB2aWEgZGVidWdnZXIsIGV0YykuXG4gICAgICAgICAgICBjb25zdCBUeXBlID0gY2xhc3Mge1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8vIERlZmluZSB0aGUgbmFtZSBwcm9wZXJ0eSBzbyB0aGF0IFR5cGUubmFtZSBjYW4gYmUgdXNlZCBieSBlbmQgdXNlcnMgLyBwbHVnaW4gYXV0aG9ycyBpZiB0aGV5IHJlYWxseSBuZWVkIHRvLFxuICAgICAgICAgICAgLy8gZXZlbiB3aGVuIG1pbmlmaWVkLlxuICAgICAgICAgICAgbmFtZURlc2NyaXB0b3IudmFsdWUgPSBuYW1lO1xuICAgICAgICAgICAgUmVmbGVjdC5kZWZpbmVQcm9wZXJ0eShUeXBlLCAnbmFtZScsIG5hbWVEZXNjcmlwdG9yKTtcbiAgICAgICAgICAgIC8vIEFzc2lnbiBhbnl0aGluZyBmcm9tIHRoZSBwcm90b3R5cGUgdGhhdCB3YXMgcGFzc2VkIGluXG4gICAgICAgICAgICBpZiAocHJvdG8gIT09IGRlZmF1bHRQcm90bykge1xuICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oVHlwZS5wcm90b3R5cGUsIHByb3RvKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBUeXBlO1xuICAgICAgICB9O1xuICAgIH0pKCksXG59O1xuZXhwb3J0IGNvbnN0IElQcm9qZWN0b3JMb2NhdG9yID0gREkuY3JlYXRlSW50ZXJmYWNlKCdJUHJvamVjdG9yTG9jYXRvcicpLm5vRGVmYXVsdCgpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y3VzdG9tLWVsZW1lbnQuanMubWFwIiwiaW1wb3J0IHsgUmVnaXN0cmF0aW9uLCBNZXRhZGF0YSwgUHJvdG9jb2wsIG1lcmdlQXJyYXlzLCBmaXJzdERlZmluZWQsIH0gZnJvbSAnQGF1cmVsaWEva2VybmVsJztcbmltcG9ydCB7IHJlZ2lzdGVyQWxpYXNlcyB9IGZyb20gJy4uL2RlZmluaXRpb25zJztcbmV4cG9ydCBmdW5jdGlvbiB2YWx1ZUNvbnZlcnRlcihuYW1lT3JEZWYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICByZXR1cm4gVmFsdWVDb252ZXJ0ZXIuZGVmaW5lKG5hbWVPckRlZiwgdGFyZ2V0KTtcbiAgICB9O1xufVxuZXhwb3J0IGNsYXNzIFZhbHVlQ29udmVydGVyRGVmaW5pdGlvbiB7XG4gICAgY29uc3RydWN0b3IoVHlwZSwgbmFtZSwgYWxpYXNlcywga2V5KSB7XG4gICAgICAgIHRoaXMuVHlwZSA9IFR5cGU7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMuYWxpYXNlcyA9IGFsaWFzZXM7XG4gICAgICAgIHRoaXMua2V5ID0ga2V5O1xuICAgIH1cbiAgICBzdGF0aWMgY3JlYXRlKG5hbWVPckRlZiwgVHlwZSkge1xuICAgICAgICBsZXQgbmFtZTtcbiAgICAgICAgbGV0IGRlZjtcbiAgICAgICAgaWYgKHR5cGVvZiBuYW1lT3JEZWYgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBuYW1lID0gbmFtZU9yRGVmO1xuICAgICAgICAgICAgZGVmID0geyBuYW1lIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBuYW1lID0gbmFtZU9yRGVmLm5hbWU7XG4gICAgICAgICAgICBkZWYgPSBuYW1lT3JEZWY7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBWYWx1ZUNvbnZlcnRlckRlZmluaXRpb24oVHlwZSwgZmlyc3REZWZpbmVkKFZhbHVlQ29udmVydGVyLmdldEFubm90YXRpb24oVHlwZSwgJ25hbWUnKSwgbmFtZSksIG1lcmdlQXJyYXlzKFZhbHVlQ29udmVydGVyLmdldEFubm90YXRpb24oVHlwZSwgJ2FsaWFzZXMnKSwgZGVmLmFsaWFzZXMsIFR5cGUuYWxpYXNlcyksIFZhbHVlQ29udmVydGVyLmtleUZyb20obmFtZSkpO1xuICAgIH1cbiAgICByZWdpc3Rlcihjb250YWluZXIpIHtcbiAgICAgICAgY29uc3QgeyBUeXBlLCBrZXksIGFsaWFzZXMgfSA9IHRoaXM7XG4gICAgICAgIFJlZ2lzdHJhdGlvbi5zaW5nbGV0b24oa2V5LCBUeXBlKS5yZWdpc3Rlcihjb250YWluZXIpO1xuICAgICAgICBSZWdpc3RyYXRpb24uYWxpYXNUbyhrZXksIFR5cGUpLnJlZ2lzdGVyKGNvbnRhaW5lcik7XG4gICAgICAgIHJlZ2lzdGVyQWxpYXNlcyhhbGlhc2VzLCBWYWx1ZUNvbnZlcnRlciwga2V5LCBjb250YWluZXIpO1xuICAgIH1cbn1cbmV4cG9ydCBjb25zdCBWYWx1ZUNvbnZlcnRlciA9IHtcbiAgICBuYW1lOiBQcm90b2NvbC5yZXNvdXJjZS5rZXlGb3IoJ3ZhbHVlLWNvbnZlcnRlcicpLFxuICAgIGtleUZyb20obmFtZSkge1xuICAgICAgICByZXR1cm4gYCR7VmFsdWVDb252ZXJ0ZXIubmFtZX06JHtuYW1lfWA7XG4gICAgfSxcbiAgICBpc1R5cGUodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJyAmJiBNZXRhZGF0YS5oYXNPd24oVmFsdWVDb252ZXJ0ZXIubmFtZSwgdmFsdWUpO1xuICAgIH0sXG4gICAgZGVmaW5lKG5hbWVPckRlZiwgVHlwZSkge1xuICAgICAgICBjb25zdCBkZWZpbml0aW9uID0gVmFsdWVDb252ZXJ0ZXJEZWZpbml0aW9uLmNyZWF0ZShuYW1lT3JEZWYsIFR5cGUpO1xuICAgICAgICBNZXRhZGF0YS5kZWZpbmUoVmFsdWVDb252ZXJ0ZXIubmFtZSwgZGVmaW5pdGlvbiwgZGVmaW5pdGlvbi5UeXBlKTtcbiAgICAgICAgTWV0YWRhdGEuZGVmaW5lKFZhbHVlQ29udmVydGVyLm5hbWUsIGRlZmluaXRpb24sIGRlZmluaXRpb24pO1xuICAgICAgICBQcm90b2NvbC5yZXNvdXJjZS5hcHBlbmRUbyhUeXBlLCBWYWx1ZUNvbnZlcnRlci5uYW1lKTtcbiAgICAgICAgcmV0dXJuIGRlZmluaXRpb24uVHlwZTtcbiAgICB9LFxuICAgIGdldERlZmluaXRpb24oVHlwZSkge1xuICAgICAgICBjb25zdCBkZWYgPSBNZXRhZGF0YS5nZXRPd24oVmFsdWVDb252ZXJ0ZXIubmFtZSwgVHlwZSk7XG4gICAgICAgIGlmIChkZWYgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBObyBkZWZpbml0aW9uIGZvdW5kIGZvciB0eXBlICR7VHlwZS5uYW1lfWApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkZWY7XG4gICAgfSxcbiAgICBhbm5vdGF0ZShUeXBlLCBwcm9wLCB2YWx1ZSkge1xuICAgICAgICBNZXRhZGF0YS5kZWZpbmUoUHJvdG9jb2wuYW5ub3RhdGlvbi5rZXlGb3IocHJvcCksIHZhbHVlLCBUeXBlKTtcbiAgICB9LFxuICAgIGdldEFubm90YXRpb24oVHlwZSwgcHJvcCkge1xuICAgICAgICByZXR1cm4gTWV0YWRhdGEuZ2V0T3duKFByb3RvY29sLmFubm90YXRpb24ua2V5Rm9yKHByb3ApLCBUeXBlKTtcbiAgICB9LFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXZhbHVlLWNvbnZlcnRlci5qcy5tYXAiLCJpbXBvcnQgeyBfX2RlY29yYXRlLCBfX21ldGFkYXRhLCBfX3BhcmFtIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBESSB9IGZyb20gJ0BhdXJlbGlhL2tlcm5lbCc7XG5pbXBvcnQgeyB2YWx1ZUNvbnZlcnRlciB9IGZyb20gJy4uL3ZhbHVlLWNvbnZlcnRlcic7XG5jb25zdCBTQ1JJUFRfUkVHRVggPSAvPHNjcmlwdFxcYltePF0qKD86KD8hPFxcL3NjcmlwdD4pPFtePF0qKSo8XFwvc2NyaXB0Pi9naTtcbmV4cG9ydCBjb25zdCBJU2FuaXRpemVyID0gREkuY3JlYXRlSW50ZXJmYWNlKCdJU2FuaXRpemVyJykud2l0aERlZmF1bHQoeCA9PiB4LnNpbmdsZXRvbihjbGFzcyB7XG4gICAgc2FuaXRpemUoaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIGlucHV0LnJlcGxhY2UoU0NSSVBUX1JFR0VYLCAnJyk7XG4gICAgfVxufSkpO1xuLyoqXG4gKiBTaW1wbGUgaHRtbCBzYW5pdGl6YXRpb24gY29udmVydGVyIHRvIHByZXNlcnZlIHdoaXRlbGlzdGVkIGVsZW1lbnRzIGFuZCBhdHRyaWJ1dGVzIG9uIGEgYm91bmQgcHJvcGVydHkgY29udGFpbmluZyBodG1sLlxuICovXG5sZXQgU2FuaXRpemVWYWx1ZUNvbnZlcnRlciA9IGNsYXNzIFNhbml0aXplVmFsdWVDb252ZXJ0ZXIge1xuICAgIGNvbnN0cnVjdG9yKHNhbml0aXplcikge1xuICAgICAgICB0aGlzLnNhbml0aXplciA9IHNhbml0aXplcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJvY2VzcyB0aGUgcHJvdmlkZWQgbWFya3VwIHRoYXQgZmxvd3MgdG8gdGhlIHZpZXcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdW50cnVzdGVkTWFya3VwIC0gVGhlIHVudHJ1c3RlZCBtYXJrdXAgdG8gYmUgc2FuaXRpemVkLlxuICAgICAqL1xuICAgIHRvVmlldyh1bnRydXN0ZWRNYXJrdXApIHtcbiAgICAgICAgaWYgKHVudHJ1c3RlZE1hcmt1cCA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5zYW5pdGl6ZXIuc2FuaXRpemUodW50cnVzdGVkTWFya3VwKTtcbiAgICB9XG59O1xuU2FuaXRpemVWYWx1ZUNvbnZlcnRlciA9IF9fZGVjb3JhdGUoW1xuICAgIHZhbHVlQ29udmVydGVyKCdzYW5pdGl6ZScpLFxuICAgIF9fcGFyYW0oMCwgSVNhbml0aXplciksXG4gICAgX19tZXRhZGF0YShcImRlc2lnbjpwYXJhbXR5cGVzXCIsIFtPYmplY3RdKVxuXSwgU2FuaXRpemVWYWx1ZUNvbnZlcnRlcik7XG5leHBvcnQgeyBTYW5pdGl6ZVZhbHVlQ29udmVydGVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zYW5pdGl6ZS5qcy5tYXAiLCJpbXBvcnQgeyBfX2RlY29yYXRlLCBfX21ldGFkYXRhLCBfX3BhcmFtIH0gZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBJVmlld0xvY2F0b3IgfSBmcm9tICcuLi8uLi90ZW1wbGF0aW5nL3ZpZXcnO1xuaW1wb3J0IHsgdmFsdWVDb252ZXJ0ZXIgfSBmcm9tICcuLi92YWx1ZS1jb252ZXJ0ZXInO1xubGV0IFZpZXdWYWx1ZUNvbnZlcnRlciA9IGNsYXNzIFZpZXdWYWx1ZUNvbnZlcnRlciB7XG4gICAgY29uc3RydWN0b3Iodmlld0xvY2F0b3IpIHtcbiAgICAgICAgdGhpcy52aWV3TG9jYXRvciA9IHZpZXdMb2NhdG9yO1xuICAgIH1cbiAgICB0b1ZpZXcob2JqZWN0LCB2aWV3TmFtZU9yU2VsZWN0b3IpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmlld0xvY2F0b3IuZ2V0Vmlld0NvbXBvbmVudEZvck9iamVjdChvYmplY3QsIHZpZXdOYW1lT3JTZWxlY3Rvcik7XG4gICAgfVxufTtcblZpZXdWYWx1ZUNvbnZlcnRlciA9IF9fZGVjb3JhdGUoW1xuICAgIHZhbHVlQ29udmVydGVyKCd2aWV3JyksXG4gICAgX19wYXJhbSgwLCBJVmlld0xvY2F0b3IpLFxuICAgIF9fbWV0YWRhdGEoXCJkZXNpZ246cGFyYW10eXBlc1wiLCBbT2JqZWN0XSlcbl0sIFZpZXdWYWx1ZUNvbnZlcnRlcik7XG5leHBvcnQgeyBWaWV3VmFsdWVDb252ZXJ0ZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXZpZXcuanMubWFwIiwiaW1wb3J0IHsgX19kZWNvcmF0ZSwgX19tZXRhZGF0YSB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsga2ViYWJDYXNlLCBNZXRhZGF0YSwgUHJvdG9jb2wsIGZpcnN0RGVmaW5lZCwgZ2V0UHJvdG90eXBlQ2hhaW4sIFBMQVRGT1JNLCB9IGZyb20gJ0BhdXJlbGlhL2tlcm5lbCc7XG5pbXBvcnQgeyBCaW5kaW5nTW9kZSwgfSBmcm9tICcuLi9mbGFncyc7XG5leHBvcnQgZnVuY3Rpb24gYmluZGFibGUoY29uZmlnT3JUYXJnZXQsIHByb3ApIHtcbiAgICBsZXQgY29uZmlnO1xuICAgIGZ1bmN0aW9uIGRlY29yYXRvcigkdGFyZ2V0LCAkcHJvcCkge1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIC8vIE5vbiBpbnZvY2F0aW9uOlxuICAgICAgICAgICAgLy8gLSBAYmluZGFibGVcbiAgICAgICAgICAgIC8vIEludm9jYXRpb24gd2l0aCBvciB3L28gb3B0czpcbiAgICAgICAgICAgIC8vIC0gQGJpbmRhYmxlKClcbiAgICAgICAgICAgIC8vIC0gQGJpbmRhYmxlKHsuLi5vcHRzfSlcbiAgICAgICAgICAgIGNvbmZpZy5wcm9wZXJ0eSA9ICRwcm9wO1xuICAgICAgICB9XG4gICAgICAgIE1ldGFkYXRhLmRlZmluZShCaW5kYWJsZS5uYW1lLCBCaW5kYWJsZURlZmluaXRpb24uY3JlYXRlKCRwcm9wLCBjb25maWcpLCAkdGFyZ2V0LmNvbnN0cnVjdG9yLCAkcHJvcCk7XG4gICAgICAgIFByb3RvY29sLmFubm90YXRpb24uYXBwZW5kVG8oJHRhcmdldC5jb25zdHJ1Y3RvciwgQmluZGFibGUua2V5RnJvbSgkcHJvcCkpO1xuICAgIH1cbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgLy8gTm9uIGludm9jYXRpb246XG4gICAgICAgIC8vIC0gQGJpbmRhYmxlXG4gICAgICAgIGNvbmZpZyA9IHt9O1xuICAgICAgICBkZWNvcmF0b3IoY29uZmlnT3JUYXJnZXQsIHByb3ApO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBjb25maWdPclRhcmdldCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgLy8gQ2xhc3NEZWNvcmF0b3JcbiAgICAgICAgLy8gLSBAYmluZGFibGUoJ2JhcicpXG4gICAgICAgIC8vIERpcmVjdCBjYWxsOlxuICAgICAgICAvLyAtIEBiaW5kYWJsZSgnYmFyJykoRm9vKVxuICAgICAgICBjb25maWcgPSB7fTtcbiAgICAgICAgcmV0dXJuIGRlY29yYXRvcjtcbiAgICB9XG4gICAgLy8gSW52b2NhdGlvbiB3aXRoIG9yIHcvbyBvcHRzOlxuICAgIC8vIC0gQGJpbmRhYmxlKClcbiAgICAvLyAtIEBiaW5kYWJsZSh7Li4ub3B0c30pXG4gICAgY29uZmlnID0gY29uZmlnT3JUYXJnZXQgPT09IHZvaWQgMCA/IHt9IDogY29uZmlnT3JUYXJnZXQ7XG4gICAgcmV0dXJuIGRlY29yYXRvcjtcbn1cbmZ1bmN0aW9uIGlzQmluZGFibGVBbm5vdGF0aW9uKGtleSkge1xuICAgIHJldHVybiBrZXkuc3RhcnRzV2l0aChCaW5kYWJsZS5uYW1lKTtcbn1cbmV4cG9ydCBjb25zdCBCaW5kYWJsZSA9IHtcbiAgICBuYW1lOiBQcm90b2NvbC5hbm5vdGF0aW9uLmtleUZvcignYmluZGFibGUnKSxcbiAgICBrZXlGcm9tKG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIGAke0JpbmRhYmxlLm5hbWV9OiR7bmFtZX1gO1xuICAgIH0sXG4gICAgZnJvbSguLi5iaW5kYWJsZUxpc3RzKSB7XG4gICAgICAgIGNvbnN0IGJpbmRhYmxlcyA9IHt9O1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L3VuYm91bmQtbWV0aG9kXG4gICAgICAgIGNvbnN0IGlzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xuICAgICAgICBmdW5jdGlvbiBhZGROYW1lKG5hbWUpIHtcbiAgICAgICAgICAgIGJpbmRhYmxlc1tuYW1lXSA9IEJpbmRhYmxlRGVmaW5pdGlvbi5jcmVhdGUobmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gYWRkRGVzY3JpcHRpb24obmFtZSwgZGVmKSB7XG4gICAgICAgICAgICBiaW5kYWJsZXNbbmFtZV0gPSBkZWYgaW5zdGFuY2VvZiBCaW5kYWJsZURlZmluaXRpb24gPyBkZWYgOiBCaW5kYWJsZURlZmluaXRpb24uY3JlYXRlKG5hbWUsIGRlZik7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gYWRkTGlzdChtYXliZUxpc3QpIHtcbiAgICAgICAgICAgIGlmIChpc0FycmF5KG1heWJlTGlzdCkpIHtcbiAgICAgICAgICAgICAgICBtYXliZUxpc3QuZm9yRWFjaChhZGROYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG1heWJlTGlzdCBpbnN0YW5jZW9mIEJpbmRhYmxlRGVmaW5pdGlvbikge1xuICAgICAgICAgICAgICAgIGJpbmRhYmxlc1ttYXliZUxpc3QucHJvcGVydHldID0gbWF5YmVMaXN0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobWF5YmVMaXN0ICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhtYXliZUxpc3QpLmZvckVhY2gobmFtZSA9PiBhZGREZXNjcmlwdGlvbihuYW1lLCBtYXliZUxpc3RbbmFtZV0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBiaW5kYWJsZUxpc3RzLmZvckVhY2goYWRkTGlzdCk7XG4gICAgICAgIHJldHVybiBiaW5kYWJsZXM7XG4gICAgfSxcbiAgICBmb3IoVHlwZSkge1xuICAgICAgICBsZXQgZGVmO1xuICAgICAgICBjb25zdCBidWlsZGVyID0ge1xuICAgICAgICAgICAgYWRkKGNvbmZpZ09yUHJvcCkge1xuICAgICAgICAgICAgICAgIGxldCBwcm9wO1xuICAgICAgICAgICAgICAgIGxldCBjb25maWc7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjb25maWdPclByb3AgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb3AgPSBjb25maWdPclByb3A7XG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZyA9IHsgcHJvcGVydHk6IHByb3AgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHByb3AgPSBjb25maWdPclByb3AucHJvcGVydHk7XG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZyA9IGNvbmZpZ09yUHJvcDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZGVmID0gQmluZGFibGVEZWZpbml0aW9uLmNyZWF0ZShwcm9wLCBjb25maWcpO1xuICAgICAgICAgICAgICAgIGlmICghTWV0YWRhdGEuaGFzT3duKEJpbmRhYmxlLm5hbWUsIFR5cGUsIHByb3ApKSB7XG4gICAgICAgICAgICAgICAgICAgIFByb3RvY29sLmFubm90YXRpb24uYXBwZW5kVG8oVHlwZSwgQmluZGFibGUua2V5RnJvbShwcm9wKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIE1ldGFkYXRhLmRlZmluZShCaW5kYWJsZS5uYW1lLCBkZWYsIFR5cGUsIHByb3ApO1xuICAgICAgICAgICAgICAgIHJldHVybiBidWlsZGVyO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1vZGUobW9kZSkge1xuICAgICAgICAgICAgICAgIGRlZi5tb2RlID0gbW9kZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYnVpbGRlcjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjYWxsYmFjayhjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIGRlZi5jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgICAgICAgICAgICAgIHJldHVybiBidWlsZGVyO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGF0dHJpYnV0ZShhdHRyaWJ1dGUpIHtcbiAgICAgICAgICAgICAgICBkZWYuYXR0cmlidXRlID0gYXR0cmlidXRlO1xuICAgICAgICAgICAgICAgIHJldHVybiBidWlsZGVyO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHByaW1hcnkoKSB7XG4gICAgICAgICAgICAgICAgZGVmLnByaW1hcnkgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHJldHVybiBidWlsZGVyO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldChzZXRJbnRlcnByZXRlcikge1xuICAgICAgICAgICAgICAgIGRlZi5zZXQgPSBzZXRJbnRlcnByZXRlcjtcbiAgICAgICAgICAgICAgICByZXR1cm4gYnVpbGRlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGJ1aWxkZXI7XG4gICAgfSxcbiAgICBnZXRBbGwoVHlwZSkge1xuICAgICAgICBjb25zdCBwcm9wU3RhcnQgPSBCaW5kYWJsZS5uYW1lLmxlbmd0aCArIDE7XG4gICAgICAgIGNvbnN0IGRlZnMgPSBbXTtcbiAgICAgICAgY29uc3QgcHJvdG90eXBlQ2hhaW4gPSBnZXRQcm90b3R5cGVDaGFpbihUeXBlKTtcbiAgICAgICAgbGV0IGlQcm90byA9IHByb3RvdHlwZUNoYWluLmxlbmd0aDtcbiAgICAgICAgbGV0IGlEZWZzID0gMDtcbiAgICAgICAgbGV0IGtleXM7XG4gICAgICAgIGxldCBrZXlzTGVuO1xuICAgICAgICBsZXQgQ2xhc3M7XG4gICAgICAgIHdoaWxlICgtLWlQcm90byA+PSAwKSB7XG4gICAgICAgICAgICBDbGFzcyA9IHByb3RvdHlwZUNoYWluW2lQcm90b107XG4gICAgICAgICAgICBrZXlzID0gUHJvdG9jb2wuYW5ub3RhdGlvbi5nZXRLZXlzKENsYXNzKS5maWx0ZXIoaXNCaW5kYWJsZUFubm90YXRpb24pO1xuICAgICAgICAgICAga2V5c0xlbiA9IGtleXMubGVuZ3RoO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBrZXlzTGVuOyArK2kpIHtcbiAgICAgICAgICAgICAgICBkZWZzW2lEZWZzKytdID0gTWV0YWRhdGEuZ2V0T3duKEJpbmRhYmxlLm5hbWUsIENsYXNzLCBrZXlzW2ldLnNsaWNlKHByb3BTdGFydCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkZWZzO1xuICAgIH0sXG59O1xuZXhwb3J0IGNsYXNzIEJpbmRhYmxlRGVmaW5pdGlvbiB7XG4gICAgY29uc3RydWN0b3IoYXR0cmlidXRlLCBjYWxsYmFjaywgbW9kZSwgcHJpbWFyeSwgcHJvcGVydHksIHNldCkge1xuICAgICAgICB0aGlzLmF0dHJpYnV0ZSA9IGF0dHJpYnV0ZTtcbiAgICAgICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgICAgICB0aGlzLm1vZGUgPSBtb2RlO1xuICAgICAgICB0aGlzLnByaW1hcnkgPSBwcmltYXJ5O1xuICAgICAgICB0aGlzLnByb3BlcnR5ID0gcHJvcGVydHk7XG4gICAgICAgIHRoaXMuc2V0ID0gc2V0O1xuICAgIH1cbiAgICBzdGF0aWMgY3JlYXRlKHByb3AsIGRlZiA9IHt9KSB7XG4gICAgICAgIHJldHVybiBuZXcgQmluZGFibGVEZWZpbml0aW9uKGZpcnN0RGVmaW5lZChkZWYuYXR0cmlidXRlLCBrZWJhYkNhc2UocHJvcCkpLCBmaXJzdERlZmluZWQoZGVmLmNhbGxiYWNrLCBgJHtwcm9wfUNoYW5nZWRgKSwgZmlyc3REZWZpbmVkKGRlZi5tb2RlLCBCaW5kaW5nTW9kZS50b1ZpZXcpLCBmaXJzdERlZmluZWQoZGVmLnByaW1hcnksIGZhbHNlKSwgZmlyc3REZWZpbmVkKGRlZi5wcm9wZXJ0eSwgcHJvcCksIGZpcnN0RGVmaW5lZChkZWYuc2V0LCBQTEFURk9STS5ub29wKSk7XG4gICAgfVxufVxuLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzLHNwYWNlZC1jb21tZW50ICovXG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gc2VydmVzIHR3byBwdXJwb3NlczpcbiAqIC0gQSBwbGF5Z3JvdW5kIGZvciBjb250cmlidXRvcnMgdG8gdHJ5IHRoZWlyIGNoYW5nZXMgdG8gdGhlIEFQSXMuXG4gKiAtIENhdXNlIHRoZSBBUEkgc3VyZmFjZSB0byBiZSBwcm9wZXJseSB0eXBlLWNoZWNrZWQgYW5kIHByb3RlY3RlZCBhZ2FpbnN0IGFjY2lkZW50YWwgdHlwZSByZWdyZXNzaW9ucy5cbiAqXG4gKiBJdCB3aWxsIGJlIGF1dG9tYXRpY2FsbHkgcmVtb3ZlZCBieSBkZWFkIGNvZGUgZWxpbWluYXRpb24uXG4gKi9cbmZ1bmN0aW9uIGFwaVR5cGVDaGVjaygpIHtcbiAgICBsZXQgRm9vID0gXG4gICAgLy8gPiBleHBlY3RlZCBlcnJvciAtIGNsYXNzIGRlY29yYXRvciBvbmx5IGFjY2VwdHMgYSBzdHJpbmdcbiAgICAvL0BiaW5kYWJsZSh7fSlcbiAgICBjbGFzcyBGb28ge1xuICAgIH07XG4gICAgX19kZWNvcmF0ZShbXG4gICAgICAgIGJpbmRhYmxlLFxuICAgICAgICBiaW5kYWJsZSgpLFxuICAgICAgICBiaW5kYWJsZSh7fSlcbiAgICAgICAgLy8gPiBleHBlY3RlZCBlcnJvciAtICdwcm9wZXJ0eScgZG9lcyBub3QgZXhpc3Qgb24gZGVjb3JhdG9yIGlucHV0IG9iamVjdFxuICAgICAgICAvL0BiaW5kYWJsZSh7IHByb3BlcnR5OiAncHJvcCcgfSlcbiAgICAgICAgLFxuICAgICAgICBiaW5kYWJsZSh7IG1vZGU6IEJpbmRpbmdNb2RlLnR3b1dheSB9KSxcbiAgICAgICAgYmluZGFibGUoeyBjYWxsYmFjazogJ3Byb3BDaGFuZ2VkJyB9KSxcbiAgICAgICAgYmluZGFibGUoeyBhdHRyaWJ1dGU6ICdwcm9wJyB9KSxcbiAgICAgICAgYmluZGFibGUoeyBwcmltYXJ5OiB0cnVlIH0pLFxuICAgICAgICBiaW5kYWJsZSh7IHNldDogdmFsdWUgPT4gU3RyaW5nKHZhbHVlKSB9KSxcbiAgICAgICAgYmluZGFibGUoeyBzZXQ6IHZhbHVlID0+IE51bWJlcih2YWx1ZSkgfSksXG4gICAgICAgIGJpbmRhYmxlKHtcbiAgICAgICAgICAgIG1vZGU6IEJpbmRpbmdNb2RlLnR3b1dheSxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAncHJvcENoYW5nZWQnLFxuICAgICAgICAgICAgYXR0cmlidXRlOiAncHJvcCcsXG4gICAgICAgICAgICBwcmltYXJ5OiB0cnVlLFxuICAgICAgICAgICAgc2V0OiB2YWx1ZSA9PiBTdHJpbmcodmFsdWUpXG4gICAgICAgIH0pLFxuICAgICAgICBfX21ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgT2JqZWN0KVxuICAgIF0sIEZvby5wcm90b3R5cGUsIFwicHJvcFwiLCB2b2lkIDApO1xuICAgIEZvbyA9IF9fZGVjb3JhdGUoW1xuICAgICAgICBiaW5kYWJsZSgncHJvcCcpXG4gICAgICAgIC8vID4gZXhwZWN0ZWQgZXJyb3IgLSBjbGFzcyBkZWNvcmF0b3Igb25seSBhY2NlcHRzIGEgc3RyaW5nXG4gICAgICAgIC8vQGJpbmRhYmxlKHt9KVxuICAgIF0sIEZvbyk7XG4gICAgQmluZGFibGUuZm9yKEZvbylcbiAgICAgICAgLy8gPiBleHBlY3RlZCBlcnJvciAtIHRoZXJlIGlzIG5vIGFkZCgpIGZ1bmN0aW9uIHdpdGggb25seSBvcHRpb25hbCBwYXJhbXMgb24gdGhlIGZsdWVudCBhcGlcbiAgICAgICAgLy8uYWRkKClcbiAgICAgICAgLy8gPiBleHBlY3RlZCBlcnJvciAtICdwcm9wZXJ0eScgaXMgYSByZXF1aXJlZCBwcm9wZXJ0eSBvbiB0aGUgZmx1ZW50IGFwaVxuICAgICAgICAvLy5hZGQoe30pXG4gICAgICAgIC5hZGQoeyBwcm9wZXJ0eTogJ3Byb3AnIH0pXG4gICAgICAgIC5hZGQoeyBwcm9wZXJ0eTogJ3Byb3AnLCBtb2RlOiBCaW5kaW5nTW9kZS50d29XYXkgfSlcbiAgICAgICAgLmFkZCh7IHByb3BlcnR5OiAncHJvcCcsIGNhbGxiYWNrOiAncHJvcENoYW5nZWQnIH0pXG4gICAgICAgIC5hZGQoeyBwcm9wZXJ0eTogJ3Byb3AnLCBhdHRyaWJ1dGU6ICdwcm9wJyB9KVxuICAgICAgICAuYWRkKHsgcHJvcGVydHk6ICdwcm9wJywgcHJpbWFyeTogdHJ1ZSB9KVxuICAgICAgICAuYWRkKHsgcHJvcGVydHk6ICdwcm9wJywgbW9kZTogQmluZGluZ01vZGUudHdvV2F5LCBjYWxsYmFjazogJ3Byb3BDaGFuZ2VkJywgYXR0cmlidXRlOiAncHJvcCcsIHByaW1hcnk6IHRydWUgfSlcbiAgICAgICAgLmFkZCgncHJvcCcpXG4gICAgICAgIC8vID4gZXhwZWN0ZWQgZXJyb3IgLSB0aGUgYWRkKCkgbWV0aG9kIHRoYXQgYWNjZXB0cyBhbiBvYmplY3QgbGl0ZXJhbCBkb2VzIG5vdCByZXR1cm4gYSBmbHVlbnQgYXBpXG4gICAgICAgIC8vLmFkZCh7IHByb3BlcnR5OiAncHJvcCcgfSkubW9kZShCaW5kaW5nTW9kZS50d29XYXkpXG4gICAgICAgIC8vLmFkZCh7IHByb3BlcnR5OiAncHJvcCcgfSkuY2FsbGJhY2soJ3Byb3BDaGFuZ2VkJylcbiAgICAgICAgLy8uYWRkKHsgcHJvcGVydHk6ICdwcm9wJyB9KS5hdHRyaWJ1dGUoJ3Byb3AnKVxuICAgICAgICAvLy5hZGQoeyBwcm9wZXJ0eTogJ3Byb3AnIH0pLnByaW1hcnkoKVxuICAgICAgICAvLyA+IGV4cGVjdGVkIGVycm9yIC0gZmx1ZW50IGFwaSBtZXRob2RzIGNhbiBvbmx5IGJlIGludm9rZWQgb25jZSBwZXIgYmluZGFibGVcbiAgICAgICAgLy8uYWRkKCdwcm9wJykubW9kZShCaW5kaW5nTW9kZS50d29XYXkpLm1vZGUoQmluZGluZ01vZGUudHdvV2F5KVxuICAgICAgICAvLy5hZGQoJ3Byb3AnKS5tb2RlKEJpbmRpbmdNb2RlLnR3b1dheSkuY2FsbGJhY2soJ3Byb3BDaGFuZ2VkJykubW9kZShCaW5kaW5nTW9kZS50d29XYXkpXG4gICAgICAgIC8vLmFkZCgncHJvcCcpLm1vZGUoQmluZGluZ01vZGUudHdvV2F5KS5jYWxsYmFjaygncHJvcENoYW5nZWQnKS5jYWxsYmFjaygncHJvcENoYW5nZWQnKSAvLyBldGNcbiAgICAgICAgLy8gPiBleHBlY3RlZCBlcnJvciAtIHdyb25nIGludm9jYXRpb24gb3JkZXJcbiAgICAgICAgLy8uYWRkKCdwcm9wJykuY2FsbGJhY2soJ3Byb3BDaGFuZ2VkJykubW9kZShCaW5kaW5nTW9kZS50d29XYXkpXG4gICAgICAgIC8vLmFkZCgncHJvcCcpLnByaW1hcnkoKS5tb2RlKEJpbmRpbmdNb2RlLnR3b1dheSkgIC8vIGV0Y1xuICAgICAgICAuYWRkKCdwcm9wJykubW9kZShCaW5kaW5nTW9kZS50d29XYXkpXG4gICAgICAgIC5hZGQoJ3Byb3AnKS5tb2RlKEJpbmRpbmdNb2RlLnR3b1dheSkuY2FsbGJhY2soJ3Byb3BDaGFuZ2VkJylcbiAgICAgICAgLmFkZCgncHJvcCcpLm1vZGUoQmluZGluZ01vZGUudHdvV2F5KS5jYWxsYmFjaygncHJvcENoYW5nZWQnKS5hdHRyaWJ1dGUoJ3Byb3AnKVxuICAgICAgICAuYWRkKCdwcm9wJykubW9kZShCaW5kaW5nTW9kZS50d29XYXkpLmNhbGxiYWNrKCdwcm9wQ2hhbmdlZCcpLmF0dHJpYnV0ZSgncHJvcCcpLnByaW1hcnkoKVxuICAgICAgICAuYWRkKCdwcm9wJykubW9kZShCaW5kaW5nTW9kZS50d29XYXkpLnNldCgodmFsdWUpID0+IE51bWJlcih2YWx1ZSkpXG4gICAgICAgIC5hZGQoJ3Byb3AnKS5tb2RlKEJpbmRpbmdNb2RlLnR3b1dheSkuY2FsbGJhY2soJ3Byb3BDaGFuZ2VkJykuc2V0KHZhbHVlID0+IE51bWJlcih2YWx1ZSkpXG4gICAgICAgIC5hZGQoJ3Byb3AnKS5jYWxsYmFjaygncHJvcENoYW5nZWQnKVxuICAgICAgICAuYWRkKCdwcm9wJykuY2FsbGJhY2soJ3Byb3BDaGFuZ2VkJykuYXR0cmlidXRlKCdwcm9wJylcbiAgICAgICAgLmFkZCgncHJvcCcpLmNhbGxiYWNrKCdwcm9wQ2hhbmdlZCcpLmF0dHJpYnV0ZSgncHJvcCcpLnByaW1hcnkoKVxuICAgICAgICAuYWRkKCdwcm9wJykuYXR0cmlidXRlKCdwcm9wJylcbiAgICAgICAgLmFkZCgncHJvcCcpLmF0dHJpYnV0ZSgncHJvcCcpLnByaW1hcnkoKVxuICAgICAgICAuYWRkKCdwcm9wJykucHJpbWFyeSgpO1xufVxuLyogZXNsaW50LWVuYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnMsc3BhY2VkLWNvbW1lbnQgKi9cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJpbmRhYmxlLmpzLm1hcCIsInZhciBDaGlsZHJlbk9ic2VydmVyXzE7XG5pbXBvcnQgeyBfX2RlY29yYXRlLCBfX21ldGFkYXRhIH0gZnJvbSBcInRzbGliXCI7XG4vKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmUgKi9cbmltcG9ydCB7IFByb3RvY29sLCBNZXRhZGF0YSwgZmlyc3REZWZpbmVkLCBnZXRQcm90b3R5cGVDaGFpbiwgUmVwb3J0ZXIgfSBmcm9tICdAYXVyZWxpYS9rZXJuZWwnO1xuaW1wb3J0IHsgQ3VzdG9tRWxlbWVudCB9IGZyb20gJy4uL3Jlc291cmNlcy9jdXN0b20tZWxlbWVudCc7XG5pbXBvcnQgeyBzdWJzY3JpYmVyQ29sbGVjdGlvbiB9IGZyb20gJy4uL29ic2VydmF0aW9uL3N1YnNjcmliZXItY29sbGVjdGlvbic7XG5leHBvcnQgZnVuY3Rpb24gY2hpbGRyZW4oY29uZmlnT3JUYXJnZXQsIHByb3ApIHtcbiAgICBsZXQgY29uZmlnO1xuICAgIGZ1bmN0aW9uIGRlY29yYXRvcigkdGFyZ2V0LCAkcHJvcCkge1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIC8vIE5vbiBpbnZvY2F0aW9uOlxuICAgICAgICAgICAgLy8gLSBAY2hpbGRyZW5cbiAgICAgICAgICAgIC8vIEludm9jYXRpb24gd2l0aCBvciB3L28gb3B0czpcbiAgICAgICAgICAgIC8vIC0gQGNoaWxkcmVuKClcbiAgICAgICAgICAgIC8vIC0gQGNoaWxkcmVuKHsuLi5vcHRzfSlcbiAgICAgICAgICAgIGNvbmZpZy5wcm9wZXJ0eSA9ICRwcm9wO1xuICAgICAgICB9XG4gICAgICAgIE1ldGFkYXRhLmRlZmluZShDaGlsZHJlbi5uYW1lLCBDaGlsZHJlbkRlZmluaXRpb24uY3JlYXRlKCRwcm9wLCBjb25maWcpLCAkdGFyZ2V0LmNvbnN0cnVjdG9yLCAkcHJvcCk7XG4gICAgICAgIFByb3RvY29sLmFubm90YXRpb24uYXBwZW5kVG8oJHRhcmdldC5jb25zdHJ1Y3RvciwgQ2hpbGRyZW4ua2V5RnJvbSgkcHJvcCkpO1xuICAgIH1cbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgLy8gTm9uIGludm9jYXRpb246XG4gICAgICAgIC8vIC0gQGNoaWxkcmVuXG4gICAgICAgIGNvbmZpZyA9IHt9O1xuICAgICAgICBkZWNvcmF0b3IoY29uZmlnT3JUYXJnZXQsIHByb3ApO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBjb25maWdPclRhcmdldCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgLy8gQ2xhc3NEZWNvcmF0b3JcbiAgICAgICAgLy8gLSBAY2hpbGRyZW4oJ2JhcicpXG4gICAgICAgIC8vIERpcmVjdCBjYWxsOlxuICAgICAgICAvLyAtIEBjaGlsZHJlbignYmFyJykoRm9vKVxuICAgICAgICBjb25maWcgPSB7fTtcbiAgICAgICAgcmV0dXJuIGRlY29yYXRvcjtcbiAgICB9XG4gICAgLy8gSW52b2NhdGlvbiB3aXRoIG9yIHcvbyBvcHRzOlxuICAgIC8vIC0gQGNoaWxkcmVuKClcbiAgICAvLyAtIEBjaGlsZHJlbih7Li4ub3B0c30pXG4gICAgY29uZmlnID0gY29uZmlnT3JUYXJnZXQgPT09IHZvaWQgMCA/IHt9IDogY29uZmlnT3JUYXJnZXQ7XG4gICAgcmV0dXJuIGRlY29yYXRvcjtcbn1cbmZ1bmN0aW9uIGlzQ2hpbGRyZW5PYnNlcnZlckFubm90YXRpb24oa2V5KSB7XG4gICAgcmV0dXJuIGtleS5zdGFydHNXaXRoKENoaWxkcmVuLm5hbWUpO1xufVxuZXhwb3J0IGNvbnN0IENoaWxkcmVuID0ge1xuICAgIG5hbWU6IFByb3RvY29sLmFubm90YXRpb24ua2V5Rm9yKCdjaGlsZHJlbi1vYnNlcnZlcicpLFxuICAgIGtleUZyb20obmFtZSkge1xuICAgICAgICByZXR1cm4gYCR7Q2hpbGRyZW4ubmFtZX06JHtuYW1lfWA7XG4gICAgfSxcbiAgICBmcm9tKC4uLmNoaWxkcmVuT2JzZXJ2ZXJMaXN0cykge1xuICAgICAgICBjb25zdCBjaGlsZHJlbk9ic2VydmVycyA9IHt9O1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L3VuYm91bmQtbWV0aG9kXG4gICAgICAgIGNvbnN0IGlzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xuICAgICAgICBmdW5jdGlvbiBhZGROYW1lKG5hbWUpIHtcbiAgICAgICAgICAgIGNoaWxkcmVuT2JzZXJ2ZXJzW25hbWVdID0gQ2hpbGRyZW5EZWZpbml0aW9uLmNyZWF0ZShuYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBhZGREZXNjcmlwdGlvbihuYW1lLCBkZWYpIHtcbiAgICAgICAgICAgIGNoaWxkcmVuT2JzZXJ2ZXJzW25hbWVdID0gQ2hpbGRyZW5EZWZpbml0aW9uLmNyZWF0ZShuYW1lLCBkZWYpO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGFkZExpc3QobWF5YmVMaXN0KSB7XG4gICAgICAgICAgICBpZiAoaXNBcnJheShtYXliZUxpc3QpKSB7XG4gICAgICAgICAgICAgICAgbWF5YmVMaXN0LmZvckVhY2goYWRkTmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChtYXliZUxpc3QgaW5zdGFuY2VvZiBDaGlsZHJlbkRlZmluaXRpb24pIHtcbiAgICAgICAgICAgICAgICBjaGlsZHJlbk9ic2VydmVyc1ttYXliZUxpc3QucHJvcGVydHldID0gbWF5YmVMaXN0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobWF5YmVMaXN0ICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhtYXliZUxpc3QpLmZvckVhY2gobmFtZSA9PiBhZGREZXNjcmlwdGlvbihuYW1lLCBtYXliZUxpc3QpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjaGlsZHJlbk9ic2VydmVyTGlzdHMuZm9yRWFjaChhZGRMaXN0KTtcbiAgICAgICAgcmV0dXJuIGNoaWxkcmVuT2JzZXJ2ZXJzO1xuICAgIH0sXG4gICAgZ2V0QWxsKFR5cGUpIHtcbiAgICAgICAgY29uc3QgcHJvcFN0YXJ0ID0gQ2hpbGRyZW4ubmFtZS5sZW5ndGggKyAxO1xuICAgICAgICBjb25zdCBkZWZzID0gW107XG4gICAgICAgIGNvbnN0IHByb3RvdHlwZUNoYWluID0gZ2V0UHJvdG90eXBlQ2hhaW4oVHlwZSk7XG4gICAgICAgIGxldCBpUHJvdG8gPSBwcm90b3R5cGVDaGFpbi5sZW5ndGg7XG4gICAgICAgIGxldCBpRGVmcyA9IDA7XG4gICAgICAgIGxldCBrZXlzO1xuICAgICAgICBsZXQga2V5c0xlbjtcbiAgICAgICAgbGV0IENsYXNzO1xuICAgICAgICB3aGlsZSAoLS1pUHJvdG8gPj0gMCkge1xuICAgICAgICAgICAgQ2xhc3MgPSBwcm90b3R5cGVDaGFpbltpUHJvdG9dO1xuICAgICAgICAgICAga2V5cyA9IFByb3RvY29sLmFubm90YXRpb24uZ2V0S2V5cyhDbGFzcykuZmlsdGVyKGlzQ2hpbGRyZW5PYnNlcnZlckFubm90YXRpb24pO1xuICAgICAgICAgICAga2V5c0xlbiA9IGtleXMubGVuZ3RoO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBrZXlzTGVuOyArK2kpIHtcbiAgICAgICAgICAgICAgICBkZWZzW2lEZWZzKytdID0gTWV0YWRhdGEuZ2V0T3duKENoaWxkcmVuLm5hbWUsIENsYXNzLCBrZXlzW2ldLnNsaWNlKHByb3BTdGFydCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkZWZzO1xuICAgIH0sXG59O1xuZXhwb3J0IGNsYXNzIENoaWxkcmVuRGVmaW5pdGlvbiB7XG4gICAgY29uc3RydWN0b3IoY2FsbGJhY2ssIHByb3BlcnR5LCBvcHRpb25zLCBxdWVyeSwgZmlsdGVyLCBtYXApIHtcbiAgICAgICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgICAgICB0aGlzLnByb3BlcnR5ID0gcHJvcGVydHk7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIHRoaXMucXVlcnkgPSBxdWVyeTtcbiAgICAgICAgdGhpcy5maWx0ZXIgPSBmaWx0ZXI7XG4gICAgICAgIHRoaXMubWFwID0gbWFwO1xuICAgIH1cbiAgICBzdGF0aWMgY3JlYXRlKHByb3AsIGRlZiA9IHt9KSB7XG4gICAgICAgIHJldHVybiBuZXcgQ2hpbGRyZW5EZWZpbml0aW9uKGZpcnN0RGVmaW5lZChkZWYuY2FsbGJhY2ssIGAke3Byb3B9Q2hhbmdlZGApLCBmaXJzdERlZmluZWQoZGVmLnByb3BlcnR5LCBwcm9wKSwgZGVmLm9wdGlvbnMsIGRlZi5xdWVyeSwgZGVmLmZpbHRlciwgZGVmLm1hcCk7XG4gICAgfVxufVxuLyoqIEBpbnRlcm5hbCAqL1xubGV0IENoaWxkcmVuT2JzZXJ2ZXIgPSBDaGlsZHJlbk9ic2VydmVyXzEgPSBjbGFzcyBDaGlsZHJlbk9ic2VydmVyIHtcbiAgICBjb25zdHJ1Y3Rvcihjb250cm9sbGVyLCBvYmosIGZsYWdzLCBwcm9wZXJ0eUtleSwgY2JOYW1lLCBxdWVyeSA9IGRlZmF1bHRDaGlsZFF1ZXJ5LCBmaWx0ZXIgPSBkZWZhdWx0Q2hpbGRGaWx0ZXIsIG1hcCA9IGRlZmF1bHRDaGlsZE1hcCwgb3B0aW9ucykge1xuICAgICAgICB0aGlzLmNvbnRyb2xsZXIgPSBjb250cm9sbGVyO1xuICAgICAgICB0aGlzLm9iaiA9IG9iajtcbiAgICAgICAgdGhpcy5wcm9wZXJ0eUtleSA9IHByb3BlcnR5S2V5O1xuICAgICAgICB0aGlzLnF1ZXJ5ID0gcXVlcnk7XG4gICAgICAgIHRoaXMuZmlsdGVyID0gZmlsdGVyO1xuICAgICAgICB0aGlzLm1hcCA9IG1hcDtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgdGhpcy5vYnNlcnZpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5jaGlsZHJlbiA9ICh2b2lkIDApO1xuICAgICAgICB0aGlzLmNhbGxiYWNrID0gb2JqW2NiTmFtZV07XG4gICAgICAgIHRoaXMucGVyc2lzdGVudEZsYWdzID0gZmxhZ3MgJiAyMDgwMzc0Nzk5IC8qIHBlcnNpc3RlbnRCaW5kaW5nRmxhZ3MgKi87XG4gICAgICAgIHRoaXMuY3JlYXRlR2V0dGVyU2V0dGVyKCk7XG4gICAgfVxuICAgIGdldFZhbHVlKCkge1xuICAgICAgICB0aGlzLnRyeVN0YXJ0T2JzZXJ2aW5nKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmNoaWxkcmVuO1xuICAgIH1cbiAgICBzZXRWYWx1ZShuZXdWYWx1ZSkgeyB9XG4gICAgc3Vic2NyaWJlKHN1YnNjcmliZXIpIHtcbiAgICAgICAgdGhpcy50cnlTdGFydE9ic2VydmluZygpO1xuICAgICAgICB0aGlzLmFkZFN1YnNjcmliZXIoc3Vic2NyaWJlcik7XG4gICAgfVxuICAgIHRyeVN0YXJ0T2JzZXJ2aW5nKCkge1xuICAgICAgICBpZiAoIXRoaXMub2JzZXJ2aW5nKSB7XG4gICAgICAgICAgICB0aGlzLm9ic2VydmluZyA9IHRydWU7XG4gICAgICAgICAgICBjb25zdCBwcm9qZWN0b3IgPSB0aGlzLmNvbnRyb2xsZXIucHJvamVjdG9yO1xuICAgICAgICAgICAgdGhpcy5jaGlsZHJlbiA9IGZpbHRlckNoaWxkcmVuKHByb2plY3RvciwgdGhpcy5xdWVyeSwgdGhpcy5maWx0ZXIsIHRoaXMubWFwKTtcbiAgICAgICAgICAgIHByb2plY3Rvci5zdWJzY3JpYmVUb0NoaWxkcmVuQ2hhbmdlKCgpID0+IHsgdGhpcy5vbkNoaWxkcmVuQ2hhbmdlZCgpOyB9LCB0aGlzLm9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9uQ2hpbGRyZW5DaGFuZ2VkKCkge1xuICAgICAgICB0aGlzLmNoaWxkcmVuID0gZmlsdGVyQ2hpbGRyZW4odGhpcy5jb250cm9sbGVyLnByb2plY3RvciwgdGhpcy5xdWVyeSwgdGhpcy5maWx0ZXIsIHRoaXMubWFwKTtcbiAgICAgICAgaWYgKHRoaXMuY2FsbGJhY2sgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgdGhpcy5jYWxsYmFjay5jYWxsKHRoaXMub2JqKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNhbGxTdWJzY3JpYmVycyh0aGlzLmNoaWxkcmVuLCB1bmRlZmluZWQsIHRoaXMucGVyc2lzdGVudEZsYWdzIHwgMTYgLyogdXBkYXRlVGFyZ2V0SW5zdGFuY2UgKi8pO1xuICAgIH1cbiAgICBjcmVhdGVHZXR0ZXJTZXR0ZXIoKSB7XG4gICAgICAgIGlmICghUmVmbGVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLm9iaiwgdGhpcy5wcm9wZXJ0eUtleSwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGdldDogKCkgPT4gdGhpcy5nZXRWYWx1ZSgpLFxuICAgICAgICAgICAgc2V0OiAoKSA9PiB7IHJldHVybjsgfSxcbiAgICAgICAgfSkpIHtcbiAgICAgICAgICAgIFJlcG9ydGVyLndyaXRlKDEsIHRoaXMucHJvcGVydHlLZXksIHRoaXMub2JqKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5DaGlsZHJlbk9ic2VydmVyID0gQ2hpbGRyZW5PYnNlcnZlcl8xID0gX19kZWNvcmF0ZShbXG4gICAgc3Vic2NyaWJlckNvbGxlY3Rpb24oKSxcbiAgICBfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIiwgW09iamVjdCwgT2JqZWN0LCBOdW1iZXIsIFN0cmluZywgU3RyaW5nLCBPYmplY3QsIE9iamVjdCwgT2JqZWN0LCBPYmplY3RdKVxuXSwgQ2hpbGRyZW5PYnNlcnZlcik7XG5leHBvcnQgeyBDaGlsZHJlbk9ic2VydmVyIH07XG5mdW5jdGlvbiBkZWZhdWx0Q2hpbGRRdWVyeShwcm9qZWN0b3IpIHtcbiAgICByZXR1cm4gcHJvamVjdG9yLmNoaWxkcmVuO1xufVxuZnVuY3Rpb24gZGVmYXVsdENoaWxkRmlsdGVyKG5vZGUsIGNvbnRyb2xsZXIsIHZpZXdNb2RlbCkge1xuICAgIHJldHVybiAhIXZpZXdNb2RlbDtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRDaGlsZE1hcChub2RlLCBjb250cm9sbGVyLCB2aWV3TW9kZWwpIHtcbiAgICByZXR1cm4gdmlld01vZGVsO1xufVxuLyoqIEBpbnRlcm5hbCAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlckNoaWxkcmVuKHByb2plY3RvciwgcXVlcnksIGZpbHRlciwgbWFwKSB7XG4gICAgY29uc3Qgbm9kZXMgPSBxdWVyeShwcm9qZWN0b3IpO1xuICAgIGNvbnN0IGNoaWxkcmVuID0gW107XG4gICAgZm9yIChsZXQgaSA9IDAsIGlpID0gbm9kZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICBjb25zdCBub2RlID0gbm9kZXNbaV07XG4gICAgICAgIGNvbnN0IGNvbnRyb2xsZXIgPSBDdXN0b21FbGVtZW50LmZvcihub2RlKTtcbiAgICAgICAgY29uc3Qgdmlld01vZGVsID0gY29udHJvbGxlciA/IGNvbnRyb2xsZXIudmlld01vZGVsIDogbnVsbDtcbiAgICAgICAgaWYgKGZpbHRlcihub2RlLCBjb250cm9sbGVyLCB2aWV3TW9kZWwpKSB7XG4gICAgICAgICAgICBjaGlsZHJlbi5wdXNoKG1hcChub2RlLCBjb250cm9sbGVyLCB2aWV3TW9kZWwpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY2hpbGRyZW47XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jaGlsZHJlbi5qcy5tYXAiLCJpbXBvcnQgeyBtZXJnZURpc3RpbmN0LCBuZXh0SWQsIH0gZnJvbSAnQGF1cmVsaWEva2VybmVsJztcbmltcG9ydCB7IEhvb2tzRGVmaW5pdGlvbiwgfSBmcm9tICcuLi9kZWZpbml0aW9ucyc7XG5pbXBvcnQgeyBBZ2dyZWdhdGVDb250aW51YXRpb25UYXNrLCBDb250aW51YXRpb25UYXNrLCBoYXNBc3luY1dvcmssIExpZmVjeWNsZVRhc2ssIH0gZnJvbSAnLi4vbGlmZWN5Y2xlLXRhc2snO1xuaW1wb3J0IHsgU2NvcGUsIH0gZnJvbSAnLi4vb2JzZXJ2YXRpb24vYmluZGluZy1jb250ZXh0JztcbmltcG9ydCB7IFByb3h5T2JzZXJ2ZXIsIH0gZnJvbSAnLi4vb2JzZXJ2YXRpb24vcHJveHktb2JzZXJ2ZXInO1xuaW1wb3J0IHsgQmluZGFibGVPYnNlcnZlciwgfSBmcm9tICcuLi9vYnNlcnZhdGlvbi9iaW5kYWJsZS1vYnNlcnZlcic7XG5pbXBvcnQgeyBJUHJvamVjdG9yTG9jYXRvciwgQ3VzdG9tRWxlbWVudERlZmluaXRpb24sIEN1c3RvbUVsZW1lbnQsIH0gZnJvbSAnLi4vcmVzb3VyY2VzL2N1c3RvbS1lbGVtZW50JztcbmltcG9ydCB7IEN1c3RvbUF0dHJpYnV0ZSwgfSBmcm9tICcuLi9yZXNvdXJjZXMvY3VzdG9tLWF0dHJpYnV0ZSc7XG5pbXBvcnQgeyBnZXRSZW5kZXJDb250ZXh0LCB9IGZyb20gJy4vcmVuZGVyLWNvbnRleHQnO1xuaW1wb3J0IHsgQ2hpbGRyZW5PYnNlcnZlciB9IGZyb20gJy4vY2hpbGRyZW4nO1xuY29uc3QgY29udHJvbGxlckxvb2t1cCA9IG5ldyBXZWFrTWFwKCk7XG5leHBvcnQgY2xhc3MgQ29udHJvbGxlciB7XG4gICAgY29uc3RydWN0b3Iodm1LaW5kLCBmbGFncywgbGlmZWN5Y2xlLCBob29rcywgXG4gICAgLyoqXG4gICAgICogVGhlIHZpZXdGYWN0b3J5LiBPbmx5IHByZXNlbnQgZm9yIHN5bnRoZXRpYyB2aWV3cy5cbiAgICAgKi9cbiAgICB2aWV3RmFjdG9yeSwgXG4gICAgLyoqXG4gICAgICogVGhlIGJhY2tpbmcgdmlld01vZGVsLiBUaGlzIGlzIG5ldmVyIGEgcHJveHkuIE9ubHkgcHJlc2VudCBmb3IgY3VzdG9tIGF0dHJpYnV0ZXMgYW5kIGVsZW1lbnRzLlxuICAgICAqL1xuICAgIHZpZXdNb2RlbCwgXG4gICAgLyoqXG4gICAgICogVGhlIGJpbmRpbmcgY29udGV4dC4gVGhpcyBtYXkgYmUgYSBwcm94eS4gSWYgaXQgaXMgbm90LCB0aGVuIGl0IGlzIHRoZSBzYW1lIGluc3RhbmNlIGFzIHRoZSB2aWV3TW9kZWwuIE9ubHkgcHJlc2VudCBmb3IgY3VzdG9tIGF0dHJpYnV0ZXMgYW5kIGVsZW1lbnRzLlxuICAgICAqL1xuICAgIGJpbmRpbmdDb250ZXh0LCBcbiAgICAvKipcbiAgICAgKiBUaGUgcGh5c2ljYWwgaG9zdCBkb20gbm9kZS4gT25seSBwcmVzZW50IGZvciBjdXN0b20gZWxlbWVudHMuXG4gICAgICovXG4gICAgaG9zdCkge1xuICAgICAgICB0aGlzLnZtS2luZCA9IHZtS2luZDtcbiAgICAgICAgdGhpcy5mbGFncyA9IGZsYWdzO1xuICAgICAgICB0aGlzLmxpZmVjeWNsZSA9IGxpZmVjeWNsZTtcbiAgICAgICAgdGhpcy5ob29rcyA9IGhvb2tzO1xuICAgICAgICB0aGlzLnZpZXdGYWN0b3J5ID0gdmlld0ZhY3Rvcnk7XG4gICAgICAgIHRoaXMudmlld01vZGVsID0gdmlld01vZGVsO1xuICAgICAgICB0aGlzLmJpbmRpbmdDb250ZXh0ID0gYmluZGluZ0NvbnRleHQ7XG4gICAgICAgIHRoaXMuaG9zdCA9IGhvc3Q7XG4gICAgICAgIHRoaXMuaWQgPSBuZXh0SWQoJ2F1JGNvbXBvbmVudCcpO1xuICAgICAgICB0aGlzLm5leHRCb3VuZCA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5uZXh0VW5ib3VuZCA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5wcmV2Qm91bmQgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMucHJldlVuYm91bmQgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMubmV4dEF0dGFjaGVkID0gdm9pZCAwO1xuICAgICAgICB0aGlzLm5leHREZXRhY2hlZCA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5wcmV2QXR0YWNoZWQgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMucHJldkRldGFjaGVkID0gdm9pZCAwO1xuICAgICAgICB0aGlzLm5leHRNb3VudCA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5uZXh0VW5tb3VudCA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5wcmV2TW91bnQgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMucHJldlVubW91bnQgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMucGFyZW50ID0gdm9pZCAwO1xuICAgICAgICB0aGlzLmJpbmRpbmdzID0gdm9pZCAwO1xuICAgICAgICB0aGlzLmNvbnRyb2xsZXJzID0gdm9pZCAwO1xuICAgICAgICB0aGlzLnN0YXRlID0gMCAvKiBub25lICovO1xuICAgICAgICB0aGlzLnNjb3BlUGFydHMgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMuaXNTdHJpY3RCaW5kaW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc2NvcGUgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMucGFydCA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5wcm9qZWN0b3IgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMubm9kZXMgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMuY29udGV4dCA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5sb2NhdGlvbiA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5tb3VudFN0cmF0ZWd5ID0gMSAvKiBpbnNlcnRCZWZvcmUgKi87XG4gICAgfVxuICAgIHN0YXRpYyBnZXRDYWNoZWQodmlld01vZGVsKSB7XG4gICAgICAgIHJldHVybiBjb250cm9sbGVyTG9va3VwLmdldCh2aWV3TW9kZWwpO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0Q2FjaGVkT3JUaHJvdyh2aWV3TW9kZWwpIHtcbiAgICAgICAgY29uc3QgY29udHJvbGxlciA9IENvbnRyb2xsZXIuZ2V0Q2FjaGVkKHZpZXdNb2RlbCk7XG4gICAgICAgIGlmIChjb250cm9sbGVyID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVGhlcmUgaXMgbm8gY2FjaGVkIGNvbnRyb2xsZXIgZm9yIHRoZSBwcm92aWRlZCBWaWV3TW9kZWw6ICR7U3RyaW5nKHZpZXdNb2RlbCl9YCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbnRyb2xsZXI7XG4gICAgfVxuICAgIHN0YXRpYyBmb3JDdXN0b21FbGVtZW50KHZpZXdNb2RlbCwgbGlmZWN5Y2xlLCBob3N0LCBwYXJlbnRDb250YWluZXIsIHBhcnRzLCBmbGFncyA9IDAgLyogbm9uZSAqLykge1xuICAgICAgICBpZiAoY29udHJvbGxlckxvb2t1cC5oYXModmlld01vZGVsKSkge1xuICAgICAgICAgICAgcmV0dXJuIGNvbnRyb2xsZXJMb29rdXAuZ2V0KHZpZXdNb2RlbCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGVmaW5pdGlvbiA9IEN1c3RvbUVsZW1lbnQuZ2V0RGVmaW5pdGlvbih2aWV3TW9kZWwuY29uc3RydWN0b3IpO1xuICAgICAgICBmbGFncyB8PSBkZWZpbml0aW9uLnN0cmF0ZWd5O1xuICAgICAgICBjb25zdCBjb250cm9sbGVyID0gbmV3IENvbnRyb2xsZXIoMCAvKiBjdXN0b21FbGVtZW50ICovLCBcbiAgICAgICAgLyogZmxhZ3MgICAgICAgICAgKi8gZmxhZ3MsIFxuICAgICAgICAvKiBsaWZlY3ljbGUgICAgICAqLyBsaWZlY3ljbGUsIFxuICAgICAgICAvKiBob29rcyAgICAgICAgICAqLyBkZWZpbml0aW9uLmhvb2tzLCBcbiAgICAgICAgLyogdmlld0ZhY3RvcnkgICAgKi8gdm9pZCAwLCBcbiAgICAgICAgLyogdmlld01vZGVsICAgICAgKi8gdmlld01vZGVsLCBcbiAgICAgICAgLyogYmluZGluZ0NvbnRleHQgKi8gZ2V0QmluZGluZ0NvbnRleHQoZmxhZ3MsIHZpZXdNb2RlbCksIFxuICAgICAgICAvKiBob3N0ICAgICAgICAgICAqLyBob3N0KTtcbiAgICAgICAgY29udHJvbGxlckxvb2t1cC5zZXQodmlld01vZGVsLCBjb250cm9sbGVyKTtcbiAgICAgICAgY29udHJvbGxlci5oeWRyYXRlQ3VzdG9tRWxlbWVudChkZWZpbml0aW9uLCBwYXJlbnRDb250YWluZXIsIHBhcnRzKTtcbiAgICAgICAgcmV0dXJuIGNvbnRyb2xsZXI7XG4gICAgfVxuICAgIHN0YXRpYyBmb3JDdXN0b21BdHRyaWJ1dGUodmlld01vZGVsLCBsaWZlY3ljbGUsIGhvc3QsIGZsYWdzID0gMCAvKiBub25lICovKSB7XG4gICAgICAgIGlmIChjb250cm9sbGVyTG9va3VwLmhhcyh2aWV3TW9kZWwpKSB7XG4gICAgICAgICAgICByZXR1cm4gY29udHJvbGxlckxvb2t1cC5nZXQodmlld01vZGVsKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkZWZpbml0aW9uID0gQ3VzdG9tQXR0cmlidXRlLmdldERlZmluaXRpb24odmlld01vZGVsLmNvbnN0cnVjdG9yKTtcbiAgICAgICAgZmxhZ3MgfD0gZGVmaW5pdGlvbi5zdHJhdGVneTtcbiAgICAgICAgY29uc3QgY29udHJvbGxlciA9IG5ldyBDb250cm9sbGVyKDEgLyogY3VzdG9tQXR0cmlidXRlICovLCBcbiAgICAgICAgLyogZmxhZ3MgICAgICAgICAgKi8gZmxhZ3MsIFxuICAgICAgICAvKiBsaWZlY3ljbGUgICAgICAqLyBsaWZlY3ljbGUsIFxuICAgICAgICAvKiBob29rcyAgICAgICAgICAqLyBkZWZpbml0aW9uLmhvb2tzLCBcbiAgICAgICAgLyogdmlld0ZhY3RvcnkgICAgKi8gdm9pZCAwLCBcbiAgICAgICAgLyogdmlld01vZGVsICAgICAgKi8gdmlld01vZGVsLCBcbiAgICAgICAgLyogYmluZGluZ0NvbnRleHQgKi8gZ2V0QmluZGluZ0NvbnRleHQoZmxhZ3MsIHZpZXdNb2RlbCksIFxuICAgICAgICAvKiBob3N0ICAgICAgICAgICAqLyBob3N0KTtcbiAgICAgICAgY29udHJvbGxlckxvb2t1cC5zZXQodmlld01vZGVsLCBjb250cm9sbGVyKTtcbiAgICAgICAgY29udHJvbGxlci5oeWRyYXRlQ3VzdG9tQXR0cmlidXRlKGRlZmluaXRpb24pO1xuICAgICAgICByZXR1cm4gY29udHJvbGxlcjtcbiAgICB9XG4gICAgc3RhdGljIGZvclN5bnRoZXRpY1ZpZXcodmlld0ZhY3RvcnksIGxpZmVjeWNsZSwgY29udGV4dCwgZmxhZ3MgPSAwIC8qIG5vbmUgKi8pIHtcbiAgICAgICAgY29uc3QgY29udHJvbGxlciA9IG5ldyBDb250cm9sbGVyKDIgLyogc3ludGhldGljICovLCBcbiAgICAgICAgLyogZmxhZ3MgICAgICAgICAgKi8gZmxhZ3MsIFxuICAgICAgICAvKiBsaWZlY3ljbGUgICAgICAqLyBsaWZlY3ljbGUsIFxuICAgICAgICAvKiBob29rcyAgICAgICAgICAqLyBIb29rc0RlZmluaXRpb24ubm9uZSwgXG4gICAgICAgIC8qIHZpZXdGYWN0b3J5ICAgICovIHZpZXdGYWN0b3J5LCBcbiAgICAgICAgLyogdmlld01vZGVsICAgICAgKi8gdm9pZCAwLCBcbiAgICAgICAgLyogYmluZGluZ0NvbnRleHQgKi8gdm9pZCAwLCBcbiAgICAgICAgLyogaG9zdCAgICAgICAgICAgKi8gdm9pZCAwKTtcbiAgICAgICAgY29udHJvbGxlci5oeWRyYXRlU3ludGhldGljKGNvbnRleHQsIHZpZXdGYWN0b3J5LnBhcnRzKTtcbiAgICAgICAgcmV0dXJuIGNvbnRyb2xsZXI7XG4gICAgfVxuICAgIGh5ZHJhdGVDdXN0b21FbGVtZW50KGRlZmluaXRpb24sIHBhcmVudENvbnRhaW5lciwgcGFydHMpIHtcbiAgICAgICAgY29uc3QgZmxhZ3MgPSB0aGlzLmZsYWdzIHw9IGRlZmluaXRpb24uc3RyYXRlZ3k7XG4gICAgICAgIGNvbnN0IGluc3RhbmNlID0gdGhpcy52aWV3TW9kZWw7XG4gICAgICAgIGNyZWF0ZU9ic2VydmVycyh0aGlzLmxpZmVjeWNsZSwgZGVmaW5pdGlvbiwgZmxhZ3MsIGluc3RhbmNlKTtcbiAgICAgICAgY3JlYXRlQ2hpbGRyZW5PYnNlcnZlcnModGhpcywgZGVmaW5pdGlvbiwgZmxhZ3MsIGluc3RhbmNlKTtcbiAgICAgICAgdGhpcy5zY29wZSA9IFNjb3BlLmNyZWF0ZShmbGFncywgdGhpcy5iaW5kaW5nQ29udGV4dCwgbnVsbCk7XG4gICAgICAgIGNvbnN0IGhvb2tzID0gdGhpcy5ob29rcztcbiAgICAgICAgaWYgKGhvb2tzLmhhc0NyZWF0ZSkge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gaW5zdGFuY2UuY3JlYXRlKFxuICAgICAgICAgICAgLyogY29udHJvbGxlciAgICAgICovIHRoaXMsIFxuICAgICAgICAgICAgLyogcGFyZW50Q29udGFpbmVyICovIHBhcmVudENvbnRhaW5lciwgXG4gICAgICAgICAgICAvKiBkZWZpbml0aW9uICAgICAgKi8gZGVmaW5pdGlvbiwgXG4gICAgICAgICAgICAvKiBwYXJ0cyAgICAgICAgICAgKi8gcGFydHMpO1xuICAgICAgICAgICAgaWYgKHJlc3VsdCAhPT0gdm9pZCAwICYmIHJlc3VsdCAhPT0gZGVmaW5pdGlvbikge1xuICAgICAgICAgICAgICAgIGRlZmluaXRpb24gPSBDdXN0b21FbGVtZW50RGVmaW5pdGlvbi5nZXRPckNyZWF0ZShyZXN1bHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSB0aGlzLmNvbnRleHQgPSBnZXRSZW5kZXJDb250ZXh0KGRlZmluaXRpb24sIHBhcmVudENvbnRhaW5lciwgcGFydHMpO1xuICAgICAgICAvLyBTdXBwb3J0IFJlY3Vyc2l2ZSBDb21wb25lbnRzIGJ5IGFkZGluZyBzZWxmIHRvIG93biBjb250ZXh0XG4gICAgICAgIGRlZmluaXRpb24ucmVnaXN0ZXIoY29udGV4dCk7XG4gICAgICAgIGlmIChkZWZpbml0aW9uLmluamVjdGFibGUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIC8vIElmIHRoZSBlbGVtZW50IGlzIHJlZ2lzdGVyZWQgYXMgaW5qZWN0YWJsZSwgc3VwcG9ydCBpbmplY3RpbmcgdGhlIGluc3RhbmNlIGludG8gY2hpbGRyZW5cbiAgICAgICAgICAgIGNvbnRleHQuYmVnaW5DaGlsZENvbXBvbmVudE9wZXJhdGlvbihpbnN0YW5jZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhvb2tzLmhhc0JlZm9yZUNvbXBpbGUpIHtcbiAgICAgICAgICAgIGluc3RhbmNlLmJlZm9yZUNvbXBpbGUodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29tcGlsZWRDb250ZXh0ID0gY29udGV4dC5jb21waWxlKCk7XG4gICAgICAgIGNvbnN0IGNvbXBpbGVkRGVmaW5pdGlvbiA9IGNvbXBpbGVkQ29udGV4dC5jb21waWxlZERlZmluaXRpb247XG4gICAgICAgIHRoaXMuc2NvcGVQYXJ0cyA9IGNvbXBpbGVkRGVmaW5pdGlvbi5zY29wZVBhcnRzO1xuICAgICAgICB0aGlzLmlzU3RyaWN0QmluZGluZyA9IGNvbXBpbGVkRGVmaW5pdGlvbi5pc1N0cmljdEJpbmRpbmc7XG4gICAgICAgIGNvbnN0IHByb2plY3RvckxvY2F0b3IgPSBwYXJlbnRDb250YWluZXIuZ2V0KElQcm9qZWN0b3JMb2NhdG9yKTtcbiAgICAgICAgdGhpcy5wcm9qZWN0b3IgPSBwcm9qZWN0b3JMb2NhdG9yLmdldEVsZW1lbnRQcm9qZWN0b3IoY29udGV4dC5kb20sIHRoaXMsIHRoaXMuaG9zdCwgY29tcGlsZWREZWZpbml0aW9uKTtcbiAgICAgICAgaW5zdGFuY2UuJGNvbnRyb2xsZXIgPSB0aGlzO1xuICAgICAgICBjb25zdCBub2RlcyA9IHRoaXMubm9kZXMgPSBjb21waWxlZENvbnRleHQuY3JlYXRlTm9kZXMoKTtcbiAgICAgICAgaWYgKGhvb2tzLmhhc0FmdGVyQ29tcGlsZSkge1xuICAgICAgICAgICAgaW5zdGFuY2UuYWZ0ZXJDb21waWxlKHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRhcmdldHMgPSBub2Rlcy5maW5kVGFyZ2V0cygpO1xuICAgICAgICBjb21waWxlZENvbnRleHQucmVuZGVyKFxuICAgICAgICAvKiBmbGFncyAgICAgICovIHRoaXMuZmxhZ3MsIFxuICAgICAgICAvKiBjb250cm9sbGVyICovIHRoaXMsIFxuICAgICAgICAvKiB0YXJnZXRzICAgICovIHRhcmdldHMsIFxuICAgICAgICAvKiBkZWZpbml0aW9uICovIGNvbXBpbGVkRGVmaW5pdGlvbiwgXG4gICAgICAgIC8qIGhvc3QgICAgICAgKi8gdGhpcy5ob3N0LCBcbiAgICAgICAgLyogcGFydHMgICAgICAqLyBwYXJ0cyk7XG4gICAgICAgIGlmIChob29rcy5oYXNBZnRlckNvbXBpbGVDaGlsZHJlbikge1xuICAgICAgICAgICAgaW5zdGFuY2UuYWZ0ZXJDb21waWxlQ2hpbGRyZW4odGhpcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaHlkcmF0ZUN1c3RvbUF0dHJpYnV0ZShkZWZpbml0aW9uKSB7XG4gICAgICAgIGNvbnN0IGZsYWdzID0gdGhpcy5mbGFncyB8IGRlZmluaXRpb24uc3RyYXRlZ3k7XG4gICAgICAgIGNvbnN0IGluc3RhbmNlID0gdGhpcy52aWV3TW9kZWw7XG4gICAgICAgIGNyZWF0ZU9ic2VydmVycyh0aGlzLmxpZmVjeWNsZSwgZGVmaW5pdGlvbiwgZmxhZ3MsIGluc3RhbmNlKTtcbiAgICAgICAgaW5zdGFuY2UuJGNvbnRyb2xsZXIgPSB0aGlzO1xuICAgIH1cbiAgICBoeWRyYXRlU3ludGhldGljKGNvbnRleHQsIHBhcnRzKSB7XG4gICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgIGNvbnN0IGNvbXBpbGVkQ29udGV4dCA9IGNvbnRleHQuY29tcGlsZSgpO1xuICAgICAgICBjb25zdCBjb21waWxlZERlZmluaXRpb24gPSBjb21waWxlZENvbnRleHQuY29tcGlsZWREZWZpbml0aW9uO1xuICAgICAgICB0aGlzLnNjb3BlUGFydHMgPSBjb21waWxlZERlZmluaXRpb24uc2NvcGVQYXJ0cztcbiAgICAgICAgdGhpcy5pc1N0cmljdEJpbmRpbmcgPSBjb21waWxlZERlZmluaXRpb24uaXNTdHJpY3RCaW5kaW5nO1xuICAgICAgICBjb25zdCBub2RlcyA9IHRoaXMubm9kZXMgPSBjb21waWxlZENvbnRleHQuY3JlYXRlTm9kZXMoKTtcbiAgICAgICAgY29uc3QgdGFyZ2V0cyA9IG5vZGVzLmZpbmRUYXJnZXRzKCk7XG4gICAgICAgIGNvbXBpbGVkQ29udGV4dC5yZW5kZXIoXG4gICAgICAgIC8qIGZsYWdzICAgICAgKi8gdGhpcy5mbGFncywgXG4gICAgICAgIC8qIGNvbnRyb2xsZXIgKi8gdGhpcywgXG4gICAgICAgIC8qIHRhcmdldHMgICAgKi8gdGFyZ2V0cywgXG4gICAgICAgIC8qIGRlZmluaXRpb24gKi8gY29tcGlsZWREZWZpbml0aW9uLCBcbiAgICAgICAgLyogaG9zdCAgICAgICAqLyB2b2lkIDAsIFxuICAgICAgICAvKiBwYXJ0cyAgICAgICovIHBhcnRzKTtcbiAgICB9XG4gICAgYWRkQmluZGluZyhiaW5kaW5nKSB7XG4gICAgICAgIGlmICh0aGlzLmJpbmRpbmdzID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIHRoaXMuYmluZGluZ3MgPSBbYmluZGluZ107XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmJpbmRpbmdzW3RoaXMuYmluZGluZ3MubGVuZ3RoXSA9IGJpbmRpbmc7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYWRkQ29udHJvbGxlcihjb250cm9sbGVyKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbnRyb2xsZXJzID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIHRoaXMuY29udHJvbGxlcnMgPSBbY29udHJvbGxlcl07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRyb2xsZXJzW3RoaXMuY29udHJvbGxlcnMubGVuZ3RoXSA9IGNvbnRyb2xsZXI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaXMobmFtZSkge1xuICAgICAgICBzd2l0Y2ggKHRoaXMudm1LaW5kKSB7XG4gICAgICAgICAgICBjYXNlIDEgLyogY3VzdG9tQXR0cmlidXRlICovOiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVmID0gQ3VzdG9tQXR0cmlidXRlLmdldERlZmluaXRpb24odGhpcy52aWV3TW9kZWwuY29uc3RydWN0b3IpO1xuICAgICAgICAgICAgICAgIHJldHVybiBkZWYubmFtZSA9PT0gbmFtZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgMCAvKiBjdXN0b21FbGVtZW50ICovOiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVmID0gQ3VzdG9tRWxlbWVudC5nZXREZWZpbml0aW9uKHRoaXMudmlld01vZGVsLmNvbnN0cnVjdG9yKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVmLm5hbWUgPT09IG5hbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIDIgLyogc3ludGhldGljICovOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnZpZXdGYWN0b3J5Lm5hbWUgPT09IG5hbWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbG9ja1Njb3BlKHNjb3BlKSB7XG4gICAgICAgIHRoaXMuc2NvcGUgPSBzY29wZTtcbiAgICAgICAgdGhpcy5zdGF0ZSB8PSAyNTYgLyogaGFzTG9ja2VkU2NvcGUgKi87XG4gICAgfVxuICAgIGhvbGQobG9jYXRpb24sIG1vdW50U3RyYXRlZ3kpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9ICh0aGlzLnN0YXRlIHwgNTEyIC8qIGNhbkJlQ2FjaGVkICovKSBeIDUxMiAvKiBjYW5CZUNhY2hlZCAqLztcbiAgICAgICAgdGhpcy5sb2NhdGlvbiA9IGxvY2F0aW9uO1xuICAgICAgICB0aGlzLm1vdW50U3RyYXRlZ3kgPSBtb3VudFN0cmF0ZWd5O1xuICAgIH1cbiAgICByZWxlYXNlKGZsYWdzKSB7XG4gICAgICAgIHRoaXMuc3RhdGUgfD0gNTEyIC8qIGNhbkJlQ2FjaGVkICovO1xuICAgICAgICBpZiAoKHRoaXMuc3RhdGUgJiAzMiAvKiBpc0F0dGFjaGVkICovKSA+IDApIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG4gICAgICAgICAgICByZXR1cm4gdGhpcy52aWV3RmFjdG9yeS5jYW5SZXR1cm5Ub0NhY2hlKHRoaXMpOyAvLyBub24tbnVsbCBpcyBpbXBsaWVkIGJ5IHRoZSBob29rXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMudW5tb3VudFN5bnRoZXRpYyhmbGFncyk7XG4gICAgfVxuICAgIGJpbmQoZmxhZ3MsIHNjb3BlLCBwYXJ0KSB7XG4gICAgICAgIHRoaXMucGFydCA9IHBhcnQ7XG4gICAgICAgIC8vIFRPRE86IGJlbmNobWFyayB3aGljaCBvZiB0aGVzZSB0ZWNobmlxdWVzIGlzIGZhc3Rlc3Q6XG4gICAgICAgIC8vIC0gdGhlIGN1cnJlbnQgb25lIChlbnVtIHdpdGggc3dpdGNoKVxuICAgICAgICAvLyAtIHNldCB0aGUgbmFtZSBvZiB0aGUgbWV0aG9kIGluIHRoZSBjb25zdHJ1Y3RvciwgZS5nLiB0aGlzLmJpbmRNZXRob2QgPSAnYmluZEN1c3RvbUVsZW1lbnQnXG4gICAgICAgIC8vICAgIGFuZCB0aGVuIGRvaW5nIHRoaXNbdGhpcy5iaW5kTWV0aG9kXShmbGFncywgc2NvcGUpIGluc3RlYWQgb2Ygc3dpdGNoIChlbGltaW5hdGVzIGJyYW5jaGluZ1xuICAgICAgICAvLyAgICBidXQgY29tcHV0ZWQgcHJvcGVydHkgYWNjZXNzIG1pZ2h0IGJlIGhhcm1mdWwgdG8gYnJvd3NlciBvcHRpbWl6YXRpb25zKVxuICAgICAgICAvLyAtIG1ha2UgYmluZCgpIGEgcHJvcGVydHkgYW5kIHNldCBpdCB0byBvbmUgb2YgdGhlIDMgbWV0aG9kcyBpbiB0aGUgY29uc3RydWN0b3IsXG4gICAgICAgIC8vICAgIGUuZy4gdGhpcy5iaW5kID0gdGhpcy5iaW5kQ3VzdG9tRWxlbWVudCAoZWxpbWluYXRlcyBicmFuY2hpbmcgKyByZWR1Y2VzIGNhbGwgc3RhY2sgZGVwdGggYnkgMSxcbiAgICAgICAgLy8gICAgYnV0IG1pZ2h0IG1ha2UgdGhlIGNhbGwgc2l0ZSBtZWdhbW9ycGhpYylcbiAgICAgICAgZmxhZ3MgfD0gNDA5NiAvKiBmcm9tQmluZCAqLztcbiAgICAgICAgc3dpdGNoICh0aGlzLnZtS2luZCkge1xuICAgICAgICAgICAgY2FzZSAwIC8qIGN1c3RvbUVsZW1lbnQgKi86XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYmluZEN1c3RvbUVsZW1lbnQoZmxhZ3MsIHNjb3BlKTtcbiAgICAgICAgICAgIGNhc2UgMSAvKiBjdXN0b21BdHRyaWJ1dGUgKi86XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYmluZEN1c3RvbUF0dHJpYnV0ZShmbGFncywgc2NvcGUpO1xuICAgICAgICAgICAgY2FzZSAyIC8qIHN5bnRoZXRpYyAqLzpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5iaW5kU3ludGhldGljKGZsYWdzLCBzY29wZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdW5iaW5kKGZsYWdzKSB7XG4gICAgICAgIGZsYWdzIHw9IDgxOTIgLyogZnJvbVVuYmluZCAqLztcbiAgICAgICAgc3dpdGNoICh0aGlzLnZtS2luZCkge1xuICAgICAgICAgICAgY2FzZSAwIC8qIGN1c3RvbUVsZW1lbnQgKi86XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudW5iaW5kQ3VzdG9tRWxlbWVudChmbGFncyk7XG4gICAgICAgICAgICBjYXNlIDEgLyogY3VzdG9tQXR0cmlidXRlICovOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnVuYmluZEN1c3RvbUF0dHJpYnV0ZShmbGFncyk7XG4gICAgICAgICAgICBjYXNlIDIgLyogc3ludGhldGljICovOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnVuYmluZFN5bnRoZXRpYyhmbGFncyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYWZ0ZXJCaW5kKGZsYWdzKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG4gICAgICAgIHRoaXMuYmluZGluZ0NvbnRleHQuYWZ0ZXJCaW5kKGZsYWdzKTsgLy8gbm9uLW51bGwgaXMgaW1wbGllZCBieSB0aGUgaG9va1xuICAgIH1cbiAgICBhZnRlclVuYmluZChmbGFncykge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvblxuICAgICAgICB0aGlzLmJpbmRpbmdDb250ZXh0LmFmdGVyVW5iaW5kKGZsYWdzKTsgLy8gbm9uLW51bGwgaXMgaW1wbGllZCBieSB0aGUgaG9va1xuICAgIH1cbiAgICBhdHRhY2goZmxhZ3MpIHtcbiAgICAgICAgaWYgKCh0aGlzLnN0YXRlICYgNDAgLyogaXNBdHRhY2hlZE9yQXR0YWNoaW5nICovKSA+IDAgJiYgKGZsYWdzICYgMzM1NTQ0MzIgLyogcmVvcmRlck5vZGVzICovKSA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGZsYWdzIHw9IDE2Mzg0IC8qIGZyb21BdHRhY2ggKi87XG4gICAgICAgIHN3aXRjaCAodGhpcy52bUtpbmQpIHtcbiAgICAgICAgICAgIGNhc2UgMCAvKiBjdXN0b21FbGVtZW50ICovOlxuICAgICAgICAgICAgICAgIHRoaXMuYXR0YWNoQ3VzdG9tRWxlbWVudChmbGFncyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDEgLyogY3VzdG9tQXR0cmlidXRlICovOlxuICAgICAgICAgICAgICAgIHRoaXMuYXR0YWNoQ3VzdG9tQXR0cmlidXRlKGZsYWdzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMiAvKiBzeW50aGV0aWMgKi86XG4gICAgICAgICAgICAgICAgdGhpcy5hdHRhY2hTeW50aGV0aWMoZmxhZ3MpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGRldGFjaChmbGFncykge1xuICAgICAgICBpZiAoKHRoaXMuc3RhdGUgJiA0MCAvKiBpc0F0dGFjaGVkT3JBdHRhY2hpbmcgKi8pID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZmxhZ3MgfD0gMzI3NjggLyogZnJvbURldGFjaCAqLztcbiAgICAgICAgc3dpdGNoICh0aGlzLnZtS2luZCkge1xuICAgICAgICAgICAgY2FzZSAwIC8qIGN1c3RvbUVsZW1lbnQgKi86XG4gICAgICAgICAgICAgICAgdGhpcy5kZXRhY2hDdXN0b21FbGVtZW50KGZsYWdzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMSAvKiBjdXN0b21BdHRyaWJ1dGUgKi86XG4gICAgICAgICAgICAgICAgdGhpcy5kZXRhY2hDdXN0b21BdHRyaWJ1dGUoZmxhZ3MpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAyIC8qIHN5bnRoZXRpYyAqLzpcbiAgICAgICAgICAgICAgICB0aGlzLmRldGFjaFN5bnRoZXRpYyhmbGFncyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYWZ0ZXJBdHRhY2goZmxhZ3MpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgICAgICAgdGhpcy5iaW5kaW5nQ29udGV4dC5hZnRlckF0dGFjaChmbGFncyk7IC8vIG5vbi1udWxsIGlzIGltcGxpZWQgYnkgdGhlIGhvb2tcbiAgICB9XG4gICAgYWZ0ZXJEZXRhY2goZmxhZ3MpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgICAgICAgdGhpcy5iaW5kaW5nQ29udGV4dC5hZnRlckRldGFjaChmbGFncyk7IC8vIG5vbi1udWxsIGlzIGltcGxpZWQgYnkgdGhlIGhvb2tcbiAgICB9XG4gICAgbW91bnQoZmxhZ3MpIHtcbiAgICAgICAgc3dpdGNoICh0aGlzLnZtS2luZCkge1xuICAgICAgICAgICAgY2FzZSAwIC8qIGN1c3RvbUVsZW1lbnQgKi86XG4gICAgICAgICAgICAgICAgdGhpcy5tb3VudEN1c3RvbUVsZW1lbnQoZmxhZ3MpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAyIC8qIHN5bnRoZXRpYyAqLzpcbiAgICAgICAgICAgICAgICB0aGlzLm1vdW50U3ludGhldGljKGZsYWdzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1bm1vdW50KGZsYWdzKSB7XG4gICAgICAgIHN3aXRjaCAodGhpcy52bUtpbmQpIHtcbiAgICAgICAgICAgIGNhc2UgMCAvKiBjdXN0b21FbGVtZW50ICovOlxuICAgICAgICAgICAgICAgIHRoaXMudW5tb3VudEN1c3RvbUVsZW1lbnQoZmxhZ3MpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAyIC8qIHN5bnRoZXRpYyAqLzpcbiAgICAgICAgICAgICAgICB0aGlzLnVubW91bnRTeW50aGV0aWMoZmxhZ3MpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNhY2hlKGZsYWdzKSB7XG4gICAgICAgIHN3aXRjaCAodGhpcy52bUtpbmQpIHtcbiAgICAgICAgICAgIGNhc2UgMCAvKiBjdXN0b21FbGVtZW50ICovOlxuICAgICAgICAgICAgICAgIHRoaXMuY2FjaGVDdXN0b21FbGVtZW50KGZsYWdzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMSAvKiBjdXN0b21BdHRyaWJ1dGUgKi86XG4gICAgICAgICAgICAgICAgdGhpcy5jYWNoZUN1c3RvbUF0dHJpYnV0ZShmbGFncyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDIgLyogc3ludGhldGljICovOlxuICAgICAgICAgICAgICAgIHRoaXMuY2FjaGVTeW50aGV0aWMoZmxhZ3MpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldFRhcmdldEFjY2Vzc29yKHByb3BlcnR5TmFtZSkge1xuICAgICAgICBjb25zdCB7IGJpbmRpbmdzIH0gPSB0aGlzO1xuICAgICAgICBpZiAoYmluZGluZ3MgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgY29uc3QgYmluZGluZyA9IGJpbmRpbmdzLmZpbmQoYiA9PiBiLnRhcmdldFByb3BlcnR5ID09PSBwcm9wZXJ0eU5hbWUpO1xuICAgICAgICAgICAgaWYgKGJpbmRpbmcgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBiaW5kaW5nLnRhcmdldE9ic2VydmVyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgfVxuICAgIC8vICNyZWdpb24gYmluZC91bmJpbmRcbiAgICBiaW5kQ3VzdG9tRWxlbWVudChmbGFncywgc2NvcGUpIHtcbiAgICAgICAgY29uc3QgJHNjb3BlID0gdGhpcy5zY29wZTtcbiAgICAgICAgJHNjb3BlLnBhcmVudFNjb3BlID0gc2NvcGUgPT09IHZvaWQgMCA/IG51bGwgOiBzY29wZTtcbiAgICAgICAgJHNjb3BlLnNjb3BlUGFydHMgPSB0aGlzLnNjb3BlUGFydHM7XG4gICAgICAgIGlmICgodGhpcy5zdGF0ZSAmIDQgLyogaXNCb3VuZCAqLykgPiAwKSB7XG4gICAgICAgICAgICByZXR1cm4gTGlmZWN5Y2xlVGFzay5kb25lO1xuICAgICAgICB9XG4gICAgICAgIGZsYWdzIHw9IDQwOTYgLyogZnJvbUJpbmQgKi87XG4gICAgICAgIHRoaXMuc3RhdGUgfD0gMSAvKiBpc0JpbmRpbmcgKi87XG4gICAgICAgIHRoaXMubGlmZWN5Y2xlLmFmdGVyQmluZC5iZWdpbigpO1xuICAgICAgICBpZiAodGhpcy5ob29rcy5oYXNCZWZvcmVCaW5kKSB7XG4gICAgICAgICAgICBjb25zdCByZXQgPSB0aGlzLmJpbmRpbmdDb250ZXh0LmJlZm9yZUJpbmQoZmxhZ3MpO1xuICAgICAgICAgICAgaWYgKGhhc0FzeW5jV29yayhyZXQpKSB7XG4gICAgICAgICAgICAgICAgLy8gdGhpcy5zY29wZSBjb3VsZCBiZSByZWFzc2lnbmVkIGR1cmluZyBiZWZvcmVCaW5kIHNvIHJlZmVyZW5jZSB0aGF0IGluc3RlYWQgb2YgJHNjb3BlLlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29udGludWF0aW9uVGFzayhyZXQsIHRoaXMuYmluZEJpbmRpbmdzLCB0aGlzLCBmbGFncywgdGhpcy5zY29wZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuYmluZEJpbmRpbmdzKGZsYWdzLCB0aGlzLnNjb3BlKTtcbiAgICB9XG4gICAgYmluZEN1c3RvbUF0dHJpYnV0ZShmbGFncywgc2NvcGUpIHtcbiAgICAgICAgaWYgKCh0aGlzLnN0YXRlICYgNCAvKiBpc0JvdW5kICovKSA+IDApIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnNjb3BlID09PSBzY29wZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBMaWZlY3ljbGVUYXNrLmRvbmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmbGFncyB8PSA0MDk2IC8qIGZyb21CaW5kICovO1xuICAgICAgICAgICAgY29uc3QgdGFzayA9IHRoaXMudW5iaW5kKGZsYWdzKTtcbiAgICAgICAgICAgIGlmICghdGFzay5kb25lKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDb250aW51YXRpb25UYXNrKHRhc2ssIHRoaXMuYmluZCwgdGhpcywgZmxhZ3MsIHNjb3BlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZsYWdzIHw9IDQwOTYgLyogZnJvbUJpbmQgKi87XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdGF0ZSB8PSAxIC8qIGlzQmluZGluZyAqLztcbiAgICAgICAgdGhpcy5zY29wZSA9IHNjb3BlO1xuICAgICAgICB0aGlzLmxpZmVjeWNsZS5hZnRlckJpbmQuYmVnaW4oKTtcbiAgICAgICAgaWYgKHRoaXMuaG9va3MuaGFzQmVmb3JlQmluZCkge1xuICAgICAgICAgICAgY29uc3QgcmV0ID0gdGhpcy5iaW5kaW5nQ29udGV4dC5iZWZvcmVCaW5kKGZsYWdzKTtcbiAgICAgICAgICAgIGlmIChoYXNBc3luY1dvcmsocmV0KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29udGludWF0aW9uVGFzayhyZXQsIHRoaXMuZW5kQmluZCwgdGhpcywgZmxhZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuZW5kQmluZChmbGFncyk7XG4gICAgICAgIHJldHVybiBMaWZlY3ljbGVUYXNrLmRvbmU7XG4gICAgfVxuICAgIGJpbmRTeW50aGV0aWMoZmxhZ3MsIHNjb3BlKSB7XG4gICAgICAgIGlmIChzY29wZSA9PSB2b2lkIDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgU2NvcGUgaXMgbnVsbCBvciB1bmRlZmluZWRgKTsgLy8gVE9ETzogY3JlYXRlIGVycm9yIGNvZGVcbiAgICAgICAgfVxuICAgICAgICBzY29wZS5zY29wZVBhcnRzID0gbWVyZ2VEaXN0aW5jdChzY29wZS5zY29wZVBhcnRzLCB0aGlzLnNjb3BlUGFydHMsIGZhbHNlKTtcbiAgICAgICAgaWYgKCh0aGlzLnN0YXRlICYgNCAvKiBpc0JvdW5kICovKSA+IDApIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnNjb3BlID09PSBzY29wZSB8fCAodGhpcy5zdGF0ZSAmIDI1NiAvKiBoYXNMb2NrZWRTY29wZSAqLykgPiAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIExpZmVjeWNsZVRhc2suZG9uZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZsYWdzIHw9IDQwOTYgLyogZnJvbUJpbmQgKi87XG4gICAgICAgICAgICBjb25zdCB0YXNrID0gdGhpcy51bmJpbmQoZmxhZ3MpO1xuICAgICAgICAgICAgaWYgKCF0YXNrLmRvbmUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbnRpbnVhdGlvblRhc2sodGFzaywgdGhpcy5iaW5kLCB0aGlzLCBmbGFncywgc2NvcGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZmxhZ3MgfD0gNDA5NiAvKiBmcm9tQmluZCAqLztcbiAgICAgICAgfVxuICAgICAgICBpZiAoKHRoaXMuc3RhdGUgJiAyNTYgLyogaGFzTG9ja2VkU2NvcGUgKi8pID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLnNjb3BlID0gc2NvcGU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdGF0ZSB8PSAxIC8qIGlzQmluZGluZyAqLztcbiAgICAgICAgdGhpcy5saWZlY3ljbGUuYWZ0ZXJCaW5kLmJlZ2luKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmJpbmRCaW5kaW5ncyhmbGFncywgdGhpcy5zY29wZSk7XG4gICAgfVxuICAgIGJpbmRCaW5kaW5ncyhmbGFncywgc2NvcGUpIHtcbiAgICAgICAgY29uc3QgeyBiaW5kaW5ncyB9ID0gdGhpcztcbiAgICAgICAgaWYgKGJpbmRpbmdzICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgIGNvbnN0IHsgbGVuZ3RoIH0gPSBiaW5kaW5ncztcbiAgICAgICAgICAgIGlmICh0aGlzLmlzU3RyaWN0QmluZGluZykge1xuICAgICAgICAgICAgICAgIGZsYWdzIHw9IDQgLyogaXNTdHJpY3RCaW5kaW5nU3RyYXRlZ3kgKi87XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgYmluZGluZ3NbaV0uJGJpbmQoZmxhZ3MsIHNjb3BlLCB0aGlzLnBhcnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmJpbmRDb250cm9sbGVycyhmbGFncywgdGhpcy5zY29wZSk7XG4gICAgfVxuICAgIGJpbmRDb250cm9sbGVycyhmbGFncywgc2NvcGUpIHtcbiAgICAgICAgbGV0IHRhc2tzID0gdm9pZCAwO1xuICAgICAgICBsZXQgdGFzaztcbiAgICAgICAgY29uc3QgeyBjb250cm9sbGVycyB9ID0gdGhpcztcbiAgICAgICAgaWYgKGNvbnRyb2xsZXJzICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgIGNvbnN0IHsgbGVuZ3RoIH0gPSBjb250cm9sbGVycztcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyc1tpXS5wYXJlbnQgPSB0aGlzO1xuICAgICAgICAgICAgICAgIHRhc2sgPSBjb250cm9sbGVyc1tpXS5iaW5kKGZsYWdzLCBzY29wZSwgdGhpcy5wYXJ0KTtcbiAgICAgICAgICAgICAgICBpZiAoIXRhc2suZG9uZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGFza3MgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFza3MgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0YXNrcy5wdXNoKHRhc2spO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGFza3MgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgdGhpcy5lbmRCaW5kKGZsYWdzKTtcbiAgICAgICAgICAgIHJldHVybiBMaWZlY3ljbGVUYXNrLmRvbmU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBBZ2dyZWdhdGVDb250aW51YXRpb25UYXNrKHRhc2tzLCB0aGlzLmVuZEJpbmQsIHRoaXMsIGZsYWdzKTtcbiAgICB9XG4gICAgZW5kQmluZChmbGFncykge1xuICAgICAgICBpZiAodGhpcy5ob29rcy5oYXNBZnRlckJpbmQpIHtcbiAgICAgICAgICAgIHRoaXMubGlmZWN5Y2xlLmFmdGVyQmluZC5hZGQodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdGF0ZSA9IHRoaXMuc3RhdGUgXiAxIC8qIGlzQmluZGluZyAqLyB8IDQgLyogaXNCb3VuZCAqLztcbiAgICAgICAgdGhpcy5saWZlY3ljbGUuYWZ0ZXJCaW5kLmVuZChmbGFncyk7XG4gICAgfVxuICAgIHVuYmluZEN1c3RvbUVsZW1lbnQoZmxhZ3MpIHtcbiAgICAgICAgaWYgKCh0aGlzLnN0YXRlICYgNCAvKiBpc0JvdW5kICovKSA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIExpZmVjeWNsZVRhc2suZG9uZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNjb3BlLnBhcmVudFNjb3BlID0gbnVsbDtcbiAgICAgICAgdGhpcy5zdGF0ZSB8PSAyIC8qIGlzVW5iaW5kaW5nICovO1xuICAgICAgICBmbGFncyB8PSA4MTkyIC8qIGZyb21VbmJpbmQgKi87XG4gICAgICAgIHRoaXMubGlmZWN5Y2xlLmFmdGVyVW5iaW5kLmJlZ2luKCk7XG4gICAgICAgIGlmICh0aGlzLmhvb2tzLmhhc0JlZm9yZVVuYmluZCkge1xuICAgICAgICAgICAgY29uc3QgcmV0ID0gdGhpcy5iaW5kaW5nQ29udGV4dC5iZWZvcmVVbmJpbmQoZmxhZ3MpO1xuICAgICAgICAgICAgaWYgKGhhc0FzeW5jV29yayhyZXQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDb250aW51YXRpb25UYXNrKHJldCwgdGhpcy51bmJpbmRDb250cm9sbGVycywgdGhpcywgZmxhZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnVuYmluZENvbnRyb2xsZXJzKGZsYWdzKTtcbiAgICB9XG4gICAgdW5iaW5kQ3VzdG9tQXR0cmlidXRlKGZsYWdzKSB7XG4gICAgICAgIGlmICgodGhpcy5zdGF0ZSAmIDQgLyogaXNCb3VuZCAqLykgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBMaWZlY3ljbGVUYXNrLmRvbmU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdGF0ZSB8PSAyIC8qIGlzVW5iaW5kaW5nICovO1xuICAgICAgICBmbGFncyB8PSA4MTkyIC8qIGZyb21VbmJpbmQgKi87XG4gICAgICAgIHRoaXMubGlmZWN5Y2xlLmFmdGVyVW5iaW5kLmJlZ2luKCk7XG4gICAgICAgIGlmICh0aGlzLmhvb2tzLmhhc0JlZm9yZVVuYmluZCkge1xuICAgICAgICAgICAgY29uc3QgcmV0ID0gdGhpcy5iaW5kaW5nQ29udGV4dC5iZWZvcmVVbmJpbmQoZmxhZ3MpO1xuICAgICAgICAgICAgaWYgKGhhc0FzeW5jV29yayhyZXQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDb250aW51YXRpb25UYXNrKHJldCwgdGhpcy5lbmRVbmJpbmQsIHRoaXMsIGZsYWdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVuZFVuYmluZChmbGFncyk7XG4gICAgICAgIHJldHVybiBMaWZlY3ljbGVUYXNrLmRvbmU7XG4gICAgfVxuICAgIHVuYmluZFN5bnRoZXRpYyhmbGFncykge1xuICAgICAgICBpZiAoKHRoaXMuc3RhdGUgJiA0IC8qIGlzQm91bmQgKi8pID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gTGlmZWN5Y2xlVGFzay5kb25lO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3RhdGUgfD0gMiAvKiBpc1VuYmluZGluZyAqLztcbiAgICAgICAgZmxhZ3MgfD0gODE5MiAvKiBmcm9tVW5iaW5kICovO1xuICAgICAgICB0aGlzLmxpZmVjeWNsZS5hZnRlclVuYmluZC5iZWdpbigpO1xuICAgICAgICByZXR1cm4gdGhpcy51bmJpbmRDb250cm9sbGVycyhmbGFncyk7XG4gICAgfVxuICAgIHVuYmluZEJpbmRpbmdzKGZsYWdzKSB7XG4gICAgICAgIGNvbnN0IHsgYmluZGluZ3MgfSA9IHRoaXM7XG4gICAgICAgIGlmIChiaW5kaW5ncyAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gYmluZGluZ3MubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgICAgICAgICBiaW5kaW5nc1tpXS4kdW5iaW5kKGZsYWdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVuZFVuYmluZChmbGFncyk7XG4gICAgfVxuICAgIHVuYmluZENvbnRyb2xsZXJzKGZsYWdzKSB7XG4gICAgICAgIGxldCB0YXNrcyA9IHZvaWQgMDtcbiAgICAgICAgbGV0IHRhc2s7XG4gICAgICAgIGNvbnN0IHsgY29udHJvbGxlcnMgfSA9IHRoaXM7XG4gICAgICAgIGlmIChjb250cm9sbGVycyAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gY29udHJvbGxlcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgICAgICAgICB0YXNrID0gY29udHJvbGxlcnNbaV0udW5iaW5kKGZsYWdzKTtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyc1tpXS5wYXJlbnQgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgaWYgKCF0YXNrLmRvbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhc2tzID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tzID0gW107XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGFza3MucHVzaCh0YXNrKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRhc2tzID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIHRoaXMudW5iaW5kQmluZGluZ3MoZmxhZ3MpO1xuICAgICAgICAgICAgcmV0dXJuIExpZmVjeWNsZVRhc2suZG9uZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IEFnZ3JlZ2F0ZUNvbnRpbnVhdGlvblRhc2sodGFza3MsIHRoaXMudW5iaW5kQmluZGluZ3MsIHRoaXMsIGZsYWdzKTtcbiAgICB9XG4gICAgZW5kVW5iaW5kKGZsYWdzKSB7XG4gICAgICAgIHN3aXRjaCAodGhpcy52bUtpbmQpIHtcbiAgICAgICAgICAgIGNhc2UgMSAvKiBjdXN0b21BdHRyaWJ1dGUgKi86XG4gICAgICAgICAgICAgICAgdGhpcy5zY29wZSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMiAvKiBzeW50aGV0aWMgKi86XG4gICAgICAgICAgICAgICAgaWYgKCh0aGlzLnN0YXRlICYgMjU2IC8qIGhhc0xvY2tlZFNjb3BlICovKSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNjb3BlID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5ob29rcy5oYXNBZnRlclVuYmluZCkge1xuICAgICAgICAgICAgdGhpcy5saWZlY3ljbGUuYWZ0ZXJVbmJpbmQuYWRkKHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3RhdGUgPSAodGhpcy5zdGF0ZSB8IDYgLyogaXNCb3VuZE9yVW5iaW5kaW5nICovKSBeIDYgLyogaXNCb3VuZE9yVW5iaW5kaW5nICovO1xuICAgICAgICB0aGlzLmxpZmVjeWNsZS5hZnRlclVuYmluZC5lbmQoZmxhZ3MpO1xuICAgIH1cbiAgICAvLyAjZW5kcmVnaW9uXG4gICAgLy8gI3JlZ2lvbiBhdHRhY2gvZGV0YWNoXG4gICAgYXR0YWNoQ3VzdG9tRWxlbWVudChmbGFncykge1xuICAgICAgICBmbGFncyB8PSAxNjM4NCAvKiBmcm9tQXR0YWNoICovO1xuICAgICAgICB0aGlzLnN0YXRlIHw9IDggLyogaXNBdHRhY2hpbmcgKi87XG4gICAgICAgIHRoaXMubGlmZWN5Y2xlLm1vdW50LmFkZCh0aGlzKTtcbiAgICAgICAgdGhpcy5saWZlY3ljbGUuYWZ0ZXJBdHRhY2guYmVnaW4oKTtcbiAgICAgICAgaWYgKHRoaXMuaG9va3MuaGFzQmVmb3JlQXR0YWNoKSB7XG4gICAgICAgICAgICB0aGlzLmJpbmRpbmdDb250ZXh0LmJlZm9yZUF0dGFjaChmbGFncyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hdHRhY2hDb250cm9sbGVycyhmbGFncyk7XG4gICAgICAgIGlmICh0aGlzLmhvb2tzLmhhc0FmdGVyQXR0YWNoKSB7XG4gICAgICAgICAgICB0aGlzLmxpZmVjeWNsZS5hZnRlckF0dGFjaC5hZGQodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdGF0ZSA9IHRoaXMuc3RhdGUgXiA4IC8qIGlzQXR0YWNoaW5nICovIHwgMzIgLyogaXNBdHRhY2hlZCAqLztcbiAgICAgICAgdGhpcy5saWZlY3ljbGUuYWZ0ZXJBdHRhY2guZW5kKGZsYWdzKTtcbiAgICB9XG4gICAgYXR0YWNoQ3VzdG9tQXR0cmlidXRlKGZsYWdzKSB7XG4gICAgICAgIGZsYWdzIHw9IDE2Mzg0IC8qIGZyb21BdHRhY2ggKi87XG4gICAgICAgIHRoaXMuc3RhdGUgfD0gOCAvKiBpc0F0dGFjaGluZyAqLztcbiAgICAgICAgdGhpcy5saWZlY3ljbGUuYWZ0ZXJBdHRhY2guYmVnaW4oKTtcbiAgICAgICAgaWYgKHRoaXMuaG9va3MuaGFzQmVmb3JlQXR0YWNoKSB7XG4gICAgICAgICAgICB0aGlzLmJpbmRpbmdDb250ZXh0LmJlZm9yZUF0dGFjaChmbGFncyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaG9va3MuaGFzQWZ0ZXJBdHRhY2gpIHtcbiAgICAgICAgICAgIHRoaXMubGlmZWN5Y2xlLmFmdGVyQXR0YWNoLmFkZCh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0YXRlID0gdGhpcy5zdGF0ZSBeIDggLyogaXNBdHRhY2hpbmcgKi8gfCAzMiAvKiBpc0F0dGFjaGVkICovO1xuICAgICAgICB0aGlzLmxpZmVjeWNsZS5hZnRlckF0dGFjaC5lbmQoZmxhZ3MpO1xuICAgIH1cbiAgICBhdHRhY2hTeW50aGV0aWMoZmxhZ3MpIHtcbiAgICAgICAgaWYgKCgodGhpcy5zdGF0ZSAmIDMyIC8qIGlzQXR0YWNoZWQgKi8pID4gMCAmJiBmbGFncyAmIDMzNTU0NDMyIC8qIHJlb3JkZXJOb2RlcyAqLykgPiAwKSB7XG4gICAgICAgICAgICB0aGlzLmxpZmVjeWNsZS5tb3VudC5hZGQodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmbGFncyB8PSAxNjM4NCAvKiBmcm9tQXR0YWNoICovO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSB8PSA4IC8qIGlzQXR0YWNoaW5nICovO1xuICAgICAgICAgICAgdGhpcy5saWZlY3ljbGUubW91bnQuYWRkKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5saWZlY3ljbGUuYWZ0ZXJBdHRhY2guYmVnaW4oKTtcbiAgICAgICAgICAgIHRoaXMuYXR0YWNoQ29udHJvbGxlcnMoZmxhZ3MpO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IHRoaXMuc3RhdGUgXiA4IC8qIGlzQXR0YWNoaW5nICovIHwgMzIgLyogaXNBdHRhY2hlZCAqLztcbiAgICAgICAgICAgIHRoaXMubGlmZWN5Y2xlLmFmdGVyQXR0YWNoLmVuZChmbGFncyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZGV0YWNoQ3VzdG9tRWxlbWVudChmbGFncykge1xuICAgICAgICBmbGFncyB8PSAzMjc2OCAvKiBmcm9tRGV0YWNoICovO1xuICAgICAgICB0aGlzLnN0YXRlIHw9IDE2IC8qIGlzRGV0YWNoaW5nICovO1xuICAgICAgICB0aGlzLmxpZmVjeWNsZS5hZnRlckRldGFjaC5iZWdpbigpO1xuICAgICAgICB0aGlzLmxpZmVjeWNsZS51bm1vdW50LmFkZCh0aGlzKTtcbiAgICAgICAgaWYgKHRoaXMuaG9va3MuaGFzQmVmb3JlRGV0YWNoKSB7XG4gICAgICAgICAgICB0aGlzLmJpbmRpbmdDb250ZXh0LmJlZm9yZURldGFjaChmbGFncyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kZXRhY2hDb250cm9sbGVycyhmbGFncyk7XG4gICAgICAgIGlmICh0aGlzLmhvb2tzLmhhc0FmdGVyRGV0YWNoKSB7XG4gICAgICAgICAgICB0aGlzLmxpZmVjeWNsZS5hZnRlckRldGFjaC5hZGQodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdGF0ZSA9ICh0aGlzLnN0YXRlIHwgNDggLyogaXNBdHRhY2hlZE9yRGV0YWNoaW5nICovKSBeIDQ4IC8qIGlzQXR0YWNoZWRPckRldGFjaGluZyAqLztcbiAgICAgICAgdGhpcy5saWZlY3ljbGUuYWZ0ZXJEZXRhY2guZW5kKGZsYWdzKTtcbiAgICB9XG4gICAgZGV0YWNoQ3VzdG9tQXR0cmlidXRlKGZsYWdzKSB7XG4gICAgICAgIGZsYWdzIHw9IDMyNzY4IC8qIGZyb21EZXRhY2ggKi87XG4gICAgICAgIHRoaXMuc3RhdGUgfD0gMTYgLyogaXNEZXRhY2hpbmcgKi87XG4gICAgICAgIHRoaXMubGlmZWN5Y2xlLmFmdGVyRGV0YWNoLmJlZ2luKCk7XG4gICAgICAgIGlmICh0aGlzLmhvb2tzLmhhc0JlZm9yZURldGFjaCkge1xuICAgICAgICAgICAgdGhpcy5iaW5kaW5nQ29udGV4dC5iZWZvcmVEZXRhY2goZmxhZ3MpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmhvb2tzLmhhc0FmdGVyRGV0YWNoKSB7XG4gICAgICAgICAgICB0aGlzLmxpZmVjeWNsZS5hZnRlckRldGFjaC5hZGQodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdGF0ZSA9ICh0aGlzLnN0YXRlIHwgNDggLyogaXNBdHRhY2hlZE9yRGV0YWNoaW5nICovKSBeIDQ4IC8qIGlzQXR0YWNoZWRPckRldGFjaGluZyAqLztcbiAgICAgICAgdGhpcy5saWZlY3ljbGUuYWZ0ZXJEZXRhY2guZW5kKGZsYWdzKTtcbiAgICB9XG4gICAgZGV0YWNoU3ludGhldGljKGZsYWdzKSB7XG4gICAgICAgIGZsYWdzIHw9IDMyNzY4IC8qIGZyb21EZXRhY2ggKi87XG4gICAgICAgIHRoaXMuc3RhdGUgfD0gMTYgLyogaXNEZXRhY2hpbmcgKi87XG4gICAgICAgIHRoaXMubGlmZWN5Y2xlLmFmdGVyRGV0YWNoLmJlZ2luKCk7XG4gICAgICAgIHRoaXMubGlmZWN5Y2xlLnVubW91bnQuYWRkKHRoaXMpO1xuICAgICAgICB0aGlzLmRldGFjaENvbnRyb2xsZXJzKGZsYWdzKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9ICh0aGlzLnN0YXRlIHwgNDggLyogaXNBdHRhY2hlZE9yRGV0YWNoaW5nICovKSBeIDQ4IC8qIGlzQXR0YWNoZWRPckRldGFjaGluZyAqLztcbiAgICAgICAgdGhpcy5saWZlY3ljbGUuYWZ0ZXJEZXRhY2guZW5kKGZsYWdzKTtcbiAgICB9XG4gICAgYXR0YWNoQ29udHJvbGxlcnMoZmxhZ3MpIHtcbiAgICAgICAgY29uc3QgeyBjb250cm9sbGVycyB9ID0gdGhpcztcbiAgICAgICAgaWYgKGNvbnRyb2xsZXJzICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgIGNvbnN0IHsgbGVuZ3RoIH0gPSBjb250cm9sbGVycztcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyc1tpXS5hdHRhY2goZmxhZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGRldGFjaENvbnRyb2xsZXJzKGZsYWdzKSB7XG4gICAgICAgIGNvbnN0IHsgY29udHJvbGxlcnMgfSA9IHRoaXM7XG4gICAgICAgIGlmIChjb250cm9sbGVycyAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gY29udHJvbGxlcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyc1tpXS5kZXRhY2goZmxhZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8vICNlbmRyZWdpb25cbiAgICAvLyAjcmVnaW9uIG1vdW50L3VubW91bnQvY2FjaGVcbiAgICBtb3VudEN1c3RvbUVsZW1lbnQoZmxhZ3MpIHtcbiAgICAgICAgaWYgKCh0aGlzLnN0YXRlICYgNjQgLyogaXNNb3VudGVkICovKSA+IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0YXRlIHw9IDY0IC8qIGlzTW91bnRlZCAqLztcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgICAgICAgdGhpcy5wcm9qZWN0b3IucHJvamVjdCh0aGlzLm5vZGVzKTsgLy8gbm9uLW51bGwgaXMgaW1wbGllZCBieSB0aGUgaG9va1xuICAgIH1cbiAgICBtb3VudFN5bnRoZXRpYyhmbGFncykge1xuICAgICAgICBjb25zdCBub2RlcyA9IHRoaXMubm9kZXM7IC8vIG5vbiBudWxsIGlzIGltcGxpZWQgYnkgdGhlIGhvb2tcbiAgICAgICAgY29uc3QgbG9jYXRpb24gPSB0aGlzLmxvY2F0aW9uOyAvLyBub24gbnVsbCBpcyBpbXBsaWVkIGJ5IHRoZSBob29rXG4gICAgICAgIHRoaXMuc3RhdGUgfD0gNjQgLyogaXNNb3VudGVkICovO1xuICAgICAgICBzd2l0Y2ggKHRoaXMubW91bnRTdHJhdGVneSkge1xuICAgICAgICAgICAgY2FzZSAyIC8qIGFwcGVuZCAqLzpcbiAgICAgICAgICAgICAgICBub2Rlcy5hcHBlbmRUbyhsb2NhdGlvbik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIG5vZGVzLmluc2VydEJlZm9yZShsb2NhdGlvbik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdW5tb3VudEN1c3RvbUVsZW1lbnQoZmxhZ3MpIHtcbiAgICAgICAgaWYgKCh0aGlzLnN0YXRlICYgNjQgLyogaXNNb3VudGVkICovKSA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3RhdGUgPSAodGhpcy5zdGF0ZSB8IDY0IC8qIGlzTW91bnRlZCAqLykgXiA2NCAvKiBpc01vdW50ZWQgKi87XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG4gICAgICAgIHRoaXMucHJvamVjdG9yLnRha2UodGhpcy5ub2Rlcyk7IC8vIG5vbi1udWxsIGlzIGltcGxpZWQgYnkgdGhlIGhvb2tcbiAgICB9XG4gICAgdW5tb3VudFN5bnRoZXRpYyhmbGFncykge1xuICAgICAgICBpZiAoKHRoaXMuc3RhdGUgJiA2NCAvKiBpc01vdW50ZWQgKi8pID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdGF0ZSA9ICh0aGlzLnN0YXRlIHwgNjQgLyogaXNNb3VudGVkICovKSBeIDY0IC8qIGlzTW91bnRlZCAqLztcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgICAgICAgdGhpcy5ub2Rlcy5yZW1vdmUoKTsgLy8gbm9uLW51bGwgaXMgaW1wbGllZCBieSB0aGUgaG9va1xuICAgICAgICB0aGlzLm5vZGVzLnVubGluaygpO1xuICAgICAgICBpZiAoKHRoaXMuc3RhdGUgJiA1MTIgLyogY2FuQmVDYWNoZWQgKi8pID4gMCkge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9ICh0aGlzLnN0YXRlIHwgNTEyIC8qIGNhbkJlQ2FjaGVkICovKSBeIDUxMiAvKiBjYW5CZUNhY2hlZCAqLztcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG4gICAgICAgICAgICBpZiAodGhpcy52aWV3RmFjdG9yeS50cnlSZXR1cm5Ub0NhY2hlKHRoaXMpKSB7IC8vIG5vbi1udWxsIGlzIGltcGxpZWQgYnkgdGhlIGhvb2tcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNhY2hlQ3VzdG9tRWxlbWVudChmbGFncykge1xuICAgICAgICBmbGFncyB8PSA2NTUzNiAvKiBmcm9tQ2FjaGUgKi87XG4gICAgICAgIGlmICh0aGlzLmhvb2tzLmhhc0NhY2hpbmcpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG4gICAgICAgICAgICB0aGlzLmJpbmRpbmdDb250ZXh0LmNhY2hpbmcoZmxhZ3MpOyAvLyBub24tbnVsbCBpcyBpbXBsaWVkIGJ5IHRoZSBob29rXG4gICAgICAgIH1cbiAgICB9XG4gICAgY2FjaGVDdXN0b21BdHRyaWJ1dGUoZmxhZ3MpIHtcbiAgICAgICAgZmxhZ3MgfD0gNjU1MzYgLyogZnJvbUNhY2hlICovO1xuICAgICAgICBpZiAodGhpcy5ob29rcy5oYXNDYWNoaW5nKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvblxuICAgICAgICAgICAgdGhpcy5iaW5kaW5nQ29udGV4dC5jYWNoaW5nKGZsYWdzKTsgLy8gbm9uLW51bGwgaXMgaW1wbGllZCBieSB0aGUgaG9va1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgY29udHJvbGxlcnMgfSA9IHRoaXM7XG4gICAgICAgIGlmIChjb250cm9sbGVycyAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBjb25zdCB7IGxlbmd0aCB9ID0gY29udHJvbGxlcnM7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gbGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyc1tpXS5jYWNoZShmbGFncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2FjaGVTeW50aGV0aWMoZmxhZ3MpIHtcbiAgICAgICAgY29uc3QgeyBjb250cm9sbGVycyB9ID0gdGhpcztcbiAgICAgICAgaWYgKGNvbnRyb2xsZXJzICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgIGNvbnN0IHsgbGVuZ3RoIH0gPSBjb250cm9sbGVycztcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSBsZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXJzW2ldLmNhY2hlKGZsYWdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGdldEJpbmRpbmdDb250ZXh0KGZsYWdzLCBpbnN0YW5jZSkge1xuICAgIGlmIChpbnN0YW5jZS5ub1Byb3h5ID09PSB0cnVlIHx8IChmbGFncyAmIDIgLyogcHJveHlTdHJhdGVneSAqLykgPT09IDApIHtcbiAgICAgICAgcmV0dXJuIGluc3RhbmNlO1xuICAgIH1cbiAgICByZXR1cm4gUHJveHlPYnNlcnZlci5nZXRPckNyZWF0ZShpbnN0YW5jZSkucHJveHk7XG59XG5mdW5jdGlvbiBnZXRMb29rdXAoaW5zdGFuY2UpIHtcbiAgICBsZXQgbG9va3VwID0gaW5zdGFuY2UuJG9ic2VydmVycztcbiAgICBpZiAobG9va3VwID09PSB2b2lkIDApIHtcbiAgICAgICAgUmVmbGVjdC5kZWZpbmVQcm9wZXJ0eShpbnN0YW5jZSwgJyRvYnNlcnZlcnMnLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIHZhbHVlOiBsb29rdXAgPSB7fSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBsb29rdXA7XG59XG5mdW5jdGlvbiBjcmVhdGVPYnNlcnZlcnMobGlmZWN5Y2xlLCBkZWZpbml0aW9uLCBmbGFncywgaW5zdGFuY2UpIHtcbiAgICBjb25zdCBiaW5kYWJsZXMgPSBkZWZpbml0aW9uLmJpbmRhYmxlcztcbiAgICBjb25zdCBvYnNlcnZhYmxlTmFtZXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhiaW5kYWJsZXMpO1xuICAgIGNvbnN0IGxlbmd0aCA9IG9ic2VydmFibGVOYW1lcy5sZW5ndGg7XG4gICAgaWYgKGxlbmd0aCA+IDApIHtcbiAgICAgICAgbGV0IG5hbWU7XG4gICAgICAgIGxldCBiaW5kYWJsZTtcbiAgICAgICAgaWYgKChmbGFncyAmIDIgLyogcHJveHlTdHJhdGVneSAqLykgPiAwKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgbmFtZSA9IG9ic2VydmFibGVOYW1lc1tpXTtcbiAgICAgICAgICAgICAgICBiaW5kYWJsZSA9IGJpbmRhYmxlc1tuYW1lXTtcbiAgICAgICAgICAgICAgICBuZXcgQmluZGFibGVPYnNlcnZlcihsaWZlY3ljbGUsIGZsYWdzLCBQcm94eU9ic2VydmVyLmdldE9yQ3JlYXRlKGluc3RhbmNlKS5wcm94eSwgbmFtZSwgYmluZGFibGUuY2FsbGJhY2ssIGJpbmRhYmxlLnNldCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBvYnNlcnZlcnMgPSBnZXRMb29rdXAoaW5zdGFuY2UpO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgIG5hbWUgPSBvYnNlcnZhYmxlTmFtZXNbaV07XG4gICAgICAgICAgICAgICAgaWYgKG9ic2VydmVyc1tuYW1lXSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGJpbmRhYmxlID0gYmluZGFibGVzW25hbWVdO1xuICAgICAgICAgICAgICAgICAgICBvYnNlcnZlcnNbbmFtZV0gPSBuZXcgQmluZGFibGVPYnNlcnZlcihsaWZlY3ljbGUsIGZsYWdzLCBpbnN0YW5jZSwgbmFtZSwgYmluZGFibGUuY2FsbGJhY2ssIGJpbmRhYmxlLnNldCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gY3JlYXRlQ2hpbGRyZW5PYnNlcnZlcnMoY29udHJvbGxlciwgZGVmaW5pdGlvbiwgZmxhZ3MsIGluc3RhbmNlKSB7XG4gICAgY29uc3QgY2hpbGRyZW5PYnNlcnZlcnMgPSBkZWZpbml0aW9uLmNoaWxkcmVuT2JzZXJ2ZXJzO1xuICAgIGNvbnN0IGNoaWxkT2JzZXJ2ZXJOYW1lcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGNoaWxkcmVuT2JzZXJ2ZXJzKTtcbiAgICBjb25zdCBsZW5ndGggPSBjaGlsZE9ic2VydmVyTmFtZXMubGVuZ3RoO1xuICAgIGlmIChsZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IG9ic2VydmVycyA9IGdldExvb2t1cChpbnN0YW5jZSk7XG4gICAgICAgIGxldCBuYW1lO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBuYW1lID0gY2hpbGRPYnNlcnZlck5hbWVzW2ldO1xuICAgICAgICAgICAgaWYgKG9ic2VydmVyc1tuYW1lXSA9PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGlsZHJlbkRlc2NyaXB0aW9uID0gY2hpbGRyZW5PYnNlcnZlcnNbbmFtZV07XG4gICAgICAgICAgICAgICAgb2JzZXJ2ZXJzW25hbWVdID0gbmV3IENoaWxkcmVuT2JzZXJ2ZXIoY29udHJvbGxlciwgaW5zdGFuY2UsIGZsYWdzLCBuYW1lLCBjaGlsZHJlbkRlc2NyaXB0aW9uLmNhbGxiYWNrLCBjaGlsZHJlbkRlc2NyaXB0aW9uLnF1ZXJ5LCBjaGlsZHJlbkRlc2NyaXB0aW9uLmZpbHRlciwgY2hpbGRyZW5EZXNjcmlwdGlvbi5tYXAsIGNoaWxkcmVuRGVzY3JpcHRpb24ub3B0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb250cm9sbGVyLmpzLm1hcCIsImltcG9ydCB7IEN1c3RvbUVsZW1lbnREZWZpbml0aW9uIH0gZnJvbSAnLi4vcmVzb3VyY2VzL2N1c3RvbS1lbGVtZW50JztcbmltcG9ydCB7IElUYXJnZXRlZEluc3RydWN0aW9uLCBtZXJnZVBhcnRzIH0gZnJvbSAnLi4vZGVmaW5pdGlvbnMnO1xuaW1wb3J0IHsgSW5zdGFuY2VQcm92aWRlciwgUmVwb3J0ZXIgfSBmcm9tICdAYXVyZWxpYS9rZXJuZWwnO1xuaW1wb3J0IHsgSUNvbnRyb2xsZXIsIElWaWV3RmFjdG9yeSwgSUxpZmVjeWNsZSB9IGZyb20gJy4uL2xpZmVjeWNsZSc7XG5pbXBvcnQgeyBJRE9NLCBJUmVuZGVyTG9jYXRpb24gfSBmcm9tICcuLi9kb20nO1xuaW1wb3J0IHsgSVJlbmRlcmVyLCBJVGVtcGxhdGVDb21waWxlciB9IGZyb20gJy4uL3JlbmRlcmVyJztcbmltcG9ydCB7IFZpZXdGYWN0b3J5IH0gZnJvbSAnLi92aWV3JztcbmNvbnN0IGRlZmluaXRpb25Db250YWluZXJMb29rdXAgPSBuZXcgV2Vha01hcCgpO1xuY29uc3QgZGVmaW5pdGlvbkNvbnRhaW5lclBhcnRzTG9va3VwID0gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IGZyYWdtZW50Q2FjaGUgPSBuZXcgV2Vha01hcCgpO1xuZXhwb3J0IGZ1bmN0aW9uIGlzUmVuZGVyQ29udGV4dCh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFJlbmRlckNvbnRleHQ7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0UmVuZGVyQ29udGV4dChwYXJ0aWFsRGVmaW5pdGlvbiwgcGFyZW50Q29udGFpbmVyLCBwYXJ0cykge1xuICAgIGNvbnN0IGRlZmluaXRpb24gPSBDdXN0b21FbGVtZW50RGVmaW5pdGlvbi5nZXRPckNyZWF0ZShwYXJ0aWFsRGVmaW5pdGlvbik7XG4gICAgaWYgKGlzUmVuZGVyQ29udGV4dChwYXJlbnRDb250YWluZXIpKSB7XG4gICAgICAgIHBhcnRzID0gbWVyZ2VQYXJ0cyhwYXJlbnRDb250YWluZXIucGFydHMsIHBhcnRzKTtcbiAgICB9XG4gICAgLy8gaW5qZWN0YWJsZSBjb21wbGV0ZWx5IHByZXZlbnRzIGNhY2hpbmcsIGVuc3VyaW5nIHRoYXQgZWFjaCBpbnN0YW5jZSBnZXRzIGEgbmV3IHJlbmRlciBjb250ZXh0XG4gICAgaWYgKGRlZmluaXRpb24uaW5qZWN0YWJsZSAhPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gbmV3IFJlbmRlckNvbnRleHQoZGVmaW5pdGlvbiwgcGFyZW50Q29udGFpbmVyLCBwYXJ0cyk7XG4gICAgfVxuICAgIGlmIChwYXJ0cyA9PT0gdm9pZCAwKSB7XG4gICAgICAgIGxldCBjb250YWluZXJMb29rdXAgPSBkZWZpbml0aW9uQ29udGFpbmVyTG9va3VwLmdldChkZWZpbml0aW9uKTtcbiAgICAgICAgaWYgKGNvbnRhaW5lckxvb2t1cCA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBkZWZpbml0aW9uQ29udGFpbmVyTG9va3VwLnNldChkZWZpbml0aW9uLCBjb250YWluZXJMb29rdXAgPSBuZXcgV2Vha01hcCgpKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY29udGV4dCA9IGNvbnRhaW5lckxvb2t1cC5nZXQocGFyZW50Q29udGFpbmVyKTtcbiAgICAgICAgaWYgKGNvbnRleHQgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgY29udGFpbmVyTG9va3VwLnNldChwYXJlbnRDb250YWluZXIsIGNvbnRleHQgPSBuZXcgUmVuZGVyQ29udGV4dChkZWZpbml0aW9uLCBwYXJlbnRDb250YWluZXIsIHBhcnRzKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbnRleHQ7XG4gICAgfVxuICAgIGxldCBjb250YWluZXJQYXJ0c0xvb2t1cCA9IGRlZmluaXRpb25Db250YWluZXJQYXJ0c0xvb2t1cC5nZXQoZGVmaW5pdGlvbik7XG4gICAgaWYgKGNvbnRhaW5lclBhcnRzTG9va3VwID09PSB2b2lkIDApIHtcbiAgICAgICAgZGVmaW5pdGlvbkNvbnRhaW5lclBhcnRzTG9va3VwLnNldChkZWZpbml0aW9uLCBjb250YWluZXJQYXJ0c0xvb2t1cCA9IG5ldyBXZWFrTWFwKCkpO1xuICAgIH1cbiAgICBsZXQgcGFydHNMb29rdXAgPSBjb250YWluZXJQYXJ0c0xvb2t1cC5nZXQocGFyZW50Q29udGFpbmVyKTtcbiAgICBpZiAocGFydHNMb29rdXAgPT09IHZvaWQgMCkge1xuICAgICAgICBjb250YWluZXJQYXJ0c0xvb2t1cC5zZXQocGFyZW50Q29udGFpbmVyLCBwYXJ0c0xvb2t1cCA9IG5ldyBXZWFrTWFwKCkpO1xuICAgIH1cbiAgICBsZXQgY29udGV4dCA9IHBhcnRzTG9va3VwLmdldChwYXJ0cyk7XG4gICAgaWYgKGNvbnRleHQgPT09IHZvaWQgMCkge1xuICAgICAgICBwYXJ0c0xvb2t1cC5zZXQocGFydHMsIGNvbnRleHQgPSBuZXcgUmVuZGVyQ29udGV4dChkZWZpbml0aW9uLCBwYXJlbnRDb250YWluZXIsIHBhcnRzKSk7XG4gICAgfVxuICAgIHJldHVybiBjb250ZXh0O1xufVxuZXhwb3J0IGNsYXNzIFJlbmRlckNvbnRleHQge1xuICAgIGNvbnN0cnVjdG9yKGRlZmluaXRpb24sIHBhcmVudENvbnRhaW5lciwgcGFydHMpIHtcbiAgICAgICAgdGhpcy5kZWZpbml0aW9uID0gZGVmaW5pdGlvbjtcbiAgICAgICAgdGhpcy5wYXJlbnRDb250YWluZXIgPSBwYXJlbnRDb250YWluZXI7XG4gICAgICAgIHRoaXMucGFydHMgPSBwYXJ0cztcbiAgICAgICAgdGhpcy52aWV3TW9kZWxQcm92aWRlciA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5mcmFnbWVudCA9IG51bGw7XG4gICAgICAgIHRoaXMuZmFjdG9yeSA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5pc0NvbXBpbGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuY29tcGlsZWREZWZpbml0aW9uID0gKHZvaWQgMCk7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyID0gcGFyZW50Q29udGFpbmVyLmNyZWF0ZUNoaWxkKCk7XG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSBjb250YWluZXIuZ2V0KElSZW5kZXJlcik7XG4gICAgICAgIGNvbnRhaW5lci5yZWdpc3RlclJlc29sdmVyKElWaWV3RmFjdG9yeSwgdGhpcy5mYWN0b3J5UHJvdmlkZXIgPSBuZXcgVmlld0ZhY3RvcnlQcm92aWRlcigpLCB0cnVlKTtcbiAgICAgICAgY29udGFpbmVyLnJlZ2lzdGVyUmVzb2x2ZXIoSUNvbnRyb2xsZXIsIHRoaXMucGFyZW50Q29udHJvbGxlclByb3ZpZGVyID0gbmV3IEluc3RhbmNlUHJvdmlkZXIoKSwgdHJ1ZSk7XG4gICAgICAgIGNvbnRhaW5lci5yZWdpc3RlclJlc29sdmVyKElUYXJnZXRlZEluc3RydWN0aW9uLCB0aGlzLmluc3RydWN0aW9uUHJvdmlkZXIgPSBuZXcgSW5zdGFuY2VQcm92aWRlcigpLCB0cnVlKTtcbiAgICAgICAgY29udGFpbmVyLnJlZ2lzdGVyUmVzb2x2ZXIoSVJlbmRlckxvY2F0aW9uLCB0aGlzLnJlbmRlckxvY2F0aW9uUHJvdmlkZXIgPSBuZXcgSW5zdGFuY2VQcm92aWRlcigpLCB0cnVlKTtcbiAgICAgICAgKHRoaXMuZG9tID0gY29udGFpbmVyLmdldChJRE9NKSkucmVnaXN0ZXJFbGVtZW50UmVzb2x2ZXIoY29udGFpbmVyLCB0aGlzLmVsZW1lbnRQcm92aWRlciA9IG5ldyBJbnN0YW5jZVByb3ZpZGVyKCkpO1xuICAgICAgICBjb250YWluZXIucmVnaXN0ZXIoLi4uZGVmaW5pdGlvbi5kZXBlbmRlbmNpZXMpO1xuICAgIH1cbiAgICAvLyAjcmVnaW9uIElTZXJ2aWNlTG9jYXRvciBhcGlcbiAgICBoYXMoa2V5LCBzZWFyY2hBbmNlc3RvcnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGFpbmVyLmhhcyhrZXksIHNlYXJjaEFuY2VzdG9ycyk7XG4gICAgfVxuICAgIGdldChrZXkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGFpbmVyLmdldChrZXkpO1xuICAgIH1cbiAgICBnZXRBbGwoa2V5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRhaW5lci5nZXRBbGwoa2V5KTtcbiAgICB9XG4gICAgLy8gI2VuZHJlZ2lvblxuICAgIC8vICNyZWdpb24gSUNvbnRhaW5lciBhcGlcbiAgICByZWdpc3RlciguLi5wYXJhbXMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGFpbmVyLnJlZ2lzdGVyKC4uLnBhcmFtcyk7XG4gICAgfVxuICAgIHJlZ2lzdGVyUmVzb2x2ZXIoa2V5LCByZXNvbHZlcikge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250YWluZXIucmVnaXN0ZXJSZXNvbHZlcihrZXksIHJlc29sdmVyKTtcbiAgICB9XG4gICAgcmVnaXN0ZXJUcmFuc2Zvcm1lcihrZXksIHRyYW5zZm9ybWVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRhaW5lci5yZWdpc3RlclRyYW5zZm9ybWVyKGtleSwgdHJhbnNmb3JtZXIpO1xuICAgIH1cbiAgICBnZXRSZXNvbHZlcihrZXksIGF1dG9SZWdpc3Rlcikge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250YWluZXIuZ2V0UmVzb2x2ZXIoa2V5LCBhdXRvUmVnaXN0ZXIpO1xuICAgIH1cbiAgICBnZXRGYWN0b3J5KGtleSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250YWluZXIuZ2V0RmFjdG9yeShrZXkpO1xuICAgIH1cbiAgICBjcmVhdGVDaGlsZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGFpbmVyLmNyZWF0ZUNoaWxkKCk7XG4gICAgfVxuICAgIGRpc3Bvc2VSZXNvbHZlcnMoKSB7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLmRpc3Bvc2VSZXNvbHZlcnMoKTtcbiAgICB9XG4gICAgLy8gI2VuZHJlZ2lvblxuICAgIC8vICNyZWdpb24gSVJlbmRlckNvbnRleHQgYXBpXG4gICAgY29tcGlsZSgpIHtcbiAgICAgICAgbGV0IGNvbXBpbGVkRGVmaW5pdGlvbjtcbiAgICAgICAgaWYgKHRoaXMuaXNDb21waWxlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc0NvbXBpbGVkID0gdHJ1ZTtcbiAgICAgICAgY29uc3QgZGVmaW5pdGlvbiA9IHRoaXMuZGVmaW5pdGlvbjtcbiAgICAgICAgaWYgKGRlZmluaXRpb24ubmVlZHNDb21waWxlKSB7XG4gICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmNvbnRhaW5lcjtcbiAgICAgICAgICAgIGNvbnN0IGNvbXBpbGVyID0gY29udGFpbmVyLmdldChJVGVtcGxhdGVDb21waWxlcik7XG4gICAgICAgICAgICBjb21waWxlZERlZmluaXRpb24gPSB0aGlzLmNvbXBpbGVkRGVmaW5pdGlvbiA9IGNvbXBpbGVyLmNvbXBpbGUoZGVmaW5pdGlvbiwgY29udGFpbmVyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbXBpbGVkRGVmaW5pdGlvbiA9IHRoaXMuY29tcGlsZWREZWZpbml0aW9uID0gZGVmaW5pdGlvbjtcbiAgICAgICAgfVxuICAgICAgICAvLyBTdXBwb3J0IFJlY3Vyc2l2ZSBDb21wb25lbnRzIGJ5IGFkZGluZyBzZWxmIHRvIG93biBjb250ZXh0XG4gICAgICAgIGNvbXBpbGVkRGVmaW5pdGlvbi5yZWdpc3Rlcih0aGlzKTtcbiAgICAgICAgaWYgKGZyYWdtZW50Q2FjaGUuaGFzKGNvbXBpbGVkRGVmaW5pdGlvbikpIHtcbiAgICAgICAgICAgIHRoaXMuZnJhZ21lbnQgPSBmcmFnbWVudENhY2hlLmdldChjb21waWxlZERlZmluaXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgdGVtcGxhdGUgPSBjb21waWxlZERlZmluaXRpb24udGVtcGxhdGU7XG4gICAgICAgICAgICBpZiAodGVtcGxhdGUgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBmcmFnbWVudENhY2hlLnNldChjb21waWxlZERlZmluaXRpb24sIG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZnJhZ21lbnRDYWNoZS5zZXQoY29tcGlsZWREZWZpbml0aW9uLCB0aGlzLmZyYWdtZW50ID0gdGhpcy5kb20uY3JlYXRlRG9jdW1lbnRGcmFnbWVudCh0ZW1wbGF0ZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBnZXRWaWV3RmFjdG9yeShuYW1lKSB7XG4gICAgICAgIGxldCBmYWN0b3J5ID0gdGhpcy5mYWN0b3J5O1xuICAgICAgICBpZiAoZmFjdG9yeSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBpZiAobmFtZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgbmFtZSA9IHRoaXMuZGVmaW5pdGlvbi5uYW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbGlmZWN5Y2xlID0gdGhpcy5wYXJlbnRDb250YWluZXIuZ2V0KElMaWZlY3ljbGUpO1xuICAgICAgICAgICAgZmFjdG9yeSA9IHRoaXMuZmFjdG9yeSA9IG5ldyBWaWV3RmFjdG9yeShuYW1lLCB0aGlzLCBsaWZlY3ljbGUsIHRoaXMucGFydHMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWN0b3J5O1xuICAgIH1cbiAgICBiZWdpbkNoaWxkQ29tcG9uZW50T3BlcmF0aW9uKGluc3RhbmNlKSB7XG4gICAgICAgIGNvbnN0IGRlZmluaXRpb24gPSB0aGlzLmRlZmluaXRpb247XG4gICAgICAgIGlmIChkZWZpbml0aW9uLmluamVjdGFibGUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnZpZXdNb2RlbFByb3ZpZGVyID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5yZWdpc3RlclJlc29sdmVyKGRlZmluaXRpb24uaW5qZWN0YWJsZSwgdGhpcy52aWV3TW9kZWxQcm92aWRlciA9IG5ldyBJbnN0YW5jZVByb3ZpZGVyKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy52aWV3TW9kZWxQcm92aWRlci5wcmVwYXJlKGluc3RhbmNlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLy8gI2VuZHJlZ2lvblxuICAgIC8vICNyZWdpb24gSUNvbXBpbGVkUmVuZGVyQ29udGV4dCBhcGlcbiAgICBjcmVhdGVOb2RlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9tLmNyZWF0ZU5vZGVTZXF1ZW5jZSh0aGlzLmZyYWdtZW50KTtcbiAgICB9XG4gICAgLy8gVE9ETzogc3BsaXQgdXAgaW50byAyIG1ldGhvZHM/IGdldENvbXBvbmVudEZhY3RvcnkgKyBnZXRTeW50aGV0aWNGYWN0b3J5IG9yIHNvbWV0aGluZ1xuICAgIGdldENvbXBvbmVudEZhY3RvcnkocGFyZW50Q29udHJvbGxlciwgaG9zdCwgaW5zdHJ1Y3Rpb24sIHZpZXdGYWN0b3J5LCBsb2NhdGlvbikge1xuICAgICAgICBpZiAocGFyZW50Q29udHJvbGxlciAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICB0aGlzLnBhcmVudENvbnRyb2xsZXJQcm92aWRlci5wcmVwYXJlKHBhcmVudENvbnRyb2xsZXIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChob3N0ICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgIC8vIFRPRE86IGZpeCBwcm92aWRlciBpbnB1dCB0eXBlLCBLZXkgaXMgcHJvYmFibHkgbm90IGEgZ29vZCBjb25zdHJhaW50XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRQcm92aWRlci5wcmVwYXJlKGhvc3QpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbnN0cnVjdGlvbiAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICB0aGlzLmluc3RydWN0aW9uUHJvdmlkZXIucHJlcGFyZShpbnN0cnVjdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxvY2F0aW9uICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyTG9jYXRpb25Qcm92aWRlci5wcmVwYXJlKGxvY2F0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodmlld0ZhY3RvcnkgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgdGhpcy5mYWN0b3J5UHJvdmlkZXIucHJlcGFyZSh2aWV3RmFjdG9yeSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8vICNlbmRyZWdpb25cbiAgICAvLyAjcmVnaW9uIElDb21wb25lbnRGYWN0b3J5IGFwaVxuICAgIGNyZWF0ZUNvbXBvbmVudChyZXNvdXJjZUtleSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250YWluZXIuZ2V0KHJlc291cmNlS2V5KTtcbiAgICB9XG4gICAgcmVuZGVyKGZsYWdzLCBjb250cm9sbGVyLCB0YXJnZXRzLCB0ZW1wbGF0ZURlZmluaXRpb24sIGhvc3QsIHBhcnRzKSB7XG4gICAgICAgIHRoaXMucmVuZGVyZXIucmVuZGVyKGZsYWdzLCB0aGlzLCBjb250cm9sbGVyLCB0YXJnZXRzLCB0ZW1wbGF0ZURlZmluaXRpb24sIGhvc3QsIHBhcnRzKTtcbiAgICB9XG4gICAgcmVuZGVySW5zdHJ1Y3Rpb25zKGZsYWdzLCBpbnN0cnVjdGlvbnMsIGNvbnRyb2xsZXIsIHRhcmdldCwgcGFydHMpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5yZW5kZXJJbnN0cnVjdGlvbnMoZmxhZ3MsIHRoaXMsIGluc3RydWN0aW9ucywgY29udHJvbGxlciwgdGFyZ2V0LCBwYXJ0cyk7XG4gICAgfVxuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudFByb3ZpZGVyLmRpc3Bvc2UoKTtcbiAgICAgICAgdGhpcy5jb250YWluZXIuZGlzcG9zZVJlc29sdmVycygpO1xuICAgIH1cbn1cbi8qKiBAaW50ZXJuYWwgKi9cbmV4cG9ydCBjbGFzcyBWaWV3RmFjdG9yeVByb3ZpZGVyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5mYWN0b3J5ID0gbnVsbDtcbiAgICB9XG4gICAgcHJlcGFyZShmYWN0b3J5KSB7XG4gICAgICAgIHRoaXMuZmFjdG9yeSA9IGZhY3Rvcnk7XG4gICAgfVxuICAgIHJlc29sdmUoaGFuZGxlciwgcmVxdWVzdG9yKSB7XG4gICAgICAgIGNvbnN0IGZhY3RvcnkgPSB0aGlzLmZhY3Rvcnk7XG4gICAgICAgIGlmIChmYWN0b3J5ID09PSBudWxsKSB7IC8vIHVubWV0IHByZWNvbmRpdGlvbjogY2FsbCBwcmVwYXJlXG4gICAgICAgICAgICB0aHJvdyBSZXBvcnRlci5lcnJvcig1MCk7IC8vIFRPRE86IG9yZ2FuaXplIGVycm9yIGNvZGVzXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBmYWN0b3J5Lm5hbWUgIT09ICdzdHJpbmcnIHx8IGZhY3RvcnkubmFtZS5sZW5ndGggPT09IDApIHsgLy8gdW5tZXQgaW52YXJpYW50OiBmYWN0b3J5IG11c3QgaGF2ZSBhIG5hbWVcbiAgICAgICAgICAgIHRocm93IFJlcG9ydGVyLmVycm9yKDUxKTsgLy8gVE9ETzogb3JnYW5pemUgZXJyb3IgY29kZXNcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFjdG9yeS5yZXNvbHZlKHJlcXVlc3Rvcik7XG4gICAgfVxuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIHRoaXMuZmFjdG9yeSA9IG51bGw7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVuZGVyLWNvbnRleHQuanMubWFwIiwiaW1wb3J0IHsgREksIFJlZ2lzdHJhdGlvbiwgTWV0YWRhdGEsIFByb3RvY29sIH0gZnJvbSAnQGF1cmVsaWEva2VybmVsJztcbmltcG9ydCB7IFNjb3BlIH0gZnJvbSAnLi4vb2JzZXJ2YXRpb24vYmluZGluZy1jb250ZXh0JztcbmltcG9ydCB7IEN1c3RvbUVsZW1lbnQsIEN1c3RvbUVsZW1lbnREZWZpbml0aW9uIH0gZnJvbSAnLi4vcmVzb3VyY2VzL2N1c3RvbS1lbGVtZW50JztcbmltcG9ydCB7IENvbnRyb2xsZXIgfSBmcm9tICcuL2NvbnRyb2xsZXInO1xuaW1wb3J0IHsgbWVyZ2VQYXJ0cyB9IGZyb20gJy4uL2RlZmluaXRpb25zJztcbmltcG9ydCB7IGdldFJlbmRlckNvbnRleHQgfSBmcm9tICcuL3JlbmRlci1jb250ZXh0JztcbmV4cG9ydCBjbGFzcyBWaWV3RmFjdG9yeSB7XG4gICAgY29uc3RydWN0b3IobmFtZSwgY29udGV4dCwgbGlmZWN5Y2xlLCBwYXJ0cykge1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICB0aGlzLmxpZmVjeWNsZSA9IGxpZmVjeWNsZTtcbiAgICAgICAgdGhpcy5wYXJ0cyA9IHBhcnRzO1xuICAgICAgICB0aGlzLmlzQ2FjaGluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmNhY2hlID0gbnVsbDtcbiAgICAgICAgdGhpcy5jYWNoZVNpemUgPSAtMTtcbiAgICB9XG4gICAgc2V0Q2FjaGVTaXplKHNpemUsIGRvTm90T3ZlcnJpZGVJZkFscmVhZHlTZXQpIHtcbiAgICAgICAgaWYgKHNpemUpIHtcbiAgICAgICAgICAgIGlmIChzaXplID09PSAnKicpIHtcbiAgICAgICAgICAgICAgICBzaXplID0gVmlld0ZhY3RvcnkubWF4Q2FjaGVTaXplO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHNpemUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgc2l6ZSA9IHBhcnNlSW50KHNpemUsIDEwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmNhY2hlU2l6ZSA9PT0gLTEgfHwgIWRvTm90T3ZlcnJpZGVJZkFscmVhZHlTZXQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNhY2hlU2l6ZSA9IHNpemU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY2FjaGVTaXplID4gMCkge1xuICAgICAgICAgICAgdGhpcy5jYWNoZSA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jYWNoZSA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc0NhY2hpbmcgPSB0aGlzLmNhY2hlU2l6ZSA+IDA7XG4gICAgfVxuICAgIGNhblJldHVyblRvQ2FjaGUoY29udHJvbGxlcikge1xuICAgICAgICByZXR1cm4gdGhpcy5jYWNoZSAhPSBudWxsICYmIHRoaXMuY2FjaGUubGVuZ3RoIDwgdGhpcy5jYWNoZVNpemU7XG4gICAgfVxuICAgIHRyeVJldHVyblRvQ2FjaGUoY29udHJvbGxlcikge1xuICAgICAgICBpZiAodGhpcy5jYW5SZXR1cm5Ub0NhY2hlKGNvbnRyb2xsZXIpKSB7XG4gICAgICAgICAgICBjb250cm9sbGVyLmNhY2hlKDAgLyogbm9uZSAqLyk7XG4gICAgICAgICAgICB0aGlzLmNhY2hlLnB1c2goY29udHJvbGxlcik7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNyZWF0ZShmbGFncykge1xuICAgICAgICBjb25zdCBjYWNoZSA9IHRoaXMuY2FjaGU7XG4gICAgICAgIGxldCBjb250cm9sbGVyO1xuICAgICAgICBpZiAoY2FjaGUgIT0gbnVsbCAmJiBjYWNoZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb250cm9sbGVyID0gY2FjaGUucG9wKCk7XG4gICAgICAgICAgICByZXR1cm4gY29udHJvbGxlcjtcbiAgICAgICAgfVxuICAgICAgICBjb250cm9sbGVyID0gQ29udHJvbGxlci5mb3JTeW50aGV0aWNWaWV3KHRoaXMsIHRoaXMubGlmZWN5Y2xlLCB0aGlzLmNvbnRleHQsIGZsYWdzKTtcbiAgICAgICAgcmV0dXJuIGNvbnRyb2xsZXI7XG4gICAgfVxuICAgIHJlc29sdmUocmVxdWVzdG9yLCBwYXJ0cykge1xuICAgICAgICBwYXJ0cyA9IG1lcmdlUGFydHModGhpcy5wYXJ0cywgcGFydHMpO1xuICAgICAgICBpZiAocGFydHMgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFydCA9IHBhcnRzW3RoaXMubmFtZV07XG4gICAgICAgIGlmIChwYXJ0ID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBnZXRSZW5kZXJDb250ZXh0KHBhcnQsIHJlcXVlc3RvciwgcGFydHMpLmdldFZpZXdGYWN0b3J5KHRoaXMubmFtZSk7XG4gICAgfVxufVxuVmlld0ZhY3RvcnkubWF4Q2FjaGVTaXplID0gMHhGRkZGO1xuY29uc3Qgc2VlblZpZXdzID0gbmV3IFdlYWtTZXQoKTtcbmZ1bmN0aW9uIG5vdFlldFNlZW4oJHZpZXcpIHtcbiAgICByZXR1cm4gIXNlZW5WaWV3cy5oYXMoJHZpZXcpO1xufVxuZnVuY3Rpb24gdG9DdXN0b21FbGVtZW50RGVmaW5pdGlvbigkdmlldykge1xuICAgIHNlZW5WaWV3cy5hZGQoJHZpZXcpO1xuICAgIHJldHVybiBDdXN0b21FbGVtZW50RGVmaW5pdGlvbi5jcmVhdGUoJHZpZXcpO1xufVxuZXhwb3J0IGNvbnN0IFZpZXdzID0ge1xuICAgIG5hbWU6IFByb3RvY29sLnJlc291cmNlLmtleUZvcigndmlld3MnKSxcbiAgICBoYXModmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJyAmJiAoTWV0YWRhdGEuaGFzT3duKFZpZXdzLm5hbWUsIHZhbHVlKSB8fCAnJHZpZXdzJyBpbiB2YWx1ZSk7XG4gICAgfSxcbiAgICBnZXQodmFsdWUpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJyAmJiAnJHZpZXdzJyBpbiB2YWx1ZSkge1xuICAgICAgICAgICAgLy8gVE9ETzogYSBgZ2V0YCBvcGVyYXRpb24gd2l0aCBzaWRlIGVmZmVjdHMgaXMgbm90IGEgZ29vZCB0aGluZy4gU2hvdWxkIHJlZmFjdG9yIHRoaXMgdG8gYSBwcm9wZXIgcmVzb3VyY2Uga2luZC5cbiAgICAgICAgICAgIGNvbnN0ICR2aWV3cyA9IHZhbHVlLiR2aWV3cztcbiAgICAgICAgICAgIGNvbnN0IGRlZmluaXRpb25zID0gJHZpZXdzLmZpbHRlcihub3RZZXRTZWVuKS5tYXAodG9DdXN0b21FbGVtZW50RGVmaW5pdGlvbik7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGRlZiBvZiBkZWZpbml0aW9ucykge1xuICAgICAgICAgICAgICAgIFZpZXdzLmFkZCh2YWx1ZSwgZGVmKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsZXQgdmlld3MgPSBNZXRhZGF0YS5nZXRPd24oVmlld3MubmFtZSwgdmFsdWUpO1xuICAgICAgICBpZiAodmlld3MgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgTWV0YWRhdGEuZGVmaW5lKFZpZXdzLm5hbWUsIHZpZXdzID0gW10sIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmlld3M7XG4gICAgfSxcbiAgICBhZGQoVHlwZSwgcGFydGlhbERlZmluaXRpb24pIHtcbiAgICAgICAgY29uc3QgZGVmaW5pdGlvbiA9IEN1c3RvbUVsZW1lbnREZWZpbml0aW9uLmNyZWF0ZShwYXJ0aWFsRGVmaW5pdGlvbik7XG4gICAgICAgIGxldCB2aWV3cyA9IE1ldGFkYXRhLmdldE93bihWaWV3cy5uYW1lLCBUeXBlKTtcbiAgICAgICAgaWYgKHZpZXdzID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIE1ldGFkYXRhLmRlZmluZShWaWV3cy5uYW1lLCB2aWV3cyA9IFtkZWZpbml0aW9uXSwgVHlwZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2aWV3cy5wdXNoKGRlZmluaXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2aWV3cztcbiAgICB9LFxufTtcbmV4cG9ydCBmdW5jdGlvbiB2aWV3KHYpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICBWaWV3cy5hZGQodGFyZ2V0LCB2KTtcbiAgICB9O1xufVxuZXhwb3J0IGNvbnN0IElWaWV3TG9jYXRvciA9IERJLmNyZWF0ZUludGVyZmFjZSgnSVZpZXdMb2NhdG9yJylcbiAgICAubm9EZWZhdWx0KCk7XG5leHBvcnQgY2xhc3MgVmlld0xvY2F0b3Ige1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLm1vZGVsSW5zdGFuY2VUb0JvdW5kQ29tcG9uZW50ID0gbmV3IFdlYWtNYXAoKTtcbiAgICAgICAgdGhpcy5tb2RlbFR5cGVUb1VuYm91bmRDb21wb25lbnQgPSBuZXcgTWFwKCk7XG4gICAgfVxuICAgIHN0YXRpYyByZWdpc3Rlcihjb250YWluZXIpIHtcbiAgICAgICAgcmV0dXJuIFJlZ2lzdHJhdGlvbi5zaW5nbGV0b24oSVZpZXdMb2NhdG9yLCB0aGlzKS5yZWdpc3Rlcihjb250YWluZXIpO1xuICAgIH1cbiAgICBnZXRWaWV3Q29tcG9uZW50Rm9yT2JqZWN0KG9iamVjdCwgdmlld05hbWVPclNlbGVjdG9yKSB7XG4gICAgICAgIGlmIChvYmplY3QpIHtcbiAgICAgICAgICAgIGNvbnN0IGF2YWlsYWJsZVZpZXdzID0gVmlld3MuaGFzKG9iamVjdC5jb25zdHJ1Y3RvcikgPyBWaWV3cy5nZXQob2JqZWN0LmNvbnN0cnVjdG9yKSA6IFtdO1xuICAgICAgICAgICAgY29uc3QgcmVzb2x2ZWRWaWV3TmFtZSA9IHR5cGVvZiB2aWV3TmFtZU9yU2VsZWN0b3IgPT09ICdmdW5jdGlvbidcbiAgICAgICAgICAgICAgICA/IHZpZXdOYW1lT3JTZWxlY3RvcihvYmplY3QsIGF2YWlsYWJsZVZpZXdzKVxuICAgICAgICAgICAgICAgIDogdGhpcy5nZXRWaWV3TmFtZShhdmFpbGFibGVWaWV3cywgdmlld05hbWVPclNlbGVjdG9yKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldE9yQ3JlYXRlQm91bmRDb21wb25lbnQob2JqZWN0LCBhdmFpbGFibGVWaWV3cywgcmVzb2x2ZWRWaWV3TmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGdldE9yQ3JlYXRlQm91bmRDb21wb25lbnQob2JqZWN0LCBhdmFpbGFibGVWaWV3cywgcmVzb2x2ZWRWaWV3TmFtZSkge1xuICAgICAgICBsZXQgbG9va3VwID0gdGhpcy5tb2RlbEluc3RhbmNlVG9Cb3VuZENvbXBvbmVudC5nZXQob2JqZWN0KTtcbiAgICAgICAgbGV0IEJvdW5kQ29tcG9uZW50O1xuICAgICAgICBpZiAobG9va3VwID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIGxvb2t1cCA9IHt9O1xuICAgICAgICAgICAgdGhpcy5tb2RlbEluc3RhbmNlVG9Cb3VuZENvbXBvbmVudC5zZXQob2JqZWN0LCBsb29rdXApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgQm91bmRDb21wb25lbnQgPSBsb29rdXBbcmVzb2x2ZWRWaWV3TmFtZV07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKEJvdW5kQ29tcG9uZW50ID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIGNvbnN0IFVuYm91bmRDb21wb25lbnQgPSB0aGlzLmdldE9yQ3JlYXRlVW5ib3VuZENvbXBvbmVudChvYmplY3QsIGF2YWlsYWJsZVZpZXdzLCByZXNvbHZlZFZpZXdOYW1lKTtcbiAgICAgICAgICAgIEJvdW5kQ29tcG9uZW50ID0gQ3VzdG9tRWxlbWVudC5kZWZpbmUoQ3VzdG9tRWxlbWVudC5nZXREZWZpbml0aW9uKFVuYm91bmRDb21wb25lbnQpLCBjbGFzcyBleHRlbmRzIFVuYm91bmRDb21wb25lbnQge1xuICAgICAgICAgICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgICAgICAgICBzdXBlcihvYmplY3QpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbG9va3VwW3Jlc29sdmVkVmlld05hbWVdID0gQm91bmRDb21wb25lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEJvdW5kQ29tcG9uZW50O1xuICAgIH1cbiAgICBnZXRPckNyZWF0ZVVuYm91bmRDb21wb25lbnQob2JqZWN0LCBhdmFpbGFibGVWaWV3cywgcmVzb2x2ZWRWaWV3TmFtZSkge1xuICAgICAgICBsZXQgbG9va3VwID0gdGhpcy5tb2RlbFR5cGVUb1VuYm91bmRDb21wb25lbnQuZ2V0KG9iamVjdC5jb25zdHJ1Y3Rvcik7XG4gICAgICAgIGxldCBVbmJvdW5kQ29tcG9uZW50O1xuICAgICAgICBpZiAobG9va3VwID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIGxvb2t1cCA9IHt9O1xuICAgICAgICAgICAgdGhpcy5tb2RlbFR5cGVUb1VuYm91bmRDb21wb25lbnQuc2V0KG9iamVjdC5jb25zdHJ1Y3RvciwgbG9va3VwKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIFVuYm91bmRDb21wb25lbnQgPSBsb29rdXBbcmVzb2x2ZWRWaWV3TmFtZV07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFVuYm91bmRDb21wb25lbnQgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgVW5ib3VuZENvbXBvbmVudCA9IEN1c3RvbUVsZW1lbnQuZGVmaW5lKHRoaXMuZ2V0VmlldyhhdmFpbGFibGVWaWV3cywgcmVzb2x2ZWRWaWV3TmFtZSksIGNsYXNzIHtcbiAgICAgICAgICAgICAgICBjb25zdHJ1Y3Rvcih2aWV3TW9kZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52aWV3TW9kZWwgPSB2aWV3TW9kZWw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNyZWF0ZShjb250cm9sbGVyLCBwYXJlbnRDb250YWluZXIsIGRlZmluaXRpb24sIHBhcnRzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZtID0gdGhpcy52aWV3TW9kZWw7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuc2NvcGUgPSBTY29wZS5mcm9tUGFyZW50KGNvbnRyb2xsZXIuZmxhZ3MsIGNvbnRyb2xsZXIuc2NvcGUsIHZtKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZtLmNyZWF0ZSAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdm0uY3JlYXRlKGNvbnRyb2xsZXIsIHBhcmVudENvbnRhaW5lciwgZGVmaW5pdGlvbiwgcGFydHMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBwcm90byA9IFVuYm91bmRDb21wb25lbnQucHJvdG90eXBlO1xuICAgICAgICAgICAgaWYgKCdiZWZvcmVDb21waWxlJyBpbiBvYmplY3QpIHtcbiAgICAgICAgICAgICAgICBwcm90by5iZWZvcmVDb21waWxlID0gZnVuY3Rpb24gYmVmb3JlQ29tcGlsZShjb250cm9sbGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmlld01vZGVsLmJlZm9yZUNvbXBpbGUoY29udHJvbGxlcik7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgnYWZ0ZXJDb21waWxlJyBpbiBvYmplY3QpIHtcbiAgICAgICAgICAgICAgICBwcm90by5hZnRlckNvbXBpbGUgPSBmdW5jdGlvbiBhZnRlckNvbXBpbGUoY29udHJvbGxlcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnZpZXdNb2RlbC5hZnRlckNvbXBpbGUoY29udHJvbGxlcik7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgnYWZ0ZXJDb21waWxlQ2hpbGRyZW4nIGluIG9iamVjdCkge1xuICAgICAgICAgICAgICAgIHByb3RvLmFmdGVyQ29tcGlsZUNoaWxkcmVuID0gZnVuY3Rpb24gYWZ0ZXJDb21waWxlQ2hpbGRyZW4oY29udHJvbGxlcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnZpZXdNb2RlbC5hZnRlckNvbXBpbGVDaGlsZHJlbihjb250cm9sbGVyKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCdiZWZvcmVCaW5kJyBpbiBvYmplY3QpIHtcbiAgICAgICAgICAgICAgICBwcm90by5iZWZvcmVCaW5kID0gZnVuY3Rpb24gYmVmb3JlQmluZChmbGFncykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy52aWV3TW9kZWwuYmVmb3JlQmluZChmbGFncyk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgnYWZ0ZXJCaW5kJyBpbiBvYmplY3QpIHtcbiAgICAgICAgICAgICAgICBwcm90by5hZnRlckJpbmQgPSBmdW5jdGlvbiBhZnRlckJpbmQoZmxhZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52aWV3TW9kZWwuYWZ0ZXJCaW5kKGZsYWdzKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCdiZWZvcmVVbmJpbmQnIGluIG9iamVjdCkge1xuICAgICAgICAgICAgICAgIHByb3RvLmJlZm9yZVVuYmluZCA9IGZ1bmN0aW9uIGJlZm9yZVVuYmluZChmbGFncykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy52aWV3TW9kZWwuYmVmb3JlVW5iaW5kKGZsYWdzKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCdhZnRlclVuYmluZCcgaW4gb2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgcHJvdG8uYWZ0ZXJVbmJpbmQgPSBmdW5jdGlvbiBhZnRlclVuYmluZChmbGFncykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnZpZXdNb2RlbC5hZnRlclVuYmluZChmbGFncyk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgnYmVmb3JlQXR0YWNoJyBpbiBvYmplY3QpIHtcbiAgICAgICAgICAgICAgICBwcm90by5iZWZvcmVBdHRhY2ggPSBmdW5jdGlvbiBiZWZvcmVBdHRhY2goZmxhZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52aWV3TW9kZWwuYmVmb3JlQXR0YWNoKGZsYWdzKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCdhZnRlckF0dGFjaCcgaW4gb2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgcHJvdG8uYWZ0ZXJBdHRhY2ggPSBmdW5jdGlvbiBhZnRlckF0dGFjaChmbGFncykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnZpZXdNb2RlbC5hZnRlckF0dGFjaChmbGFncyk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgnYmVmb3JlRGV0YWNoJyBpbiBvYmplY3QpIHtcbiAgICAgICAgICAgICAgICBwcm90by5iZWZvcmVEZXRhY2ggPSBmdW5jdGlvbiBiZWZvcmVEZXRhY2goZmxhZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52aWV3TW9kZWwuYmVmb3JlRGV0YWNoKGZsYWdzKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCdhZnRlckRldGFjaCcgaW4gb2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgcHJvdG8uYWZ0ZXJEZXRhY2ggPSBmdW5jdGlvbiBhZnRlckRldGFjaChmbGFncykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnZpZXdNb2RlbC5hZnRlckRldGFjaChmbGFncyk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgnY2FjaGluZycgaW4gb2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgcHJvdG8uY2FjaGluZyA9IGZ1bmN0aW9uIGNhY2hpbmcoZmxhZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52aWV3TW9kZWwuY2FjaGluZyhmbGFncyk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxvb2t1cFtyZXNvbHZlZFZpZXdOYW1lXSA9IFVuYm91bmRDb21wb25lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFVuYm91bmRDb21wb25lbnQ7XG4gICAgfVxuICAgIGdldFZpZXdOYW1lKHZpZXdzLCByZXF1ZXN0ZWROYW1lKSB7XG4gICAgICAgIGlmIChyZXF1ZXN0ZWROYW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVxdWVzdGVkTmFtZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodmlld3MubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICByZXR1cm4gdmlld3NbMF0ubmFtZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJ2RlZmF1bHQtdmlldyc7XG4gICAgfVxuICAgIGdldFZpZXcodmlld3MsIG5hbWUpIHtcbiAgICAgICAgY29uc3QgdiA9IHZpZXdzLmZpbmQoeCA9PiB4Lm5hbWUgPT09IG5hbWUpO1xuICAgICAgICBpZiAodiA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAvLyBUT0RPOiBVc2UgUmVwb3J0ZXJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ291bGQgbm90IGZpbmQgdmlldzogJHtuYW1lfWApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2O1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXZpZXcuanMubWFwIiwiaW1wb3J0IHsgU2NoZWR1bGVyLCBOb3csIH0gZnJvbSAnQGF1cmVsaWEvc2NoZWR1bGVyJztcbmltcG9ydCB7IGlzTmF0aXZlRnVuY3Rpb24sIFBMQVRGT1JNLCB9IGZyb20gJ0BhdXJlbGlhL2tlcm5lbCc7XG5mdW5jdGlvbiBjcmVhdGVNaWNyb1Rhc2tGbHVzaFJlcXVlc3RvckZhY3RvcnkoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY3JlYXRlKHRhc2tRdWV1ZSkge1xuICAgICAgICAgICAgbGV0IHJlcXVlc3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgbGV0IGNhbmNlbGVkID0gZmFsc2U7XG4gICAgICAgICAgICBjb25zdCBwID0gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgICAgICBmdW5jdGlvbiBmbHVzaCgpIHtcbiAgICAgICAgICAgICAgICBpZiAoY2FuY2VsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FuY2VsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0YXNrUXVldWUuZmx1c2goKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHJlcXVlc3QoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcmVxdWVzdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYW5jZWxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIHAudGhlbihmbHVzaCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGNhbmNlbCgpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FuY2VsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICB9O1xufVxuZnVuY3Rpb24gY3JlYXRlU2V0VGltZW91dEZsdXNoUmVxdWVzdG9yRmFjdG9yeSh3KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY3JlYXRlKHRhc2tRdWV1ZSkge1xuICAgICAgICAgICAgbGV0IGhhbmRsZSA9IC0xO1xuICAgICAgICAgICAgZnVuY3Rpb24gZmx1c2goKSB7XG4gICAgICAgICAgICAgICAgaWYgKGhhbmRsZSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZSA9IC0xO1xuICAgICAgICAgICAgICAgICAgICB0YXNrUXVldWUuZmx1c2goKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGNhbmNlbCgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhhbmRsZSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3LmNsZWFyVGltZW91dChoYW5kbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlID0gLTE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlcXVlc3QoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChoYW5kbGUgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGUgPSB3LnNldFRpbWVvdXQoZmx1c2gsIDApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgfTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVJlcXVlc3RBbmltYXRpb25GcmFtZUZsdXNoUmVxdWVzdG9yKHcpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBjcmVhdGUodGFza1F1ZXVlKSB7XG4gICAgICAgICAgICBsZXQgaGFuZGxlID0gLTE7XG4gICAgICAgICAgICBmdW5jdGlvbiBmbHVzaCgpIHtcbiAgICAgICAgICAgICAgICBpZiAoaGFuZGxlID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlID0gLTE7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tRdWV1ZS5mbHVzaCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgY2FuY2VsKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaGFuZGxlID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHcuY2FuY2VsQW5pbWF0aW9uRnJhbWUoaGFuZGxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZSA9IC0xO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZXF1ZXN0KCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaGFuZGxlID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlID0gdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZmx1c2gpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgfTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVBvc3RSZXF1ZXN0QW5pbWF0aW9uRnJhbWVGbHVzaFJlcXVlc3Rvcih3KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY3JlYXRlKHRhc2tRdWV1ZSkge1xuICAgICAgICAgICAgbGV0IHJhZkhhbmRsZSA9IC0xO1xuICAgICAgICAgICAgbGV0IHRpbWVvdXRIYW5kbGUgPSAtMTtcbiAgICAgICAgICAgIGZ1bmN0aW9uIGZsdXNoKCkge1xuICAgICAgICAgICAgICAgIGlmICh0aW1lb3V0SGFuZGxlID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGltZW91dEhhbmRsZSA9IC0xO1xuICAgICAgICAgICAgICAgICAgICB0YXNrUXVldWUuZmx1c2goKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmdW5jdGlvbiBxdWV1ZUZsdXNoKCkge1xuICAgICAgICAgICAgICAgIGlmIChyYWZIYW5kbGUgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICByYWZIYW5kbGUgPSAtMTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRpbWVvdXRIYW5kbGUgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lb3V0SGFuZGxlID0gdy5zZXRUaW1lb3V0KGZsdXNoLCAwKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgY2FuY2VsKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmFmSGFuZGxlID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHcuY2FuY2VsQW5pbWF0aW9uRnJhbWUocmFmSGFuZGxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhZkhhbmRsZSA9IC0xO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aW1lb3V0SGFuZGxlID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHcuY2xlYXJUaW1lb3V0KHRpbWVvdXRIYW5kbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGltZW91dEhhbmRsZSA9IC0xO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICByZXF1ZXN0KCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmFmSGFuZGxlID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmFmSGFuZGxlID0gdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUocXVldWVGbHVzaCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICB9O1xufVxuZnVuY3Rpb24gY3JlYXRlUmVxdWVzdElkbGVDYWxsYmFja0ZsdXNoUmVxdWVzdG9yKHcpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBjcmVhdGUodGFza1F1ZXVlKSB7XG4gICAgICAgICAgICBsZXQgaGFuZGxlID0gLTE7XG4gICAgICAgICAgICBmdW5jdGlvbiBmbHVzaCgpIHtcbiAgICAgICAgICAgICAgICBpZiAoaGFuZGxlID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlID0gLTE7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tRdWV1ZS5mbHVzaCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2Ygdy5yZXF1ZXN0SWRsZUNhbGxiYWNrID09PSAnZnVuY3Rpb24nICYmXG4gICAgICAgICAgICAgICAgaXNOYXRpdmVGdW5jdGlvbih3LnJlcXVlc3RJZGxlQ2FsbGJhY2spKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgY2FuY2VsKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhhbmRsZSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bm5lY2Vzc2FyeS10eXBlLWFzc2VydGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHcuY2FuY2VsSWRsZUNhbGxiYWNrKGhhbmRsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlID0gLTE7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3QoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGFuZGxlID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5uZWNlc3NhcnktdHlwZS1hc3NlcnRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGUgPSB3LnJlcXVlc3RJZGxlQ2FsbGJhY2soZmx1c2gpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBjYW5jZWwoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGFuZGxlID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3LmNsZWFyVGltZW91dChoYW5kbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZSA9IC0xO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0KCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhhbmRsZSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbnN0ZWFkIG9mIHRyeWluZyBhbnl0aGluZyBmYW5jeSB3aXRoIGV2ZW50IGhhbmRsZXIgZGVib3VuY2VycyAod2UgY291bGQgZG8gdGhhdCBpZiB0aGVyZSB3YXMgYSByZXF1ZXN0IGZvciBpdCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2UganVzdCB3YWl0IDQ1bXMgd2hpY2ggaXMgYXBwcm94aW1hdGVseSB0aGUgaW50ZXJ2YWwgaW4gYSBuYXRpdmUgaWRsZUNhbGxiYWNrIGxvb3AgaW4gY2hyb21lLCB0byBhdCBsZWFzdCBtYWtlIGl0IGxvb2tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgc2FtZSBmcm9tIGEgdGltaW5nIHBlcnNwZWN0aXZlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlID0gdy5zZXRUaW1lb3V0KGZsdXNoLCA0NSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZURPTVNjaGVkdWxlcihjb250YWluZXIsIHcpIHtcbiAgICBsZXQgc2NoZWR1bGVyID0gU2NoZWR1bGVyLmdldChQTEFURk9STS5nbG9iYWwpO1xuICAgIGlmIChzY2hlZHVsZXIgPT09IHZvaWQgMCkge1xuICAgICAgICBTY2hlZHVsZXIuc2V0KFBMQVRGT1JNLmdsb2JhbCwgc2NoZWR1bGVyID0gbmV3IFNjaGVkdWxlcihjb250YWluZXIuZ2V0KE5vdyksIGNyZWF0ZU1pY3JvVGFza0ZsdXNoUmVxdWVzdG9yRmFjdG9yeSgpLCBjcmVhdGVSZXF1ZXN0QW5pbWF0aW9uRnJhbWVGbHVzaFJlcXVlc3Rvcih3KSwgY3JlYXRlU2V0VGltZW91dEZsdXNoUmVxdWVzdG9yRmFjdG9yeSh3KSwgY3JlYXRlUG9zdFJlcXVlc3RBbmltYXRpb25GcmFtZUZsdXNoUmVxdWVzdG9yKHcpLCBjcmVhdGVSZXF1ZXN0SWRsZUNhbGxiYWNrRmx1c2hSZXF1ZXN0b3IodykpKTtcbiAgICB9XG4gICAgcmV0dXJuIHNjaGVkdWxlcjtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCIsImV4cG9ydCB7IE5vdywgfSBmcm9tICcuL25vdyc7XG5leHBvcnQgeyBJU2NoZWR1bGVyLCBTY2hlZHVsZXIsIH0gZnJvbSAnLi9zY2hlZHVsZXInO1xuZXhwb3J0IHsgVGFza1F1ZXVlLCB9IGZyb20gJy4vdGFzay1xdWV1ZSc7XG5leHBvcnQgeyBUYXNrLCBUYXNrQWJvcnRFcnJvciwgfSBmcm9tICcuL3Rhc2snO1xuZXhwb3J0IHsgY3JlYXRlRXhwb3NlZFByb21pc2UsIFRhc2tRdWV1ZVByaW9yaXR5LCB9IGZyb20gJy4vdHlwZXMnO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIiwiaW1wb3J0IHsgREksIFBMQVRGT1JNIH0gZnJvbSAnQGF1cmVsaWEva2VybmVsJztcbmNvbnN0IGRlZmF1bHROb3cgPSBQTEFURk9STS5ub3cuYmluZChQTEFURk9STSk7XG5leHBvcnQgY29uc3QgTm93ID0gREkuY3JlYXRlSW50ZXJmYWNlKCdOb3cnKS53aXRoRGVmYXVsdCh4ID0+IHguaW5zdGFuY2UoZGVmYXVsdE5vdykpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bm93LmpzLm1hcCIsImltcG9ydCB7IERJIH0gZnJvbSAnQGF1cmVsaWEva2VybmVsJztcbmltcG9ydCB7IGRlZmF1bHRRdWV1ZVRhc2tPcHRpb25zLCB9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHsgVGFza1F1ZXVlLCB9IGZyb20gJy4vdGFzay1xdWV1ZSc7XG5jb25zdCBzdG9yZSA9IG5ldyBXZWFrTWFwKCk7XG5leHBvcnQgY29uc3QgSVNjaGVkdWxlciA9IERJLmNyZWF0ZUludGVyZmFjZSgnSVNjaGVkdWxlcicpLm5vRGVmYXVsdCgpO1xuZXhwb3J0IGNsYXNzIFNjaGVkdWxlciB7XG4gICAgY29uc3RydWN0b3Iobm93LCBtaWNyb3Rhc2tGYWN0b3J5LCByZW5kZXJGYWN0b3J5LCBtYWNyb1Rhc2tGYWN0b3J5LCBwb3N0UmVuZGVyRmFjdG9yeSwgaWRsZUZhY3RvcnkpIHtcbiAgICAgICAgdGhpcy50YXNrUXVldWVzID0gW1xuICAgICAgICAgICAgdGhpcy5taWNyb3Rhc2sgPSAobmV3IFRhc2tRdWV1ZShub3csIDAgLyogbWljcm9UYXNrICovLCB0aGlzLCBtaWNyb3Rhc2tGYWN0b3J5KSksXG4gICAgICAgICAgICB0aGlzLnJlbmRlciA9IChuZXcgVGFza1F1ZXVlKG5vdywgMSAvKiByZW5kZXIgKi8sIHRoaXMsIHJlbmRlckZhY3RvcnkpKSxcbiAgICAgICAgICAgIHRoaXMubWFjcm9UYXNrID0gKG5ldyBUYXNrUXVldWUobm93LCAyIC8qIG1hY3JvVGFzayAqLywgdGhpcywgbWFjcm9UYXNrRmFjdG9yeSkpLFxuICAgICAgICAgICAgdGhpcy5wb3N0UmVuZGVyID0gKG5ldyBUYXNrUXVldWUobm93LCAzIC8qIHBvc3RSZW5kZXIgKi8sIHRoaXMsIHBvc3RSZW5kZXJGYWN0b3J5KSksXG4gICAgICAgICAgICB0aGlzLmlkbGUgPSAobmV3IFRhc2tRdWV1ZShub3csIDQgLyogaWRsZSAqLywgdGhpcywgaWRsZUZhY3RvcnkpKSxcbiAgICAgICAgXTtcbiAgICAgICAgdGhpcy55aWVsZE1pY3JvVGFzayA9IHRoaXMueWllbGRNaWNyb1Rhc2suYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy55aWVsZFJlbmRlclRhc2sgPSB0aGlzLnlpZWxkUmVuZGVyVGFzay5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnlpZWxkTWFjcm9UYXNrID0gdGhpcy55aWVsZE1hY3JvVGFzay5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnlpZWxkUG9zdFJlbmRlclRhc2sgPSB0aGlzLnlpZWxkUG9zdFJlbmRlclRhc2suYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy55aWVsZElkbGVUYXNrID0gdGhpcy55aWVsZElkbGVUYXNrLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMueWllbGRBbGwgPSB0aGlzLnlpZWxkQWxsLmJpbmQodGhpcyk7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQoa2V5KSB7XG4gICAgICAgIHJldHVybiBzdG9yZS5nZXQoa2V5KTtcbiAgICB9XG4gICAgc3RhdGljIHNldChrZXksIGluc3RhbmNlKSB7XG4gICAgICAgIHN0b3JlLnNldChrZXksIGluc3RhbmNlKTtcbiAgICB9XG4gICAgZ2V0VGFza1F1ZXVlKHByaW9yaXR5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRhc2tRdWV1ZXNbcHJpb3JpdHldO1xuICAgIH1cbiAgICB5aWVsZChwcmlvcml0eSkge1xuICAgICAgICByZXR1cm4gdGhpcy50YXNrUXVldWVzW3ByaW9yaXR5XS55aWVsZCgpO1xuICAgIH1cbiAgICBxdWV1ZVRhc2soY2FsbGJhY2ssIG9wdHMpIHtcbiAgICAgICAgY29uc3QgeyBkZWxheSwgcHJlZW1wdCwgcHJpb3JpdHksIHBlcnNpc3RlbnQsIHJldXNhYmxlIH0gPSB7IC4uLmRlZmF1bHRRdWV1ZVRhc2tPcHRpb25zLCAuLi5vcHRzIH07XG4gICAgICAgIHJldHVybiB0aGlzLnRhc2tRdWV1ZXNbcHJpb3JpdHldLnF1ZXVlVGFzayhjYWxsYmFjaywgeyBkZWxheSwgcHJlZW1wdCwgcGVyc2lzdGVudCwgcmV1c2FibGUgfSk7XG4gICAgfVxuICAgIGdldE1pY3JvVGFza1F1ZXVlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5taWNyb3Rhc2s7XG4gICAgfVxuICAgIGdldFJlbmRlclRhc2tRdWV1ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyO1xuICAgIH1cbiAgICBnZXRNYWNyb1Rhc2tRdWV1ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWFjcm9UYXNrO1xuICAgIH1cbiAgICBnZXRQb3N0UmVuZGVyVGFza1F1ZXVlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wb3N0UmVuZGVyO1xuICAgIH1cbiAgICBnZXRJZGxlVGFza1F1ZXVlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pZGxlO1xuICAgIH1cbiAgICB5aWVsZE1pY3JvVGFzaygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWljcm90YXNrLnlpZWxkKCk7XG4gICAgfVxuICAgIHlpZWxkUmVuZGVyVGFzaygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyLnlpZWxkKCk7XG4gICAgfVxuICAgIHlpZWxkTWFjcm9UYXNrKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYWNyb1Rhc2sueWllbGQoKTtcbiAgICB9XG4gICAgeWllbGRQb3N0UmVuZGVyVGFzaygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucG9zdFJlbmRlci55aWVsZCgpO1xuICAgIH1cbiAgICB5aWVsZElkbGVUYXNrKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pZGxlLnlpZWxkKCk7XG4gICAgfVxuICAgIGFzeW5jIHlpZWxkQWxsKHJlcGVhdCA9IDEpIHtcbiAgICAgICAgd2hpbGUgKHJlcGVhdC0tID4gMCkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy55aWVsZElkbGVUYXNrKCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnlpZWxkUG9zdFJlbmRlclRhc2soKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMueWllbGRNYWNyb1Rhc2soKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMueWllbGRSZW5kZXJUYXNrKCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnlpZWxkTWljcm9UYXNrKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcXVldWVNaWNyb1Rhc2soY2FsbGJhY2ssIG9wdHMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWljcm90YXNrLnF1ZXVlVGFzayhjYWxsYmFjaywgb3B0cyk7XG4gICAgfVxuICAgIHF1ZXVlUmVuZGVyVGFzayhjYWxsYmFjaywgb3B0cykge1xuICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXIucXVldWVUYXNrKGNhbGxiYWNrLCBvcHRzKTtcbiAgICB9XG4gICAgcXVldWVNYWNyb1Rhc2soY2FsbGJhY2ssIG9wdHMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWFjcm9UYXNrLnF1ZXVlVGFzayhjYWxsYmFjaywgb3B0cyk7XG4gICAgfVxuICAgIHF1ZXVlUG9zdFJlbmRlclRhc2soY2FsbGJhY2ssIG9wdHMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucG9zdFJlbmRlci5xdWV1ZVRhc2soY2FsbGJhY2ssIG9wdHMpO1xuICAgIH1cbiAgICBxdWV1ZUlkbGVUYXNrKGNhbGxiYWNrLCBvcHRzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlkbGUucXVldWVUYXNrKGNhbGxiYWNrLCBvcHRzKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zY2hlZHVsZXIuanMubWFwIiwiaW1wb3J0IHsgY3JlYXRlRXhwb3NlZFByb21pc2UsIGRlZmF1bHRRdWV1ZVRhc2tPcHRpb25zLCB9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHsgVGFzaywgfSBmcm9tICcuL3Rhc2snO1xuZXhwb3J0IGNsYXNzIFRhc2tRdWV1ZSB7XG4gICAgY29uc3RydWN0b3Iobm93LCBwcmlvcml0eSwgc2NoZWR1bGVyLCBmbHVzaFJlcXVlc3RvckZhY3RvcnkpIHtcbiAgICAgICAgdGhpcy5ub3cgPSBub3c7XG4gICAgICAgIHRoaXMucHJpb3JpdHkgPSBwcmlvcml0eTtcbiAgICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICAgIHRoaXMucHJvY2Vzc2luZ1NpemUgPSAwO1xuICAgICAgICB0aGlzLnByb2Nlc3NpbmdIZWFkID0gdm9pZCAwO1xuICAgICAgICB0aGlzLnByb2Nlc3NpbmdUYWlsID0gdm9pZCAwO1xuICAgICAgICB0aGlzLnBlbmRpbmdTaXplID0gMDtcbiAgICAgICAgdGhpcy5wZW5kaW5nSGVhZCA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5wZW5kaW5nVGFpbCA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5kZWxheWVkU2l6ZSA9IDA7XG4gICAgICAgIHRoaXMuZGVsYXllZEhlYWQgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMuZGVsYXllZFRhaWwgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMuZmx1c2hSZXF1ZXN0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy55aWVsZFByb21pc2UgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMudGFza1Bvb2wgPSBbXTtcbiAgICAgICAgdGhpcy50YXNrUG9vbFNpemUgPSAwO1xuICAgICAgICB0aGlzLmxhc3RSZXF1ZXN0ID0gMDtcbiAgICAgICAgdGhpcy5taWNyb1Rhc2tSZXF1ZXN0Rmx1c2hUYXNrID0gbnVsbDtcbiAgICAgICAgdGhpcy5mbHVzaFJlcXVlc3RvciA9IGZsdXNoUmVxdWVzdG9yRmFjdG9yeS5jcmVhdGUodGhpcyk7XG4gICAgICAgIHRoaXMucmVxdWVzdEZsdXNoID0gdGhpcy5yZXF1ZXN0Rmx1c2guYmluZCh0aGlzKTtcbiAgICB9XG4gICAgZ2V0IGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb2Nlc3NpbmdTaXplID09PSAwICYmIHRoaXMucGVuZGluZ1NpemUgPT09IDAgJiYgdGhpcy5kZWxheWVkU2l6ZSA9PT0gMDtcbiAgICB9XG4gICAgZmx1c2goKSB7XG4gICAgICAgIGlmICh0aGlzLm1pY3JvVGFza1JlcXVlc3RGbHVzaFRhc2sgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMubWljcm9UYXNrUmVxdWVzdEZsdXNoVGFzay5jYW5jZWwoKTtcbiAgICAgICAgICAgIHRoaXMubWljcm9UYXNrUmVxdWVzdEZsdXNoVGFzayA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mbHVzaFJlcXVlc3RlZCA9IGZhbHNlO1xuICAgICAgICBpZiAodGhpcy5wZW5kaW5nU2l6ZSA+IDApIHtcbiAgICAgICAgICAgIHRoaXMubW92ZVBlbmRpbmdUb1Byb2Nlc3NpbmcoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5kZWxheWVkU2l6ZSA+IDApIHtcbiAgICAgICAgICAgIHRoaXMubW92ZURlbGF5ZWRUb1Byb2Nlc3NpbmcoKTtcbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAodGhpcy5wcm9jZXNzaW5nU2l6ZSA+IDApIHtcbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc2luZ0hlYWQucnVuKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucGVuZGluZ1NpemUgPiAwKSB7XG4gICAgICAgICAgICB0aGlzLm1vdmVQZW5kaW5nVG9Qcm9jZXNzaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZGVsYXllZFNpemUgPiAwKSB7XG4gICAgICAgICAgICB0aGlzLm1vdmVEZWxheWVkVG9Qcm9jZXNzaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucHJvY2Vzc2luZ1NpemUgPiAwKSB7XG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RGbHVzaCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuZGVsYXllZFNpemUgPiAwKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcmlvcml0eSA8PSAwIC8qIG1pY3JvVGFzayAqLykge1xuICAgICAgICAgICAgICAgIC8vIE1pY3JvVGFza3MgYXJlIG5vdCBjbGFtcGVkIHNvIHdlIGhhdmUgdG8gY2xhbXAgdGhlbSB3aXRoIHNldFRpbWVvdXQgb3IgdGhleSdsbCBibG9jayBmb3JldmVyXG4gICAgICAgICAgICAgICAgdGhpcy5taWNyb1Rhc2tSZXF1ZXN0Rmx1c2hUYXNrID0gdGhpcy5zY2hlZHVsZXIuZ2V0VGFza1F1ZXVlKDIgLyogbWFjcm9UYXNrICovKS5xdWV1ZVRhc2sodGhpcy5yZXF1ZXN0Rmx1c2gpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gT3RoZXJ3aXNlIGp1c3QgbGV0IHRoaXMgcXVldWUgaGFuZGxlIGl0c2VsZlxuICAgICAgICAgICAgICAgIHRoaXMucmVxdWVzdEZsdXNoKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMueWllbGRQcm9taXNlICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgIGxldCBub01vcmVGaW5pdGVXb3JrID0gdHJ1ZTtcbiAgICAgICAgICAgIGxldCBjdXIgPSB0aGlzLnByb2Nlc3NpbmdIZWFkO1xuICAgICAgICAgICAgd2hpbGUgKGN1ciAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFjdXIucGVyc2lzdGVudCkge1xuICAgICAgICAgICAgICAgICAgICBub01vcmVGaW5pdGVXb3JrID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjdXIgPSBjdXIubmV4dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChub01vcmVGaW5pdGVXb3JrKSB7XG4gICAgICAgICAgICAgICAgY3VyID0gdGhpcy5wZW5kaW5nSGVhZDtcbiAgICAgICAgICAgICAgICB3aGlsZSAoY3VyICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjdXIucGVyc2lzdGVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbm9Nb3JlRmluaXRlV29yayA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY3VyID0gY3VyLm5leHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG5vTW9yZUZpbml0ZVdvcmspIHtcbiAgICAgICAgICAgICAgICBjdXIgPSB0aGlzLmRlbGF5ZWRIZWFkO1xuICAgICAgICAgICAgICAgIHdoaWxlIChjdXIgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWN1ci5wZXJzaXN0ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBub01vcmVGaW5pdGVXb3JrID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjdXIgPSBjdXIubmV4dDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobm9Nb3JlRmluaXRlV29yaykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHAgPSB0aGlzLnlpZWxkUHJvbWlzZTtcbiAgICAgICAgICAgICAgICB0aGlzLnlpZWxkUHJvbWlzZSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICBwLnJlc29sdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjYW5jZWwoKSB7XG4gICAgICAgIGlmICh0aGlzLm1pY3JvVGFza1JlcXVlc3RGbHVzaFRhc2sgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMubWljcm9UYXNrUmVxdWVzdEZsdXNoVGFzay5jYW5jZWwoKTtcbiAgICAgICAgICAgIHRoaXMubWljcm9UYXNrUmVxdWVzdEZsdXNoVGFzayA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mbHVzaFJlcXVlc3Rvci5jYW5jZWwoKTtcbiAgICAgICAgdGhpcy5mbHVzaFJlcXVlc3RlZCA9IGZhbHNlO1xuICAgIH1cbiAgICBhc3luYyB5aWVsZCgpIHtcbiAgICAgICAgaWYgKHRoaXMucHJvY2Vzc2luZ1NpemUgPiAwIHx8IHRoaXMucGVuZGluZ1NpemUgPiAwIHx8IHRoaXMuZGVsYXllZFNpemUgPiAwKSB7XG4gICAgICAgICAgICBpZiAodGhpcy55aWVsZFByb21pc2UgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgIHRoaXMueWllbGRQcm9taXNlID0gY3JlYXRlRXhwb3NlZFByb21pc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IHRoaXMueWllbGRQcm9taXNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlVGFzayhjYWxsYmFjaywgb3B0cykge1xuICAgICAgICBjb25zdCB7IGRlbGF5LCBwcmVlbXB0LCBwZXJzaXN0ZW50LCByZXVzYWJsZSB9ID0geyAuLi5kZWZhdWx0UXVldWVUYXNrT3B0aW9ucywgLi4ub3B0cyB9O1xuICAgICAgICBpZiAocHJlZW1wdCkge1xuICAgICAgICAgICAgaWYgKGRlbGF5ID4gMCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBhcmd1bWVudHM6IHByZWVtcHQgY2Fubm90IGJlIGNvbWJpbmVkIHdpdGggYSBncmVhdGVyLXRoYW4temVybyBkZWxheWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHBlcnNpc3RlbnQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgYXJndW1lbnRzOiBwcmVlbXB0IGNhbm5vdCBiZSBjb21iaW5lZCB3aXRoIHBlcnNpc3RlbnRgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAocGVyc2lzdGVudCAmJiB0aGlzLnByaW9yaXR5ID09PSAwIC8qIG1pY3JvVGFzayAqLykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGFyZ3VtZW50czogY2Fubm90IHF1ZXVlIHBlcnNpc3RlbnQgdGFza3Mgb24gdGhlIG1pY3JvIHRhc2sgcXVldWVgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5wcm9jZXNzaW5nU2l6ZSA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0Rmx1c2goKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0aW1lID0gdGhpcy5ub3coKTtcbiAgICAgICAgbGV0IHRhc2s7XG4gICAgICAgIGlmIChyZXVzYWJsZSkge1xuICAgICAgICAgICAgY29uc3QgdGFza1Bvb2wgPSB0aGlzLnRhc2tQb29sO1xuICAgICAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLnRhc2tQb29sU2l6ZSAtIDE7XG4gICAgICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICAgICAgICAgIHRhc2sgPSB0YXNrUG9vbFtpbmRleF07XG4gICAgICAgICAgICAgICAgdGFza1Bvb2xbaW5kZXhdID0gKHZvaWQgMCk7XG4gICAgICAgICAgICAgICAgdGhpcy50YXNrUG9vbFNpemUgPSBpbmRleDtcbiAgICAgICAgICAgICAgICB0YXNrLnJldXNlKHRpbWUsIGRlbGF5LCBwcmVlbXB0LCBwZXJzaXN0ZW50LCBjYWxsYmFjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0YXNrID0gbmV3IFRhc2sodGhpcywgdGltZSwgdGltZSArIGRlbGF5LCBwcmVlbXB0LCBwZXJzaXN0ZW50LCByZXVzYWJsZSwgY2FsbGJhY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGFzayA9IG5ldyBUYXNrKHRoaXMsIHRpbWUsIHRpbWUgKyBkZWxheSwgcHJlZW1wdCwgcGVyc2lzdGVudCwgcmV1c2FibGUsIGNhbGxiYWNrKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJlZW1wdCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJvY2Vzc2luZ1NpemUrKyA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc2luZ0hlYWQgPSB0aGlzLnByb2Nlc3NpbmdUYWlsID0gdGFzaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc2luZ1RhaWwgPSAodGFzay5wcmV2ID0gdGhpcy5wcm9jZXNzaW5nVGFpbCkubmV4dCA9IHRhc2s7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZGVsYXkgPT09IDApIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBlbmRpbmdTaXplKysgPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBlbmRpbmdIZWFkID0gdGhpcy5wZW5kaW5nVGFpbCA9IHRhc2s7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBlbmRpbmdUYWlsID0gKHRhc2sucHJldiA9IHRoaXMucGVuZGluZ1RhaWwpLm5leHQgPSB0YXNrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHRoaXMuZGVsYXllZFNpemUrKyA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGVsYXllZEhlYWQgPSB0aGlzLmRlbGF5ZWRUYWlsID0gdGFzaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZGVsYXllZFRhaWwgPSAodGFzay5wcmV2ID0gdGhpcy5kZWxheWVkVGFpbCkubmV4dCA9IHRhc2s7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRhc2s7XG4gICAgfVxuICAgIHRha2UodGFzaykge1xuICAgICAgICBpZiAodGFzay5zdGF0dXMgIT09ICdwZW5kaW5nJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW4gb25seSB0YWtlIHBlbmRpbmcgdGFza3MuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucHJvY2Vzc2luZ1NpemUgPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdEZsdXNoKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGFzay50YXNrUXVldWUucmVtb3ZlKHRhc2spO1xuICAgICAgICBpZiAodGFzay5wcmVlbXB0KSB7XG4gICAgICAgICAgICB0aGlzLmFkZFRvUHJvY2Vzc2luZyh0YXNrKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0YXNrLnF1ZXVlVGltZSA8PSB0aGlzLm5vdygpKSB7XG4gICAgICAgICAgICB0aGlzLmFkZFRvUGVuZGluZyh0YXNrKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYWRkVG9EZWxheWVkKHRhc2spO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlbW92ZSh0YXNrKSB7XG4gICAgICAgIGlmICh0YXNrLnByZWVtcHQpIHtcbiAgICAgICAgICAgIC8vIEZhc3QgcGF0aCAtIHByZWVtcHQgdGFzayBjYW4gb25seSBldmVyIGVuZCB1cCBpbiB0aGUgcHJvY2Vzc2luZyBxdWV1ZVxuICAgICAgICAgICAgdGhpcy5yZW1vdmVGcm9tUHJvY2Vzc2luZyh0YXNrKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGFzay5xdWV1ZVRpbWUgPiB0aGlzLm5vdygpKSB7XG4gICAgICAgICAgICAvLyBGYXN0IHBhdGggLSB0YXNrIHdpdGggcXVldWVUaW1lIGluIHRoZSBmdXR1cmUgY2FuIG9ubHkgZXZlciBiZSBpbiB0aGUgZGVsYXllZCBxdWV1ZVxuICAgICAgICAgICAgdGhpcy5yZW1vdmVGcm9tRGVsYXllZCh0YXNrKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBTY2FuIGV2ZXJ5dGhpbmcgKHdlIGNhbiBtYWtlIHRoaXMgZmFzdGVyIGJ5IHVzaW5nIHRoZSBxdWV1ZVRpbWUgcHJvcGVydHksIGJ1dCB0aGlzIGlzIGdvb2QgZW5vdWdoIGZvciBub3cpXG4gICAgICAgIGxldCBjdXIgPSB0aGlzLnByb2Nlc3NpbmdIZWFkO1xuICAgICAgICB3aGlsZSAoY3VyICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgIGlmIChjdXIgPT09IHRhc2spIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUZyb21Qcm9jZXNzaW5nKHRhc2spO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1ciA9IGN1ci5uZXh0O1xuICAgICAgICB9XG4gICAgICAgIGN1ciA9IHRoaXMucGVuZGluZ0hlYWQ7XG4gICAgICAgIHdoaWxlIChjdXIgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgaWYgKGN1ciA9PT0gdGFzaykge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlRnJvbVBlbmRpbmcodGFzayk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3VyID0gY3VyLm5leHQ7XG4gICAgICAgIH1cbiAgICAgICAgY3VyID0gdGhpcy5kZWxheWVkSGVhZDtcbiAgICAgICAgd2hpbGUgKGN1ciAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICBpZiAoY3VyID09PSB0YXNrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVGcm9tRGVsYXllZCh0YXNrKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdXIgPSBjdXIubmV4dDtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFRhc2sgIyR7dGFzay5pZH0gY291bGQgbm90IGJlIGZvdW5kYCk7XG4gICAgfVxuICAgIHJldHVyblRvUG9vbCh0YXNrKSB7XG4gICAgICAgIHRoaXMudGFza1Bvb2xbdGhpcy50YXNrUG9vbFNpemUrK10gPSB0YXNrO1xuICAgIH1cbiAgICByZXNldFBlcnNpc3RlbnRUYXNrKHRhc2spIHtcbiAgICAgICAgdGFzay5yZXNldCh0aGlzLm5vdygpKTtcbiAgICAgICAgaWYgKHRhc2suY3JlYXRlZFRpbWUgPT09IHRhc2sucXVldWVUaW1lKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wZW5kaW5nU2l6ZSsrID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wZW5kaW5nSGVhZCA9IHRoaXMucGVuZGluZ1RhaWwgPSB0YXNrO1xuICAgICAgICAgICAgICAgIHRhc2sucHJldiA9IHRhc2submV4dCA9IHZvaWQgMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucGVuZGluZ1RhaWwgPSAodGFzay5wcmV2ID0gdGhpcy5wZW5kaW5nVGFpbCkubmV4dCA9IHRhc2s7XG4gICAgICAgICAgICAgICAgdGFzay5uZXh0ID0gdm9pZCAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHRoaXMuZGVsYXllZFNpemUrKyA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGVsYXllZEhlYWQgPSB0aGlzLmRlbGF5ZWRUYWlsID0gdGFzaztcbiAgICAgICAgICAgICAgICB0YXNrLnByZXYgPSB0YXNrLm5leHQgPSB2b2lkIDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRlbGF5ZWRUYWlsID0gKHRhc2sucHJldiA9IHRoaXMuZGVsYXllZFRhaWwpLm5leHQgPSB0YXNrO1xuICAgICAgICAgICAgICAgIHRhc2submV4dCA9IHZvaWQgMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBmaW5pc2godGFzaykge1xuICAgICAgICBpZiAodGFzay5uZXh0ICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgIHRhc2submV4dC5wcmV2ID0gdGFzay5wcmV2O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0YXNrLnByZXYgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgdGFzay5wcmV2Lm5leHQgPSB0YXNrLm5leHQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVtb3ZlRnJvbVByb2Nlc3NpbmcodGFzaykge1xuICAgICAgICBpZiAodGhpcy5wcm9jZXNzaW5nSGVhZCA9PT0gdGFzaykge1xuICAgICAgICAgICAgdGhpcy5wcm9jZXNzaW5nSGVhZCA9IHRhc2submV4dDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5wcm9jZXNzaW5nVGFpbCA9PT0gdGFzaykge1xuICAgICAgICAgICAgdGhpcy5wcm9jZXNzaW5nVGFpbCA9IHRhc2sucHJldjtcbiAgICAgICAgfVxuICAgICAgICAtLXRoaXMucHJvY2Vzc2luZ1NpemU7XG4gICAgICAgIHRoaXMuZmluaXNoKHRhc2spO1xuICAgIH1cbiAgICByZW1vdmVGcm9tUGVuZGluZyh0YXNrKSB7XG4gICAgICAgIGlmICh0aGlzLnBlbmRpbmdIZWFkID09PSB0YXNrKSB7XG4gICAgICAgICAgICB0aGlzLnBlbmRpbmdIZWFkID0gdGFzay5uZXh0O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnBlbmRpbmdUYWlsID09PSB0YXNrKSB7XG4gICAgICAgICAgICB0aGlzLnBlbmRpbmdUYWlsID0gdGFzay5wcmV2O1xuICAgICAgICB9XG4gICAgICAgIC0tdGhpcy5wZW5kaW5nU2l6ZTtcbiAgICAgICAgdGhpcy5maW5pc2godGFzayk7XG4gICAgfVxuICAgIHJlbW92ZUZyb21EZWxheWVkKHRhc2spIHtcbiAgICAgICAgaWYgKHRoaXMuZGVsYXllZEhlYWQgPT09IHRhc2spIHtcbiAgICAgICAgICAgIHRoaXMuZGVsYXllZEhlYWQgPSB0YXNrLm5leHQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZGVsYXllZFRhaWwgPT09IHRhc2spIHtcbiAgICAgICAgICAgIHRoaXMuZGVsYXllZFRhaWwgPSB0YXNrLnByZXY7XG4gICAgICAgIH1cbiAgICAgICAgLS10aGlzLmRlbGF5ZWRTaXplO1xuICAgICAgICB0aGlzLmZpbmlzaCh0YXNrKTtcbiAgICB9XG4gICAgYWRkVG9Qcm9jZXNzaW5nKHRhc2spIHtcbiAgICAgICAgaWYgKHRoaXMucHJvY2Vzc2luZ1NpemUrKyA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5wcm9jZXNzaW5nSGVhZCA9IHRoaXMucHJvY2Vzc2luZ1RhaWwgPSB0YXNrO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wcm9jZXNzaW5nVGFpbCA9ICh0YXNrLnByZXYgPSB0aGlzLnByb2Nlc3NpbmdUYWlsKS5uZXh0ID0gdGFzaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBhZGRUb1BlbmRpbmcodGFzaykge1xuICAgICAgICBpZiAodGhpcy5wZW5kaW5nU2l6ZSsrID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLnBlbmRpbmdIZWFkID0gdGhpcy5wZW5kaW5nVGFpbCA9IHRhc2s7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnBlbmRpbmdUYWlsID0gKHRhc2sucHJldiA9IHRoaXMucGVuZGluZ1RhaWwpLm5leHQgPSB0YXNrO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFkZFRvRGVsYXllZCh0YXNrKSB7XG4gICAgICAgIGlmICh0aGlzLmRlbGF5ZWRTaXplKysgPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuZGVsYXllZEhlYWQgPSB0aGlzLmRlbGF5ZWRUYWlsID0gdGFzaztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZGVsYXllZFRhaWwgPSAodGFzay5wcmV2ID0gdGhpcy5kZWxheWVkVGFpbCkubmV4dCA9IHRhc2s7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbW92ZVBlbmRpbmdUb1Byb2Nlc3NpbmcoKSB7XG4gICAgICAgIC8vIEFkZCB0aGUgcHJldmlvdXNseSBwZW5kaW5nIHRhc2tzIHRvIHRoZSBjdXJyZW50bHkgcHJvY2Vzc2luZyB0YXNrc1xuICAgICAgICBpZiAodGhpcy5wcm9jZXNzaW5nU2l6ZSA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5wcm9jZXNzaW5nSGVhZCA9IHRoaXMucGVuZGluZ0hlYWQ7XG4gICAgICAgICAgICB0aGlzLnByb2Nlc3NpbmdUYWlsID0gdGhpcy5wZW5kaW5nVGFpbDtcbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc2luZ1NpemUgPSB0aGlzLnBlbmRpbmdTaXplO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wcm9jZXNzaW5nVGFpbC5uZXh0ID0gdGhpcy5wZW5kaW5nSGVhZDtcbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc2luZ1RhaWwgPSB0aGlzLnBlbmRpbmdUYWlsO1xuICAgICAgICAgICAgdGhpcy5wcm9jZXNzaW5nU2l6ZSArPSB0aGlzLnBlbmRpbmdTaXplO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucGVuZGluZ0hlYWQgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMucGVuZGluZ1RhaWwgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMucGVuZGluZ1NpemUgPSAwO1xuICAgIH1cbiAgICBtb3ZlRGVsYXllZFRvUHJvY2Vzc2luZygpIHtcbiAgICAgICAgY29uc3QgdGltZSA9IHRoaXMubm93KCk7XG4gICAgICAgIC8vIEFkZCBhbnkgZGVsYXllZCB0YXNrcyB3aG9zZSBkZWxheSBoYXZlIGV4cGlyZWQgdG8gdGhlIGN1cnJlbnRseSBwcm9jZXNzaW5nIHRhc2tzXG4gICAgICAgIGNvbnN0IGRlbGF5ZWRIZWFkID0gdGhpcy5kZWxheWVkSGVhZDtcbiAgICAgICAgaWYgKGRlbGF5ZWRIZWFkLnF1ZXVlVGltZSA8PSB0aW1lKSB7XG4gICAgICAgICAgICBsZXQgZGVsYXllZFRhaWwgPSBkZWxheWVkSGVhZDtcbiAgICAgICAgICAgIGxldCBuZXh0ID0gZGVsYXllZFRhaWwubmV4dDtcbiAgICAgICAgICAgIGxldCBjb3VudCA9IDE7XG4gICAgICAgICAgICB3aGlsZSAobmV4dCAhPT0gdm9pZCAwICYmIG5leHQucXVldWVUaW1lIDw9IHRpbWUpIHtcbiAgICAgICAgICAgICAgICBkZWxheWVkVGFpbCA9IG5leHQ7XG4gICAgICAgICAgICAgICAgbmV4dCA9IGRlbGF5ZWRUYWlsLm5leHQ7XG4gICAgICAgICAgICAgICAgKytjb3VudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnByb2Nlc3NpbmdTaXplID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzaW5nSGVhZCA9IGRlbGF5ZWRIZWFkO1xuICAgICAgICAgICAgICAgIHRoaXMucHJvY2Vzc2luZ1RhaWwgPSBkZWxheWVkVGFpbDtcbiAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NpbmdTaXplID0gY291bnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NpbmdUYWlsLm5leHQgPSBkZWxheWVkSGVhZDtcbiAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NpbmdUYWlsID0gZGVsYXllZFRhaWw7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzaW5nU2l6ZSArPSBjb3VudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZGVsYXllZEhlYWQgPSBuZXh0O1xuICAgICAgICAgICAgdGhpcy5kZWxheWVkU2l6ZSAtPSBjb3VudDtcbiAgICAgICAgICAgIGlmICh0aGlzLmRlbGF5ZWRTaXplID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZWxheWVkVGFpbCA9IHZvaWQgMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXF1ZXN0Rmx1c2goKSB7XG4gICAgICAgIGlmICh0aGlzLm1pY3JvVGFza1JlcXVlc3RGbHVzaFRhc2sgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMubWljcm9UYXNrUmVxdWVzdEZsdXNoVGFzay5jYW5jZWwoKTtcbiAgICAgICAgICAgIHRoaXMubWljcm9UYXNrUmVxdWVzdEZsdXNoVGFzayA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLmZsdXNoUmVxdWVzdGVkKSB7XG4gICAgICAgICAgICB0aGlzLmZsdXNoUmVxdWVzdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMubGFzdFJlcXVlc3QgPSB0aGlzLm5vdygpO1xuICAgICAgICAgICAgdGhpcy5mbHVzaFJlcXVlc3Rvci5yZXF1ZXN0KCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10YXNrLXF1ZXVlLmpzLm1hcCIsImltcG9ydCB7IGNyZWF0ZUV4cG9zZWRQcm9taXNlLCB9IGZyb20gJy4vdHlwZXMnO1xuZXhwb3J0IGNsYXNzIFRhc2tBYm9ydEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKHRhc2spIHtcbiAgICAgICAgc3VwZXIoJ1Rhc2sgd2FzIGNhbmNlbGVkLicpO1xuICAgICAgICB0aGlzLnRhc2sgPSB0YXNrO1xuICAgIH1cbn1cbmxldCBpZCA9IDA7XG5leHBvcnQgY2xhc3MgVGFzayB7XG4gICAgY29uc3RydWN0b3IodGFza1F1ZXVlLCBjcmVhdGVkVGltZSwgcXVldWVUaW1lLCBwcmVlbXB0LCBwZXJzaXN0ZW50LCByZXVzYWJsZSwgY2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy50YXNrUXVldWUgPSB0YXNrUXVldWU7XG4gICAgICAgIHRoaXMuY3JlYXRlZFRpbWUgPSBjcmVhdGVkVGltZTtcbiAgICAgICAgdGhpcy5xdWV1ZVRpbWUgPSBxdWV1ZVRpbWU7XG4gICAgICAgIHRoaXMucHJlZW1wdCA9IHByZWVtcHQ7XG4gICAgICAgIHRoaXMucGVyc2lzdGVudCA9IHBlcnNpc3RlbnQ7XG4gICAgICAgIHRoaXMucmV1c2FibGUgPSByZXVzYWJsZTtcbiAgICAgICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgICAgICB0aGlzLmlkID0gKytpZDtcbiAgICAgICAgdGhpcy5uZXh0ID0gdm9pZCAwO1xuICAgICAgICB0aGlzLnByZXYgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMucmVzb2x2ZSA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5yZWplY3QgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMuX3Jlc3VsdCA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5fc3RhdHVzID0gJ3BlbmRpbmcnO1xuICAgICAgICB0aGlzLnByaW9yaXR5ID0gdGFza1F1ZXVlLnByaW9yaXR5O1xuICAgIH1cbiAgICBnZXQgcmVzdWx0KCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9yZXN1bHQ7XG4gICAgICAgIGlmIChyZXN1bHQgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgc3dpdGNoICh0aGlzLl9zdGF0dXMpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdwZW5kaW5nJzoge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9taXNlID0gdGhpcy5fcmVzdWx0ID0gY3JlYXRlRXhwb3NlZFByb21pc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXNvbHZlID0gcHJvbWlzZS5yZXNvbHZlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlamVjdCA9IHByb21pc2UucmVqZWN0O1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSAncnVubmluZyc6XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVHJ5aW5nIHRvIGF3YWl0IHRhc2sgZnJvbSB3aXRoaW4gdGFzayB3aWxsIGNhdXNlIGEgZGVhZGxvY2suJyk7XG4gICAgICAgICAgICAgICAgY2FzZSAnY29tcGxldGVkJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Jlc3VsdCA9IFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2NhbmNlbGVkJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Jlc3VsdCA9IFByb21pc2UucmVqZWN0KG5ldyBUYXNrQWJvcnRFcnJvcih0aGlzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgZ2V0IHN0YXR1cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N0YXR1cztcbiAgICB9XG4gICAgcnVuKCkge1xuICAgICAgICBpZiAodGhpcy5fc3RhdHVzICE9PSAncGVuZGluZycpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IHJ1biB0YXNrIGluICR7dGhpcy5fc3RhdHVzfSBzdGF0ZWApO1xuICAgICAgICB9XG4gICAgICAgIC8vIHRoaXMucGVyc2lzdGVudCBjb3VsZCBiZSBjaGFuZ2VkIHdoaWxlIHRoZSB0YXNrIGlzIHJ1bm5pbmcgKHRoaXMgY2FuIG9ubHkgYmUgZG9uZSBieSB0aGUgdGFzayBpdHNlbGYgaWYgY2FuY2VsZWQsIGFuZCBpcyBhIHZhbGlkIHdheSBvZiBzdG9wcGluZyBhIGxvb3ApXG4gICAgICAgIC8vIHNvIHdlIGRlbGliZXJhdGVseSByZWZlcmVuY2UgdGhpcy5wZXJzaXN0ZW50IGluc3RlYWQgb2YgdGhlIGxvY2FsIHZhcmlhYmxlLCBidXQgd2Uga2VlcCBpdCBhcm91bmQgdG8ga25vdyB3aGV0aGVyIHRoZSB0YXNrICp3YXMqIHBlcnNpc3RlbnQgYmVmb3JlIHJ1bm5pbmcgaXQsXG4gICAgICAgIC8vIHNvIHdlIGNhbiBzZXQgdGhlIGNvcnJlY3QgY2FuY2VsYXRpb24gc3RhdGUuXG4gICAgICAgIGNvbnN0IHBlcnNpc3RlbnQgPSB0aGlzLnBlcnNpc3RlbnQ7XG4gICAgICAgIGNvbnN0IHJldXNhYmxlID0gdGhpcy5yZXVzYWJsZTtcbiAgICAgICAgY29uc3QgdGFza1F1ZXVlID0gdGhpcy50YXNrUXVldWU7XG4gICAgICAgIGNvbnN0IGNhbGxiYWNrID0gdGhpcy5jYWxsYmFjaztcbiAgICAgICAgY29uc3QgcmVzb2x2ZSA9IHRoaXMucmVzb2x2ZTtcbiAgICAgICAgY29uc3QgcmVqZWN0ID0gdGhpcy5yZWplY3Q7XG4gICAgICAgIGNvbnN0IGNyZWF0ZWRUaW1lID0gdGhpcy5jcmVhdGVkVGltZTtcbiAgICAgICAgdGFza1F1ZXVlLnJlbW92ZSh0aGlzKTtcbiAgICAgICAgdGhpcy5fc3RhdHVzID0gJ3J1bm5pbmcnO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmV0ID0gY2FsbGJhY2sodGFza1F1ZXVlLm5vdygpIC0gY3JlYXRlZFRpbWUpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGVyc2lzdGVudCkge1xuICAgICAgICAgICAgICAgIHRhc2tRdWV1ZS5yZXNldFBlcnNpc3RlbnRUYXNrKHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocGVyc2lzdGVudCkge1xuICAgICAgICAgICAgICAgIC8vIFBlcnNpc3RlbnQgdGFza3MgbmV2ZXIgcmVhY2ggY29tcGxldGVkIHN0YXR1cy4gVGhleSdyZSBlaXRoZXIgcGVuZGluZywgcnVubmluZywgb3IgY2FuY2VsZWQuXG4gICAgICAgICAgICAgICAgdGhpcy5fc3RhdHVzID0gJ2NhbmNlbGVkJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX3N0YXR1cyA9ICdjb21wbGV0ZWQnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlc29sdmUgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgIHJlc29sdmUocmV0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBpZiAocmVqZWN0ICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5wZXJzaXN0ZW50KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICAgICAgICAgICAgaWYgKHJldXNhYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tRdWV1ZS5yZXR1cm5Ub1Bvb2wodGhpcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNhbmNlbCgpIHtcbiAgICAgICAgaWYgKHRoaXMuX3N0YXR1cyA9PT0gJ3BlbmRpbmcnKSB7XG4gICAgICAgICAgICBjb25zdCB0YXNrUXVldWUgPSB0aGlzLnRhc2tRdWV1ZTtcbiAgICAgICAgICAgIGNvbnN0IHJldXNhYmxlID0gdGhpcy5yZXVzYWJsZTtcbiAgICAgICAgICAgIGNvbnN0IHJlamVjdCA9IHRoaXMucmVqZWN0O1xuICAgICAgICAgICAgdGFza1F1ZXVlLnJlbW92ZSh0aGlzKTtcbiAgICAgICAgICAgIGlmICh0YXNrUXVldWUuaXNFbXB0eSkge1xuICAgICAgICAgICAgICAgIHRhc2tRdWV1ZS5jYW5jZWwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX3N0YXR1cyA9ICdjYW5jZWxlZCc7XG4gICAgICAgICAgICBpZiAocmVqZWN0ICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICByZWplY3QobmV3IFRhc2tBYm9ydEVycm9yKHRoaXMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZGlzcG9zZSgpO1xuICAgICAgICAgICAgaWYgKHJldXNhYmxlKSB7XG4gICAgICAgICAgICAgICAgdGFza1F1ZXVlLnJldHVyblRvUG9vbCh0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuX3N0YXR1cyA9PT0gJ3J1bm5pbmcnICYmIHRoaXMucGVyc2lzdGVudCkge1xuICAgICAgICAgICAgdGhpcy5wZXJzaXN0ZW50ID0gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJlc2V0KHRpbWUpIHtcbiAgICAgICAgY29uc3QgZGVsYXkgPSB0aGlzLnF1ZXVlVGltZSAtIHRoaXMuY3JlYXRlZFRpbWU7XG4gICAgICAgIHRoaXMuY3JlYXRlZFRpbWUgPSB0aW1lO1xuICAgICAgICB0aGlzLnF1ZXVlVGltZSA9IHRpbWUgKyBkZWxheTtcbiAgICAgICAgdGhpcy5fc3RhdHVzID0gJ3BlbmRpbmcnO1xuICAgICAgICB0aGlzLnJlc29sdmUgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMucmVqZWN0ID0gdm9pZCAwO1xuICAgICAgICB0aGlzLl9yZXN1bHQgPSB2b2lkIDA7XG4gICAgfVxuICAgIHJldXNlKHRpbWUsIGRlbGF5LCBwcmVlbXB0LCBwZXJzaXN0ZW50LCBjYWxsYmFjaykge1xuICAgICAgICB0aGlzLmNyZWF0ZWRUaW1lID0gdGltZTtcbiAgICAgICAgdGhpcy5xdWV1ZVRpbWUgPSB0aW1lICsgZGVsYXk7XG4gICAgICAgIHRoaXMucHJlZW1wdCA9IHByZWVtcHQ7XG4gICAgICAgIHRoaXMucGVyc2lzdGVudCA9IHBlcnNpc3RlbnQ7XG4gICAgICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICAgICAgdGhpcy5fc3RhdHVzID0gJ3BlbmRpbmcnO1xuICAgIH1cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICB0aGlzLnByZXYgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMubmV4dCA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5jYWxsYmFjayA9ICh2b2lkIDApO1xuICAgICAgICB0aGlzLnJlc29sdmUgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMucmVqZWN0ID0gdm9pZCAwO1xuICAgICAgICB0aGlzLl9yZXN1bHQgPSB2b2lkIDA7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGFzay5qcy5tYXAiLCJleHBvcnQgdmFyIFRhc2tRdWV1ZVByaW9yaXR5O1xuKGZ1bmN0aW9uIChUYXNrUXVldWVQcmlvcml0eSkge1xuICAgIFRhc2tRdWV1ZVByaW9yaXR5W1Rhc2tRdWV1ZVByaW9yaXR5W1wibWljcm9UYXNrXCJdID0gMF0gPSBcIm1pY3JvVGFza1wiO1xuICAgIFRhc2tRdWV1ZVByaW9yaXR5W1Rhc2tRdWV1ZVByaW9yaXR5W1wicmVuZGVyXCJdID0gMV0gPSBcInJlbmRlclwiO1xuICAgIFRhc2tRdWV1ZVByaW9yaXR5W1Rhc2tRdWV1ZVByaW9yaXR5W1wibWFjcm9UYXNrXCJdID0gMl0gPSBcIm1hY3JvVGFza1wiO1xuICAgIFRhc2tRdWV1ZVByaW9yaXR5W1Rhc2tRdWV1ZVByaW9yaXR5W1wicG9zdFJlbmRlclwiXSA9IDNdID0gXCJwb3N0UmVuZGVyXCI7XG4gICAgVGFza1F1ZXVlUHJpb3JpdHlbVGFza1F1ZXVlUHJpb3JpdHlbXCJpZGxlXCJdID0gNF0gPSBcImlkbGVcIjtcbn0pKFRhc2tRdWV1ZVByaW9yaXR5IHx8IChUYXNrUXVldWVQcmlvcml0eSA9IHt9KSk7XG5leHBvcnQgY29uc3QgZGVmYXVsdFF1ZXVlVGFza09wdGlvbnMgPSB7XG4gICAgZGVsYXk6IDAsXG4gICAgcHJlZW1wdDogZmFsc2UsXG4gICAgcHJpb3JpdHk6IDEgLyogcmVuZGVyICovLFxuICAgIHBlcnNpc3RlbnQ6IGZhbHNlLFxuICAgIHJldXNhYmxlOiB0cnVlLFxufTtcbmxldCAkcmVzb2x2ZTtcbmxldCAkcmVqZWN0O1xuZnVuY3Rpb24gZXhlY3V0b3IocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgJHJlc29sdmUgPSByZXNvbHZlO1xuICAgICRyZWplY3QgPSByZWplY3Q7XG59XG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRXhwb3NlZFByb21pc2UoKSB7XG4gICAgY29uc3QgcCA9IG5ldyBQcm9taXNlKGV4ZWN1dG9yKTtcbiAgICBwLnJlc29sdmUgPSAkcmVzb2x2ZTtcbiAgICBwLnJlamVjdCA9ICRyZWplY3Q7XG4gICAgcmV0dXJuIHA7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10eXBlcy5qcy5tYXAiLCJleHBvcnQgeyBBdXJlbGlhLCBBdXJlbGlhIGFzIGRlZmF1bHQgfSBmcm9tICcuL3F1aWNrLXN0YXJ0JztcbmV4cG9ydCB7IERlYnVnQ29uZmlndXJhdGlvbiwgVHJhY2VDb25maWd1cmF0aW9uLCB9IGZyb20gJ0BhdXJlbGlhL2RlYnVnJztcbmV4cG9ydCB7IFxuLy8gUmV0cnlDb25maWd1cmF0aW9uLFxuLy8gUmV0cnlhYmxlUmVxdWVzdCxcbi8vIFZhbGlkSW50ZXJjZXB0b3JNZXRob2ROYW1lLFxuanNvbiwgXG4vLyByZXRyeVN0cmF0ZWd5LFxuLy8gUmV0cnlJbnRlcmNlcHRvcixcbkh0dHBDbGllbnRDb25maWd1cmF0aW9uLCBIdHRwQ2xpZW50IH0gZnJvbSAnQGF1cmVsaWEvZmV0Y2gtY2xpZW50JztcbmV4cG9ydCB7IFxuLy8gQXR0clN5bnRheCxcbi8vIElBdHRyaWJ1dGVQYXJzZXIsXG5hdHRyaWJ1dGVQYXR0ZXJuLCBcbi8vIEF0dHJpYnV0ZVBhdHRlcm5EZWZpbml0aW9uLFxuSUF0dHJpYnV0ZVBhdHRlcm4sIFxuLy8gSUF0dHJpYnV0ZVBhdHRlcm5IYW5kbGVyLFxuLy8gSW50ZXJwcmV0YXRpb24sXG4vLyBJU3ludGF4SW50ZXJwcmV0ZXIsXG4vLyBBdFByZWZpeGVkVHJpZ2dlckF0dHJpYnV0ZVBhdHRlcm4sXG4vLyBDb2xvblByZWZpeGVkQmluZEF0dHJpYnV0ZVBhdHRlcm4sXG4vLyBEb3RTZXBhcmF0ZWRBdHRyaWJ1dGVQYXR0ZXJuLFxuLy8gUmVmQXR0cmlidXRlUGF0dGVybixcbmJpbmRpbmdDb21tYW5kLCBcbi8vIEJpbmRpbmdDb21tYW5kRGVmaW5pdGlvbixcbi8vIEJpbmRpbmdDb21tYW5kS2luZCxcbi8vIEJpbmRpbmdDb21tYW5kVHlwZSxcbmdldFRhcmdldCwgXG4vLyBDYWxsQmluZGluZ0NvbW1hbmQsXG4vLyBEZWZhdWx0QmluZGluZ0NvbW1hbmQsXG4vLyBGb3JCaW5kaW5nQ29tbWFuZCxcbi8vIEZyb21WaWV3QmluZGluZ0NvbW1hbmQsXG4vLyBPbmVUaW1lQmluZGluZ0NvbW1hbmQsXG4vLyBUb1ZpZXdCaW5kaW5nQ29tbWFuZCxcbi8vIFR3b1dheUJpbmRpbmdDb21tYW5kLFxuLy8gSUV4cHJlc3Npb25QYXJzZXJSZWdpc3RyYXRpb24sXG4vLyBEZWZhdWx0Q29tcG9uZW50cyBhcyBKaXREZWZhdWx0Q29tcG9uZW50cyxcbi8vIFJlZkF0dHJpYnV0ZVBhdHRlcm5SZWdpc3RyYXRpb24sXG4vLyBEb3RTZXBhcmF0ZWRBdHRyaWJ1dGVQYXR0ZXJuUmVnaXN0cmF0aW9uLFxuLy8gRGVmYXVsdEJpbmRpbmdTeW50YXgsXG4vLyBBdFByZWZpeGVkVHJpZ2dlckF0dHJpYnV0ZVBhdHRlcm5SZWdpc3RyYXRpb24sXG4vLyBDb2xvblByZWZpeGVkQmluZEF0dHJpYnV0ZVBhdHRlcm5SZWdpc3RyYXRpb24sXG5TaG9ydEhhbmRCaW5kaW5nU3ludGF4LCB9IGZyb20gJ0BhdXJlbGlhL2ppdCc7XG5leHBvcnQgeyBKaXRIdG1sQnJvd3NlckNvbmZpZ3VyYXRpb24gfSBmcm9tICdAYXVyZWxpYS9qaXQtaHRtbC1icm93c2VyJztcbmV4cG9ydCB7IGFsbCwgREksIElDb250YWluZXIsIFxuLy8gSURlZmF1bHRhYmxlSW50ZXJmYWNlU3ltYm9sLFxuLy8gSUZhY3RvcnksXG5pbmplY3QsIElTZXJ2aWNlTG9jYXRvciwgbGF6eSwgb3B0aW9uYWwsIFxuLy8gUmVnaXN0ZXJTZWxmLFxuUmVnaXN0cmF0aW9uLCBcbi8vIFJlc29sdmVDYWxsYmFjayxcbnNpbmdsZXRvbiwgdHJhbnNpZW50LCBcbi8vIEluamVjdGFibGUsXG4vLyBJbnRlcmZhY2VTeW1ib2wsXG5JbnN0YW5jZVByb3ZpZGVyLCBcbi8vIElQZXJmb3JtYW5jZSxcbi8vIElUaW1lckhhbmRsZXIsXG4vLyBJV2luZG93T3JXb3JrZXJHbG9iYWxTY29wZSxcbi8vIEtub3duS2V5cyxcbi8vIE5vSW5mZXIsXG4vLyBPbWl0LFxuLy8gT3B0aW9uYWxLbm93bktleXMsXG4vLyBPcHRpb25hbFZhbHVlc09mLFxuLy8gT3ZlcndyaXRlLFxuLy8gUGFyYW0wLFxuLy8gUGFyYW0xLFxuLy8gUGFyYW0yLFxuLy8gUGFyYW0zLFxuLy8gUGljazIsXG4vLyBQaWNrMyxcbi8vIFByaW1pdGl2ZSxcbi8vIFB1YmxpYyxcbi8vIFB1cmlmeSxcbi8vIFJlcXVpcmVkS25vd25LZXlzLFxuLy8gUmVxdWlyZWRWYWx1ZXNPZixcbi8vIFN0cmljdFByaW1pdGl2ZSxcbi8vIFVud3JhcCxcbi8vIFZhbHVlc09mLFxuLy8gV3JpdGFibGUsXG4vLyBJZkVxdWFscyxcbi8vIFJlYWRvbmx5S2V5cyxcbi8vIFdyaXRhYmxlS2V5cyxcbi8vIG1ldGFkYXRhLFxuTWV0YWRhdGEsIFxuLy8gSUNvbnNvbGVMaWtlLFxuQ29sb3JPcHRpb25zLCBcbi8vIElMb2dDb25maWcsXG4vLyBJTG9nRXZlbnQsXG4vLyBJTG9nRXZlbnRGYWN0b3J5LFxuLy8gSVNpbmssXG5JTG9nZ2VyLCBcbi8vIExvZ0NvbmZpZyxcbi8vIERlZmF1bHRMb2dFdmVudCxcbi8vIERlZmF1bHRMb2dFdmVudEZhY3RvcnksXG4vLyBEZWZhdWx0TG9nZ2VyLFxuLy8gQ29uc29sZVNpbmssXG5Mb2dnZXJDb25maWd1cmF0aW9uLCBcbi8vIHJlbGF0aXZlVG9GaWxlLFxuLy8gam9pbixcbi8vIHBhcnNlUXVlcnlTdHJpbmcsXG4vLyBJUXVlcnlQYXJhbXMsXG5QTEFURk9STSwgXG4vLyBJVHJhY2VJbmZvLFxuLy8gSVRyYWNlV3JpdGVyLFxuLy8gSUxpdmVMb2dnaW5nT3B0aW9ucyxcblJlcG9ydGVyLCBUcmFjZXIsIExvZ0xldmVsLCBQcm9maWxlciwgXG4vLyBJUmVzb3VyY2VEZWZpbml0aW9uLFxuLy8gSVJlc291cmNlRGVzY3JpcHRpb25zLFxuLy8gSVJlc291cmNlS2luZCxcbi8vIElSZXNvdXJjZVR5cGUsXG4vLyBSZXNvdXJjZURlc2NyaXB0aW9uLFxuLy8gUmVzb3VyY2VQYXJ0RGVzY3JpcHRpb24sXG4vLyBmcm9tQW5ub3RhdGlvbk9yRGVmaW5pdGlvbk9yVHlwZU9yRGVmYXVsdCxcbi8vIGZyb21Bbm5vdGF0aW9uT3JUeXBlT3JEZWZhdWx0LFxuLy8gZnJvbURlZmluaXRpb25PckRlZmF1bHQsXG5FdmVudEFnZ3JlZ2F0b3IsIElFdmVudEFnZ3JlZ2F0b3IsIGlzQXJyYXlJbmRleCwgY2FtZWxDYXNlLCBrZWJhYkNhc2UsIHBhc2NhbENhc2UsIHRvQXJyYXksIFxuLy8gbmV4dElkLFxuLy8gcmVzZXRJZCxcbi8vIGNvbXBhcmVOdW1iZXIsXG4vLyBtZXJnZURpc3RpbmN0LFxuLy8gaXNOdW1iZXJPckJpZ0ludCxcbi8vIGlzU3RyaW5nT3JEYXRlLFxuYm91bmQsIH0gZnJvbSAnQGF1cmVsaWEva2VybmVsJztcbmV4cG9ydCB7IFxuLy8gTmF2LFxuTmF2Um91dGUsIElSb3V0ZXIsIFJvdXRlciwgXG4vLyBJVmlld3BvcnRPcHRpb25zLFxuLy8gVmlld3BvcnQsXG4vLyBDb250ZW50U3RhdHVzLFxuLy8gVmlld3BvcnRDb250ZW50LFxuVmlld3BvcnRJbnN0cnVjdGlvbiwgUm91dGVyQ29uZmlndXJhdGlvbiwgUm91dGVyUmVnaXN0cmF0aW9uLCB9IGZyb20gJ0BhdXJlbGlhL3JvdXRlcic7XG5leHBvcnQgeyBcbi8vIENhbGxGdW5jdGlvbkV4cHJlc3Npb24sXG4vLyBjb25uZWN0cyxcbi8vIG9ic2VydmVzLFxuLy8gY2FsbHNGdW5jdGlvbixcbi8vIGhhc0FuY2VzdG9yLFxuLy8gaXNBc3NpZ25hYmxlLFxuLy8gaXNMZWZ0SGFuZFNpZGUsXG4vLyBpc1ByaW1hcnksXG4vLyBpc1Jlc291cmNlLFxuLy8gaGFzQmluZCxcbi8vIGhhc1VuYmluZCxcbi8vIGlzTGl0ZXJhbCxcbi8vIGFyZVB1cmVMaXRlcmFscyxcbi8vIGlzUHVyZUxpdGVyYWwsXG4vLyBDdXN0b21FeHByZXNzaW9uLFxuLy8gQmluZGluZ0JlaGF2aW9yRXhwcmVzc2lvbixcbi8vIFZhbHVlQ29udmVydGVyRXhwcmVzc2lvbixcbi8vIEFzc2lnbkV4cHJlc3Npb24sXG4vLyBDb25kaXRpb25hbEV4cHJlc3Npb24sXG4vLyBBY2Nlc3NUaGlzRXhwcmVzc2lvbixcbi8vIEFjY2Vzc1Njb3BlRXhwcmVzc2lvbixcbi8vIEFjY2Vzc01lbWJlckV4cHJlc3Npb24sXG4vLyBBY2Nlc3NLZXllZEV4cHJlc3Npb24sXG4vLyBDYWxsU2NvcGVFeHByZXNzaW9uLFxuLy8gQ2FsbE1lbWJlckV4cHJlc3Npb24sXG4vLyBCaW5hcnlFeHByZXNzaW9uLFxuLy8gVW5hcnlFeHByZXNzaW9uLFxuLy8gUHJpbWl0aXZlTGl0ZXJhbEV4cHJlc3Npb24sXG4vLyBIdG1sTGl0ZXJhbEV4cHJlc3Npb24sXG4vLyBBcnJheUxpdGVyYWxFeHByZXNzaW9uLFxuLy8gT2JqZWN0TGl0ZXJhbEV4cHJlc3Npb24sXG4vLyBUZW1wbGF0ZUV4cHJlc3Npb24sXG4vLyBUYWdnZWRUZW1wbGF0ZUV4cHJlc3Npb24sXG4vLyBBcnJheUJpbmRpbmdQYXR0ZXJuLFxuLy8gT2JqZWN0QmluZGluZ1BhdHRlcm4sXG4vLyBCaW5kaW5nSWRlbnRpZmllcixcbi8vIEZvck9mU3RhdGVtZW50LFxuLy8gSW50ZXJwb2xhdGlvbixcbi8vIEFueUJpbmRpbmdFeHByZXNzaW9uLFxuLy8gSXNQcmltYXJ5LFxuLy8gSXNMaXRlcmFsLFxuLy8gSXNMZWZ0SGFuZFNpZGUsXG4vLyBJc1VuYXJ5LFxuLy8gSXNCaW5hcnksXG4vLyBJc0NvbmRpdGlvbmFsLFxuLy8gSXNBc3NpZ24sXG4vLyBJc1ZhbHVlQ29udmVydGVyLFxuLy8gSXNCaW5kaW5nQmVoYXZpb3IsXG4vLyBJc0Fzc2lnbmFibGUsXG4vLyBJc0V4cHJlc3Npb24sXG4vLyBJc0V4cHJlc3Npb25PclN0YXRlbWVudCxcbi8vIENvbm5lY3RzLFxuLy8gT2JzZXJ2ZXMsXG4vLyBDYWxsc0Z1bmN0aW9uLFxuLy8gSXNSZXNvdXJjZSxcbi8vIEhhc0JpbmQsXG4vLyBIYXNVbmJpbmQsXG4vLyBIYXNBbmNlc3Rvcixcbi8vIElWaXNpdG9yLFxuLy8gSUV4cHJlc3Npb24sXG4vLyBJQWNjZXNzS2V5ZWRFeHByZXNzaW9uLFxuLy8gSUFjY2Vzc01lbWJlckV4cHJlc3Npb24sXG4vLyBJQWNjZXNzU2NvcGVFeHByZXNzaW9uLFxuLy8gSUFjY2Vzc1RoaXNFeHByZXNzaW9uLFxuLy8gSUFycmF5QmluZGluZ1BhdHRlcm4sXG4vLyBJQXJyYXlMaXRlcmFsRXhwcmVzc2lvbixcbi8vIElBc3NpZ25FeHByZXNzaW9uLFxuLy8gSUJpbmFyeUV4cHJlc3Npb24sXG4vLyBJQmluZGluZ0JlaGF2aW9yRXhwcmVzc2lvbixcbi8vIElCaW5kaW5nSWRlbnRpZmllcixcbi8vIElDYWxsRnVuY3Rpb25FeHByZXNzaW9uLFxuLy8gSUNhbGxNZW1iZXJFeHByZXNzaW9uLFxuLy8gSUNhbGxTY29wZUV4cHJlc3Npb24sXG4vLyBJQ29uZGl0aW9uYWxFeHByZXNzaW9uLFxuLy8gSUZvck9mU3RhdGVtZW50LFxuLy8gSUh0bWxMaXRlcmFsRXhwcmVzc2lvbixcbi8vIElJbnRlcnBvbGF0aW9uRXhwcmVzc2lvbixcbi8vIElPYmplY3RCaW5kaW5nUGF0dGVybixcbi8vIElPYmplY3RMaXRlcmFsRXhwcmVzc2lvbixcbi8vIElQcmltaXRpdmVMaXRlcmFsRXhwcmVzc2lvbixcbi8vIElUYWdnZWRUZW1wbGF0ZUV4cHJlc3Npb24sXG4vLyBJVGVtcGxhdGVFeHByZXNzaW9uLFxuLy8gSVVuYXJ5RXhwcmVzc2lvbixcbi8vIElWYWx1ZUNvbnZlcnRlckV4cHJlc3Npb24sXG4vLyBCaW5hcnlPcGVyYXRvcixcbi8vIEJpbmRpbmdJZGVudGlmaWVyT3JQYXR0ZXJuLFxuLy8gVW5hcnlPcGVyYXRvcixcbi8vIFByb3BlcnR5QmluZGluZyxcbi8vIENhbGxCaW5kaW5nLFxuLy8gSVBhcnRpYWxDb25uZWN0YWJsZUJpbmRpbmcsXG4vLyBJQ29ubmVjdGFibGVCaW5kaW5nLFxuLy8gY29ubmVjdGFibGUsXG4vLyBJRXhwcmVzc2lvblBhcnNlcixcbi8vIEJpbmRpbmdUeXBlLFxuLy8gTXVsdGlJbnRlcnBvbGF0aW9uQmluZGluZyxcbi8vIEludGVycG9sYXRpb25CaW5kaW5nLFxuLy8gTGV0QmluZGluZyxcbi8vIFJlZkJpbmRpbmcsXG4vLyBBcnJheU9ic2VydmVyLFxuLy8gZW5hYmxlQXJyYXlPYnNlcnZhdGlvbixcbi8vIGRpc2FibGVBcnJheU9ic2VydmF0aW9uLFxuLy8gYXBwbHlNdXRhdGlvbnNUb0luZGljZXMsXG4vLyBzeW5jaHJvbml6ZUluZGljZXMsXG4vLyBNYXBPYnNlcnZlcixcbi8vIGVuYWJsZU1hcE9ic2VydmF0aW9uLFxuLy8gZGlzYWJsZU1hcE9ic2VydmF0aW9uLFxuLy8gU2V0T2JzZXJ2ZXIsXG4vLyBlbmFibGVTZXRPYnNlcnZhdGlvbixcbi8vIGRpc2FibGVTZXRPYnNlcnZhdGlvbixcbi8vIEJpbmRpbmdDb250ZXh0LFxuLy8gU2NvcGUsXG4vLyBPdmVycmlkZUNvbnRleHQsXG4vLyBDb2xsZWN0aW9uTGVuZ3RoT2JzZXJ2ZXIsXG4vLyBDb2xsZWN0aW9uU2l6ZU9ic2VydmVyLFxuLy8gQ29tcHV0ZWRPdmVycmlkZXMsXG4vLyBDb21wdXRlZExvb2t1cCxcbmNvbXB1dGVkLCBcbi8vIGNyZWF0ZUNvbXB1dGVkT2JzZXJ2ZXIsXG4vLyBDdXN0b21TZXR0ZXJPYnNlcnZlcixcbi8vIEdldHRlck9ic2VydmVyLFxuLy8gSURpcnR5Q2hlY2tlcixcbi8vIERpcnR5Q2hlY2tQcm9wZXJ0eSxcbi8vIERpcnR5Q2hlY2tTZXR0aW5ncyxcbi8vIElPYmplY3RPYnNlcnZhdGlvbkFkYXB0ZXIsXG5JT2JzZXJ2ZXJMb2NhdG9yLCBcbi8vIElUYXJnZXRPYnNlcnZlckxvY2F0b3IsXG4vLyBJVGFyZ2V0QWNjZXNzb3JMb2NhdG9yLFxuLy8gZ2V0Q29sbGVjdGlvbk9ic2VydmVyLFxuLy8gT2JzZXJ2ZXJMb2NhdG9yLFxuLy8gUHJpbWl0aXZlT2JzZXJ2ZXIsXG4vLyBQcm9wZXJ0eUFjY2Vzc29yLFxuLy8gUHJveHlPYnNlcnZlcixcbi8vIEJpbmRhYmxlT2JzZXJ2ZXIsXG4vLyBTZXR0ZXJPYnNlcnZlcixcbklTaWduYWxlciwgc3Vic2NyaWJlckNvbGxlY3Rpb24sIGNvbGxlY3Rpb25TdWJzY3JpYmVyQ29sbGVjdGlvbiwgcHJveHlTdWJzY3JpYmVyQ29sbGVjdGlvbiwgYmluZGluZ0JlaGF2aW9yLCBCaW5kaW5nQmVoYXZpb3IsIFxuLy8gUGFydGlhbEJpbmRpbmdCZWhhdmlvckRlZmluaXRpb24sXG4vLyBCaW5kaW5nQmVoYXZpb3JLaW5kLFxuLy8gQmluZGluZ0JlaGF2aW9yRGVjb3JhdG9yLFxuLy8gQmluZGluZ0JlaGF2aW9ySW5zdGFuY2UsXG4vLyBCaW5kaW5nQmVoYXZpb3JUeXBlLFxuLy8gQmluZGluZ01vZGVCZWhhdmlvcixcbi8vIE9uZVRpbWVCaW5kaW5nQmVoYXZpb3IsXG4vLyBUb1ZpZXdCaW5kaW5nQmVoYXZpb3IsXG4vLyBGcm9tVmlld0JpbmRpbmdCZWhhdmlvcixcbi8vIFR3b1dheUJpbmRpbmdCZWhhdmlvcixcbi8vIERlYm91bmNlQmluZGluZ0JlaGF2aW9yLFxuLy8gU2lnbmFsYWJsZUJpbmRpbmcsXG4vLyBTaWduYWxCaW5kaW5nQmVoYXZpb3IsXG4vLyBUaHJvdHRsZUJpbmRpbmdCZWhhdmlvcixcbmN1c3RvbUF0dHJpYnV0ZSwgXG4vLyBDdXN0b21BdHRyaWJ1dGVEZWNvcmF0b3IsXG5DdXN0b21BdHRyaWJ1dGUsIFxuLy8gQ3VzdG9tQXR0cmlidXRlRGVmaW5pdGlvblxuLy8gQ3VzdG9tQXR0cmlidXRlS2luZCxcbi8vIEN1c3RvbUF0dHJpYnV0ZVR5cGUsXG4vLyBQYXJ0aWFsQ3VzdG9tQXR0cmlidXRlRGVmaW5pdGlvbixcbnRlbXBsYXRlQ29udHJvbGxlciwgXG4vLyBGcmVxdWVudE11dGF0aW9ucyxcbi8vIEluZnJlcXVlbnRNdXRhdGlvbnMsXG4vLyBPYnNlcnZlU2hhbGxvdyxcbi8vIElmLFxuLy8gRWxzZSxcbi8vIFJlcGVhdCxcbi8vIFJlcGxhY2VhYmxlLFxuLy8gV2l0aCxcbmNvbnRhaW5lcmxlc3MsIGN1c3RvbUVsZW1lbnQsIEN1c3RvbUVsZW1lbnQsIFxuLy8gQ3VzdG9tRWxlbWVudERlY29yYXRvcixcbi8vIEN1c3RvbUVsZW1lbnRLaW5kLFxuLy8gQ3VzdG9tRWxlbWVudFR5cGUsXG4vLyBDdXN0b21FbGVtZW50RGVmaW5pdGlvbixcbi8vIFBhcnRpYWxDdXN0b21FbGVtZW50RGVmaW5pdGlvbixcbi8vIElFbGVtZW50UHJvamVjdG9yLFxuLy8gSVByb2plY3RvckxvY2F0b3IsXG51c2VTaGFkb3dET00sIFZhbHVlQ29udmVydGVyLCBcbi8vIFZhbHVlQ29udmVydGVyVHlwZSxcbnZhbHVlQ29udmVydGVyLCBcbi8vIElTYW5pdGl6ZXIsXG4vLyBTYW5pdGl6ZVZhbHVlQ29udmVydGVyLFxuLy8gVmlld1ZhbHVlQ29udmVydGVyLFxuLy8gQ2xvY2ssXG4vLyBJQ2xvY2ssXG4vLyBJQ2xvY2tTZXR0aW5ncyxcbklTY2hlZHVsZXIsIFxuLy8gSVRhc2ssXG4vLyBJVGFza1F1ZXVlLFxuLy8gUXVldWVUYXNrT3B0aW9ucyxcbi8vIFRhc2ssXG4vLyBUYXNrQWJvcnRFcnJvcixcbi8vIFRhc2tDYWxsYmFjayxcbi8vIFRhc2tRdWV1ZSxcblRhc2tRdWV1ZVByaW9yaXR5LCBcbi8vIFRhc2tTdGF0dXMsXG4vLyBRdWV1ZVRhc2tUYXJnZXRPcHRpb25zLFxuYmluZGFibGUsIFxuLy8gUGFydGlhbEJpbmRhYmxlRGVmaW5pdGlvbixcbi8vIEJpbmRhYmxlRGVmaW5pdGlvbixcbkJpbmRhYmxlLCBcbi8vIFBhcnRpYWxDaGlsZHJlbkRlZmluaXRpb24sXG4vLyBDaGlsZHJlbkRlZmluaXRpb24sXG4vLyBDaGlsZHJlbixcbmNoaWxkcmVuLCBcbi8vIFRoZXNlIGV4cG9ydHMgYXJlIHRlbXBvcmFyeSB1bnRpbCB3ZSBoYXZlIGEgcHJvcGVyIHdheSB0byB1bml0IHRlc3QgdGhlbVxuQ29udHJvbGxlciwgVmlld0ZhY3RvcnksIFxuLy8gSVZpZXdMb2NhdG9yLFxuLy8gVmlld0xvY2F0b3IsXG4vLyB2aWV3LFxuLy8gVmlld3MsXG4vLyBBdXJlbGlhLCAvLyBSZXBsYWNlZCBieSBxdWljay1zdGFydCB3cmFwcGVyXG4vLyBJRE9NSW5pdGlhbGl6ZXIsXG4vLyBJU2luZ2xlUGFnZUFwcCxcbkNvbXBvc2l0aW9uUm9vdCwgXG4vLyBJZlJlZ2lzdHJhdGlvbixcbi8vIEVsc2VSZWdpc3RyYXRpb24sXG4vLyBSZXBlYXRSZWdpc3RyYXRpb24sXG4vLyBSZXBsYWNlYWJsZVJlZ2lzdHJhdGlvbixcbi8vIFdpdGhSZWdpc3RyYXRpb24sXG4vLyBTYW5pdGl6ZVZhbHVlQ29udmVydGVyUmVnaXN0cmF0aW9uLFxuLy8gRGVib3VuY2VCaW5kaW5nQmVoYXZpb3JSZWdpc3RyYXRpb24sXG4vLyBPbmVUaW1lQmluZGluZ0JlaGF2aW9yUmVnaXN0cmF0aW9uLFxuLy8gVG9WaWV3QmluZGluZ0JlaGF2aW9yUmVnaXN0cmF0aW9uLFxuLy8gRnJvbVZpZXdCaW5kaW5nQmVoYXZpb3JSZWdpc3RyYXRpb24sXG4vLyBTaWduYWxCaW5kaW5nQmVoYXZpb3JSZWdpc3RyYXRpb24sXG4vLyBUaHJvdHRsZUJpbmRpbmdCZWhhdmlvclJlZ2lzdHJhdGlvbixcbi8vIFR3b1dheUJpbmRpbmdCZWhhdmlvclJlZ2lzdHJhdGlvbixcbi8vIFJlZkJpbmRpbmdSZW5kZXJlclJlZ2lzdHJhdGlvbixcbi8vIENhbGxCaW5kaW5nUmVuZGVyZXJSZWdpc3RyYXRpb24sXG4vLyBDdXN0b21BdHRyaWJ1dGVSZW5kZXJlclJlZ2lzdHJhdGlvbixcbi8vIEN1c3RvbUVsZW1lbnRSZW5kZXJlclJlZ2lzdHJhdGlvbixcbi8vIEludGVycG9sYXRpb25CaW5kaW5nUmVuZGVyZXJSZWdpc3RyYXRpb24sXG4vLyBJdGVyYXRvckJpbmRpbmdSZW5kZXJlclJlZ2lzdHJhdGlvbixcbi8vIExldEVsZW1lbnRSZW5kZXJlclJlZ2lzdHJhdGlvbixcbi8vIFByb3BlcnR5QmluZGluZ1JlbmRlcmVyUmVnaXN0cmF0aW9uLFxuLy8gU2V0UHJvcGVydHlSZW5kZXJlclJlZ2lzdHJhdGlvbixcbi8vIFRlbXBsYXRlQ29udHJvbGxlclJlbmRlcmVyUmVnaXN0cmF0aW9uLFxuLy8gRGVmYXVsdFJlc291cmNlcyBhcyBSdW50aW1lRGVmYXVsdFJlc291cmNlcyxcbi8vIElPYnNlcnZlckxvY2F0b3JSZWdpc3RyYXRpb24sXG4vLyBJTGlmZWN5Y2xlUmVnaXN0cmF0aW9uLFxuLy8gSVJlbmRlcmVyUmVnaXN0cmF0aW9uLFxuLy8gUnVudGltZUNvbmZpZ3VyYXRpb24sXG4vLyBBdHRyaWJ1dGVJbnN0cnVjdGlvbixcbi8vIEhvb2tzRGVmaW5pdGlvbixcbi8vIElDYWxsQmluZGluZ0luc3RydWN0aW9uLFxuLy8gSUh5ZHJhdGVBdHRyaWJ1dGVJbnN0cnVjdGlvbixcbi8vIElIeWRyYXRlRWxlbWVudEluc3RydWN0aW9uLFxuLy8gSUh5ZHJhdGVMZXRFbGVtZW50SW5zdHJ1Y3Rpb24sXG4vLyBJSHlkcmF0ZVRlbXBsYXRlQ29udHJvbGxlcixcbi8vIElJbnRlcnBvbGF0aW9uSW5zdHJ1Y3Rpb24sXG4vLyBJSXRlcmF0b3JCaW5kaW5nSW5zdHJ1Y3Rpb24sXG4vLyBJTGV0QmluZGluZ0luc3RydWN0aW9uLFxuLy8gSW5zdHJ1Y3Rpb25Sb3csXG4vLyBJbnN0cnVjdGlvblR5cGVOYW1lLFxuLy8gSVByb3BlcnR5QmluZGluZ0luc3RydWN0aW9uLFxuLy8gSVJlZkJpbmRpbmdJbnN0cnVjdGlvbixcbi8vIElTZXRQcm9wZXJ0eUluc3RydWN0aW9uLFxuLy8gaXNUYXJnZXRlZEluc3RydWN0aW9uLFxuLy8gSVRhcmdldGVkSW5zdHJ1Y3Rpb24sXG4vLyBOb2RlSW5zdHJ1Y3Rpb24sXG4vLyBUYXJnZXRlZEluc3RydWN0aW9uLFxuLy8gVGFyZ2V0ZWRJbnN0cnVjdGlvblR5cGUsXG4vLyBQYXJ0aWFsQ3VzdG9tRWxlbWVudERlZmluaXRpb25QYXJ0cyxcbmFsaWFzLCByZWdpc3RlckFsaWFzZXMsIFxuLy8gRE9NLCBzaG91bGQgZXhwb3NlIHRoZSBvbmUgZXhwb3J0ZWQgaW4gcnVudGltZS1odG1sXG5JTm9kZSwgSVJlbmRlckxvY2F0aW9uLCBJRE9NLCBcbi8vIE5vZGVTZXF1ZW5jZSxcbi8vIElOb2RlU2VxdWVuY2UsXG4vLyBJTm9kZVNlcXVlbmNlRmFjdG9yeSxcbkJpbmRpbmdNb2RlLCBCaW5kaW5nU3RyYXRlZ3ksIFxuLy8gRXhwcmVzc2lvbktpbmQsXG4vLyBIb29rcyxcbkxpZmVjeWNsZUZsYWdzLCBcbi8vIFN0YXRlLFxuLy8gQ2FsbEJpbmRpbmdJbnN0cnVjdGlvbixcbi8vIEZyb21WaWV3QmluZGluZ0luc3RydWN0aW9uLFxuLy8gSHlkcmF0ZUF0dHJpYnV0ZUluc3RydWN0aW9uLFxuLy8gSHlkcmF0ZUVsZW1lbnRJbnN0cnVjdGlvbixcbi8vIEh5ZHJhdGVUZW1wbGF0ZUNvbnRyb2xsZXIsXG4vLyBJbnRlcnBvbGF0aW9uSW5zdHJ1Y3Rpb24sXG4vLyBJdGVyYXRvckJpbmRpbmdJbnN0cnVjdGlvbixcbi8vIExldEJpbmRpbmdJbnN0cnVjdGlvbixcbi8vIExldEVsZW1lbnRJbnN0cnVjdGlvbixcbi8vIE9uZVRpbWVCaW5kaW5nSW5zdHJ1Y3Rpb24sXG4vLyBSZWZCaW5kaW5nSW5zdHJ1Y3Rpb24sXG4vLyBTZXRQcm9wZXJ0eUluc3RydWN0aW9uLFxuLy8gVG9WaWV3QmluZGluZ0luc3RydWN0aW9uLFxuLy8gVHdvV2F5QmluZGluZ0luc3RydWN0aW9uLFxuLy8gVmlld01vZGVsS2luZCxcbi8vIElCaW5kaW5nLFxuSUxpZmVjeWNsZSwgXG4vLyBJQ29udHJvbGxlcixcbi8vIElDb250YWluZXIsXG4vLyBJVmlld0NhY2hlLFxuLy8gSVZpZXdGYWN0b3J5LFxuLy8gTW91bnRTdHJhdGVneSxcbi8vIFByb21pc2VPclRhc2ssXG4vLyBNYXliZVByb21pc2VPclRhc2ssXG5BZ2dyZWdhdGVDb250aW51YXRpb25UYXNrLCBUZXJtaW5hbFRhc2ssIEFnZ3JlZ2F0ZVRlcm1pbmFsVGFzaywgQ29udGludWF0aW9uVGFzaywgTGlmZWN5Y2xlVGFzaywgUHJvbWlzZVRhc2ssIFRhc2tTbG90LCBTdGFydFRhc2ssIElTdGFydFRhc2ssIElTdGFydFRhc2tNYW5hZ2VyLCBQcm92aWRlclRhc2ssIFxuLy8gSU9ic2VydmFibGUsXG4vLyBJT2JzZXJ2ZWRBcnJheSxcbi8vIElPYnNlcnZlZE1hcCxcbi8vIElPYnNlcnZlZFNldCxcbi8vIElPdmVycmlkZUNvbnRleHQsXG4vLyBJUHJvcGVydHlDaGFuZ2VUcmFja2VyLFxuLy8gSVByb3BlcnR5T2JzZXJ2ZXIsXG4vLyBJU2NvcGUsXG4vLyBJU3Vic2NyaWJhYmxlLFxuLy8gSVN1YnNjcmliZXJDb2xsZWN0aW9uLFxuLy8gT2JzZXJ2ZWRDb2xsZWN0aW9uLFxuLy8gT2JzZXJ2ZXJzTG9va3VwLFxuLy8gUHJvcGVydHlPYnNlcnZlcixcbi8vIENvbGxlY3Rpb25PYnNlcnZlcixcbi8vIElDb2xsZWN0aW9uU3Vic2NyaWJlckNvbGxlY3Rpb24sXG4vLyBJUHJveHlPYnNlcnZlcixcbi8vIElQcm94eSxcbi8vIElQcm94eVN1YnNjcmliYWJsZSxcbi8vIElQcm94eVN1YnNjcmliZXIsXG4vLyBJUHJveHlTdWJzY3JpYmVyQ29sbGVjdGlvbixcbi8vIElDb2xsZWN0aW9uU3Vic2NyaWJhYmxlLFxuLy8gSVN1YnNjcmliZXIsXG4vLyBpc0luZGV4TWFwLFxuLy8gY29weUluZGV4TWFwLFxuLy8gY2xvbmVJbmRleE1hcCxcbi8vIGNyZWF0ZUluZGV4TWFwLFxuaW5zdHJ1Y3Rpb25SZW5kZXJlciwgZW5zdXJlRXhwcmVzc2lvbiwgfSBmcm9tICdAYXVyZWxpYS9ydW50aW1lJztcbmV4cG9ydCB7IFxuLy8gTGlzdGVuZXIsXG4vLyBBdHRyaWJ1dGVCaW5kaW5nLFxuLy8gQXR0cmlidXRlTlNBY2Nlc3Nvcixcbi8vIElJbnB1dEVsZW1lbnQsXG4vLyBDaGVja2VkT2JzZXJ2ZXIsXG4vLyBDbGFzc0F0dHJpYnV0ZUFjY2Vzc29yLFxuLy8gRGF0YUF0dHJpYnV0ZUFjY2Vzc29yLFxuLy8gRWxlbWVudFByb3BlcnR5QWNjZXNzb3IsXG4vLyBJTWFuYWdlZEV2ZW50LFxuLy8gTGlzdGVuZXJUcmFja2VyLFxuLy8gRGVsZWdhdGVPckNhcHR1cmVTdWJzY3JpcHRpb24sXG4vLyBUcmlnZ2VyU3Vic2NyaXB0aW9uLFxuLy8gSUVsZW1lbnRDb25maWd1cmF0aW9uLFxuLy8gSUV2ZW50TWFuYWdlcixcbi8vIElFdmVudFN1YnNjcmliZXIsXG4vLyBJRXZlbnRUYXJnZXRXaXRoTG9va3Vwcyxcbi8vIEV2ZW50U3Vic2NyaWJlcixcbi8vIEV2ZW50U3Vic2NyaXB0aW9uLFxuLy8gRXZlbnRNYW5hZ2VyLFxuLy8gVGFyZ2V0QWNjZXNzb3JMb2NhdG9yLFxuLy8gVGFyZ2V0T2JzZXJ2ZXJMb2NhdG9yLFxuLy8gSVNlbGVjdEVsZW1lbnQsXG4vLyBJT3B0aW9uRWxlbWVudCxcbi8vIFNlbGVjdFZhbHVlT2JzZXJ2ZXIsXG4vLyBTdHlsZUF0dHJpYnV0ZUFjY2Vzc29yLFxuLy8gSVNWR0FuYWx5emVyLFxuLy8gVmFsdWVBdHRyaWJ1dGVPYnNlcnZlcixcbi8vIEF0dHJCaW5kaW5nQmVoYXZpb3IsXG4vLyBTZWxmYWJsZUJpbmRpbmcsXG4vLyBTZWxmQmluZGluZ0JlaGF2aW9yLFxuLy8gVXBkYXRlVHJpZ2dlckJpbmRpbmdCZWhhdmlvcixcbi8vIFVwZGF0ZVRyaWdnZXJhYmxlQmluZGluZyxcbi8vIFVwZGF0ZVRyaWdnZXJhYmxlT2JzZXJ2ZXIsXG4vLyBCbHVyLFxuLy8gQmx1ck1hbmFnZXIsXG4vLyBGb2N1cyxcbi8vIFBvcnRhbCxcbi8vIFBvcnRhbFRhcmdldCxcbi8vIFBvcnRhbExpZmVjeWNsZUNhbGxiYWNrLFxuLy8gU3ViamVjdCxcbi8vIENvbXBvc2UsXG4vLyBJUHJvamVjdG9yTG9jYXRvclJlZ2lzdHJhdGlvbixcbi8vIElUYXJnZXRBY2Nlc3NvckxvY2F0b3JSZWdpc3RyYXRpb24sXG4vLyBJVGFyZ2V0T2JzZXJ2ZXJMb2NhdG9yUmVnaXN0cmF0aW9uLFxuLy8gSVRlbXBsYXRlRmFjdG9yeVJlZ2lzdHJhdGlvbixcbi8vIERlZmF1bHRDb21wb25lbnRzIGFzIFJ1bnRpbWVIdG1sRGVmYXVsdENvbXBvbmVudHMsXG4vLyBBdHRyQmluZGluZ0JlaGF2aW9yUmVnaXN0cmF0aW9uLFxuLy8gU2VsZkJpbmRpbmdCZWhhdmlvclJlZ2lzdHJhdGlvbixcbi8vIFVwZGF0ZVRyaWdnZXJCaW5kaW5nQmVoYXZpb3JSZWdpc3RyYXRpb24sXG4vLyBDb21wb3NlUmVnaXN0cmF0aW9uLFxuLy8gRGVmYXVsdFJlc291cmNlcyBhcyBSdW50aW1lSHRtbERlZmF1bHRSZXNvdXJjZXMsXG4vLyBBdHRyaWJ1dGVCaW5kaW5nUmVuZGVyZXJSZWdpc3RyYXRpb24sXG4vLyBMaXN0ZW5lckJpbmRpbmdSZW5kZXJlclJlZ2lzdHJhdGlvbixcbi8vIFNldEF0dHJpYnV0ZVJlbmRlcmVyUmVnaXN0cmF0aW9uLFxuLy8gU2V0Q2xhc3NBdHRyaWJ1dGVSZW5kZXJlclJlZ2lzdHJhdGlvbixcbi8vIFNldFN0eWxlQXR0cmlidXRlUmVuZGVyZXJSZWdpc3RyYXRpb24sXG4vLyBTdHlsZVByb3BlcnR5QmluZGluZ1JlbmRlcmVyUmVnaXN0cmF0aW9uLFxuLy8gVGV4dEJpbmRpbmdSZW5kZXJlclJlZ2lzdHJhdGlvbixcbi8vIERlZmF1bHRSZW5kZXJlcnMsXG4vLyBSdW50aW1lSHRtbENvbmZpZ3VyYXRpb24sXG5jcmVhdGVFbGVtZW50LCBcbi8vIFJlbmRlclBsYW4sXG4vLyBIVE1MQXR0cmlidXRlSW5zdHJ1Y3Rpb24sXG4vLyBIVE1MSW5zdHJ1Y3Rpb25Sb3csXG4vLyBIVE1MTm9kZUluc3RydWN0aW9uLFxuLy8gSFRNTFRhcmdldGVkSW5zdHJ1Y3Rpb24sXG4vLyBIVE1MVGFyZ2V0ZWRJbnN0cnVjdGlvblR5cGUsXG4vLyBJQXR0cmlidXRlQmluZGluZ0luc3RydWN0aW9uLFxuLy8gSUxpc3RlbmVyQmluZGluZ0luc3RydWN0aW9uLFxuLy8gSVNldEF0dHJpYnV0ZUluc3RydWN0aW9uLFxuLy8gaXNIVE1MVGFyZ2V0ZWRJbnN0cnVjdGlvbixcbi8vIElTdHlsZVByb3BlcnR5QmluZGluZ0luc3RydWN0aW9uLFxuLy8gSVRleHRCaW5kaW5nSW5zdHJ1Y3Rpb24sXG4vLyBOb2RlVHlwZSxcbkhUTUxET00sIERPTSwgLy8gb24gdG9wIG9mIERPTSBpbiBAYXVyZWxpYS9ydW50aW1lXG4vLyBOb2RlU2VxdWVuY2VGYWN0b3J5LFxuLy8gRnJhZ21lbnROb2RlU2VxdWVuY2UsXG4vLyBBdHRyaWJ1dGVCaW5kaW5nSW5zdHJ1Y3Rpb24sXG4vLyBDYXB0dXJlQmluZGluZ0luc3RydWN0aW9uLFxuLy8gRGVsZWdhdGVCaW5kaW5nSW5zdHJ1Y3Rpb24sXG4vLyBTZXRBdHRyaWJ1dGVJbnN0cnVjdGlvbixcbi8vIFNldENsYXNzQXR0cmlidXRlSW5zdHJ1Y3Rpb24sXG4vLyBTZXRTdHlsZUF0dHJpYnV0ZUluc3RydWN0aW9uLFxuLy8gU3R5bGVQcm9wZXJ0eUJpbmRpbmdJbnN0cnVjdGlvbixcbi8vIFRleHRCaW5kaW5nSW5zdHJ1Y3Rpb24sXG4vLyBUcmlnZ2VyQmluZGluZ0luc3RydWN0aW9uLFxuLy8gQ29udGFpbmVybGVzc1Byb2plY3Rvcixcbi8vIEhvc3RQcm9qZWN0b3IsXG4vLyBIVE1MUHJvamVjdG9yTG9jYXRvcixcbi8vIFNoYWRvd0RPTVByb2plY3RvcixcblN0eWxlQ29uZmlndXJhdGlvbiwgXG4vLyBDU1NNb2R1bGVzUHJvY2Vzc29yUmVnaXN0cnksXG5jc3NNb2R1bGVzLCBcbi8vIFNoYWRvd0RPTVJlZ2lzdHJ5LFxuLy8gSVNoYWRvd0RPTVN0eWxlRmFjdG9yeSxcbnNoYWRvd0NTUywgfSBmcm9tICdAYXVyZWxpYS9ydW50aW1lLWh0bWwnO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIiwiaW1wb3J0IHsgRGVidWdDb25maWd1cmF0aW9uIH0gZnJvbSAnQGF1cmVsaWEvZGVidWcnO1xuaW1wb3J0IHsgSml0SHRtbEJyb3dzZXJDb25maWd1cmF0aW9uIH0gZnJvbSAnQGF1cmVsaWEvaml0LWh0bWwtYnJvd3Nlcic7XG5pbXBvcnQgeyBESSB9IGZyb20gJ0BhdXJlbGlhL2tlcm5lbCc7XG5pbXBvcnQgeyBBdXJlbGlhIGFzICRBdXJlbGlhLCBDdXN0b21FbGVtZW50IH0gZnJvbSAnQGF1cmVsaWEvcnVudGltZSc7XG4vLyBUT0RPOiBTU1I/PyBhYnN0cmFjdCBIVE1MRWxlbWVudCBhbmQgZG9jdW1lbnQuXG5mdW5jdGlvbiBjcmVhdGVBdXJlbGlhKCkge1xuICAgIGNvbnN0IGF1ID0gbmV3IEF1cmVsaWEoKTtcbiAgICBhdS5yZWdpc3RlcihKaXRIdG1sQnJvd3NlckNvbmZpZ3VyYXRpb24pO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBzb25hcmpzL25vLWNvbGxhcHNpYmxlLWlmXG4gICAgaWYgKHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgcHJvY2Vzcy5lbnYgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIC8vIEp1c3QgdXNlIE5PREVfRU5WIHRvIGNvbnRyb2wgYnVpbGQgcHJvY2Vzcy5cbiAgICAgICAgLy8gQnVuZGxlcnMgKGF0IGxlYXN0IHdlYnBhY2svZHVtYmVyL3BhcmNlbCkgaGF2ZSBmZWF0dXJlIHRvIHJlbW92ZSB0aGlzIGJyYW5jaCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICAvLyBUaGVuIHRyZWUtc2hha2luZy9taW5pZmllciB3aWxsIHJlbW92ZSB1bnVzZWQgRGVidWdDb25maWd1cmF0aW9uIGltcG9ydC5cbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICAgIGF1LnJlZ2lzdGVyKERlYnVnQ29uZmlndXJhdGlvbik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGF1O1xufVxuZXhwb3J0IGNsYXNzIEF1cmVsaWEgZXh0ZW5kcyAkQXVyZWxpYSB7XG4gICAgY29uc3RydWN0b3IoY29udGFpbmVyID0gREkuY3JlYXRlQ29udGFpbmVyKCkpIHtcbiAgICAgICAgc3VwZXIoY29udGFpbmVyKTtcbiAgICB9XG4gICAgc3RhdGljIHN0YXJ0KHJvb3QpIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUF1cmVsaWEoKS5zdGFydChyb290KTtcbiAgICB9XG4gICAgc3RhdGljIGFwcChjb25maWcpIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUF1cmVsaWEoKS5hcHAoY29uZmlnKTtcbiAgICB9XG4gICAgc3RhdGljIHJlZ2lzdGVyKC4uLnBhcmFtcykge1xuICAgICAgICByZXR1cm4gY3JlYXRlQXVyZWxpYSgpLnJlZ2lzdGVyKC4uLnBhcmFtcyk7XG4gICAgfVxuICAgIGFwcChjb25maWcpIHtcbiAgICAgICAgaWYgKEN1c3RvbUVsZW1lbnQuaXNUeXBlKGNvbmZpZykpIHtcbiAgICAgICAgICAgIC8vIERlZmF1bHQgdG8gY3VzdG9tIGVsZW1lbnQgZWxlbWVudCBuYW1lXG4gICAgICAgICAgICBjb25zdCBkZWZpbml0aW9uID0gQ3VzdG9tRWxlbWVudC5nZXREZWZpbml0aW9uKGNvbmZpZyk7XG4gICAgICAgICAgICBsZXQgaG9zdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZGVmaW5pdGlvbi5uYW1lKTtcbiAgICAgICAgICAgIGlmIChob3N0ID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgLy8gV2hlbiBubyB0YXJnZXQgaXMgZm91bmQsIGRlZmF1bHQgdG8gYm9keS5cbiAgICAgICAgICAgICAgICAvLyBGb3IgZXhhbXBsZSwgd2hlbiB1c2VyIGZvcmdvdCB0byB3cml0ZSA8bXktYXBwPjwvbXktYXBwPiBpbiBodG1sLlxuICAgICAgICAgICAgICAgIGhvc3QgPSBkb2N1bWVudC5ib2R5O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHN1cGVyLmFwcCh7XG4gICAgICAgICAgICAgICAgaG9zdDogaG9zdCxcbiAgICAgICAgICAgICAgICBjb21wb25lbnQ6IGNvbmZpZ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN1cGVyLmFwcChjb25maWcpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXF1aWNrLXN0YXJ0LmpzLm1hcCIsIi8vIEltcG9ydHNcbnZhciBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18gPSByZXF1aXJlKFwiLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qc1wiKTtcbmV4cG9ydHMgPSBfX19DU1NfTE9BREVSX0FQSV9JTVBPUlRfX18oZmFsc2UpO1xuLy8gTW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIubWVzc2FnZSB7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiBsaWdodGJsdWU7XFxufVwiLCBcIlwiXSk7XG4vLyBFeHBvcnRzXG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHM7XG4iLCJcInVzZSBzdHJpY3RcIjtcblxuLypcbiAgTUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcbiAgQXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxuKi9cbi8vIGNzcyBiYXNlIGNvZGUsIGluamVjdGVkIGJ5IHRoZSBjc3MtbG9hZGVyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAodXNlU291cmNlTWFwKSB7XG4gIHZhciBsaXN0ID0gW107IC8vIHJldHVybiB0aGUgbGlzdCBvZiBtb2R1bGVzIGFzIGNzcyBzdHJpbmdcblxuICBsaXN0LnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICB2YXIgY29udGVudCA9IGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcoaXRlbSwgdXNlU291cmNlTWFwKTtcblxuICAgICAgaWYgKGl0ZW1bMl0pIHtcbiAgICAgICAgcmV0dXJuIFwiQG1lZGlhIFwiLmNvbmNhdChpdGVtWzJdLCBcIiB7XCIpLmNvbmNhdChjb250ZW50LCBcIn1cIik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjb250ZW50O1xuICAgIH0pLmpvaW4oJycpO1xuICB9OyAvLyBpbXBvcnQgYSBsaXN0IG9mIG1vZHVsZXMgaW50byB0aGUgbGlzdFxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xuXG5cbiAgbGlzdC5pID0gZnVuY3Rpb24gKG1vZHVsZXMsIG1lZGlhUXVlcnksIGRlZHVwZSkge1xuICAgIGlmICh0eXBlb2YgbW9kdWxlcyA9PT0gJ3N0cmluZycpIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgbW9kdWxlcyA9IFtbbnVsbCwgbW9kdWxlcywgJyddXTtcbiAgICB9XG5cbiAgICB2YXIgYWxyZWFkeUltcG9ydGVkTW9kdWxlcyA9IHt9O1xuXG4gICAgaWYgKGRlZHVwZSkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItZGVzdHJ1Y3R1cmluZ1xuICAgICAgICB2YXIgaWQgPSB0aGlzW2ldWzBdO1xuXG4gICAgICAgIGlmIChpZCAhPSBudWxsKSB7XG4gICAgICAgICAgYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpZF0gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IG1vZHVsZXMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICB2YXIgaXRlbSA9IFtdLmNvbmNhdChtb2R1bGVzW19pXSk7XG5cbiAgICAgIGlmIChkZWR1cGUgJiYgYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpdGVtWzBdXSkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29udGludWVcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChtZWRpYVF1ZXJ5KSB7XG4gICAgICAgIGlmICghaXRlbVsyXSkge1xuICAgICAgICAgIGl0ZW1bMl0gPSBtZWRpYVF1ZXJ5O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGl0ZW1bMl0gPSBcIlwiLmNvbmNhdChtZWRpYVF1ZXJ5LCBcIiBhbmQgXCIpLmNvbmNhdChpdGVtWzJdKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBsaXN0LnB1c2goaXRlbSk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBsaXN0O1xufTtcblxuZnVuY3Rpb24gY3NzV2l0aE1hcHBpbmdUb1N0cmluZyhpdGVtLCB1c2VTb3VyY2VNYXApIHtcbiAgdmFyIGNvbnRlbnQgPSBpdGVtWzFdIHx8ICcnOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLWRlc3RydWN0dXJpbmdcblxuICB2YXIgY3NzTWFwcGluZyA9IGl0ZW1bM107XG5cbiAgaWYgKCFjc3NNYXBwaW5nKSB7XG4gICAgcmV0dXJuIGNvbnRlbnQ7XG4gIH1cblxuICBpZiAodXNlU291cmNlTWFwICYmIHR5cGVvZiBidG9hID09PSAnZnVuY3Rpb24nKSB7XG4gICAgdmFyIHNvdXJjZU1hcHBpbmcgPSB0b0NvbW1lbnQoY3NzTWFwcGluZyk7XG4gICAgdmFyIHNvdXJjZVVSTHMgPSBjc3NNYXBwaW5nLnNvdXJjZXMubWFwKGZ1bmN0aW9uIChzb3VyY2UpIHtcbiAgICAgIHJldHVybiBcIi8qIyBzb3VyY2VVUkw9XCIuY29uY2F0KGNzc01hcHBpbmcuc291cmNlUm9vdCB8fCAnJykuY29uY2F0KHNvdXJjZSwgXCIgKi9cIik7XG4gICAgfSk7XG4gICAgcmV0dXJuIFtjb250ZW50XS5jb25jYXQoc291cmNlVVJMcykuY29uY2F0KFtzb3VyY2VNYXBwaW5nXSkuam9pbignXFxuJyk7XG4gIH1cblxuICByZXR1cm4gW2NvbnRlbnRdLmpvaW4oJ1xcbicpO1xufSAvLyBBZGFwdGVkIGZyb20gY29udmVydC1zb3VyY2UtbWFwIChNSVQpXG5cblxuZnVuY3Rpb24gdG9Db21tZW50KHNvdXJjZU1hcCkge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcbiAgdmFyIGJhc2U2NCA9IGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHNvdXJjZU1hcCkpKSk7XG4gIHZhciBkYXRhID0gXCJzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxcIi5jb25jYXQoYmFzZTY0KTtcbiAgcmV0dXJuIFwiLyojIFwiLmNvbmNhdChkYXRhLCBcIiAqL1wiKTtcbn0iLCIvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblxuLy8gY2FjaGVkIGZyb20gd2hhdGV2ZXIgZ2xvYmFsIGlzIHByZXNlbnQgc28gdGhhdCB0ZXN0IHJ1bm5lcnMgdGhhdCBzdHViIGl0XG4vLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcbi8vIHdyYXBwZWQgaW4gc3RyaWN0IG1vZGUgY29kZSB3aGljaCBkb2Vzbid0IGRlZmluZSBhbnkgZ2xvYmFscy4gIEl0J3MgaW5zaWRlIGFcbi8vIGZ1bmN0aW9uIGJlY2F1c2UgdHJ5L2NhdGNoZXMgZGVvcHRpbWl6ZSBpbiBjZXJ0YWluIGVuZ2luZXMuXG5cbnZhciBjYWNoZWRTZXRUaW1lb3V0O1xudmFyIGNhY2hlZENsZWFyVGltZW91dDtcblxuZnVuY3Rpb24gZGVmYXVsdFNldFRpbW91dCgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRDbGVhclRpbWVvdXQgKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG4oZnVuY3Rpb24gKCkge1xuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2xlYXJUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgIH1cbn0gKCkpXG5mdW5jdGlvbiBydW5UaW1lb3V0KGZ1bikge1xuICAgIGlmIChjYWNoZWRTZXRUaW1lb3V0ID09PSBzZXRUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICAvLyBpZiBzZXRUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkU2V0VGltZW91dCA9PT0gZGVmYXVsdFNldFRpbW91dCB8fCAhY2FjaGVkU2V0VGltZW91dCkgJiYgc2V0VGltZW91dCkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dChmdW4sIDApO1xuICAgIH0gY2F0Y2goZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwobnVsbCwgZnVuLCAwKTtcbiAgICAgICAgfSBjYXRjaChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yXG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKHRoaXMsIGZ1biwgMCk7XG4gICAgICAgIH1cbiAgICB9XG5cblxufVxuZnVuY3Rpb24gcnVuQ2xlYXJUaW1lb3V0KG1hcmtlcikge1xuICAgIGlmIChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGNsZWFyVGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICAvLyBpZiBjbGVhclRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGRlZmF1bHRDbGVhclRpbWVvdXQgfHwgIWNhY2hlZENsZWFyVGltZW91dCkgJiYgY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCAgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbChudWxsLCBtYXJrZXIpO1xuICAgICAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yLlxuICAgICAgICAgICAgLy8gU29tZSB2ZXJzaW9ucyBvZiBJLkUuIGhhdmUgZGlmZmVyZW50IHJ1bGVzIGZvciBjbGVhclRpbWVvdXQgdnMgc2V0VGltZW91dFxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsIG1hcmtlcik7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG59XG52YXIgcXVldWUgPSBbXTtcbnZhciBkcmFpbmluZyA9IGZhbHNlO1xudmFyIGN1cnJlbnRRdWV1ZTtcbnZhciBxdWV1ZUluZGV4ID0gLTE7XG5cbmZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcbiAgICBpZiAoIWRyYWluaW5nIHx8ICFjdXJyZW50UXVldWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgIH1cbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICAgIGRyYWluUXVldWUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG4gICAgaWYgKGRyYWluaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRpbWVvdXQgPSBydW5UaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG4gICAgZHJhaW5pbmcgPSB0cnVlO1xuXG4gICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB3aGlsZShsZW4pIHtcbiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG4gICAgICAgIHF1ZXVlID0gW107XG4gICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgfVxuICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBydW5DbGVhclRpbWVvdXQodGltZW91dCk7XG59XG5cbnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcbiAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuICAgICAgICBydW5UaW1lb3V0KGRyYWluUXVldWUpO1xuICAgIH1cbn07XG5cbi8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcbmZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuICAgIHRoaXMuZnVuID0gZnVuO1xuICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbn1cbkl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcbn07XG5wcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xucHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcbnByb2Nlc3MuZW52ID0ge307XG5wcm9jZXNzLmFyZ3YgPSBbXTtcbnByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xucHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxucHJvY2Vzcy5vbiA9IG5vb3A7XG5wcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3Mub25jZSA9IG5vb3A7XG5wcm9jZXNzLm9mZiA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcbnByb2Nlc3MuZW1pdCA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRPbmNlTGlzdGVuZXIgPSBub29wO1xuXG5wcm9jZXNzLmxpc3RlbmVycyA9IGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBbXSB9XG5cbnByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcblxucHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcbnByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5wcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBpc09sZElFID0gZnVuY3Rpb24gaXNPbGRJRSgpIHtcbiAgdmFyIG1lbW87XG4gIHJldHVybiBmdW5jdGlvbiBtZW1vcml6ZSgpIHtcbiAgICBpZiAodHlwZW9mIG1lbW8gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAvLyBUZXN0IGZvciBJRSA8PSA5IGFzIHByb3Bvc2VkIGJ5IEJyb3dzZXJoYWNrc1xuICAgICAgLy8gQHNlZSBodHRwOi8vYnJvd3NlcmhhY2tzLmNvbS8jaGFjay1lNzFkODY5MmY2NTMzNDE3M2ZlZTcxNWMyMjJjYjgwNVxuICAgICAgLy8gVGVzdHMgZm9yIGV4aXN0ZW5jZSBvZiBzdGFuZGFyZCBnbG9iYWxzIGlzIHRvIGFsbG93IHN0eWxlLWxvYWRlclxuICAgICAgLy8gdG8gb3BlcmF0ZSBjb3JyZWN0bHkgaW50byBub24tc3RhbmRhcmQgZW52aXJvbm1lbnRzXG4gICAgICAvLyBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJwYWNrLWNvbnRyaWIvc3R5bGUtbG9hZGVyL2lzc3Vlcy8xNzdcbiAgICAgIG1lbW8gPSBCb29sZWFuKHdpbmRvdyAmJiBkb2N1bWVudCAmJiBkb2N1bWVudC5hbGwgJiYgIXdpbmRvdy5hdG9iKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbWVtbztcbiAgfTtcbn0oKTtcblxudmFyIGdldFRhcmdldCA9IGZ1bmN0aW9uIGdldFRhcmdldCgpIHtcbiAgdmFyIG1lbW8gPSB7fTtcbiAgcmV0dXJuIGZ1bmN0aW9uIG1lbW9yaXplKHRhcmdldCkge1xuICAgIGlmICh0eXBlb2YgbWVtb1t0YXJnZXRdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgdmFyIHN0eWxlVGFyZ2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpOyAvLyBTcGVjaWFsIGNhc2UgdG8gcmV0dXJuIGhlYWQgb2YgaWZyYW1lIGluc3RlYWQgb2YgaWZyYW1lIGl0c2VsZlxuXG4gICAgICBpZiAod2luZG93LkhUTUxJRnJhbWVFbGVtZW50ICYmIHN0eWxlVGFyZ2V0IGluc3RhbmNlb2Ygd2luZG93LkhUTUxJRnJhbWVFbGVtZW50KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gVGhpcyB3aWxsIHRocm93IGFuIGV4Y2VwdGlvbiBpZiBhY2Nlc3MgdG8gaWZyYW1lIGlzIGJsb2NrZWRcbiAgICAgICAgICAvLyBkdWUgdG8gY3Jvc3Mtb3JpZ2luIHJlc3RyaWN0aW9uc1xuICAgICAgICAgIHN0eWxlVGFyZ2V0ID0gc3R5bGVUYXJnZXQuY29udGVudERvY3VtZW50LmhlYWQ7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAvLyBpc3RhbmJ1bCBpZ25vcmUgbmV4dFxuICAgICAgICAgIHN0eWxlVGFyZ2V0ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBtZW1vW3RhcmdldF0gPSBzdHlsZVRhcmdldDtcbiAgICB9XG5cbiAgICByZXR1cm4gbWVtb1t0YXJnZXRdO1xuICB9O1xufSgpO1xuXG52YXIgc3R5bGVzSW5Eb20gPSBbXTtcblxuZnVuY3Rpb24gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcikge1xuICB2YXIgcmVzdWx0ID0gLTE7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZXNJbkRvbS5sZW5ndGg7IGkrKykge1xuICAgIGlmIChzdHlsZXNJbkRvbVtpXS5pZGVudGlmaWVyID09PSBpZGVudGlmaWVyKSB7XG4gICAgICByZXN1bHQgPSBpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gbW9kdWxlc1RvRG9tKGxpc3QsIG9wdGlvbnMpIHtcbiAgdmFyIGlkQ291bnRNYXAgPSB7fTtcbiAgdmFyIGlkZW50aWZpZXJzID0gW107XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGl0ZW0gPSBsaXN0W2ldO1xuICAgIHZhciBpZCA9IG9wdGlvbnMuYmFzZSA/IGl0ZW1bMF0gKyBvcHRpb25zLmJhc2UgOiBpdGVtWzBdO1xuICAgIHZhciBjb3VudCA9IGlkQ291bnRNYXBbaWRdIHx8IDA7XG4gICAgdmFyIGlkZW50aWZpZXIgPSBcIlwiLmNvbmNhdChpZCwgXCIgXCIpLmNvbmNhdChjb3VudCk7XG4gICAgaWRDb3VudE1hcFtpZF0gPSBjb3VudCArIDE7XG4gICAgdmFyIGluZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcik7XG4gICAgdmFyIG9iaiA9IHtcbiAgICAgIGNzczogaXRlbVsxXSxcbiAgICAgIG1lZGlhOiBpdGVtWzJdLFxuICAgICAgc291cmNlTWFwOiBpdGVtWzNdXG4gICAgfTtcblxuICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgIHN0eWxlc0luRG9tW2luZGV4XS5yZWZlcmVuY2VzKys7XG4gICAgICBzdHlsZXNJbkRvbVtpbmRleF0udXBkYXRlcihvYmopO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHlsZXNJbkRvbS5wdXNoKHtcbiAgICAgICAgaWRlbnRpZmllcjogaWRlbnRpZmllcixcbiAgICAgICAgdXBkYXRlcjogYWRkU3R5bGUob2JqLCBvcHRpb25zKSxcbiAgICAgICAgcmVmZXJlbmNlczogMVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWRlbnRpZmllcnMucHVzaChpZGVudGlmaWVyKTtcbiAgfVxuXG4gIHJldHVybiBpZGVudGlmaWVycztcbn1cblxuZnVuY3Rpb24gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpIHtcbiAgdmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgdmFyIGF0dHJpYnV0ZXMgPSBvcHRpb25zLmF0dHJpYnV0ZXMgfHwge307XG5cbiAgaWYgKHR5cGVvZiBhdHRyaWJ1dGVzLm5vbmNlID09PSAndW5kZWZpbmVkJykge1xuICAgIHZhciBub25jZSA9IHR5cGVvZiBfX3dlYnBhY2tfbm9uY2VfXyAhPT0gJ3VuZGVmaW5lZCcgPyBfX3dlYnBhY2tfbm9uY2VfXyA6IG51bGw7XG5cbiAgICBpZiAobm9uY2UpIHtcbiAgICAgIGF0dHJpYnV0ZXMubm9uY2UgPSBub25jZTtcbiAgICB9XG4gIH1cblxuICBPYmplY3Qua2V5cyhhdHRyaWJ1dGVzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICBzdHlsZS5zZXRBdHRyaWJ1dGUoa2V5LCBhdHRyaWJ1dGVzW2tleV0pO1xuICB9KTtcblxuICBpZiAodHlwZW9mIG9wdGlvbnMuaW5zZXJ0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgb3B0aW9ucy5pbnNlcnQoc3R5bGUpO1xuICB9IGVsc2Uge1xuICAgIHZhciB0YXJnZXQgPSBnZXRUYXJnZXQob3B0aW9ucy5pbnNlcnQgfHwgJ2hlYWQnKTtcblxuICAgIGlmICghdGFyZ2V0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZG4ndCBmaW5kIGEgc3R5bGUgdGFyZ2V0LiBUaGlzIHByb2JhYmx5IG1lYW5zIHRoYXQgdGhlIHZhbHVlIGZvciB0aGUgJ2luc2VydCcgcGFyYW1ldGVyIGlzIGludmFsaWQuXCIpO1xuICAgIH1cblxuICAgIHRhcmdldC5hcHBlbmRDaGlsZChzdHlsZSk7XG4gIH1cblxuICByZXR1cm4gc3R5bGU7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZSkge1xuICAvLyBpc3RhbmJ1bCBpZ25vcmUgaWZcbiAgaWYgKHN0eWxlLnBhcmVudE5vZGUgPT09IG51bGwpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBzdHlsZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN0eWxlKTtcbn1cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuXG5cbnZhciByZXBsYWNlVGV4dCA9IGZ1bmN0aW9uIHJlcGxhY2VUZXh0KCkge1xuICB2YXIgdGV4dFN0b3JlID0gW107XG4gIHJldHVybiBmdW5jdGlvbiByZXBsYWNlKGluZGV4LCByZXBsYWNlbWVudCkge1xuICAgIHRleHRTdG9yZVtpbmRleF0gPSByZXBsYWNlbWVudDtcbiAgICByZXR1cm4gdGV4dFN0b3JlLmZpbHRlcihCb29sZWFuKS5qb2luKCdcXG4nKTtcbiAgfTtcbn0oKTtcblxuZnVuY3Rpb24gYXBwbHlUb1NpbmdsZXRvblRhZyhzdHlsZSwgaW5kZXgsIHJlbW92ZSwgb2JqKSB7XG4gIHZhciBjc3MgPSByZW1vdmUgPyAnJyA6IG9iai5tZWRpYSA/IFwiQG1lZGlhIFwiLmNvbmNhdChvYmoubWVkaWEsIFwiIHtcIikuY29uY2F0KG9iai5jc3MsIFwifVwiKSA6IG9iai5jc3M7IC8vIEZvciBvbGQgSUVcblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgICovXG5cbiAgaWYgKHN0eWxlLnN0eWxlU2hlZXQpIHtcbiAgICBzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSByZXBsYWNlVGV4dChpbmRleCwgY3NzKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgY3NzTm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcyk7XG4gICAgdmFyIGNoaWxkTm9kZXMgPSBzdHlsZS5jaGlsZE5vZGVzO1xuXG4gICAgaWYgKGNoaWxkTm9kZXNbaW5kZXhdKSB7XG4gICAgICBzdHlsZS5yZW1vdmVDaGlsZChjaGlsZE5vZGVzW2luZGV4XSk7XG4gICAgfVxuXG4gICAgaWYgKGNoaWxkTm9kZXMubGVuZ3RoKSB7XG4gICAgICBzdHlsZS5pbnNlcnRCZWZvcmUoY3NzTm9kZSwgY2hpbGROb2Rlc1tpbmRleF0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHlsZS5hcHBlbmRDaGlsZChjc3NOb2RlKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gYXBwbHlUb1RhZyhzdHlsZSwgb3B0aW9ucywgb2JqKSB7XG4gIHZhciBjc3MgPSBvYmouY3NzO1xuICB2YXIgbWVkaWEgPSBvYmoubWVkaWE7XG4gIHZhciBzb3VyY2VNYXAgPSBvYmouc291cmNlTWFwO1xuXG4gIGlmIChtZWRpYSkge1xuICAgIHN0eWxlLnNldEF0dHJpYnV0ZSgnbWVkaWEnLCBtZWRpYSk7XG4gIH0gZWxzZSB7XG4gICAgc3R5bGUucmVtb3ZlQXR0cmlidXRlKCdtZWRpYScpO1xuICB9XG5cbiAgaWYgKHNvdXJjZU1hcCAmJiBidG9hKSB7XG4gICAgY3NzICs9IFwiXFxuLyojIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxcIi5jb25jYXQoYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKSwgXCIgKi9cIik7XG4gIH0gLy8gRm9yIG9sZCBJRVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAgKi9cblxuXG4gIGlmIChzdHlsZS5zdHlsZVNoZWV0KSB7XG4gICAgc3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gY3NzO1xuICB9IGVsc2Uge1xuICAgIHdoaWxlIChzdHlsZS5maXJzdENoaWxkKSB7XG4gICAgICBzdHlsZS5yZW1vdmVDaGlsZChzdHlsZS5maXJzdENoaWxkKTtcbiAgICB9XG5cbiAgICBzdHlsZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTtcbiAgfVxufVxuXG52YXIgc2luZ2xldG9uID0gbnVsbDtcbnZhciBzaW5nbGV0b25Db3VudGVyID0gMDtcblxuZnVuY3Rpb24gYWRkU3R5bGUob2JqLCBvcHRpb25zKSB7XG4gIHZhciBzdHlsZTtcbiAgdmFyIHVwZGF0ZTtcbiAgdmFyIHJlbW92ZTtcblxuICBpZiAob3B0aW9ucy5zaW5nbGV0b24pIHtcbiAgICB2YXIgc3R5bGVJbmRleCA9IHNpbmdsZXRvbkNvdW50ZXIrKztcbiAgICBzdHlsZSA9IHNpbmdsZXRvbiB8fCAoc2luZ2xldG9uID0gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpKTtcbiAgICB1cGRhdGUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGUsIHN0eWxlSW5kZXgsIGZhbHNlKTtcbiAgICByZW1vdmUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGUsIHN0eWxlSW5kZXgsIHRydWUpO1xuICB9IGVsc2Uge1xuICAgIHN0eWxlID0gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpO1xuICAgIHVwZGF0ZSA9IGFwcGx5VG9UYWcuYmluZChudWxsLCBzdHlsZSwgb3B0aW9ucyk7XG5cbiAgICByZW1vdmUgPSBmdW5jdGlvbiByZW1vdmUoKSB7XG4gICAgICByZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGUpO1xuICAgIH07XG4gIH1cblxuICB1cGRhdGUob2JqKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZVN0eWxlKG5ld09iaikge1xuICAgIGlmIChuZXdPYmopIHtcbiAgICAgIGlmIChuZXdPYmouY3NzID09PSBvYmouY3NzICYmIG5ld09iai5tZWRpYSA9PT0gb2JqLm1lZGlhICYmIG5ld09iai5zb3VyY2VNYXAgPT09IG9iai5zb3VyY2VNYXApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB1cGRhdGUob2JqID0gbmV3T2JqKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVtb3ZlKCk7XG4gICAgfVxuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChsaXN0LCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OyAvLyBGb3JjZSBzaW5nbGUtdGFnIHNvbHV0aW9uIG9uIElFNi05LCB3aGljaCBoYXMgYSBoYXJkIGxpbWl0IG9uIHRoZSAjIG9mIDxzdHlsZT5cbiAgLy8gdGFncyBpdCB3aWxsIGFsbG93IG9uIGEgcGFnZVxuXG4gIGlmICghb3B0aW9ucy5zaW5nbGV0b24gJiYgdHlwZW9mIG9wdGlvbnMuc2luZ2xldG9uICE9PSAnYm9vbGVhbicpIHtcbiAgICBvcHRpb25zLnNpbmdsZXRvbiA9IGlzT2xkSUUoKTtcbiAgfVxuXG4gIGxpc3QgPSBsaXN0IHx8IFtdO1xuICB2YXIgbGFzdElkZW50aWZpZXJzID0gbW9kdWxlc1RvRG9tKGxpc3QsIG9wdGlvbnMpO1xuICByZXR1cm4gZnVuY3Rpb24gdXBkYXRlKG5ld0xpc3QpIHtcbiAgICBuZXdMaXN0ID0gbmV3TGlzdCB8fCBbXTtcblxuICAgIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobmV3TGlzdCkgIT09ICdbb2JqZWN0IEFycmF5XScpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxhc3RJZGVudGlmaWVycy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGlkZW50aWZpZXIgPSBsYXN0SWRlbnRpZmllcnNbaV07XG4gICAgICB2YXIgaW5kZXggPSBnZXRJbmRleEJ5SWRlbnRpZmllcihpZGVudGlmaWVyKTtcbiAgICAgIHN0eWxlc0luRG9tW2luZGV4XS5yZWZlcmVuY2VzLS07XG4gICAgfVxuXG4gICAgdmFyIG5ld0xhc3RJZGVudGlmaWVycyA9IG1vZHVsZXNUb0RvbShuZXdMaXN0LCBvcHRpb25zKTtcblxuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBsYXN0SWRlbnRpZmllcnMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICB2YXIgX2lkZW50aWZpZXIgPSBsYXN0SWRlbnRpZmllcnNbX2ldO1xuXG4gICAgICB2YXIgX2luZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoX2lkZW50aWZpZXIpO1xuXG4gICAgICBpZiAoc3R5bGVzSW5Eb21bX2luZGV4XS5yZWZlcmVuY2VzID09PSAwKSB7XG4gICAgICAgIHN0eWxlc0luRG9tW19pbmRleF0udXBkYXRlcigpO1xuXG4gICAgICAgIHN0eWxlc0luRG9tLnNwbGljZShfaW5kZXgsIDEpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGxhc3RJZGVudGlmaWVycyA9IG5ld0xhc3RJZGVudGlmaWVycztcbiAgfTtcbn07IiwiLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2VcclxudGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGVcclxuTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuXHJcblRISVMgQ09ERSBJUyBQUk9WSURFRCBPTiBBTiAqQVMgSVMqIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuS0lORCwgRUlUSEVSIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIFdJVEhPVVQgTElNSVRBVElPTiBBTlkgSU1QTElFRFxyXG5XQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgVElUTEUsIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLFxyXG5NRVJDSEFOVEFCTElUWSBPUiBOT04tSU5GUklOR0VNRU5ULlxyXG5cclxuU2VlIHRoZSBBcGFjaGUgVmVyc2lvbiAyLjAgTGljZW5zZSBmb3Igc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zXHJcbmFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UgKi9cclxuXHJcbnZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24oZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgX19hc3NpZ24gPSBmdW5jdGlvbigpIHtcclxuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiBfX2Fzc2lnbih0KSB7XHJcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XHJcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkgdFtwXSA9IHNbcF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3Jlc3QocywgZSkge1xyXG4gICAgdmFyIHQgPSB7fTtcclxuICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKVxyXG4gICAgICAgIHRbcF0gPSBzW3BdO1xyXG4gICAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBwID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTsgaSA8IHAubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDAgJiYgT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHMsIHBbaV0pKVxyXG4gICAgICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07XHJcbiAgICAgICAgfVxyXG4gICAgcmV0dXJuIHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2RlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19wYXJhbShwYXJhbUluZGV4LCBkZWNvcmF0b3IpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHsgZGVjb3JhdG9yKHRhcmdldCwga2V5LCBwYXJhbUluZGV4KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSkge1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXRlcih0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2dlbmVyYXRvcih0aGlzQXJnLCBib2R5KSB7XHJcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xyXG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcclxuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XHJcbiAgICAgICAgd2hpbGUgKF8pIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcclxuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cclxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXhwb3J0U3RhcihtLCBleHBvcnRzKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3ZhbHVlcyhvKSB7XHJcbiAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwO1xyXG4gICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7XHJcbiAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHJldHVybiB7XHJcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwO1xyXG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/IFwiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS5cIiA6IFwiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVhZChvLCBuKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl07XHJcbiAgICBpZiAoIW0pIHJldHVybiBvO1xyXG4gICAgdmFyIGkgPSBtLmNhbGwobyksIHIsIGFyID0gW10sIGU7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHdoaWxlICgobiA9PT0gdm9pZCAwIHx8IG4tLSA+IDApICYmICEociA9IGkubmV4dCgpKS5kb25lKSBhci5wdXNoKHIudmFsdWUpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycm9yKSB7IGUgPSB7IGVycm9yOiBlcnJvciB9OyB9XHJcbiAgICBmaW5hbGx5IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVtcInJldHVyblwiXSkpIG0uY2FsbChpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7IGlmIChlKSB0aHJvdyBlLmVycm9yOyB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZCgpIHtcclxuICAgIGZvciAodmFyIGFyID0gW10sIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgIGFyID0gYXIuY29uY2F0KF9fcmVhZChhcmd1bWVudHNbaV0pKTtcclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXlzKCkge1xyXG4gICAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSBzICs9IGFyZ3VtZW50c1tpXS5sZW5ndGg7XHJcbiAgICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspXHJcbiAgICAgICAgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspXHJcbiAgICAgICAgICAgIHJba10gPSBhW2pdO1xyXG4gICAgcmV0dXJuIHI7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdCh2KSB7XHJcbiAgICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIF9fYXdhaXQgPyAodGhpcy52ID0gdiwgdGhpcykgOiBuZXcgX19hd2FpdCh2KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNHZW5lcmF0b3IodGhpc0FyZywgX2FyZ3VtZW50cywgZ2VuZXJhdG9yKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIGcgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSksIGksIHEgPSBbXTtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpZiAoZ1tuXSkgaVtuXSA9IGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoYSwgYikgeyBxLnB1c2goW24sIHYsIGEsIGJdKSA+IDEgfHwgcmVzdW1lKG4sIHYpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gcmVzdW1lKG4sIHYpIHsgdHJ5IHsgc3RlcChnW25dKHYpKTsgfSBjYXRjaCAoZSkgeyBzZXR0bGUocVswXVszXSwgZSk7IH0gfVxyXG4gICAgZnVuY3Rpb24gc3RlcChyKSB7IHIudmFsdWUgaW5zdGFuY2VvZiBfX2F3YWl0ID8gUHJvbWlzZS5yZXNvbHZlKHIudmFsdWUudikudGhlbihmdWxmaWxsLCByZWplY3QpIDogc2V0dGxlKHFbMF1bMl0sIHIpOyB9XHJcbiAgICBmdW5jdGlvbiBmdWxmaWxsKHZhbHVlKSB7IHJlc3VtZShcIm5leHRcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiByZWplY3QodmFsdWUpIHsgcmVzdW1lKFwidGhyb3dcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUoZiwgdikgeyBpZiAoZih2KSwgcS5zaGlmdCgpLCBxLmxlbmd0aCkgcmVzdW1lKHFbMF1bMF0sIHFbMF1bMV0pOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jRGVsZWdhdG9yKG8pIHtcclxuICAgIHZhciBpLCBwO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiLCBmdW5jdGlvbiAoZSkgeyB0aHJvdyBlOyB9KSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobiwgZikgeyBpW25dID0gb1tuXSA/IGZ1bmN0aW9uICh2KSB7IHJldHVybiAocCA9ICFwKSA/IHsgdmFsdWU6IF9fYXdhaXQob1tuXSh2KSksIGRvbmU6IG4gPT09IFwicmV0dXJuXCIgfSA6IGYgPyBmKHYpIDogdjsgfSA6IGY7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNWYWx1ZXMobykge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBtID0gb1tTeW1ib2wuYXN5bmNJdGVyYXRvcl0sIGk7XHJcbiAgICByZXR1cm4gbSA/IG0uY2FsbChvKSA6IChvID0gdHlwZW9mIF9fdmFsdWVzID09PSBcImZ1bmN0aW9uXCIgPyBfX3ZhbHVlcyhvKSA6IG9bU3ltYm9sLml0ZXJhdG9yXSgpLCBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaSk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaVtuXSA9IG9bbl0gJiYgZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdiA9IG9bbl0odiksIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHYuZG9uZSwgdi52YWx1ZSk7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCBkLCB2KSB7IFByb21pc2UucmVzb2x2ZSh2KS50aGVuKGZ1bmN0aW9uKHYpIHsgcmVzb2x2ZSh7IHZhbHVlOiB2LCBkb25lOiBkIH0pOyB9LCByZWplY3QpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ha2VUZW1wbGF0ZU9iamVjdChjb29rZWQsIHJhdykge1xyXG4gICAgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29va2VkLCBcInJhd1wiLCB7IHZhbHVlOiByYXcgfSk7IH0gZWxzZSB7IGNvb2tlZC5yYXcgPSByYXc7IH1cclxuICAgIHJldHVybiBjb29rZWQ7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnRTdGFyKG1vZCkge1xyXG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcclxuICAgIHZhciByZXN1bHQgPSB7fTtcclxuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSByZXN1bHRba10gPSBtb2Rba107XHJcbiAgICByZXN1bHQuZGVmYXVsdCA9IG1vZDtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydERlZmF1bHQobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IGRlZmF1bHQ6IG1vZCB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZEdldChyZWNlaXZlciwgcHJpdmF0ZU1hcCkge1xyXG4gICAgaWYgKCFwcml2YXRlTWFwLmhhcyhyZWNlaXZlcikpIHtcclxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIGdldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtcclxuICAgIH1cclxuICAgIHJldHVybiBwcml2YXRlTWFwLmdldChyZWNlaXZlcik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHJlY2VpdmVyLCBwcml2YXRlTWFwLCB2YWx1ZSkge1xyXG4gICAgaWYgKCFwcml2YXRlTWFwLmhhcyhyZWNlaXZlcikpIHtcclxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIHNldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtcclxuICAgIH1cclxuICAgIHByaXZhdGVNYXAuc2V0KHJlY2VpdmVyLCB2YWx1ZSk7XHJcbiAgICByZXR1cm4gdmFsdWU7XHJcbn1cclxuIiwidmFyIGc7XG5cbi8vIFRoaXMgd29ya3MgaW4gbm9uLXN0cmljdCBtb2RlXG5nID0gKGZ1bmN0aW9uKCkge1xuXHRyZXR1cm4gdGhpcztcbn0pKCk7XG5cbnRyeSB7XG5cdC8vIFRoaXMgd29ya3MgaWYgZXZhbCBpcyBhbGxvd2VkIChzZWUgQ1NQKVxuXHRnID0gZyB8fCBuZXcgRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpO1xufSBjYXRjaCAoZSkge1xuXHQvLyBUaGlzIHdvcmtzIGlmIHRoZSB3aW5kb3cgcmVmZXJlbmNlIGlzIGF2YWlsYWJsZVxuXHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJvYmplY3RcIikgZyA9IHdpbmRvdztcbn1cblxuLy8gZyBjYW4gc3RpbGwgYmUgdW5kZWZpbmVkLCBidXQgbm90aGluZyB0byBkbyBhYm91dCBpdC4uLlxuLy8gV2UgcmV0dXJuIHVuZGVmaW5lZCwgaW5zdGVhZCBvZiBub3RoaW5nIGhlcmUsIHNvIGl0J3Ncbi8vIGVhc2llciB0byBoYW5kbGUgdGhpcyBjYXNlLiBpZighZ2xvYmFsKSB7IC4uLn1cblxubW9kdWxlLmV4cG9ydHMgPSBnO1xuIiwiaW1wb3J0IEF1cmVsaWEgZnJvbSAnYXVyZWxpYSc7XHJcbmltcG9ydCB7IE15QXBwIH0gZnJvbSAnLi9teS1hcHAnO1xyXG5BdXJlbGlhXHJcbiAgICAuYXBwKE15QXBwKVxyXG4gICAgLnN0YXJ0KCk7XHJcbiIsIjxkaXYgY2xhc3M9XCJtZXNzYWdlXCI+JHttZXNzYWdlfTwvZGl2PlxuXG48YnV0dG9uIGNsaWNrLmRlbGVnYXRlPVwidGVzdCgpXCI+VEVTVDwvYnV0dG9uPlxuIiwidmFyIGFwaSA9IHJlcXVpcmUoXCIhLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzXCIpO1xuICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuLi9ub2RlX21vZHVsZXMvcG9zdGNzcy1sb2FkZXIvc3JjL2luZGV4LmpzPz9yZWYtLTktMiEuLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvZGlzdC9janMuanM/P3JlZi0tOS0zIS4vbXktYXBwLnNjc3NcIik7XG5cbiAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50Ll9fZXNNb2R1bGUgPyBjb250ZW50LmRlZmF1bHQgOiBjb250ZW50O1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcbiAgICAgICAgICAgIH1cblxudmFyIG9wdGlvbnMgPSB7fTtcblxub3B0aW9ucy5pbnNlcnQgPSBcImhlYWRcIjtcbm9wdGlvbnMuc2luZ2xldG9uID0gZmFsc2U7XG5cbnZhciB1cGRhdGUgPSBhcGkoY29udGVudCwgb3B0aW9ucyk7XG5cbnZhciBleHBvcnRlZCA9IGNvbnRlbnQubG9jYWxzID8gY29udGVudC5sb2NhbHMgOiB7fTtcblxuXG5cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0ZWQ7IiwidmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufTtcclxuaW1wb3J0ICogYXMgX19hdTJWaWV3RGVmIGZyb20gJy4vbXktYXBwLmh0bWwnO1xyXG5pbXBvcnQgeyBjdXN0b21FbGVtZW50IH0gZnJvbSAnQGF1cmVsaWEvcnVudGltZSc7XHJcbmxldCBNeUFwcCA9IGNsYXNzIE15QXBwIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMubWVzc2FnZSA9ICdIZWxsbyBXb3JsZCEnO1xyXG4gICAgfVxyXG4gICAgdGVzdCgpIHtcclxuICAgICAgICBhbGVydCgndGVzdCcpO1xyXG4gICAgfVxyXG59O1xyXG5NeUFwcCA9IF9fZGVjb3JhdGUoW1xyXG4gICAgY3VzdG9tRWxlbWVudChfX2F1MlZpZXdEZWYpXHJcbl0sIE15QXBwKTtcclxuZXhwb3J0IHsgTXlBcHAgfTtcclxuIl0sInNvdXJjZVJvb3QiOiIifQ==